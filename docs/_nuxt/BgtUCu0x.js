const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BqYBw_iy.js","./C_-jjZmL.js","./BcN-N_pM.js","./page-i18n.DLlYS0Os.css","./index.Tnfpl8tW.css","./BPBAvWHB.js","./BL8Z1Bdo.js","./military.CxrAKAD9.css","./BJU16KN_.js","./D0tpFfJU.js"])))=>i.map(i=>d[i]);
function kL(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const r=Object.getOwnPropertyDescriptor(s,o);r&&Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zb(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const wt={},ec=[],$o=()=>{},$L=()=>!1,mu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wb=t=>t.startsWith("onUpdate:"),Jt=Object.assign,Gb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},TL=Object.prototype.hasOwnProperty,ut=(t,e)=>TL.call(t,e),Be=Array.isArray,tc=t=>Vc(t)==="[object Map]",$I=t=>Vc(t)==="[object Set]",H1=t=>Vc(t)==="[object Date]",NL=t=>Vc(t)==="[object RegExp]",je=t=>typeof t=="function",Ot=t=>typeof t=="string",ro=t=>typeof t=="symbol",bt=t=>t!==null&&typeof t=="object",Hb=t=>(bt(t)||je(t))&&je(t.then)&&je(t.catch),TI=Object.prototype.toString,Vc=t=>TI.call(t),AL=t=>Vc(t).slice(8,-1),NI=t=>Vc(t)==="[object Object]",Kb=t=>Ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,nc=zb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kf=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},RL=/-(\w)/g,Ms=Kf(t=>t.replace(RL,(e,n)=>n?n.toUpperCase():"")),DL=/\B([A-Z])/g,pa=Kf(t=>t.replace(DL,"-$1").toLowerCase()),qf=Kf(t=>t.charAt(0).toUpperCase()+t.slice(1)),eg=Kf(t=>t?`on${qf(t)}`:""),Fr=(t,e)=>!Object.is(t,e),sc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},AI=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},sv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},RI=t=>{const e=Ot(t)?Number(t):NaN;return isNaN(e)?t:e};let K1;const Xf=()=>K1||(K1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qb(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=Ot(s)?PL(s):qb(s);if(o)for(const r in o)e[r]=o[r]}return e}else if(Ot(t)||bt(t))return t}const OL=/;(?![^(]*\))/g,LL=/:([^]+)/,FL=/\/\*[^]*?\*\//g;function PL(t){const e={};return t.replace(FL,"").split(OL).forEach(n=>{if(n){const s=n.split(LL);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Xb(t){let e="";if(Ot(t))e=t;else if(Be(t))for(let n=0;n<t.length;n++){const s=Xb(t[n]);s&&(e+=s+" ")}else if(bt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ML="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",BL=zb(ML);function DI(t){return!!t||t===""}function VL(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Bh(t[s],e[s]);return n}function Bh(t,e){if(t===e)return!0;let n=H1(t),s=H1(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ro(t),s=ro(e),n||s)return t===e;if(n=Be(t),s=Be(e),n||s)return n&&s?VL(t,e):!1;if(n=bt(t),s=bt(e),n||s){if(!n||!s)return!1;const o=Object.keys(t).length,r=Object.keys(e).length;if(o!==r)return!1;for(const i in t){const a=t.hasOwnProperty(i),c=e.hasOwnProperty(i);if(a&&!c||!a&&c||!Bh(t[i],e[i]))return!1}}return String(t)===String(e)}const OI=t=>!!(t&&t.__v_isRef===!0),gt=t=>Ot(t)?t:t==null?"":Be(t)||bt(t)&&(t.toString===TI||!je(t.toString))?OI(t)?gt(t.value):JSON.stringify(t,LI,2):String(t),LI=(t,e)=>OI(e)?LI(t,e.value):tc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,o],r)=>(n[tg(s,r)+" =>"]=o,n),{})}:$I(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>tg(n))}:ro(e)?tg(e):bt(e)&&!Be(e)&&!NI(e)?String(e):e,tg=(t,e="")=>{var n;return ro(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Un;class FI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Un,!e&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Un;try{return Un=this,e()}finally{Un=n}}}on(){Un=this}off(){Un=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function PI(t){return new FI(t)}function Qb(){return Un}function q1(t,e=!1){Un&&Un.cleanups.push(t)}let _t;const ng=new WeakSet;class MI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Un&&Un.active&&Un.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ng.has(this)&&(ng.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||VI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,X1(this),UI(this);const e=_t,n=eo;_t=this,eo=!0;try{return this.fn()}finally{jI(this),_t=e,eo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zb(e);this.deps=this.depsTail=void 0,X1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ng.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ov(this)&&this.run()}get dirty(){return ov(this)}}let BI=0,$l,Tl;function VI(t,e=!1){if(t.flags|=8,e){t.next=Tl,Tl=t;return}t.next=$l,$l=t}function Yb(){BI++}function Jb(){if(--BI>0)return;if(Tl){let e=Tl;for(Tl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;$l;){let e=$l;for($l=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function UI(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jI(t){let e,n=t.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Zb(s),UL(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}t.deps=e,t.depsTail=n}function ov(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zI(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===jl))return;t.globalVersion=jl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!ov(t)){t.flags&=-3;return}const n=_t,s=eo;_t=t,eo=!0;try{UI(t);const o=t.fn(t._value);(e.version===0||Fr(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{_t=n,eo=s,jI(t),t.flags&=-3}}function Zb(t,e=!1){const{dep:n,prevSub:s,nextSub:o}=t;if(s&&(s.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Zb(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function UL(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let eo=!0;const WI=[];function ei(){WI.push(eo),eo=!1}function ti(){const t=WI.pop();eo=t===void 0?!0:t}function X1(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=_t;_t=void 0;try{e()}finally{_t=n}}}let jl=0;class jL{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ey{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!_t||!eo||_t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_t)n=this.activeLink=new jL(_t,this),_t.deps?(n.prevDep=_t.depsTail,_t.depsTail.nextDep=n,_t.depsTail=n):_t.deps=_t.depsTail=n,GI(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=_t.depsTail,n.nextDep=void 0,_t.depsTail.nextDep=n,_t.depsTail=n,_t.deps===n&&(_t.deps=s)}return n}trigger(e){this.version++,jl++,this.notify(e)}notify(e){Yb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jb()}}}function GI(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)GI(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Vh=new WeakMap,Bi=Symbol(""),rv=Symbol(""),zl=Symbol("");function Tn(t,e,n){if(eo&&_t){let s=Vh.get(t);s||Vh.set(t,s=new Map);let o=s.get(n);o||(s.set(n,o=new ey),o.map=s,o.key=n),o.track()}}function Jo(t,e,n,s,o,r){const i=Vh.get(t);if(!i){jl++;return}const a=c=>{c&&c.trigger()};if(Yb(),e==="clear")i.forEach(a);else{const c=Be(t),l=c&&Kb(n);if(c&&n==="length"){const u=Number(s);i.forEach((d,h)=>{(h==="length"||h===zl||!ro(h)&&h>=u)&&a(d)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),l&&a(i.get(zl)),e){case"add":c?l&&a(i.get("length")):(a(i.get(Bi)),tc(t)&&a(i.get(rv)));break;case"delete":c||(a(i.get(Bi)),tc(t)&&a(i.get(rv)));break;case"set":tc(t)&&a(i.get(Bi));break}}Jb()}function zL(t,e){const n=Vh.get(t);return n&&n.get(e)}function Aa(t){const e=st(t);return e===t?e:(Tn(e,"iterate",zl),Fs(t)?e:e.map(Nn))}function Qf(t){return Tn(t=st(t),"iterate",zl),t}const WL={__proto__:null,[Symbol.iterator](){return sg(this,Symbol.iterator,Nn)},concat(...t){return Aa(this).concat(...t.map(e=>Be(e)?Aa(e):e))},entries(){return sg(this,"entries",t=>(t[1]=Nn(t[1]),t))},every(t,e){return Ko(this,"every",t,e,void 0,arguments)},filter(t,e){return Ko(this,"filter",t,e,n=>n.map(Nn),arguments)},find(t,e){return Ko(this,"find",t,e,Nn,arguments)},findIndex(t,e){return Ko(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ko(this,"findLast",t,e,Nn,arguments)},findLastIndex(t,e){return Ko(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ko(this,"forEach",t,e,void 0,arguments)},includes(...t){return og(this,"includes",t)},indexOf(...t){return og(this,"indexOf",t)},join(t){return Aa(this).join(t)},lastIndexOf(...t){return og(this,"lastIndexOf",t)},map(t,e){return Ko(this,"map",t,e,void 0,arguments)},pop(){return cl(this,"pop")},push(...t){return cl(this,"push",t)},reduce(t,...e){return Q1(this,"reduce",t,e)},reduceRight(t,...e){return Q1(this,"reduceRight",t,e)},shift(){return cl(this,"shift")},some(t,e){return Ko(this,"some",t,e,void 0,arguments)},splice(...t){return cl(this,"splice",t)},toReversed(){return Aa(this).toReversed()},toSorted(t){return Aa(this).toSorted(t)},toSpliced(...t){return Aa(this).toSpliced(...t)},unshift(...t){return cl(this,"unshift",t)},values(){return sg(this,"values",Nn)}};function sg(t,e,n){const s=Qf(t),o=s[e]();return s!==t&&!Fs(t)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.value&&(r.value=n(r.value)),r}),o}const GL=Array.prototype;function Ko(t,e,n,s,o,r){const i=Qf(t),a=i!==t&&!Fs(t),c=i[e];if(c!==GL[e]){const d=c.apply(t,r);return a?Nn(d):d}let l=n;i!==t&&(a?l=function(d,h){return n.call(this,Nn(d),h,t)}:n.length>2&&(l=function(d,h){return n.call(this,d,h,t)}));const u=c.call(i,l,s);return a&&o?o(u):u}function Q1(t,e,n,s){const o=Qf(t);let r=n;return o!==t&&(Fs(t)?n.length>3&&(r=function(i,a,c){return n.call(this,i,a,c,t)}):r=function(i,a,c){return n.call(this,i,Nn(a),c,t)}),o[e](r,...s)}function og(t,e,n){const s=st(t);Tn(s,"iterate",zl);const o=s[e](...n);return(o===-1||o===!1)&&sy(n[0])?(n[0]=st(n[0]),s[e](...n)):o}function cl(t,e,n=[]){ei(),Yb();const s=st(t)[e].apply(t,n);return Jb(),ti(),s}const HL=zb("__proto__,__v_isRef,__isVue"),HI=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ro));function KL(t){ro(t)||(t=String(t));const e=st(this);return Tn(e,"has",t),e.hasOwnProperty(t)}class KI{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?sF:YI:r?QI:XI).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const i=Be(e);if(!o){let c;if(i&&(c=WL[n]))return c;if(n==="hasOwnProperty")return KL}const a=Reflect.get(e,n,ln(e)?e:s);return(ro(n)?HI.has(n):HL(n))||(o||Tn(e,"get",n),r)?a:ln(a)?i&&Kb(n)?a:a.value:bt(a)?o?JI(a):Wo(a):a}}class qI extends KI{constructor(e=!1){super(!1,e)}set(e,n,s,o){let r=e[n];if(!this._isShallow){const c=Wr(r);if(!Fs(s)&&!Wr(s)&&(r=st(r),s=st(s)),!Be(e)&&ln(r)&&!ln(s))return c?!1:(r.value=s,!0)}const i=Be(e)&&Kb(n)?Number(n)<e.length:ut(e,n),a=Reflect.set(e,n,s,ln(e)?e:o);return e===st(o)&&(i?Fr(s,r)&&Jo(e,"set",n,s):Jo(e,"add",n,s)),a}deleteProperty(e,n){const s=ut(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&s&&Jo(e,"delete",n,void 0),o}has(e,n){const s=Reflect.has(e,n);return(!ro(n)||!HI.has(n))&&Tn(e,"has",n),s}ownKeys(e){return Tn(e,"iterate",Be(e)?"length":Bi),Reflect.ownKeys(e)}}class qL extends KI{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const XL=new qI,QL=new qL,YL=new qI(!0);const iv=t=>t,qd=t=>Reflect.getPrototypeOf(t);function JL(t,e,n){return function(...s){const o=this.__v_raw,r=st(o),i=tc(r),a=t==="entries"||t===Symbol.iterator&&i,c=t==="keys"&&i,l=o[t](...s),u=n?iv:e?av:Nn;return!e&&Tn(r,"iterate",c?rv:Bi),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Xd(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ZL(t,e){const n={get(o){const r=this.__v_raw,i=st(r),a=st(o);t||(Fr(o,a)&&Tn(i,"get",o),Tn(i,"get",a));const{has:c}=qd(i),l=e?iv:t?av:Nn;if(c.call(i,o))return l(r.get(o));if(c.call(i,a))return l(r.get(a));r!==i&&r.get(o)},get size(){const o=this.__v_raw;return!t&&Tn(st(o),"iterate",Bi),Reflect.get(o,"size",o)},has(o){const r=this.__v_raw,i=st(r),a=st(o);return t||(Fr(o,a)&&Tn(i,"has",o),Tn(i,"has",a)),o===a?r.has(o):r.has(o)||r.has(a)},forEach(o,r){const i=this,a=i.__v_raw,c=st(a),l=e?iv:t?av:Nn;return!t&&Tn(c,"iterate",Bi),a.forEach((u,d)=>o.call(r,l(u),l(d),i))}};return Jt(n,t?{add:Xd("add"),set:Xd("set"),delete:Xd("delete"),clear:Xd("clear")}:{add(o){!e&&!Fs(o)&&!Wr(o)&&(o=st(o));const r=st(this);return qd(r).has.call(r,o)||(r.add(o),Jo(r,"add",o,o)),this},set(o,r){!e&&!Fs(r)&&!Wr(r)&&(r=st(r));const i=st(this),{has:a,get:c}=qd(i);let l=a.call(i,o);l||(o=st(o),l=a.call(i,o));const u=c.call(i,o);return i.set(o,r),l?Fr(r,u)&&Jo(i,"set",o,r):Jo(i,"add",o,r),this},delete(o){const r=st(this),{has:i,get:a}=qd(r);let c=i.call(r,o);c||(o=st(o),c=i.call(r,o)),a&&a.call(r,o);const l=r.delete(o);return c&&Jo(r,"delete",o,void 0),l},clear(){const o=st(this),r=o.size!==0,i=o.clear();return r&&Jo(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=JL(o,t,e)}),n}function ty(t,e){const n=ZL(t,e);return(s,o,r)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?s:Reflect.get(ut(n,o)&&o in s?n:s,o,r)}const eF={get:ty(!1,!1)},tF={get:ty(!1,!0)},nF={get:ty(!0,!1)};const XI=new WeakMap,QI=new WeakMap,YI=new WeakMap,sF=new WeakMap;function oF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rF(t){return t.__v_skip||!Object.isExtensible(t)?0:oF(AL(t))}function Wo(t){return Wr(t)?t:ny(t,!1,XL,eF,XI)}function tr(t){return ny(t,!1,YL,tF,QI)}function JI(t){return ny(t,!0,QL,nF,YI)}function ny(t,e,n,s,o){if(!bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=o.get(t);if(r)return r;const i=rF(t);if(i===0)return t;const a=new Proxy(t,i===2?s:n);return o.set(t,a),a}function Vi(t){return Wr(t)?Vi(t.__v_raw):!!(t&&t.__v_isReactive)}function Wr(t){return!!(t&&t.__v_isReadonly)}function Fs(t){return!!(t&&t.__v_isShallow)}function sy(t){return t?!!t.__v_raw:!1}function st(t){const e=t&&t.__v_raw;return e?st(e):t}function iF(t){return!ut(t,"__v_skip")&&Object.isExtensible(t)&&AI(t,"__v_skip",!0),t}const Nn=t=>bt(t)?Wo(t):t,av=t=>bt(t)?JI(t):t;function ln(t){return t?t.__v_isRef===!0:!1}function is(t){return ZI(t,!1)}function qi(t){return ZI(t,!0)}function ZI(t,e){return ln(t)?t:new aF(t,e)}class aF{constructor(e,n){this.dep=new ey,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:st(e),this._value=n?e:Nn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Fs(e)||Wr(e);e=s?e:st(e),Fr(e,n)&&(this._rawValue=e,this._value=s?e:Nn(e),this.dep.trigger())}}function Ge(t){return ln(t)?t.value:t}function $i(t){return je(t)?t():Ge(t)}const cF={get:(t,e,n)=>e==="__v_raw"?t:Ge(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const o=t[e];return ln(o)&&!ln(n)?(o.value=n,!0):Reflect.set(t,e,n,s)}};function eE(t){return Vi(t)?t:new Proxy(t,cF)}function o1e(t){const e=Be(t)?new Array(t.length):{};for(const n in t)e[n]=nE(t,n);return e}class lF{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return zL(st(this._object),this._key)}}class uF{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function tE(t,e,n){return ln(t)?t:je(t)?new uF(t):bt(t)&&arguments.length>1?nE(t,e,n):is(t)}function nE(t,e,n){const s=t[e];return ln(s)?s:new lF(t,e,n)}class dF{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ey(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&_t!==this)return VI(this,!0),!0}get value(){const e=this.dep.track();return zI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function hF(t,e,n=!1){let s,o;return je(t)?s=t:(s=t.get,o=t.set),new dF(s,o,n)}const Qd={},Uh=new WeakMap;let Ii;function fF(t,e=!1,n=Ii){if(n){let s=Uh.get(n);s||Uh.set(n,s=[]),s.push(t)}}function pF(t,e,n=wt){const{immediate:s,deep:o,once:r,scheduler:i,augmentJob:a,call:c}=n,l=y=>o?y:Fs(y)||o===!1||o===0?Zo(y,1):Zo(y);let u,d,h,f,p=!1,m=!1;if(ln(t)?(d=()=>t.value,p=Fs(t)):Vi(t)?(d=()=>l(t),p=!0):Be(t)?(m=!0,p=t.some(y=>Vi(y)||Fs(y)),d=()=>t.map(y=>{if(ln(y))return y.value;if(Vi(y))return l(y);if(je(y))return c?c(y,2):y()})):je(t)?e?d=c?()=>c(t,2):t:d=()=>{if(h){ei();try{h()}finally{ti()}}const y=Ii;Ii=u;try{return c?c(t,3,[f]):t(f)}finally{Ii=y}}:d=$o,e&&o){const y=d,w=o===!0?1/0:o;d=()=>Zo(y(),w)}const v=Qb(),g=()=>{u.stop(),v&&Gb(v.effects,u)};if(r&&e){const y=e;e=(...w)=>{y(...w),g()}}let b=m?new Array(t.length).fill(Qd):Qd;const x=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(e){const w=u.run();if(o||p||(m?w.some((C,_)=>Fr(C,b[_])):Fr(w,b))){h&&h();const C=Ii;Ii=u;try{const _=[w,b===Qd?void 0:m&&b[0]===Qd?[]:b,f];c?c(e,3,_):e(..._),b=w}finally{Ii=C}}}else u.run()};return a&&a(x),u=new MI(d),u.scheduler=i?()=>i(x,!1):x,f=y=>fF(y,!1,u),h=u.onStop=()=>{const y=Uh.get(u);if(y){if(c)c(y,4);else for(const w of y)w();Uh.delete(u)}},e?s?x(!0):b=u.run():i?i(x.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function Zo(t,e=1/0,n){if(e<=0||!bt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ln(t))Zo(t.value,e,n);else if(Be(t))for(let s=0;s<t.length;s++)Zo(t[s],e,n);else if($I(t)||tc(t))t.forEach(s=>{Zo(s,e,n)});else if(NI(t)){for(const s in t)Zo(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Zo(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gu(t,e,n,s){try{return s?t(...s):t()}catch(o){vu(o,e,n)}}function io(t,e,n,s){if(je(t)){const o=gu(t,e,n,s);return o&&Hb(o)&&o.catch(r=>{vu(r,e,n)}),o}if(Be(t)){const o=[];for(let r=0;r<t.length;r++)o.push(io(t[r],e,n,s));return o}}function vu(t,e,n,s=!0){const o=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||wt;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,c,l)===!1)return}a=a.parent}if(r){ei(),gu(r,null,10,[t,c,l]),ti();return}}mF(t,n,o,s,i)}function mF(t,e,n,s=!0,o=!1){if(o)throw t;console.error(t)}const zn=[];let yo=-1;const oc=[];let Ir=null,Ba=0;const sE=Promise.resolve();let jh=null;function Uc(t){const e=jh||sE;return t?e.then(this?t.bind(this):t):e}function gF(t){let e=yo+1,n=zn.length;for(;e<n;){const s=e+n>>>1,o=zn[s],r=Wl(o);r<t||r===t&&o.flags&2?e=s+1:n=s}return e}function oy(t){if(!(t.flags&1)){const e=Wl(t),n=zn[zn.length-1];!n||!(t.flags&2)&&e>=Wl(n)?zn.push(t):zn.splice(gF(e),0,t),t.flags|=1,oE()}}function oE(){jh||(jh=sE.then(rE))}function cv(t){Be(t)?oc.push(...t):Ir&&t.id===-1?Ir.splice(Ba+1,0,t):t.flags&1||(oc.push(t),t.flags|=1),oE()}function Y1(t,e,n=yo+1){for(;n<zn.length;n++){const s=zn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;zn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function zh(t){if(oc.length){const e=[...new Set(oc)].sort((n,s)=>Wl(n)-Wl(s));if(oc.length=0,Ir){Ir.push(...e);return}for(Ir=e,Ba=0;Ba<Ir.length;Ba++){const n=Ir[Ba];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ir=null,Ba=0}}const Wl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function rE(t){try{for(yo=0;yo<zn.length;yo++){const e=zn[yo];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),gu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yo<zn.length;yo++){const e=zn[yo];e&&(e.flags&=-2)}yo=-1,zn.length=0,zh(),jh=null,(zn.length||oc.length)&&rE()}}let an=null,iE=null;function Wh(t){const e=an;return an=t,iE=t&&t.type.__scopeId||null,e}function fs(t,e=an,n){if(!e||t._n)return t;const s=(...o)=>{s._d&&uw(-1);const r=Wh(e);let i;try{i=t(...o)}finally{Wh(r),s._d&&uw(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function r1e(t,e){if(an===null)return t;const n=tp(an),s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[r,i,a,c=wt]=e[o];r&&(je(r)&&(r={mounted:r,updated:r}),r.deep&&Zo(i),s.push({dir:r,instance:n,value:i,oldValue:void 0,arg:a,modifiers:c}))}return t}function wo(t,e,n,s){const o=t.dirs,r=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let c=a.dir[s];c&&(ei(),io(c,n,8,[t.el,a,t,e]),ti())}}const vF=Symbol("_vte"),aE=t=>t.__isTeleport,Er=Symbol("_leaveCb"),Yd=Symbol("_enterCb");function bF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bu(()=>{t.isMounted=!0}),yu(()=>{t.isUnmounting=!0}),t}const Ss=[Function,Array],cE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ss,onEnter:Ss,onAfterEnter:Ss,onEnterCancelled:Ss,onBeforeLeave:Ss,onLeave:Ss,onAfterLeave:Ss,onLeaveCancelled:Ss,onBeforeAppear:Ss,onAppear:Ss,onAfterAppear:Ss,onAppearCancelled:Ss},lE=t=>{const e=t.subTree;return e.component?lE(e.component):e},yF={name:"BaseTransition",props:cE,setup(t,{slots:e}){const n=ao(),s=bF();return()=>{const o=e.default&&hE(e.default(),!0);if(!o||!o.length)return;const r=uE(o),i=st(t),{mode:a}=i;if(s.isLeaving)return rg(r);const c=J1(r);if(!c)return rg(r);let l=lv(c,i,s,n,h=>l=h);c.type!==sn&&fc(c,l);const u=n.subTree,d=u&&J1(u);if(d&&d.type!==sn&&!Js(c,d)&&lE(n).type!==sn){const h=lv(d,i,s,n);if(fc(d,h),a==="out-in"&&c.type!==sn)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave},rg(r);a==="in-out"&&c.type!==sn&&(h.delayLeave=(f,p,m)=>{const v=dE(s,d);v[String(d.key)]=d,f[Er]=()=>{p(),f[Er]=void 0,delete l.delayedLeave},l.delayedLeave=m})}return r}}};function uE(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==sn){e=n;break}}return e}const xF=yF;function dE(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function lv(t,e,n,s,o){const{appear:r,mode:i,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:b,onAppearCancelled:x}=e,y=String(t.key),w=dE(n,t),C=(I,E)=>{I&&io(I,s,9,E)},_=(I,E)=>{const O=E[1];C(I,E),Be(I)?I.every(A=>A.length<=1)&&O():I.length<=1&&O()},S={mode:i,persisted:a,beforeEnter(I){let E=c;if(!n.isMounted)if(r)E=v||c;else return;I[Er]&&I[Er](!0);const O=w[y];O&&Js(t,O)&&O.el[Er]&&O.el[Er](),C(E,[I])},enter(I){let E=l,O=u,A=d;if(!n.isMounted)if(r)E=g||l,O=b||u,A=x||d;else return;let P=!1;const z=I[Yd]=G=>{P||(P=!0,G?C(A,[I]):C(O,[I]),S.delayedLeave&&S.delayedLeave(),I[Yd]=void 0)};E?_(E,[I,z]):z()},leave(I,E){const O=String(t.key);if(I[Yd]&&I[Yd](!0),n.isUnmounting)return E();C(h,[I]);let A=!1;const P=I[Er]=z=>{A||(A=!0,E(),z?C(m,[I]):C(p,[I]),I[Er]=void 0,w[O]===t&&delete w[O])};w[O]=t,f?_(f,[I,P]):P()},clone(I){const E=lv(I,e,n,s,o);return o&&o(E),E}};return S}function rg(t){if(Yf(t))return t=cr(t),t.children=null,t}function J1(t){if(!Yf(t))return aE(t.type)&&t.children?uE(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&je(n.default))return n.default()}}function fc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,fc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hE(t,e=!1,n){let s=[],o=0;for(let r=0;r<t.length;r++){let i=t[r];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===Ht?(i.patchFlag&128&&o++,s=s.concat(hE(i.children,e,a))):(e||i.type!==sn)&&s.push(a!=null?cr(i,{key:a}):i)}if(o>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Sn(t,e){return je(t)?Jt({name:t.name},e,{setup:t}):t}function fE(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Gh(t,e,n,s,o=!1){if(Be(t)){t.forEach((p,m)=>Gh(p,e&&(Be(e)?e[m]:e),n,s,o));return}if(Pr(s)&&!o)return;const r=s.shapeFlag&4?tp(s.component):s.el,i=o?null:r,{i:a,r:c}=t,l=e&&e.r,u=a.refs===wt?a.refs={}:a.refs,d=a.setupState,h=st(d),f=d===wt?()=>!1:p=>ut(h,p);if(l!=null&&l!==c&&(Ot(l)?(u[l]=null,f(l)&&(d[l]=null)):ln(l)&&(l.value=null)),je(c))gu(c,a,12,[i,u]);else{const p=Ot(c),m=ln(c);if(p||m){const v=()=>{if(t.f){const g=p?f(c)?d[c]:u[c]:c.value;o?Be(g)&&Gb(g,r):Be(g)?g.includes(r)||g.push(r):p?(u[c]=[r],f(c)&&(d[c]=u[c])):(c.value=[r],t.k&&(u[t.k]=c.value))}else p?(u[c]=i,f(c)&&(d[c]=i)):m&&(c.value=i,t.k&&(u[t.k]=i))};i?(v.id=-1,yn(v,n)):v()}}}let Z1=!1;const Ra=()=>{Z1||(console.error("Hydration completed but contains mismatches."),Z1=!0)},wF=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",CF=t=>t.namespaceURI.includes("MathML"),Jd=t=>{if(t.nodeType===1){if(wF(t))return"svg";if(CF(t))return"mathml"}},Zd=t=>t.nodeType===8;function _F(t){const{mt:e,p:n,o:{patchProp:s,createText:o,nextSibling:r,parentNode:i,remove:a,insert:c,createComment:l}}=t,u=(x,y)=>{if(!y.hasChildNodes()){n(null,x,y),zh(),y._vnode=x;return}d(y.firstChild,x,null,null,null),zh(),y._vnode=x},d=(x,y,w,C,_,S=!1)=>{S=S||!!y.dynamicChildren;const I=Zd(x)&&x.data==="[",E=()=>m(x,y,w,C,_,I),{type:O,ref:A,shapeFlag:P,patchFlag:z}=y;let G=x.nodeType;y.el=x,z===-2&&(S=!1,y.dynamicChildren=null);let M=null;switch(O){case Mr:G!==3?y.children===""?(c(y.el=o(""),i(x),x),M=x):M=E():(x.data!==y.children&&(Ra(),x.data=y.children),M=r(x));break;case sn:b(x)?(M=r(x),g(y.el=x.content.firstChild,x,w)):G!==8||I?M=E():M=r(x);break;case Al:if(I&&(x=r(x),G=x.nodeType),G===1||G===3){M=x;const R=!y.children.length;for(let D=0;D<y.staticCount;D++)R&&(y.children+=M.nodeType===1?M.outerHTML:M.data),D===y.staticCount-1&&(y.anchor=M),M=r(M);return I?r(M):M}else E();break;case Ht:I?M=p(x,y,w,C,_,S):M=E();break;default:if(P&1)(G!==1||y.type.toLowerCase()!==x.tagName.toLowerCase())&&!b(x)?M=E():M=h(x,y,w,C,_,S);else if(P&6){y.slotScopeIds=_;const R=i(x);if(I?M=v(x):Zd(x)&&x.data==="teleport start"?M=v(x,x.data,"teleport end"):M=r(x),e(y,R,null,w,C,Jd(R),S),Pr(y)){let D;I?(D=Je(Ht),D.anchor=M?M.previousSibling:R.lastChild):D=x.nodeType===3?xn(""):Je("div"),D.el=x,y.component.subTree=D}}else P&64?G!==8?M=E():M=y.type.hydrate(x,y,w,C,_,S,t,f):P&128&&(M=y.type.hydrate(x,y,w,C,Jd(i(x)),_,S,t,d))}return A!=null&&Gh(A,null,C,y),M},h=(x,y,w,C,_,S)=>{S=S||!!y.dynamicChildren;const{type:I,props:E,patchFlag:O,shapeFlag:A,dirs:P,transition:z}=y,G=I==="input"||I==="option";if(G||O!==-1){P&&wo(y,null,w,"created");let M=!1;if(b(x)){M=LE(null,z)&&w&&w.vnode.props&&w.vnode.props.appear;const D=x.content.firstChild;M&&z.beforeEnter(D),g(D,x,w),y.el=x=D}if(A&16&&!(E&&(E.innerHTML||E.textContent))){let D=f(x.firstChild,y,x,w,C,_,S);for(;D;){eh(x,1)||Ra();const j=D;D=D.nextSibling,a(j)}}else if(A&8){let D=y.children;D[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(D=D.slice(1)),x.textContent!==D&&(eh(x,0)||Ra(),x.textContent=y.children)}if(E){if(G||!S||O&48){const D=x.tagName.includes("-");for(const j in E)(G&&(j.endsWith("value")||j==="indeterminate")||mu(j)&&!nc(j)||j[0]==="."||D)&&s(x,j,null,E[j],void 0,w)}else if(E.onClick)s(x,"onClick",null,E.onClick,void 0,w);else if(O&4&&Vi(E.style))for(const D in E.style)E.style[D]}let R;(R=E&&E.onVnodeBeforeMount)&&es(R,w,y),P&&wo(y,null,w,"beforeMount"),((R=E&&E.onVnodeMounted)||P||M)&&UE(()=>{R&&es(R,w,y),M&&z.enter(x),P&&wo(y,null,w,"mounted")},C)}return x.nextSibling},f=(x,y,w,C,_,S,I)=>{I=I||!!y.dynamicChildren;const E=y.children,O=E.length;for(let A=0;A<O;A++){const P=I?E[A]:E[A]=ps(E[A]),z=P.type===Mr;x?(z&&!I&&A+1<O&&ps(E[A+1]).type===Mr&&(c(o(x.data.slice(P.children.length)),w,r(x)),x.data=P.children),x=d(x,P,C,_,S,I)):z&&!P.children?c(P.el=o(""),w):(eh(w,1)||Ra(),n(null,P,w,null,C,_,Jd(w),S))}return x},p=(x,y,w,C,_,S)=>{const{slotScopeIds:I}=y;I&&(_=_?_.concat(I):I);const E=i(x),O=f(r(x),y,E,w,C,_,S);return O&&Zd(O)&&O.data==="]"?r(y.anchor=O):(Ra(),c(y.anchor=l("]"),E,O),O)},m=(x,y,w,C,_,S)=>{if(eh(x.parentElement,1)||Ra(),y.el=null,S){const O=v(x);for(;;){const A=r(x);if(A&&A!==O)a(A);else break}}const I=r(x),E=i(x);return a(x),n(null,y,E,I,w,C,Jd(E),_),I},v=(x,y="[",w="]")=>{let C=0;for(;x;)if(x=r(x),x&&Zd(x)&&(x.data===y&&C++,x.data===w)){if(C===0)return r(x);C--}return x},g=(x,y,w)=>{const C=y.parentNode;C&&C.replaceChild(x,y);let _=w;for(;_;)_.vnode.el===y&&(_.vnode.el=_.subTree.el=x),_=_.parent},b=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[u,d]}const ew="data-allow-mismatch",SF={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function eh(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(ew);)t=t.parentElement;const n=t&&t.getAttribute(ew);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:n.split(",").includes(SF[e])}}Xf().requestIdleCallback;Xf().cancelIdleCallback;const Pr=t=>!!t.type.__asyncLoader,Yf=t=>t.type.__isKeepAlive,IF={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ao(),s=n.ctx;if(!s.renderer)return()=>{const b=e.default&&e.default();return b&&b.length===1?b[0]:b};const o=new Map,r=new Set;let i=null;const a=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:d}}}=s,h=d("div");s.activate=(b,x,y,w,C)=>{const _=b.component;l(b,x,y,0,a),c(_.vnode,b,x,y,_,a,w,b.slotScopeIds,C),yn(()=>{_.isDeactivated=!1,_.a&&sc(_.a);const S=b.props&&b.props.onVnodeMounted;S&&es(S,_.parent,b)},a)},s.deactivate=b=>{const x=b.component;Kh(x.m),Kh(x.a),l(b,h,null,1,a),yn(()=>{x.da&&sc(x.da);const y=b.props&&b.props.onVnodeUnmounted;y&&es(y,x.parent,b),x.isDeactivated=!0},a)};function f(b){ig(b),u(b,n,a,!0)}function p(b){o.forEach((x,y)=>{const w=bv(x.type);w&&!b(w)&&m(y)})}function m(b){const x=o.get(b);x&&(!i||!Js(x,i))?f(x):i&&ig(i),o.delete(b),r.delete(b)}to(()=>[t.include,t.exclude],([b,x])=>{b&&p(y=>yl(b,y)),x&&p(y=>!yl(x,y))},{flush:"post",deep:!0});let v=null;const g=()=>{v!=null&&(qh(n.subTree.type)?yn(()=>{o.set(v,th(n.subTree))},n.subTree.suspense):o.set(v,th(n.subTree)))};return bu(g),bE(g),yu(()=>{o.forEach(b=>{const{subTree:x,suspense:y}=n,w=th(x);if(b.type===w.type&&b.key===w.key){ig(w);const C=w.component.da;C&&yn(C,y);return}f(b)})}),()=>{if(v=null,!e.default)return i=null;const b=e.default(),x=b[0];if(b.length>1)return i=null,b;if(!Xi(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return i=null,x;let y=th(x);if(y.type===sn)return i=null,y;const w=y.type,C=bv(Pr(y)?y.type.__asyncResolved||{}:w),{include:_,exclude:S,max:I}=t;if(_&&(!C||!yl(_,C))||S&&C&&yl(S,C))return y.shapeFlag&=-257,i=y,x;const E=y.key==null?w:y.key,O=o.get(E);return y.el&&(y=cr(y),x.shapeFlag&128&&(x.ssContent=y)),v=E,O?(y.el=O.el,y.component=O.component,y.transition&&fc(y,y.transition),y.shapeFlag|=512,r.delete(E),r.add(E)):(r.add(E),I&&r.size>parseInt(I,10)&&m(r.values().next().value)),y.shapeFlag|=256,i=y,qh(x.type)?x:y}}},EF=IF;function yl(t,e){return Be(t)?t.some(n=>yl(n,e)):Ot(t)?t.split(",").includes(e):NL(t)?(t.lastIndex=0,t.test(e)):!1}function pE(t,e){gE(t,"a",e)}function mE(t,e){gE(t,"da",e)}function gE(t,e,n=hn){const s=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Jf(e,s,n),n){let o=n.parent;for(;o&&o.parent;)Yf(o.parent.vnode)&&kF(s,e,n,o),o=o.parent}}function kF(t,e,n,s){const o=Jf(e,t,s,!0);Zf(()=>{Gb(s[e],o)},n)}function ig(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function th(t){return t.shapeFlag&128?t.ssContent:t}function Jf(t,e,n=hn,s=!1){if(n){const o=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...i)=>{ei();const a=Qi(n),c=io(e,n,t,i);return a(),ti(),c});return s?o.unshift(r):o.push(r),r}}const pr=t=>(e,n=hn)=>{(!Hl||t==="sp")&&Jf(t,(...s)=>e(...s),n)},vE=pr("bm"),bu=pr("m"),$F=pr("bu"),bE=pr("u"),yu=pr("bum"),Zf=pr("um"),TF=pr("sp"),NF=pr("rtg"),AF=pr("rtc");function yE(t,e=hn){Jf("ec",t,e)}const ry="components",RF="directives";function tw(t,e){return iy(ry,t,!0,e)||t}const xE=Symbol.for("v-ndc");function DF(t){return Ot(t)?iy(ry,t,!1)||t:t||xE}function i1e(t){return iy(RF,t)}function iy(t,e,n=!0,s=!1){const o=an||hn;if(o){const r=o.type;if(t===ry){const a=bv(r,!1);if(a&&(a===e||a===Ms(e)||a===qf(Ms(e))))return r}const i=nw(o[t]||r[t],e)||nw(o.appContext[t],e);return!i&&s?r:i}}function nw(t,e){return t&&(t[e]||t[Ms(e)]||t[qf(Ms(e))])}function OF(t,e,n,s){let o;const r=n,i=Be(t);if(i||Ot(t)){const a=i&&Vi(t);let c=!1;a&&(c=!Fs(t),t=Qf(t)),o=new Array(t.length);for(let l=0,u=t.length;l<u;l++)o[l]=e(c?Nn(t[l]):t[l],l,void 0,r)}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,r)}else if(bt(t))if(t[Symbol.iterator])o=Array.from(t,(a,c)=>e(a,c,void 0,r));else{const a=Object.keys(t);o=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];o[c]=e(t[u],u,c,r)}}else o=[];return o}function LF(t,e,n={},s,o){if(an.ce||an.parent&&Pr(an.parent)&&an.parent.ce)return jt(),Eo(Ht,null,[Je("slot",n,s)],64);let r=t[e];r&&r._c&&(r._d=!1),jt();const i=r&&wE(r(n)),a=n.key||i&&i.key,c=Eo(Ht,{key:(a&&!ro(a)?a:`_${e}`)+(!i&&s?"_fb":"")},i||[],i&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),r&&r._c&&(r._d=!0),c}function wE(t){return t.some(e=>Xi(e)?!(e.type===sn||e.type===Ht&&!wE(e.children)):!0)?t:null}const uv=t=>t?HE(t)?tp(t):uv(t.parent):null,Nl=Jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uv(t.parent),$root:t=>uv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ay(t),$forceUpdate:t=>t.f||(t.f=()=>{oy(t.update)}),$nextTick:t=>t.n||(t.n=Uc.bind(t.proxy)),$watch:t=>sP.bind(t)}),ag=(t,e)=>t!==wt&&!t.__isScriptSetup&&ut(t,e),FF={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=i[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return r[e]}else{if(ag(s,e))return i[e]=1,s[e];if(o!==wt&&ut(o,e))return i[e]=2,o[e];if((l=t.propsOptions[0])&&ut(l,e))return i[e]=3,r[e];if(n!==wt&&ut(n,e))return i[e]=4,n[e];dv&&(i[e]=0)}}const u=Nl[e];let d,h;if(u)return e==="$attrs"&&Tn(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==wt&&ut(n,e))return i[e]=4,n[e];if(h=c.config.globalProperties,ut(h,e))return h[e]},set({_:t},e,n){const{data:s,setupState:o,ctx:r}=t;return ag(o,e)?(o[e]=n,!0):s!==wt&&ut(s,e)?(s[e]=n,!0):ut(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||t!==wt&&ut(t,i)||ag(e,i)||(a=r[0])&&ut(a,i)||ut(s,i)||ut(Nl,i)||ut(o.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ut(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function sw(t){return Be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function PF(t){const e=ao();let n=t();return gv(),Hb(n)&&(n=n.catch(s=>{throw Qi(e),s})),[n,()=>Qi(e)]}let dv=!0;function MF(t){const e=ay(t),n=t.proxy,s=t.ctx;dv=!1,e.beforeCreate&&ow(e.beforeCreate,t,"bc");const{data:o,computed:r,methods:i,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:b,destroyed:x,unmounted:y,render:w,renderTracked:C,renderTriggered:_,errorCaptured:S,serverPrefetch:I,expose:E,inheritAttrs:O,components:A,directives:P,filters:z}=e;if(l&&BF(l,s,null),i)for(const R in i){const D=i[R];je(D)&&(s[R]=D.bind(n))}if(o){const R=o.call(n,n);bt(R)&&(t.data=Wo(R))}if(dv=!0,r)for(const R in r){const D=r[R],j=je(D)?D.bind(n,n):je(D.get)?D.get.bind(n,n):$o,ne=!je(D)&&je(D.set)?D.set.bind(n):$o,re=pt({get:j,set:ne});Object.defineProperty(s,R,{enumerable:!0,configurable:!0,get:()=>re.value,set:de=>re.value=de})}if(a)for(const R in a)CE(a[R],s,n,R);if(c){const R=je(c)?c.call(n):c;Reflect.ownKeys(R).forEach(D=>{ji(D,R[D])})}u&&ow(u,t,"c");function M(R,D){Be(D)?D.forEach(j=>R(j.bind(n))):D&&R(D.bind(n))}if(M(vE,d),M(bu,h),M($F,f),M(bE,p),M(pE,m),M(mE,v),M(yE,S),M(AF,C),M(NF,_),M(yu,b),M(Zf,y),M(TF,I),Be(E))if(E.length){const R=t.exposed||(t.exposed={});E.forEach(D=>{Object.defineProperty(R,D,{get:()=>n[D],set:j=>n[D]=j})})}else t.exposed||(t.exposed={});w&&t.render===$o&&(t.render=w),O!=null&&(t.inheritAttrs=O),A&&(t.components=A),P&&(t.directives=P),I&&fE(t)}function BF(t,e,n=$o){Be(t)&&(t=hv(t));for(const s in t){const o=t[s];let r;bt(o)?"default"in o?r=Dn(o.from||s,o.default,!0):r=Dn(o.from||s):r=Dn(o),ln(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):e[s]=r}}function ow(t,e,n){io(Be(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function CE(t,e,n,s){let o=s.includes(".")?ME(n,s):()=>n[s];if(Ot(t)){const r=e[t];je(r)&&to(o,r)}else if(je(t))to(o,t.bind(n));else if(bt(t))if(Be(t))t.forEach(r=>CE(r,e,n,s));else{const r=je(t.handler)?t.handler.bind(n):e[t.handler];je(r)&&to(o,r,t)}}function ay(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=t.appContext,a=r.get(e);let c;return a?c=a:!o.length&&!n&&!s?c=e:(c={},o.length&&o.forEach(l=>Hh(c,l,i,!0)),Hh(c,e,i)),bt(e)&&r.set(e,c),c}function Hh(t,e,n,s=!1){const{mixins:o,extends:r}=e;r&&Hh(t,r,n,!0),o&&o.forEach(i=>Hh(t,i,n,!0));for(const i in e)if(!(s&&i==="expose")){const a=VF[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const VF={data:rw,props:iw,emits:iw,methods:xl,computed:xl,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:xl,directives:xl,watch:jF,provide:rw,inject:UF};function rw(t,e){return e?t?function(){return Jt(je(t)?t.call(this,this):t,je(e)?e.call(this,this):e)}:e:t}function UF(t,e){return xl(hv(t),hv(e))}function hv(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bn(t,e){return t?[...new Set([].concat(t,e))]:e}function xl(t,e){return t?Jt(Object.create(null),t,e):e}function iw(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:Jt(Object.create(null),sw(t),sw(e??{})):e}function jF(t,e){if(!t)return e;if(!e)return t;const n=Jt(Object.create(null),t);for(const s in e)n[s]=Bn(t[s],e[s]);return n}function _E(){return{app:null,config:{isNativeTag:$L,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zF=0;function WF(t,e){return function(s,o=null){je(s)||(s=Jt({},s)),o!=null&&!bt(o)&&(o=null);const r=_E(),i=new WeakSet,a=[];let c=!1;const l=r.app={_uid:zF++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:qE,get config(){return r.config},set config(u){},use(u,...d){return i.has(u)||(u&&je(u.install)?(i.add(u),u.install(l,...d)):je(u)&&(i.add(u),u(l,...d))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,d){return d?(r.components[u]=d,l):r.components[u]},directive(u,d){return d?(r.directives[u]=d,l):r.directives[u]},mount(u,d,h){if(!c){const f=l._ceVNode||Je(s,o);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(f,u):t(f,u,h),c=!0,l._container=u,u.__vue_app__=l,tp(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(io(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return r.provides[u]=d,l},runWithContext(u){const d=Ui;Ui=l;try{return u()}finally{Ui=d}}};return l}}let Ui=null;function ji(t,e){if(hn){let n=hn.provides;const s=hn.parent&&hn.parent.provides;s===n&&(n=hn.provides=Object.create(s)),n[t]=e}}function Dn(t,e,n=!1){const s=hn||an;if(s||Ui){const o=Ui?Ui._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&je(e)?e.call(s&&s.proxy):e}}function SE(){return!!(hn||an||Ui)}const IE={},EE=()=>Object.create(IE),kE=t=>Object.getPrototypeOf(t)===IE;function GF(t,e,n,s=!1){const o={},r=EE();t.propsDefaults=Object.create(null),$E(t,e,o,r);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=s?o:tr(o):t.type.props?t.props=o:t.props=r,t.attrs=r}function HF(t,e,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=t,a=st(o),[c]=t.propsOptions;let l=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ep(t.emitsOptions,h))continue;const f=e[h];if(c)if(ut(r,h))f!==r[h]&&(r[h]=f,l=!0);else{const p=Ms(h);o[p]=fv(c,a,p,f,t,!1)}else f!==r[h]&&(r[h]=f,l=!0)}}}else{$E(t,e,o,r)&&(l=!0);let u;for(const d in a)(!e||!ut(e,d)&&((u=pa(d))===d||!ut(e,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(o[d]=fv(c,a,d,void 0,t,!0)):delete o[d]);if(r!==a)for(const d in r)(!e||!ut(e,d))&&(delete r[d],l=!0)}l&&Jo(t.attrs,"set","")}function $E(t,e,n,s){const[o,r]=t.propsOptions;let i=!1,a;if(e)for(let c in e){if(nc(c))continue;const l=e[c];let u;o&&ut(o,u=Ms(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:ep(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,i=!0)}if(r){const c=st(n),l=a||wt;for(let u=0;u<r.length;u++){const d=r[u];n[d]=fv(o,c,d,l[d],t,!ut(l,d))}}return i}function fv(t,e,n,s,o,r){const i=t[n];if(i!=null){const a=ut(i,"default");if(a&&s===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&je(c)){const{propsDefaults:l}=o;if(n in l)s=l[n];else{const u=Qi(o);s=l[n]=c.call(null,e),u()}}else s=c;o.ce&&o.ce._setProp(n,s)}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===pa(n))&&(s=!0))}return s}const KF=new WeakMap;function TE(t,e,n=!1){const s=n?KF:e.propsCache,o=s.get(t);if(o)return o;const r=t.props,i={},a=[];let c=!1;if(!je(t)){const u=d=>{c=!0;const[h,f]=TE(d,e,!0);Jt(i,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!c)return bt(t)&&s.set(t,ec),ec;if(Be(r))for(let u=0;u<r.length;u++){const d=Ms(r[u]);aw(d)&&(i[d]=wt)}else if(r)for(const u in r){const d=Ms(u);if(aw(d)){const h=r[u],f=i[d]=Be(h)||je(h)?{type:h}:Jt({},h),p=f.type;let m=!1,v=!0;if(Be(p))for(let g=0;g<p.length;++g){const b=p[g],x=je(b)&&b.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(v=!1)}else m=je(p)&&p.name==="Boolean";f[0]=m,f[1]=v,(m||ut(f,"default"))&&a.push(d)}}const l=[i,a];return bt(t)&&s.set(t,l),l}function aw(t){return t[0]!=="$"&&!nc(t)}const NE=t=>t[0]==="_"||t==="$stable",cy=t=>Be(t)?t.map(ps):[ps(t)],qF=(t,e,n)=>{if(e._n)return e;const s=fs((...o)=>cy(e(...o)),n);return s._c=!1,s},AE=(t,e,n)=>{const s=t._ctx;for(const o in t){if(NE(o))continue;const r=t[o];if(je(r))e[o]=qF(o,r,s);else if(r!=null){const i=cy(r);e[o]=()=>i}}},RE=(t,e)=>{const n=cy(e);t.slots.default=()=>n},DE=(t,e,n)=>{for(const s in e)(n||s!=="_")&&(t[s]=e[s])},XF=(t,e,n)=>{const s=t.slots=EE();if(t.vnode.shapeFlag&32){const o=e._;o?(DE(s,e,n),n&&AI(s,"_",o,!0)):AE(e,s)}else e&&RE(t,e)},QF=(t,e,n)=>{const{vnode:s,slots:o}=t;let r=!0,i=wt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:DE(o,e,n):(r=!e.$stable,AE(e,o)),i=e}else e&&(RE(t,e),i={default:1});if(r)for(const a in o)!NE(a)&&i[a]==null&&delete o[a]},yn=UE;function YF(t){return OE(t)}function JF(t){return OE(t,_F)}function OE(t,e){const n=Xf();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=$o,insertStaticContent:p}=t,m=(N,L,K,oe=null,se=null,k=null,T=void 0,U=null,Y=!!L.dynamicChildren)=>{if(N===L)return;N&&!Js(N,L)&&(oe=q(N),de(N,se,k,!0),N=null),L.patchFlag===-2&&(Y=!1,L.dynamicChildren=null);const{type:ee,ref:ve,shapeFlag:B}=L;switch(ee){case Mr:v(N,L,K,oe);break;case sn:g(N,L,K,oe);break;case Al:N==null&&b(L,K,oe,T);break;case Ht:A(N,L,K,oe,se,k,T,U,Y);break;default:B&1?w(N,L,K,oe,se,k,T,U,Y):B&6?P(N,L,K,oe,se,k,T,U,Y):(B&64||B&128)&&ee.process(N,L,K,oe,se,k,T,U,Y,pe)}ve!=null&&se&&Gh(ve,N&&N.ref,k,L||N,!L)},v=(N,L,K,oe)=>{if(N==null)s(L.el=a(L.children),K,oe);else{const se=L.el=N.el;L.children!==N.children&&l(se,L.children)}},g=(N,L,K,oe)=>{N==null?s(L.el=c(L.children||""),K,oe):L.el=N.el},b=(N,L,K,oe)=>{[N.el,N.anchor]=p(N.children,L,K,oe,N.el,N.anchor)},x=({el:N,anchor:L},K,oe)=>{let se;for(;N&&N!==L;)se=h(N),s(N,K,oe),N=se;s(L,K,oe)},y=({el:N,anchor:L})=>{let K;for(;N&&N!==L;)K=h(N),o(N),N=K;o(L)},w=(N,L,K,oe,se,k,T,U,Y)=>{L.type==="svg"?T="svg":L.type==="math"&&(T="mathml"),N==null?C(L,K,oe,se,k,T,U,Y):I(N,L,se,k,T,U,Y)},C=(N,L,K,oe,se,k,T,U)=>{let Y,ee;const{props:ve,shapeFlag:B,transition:Z,dirs:Ce}=N;if(Y=N.el=i(N.type,k,ve&&ve.is,ve),B&8?u(Y,N.children):B&16&&S(N.children,Y,null,oe,se,cg(N,k),T,U),Ce&&wo(N,null,oe,"created"),_(Y,N,N.scopeId,T,oe),ve){for(const be in ve)be!=="value"&&!nc(be)&&r(Y,be,null,ve[be],k,oe);"value"in ve&&r(Y,"value",null,ve.value,k),(ee=ve.onVnodeBeforeMount)&&es(ee,oe,N)}Ce&&wo(N,null,oe,"beforeMount");const ie=LE(se,Z);ie&&Z.beforeEnter(Y),s(Y,L,K),((ee=ve&&ve.onVnodeMounted)||ie||Ce)&&yn(()=>{ee&&es(ee,oe,N),ie&&Z.enter(Y),Ce&&wo(N,null,oe,"mounted")},se)},_=(N,L,K,oe,se)=>{if(K&&f(N,K),oe)for(let k=0;k<oe.length;k++)f(N,oe[k]);if(se){let k=se.subTree;if(L===k||qh(k.type)&&(k.ssContent===L||k.ssFallback===L)){const T=se.vnode;_(N,T,T.scopeId,T.slotScopeIds,se.parent)}}},S=(N,L,K,oe,se,k,T,U,Y=0)=>{for(let ee=Y;ee<N.length;ee++){const ve=N[ee]=U?kr(N[ee]):ps(N[ee]);m(null,ve,L,K,oe,se,k,T,U)}},I=(N,L,K,oe,se,k,T)=>{const U=L.el=N.el;let{patchFlag:Y,dynamicChildren:ee,dirs:ve}=L;Y|=N.patchFlag&16;const B=N.props||wt,Z=L.props||wt;let Ce;if(K&&bi(K,!1),(Ce=Z.onVnodeBeforeUpdate)&&es(Ce,K,L,N),ve&&wo(L,N,K,"beforeUpdate"),K&&bi(K,!0),(B.innerHTML&&Z.innerHTML==null||B.textContent&&Z.textContent==null)&&u(U,""),ee?E(N.dynamicChildren,ee,U,K,oe,cg(L,se),k):T||D(N,L,U,null,K,oe,cg(L,se),k,!1),Y>0){if(Y&16)O(U,B,Z,K,se);else if(Y&2&&B.class!==Z.class&&r(U,"class",null,Z.class,se),Y&4&&r(U,"style",B.style,Z.style,se),Y&8){const ie=L.dynamicProps;for(let be=0;be<ie.length;be++){const Ie=ie[be],Pe=B[Ie],Qe=Z[Ie];(Qe!==Pe||Ie==="value")&&r(U,Ie,Pe,Qe,se,K)}}Y&1&&N.children!==L.children&&u(U,L.children)}else!T&&ee==null&&O(U,B,Z,K,se);((Ce=Z.onVnodeUpdated)||ve)&&yn(()=>{Ce&&es(Ce,K,L,N),ve&&wo(L,N,K,"updated")},oe)},E=(N,L,K,oe,se,k,T)=>{for(let U=0;U<L.length;U++){const Y=N[U],ee=L[U],ve=Y.el&&(Y.type===Ht||!Js(Y,ee)||Y.shapeFlag&70)?d(Y.el):K;m(Y,ee,ve,null,oe,se,k,T,!0)}},O=(N,L,K,oe,se)=>{if(L!==K){if(L!==wt)for(const k in L)!nc(k)&&!(k in K)&&r(N,k,L[k],null,se,oe);for(const k in K){if(nc(k))continue;const T=K[k],U=L[k];T!==U&&k!=="value"&&r(N,k,U,T,se,oe)}"value"in K&&r(N,"value",L.value,K.value,se)}},A=(N,L,K,oe,se,k,T,U,Y)=>{const ee=L.el=N?N.el:a(""),ve=L.anchor=N?N.anchor:a("");let{patchFlag:B,dynamicChildren:Z,slotScopeIds:Ce}=L;Ce&&(U=U?U.concat(Ce):Ce),N==null?(s(ee,K,oe),s(ve,K,oe),S(L.children||[],K,ve,se,k,T,U,Y)):B>0&&B&64&&Z&&N.dynamicChildren?(E(N.dynamicChildren,Z,K,se,k,T,U),(L.key!=null||se&&L===se.subTree)&&FE(N,L,!0)):D(N,L,K,ve,se,k,T,U,Y)},P=(N,L,K,oe,se,k,T,U,Y)=>{L.slotScopeIds=U,N==null?L.shapeFlag&512?se.ctx.activate(L,K,oe,T,Y):z(L,K,oe,se,k,T,Y):G(N,L,Y)},z=(N,L,K,oe,se,k,T)=>{const U=N.component=wP(N,oe,se);if(Yf(N)&&(U.ctx.renderer=pe),CP(U,!1,T),U.asyncDep){if(se&&se.registerDep(U,M,T),!N.el){const Y=U.subTree=Je(sn);g(null,Y,L,K)}}else M(U,N,L,K,se,k,T)},G=(N,L,K)=>{const oe=L.component=N.component;if(lP(N,L,K))if(oe.asyncDep&&!oe.asyncResolved){R(oe,L,K);return}else oe.next=L,oe.update();else L.el=N.el,oe.vnode=L},M=(N,L,K,oe,se,k,T)=>{const U=()=>{if(N.isMounted){let{next:B,bu:Z,u:Ce,parent:ie,vnode:be}=N;{const Gt=PE(N);if(Gt){B&&(B.el=be.el,R(N,B,T)),Gt.asyncDep.then(()=>{N.isUnmounted||U()});return}}let Ie=B,Pe;bi(N,!1),B?(B.el=be.el,R(N,B,T)):B=be,Z&&sc(Z),(Pe=B.props&&B.props.onVnodeBeforeUpdate)&&es(Pe,ie,B,be),bi(N,!0);const Qe=lg(N),At=N.subTree;N.subTree=Qe,m(At,Qe,d(At.el),q(At),N,se,k),B.el=Qe.el,Ie===null&&uy(N,Qe.el),Ce&&yn(Ce,se),(Pe=B.props&&B.props.onVnodeUpdated)&&yn(()=>es(Pe,ie,B,be),se)}else{let B;const{el:Z,props:Ce}=L,{bm:ie,m:be,parent:Ie,root:Pe,type:Qe}=N,At=Pr(L);if(bi(N,!1),ie&&sc(ie),!At&&(B=Ce&&Ce.onVnodeBeforeMount)&&es(B,Ie,L),bi(N,!0),Z&&Re){const Gt=()=>{N.subTree=lg(N),Re(Z,N.subTree,N,se,null)};At&&Qe.__asyncHydrate?Qe.__asyncHydrate(Z,N,Gt):Gt()}else{Pe.ce&&Pe.ce._injectChildStyle(Qe);const Gt=N.subTree=lg(N);m(null,Gt,K,oe,N,se,k),L.el=Gt.el}if(be&&yn(be,se),!At&&(B=Ce&&Ce.onVnodeMounted)){const Gt=L;yn(()=>es(B,Ie,Gt),se)}(L.shapeFlag&256||Ie&&Pr(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&N.a&&yn(N.a,se),N.isMounted=!0,L=K=oe=null}};N.scope.on();const Y=N.effect=new MI(U);N.scope.off();const ee=N.update=Y.run.bind(Y),ve=N.job=Y.runIfDirty.bind(Y);ve.i=N,ve.id=N.uid,Y.scheduler=()=>oy(ve),bi(N,!0),ee()},R=(N,L,K)=>{L.component=N;const oe=N.vnode.props;N.vnode=L,N.next=null,HF(N,L.props,oe,K),QF(N,L.children,K),ei(),Y1(N),ti()},D=(N,L,K,oe,se,k,T,U,Y=!1)=>{const ee=N&&N.children,ve=N?N.shapeFlag:0,B=L.children,{patchFlag:Z,shapeFlag:Ce}=L;if(Z>0){if(Z&128){ne(ee,B,K,oe,se,k,T,U,Y);return}else if(Z&256){j(ee,B,K,oe,se,k,T,U,Y);return}}Ce&8?(ve&16&&ge(ee,se,k),B!==ee&&u(K,B)):ve&16?Ce&16?ne(ee,B,K,oe,se,k,T,U,Y):ge(ee,se,k,!0):(ve&8&&u(K,""),Ce&16&&S(B,K,oe,se,k,T,U,Y))},j=(N,L,K,oe,se,k,T,U,Y)=>{N=N||ec,L=L||ec;const ee=N.length,ve=L.length,B=Math.min(ee,ve);let Z;for(Z=0;Z<B;Z++){const Ce=L[Z]=Y?kr(L[Z]):ps(L[Z]);m(N[Z],Ce,K,null,se,k,T,U,Y)}ee>ve?ge(N,se,k,!0,!1,B):S(L,K,oe,se,k,T,U,Y,B)},ne=(N,L,K,oe,se,k,T,U,Y)=>{let ee=0;const ve=L.length;let B=N.length-1,Z=ve-1;for(;ee<=B&&ee<=Z;){const Ce=N[ee],ie=L[ee]=Y?kr(L[ee]):ps(L[ee]);if(Js(Ce,ie))m(Ce,ie,K,null,se,k,T,U,Y);else break;ee++}for(;ee<=B&&ee<=Z;){const Ce=N[B],ie=L[Z]=Y?kr(L[Z]):ps(L[Z]);if(Js(Ce,ie))m(Ce,ie,K,null,se,k,T,U,Y);else break;B--,Z--}if(ee>B){if(ee<=Z){const Ce=Z+1,ie=Ce<ve?L[Ce].el:oe;for(;ee<=Z;)m(null,L[ee]=Y?kr(L[ee]):ps(L[ee]),K,ie,se,k,T,U,Y),ee++}}else if(ee>Z)for(;ee<=B;)de(N[ee],se,k,!0),ee++;else{const Ce=ee,ie=ee,be=new Map;for(ee=ie;ee<=Z;ee++){const hs=L[ee]=Y?kr(L[ee]):ps(L[ee]);hs.key!=null&&be.set(hs.key,ee)}let Ie,Pe=0;const Qe=Z-ie+1;let At=!1,Gt=0;const Ho=new Array(Qe);for(ee=0;ee<Qe;ee++)Ho[ee]=0;for(ee=Ce;ee<=B;ee++){const hs=N[ee];if(Pe>=Qe){de(hs,se,k,!0);continue}let vo;if(hs.key!=null)vo=be.get(hs.key);else for(Ie=ie;Ie<=Z;Ie++)if(Ho[Ie-ie]===0&&Js(hs,L[Ie])){vo=Ie;break}vo===void 0?de(hs,se,k,!0):(Ho[vo-ie]=ee+1,vo>=Gt?Gt=vo:At=!0,m(hs,L[vo],K,null,se,k,T,U,Y),Pe++)}const Kd=At?ZF(Ho):ec;for(Ie=Kd.length-1,ee=Qe-1;ee>=0;ee--){const hs=ie+ee,vo=L[hs],G1=hs+1<ve?L[hs+1].el:oe;Ho[ee]===0?m(null,vo,K,G1,se,k,T,U,Y):At&&(Ie<0||ee!==Kd[Ie]?re(vo,K,G1,2):Ie--)}}},re=(N,L,K,oe,se=null)=>{const{el:k,type:T,transition:U,children:Y,shapeFlag:ee}=N;if(ee&6){re(N.component.subTree,L,K,oe);return}if(ee&128){N.suspense.move(L,K,oe);return}if(ee&64){T.move(N,L,K,pe);return}if(T===Ht){s(k,L,K);for(let B=0;B<Y.length;B++)re(Y[B],L,K,oe);s(N.anchor,L,K);return}if(T===Al){x(N,L,K);return}if(oe!==2&&ee&1&&U)if(oe===0)U.beforeEnter(k),s(k,L,K),yn(()=>U.enter(k),se);else{const{leave:B,delayLeave:Z,afterLeave:Ce}=U,ie=()=>s(k,L,K),be=()=>{B(k,()=>{ie(),Ce&&Ce()})};Z?Z(k,ie,be):be()}else s(k,L,K)},de=(N,L,K,oe=!1,se=!1)=>{const{type:k,props:T,ref:U,children:Y,dynamicChildren:ee,shapeFlag:ve,patchFlag:B,dirs:Z,cacheIndex:Ce}=N;if(B===-2&&(se=!1),U!=null&&Gh(U,null,K,N,!0),Ce!=null&&(L.renderCache[Ce]=void 0),ve&256){L.ctx.deactivate(N);return}const ie=ve&1&&Z,be=!Pr(N);let Ie;if(be&&(Ie=T&&T.onVnodeBeforeUnmount)&&es(Ie,L,N),ve&6)fe(N.component,K,oe);else{if(ve&128){N.suspense.unmount(K,oe);return}ie&&wo(N,null,L,"beforeUnmount"),ve&64?N.type.remove(N,L,K,pe,oe):ee&&!ee.hasOnce&&(k!==Ht||B>0&&B&64)?ge(ee,L,K,!1,!0):(k===Ht&&B&384||!se&&ve&16)&&ge(Y,L,K),oe&&he(N)}(be&&(Ie=T&&T.onVnodeUnmounted)||ie)&&yn(()=>{Ie&&es(Ie,L,N),ie&&wo(N,null,L,"unmounted")},K)},he=N=>{const{type:L,el:K,anchor:oe,transition:se}=N;if(L===Ht){ye(K,oe);return}if(L===Al){y(N);return}const k=()=>{o(K),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(N.shapeFlag&1&&se&&!se.persisted){const{leave:T,delayLeave:U}=se,Y=()=>T(K,k);U?U(N.el,k,Y):Y()}else k()},ye=(N,L)=>{let K;for(;N!==L;)K=h(N),o(N),N=K;o(L)},fe=(N,L,K)=>{const{bum:oe,scope:se,job:k,subTree:T,um:U,m:Y,a:ee}=N;Kh(Y),Kh(ee),oe&&sc(oe),se.stop(),k&&(k.flags|=8,de(T,N,L,K)),U&&yn(U,L),yn(()=>{N.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ge=(N,L,K,oe=!1,se=!1,k=0)=>{for(let T=k;T<N.length;T++)de(N[T],L,K,oe,se)},q=N=>{if(N.shapeFlag&6)return q(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const L=h(N.anchor||N.el),K=L&&L[vF];return K?h(K):L};let ue=!1;const le=(N,L,K)=>{N==null?L._vnode&&de(L._vnode,null,null,!0):m(L._vnode||null,N,L,null,null,null,K),L._vnode=N,ue||(ue=!0,Y1(),zh(),ue=!1)},pe={p:m,um:de,m:re,r:he,mt:z,mc:S,pc:D,pbc:E,n:q,o:t};let _e,Re;return e&&([_e,Re]=e(pe)),{render:le,hydrate:_e,createApp:WF(le,_e)}}function cg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function bi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function LE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function FE(t,e,n=!1){const s=t.children,o=e.children;if(Be(s)&&Be(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=kr(o[r]),a.el=i.el),!n&&a.patchFlag!==-2&&FE(i,a)),a.type===Mr&&(a.el=i.el)}}function ZF(t){const e=t.slice(),n=[0];let s,o,r,i,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(o=n[n.length-1],t[o]<l){e[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,t[n[a]]<l?r=a+1:i=a;l<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=e[i];return n}function PE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:PE(e)}function Kh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const eP=Symbol.for("v-scx"),tP=()=>Dn(eP);function nP(t,e){return ly(t,null,e)}function to(t,e,n){return ly(t,e,n)}function ly(t,e,n=wt){const{immediate:s,deep:o,flush:r,once:i}=n,a=Jt({},n),c=e&&s||!e&&r!=="post";let l;if(Hl){if(r==="sync"){const f=tP();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=$o,f.resume=$o,f.pause=$o,f}}const u=hn;a.call=(f,p,m)=>io(f,u,p,m);let d=!1;r==="post"?a.scheduler=f=>{yn(f,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(f,p)=>{p?f():oy(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=pF(t,e,a);return Hl&&(l?l.push(h):c&&h()),h}function sP(t,e,n){const s=this.proxy,o=Ot(t)?t.includes(".")?ME(s,t):()=>s[t]:t.bind(s,s);let r;je(e)?r=e:(r=e.handler,n=e);const i=Qi(this),a=ly(o,r.bind(s),n);return i(),a}function ME(t,e){const n=e.split(".");return()=>{let s=t;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const oP=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ms(e)}Modifiers`]||t[`${pa(e)}Modifiers`];function rP(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||wt;let o=n;const r=e.startsWith("update:"),i=r&&oP(s,e.slice(7));i&&(i.trim&&(o=n.map(u=>Ot(u)?u.trim():u)),i.number&&(o=n.map(sv)));let a,c=s[a=eg(e)]||s[a=eg(Ms(e))];!c&&r&&(c=s[a=eg(pa(e))]),c&&io(c,t,6,o);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,io(l,t,6,o)}}function BE(t,e,n=!1){const s=e.emitsCache,o=s.get(t);if(o!==void 0)return o;const r=t.emits;let i={},a=!1;if(!je(t)){const c=l=>{const u=BE(l,e,!0);u&&(a=!0,Jt(i,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!r&&!a?(bt(t)&&s.set(t,null),null):(Be(r)?r.forEach(c=>i[c]=null):Jt(i,r),bt(t)&&s.set(t,i),i)}function ep(t,e){return!t||!mu(e)?!1:(e=e.slice(2).replace(/Once$/,""),ut(t,e[0].toLowerCase()+e.slice(1))||ut(t,pa(e))||ut(t,e))}function lg(t){const{type:e,vnode:n,proxy:s,withProxy:o,propsOptions:[r],slots:i,attrs:a,emit:c,render:l,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=t,v=Wh(t);let g,b;try{if(n.shapeFlag&4){const y=o||s,w=y;g=ps(l.call(w,y,u,d,f,h,p)),b=a}else{const y=e;g=ps(y.length>1?y(d,{attrs:a,slots:i,emit:c}):y(d,null)),b=e.props?a:aP(a)}}catch(y){Rl.length=0,vu(y,t,1),g=Je(sn)}let x=g;if(b&&m!==!1){const y=Object.keys(b),{shapeFlag:w}=x;y.length&&w&7&&(r&&y.some(Wb)&&(b=cP(b,r)),x=cr(x,b,!1,!0))}return n.dirs&&(x=cr(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&fc(x,n.transition),g=x,Wh(v),g}function iP(t,e=!0){let n;for(let s=0;s<t.length;s++){const o=t[s];if(Xi(o)){if(o.type!==sn||o.children==="v-if"){if(n)return;n=o}}else return}return n}const aP=t=>{let e;for(const n in t)(n==="class"||n==="style"||mu(n))&&((e||(e={}))[n]=t[n]);return e},cP=(t,e)=>{const n={};for(const s in t)(!Wb(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function lP(t,e,n){const{props:s,children:o,component:r}=t,{props:i,children:a,patchFlag:c}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?cw(s,i,l):!!i;if(c&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(i[h]!==s[h]&&!ep(l,h))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?cw(s,i,l):!0:!!i;return!1}function cw(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(e[r]!==t[r]&&!ep(n,r))return!0}return!1}function uy({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const qh=t=>t.__isSuspense;let pv=0;const uP={name:"Suspense",__isSuspense:!0,process(t,e,n,s,o,r,i,a,c,l){if(t==null)dP(e,n,s,o,r,i,a,c,l);else{if(r&&r.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}hP(t,e,n,s,o,i,a,c,l)}},hydrate:fP,normalize:pP},dy=uP;function Gl(t,e){const n=t.props&&t.props[e];je(n)&&n()}function dP(t,e,n,s,o,r,i,a,c){const{p:l,o:{createElement:u}}=c,d=u("div"),h=t.suspense=VE(t,o,s,e,d,n,r,i,a,c);l(null,h.pendingBranch=t.ssContent,d,null,s,h,r,i),h.deps>0?(Gl(t,"onPending"),Gl(t,"onFallback"),l(null,t.ssFallback,e,n,s,null,r,i),rc(h,t.ssFallback)):h.resolve(!1,!0)}function hP(t,e,n,s,o,r,i,a,{p:c,um:l,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:v,isHydrating:g}=d;if(m)d.pendingBranch=h,Js(h,m)?(c(m,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0?d.resolve():v&&(g||(c(p,f,n,s,o,null,r,i,a),rc(d,f)))):(d.pendingId=pv++,g?(d.isHydrating=!1,d.activeBranch=m):l(m,o,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(c(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0?d.resolve():(c(p,f,n,s,o,null,r,i,a),rc(d,f))):p&&Js(h,p)?(c(p,h,n,s,o,d,r,i,a),d.resolve(!0)):(c(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0&&d.resolve()));else if(p&&Js(h,p))c(p,h,n,s,o,d,r,i,a),rc(d,h);else if(Gl(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=pv++,c(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0)d.resolve();else{const{timeout:b,pendingId:x}=d;b>0?setTimeout(()=>{d.pendingId===x&&d.fallback(f)},b):b===0&&d.fallback(f)}}function VE(t,e,n,s,o,r,i,a,c,l,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:v}}=l;let g;const b=mP(t);b&&e&&e.pendingBranch&&(g=e.pendingId,e.deps++);const x=t.props?RI(t.props.timeout):void 0,y=r,w={vnode:t,parent:e,parentComponent:n,namespace:i,container:s,hiddenContainer:o,deps:0,pendingId:pv++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(C=!1,_=!1){const{vnode:S,activeBranch:I,pendingBranch:E,pendingId:O,effects:A,parentComponent:P,container:z}=w;let G=!1;w.isHydrating?w.isHydrating=!1:C||(G=I&&E.transition&&E.transition.mode==="out-in",G&&(I.transition.afterLeave=()=>{O===w.pendingId&&(h(E,z,r===y?p(I):r,0),cv(A))}),I&&(m(I.el)===z&&(r=p(I)),f(I,P,w,!0)),G||h(E,z,r,0)),rc(w,E),w.pendingBranch=null,w.isInFallback=!1;let M=w.parent,R=!1;for(;M;){if(M.pendingBranch){M.effects.push(...A),R=!0;break}M=M.parent}!R&&!G&&cv(A),w.effects=[],b&&e&&e.pendingBranch&&g===e.pendingId&&(e.deps--,e.deps===0&&!_&&e.resolve()),Gl(S,"onResolve")},fallback(C){if(!w.pendingBranch)return;const{vnode:_,activeBranch:S,parentComponent:I,container:E,namespace:O}=w;Gl(_,"onFallback");const A=p(S),P=()=>{w.isInFallback&&(d(null,C,E,A,I,null,O,a,c),rc(w,C))},z=C.transition&&C.transition.mode==="out-in";z&&(S.transition.afterLeave=P),w.isInFallback=!0,f(S,I,null,!0),z||P()},move(C,_,S){w.activeBranch&&h(w.activeBranch,C,_,S),w.container=C},next(){return w.activeBranch&&p(w.activeBranch)},registerDep(C,_,S){const I=!!w.pendingBranch;I&&w.deps++;const E=C.vnode.el;C.asyncDep.catch(O=>{vu(O,C,0)}).then(O=>{if(C.isUnmounted||w.isUnmounted||w.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:A}=C;vv(C,O,!1),E&&(A.el=E);const P=!E&&C.subTree.el;_(C,A,m(E||C.subTree.el),E?null:p(C.subTree),w,i,S),P&&v(P),uy(C,A.el),I&&--w.deps===0&&w.resolve()})},unmount(C,_){w.isUnmounted=!0,w.activeBranch&&f(w.activeBranch,n,C,_),w.pendingBranch&&f(w.pendingBranch,n,C,_)}};return w}function fP(t,e,n,s,o,r,i,a,c){const l=e.suspense=VE(e,s,n,t.parentNode,document.createElement("div"),null,o,r,i,a,!0),u=c(t,l.pendingBranch=e.ssContent,n,l,r,i);return l.deps===0&&l.resolve(!1,!0),u}function pP(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=lw(s?n.default:n),t.ssFallback=s?lw(n.fallback):Je(sn)}function lw(t){let e;if(je(t)){const n=pc&&t._c;n&&(t._d=!1,jt()),t=t(),n&&(t._d=!0,e=ss,jE())}return Be(t)&&(t=iP(t)),t=ps(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function UE(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):cv(t)}function rc(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let o=e.el;for(;!o&&e.component;)e=e.component.subTree,o=e.el;n.el=o,s&&s.subTree===n&&(s.vnode.el=o,uy(s,o))}function mP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ht=Symbol.for("v-fgt"),Mr=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),Al=Symbol.for("v-stc"),Rl=[];let ss=null;function jt(t=!1){Rl.push(ss=t?null:[])}function jE(){Rl.pop(),ss=Rl[Rl.length-1]||null}let pc=1;function uw(t){pc+=t,t<0&&ss&&(ss.hasOnce=!0)}function zE(t){return t.dynamicChildren=pc>0?ss||ec:null,jE(),pc>0&&ss&&ss.push(t),t}function To(t,e,n,s,o,r){return zE(Le(t,e,n,s,o,r,!0))}function Eo(t,e,n,s,o){return zE(Je(t,e,n,s,o,!0))}function Xi(t){return t?t.__v_isVNode===!0:!1}function Js(t,e){return t.type===e.type&&t.key===e.key}const WE=({key:t})=>t??null,kh=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ot(t)||ln(t)||je(t)?{i:an,r:t,k:e,f:!!n}:t:null);function Le(t,e=null,n=null,s=0,o=null,r=t===Ht?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&WE(e),ref:e&&kh(e),scopeId:iE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:an};return a?(hy(c,n),r&128&&t.normalize(c)):n&&(c.shapeFlag|=Ot(n)?8:16),pc>0&&!i&&ss&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&ss.push(c),c}const Je=gP;function gP(t,e=null,n=null,s=0,o=null,r=!1){if((!t||t===xE)&&(t=sn),Xi(t)){const a=cr(t,e,!0);return n&&hy(a,n),pc>0&&!r&&ss&&(a.shapeFlag&6?ss[ss.indexOf(t)]=a:ss.push(a)),a.patchFlag=-2,a}if(EP(t)&&(t=t.__vccOpts),e){e=vP(e);let{class:a,style:c}=e;a&&!Ot(a)&&(e.class=Xb(a)),bt(c)&&(sy(c)&&!Be(c)&&(c=Jt({},c)),e.style=qb(c))}const i=Ot(t)?1:qh(t)?128:aE(t)?64:bt(t)?4:je(t)?2:0;return Le(t,e,n,s,o,i,r,!0)}function vP(t){return t?sy(t)||kE(t)?Jt({},t):t:null}function cr(t,e,n=!1,s=!1){const{props:o,ref:r,patchFlag:i,children:a,transition:c}=t,l=e?GE(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&WE(l),ref:e&&e.ref?n&&r?Be(r)?r.concat(kh(e)):[r,kh(e)]:kh(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ht?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cr(t.ssContent),ssFallback:t.ssFallback&&cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&fc(u,c.clone(u)),u}function xn(t=" ",e=0){return Je(Mr,null,t,e)}function a1e(t,e){const n=Je(Al,null,t);return n.staticCount=e,n}function bP(t="",e=!1){return e?(jt(),Eo(sn,null,t)):Je(sn,null,t)}function ps(t){return t==null||typeof t=="boolean"?Je(sn):Be(t)?Je(Ht,null,t.slice()):Xi(t)?kr(t):Je(Mr,null,String(t))}function kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cr(t)}function hy(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Be(e))n=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),hy(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!kE(e)?e._ctx=an:o===3&&an&&(an.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else je(e)?(e={default:e,_ctx:an},n=32):(e=String(e),s&64?(n=16,e=[xn(e)]):n=8);t.children=e,t.shapeFlag|=n}function GE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=Xb([e.class,s.class]));else if(o==="style")e.style=qb([e.style,s.style]);else if(mu(o)){const r=e[o],i=s[o];i&&r!==i&&!(Be(r)&&r.includes(i))&&(e[o]=r?[].concat(r,i):i)}else o!==""&&(e[o]=s[o])}return e}function es(t,e,n,s=null){io(t,e,7,[n,s])}const yP=_E();let xP=0;function wP(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||yP,r={uid:xP++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new FI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:TE(s,o),emitsOptions:BE(s,o),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=rP.bind(null,r),t.ce&&t.ce(r),r}let hn=null;const ao=()=>hn||an;let Xh,mv;{const t=Xf(),e=(n,s)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(s),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};Xh=e("__VUE_INSTANCE_SETTERS__",n=>hn=n),mv=e("__VUE_SSR_SETTERS__",n=>Hl=n)}const Qi=t=>{const e=hn;return Xh(t),t.scope.on(),()=>{t.scope.off(),Xh(e)}},gv=()=>{hn&&hn.scope.off(),Xh(null)};function HE(t){return t.vnode.shapeFlag&4}let Hl=!1;function CP(t,e=!1,n=!1){e&&mv(e);const{props:s,children:o}=t.vnode,r=HE(t);GF(t,s,r,e),XF(t,o,n);const i=r?_P(t,e):void 0;return e&&mv(!1),i}function _P(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,FF);const{setup:s}=n;if(s){ei();const o=t.setupContext=s.length>1?IP(t):null,r=Qi(t),i=gu(s,t,0,[t.props,o]),a=Hb(i);if(ti(),r(),(a||t.sp)&&!Pr(t)&&fE(t),a){if(i.then(gv,gv),e)return i.then(c=>{vv(t,c,e)}).catch(c=>{vu(c,t,0)});t.asyncDep=i}else vv(t,i,e)}else KE(t,e)}function vv(t,e,n){je(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:bt(e)&&(t.setupState=eE(e)),KE(t,n)}let dw;function KE(t,e,n){const s=t.type;if(!t.render){if(!e&&dw&&!s.render){const o=s.template||ay(t).template;if(o){const{isCustomElement:r,compilerOptions:i}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Jt(Jt({isCustomElement:r,delimiters:a},i),c);s.render=dw(o,l)}}t.render=s.render||$o}{const o=Qi(t);ei();try{MF(t)}finally{ti(),o()}}}const SP={get(t,e){return Tn(t,"get",""),t[e]}};function IP(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,SP),slots:t.slots,emit:t.emit,expose:e}}function tp(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(eE(iF(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Nl)return Nl[n](t)},has(e,n){return n in e||n in Nl}})):t.proxy}function bv(t,e=!0){return je(t)?t.displayName||t.name:t.name||e&&t.__name}function EP(t){return je(t)&&"__vccOpts"in t}const pt=(t,e)=>hF(t,e,Hl);function pn(t,e,n){const s=arguments.length;return s===2?bt(e)&&!Be(e)?Xi(e)?Je(t,null,[e]):Je(t,e):Je(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Xi(n)&&(n=[n]),Je(t,e,n))}const qE="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yv;const hw=typeof window<"u"&&window.trustedTypes;if(hw)try{yv=hw.createPolicy("vue",{createHTML:t=>t})}catch{}const XE=yv?t=>yv.createHTML(t):t=>t,kP="http://www.w3.org/2000/svg",$P="http://www.w3.org/1998/Math/MathML",Qo=typeof document<"u"?document:null,fw=Qo&&Qo.createElement("template"),TP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const o=e==="svg"?Qo.createElementNS(kP,t):e==="mathml"?Qo.createElementNS($P,t):n?Qo.createElement(t,{is:n}):Qo.createElement(t);return t==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:t=>Qo.createTextNode(t),createComment:t=>Qo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,o,r){const i=n?n.previousSibling:e.lastChild;if(o&&(o===r||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{fw.innerHTML=XE(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=fw.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wr="transition",ll="animation",Kl=Symbol("_vtc"),QE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NP=Jt({},cE,QE),AP=t=>(t.displayName="Transition",t.props=NP,t),YE=AP((t,{slots:e})=>pn(xF,RP(t),e)),yi=(t,e=[])=>{Be(t)?t.forEach(n=>n(...e)):t&&t(...e)},pw=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function RP(t){const e={};for(const A in t)A in QE||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:l=i,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=DP(o),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:b,onEnterCancelled:x,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=g,onAppear:_=b,onAppearCancelled:S=x}=e,I=(A,P,z)=>{xi(A,P?u:a),xi(A,P?l:i),z&&z()},E=(A,P)=>{A._isLeaving=!1,xi(A,d),xi(A,f),xi(A,h),P&&P()},O=A=>(P,z)=>{const G=A?_:b,M=()=>I(P,A,z);yi(G,[P,M]),mw(()=>{xi(P,A?c:r),Cr(P,A?u:a),pw(G)||gw(P,s,m,M)})};return Jt(e,{onBeforeEnter(A){yi(g,[A]),Cr(A,r),Cr(A,i)},onBeforeAppear(A){yi(C,[A]),Cr(A,c),Cr(A,l)},onEnter:O(!1),onAppear:O(!0),onLeave(A,P){A._isLeaving=!0;const z=()=>E(A,P);Cr(A,d),Cr(A,h),FP(),mw(()=>{A._isLeaving&&(xi(A,d),Cr(A,f),pw(y)||gw(A,s,v,z))}),yi(y,[A,z])},onEnterCancelled(A){I(A,!1),yi(x,[A])},onAppearCancelled(A){I(A,!0),yi(S,[A])},onLeaveCancelled(A){E(A),yi(w,[A])}})}function DP(t){if(t==null)return null;if(bt(t))return[ug(t.enter),ug(t.leave)];{const e=ug(t);return[e,e]}}function ug(t){return RI(t)}function Cr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Kl]||(t[Kl]=new Set)).add(e)}function xi(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Kl];n&&(n.delete(e),n.size||(t[Kl]=void 0))}function mw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let OP=0;function gw(t,e,n,s){const o=t._endId=++OP,r=()=>{o===t._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:i,timeout:a,propCount:c}=LP(t,e);if(!i)return s();const l=i+"end";let u=0;const d=()=>{t.removeEventListener(l,h),r()},h=f=>{f.target===t&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),t.addEventListener(l,h)}function LP(t,e){const n=window.getComputedStyle(t),s=p=>(n[p]||"").split(", "),o=s(`${wr}Delay`),r=s(`${wr}Duration`),i=vw(o,r),a=s(`${ll}Delay`),c=s(`${ll}Duration`),l=vw(a,c);let u=null,d=0,h=0;e===wr?i>0&&(u=wr,d=i,h=r.length):e===ll?l>0&&(u=ll,d=l,h=c.length):(d=Math.max(i,l),u=d>0?i>l?wr:ll:null,h=u?u===wr?r.length:c.length:0);const f=u===wr&&/\b(transform|all)(,|$)/.test(s(`${wr}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function vw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>bw(n)+bw(t[s])))}function bw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function FP(){return document.body.offsetHeight}function PP(t,e,n){const s=t[Kl];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const yw=Symbol("_vod"),MP=Symbol("_vsh"),BP=Symbol(""),VP=/(^|;)\s*display\s*:/;function UP(t,e,n){const s=t.style,o=Ot(n);let r=!1;if(n&&!o){if(e)if(Ot(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&$h(s,a,"")}else for(const i in e)n[i]==null&&$h(s,i,"");for(const i in n)i==="display"&&(r=!0),$h(s,i,n[i])}else if(o){if(e!==n){const i=s[BP];i&&(n+=";"+i),s.cssText=n,r=VP.test(n)}}else e&&t.removeAttribute("style");yw in t&&(t[yw]=r?s.display:"",t[MP]&&(s.display="none"))}const xw=/\s*!important$/;function $h(t,e,n){if(Be(n))n.forEach(s=>$h(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=jP(t,e);xw.test(n)?t.setProperty(pa(s),n.replace(xw,""),"important"):t[s]=n}}const ww=["Webkit","Moz","ms"],dg={};function jP(t,e){const n=dg[e];if(n)return n;let s=Ms(e);if(s!=="filter"&&s in t)return dg[e]=s;s=qf(s);for(let o=0;o<ww.length;o++){const r=ww[o]+s;if(r in t)return dg[e]=r}return e}const Cw="http://www.w3.org/1999/xlink";function _w(t,e,n,s,o,r=BL(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Cw,e.slice(6,e.length)):t.setAttributeNS(Cw,e,n):n==null||r&&!DI(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ro(n)?String(n):n)}function Sw(t,e,n,s,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?XE(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=DI(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(o||e)}function Ti(t,e,n,s){t.addEventListener(e,n,s)}function zP(t,e,n,s){t.removeEventListener(e,n,s)}const Iw=Symbol("_vei");function WP(t,e,n,s,o=null){const r=t[Iw]||(t[Iw]={}),i=r[e];if(s&&i)i.value=s;else{const[a,c]=GP(e);if(s){const l=r[e]=qP(s,o);Ti(t,a,l,c)}else i&&(zP(t,a,i,c),r[e]=void 0)}}const Ew=/(?:Once|Passive|Capture)$/;function GP(t){let e;if(Ew.test(t)){e={};let s;for(;s=t.match(Ew);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pa(t.slice(2)),e]}let hg=0;const HP=Promise.resolve(),KP=()=>hg||(HP.then(()=>hg=0),hg=Date.now());function qP(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;io(XP(s,n.value),e,5,[s])};return n.value=t,n.attached=KP(),n}function XP(t,e){if(Be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const kw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,QP=(t,e,n,s,o,r)=>{const i=o==="svg";e==="class"?PP(t,s,i):e==="style"?UP(t,n,s):mu(e)?Wb(e)||WP(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):YP(t,e,s,i))?(Sw(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_w(t,e,s,i,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ot(s))?Sw(t,Ms(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),_w(t,e,s,i))};function YP(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&kw(e)&&je(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return kw(e)&&Ot(n)?!1:e in t}const Qh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?n=>sc(e,n):e};function JP(t){t.target.composing=!0}function $w(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ic=Symbol("_assign"),c1e={created(t,{modifiers:{lazy:e,trim:n,number:s}},o){t[ic]=Qh(o);const r=s||o.props&&o.props.type==="number";Ti(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=sv(a)),t[ic](a)}),n&&Ti(t,"change",()=>{t.value=t.value.trim()}),e||(Ti(t,"compositionstart",JP),Ti(t,"compositionend",$w),Ti(t,"change",$w))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:o,number:r}},i){if(t[ic]=Qh(i),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?sv(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||o&&t.value.trim()===c)||(t.value=c))}},l1e={created(t,{value:e},n){t.checked=Bh(e,n.props.value),t[ic]=Qh(n),Ti(t,"change",()=>{t[ic](ZP(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[ic]=Qh(s),e!==n&&(t.checked=Bh(e,s.props.value))}};function ZP(t){return"_value"in t?t._value:t.value}const eM=["ctrl","shift","alt","meta"],tM={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>eM.some(n=>t[`${n}Key`]&&!e.includes(n))},u1e=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(o,...r)=>{for(let i=0;i<e.length;i++){const a=tM[e[i]];if(a&&a(o,e))return}return t(o,...r)})},JE=Jt({patchProp:QP},TP);let Dl,Tw=!1;function nM(){return Dl||(Dl=YF(JE))}function sM(){return Dl=Tw?Dl:JF(JE),Tw=!0,Dl}const oM=(...t)=>{const e=nM().createApp(...t),{mount:n}=e;return e.mount=s=>{const o=ek(s);if(!o)return;const r=e._component;!je(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=n(o,!1,ZE(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},e},rM=(...t)=>{const e=sM().createApp(...t),{mount:n}=e;return e.mount=s=>{const o=ek(s);if(o)return n(o,!0,ZE(o))},e};function ZE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ek(t){return Ot(t)?document.querySelector(t):t}const iM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,aM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,cM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function lM(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){uM(t);return}return e}function uM(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Yh(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!cM.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(iM.test(t)||aM.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,lM)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const dM=/#/g,hM=/&/g,fM=/\//g,pM=/=/g,fy=/\+/g,mM=/%5e/gi,gM=/%60/gi,vM=/%7c/gi,bM=/%20/gi;function yM(t){return encodeURI(""+t).replace(vM,"|")}function xv(t){return yM(typeof t=="string"?t:JSON.stringify(t)).replace(fy,"%2B").replace(bM,"+").replace(dM,"%23").replace(hM,"%26").replace(gM,"`").replace(mM,"^").replace(fM,"%2F")}function fg(t){return xv(t).replace(pM,"%3D")}function Jh(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function xM(t){return Jh(t.replace(fy," "))}function wM(t){return Jh(t.replace(fy," "))}function tk(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=xM(s[1]);if(o==="__proto__"||o==="constructor")continue;const r=wM(s[2]||"");e[o]===void 0?e[o]=r:Array.isArray(e[o])?e[o].push(r):e[o]=[e[o],r]}return e}function CM(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${fg(t)}=${xv(n)}`).join("&"):`${fg(t)}=${xv(e)}`:fg(t)}function _M(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>CM(e,t[e])).filter(Boolean).join("&")}const SM=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,IM=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,EM=/^([/\\]\s*){2,}[^/\\]/,kM=/^[\s\0]*(blob|data|javascript|vbscript):$/i,$M=/\/$|\/\?|\/#/,TM=/^\.?\//;function mr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?SM.test(t):IM.test(t)||(e.acceptRelative?EM.test(t):!1)}function NM(t){return!!t&&kM.test(t)}function wv(t="",e){return e?$M.test(t):t.endsWith("/")}function np(t="",e){if(!e)return(wv(t)?t.slice(0,-1):t)||"/";if(!wv(t,!0))return t||"/";let n=t,s="";const o=t.indexOf("#");o>=0&&(n=t.slice(0,o),s=t.slice(o));const[r,...i]=n.split("?");return((r.endsWith("/")?r.slice(0,-1):r)||"/")+(i.length>0?`?${i.join("?")}`:"")+s}function Zh(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(wv(t,!0))return t||"/";let n=t,s="";const o=t.indexOf("#");if(o>=0&&(n=t.slice(0,o),s=t.slice(o),!n))return s;const[r,...i]=n.split("?");return r+"/"+(i.length>0?`?${i.join("?")}`:"")+s}function AM(t=""){return t.startsWith("/")}function Nw(t=""){return AM(t)?t:"/"+t}function RM(t,e){if(sk(e)||mr(t))return t;const n=np(e);return t.startsWith(n)?t:sp(n,t)}function Aw(t,e){if(sk(e))return t;const n=np(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function nk(t,e){const n=LM(t),s={...tk(n.search),...e};return n.search=_M(s),FM(n)}function sk(t){return!t||t==="/"}function DM(t){return t&&t!=="/"}function sp(t,...e){let n=t||"";for(const s of e.filter(o=>DM(o)))if(n){const o=s.replace(TM,"");n=Zh(n)+o}else n=s;return n}function ok(...t){var i,a,c,l;const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let o=0;for(const u of n)if(!(!u||u==="/")){for(const[d,h]of u.split(e).entries())if(!(!h||h===".")){if(h===".."){if(s.length===1&&mr(s[0]))continue;s.pop(),o--;continue}if(d===1&&((i=s[s.length-1])!=null&&i.endsWith(":/"))){s[s.length-1]+="/"+h;continue}s.push(h),o++}}let r=s.join("/");return o>=0?(a=n[0])!=null&&a.startsWith("/")&&!r.startsWith("/")?r="/"+r:(c=n[0])!=null&&c.startsWith("./")&&!r.startsWith("./")&&(r="./"+r):r="../".repeat(-1*o)+r,(l=n[n.length-1])!=null&&l.endsWith("/")&&!r.endsWith("/")&&(r+="/"),r}function OM(t,e,n={}){return n.trailingSlash||(t=Zh(t),e=Zh(e)),n.leadingSlash||(t=Nw(t),e=Nw(e)),n.encoding||(t=Jh(t),e=Jh(e)),t===e}const rk=Symbol.for("ufo:protocolRelative");function LM(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,h=""]=n;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!mr(t,{acceptRelative:!0}))return Rw(t);const[,s="",o,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",a=""]=r.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:u}=Rw(a);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:c,search:l,hash:u,[rk]:!s}}function Rw(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function FM(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol||t[rk]?(t.protocol||"")+"//":"")+o+r+e+n+s}class PM extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function MM(t){var c,l,u,d,h;const e=((c=t.error)==null?void 0:c.message)||((l=t.error)==null?void 0:l.toString())||"",n=((u=t.request)==null?void 0:u.method)||((d=t.options)==null?void 0:d.method)||"GET",s=((h=t.request)==null?void 0:h.url)||String(t.request)||"/",o=`[${n}] ${JSON.stringify(s)}`,r=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",i=`${o}: ${r}${e?` ${e}`:""}`,a=new PM(i,t.error?{cause:t.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(a,f,{get(){return t[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,f,{get(){return t.response&&t.response[p]}});return a}const BM=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Dw(t="GET"){return BM.has(t.toUpperCase())}function VM(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const UM=new Set(["image/svg","application/xml","application/xhtml","application/html"]),jM=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function zM(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return jM.test(e)?"json":UM.has(e)||e.startsWith("text/")?"text":"blob"}function WM(t,e,n=globalThis.Headers){const s={...e,...t};if(e!=null&&e.params&&(t!=null&&t.params)&&(s.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&(t!=null&&t.query)&&(s.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&(t!=null&&t.headers)){s.headers=new n((e==null?void 0:e.headers)||{});for(const[o,r]of new n((t==null?void 0:t.headers)||{}))s.headers.set(o,r)}return s}const GM=new Set([408,409,425,429,500,502,503,504]),HM=new Set([101,204,205,304]);function ik(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function o(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let u;typeof a.options.retry=="number"?u=a.options.retry:u=Dw(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):GM.has(d))){const h=a.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),r(a.request,{...a.options,retry:u-1})}}const l=MM(a);throw Error.captureStackTrace&&Error.captureStackTrace(l,r),l}const r=async function(c,l={}){var f;const u={request:c,options:WM(l,t.defaults,n),response:void 0,error:void 0};u.options.method=(f=u.options.method)==null?void 0:f.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=RM(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=nk(u.request,{...u.options.params,...u.options.query}))),u.options.body&&Dw(u.options.method)&&(VM(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new n(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const p=new s;d=setTimeout(()=>p.abort(),u.options.timeout),u.options.signal=p.signal}try{u.response=await e(u.request,u.options)}catch(p){return u.error=p,u.options.onRequestError&&await u.options.onRequestError(u),await o(u)}finally{d&&clearTimeout(d)}if(u.response.body&&!HM.has(u.response.status)&&u.options.method!=="HEAD"){const p=(u.options.parseResponse?"json":u.options.responseType)||zM(u.response.headers.get("content-type")||"");switch(p){case"json":{const m=await u.response.text(),v=u.options.parseResponse||Yh;u.response._data=v(m);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[p]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await o(u)):u.response},i=async function(c,l){return(await r(c,l))._data};return i.raw=r,i.native=(...a)=>e(...a),i.create=(a={})=>ik({...t,defaults:{...t.defaults,...a}}),i}const py=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),KM=py.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),qM=py.Headers,XM=py.AbortController,QM=ik({fetch:KM,Headers:qM,AbortController:XM}),YM=QM,JM=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},ef=JM().app,ZM=()=>ef.baseURL,e3=()=>ef.buildAssetsDir,my=(...t)=>ok(ak(),e3(),...t),ak=(...t)=>{const e=ef.cdnURL||ef.baseURL;return t.length?ok(e,...t):e};globalThis.__buildAssetsURL=my,globalThis.__publicAssetsURL=ak;globalThis.$fetch||(globalThis.$fetch=YM.create({baseURL:ZM()}));function Cv(t,e={},n){for(const s in t){const o=t[s],r=n?`${n}:${s}`:s;typeof o=="object"&&o!==null?Cv(o,e,r):typeof o=="function"&&(e[r]=o)}return e}const t3={run:t=>t()},n3=()=>t3,ck=typeof console.createTask<"u"?console.createTask:n3;function s3(t,e){const n=e.shift(),s=ck(n);return t.reduce((o,r)=>o.then(()=>s.run(()=>r(...e))),Promise.resolve())}function o3(t,e){const n=e.shift(),s=ck(n);return Promise.all(t.map(o=>s.run(()=>o(...e))))}function pg(t,e){for(const n of[...t])n(e)}class r3{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const o=e;let r;for(;this._deprecatedHooks[e];)r=this._deprecatedHooks[e],e=r.to;if(r&&!s.allowDeprecated){let i=r.message;i||(i=`${o} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,o=(...r)=>(typeof s=="function"&&s(),s=void 0,o=void 0,n(...r));return s=this.hook(e,o),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const o of s)this.hook(e,o)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Cv(e),s=Object.keys(n).map(o=>this.hook(o,n[o]));return()=>{for(const o of s.splice(0,s.length))o()}}removeHooks(e){const n=Cv(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(s3,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(o3,e,...n)}callHookWith(e,n,...s){const o=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&pg(this._before,o);const r=e(n in this._hooks?[...this._hooks[n]]:[],s);return r instanceof Promise?r.finally(()=>{this._after&&o&&pg(this._after,o)}):(this._after&&o&&pg(this._after,o),r)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function lk(){return new r3}function i3(t={}){let e,n=!1;const s=i=>{if(e&&e!==i)throw new Error("Context conflict")};let o;if(t.asyncContext){const i=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;i?o=new i:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const r=()=>{if(o&&e===void 0){const i=o.getStore();if(i!==void 0)return i}return e};return{use:()=>{const i=r();if(i===void 0)throw new Error("Context is not available");return i},tryUse:()=>r(),set:(i,a)=>{a||s(i),e=i,n=!0},unset:()=>{e=void 0,n=!1},call:(i,a)=>{s(i),e=i;try{return o?o.run(i,a):a()}finally{n||(e=void 0)}},async callAsync(i,a){e=i;const c=()=>{e=i},l=()=>e===i?c:void 0;_v.add(l);try{const u=o?o.run(i,a):a();return n||(e=void 0),await u}finally{_v.delete(l)}}}}function a3(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=i3({...t,...s})),e[n],e[n]}}}const tf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Ow="__unctx__",c3=tf[Ow]||(tf[Ow]=a3()),l3=(t,e={})=>c3.get(t,e),Lw="__unctx_async_handlers__",_v=tf[Lw]||(tf[Lw]=new Set);function ac(t){const e=[];for(const o of _v){const r=o();r&&e.push(r)}const n=()=>{for(const o of e)o()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(o=>{throw n(),o})),[s,n]}const u3=!1,Sv=!1,d3=!1,h3={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},qa={value:null,errorValue:null,deep:!0},f3=null,p3={},m3="#__nuxt",uk="nuxt-app",Fw=36e5,g3="vite:preloadError";function dk(t=uk){return l3(t,{asyncContext:!1})}const v3="__nuxt_plugin";function b3(t){var o;let e=0;const n={_id:t.id||uk||"nuxt-app",_scope:PI(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.13.2"},get vue(){return n.vueApp.version}},payload:tr({...((o=t.ssrContext)==null?void 0:o.payload)||{},data:tr({}),state:Wo({}),once:new Set,_errors:tr({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!Qb()?n._scope.run(()=>Pw(n,r)):Pw(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:tr({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=lk(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const a="$"+r;nh(n,a,i),nh(n.vueApp.config.globalProperties,a,i)},nh(n.vueApp,"$nuxt",n),nh(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(g3,i=>{n.callHook("app:chunkError",{error:i.payload}),(n.isHydrating||i.payload.message.includes("Unable to preload CSS"))&&i.preventDefault()}),window.useNuxtApp=window.useNuxtApp||kt;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function y3(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function x3(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function w3(t,e){const n=[],s=[],o=[],r=[];let i=0;async function a(c){var u;const l=((u=c.dependsOn)==null?void 0:u.filter(d=>e.some(h=>h._name===d)&&!n.includes(d)))??[];if(l.length>0)s.push([new Set(l),c]);else{const d=x3(t,c).then(async()=>{c._name&&(n.push(c._name),await Promise.all(s.map(async([h,f])=>{h.has(c._name)&&(h.delete(c._name),h.size===0&&(i++,await a(f)))})))});c.parallel?o.push(d.catch(h=>r.push(h))):await d}}for(const c of e)y3(t,c);for(const c of e)await a(c);if(await Promise.all(o),i)for(let c=0;c<i;c++)await Promise.all(o);if(r.length)throw r[0]}function fo(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[v3]:!0,_name:e})}function Pw(t,e,n){const s=()=>e();return dk(t._id).set(t),t.vueApp.runWithContext(s)}function C3(t){var n;let e;return SE()&&(e=(n=ao())==null?void 0:n.appContext.app.$nuxt),e=e||dk(t).tryUse(),e||null}function kt(t){const e=C3(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function xu(t){return kt().$config}function nh(t,e,n){Object.defineProperty(t,e,{get:()=>n})}const Mw=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function _3(t,e){e?e={...Mw,...e}:e=Mw;const n=hk(e);return n.dispatch(t),n.toString()}const S3=Object.freeze(["prototype","__proto__","constructor"]);function hk(t){let e="",n=new Map;const s=o=>{e+=o};return{toString(){return e},getContext(){return n},dispatch(o){return t.replacer&&(o=t.replacer(o)),this[o===null?"null":typeof o](o)},object(o){if(o&&typeof o.toJSON=="function")return this.object(o.toJSON());const r=Object.prototype.toString.call(o);let i="";const a=r.length;a<10?i="unknown:["+r+"]":i=r.slice(8,a-1),i=i.toLowerCase();let c=null;if((c=n.get(o))===void 0)n.set(o,n.size);else return this.dispatch("[CIRCULAR:"+c+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(o))return s("buffer:"),s(o.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](o):t.ignoreUnknown||this.unkown(o,i);else{let l=Object.keys(o);t.unorderedObjects&&(l=l.sort());let u=[];t.respectType!==!1&&!Bw(o)&&(u=S3),t.excludeKeys&&(l=l.filter(h=>!t.excludeKeys(h)),u=u.filter(h=>!t.excludeKeys(h))),s("object:"+(l.length+u.length)+":");const d=h=>{this.dispatch(h),s(":"),t.excludeValues||this.dispatch(o[h]),s(",")};for(const h of l)d(h);for(const h of u)d(h)}},array(o,r){if(r=r===void 0?t.unorderedArrays!==!1:r,s("array:"+o.length+":"),!r||o.length<=1){for(const c of o)this.dispatch(c);return}const i=new Map,a=o.map(c=>{const l=hk(t);l.dispatch(c);for(const[u,d]of l.getContext())i.set(u,d);return l.toString()});return n=i,a.sort(),this.array(a,!1)},date(o){return s("date:"+o.toJSON())},symbol(o){return s("symbol:"+o.toString())},unkown(o,r){if(s(r),!!o&&(s(":"),o&&typeof o.entries=="function"))return this.array(Array.from(o.entries()),!0)},error(o){return s("error:"+o.toString())},boolean(o){return s("bool:"+o)},string(o){s("string:"+o.length+":"),s(o)},function(o){s("fn:"),Bw(o)?this.dispatch("[native]"):this.dispatch(o.toString()),t.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(o.name)),t.respectFunctionProperties&&this.object(o)},number(o){return s("number:"+o)},xml(o){return s("xml:"+o.toString())},null(){return s("Null")},undefined(){return s("Undefined")},regexp(o){return s("regex:"+o.toString())},uint8array(o){return s("uint8array:"),this.dispatch(Array.prototype.slice.call(o))},uint8clampedarray(o){return s("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(o))},int8array(o){return s("int8array:"),this.dispatch(Array.prototype.slice.call(o))},uint16array(o){return s("uint16array:"),this.dispatch(Array.prototype.slice.call(o))},int16array(o){return s("int16array:"),this.dispatch(Array.prototype.slice.call(o))},uint32array(o){return s("uint32array:"),this.dispatch(Array.prototype.slice.call(o))},int32array(o){return s("int32array:"),this.dispatch(Array.prototype.slice.call(o))},float32array(o){return s("float32array:"),this.dispatch(Array.prototype.slice.call(o))},float64array(o){return s("float64array:"),this.dispatch(Array.prototype.slice.call(o))},arraybuffer(o){return s("arraybuffer:"),this.dispatch(new Uint8Array(o))},url(o){return s("url:"+o.toString())},map(o){s("map:");const r=[...o];return this.array(r,t.unorderedSets!==!1)},set(o){s("set:");const r=[...o];return this.array(r,t.unorderedSets!==!1)},file(o){return s("file:"),this.dispatch([o.name,o.size,o.type,o.lastModfied])},blob(){if(t.ignoreUnknown)return s("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return s("domwindow")},bigint(o){return s("bigint:"+o.toString())},process(){return s("process")},timer(){return s("timer")},pipe(){return s("pipe")},tcp(){return s("tcp")},udp(){return s("udp")},tty(){return s("tty")},statwatcher(){return s("statwatcher")},securecontext(){return s("securecontext")},connection(){return s("connection")},zlib(){return s("zlib")},context(){return s("context")},nodescript(){return s("nodescript")},httpparser(){return s("httpparser")},dataview(){return s("dataview")},signal(){return s("signal")},fsevent(){return s("fsevent")},tlswrap(){return s("tlswrap")}}}const fk="[native code] }",I3=fk.length;function Bw(t){return typeof t!="function"?!1:Function.prototype.toString.call(t).slice(-I3)===fk}var E3=Object.defineProperty,k3=(t,e,n)=>e in t?E3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xa=(t,e,n)=>(k3(t,typeof e!="symbol"?e+"":e,n),n);class Br{constructor(e,n){Xa(this,"words"),Xa(this,"sigBytes"),e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}toString(e){return(e||$3).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const s=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=s<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Br([...this.words])}}const $3={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const s=t.words[n>>>2]>>>24-n%4*8&255;e.push((s>>>4).toString(16),(s&15).toString(16))}return e.join("")}},T3={stringify(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];for(let s=0;s<t.sigBytes;s+=3){const o=t.words[s>>>2]>>>24-s%4*8&255,r=t.words[s+1>>>2]>>>24-(s+1)%4*8&255,i=t.words[s+2>>>2]>>>24-(s+2)%4*8&255,a=o<<16|r<<8|i;for(let c=0;c<4&&s*8+c*6<t.sigBytes*8;c++)n.push(e.charAt(a>>>6*(3-c)&63))}return n.join("")}},N3={parse(t){const e=t.length,n=[];for(let s=0;s<e;s++)n[s>>>2]|=(t.charCodeAt(s)&255)<<24-s%4*8;return new Br(n,e)}},A3={parse(t){return N3.parse(unescape(encodeURIComponent(t)))}};class R3{constructor(){Xa(this,"_data",new Br),Xa(this,"_nDataBytes",0),Xa(this,"_minBufferSize",0),Xa(this,"blockSize",512/32)}reset(){this._data=new Br,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=A3.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,n){}_process(e){let n,s=this._data.sigBytes/(this.blockSize*4);e?s=Math.ceil(s):s=Math.max((s|0)-this._minBufferSize,0);const o=s*this.blockSize,r=Math.min(o*4,this._data.sigBytes);if(o){for(let i=0;i<o;i+=this.blockSize)this._doProcessBlock(this._data.words,i);n=this._data.words.splice(0,o),this._data.sigBytes-=r}return new Br(n,r)}}class D3 extends R3{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}var O3=Object.defineProperty,L3=(t,e,n)=>e in t?O3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F3=(t,e,n)=>(L3(t,e+"",n),n);const Vw=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],P3=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],wi=[];class M3 extends D3{constructor(){super(...arguments),F3(this,"_hash",new Br([...Vw]))}reset(){super.reset(),this._hash=new Br([...Vw])}_doProcessBlock(e,n){const s=this._hash.words;let o=s[0],r=s[1],i=s[2],a=s[3],c=s[4],l=s[5],u=s[6],d=s[7];for(let h=0;h<64;h++){if(h<16)wi[h]=e[n+h]|0;else{const x=wi[h-15],y=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,w=wi[h-2],C=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;wi[h]=y+wi[h-7]+C+wi[h-16]}const f=c&l^~c&u,p=o&r^o&i^r&i,m=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),v=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),g=d+v+f+P3[h]+wi[h],b=m+p;d=u,u=l,l=c,c=a+g|0,a=i,i=r,r=o,o=g+b|0}s[0]=s[0]+o|0,s[1]=s[1]+r|0,s[2]=s[2]+i|0,s[3]=s[3]+a|0,s[4]=s[4]+c|0,s[5]=s[5]+l|0,s[6]=s[6]+u|0,s[7]=s[7]+d|0}finalize(e){super.finalize(e);const n=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(s+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function B3(t){return new M3().finalize(t).toString(T3)}function V3(t,e={}){const n=typeof t=="string"?t:_3(t,e);return B3(n).slice(0,10)}function U3(t,e){return{ctx:{table:t},matchAll:n=>mk(n,t)}}function pk(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,o])=>[s,pk(o)])):new Map(Object.entries(t[n]));return e}function j3(t){return U3(pk(t))}function mk(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[r,i]of Uw(e.wildcard))(t===r||t.startsWith(r+"/"))&&s.push(i);for(const[r,i]of Uw(e.dynamic))if(t.startsWith(r+"/")){const a="/"+t.slice(r.length).split("/").splice(2).join("/");s.push(...mk(a,i))}const o=e.static.get(t);return o&&s.push(o),s.filter(Boolean)}function Uw(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function mg(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Iv(t,e,n=".",s){if(!mg(e))return Iv(t,{},n,s);const o=Object.assign({},e);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const i=t[r];i!=null&&(s&&s(o,r,i,n)||(Array.isArray(i)&&Array.isArray(o[r])?o[r]=[...i,...o[r]]:mg(i)&&mg(o[r])?o[r]=Iv(i,o[r],(n?`${n}.`:"")+r.toString(),s):o[r]=i))}return o}function gk(t){return(...e)=>e.reduce((n,s)=>Iv(n,s,"",t),{})}const vk=gk(),z3=gk((t,e,n)=>{if(t[e]!==void 0&&typeof n=="function")return t[e]=n(t[e]),!0});function W3(t,e){try{return e in t}catch{return!1}}var G3=Object.defineProperty,H3=(t,e,n)=>e in t?G3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ei=(t,e,n)=>(H3(t,typeof e!="symbol"?e+"":e,n),n);class Ev extends Error{constructor(e,n={}){super(e,n),Ei(this,"statusCode",500),Ei(this,"fatal",!1),Ei(this,"unhandled",!1),Ei(this,"statusMessage"),Ei(this,"data"),Ei(this,"cause"),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:$v(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=bk(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}Ei(Ev,"__h3_error__",!0);function kv(t){if(typeof t=="string")return new Ev(t);if(K3(t))return t;const e=new Ev(t.message??t.statusMessage??"",{cause:t.cause||t});if(W3(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=$v(t.statusCode,e.statusCode):t.status&&(e.statusCode=$v(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;bk(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function K3(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const q3=/[^\u0009\u0020-\u007E]/g;function bk(t=""){return t.replace(q3,"")}function $v(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const yk=Symbol("layout-meta"),wu=Symbol("route"),Ln=()=>{var t;return(t=kt())==null?void 0:t.$router},op=()=>SE()?Dn(wu,kt()._route):kt()._route;const X3=()=>{try{if(kt()._processingMiddleware)return!0}catch{return!1}return!1},Q3=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:"path"in t?Tv(t):Ln().resolve(t).href;if(e!=null&&e.open){const{target:c="_blank",windowFeatures:l={}}=e.open,u=Object.entries(l).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d.toLowerCase()}=${h}`).join(", ");return open(n,c,u),Promise.resolve()}const s=mr(n,{acceptRelative:!0}),o=(e==null?void 0:e.external)||s;if(o){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(n,window.location.href);if(c&&NM(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const r=X3();if(!o&&r)return t;const i=Ln(),a=kt();return o?(a._scope.stop(),e!=null&&e.replace?location.replace(n):location.href=n,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?i.replace(t):i.push(t)};function Tv(t){return nk(t.path||"",t.query||{})+(t.hash||"")}const xk="__nuxt_error",rp=()=>tE(kt().payload,"error"),Qa=t=>{const e=Cu(t);try{const n=kt(),s=rp();n.hooks.callHook("app:error",e),s.value=s.value||e}catch{throw e}return e},Y3=async(t={})=>{const e=kt(),n=rp();e.callHook("app:error:cleared",t),t.redirect&&await Ln().replace(t.redirect),n.value=f3},J3=t=>!!t&&typeof t=="object"&&xk in t,Cu=t=>{const e=kv(t);return Object.defineProperty(e,xk,{value:!0,configurable:!1,writable:!1}),e},Z3=-1,eB=-2,tB=-3,nB=-4,sB=-5,oB=-6;function rB(t,e){return iB(JSON.parse(t),e)}function iB(t,e){if(typeof t=="number")return o(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function o(r,i=!1){if(r===Z3)return;if(r===tB)return NaN;if(r===nB)return 1/0;if(r===sB)return-1/0;if(r===oB)return-0;if(i)throw new Error("Invalid input");if(r in s)return s[r];const a=n[r];if(!a||typeof a!="object")s[r]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],l=e==null?void 0:e[c];if(l)return s[r]=l(o(a[1]));switch(c){case"Date":s[r]=new Date(a[1]);break;case"Set":const u=new Set;s[r]=u;for(let f=1;f<a.length;f+=1)u.add(o(a[f]));break;case"Map":const d=new Map;s[r]=d;for(let f=1;f<a.length;f+=2)d.set(o(a[f]),o(a[f+1]));break;case"RegExp":s[r]=new RegExp(a[1],a[2]);break;case"Object":s[r]=Object(a[1]);break;case"BigInt":s[r]=BigInt(a[1]);break;case"null":const h=Object.create(null);s[r]=h;for(let f=1;f<a.length;f+=2)h[a[f]]=o(a[f+1]);break;default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);s[r]=c;for(let l=0;l<a.length;l+=1){const u=a[l];u!==eB&&(c[l]=o(u))}}else{const c={};s[r]=c;for(const l in a){const u=a[l];c[l]=o(u)}}return s[r]}return o(0)}const aB=new Set(["title","titleTemplate","script","style","noscript"]),Th=new Set(["base","meta","link","style","script","noscript"]),cB=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),lB=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),wk=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),uB=typeof window<"u";function nf(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Nv(t){if(t._h)return t._h;if(t._d)return nf(t._d);let e=`${t.tag}:${t.textContent||t.innerHTML||""}:`;for(const n in t.props)e+=`${n}:${String(t.props[n])},`;return nf(e)}function Ck(t,e){const n=[],s=e.resolveKeyData||(r=>r.key),o=e.resolveValueData||(r=>r.value);for(const[r,i]of Object.entries(t))n.push(...(Array.isArray(i)?i:[i]).map(a=>{const c={key:r,value:a},l=o(c);return typeof l=="object"?Ck(l,e):Array.isArray(l)?l:{[typeof e.key=="function"?e.key(c):e.key]:s(c),[typeof e.value=="function"?e.value(c):e.value]:l}}).flat());return n}function _k(t,e){return Object.entries(t).map(([n,s])=>{if(typeof s=="object"&&(s=_k(s,e)),e.resolve){const o=e.resolve({key:n,value:s});if(typeof o<"u")return o}return typeof s=="number"&&(s=s.toString()),typeof s=="string"&&e.wrapValue&&(s=s.replace(new RegExp(e.wrapValue,"g"),`\\${e.wrapValue}`),s=`${e.wrapValue}${s}${e.wrapValue}`),`${n}${e.keyValueSeparator||""}${s}`}).join(e.entrySeparator||"")}const Mn=t=>({keyValue:t,metaKey:"property"}),gg=t=>({keyValue:t}),gy={appleItunesApp:{unpack:{entrySeparator:", ",resolve({key:t,value:e}){return`${nr(t)}=${e}`}}},articleExpirationTime:Mn("article:expiration_time"),articleModifiedTime:Mn("article:modified_time"),articlePublishedTime:Mn("article:published_time"),bookReleaseDate:Mn("book:release_date"),charset:{metaKey:"charset"},contentSecurityPolicy:{unpack:{entrySeparator:"; ",resolve({key:t,value:e}){return`${nr(t)} ${e}`}},metaKey:"http-equiv"},contentType:{metaKey:"http-equiv"},defaultStyle:{metaKey:"http-equiv"},fbAppId:Mn("fb:app_id"),msapplicationConfig:gg("msapplication-Config"),msapplicationTileColor:gg("msapplication-TileColor"),msapplicationTileImage:gg("msapplication-TileImage"),ogAudioSecureUrl:Mn("og:audio:secure_url"),ogAudioUrl:Mn("og:audio"),ogImageSecureUrl:Mn("og:image:secure_url"),ogImageUrl:Mn("og:image"),ogSiteName:Mn("og:site_name"),ogVideoSecureUrl:Mn("og:video:secure_url"),ogVideoUrl:Mn("og:video"),profileFirstName:Mn("profile:first_name"),profileLastName:Mn("profile:last_name"),profileUsername:Mn("profile:username"),refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve({key:t,value:e}){if(t==="seconds")return`${e}`}}},robots:{unpack:{entrySeparator:", ",resolve({key:t,value:e}){return typeof e=="boolean"?`${nr(t)}`:`${nr(t)}:${e}`}}},xUaCompatible:{metaKey:"http-equiv"}},Sk=new Set(["og","book","article","profile"]);function Ik(t){var s;const e=nr(t),n=e.indexOf(":");return Sk.has(e.substring(0,n))?"property":((s=gy[t])==null?void 0:s.metaKey)||"name"}function dB(t){var e;return((e=gy[t])==null?void 0:e.keyValue)||nr(t)}function nr(t){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=e.indexOf("-"),s=e.substring(0,n);return s==="twitter"||Sk.has(s)?t.replace(/([A-Z])/g,":$1").toLowerCase():e}function Av(t){if(Array.isArray(t))return t.map(n=>Av(n));if(typeof t!="object"||Array.isArray(t))return t;const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[nr(n)]=Av(t[n]));return e}function hB(t,e){const n=gy[e];return e==="refresh"?`${t.seconds};url=${t.url}`:_k(Av(t),{keyValueSeparator:"=",entrySeparator:", ",resolve({value:s,key:o}){if(s===null)return"";if(typeof s=="boolean")return`${o}`},...n==null?void 0:n.unpack})}const Ek=new Set(["og:image","og:video","og:audio","twitter:image"]);function kk(t){const e={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const s=t[n];String(s)!=="false"&&n&&(e[n]=s)}return e}function jw(t,e){const n=kk(e),s=nr(t),o=Ik(s);if(Ek.has(s)){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[`${t}${i==="url"?"":`${i[0].toUpperCase()}${i.slice(1)}`}`]=n[i]);return $k(r).sort((i,a)=>{var c,l;return(((c=i[o])==null?void 0:c.length)||0)-(((l=a[o])==null?void 0:l.length)||0)})}return[{[o]:s,...n}]}function $k(t){const e=[],n={};for(const o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;const r=t[o];if(!Array.isArray(r)){if(typeof r=="object"&&r){if(Ek.has(nr(o))){e.push(...jw(o,r));continue}n[o]=kk(r)}else n[o]=r;continue}for(const i of r)e.push(...typeof i=="string"?$k({[o]:i}):jw(o,i))}const s=Ck(n,{key({key:o}){return Ik(o)},value({key:o}){return o==="charset"?"charset":"content"},resolveKeyData({key:o}){return dB(o)},resolveValueData({value:o,key:r}){return o===null?"_null":typeof o=="object"?hB(o,r):typeof o=="number"?o.toString():o}});return[...e,...s].map(o=>(o.content==="_null"&&(o.content=null),o))}function fB(t,e){return t instanceof Promise?t.then(e):e(t)}function Rv(t,e,n,s){const o=s||Nk(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},t==="templateParams"||t==="titleTemplate");if(o instanceof Promise)return o.then(i=>Rv(t,e,n,i));const r={tag:t,props:o};for(const i of wk){const a=r.props[i]!==void 0?r.props[i]:n[i];a!==void 0&&((!(i==="innerHTML"||i==="textContent"||i==="children")||aB.has(r.tag))&&(r[i==="children"?"innerHTML":i]=a),delete r.props[i])}return r.props.body&&(r.tagPosition="bodyClose",delete r.props.body),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(i=>({...r,props:{...r.props,content:i}})):r}function pB(t,e){var s;const n=t==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,o])=>o).map(([o,r])=>t==="style"?`${o}:${r}`:o)),(s=String(Array.isArray(e)?e.join(n):e))==null?void 0:s.split(n).filter(o=>!!o.trim()).join(n)}function Tk(t,e,n,s){for(let o=s;o<n.length;o+=1){const r=n[o];if(r==="class"||r==="style"){t[r]=pB(r,t[r]);continue}if(t[r]instanceof Promise)return t[r].then(i=>(t[r]=i,Tk(t,e,n,o)));if(!e&&!wk.has(r)){const i=String(t[r]),a=r.startsWith("data-");i==="true"||i===""?t[r]=a?"true":!0:t[r]||(a&&i==="false"?t[r]="false":delete t[r])}}}function Nk(t,e=!1){const n=Tk(t,e,Object.keys(t),0);return n instanceof Promise?n.then(()=>t):t}const mB=10;function Ak(t,e,n){for(let s=n;s<e.length;s+=1){const o=e[s];if(o instanceof Promise)return o.then(r=>(e[s]=r,Ak(t,e,s)));Array.isArray(o)?t.push(...o):t.push(o)}}function gB(t){const e=[],n=t.resolvedInput;for(const o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;const r=n[o];if(!(r===void 0||!cB.has(o))){if(Array.isArray(r)){for(const i of r)e.push(Rv(o,i,t));continue}e.push(Rv(o,r,t))}}if(e.length===0)return[];const s=[];return fB(Ak(s,e,0),()=>s.map((o,r)=>(o._e=t._i,t.mode&&(o._m=t.mode),o._p=(t._i<<mB)+r,o)))}const zw=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Ww={base:-10,title:10},Gw={critical:-80,high:-10,low:20};function sf(t){const e=t.tagPriority;if(typeof e=="number")return e;let n=100;return t.tag==="meta"?t.props["http-equiv"]==="content-security-policy"?n=-30:t.props.charset?n=-20:t.props.name==="viewport"&&(n=-15):t.tag==="link"&&t.props.rel==="preconnect"?n=20:t.tag in Ww&&(n=Ww[t.tag]),e&&e in Gw?n+Gw[e]:n}const vB=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],bB=["name","property","http-equiv"];function Rk(t){const{props:e,tag:n}=t;if(lB.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${n}:id:${e.id}`;for(const s of bB)if(e[s]!==void 0)return`${n}:${s}:${e[s]}`;return!1}const $r="%separator";function yB(t,e){var s;let n;if(e==="s"||e==="pageTitle")n=t.pageTitle;else if(e.includes(".")){const o=e.indexOf(".");n=(s=t[e.substring(0,o)])==null?void 0:s[e.substring(o+1)]}else n=t[e];return n!==void 0?(n||"").replace(/"/g,'\\"'):void 0}const xB=new RegExp(`${$r}(?:\\s*${$r})*`,"g");function sh(t,e,n){if(typeof t!="string"||!t.includes("%"))return t;let s=t;try{s=decodeURI(t)}catch{}const o=s.match(/%\w+(?:\.\w+)?/g);if(!o)return t;const r=t.includes($r);return t=t.replace(/%\w+(?:\.\w+)?/g,i=>{if(i===$r||!o.includes(i))return i;const a=yB(e,i.slice(1));return a!==void 0?a:i}).trim(),r&&(t.endsWith($r)&&(t=t.slice(0,-$r.length)),t.startsWith($r)&&(t=t.slice($r.length)),t=t.replace(xB,n).trim()),t}function Hw(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function Dk(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async o=>{var d;const r=(await t.resolveTags()).map(h=>({tag:h,id:Th.has(h.tag)?Nv(h):h.tag,shouldRender:!0}));let i=t._dom;if(!i){i={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};const h=new Set;for(const f of["body","head"]){const p=(d=n[f])==null?void 0:d.children;for(const m of p){const v=m.tagName.toLowerCase();if(!Th.has(v))continue;const g={tag:v,props:await Nk(m.getAttributeNames().reduce((w,C)=>({...w,[C]:m.getAttribute(C)}),{})),innerHTML:m.innerHTML},b=Rk(g);let x=b,y=1;for(;x&&h.has(x);)x=`${b}:${y++}`;x&&(g._d=x,h.add(x)),i.elMap[m.getAttribute("data-hid")||Nv(g)]=m}}}i.pendingSideEffects={...i.sideEffects},i.sideEffects={};function a(h,f,p){const m=`${h}:${f}`;i.sideEffects[m]=p,delete i.pendingSideEffects[m]}function c({id:h,$el:f,tag:p}){const m=p.tag.endsWith("Attrs");if(i.elMap[h]=f,m||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),a(h,"el",()=>{var v;(v=i.elMap[h])==null||v.remove(),delete i.elMap[h]})),p._eventHandlers)for(const v in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,v)&&f.getAttribute(`data-${v}`)!==""&&((p.tag==="bodyAttrs"?n.defaultView:f).addEventListener(v.substring(2),p._eventHandlers[v].bind(f)),f.setAttribute(`data-${v}`,""));for(const v in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,v))continue;const g=p.props[v],b=`attr:${v}`;if(v==="class"){if(!g)continue;for(const x of g.split(" "))m&&a(h,`${b}:${x}`,()=>f.classList.remove(x)),!f.classList.contains(x)&&f.classList.add(x)}else if(v==="style"){if(!g)continue;for(const x of g.split(";")){const y=x.indexOf(":"),w=x.substring(0,y).trim(),C=x.substring(y+1).trim();a(h,`${b}:${w}`,()=>{f.style.removeProperty(w)}),f.style.setProperty(w,C)}}else f.getAttribute(v)!==g&&f.setAttribute(v,g===!0?"":String(g)),m&&a(h,b,()=>f.removeAttribute(v))}}const l=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of r){const{tag:f,shouldRender:p,id:m}=h;if(p){if(f.tag==="title"){n.title=f.textContent;continue}h.$el=h.$el||i.elMap[m],h.$el?c(h):Th.has(f.tag)&&l.push(h)}}for(const h of l){const f=h.tag.tagPosition||"head";h.$el=n.createElement(h.tag.tag),c(h),u[f]=u[f]||n.createDocumentFragment(),u[f].appendChild(h.$el)}for(const h of r)await t.hooks.callHook("dom:renderTag",h,n,a);u.head&&n.head.appendChild(u.head),u.bodyOpen&&n.body.insertBefore(u.bodyOpen,n.body.firstChild),u.bodyClose&&n.body.appendChild(u.bodyClose);for(const h in i.pendingSideEffects)i.pendingSideEffects[h]();t._dom=i,await t.hooks.callHook("dom:rendered",{renders:r}),o()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function wB(t,e={}){const n=e.delayFn||(s=>setTimeout(s,10));return t._domDebouncedUpdatePromise=t._domDebouncedUpdatePromise||new Promise(s=>n(()=>Dk(t,e).then(()=>{delete t._domDebouncedUpdatePromise,s()})))}function CB(t){return e=>{var s,o;const n=((o=(s=e.resolvedOptions.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:o.innerHTML)||!1;return n&&e.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":r=>{wB(r,t)}}}}}const _B=new Set(["templateParams","htmlAttrs","bodyAttrs"]),SB={hooks:{"tag:normalise":({tag:t})=>{t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.key&&(t.key=t.props.key,delete t.props.key);const e=Rk(t);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete t.key;const n=e||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":t=>{const e=Object.create(null);for(const s of t.tags){const o=(s.key?`${s.tag}:${s.key}`:s._d)||Nv(s),r=e[o];if(r){let a=s==null?void 0:s.tagDuplicateStrategy;if(!a&&_B.has(s.tag)&&(a="merge"),a==="merge"){const c=r.props;c.style&&s.props.style&&(c.style[c.style.length-1]!==";"&&(c.style+=";"),s.props.style=`${c.style} ${s.props.style}`),c.class&&s.props.class?s.props.class=`${c.class} ${s.props.class}`:c.class&&(s.props.class=c.class),e[o].props={...c,...s.props};continue}else if(s._e===r._e){r._duped=r._duped||[],s._d=`${r._d}:${r._duped.length+1}`,r._duped.push(s);continue}else if(sf(s)>sf(r))continue}if(!(s.innerHTML||s.textContent||Object.keys(s.props).length!==0)&&Th.has(s.tag)){delete e[o];continue}e[o]=s}const n=[];for(const s in e){const o=e[s],r=o._duped;n.push(o),r&&(delete o._duped,n.push(...r))}t.tags=n,t.tags=t.tags.filter(s=>!(s.tag==="meta"&&(s.props.name||s.props.property)&&!s.props.content))}}},IB=new Set(["script","link","bodyAttrs"]),EB=t=>({hooks:{"tags:resolve":e=>{for(const n of e.tags){if(!IB.has(n.tag))continue;const s=n.props;for(const o in s){if(o[0]!=="o"||o[1]!=="n"||!Object.prototype.hasOwnProperty.call(s,o))continue;const r=s[o];typeof r=="function"&&(t.ssr&&zw.has(o)?s[o]=`this.dataset.${o}fired = true`:delete s[o],n._eventHandlers=n._eventHandlers||{},n._eventHandlers[o]=r)}t.ssr&&n._eventHandlers&&(n.props.src||n.props.href)&&(n.key=n.key||nf(n.props.src||n.props.href))}},"dom:renderTag":({$el:e,tag:n})=>{var o,r;const s=e==null?void 0:e.dataset;if(s)for(const i in s){if(!i.endsWith("fired"))continue;const a=i.slice(0,-5);zw.has(a)&&((r=(o=n._eventHandlers)==null?void 0:o[a])==null||r.call(e,new Event(a.substring(2))))}}}}),kB=new Set(["link","style","script","noscript"]),$B={hooks:{"tag:normalise":({tag:t})=>{t.key&&kB.has(t.tag)&&(t.props["data-hid"]=t._h=nf(t.key))}}},TB={mode:"server",hooks:{"tags:beforeResolve":t=>{const e={};let n=!1;for(const s of t.tags)s._m!=="server"||s.tag!=="titleTemplate"&&s.tag!=="templateParams"&&s.tag!=="title"||(e[s.tag]=s.tag==="title"||s.tag==="titleTemplate"?s.textContent:s.props,n=!0);n&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},NB={hooks:{"tags:resolve":t=>{var e;for(const n of t.tags)if(typeof n.tagPriority=="string")for(const{prefix:s,offset:o}of vB){if(!n.tagPriority.startsWith(s))continue;const r=n.tagPriority.substring(s.length),i=(e=t.tags.find(a=>a._d===r))==null?void 0:e._p;if(i!==void 0){n._p=i+o;break}}t.tags.sort((n,s)=>{const o=sf(n),r=sf(s);return o<r?-1:o>r?1:n._p-s._p})}}},AB={meta:"content",link:"href",htmlAttrs:"lang"},RB=["innerHTML","textContent"],DB=t=>({hooks:{"tags:resolve":e=>{var i;const{tags:n}=e;let s;for(let a=0;a<n.length;a+=1)n[a].tag==="templateParams"&&(s=e.tags.splice(a,1)[0].props,a-=1);const o=s||{},r=o.separator||"|";delete o.separator,o.pageTitle=sh(o.pageTitle||((i=n.find(a=>a.tag==="title"))==null?void 0:i.textContent)||"",o,r);for(const a of n){if(a.processTemplateParams===!1)continue;const c=AB[a.tag];if(c&&typeof a.props[c]=="string")a.props[c]=sh(a.props[c],o,r);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const l of RB)typeof a[l]=="string"&&(a[l]=sh(a[l],o,r))}t._templateParams=o,t._separator=r},"tags:afterResolve":({tags:e})=>{let n;for(let s=0;s<e.length;s+=1){const o=e[s];o.tag==="title"&&o.processTemplateParams!==!1&&(n=o)}n!=null&&n.textContent&&(n.textContent=sh(n.textContent,t._templateParams,t._separator))}}}),OB={hooks:{"tags:resolve":t=>{const{tags:e}=t;let n,s;for(let o=0;o<e.length;o+=1){const r=e[o];r.tag==="title"?n=r:r.tag==="titleTemplate"&&(s=r)}if(s&&n){const o=Hw(s.textContent,n.textContent);o!==null?n.textContent=o||n.textContent:t.tags.splice(t.tags.indexOf(n),1)}else if(s){const o=Hw(s.textContent);o!==null&&(s.textContent=o,s.tag="title",s=void 0)}s&&t.tags.splice(t.tags.indexOf(s),1)}}},LB={hooks:{"tags:afterResolve":t=>{for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let Ok;function FB(t={}){const e=PB(t);return e.use(CB()),Ok=e}function Kw(t,e){return!t||t==="server"&&e||t==="client"&&!e}function PB(t={}){const e=lk();e.addHooks(t.hooks||{}),t.document=t.document||(uB?document:void 0);const n=!t.document,s=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let o=0,r=[];const i=[],a={plugins:i,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return r},use(c){const l=typeof c=="function"?c(a):c;(!l.key||!i.some(u=>u.key===l.key))&&(i.push(l),Kw(l.mode,n)&&e.addHooks(l.hooks||{}))},push(c,l){l==null||delete l.head;const u={_i:o++,input:c,...l};return Kw(u.mode,n)&&(r.push(u),s()),{dispose(){r=r.filter(d=>d._i!==u._i),s()},patch(d){for(const h of r)h._i===u._i&&(h.input=u.input=d);s()}}},async resolveTags(){const c={tags:[],entries:[...r]};await e.callHook("entries:resolve",c);for(const l of c.entries){const u=l.resolvedInput||l.input;if(l.resolvedInput=await(l.transform?l.transform(u):u),l.resolvedInput)for(const d of await gB(l)){const h={tag:d,entry:l,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",h),c.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",c),await e.callHook("tags:resolve",c),await e.callHook("tags:afterResolve",c),c.tags},ssr:n};return[SB,TB,EB,$B,NB,DB,OB,LB,...(t==null?void 0:t.plugins)||[]].forEach(c=>a.use(c)),a.hooks.callHook("init",a),a}function MB(){return Ok}const BB=qE[0]==="3";function VB(t){return typeof t=="function"?t():Ge(t)}function of(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const e=VB(t);if(!t||!e)return e;if(Array.isArray(e))return e.map(n=>of(n));if(typeof e=="object"){const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(s==="titleTemplate"||s[0]==="o"&&s[1]==="n"){n[s]=Ge(e[s]);continue}n[s]=of(e[s])}return n}return e}const UB={hooks:{"entries:resolve":t=>{for(const e of t.entries)e.resolvedInput=of(e.input)}}},Lk="usehead";function jB(t){return{install(n){BB&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(Lk,t))}}.install}function zB(t={}){t.domDelayFn=t.domDelayFn||(n=>Uc(()=>setTimeout(()=>n(),0)));const e=FB(t);return e.use(UB),e.install=jB(e),e}const Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ov="__unhead_injection_handler__";function WB(t){Dv[Ov]=t}function GB(){if(Ov in Dv)return Dv[Ov]();const t=Dn(Lk);return t||MB()}function HB(t,e={}){const n=e.head||GB();if(n)return n.ssr?n.push(t,e):KB(n,t,e)}function KB(t,e,n={}){const s=is(!1),o=is({});nP(()=>{o.value=s.value?{}:of(e)});const r=t.push(o.value,n);return to(o,a=>{r.patch(a)}),ao()&&(yu(()=>{r.dispose()}),mE(()=>{s.value=!0}),pE(()=>{s.value=!1})),r}let Nh,Ah;function qB(){return Nh=$fetch(my(`builds/meta/${xu().app.buildId}.json`),{responseType:"json"}),Nh.then(t=>{Ah=j3(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Nh}function ip(){return Nh||qB()}async function vy(t){if(await ip(),!Ah)return console.error("[nuxt] Error creating app manifest matcher.",Ah),{};try{return vk({},...Ah.matchAll(t).reverse())}catch(e){return console.error("[nuxt] Error matching route rules.",e),{}}}async function qw(t,e={}){const n=await QB(t,e),s=kt(),o=s._payloadCache=s._payloadCache||{};return n in o||(o[n]=Pk(t).then(r=>r?Fk(n).then(i=>i||(delete o[n],null)):(o[n]=null,null))),o[n]}const XB="_payload.json";async function QB(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||mr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=xu(),o=e.hash||(e.fresh?Date.now():s.app.buildId),r=s.app.cdnURL,i=r&&await Pk(t)?r:s.app.baseURL;return sp(i,n.pathname,XB+(o?`?${o}`:""))}async function Fk(t){const e=fetch(t).then(n=>n.text().then(Mk));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Pk(t=op().path){if(t=np(t),(await ip()).prerendered.includes(t))return!0;const n=await vy(t);return!!n.prerender&&!n.redirect}let Ci=null;async function YB(){var s;if(Ci)return Ci;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Mk(t.textContent||""),n=t.dataset.src?await Fk(t.dataset.src):void 0;return Ci={...e,...n,...window.__NUXT__},(s=Ci.config)!=null&&s.public&&(Ci.config.public=Wo(Ci.config.public)),Ci}async function Mk(t){return await rB(t,kt()._payloadRevivers)}function JB(t,e){kt()._payloadRevivers[t]=e}const Xw={NuxtError:t=>Cu(t),EmptyShallowRef:t=>qi(t==="_"?void 0:t==="0n"?BigInt(0):Yh(t)),EmptyRef:t=>is(t==="_"?void 0:t==="0n"?BigInt(0):Yh(t)),ShallowRef:t=>qi(t),ShallowReactive:t=>tr(t),Ref:t=>is(t),Reactive:t=>Wo(t)},ZB=fo({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const s in Xw)JB(s,Xw[s]);Object.assign(t.payload,([e,n]=ac(()=>t.runWithContext(YB)),e=await e,n(),e)),window.__NUXT__=t.payload}}),e4=[],t4=fo({name:"nuxt:head",enforce:"pre",setup(t){const e=zB({plugins:e4});WB(()=>kt().vueApp._context.provides.usehead),t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await Dk(e)};e.hooks.hook("dom:beforeRender",o=>{o.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Va=typeof document<"u";function Bk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function n4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Bk(t.default)}const ht=Object.assign;function vg(t,e){const n={};for(const s in e){const o=e[s];n[s]=co(o)?o.map(t):t(o)}return n}const Ol=()=>{},co=Array.isArray,Vk=/#/g,s4=/&/g,o4=/\//g,r4=/=/g,i4=/\?/g,Uk=/\+/g,a4=/%5B/g,c4=/%5D/g,jk=/%5E/g,l4=/%60/g,zk=/%7B/g,u4=/%7C/g,Wk=/%7D/g,d4=/%20/g;function by(t){return encodeURI(""+t).replace(u4,"|").replace(a4,"[").replace(c4,"]")}function h4(t){return by(t).replace(zk,"{").replace(Wk,"}").replace(jk,"^")}function Lv(t){return by(t).replace(Uk,"%2B").replace(d4,"+").replace(Vk,"%23").replace(s4,"%26").replace(l4,"`").replace(zk,"{").replace(Wk,"}").replace(jk,"^")}function f4(t){return Lv(t).replace(r4,"%3D")}function p4(t){return by(t).replace(Vk,"%23").replace(i4,"%3F")}function m4(t){return t==null?"":p4(t).replace(o4,"%2F")}function ql(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const g4=/\/$/,v4=t=>t.replace(g4,"");function bg(t,e,n="/"){let s,o={},r="",i="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),o=t(r)),a>-1&&(s=s||e.slice(0,a),i=e.slice(a,e.length)),s=w4(s??e,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:ql(i)}}function b4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Qw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function y4(t,e,n){const s=e.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&mc(e.matched[s],n.matched[o])&&Gk(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function mc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!x4(t[n],e[n]))return!1;return!0}function x4(t,e){return co(t)?Yw(t,e):co(e)?Yw(e,t):t===e}function Yw(t,e){return co(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function w4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let r=n.length-1,i,a;for(i=0;i<s.length;i++)if(a=s[i],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i).join("/")}const Xs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xl;(function(t){t.pop="pop",t.push="push"})(Xl||(Xl={}));var Ll;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ll||(Ll={}));function C4(t){if(!t)if(Va){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),v4(t)}const _4=/^[^#]+#/;function S4(t,e){return t.replace(_4,"#")+e}function I4(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ap=()=>({left:window.scrollX,top:window.scrollY});function E4(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=I4(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jw(t,e){return(history.state?history.state.position-e:-1)+t}const Fv=new Map;function k4(t,e){Fv.set(t,e)}function $4(t){const e=Fv.get(t);return Fv.delete(t),e}let T4=()=>location.protocol+"//"+location.host;function Hk(t,e){const{pathname:n,search:s,hash:o}=e,r=t.indexOf("#");if(r>-1){let a=o.includes(t.slice(r))?t.slice(r).length:1,c=o.slice(a);return c[0]!=="/"&&(c="/"+c),Qw(c,"")}return Qw(n,t)+s+o}function N4(t,e,n,s){let o=[],r=[],i=null;const a=({state:h})=>{const f=Hk(t,location),p=n.value,m=e.value;let v=0;if(h){if(n.value=f,e.value=h,i&&i===p){i=null;return}v=m?h.position-m.position:0}else s(f);o.forEach(g=>{g(n.value,p,{delta:v,type:Xl.pop,direction:v?v>0?Ll.forward:Ll.back:Ll.unknown})})};function c(){i=n.value}function l(h){o.push(h);const f=()=>{const p=o.indexOf(h);p>-1&&o.splice(p,1)};return r.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(ht({},h.state,{scroll:ap()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function Zw(t,e,n,s=!1,o=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:o?ap():null}}function A4(t){const{history:e,location:n}=window,s={value:Hk(t,n)},o={value:e.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(c,l,u){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:T4()+t+c;try{e[u?"replaceState":"pushState"](l,"",h),o.value=l}catch(f){console.error(f),n[u?"replace":"assign"](h)}}function i(c,l){const u=ht({},e.state,Zw(o.value.back,c,o.value.forward,!0),l,{position:o.value.position});r(c,u,!0),s.value=c}function a(c,l){const u=ht({},o.value,e.state,{forward:c,scroll:ap()});r(u.current,u,!0);const d=ht({},Zw(s.value,c,null),{position:u.position+1},l);r(c,d,!1),s.value=c}return{location:s,state:o,push:a,replace:i}}function Kk(t){t=C4(t);const e=A4(t),n=N4(t,e.state,e.location,e.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=ht({location:"",base:t,go:s,createHref:S4.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function R4(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Kk(t)}function D4(t){return typeof t=="string"||t&&typeof t=="object"}function qk(t){return typeof t=="string"||typeof t=="symbol"}const Xk=Symbol("");var eC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(eC||(eC={}));function gc(t,e){return ht(new Error,{type:t,[Xk]:!0},e)}function qo(t,e){return t instanceof Error&&Xk in t&&(e==null||!!(t.type&e))}const tC="[^/]+?",O4={sensitive:!1,strict:!1,start:!0,end:!0},L4=/[.+*?^${}()[\]/\\]/g;function F4(t,e){const n=ht({},O4,e),s=[];let o=n.start?"^":"";const r=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(o+="/");for(let d=0;d<l.length;d++){const h=l[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(o+="/"),o+=h.value.replace(L4,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:v,regexp:g}=h;r.push({name:p,repeatable:m,optional:v});const b=g||tC;if(b!==tC){f+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let x=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(x=v&&l.length<2?`(?:/${x})`:"/"+x),v&&(x+="?"),o+=x,f+=20,v&&(f+=-8),m&&(f+=-20),b===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(l){const u=l.match(i),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=r[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function c(l){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:v}=f,g=p in l?l[p]:"";if(co(g)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=co(g)?g.join("/"):g;if(!b)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u||"/"}return{re:i,score:s,keys:r,parse:a,stringify:c}}function P4(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Qk(t,e){let n=0;const s=t.score,o=e.score;for(;n<s.length&&n<o.length;){const r=P4(s[n],o[n]);if(r)return r;n++}if(Math.abs(o.length-s.length)===1){if(nC(s))return 1;if(nC(o))return-1}return o.length-s.length}function nC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const M4={type:0,value:""},B4=/[a-zA-Z0-9_]/;function V4(t){if(!t)return[[]];if(t==="/")return[[M4]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,c,l="",u="";function d(){l&&(n===0?r.push({type:0,value:l}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),i()):c===":"?(d(),n=1):h();break;case 4:h(),n=s;break;case 1:c==="("?n=2:B4.test(c)?h():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),i(),o}function U4(t,e,n){const s=F4(V4(t.path),n),o=ht(s,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function j4(t,e){const n=[],s=new Map;e=iC({strict:!1,end:!0,sensitive:!1},e);function o(d){return s.get(d)}function r(d,h,f){const p=!f,m=oC(d);m.aliasOf=f&&f.record;const v=iC(e,d),g=[m];if("alias"in d){const y=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of y)g.push(oC(ht({},m,{components:f?f.record.components:m.components,path:w,aliasOf:f?f.record:m})))}let b,x;for(const y of g){const{path:w}=y;if(h&&w[0]!=="/"){const C=h.record.path,_=C[C.length-1]==="/"?"":"/";y.path=h.record.path+(w&&_+w)}if(b=U4(y,h,v),f?f.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),p&&d.name&&!rC(b)&&i(d.name)),Yk(b)&&c(b),m.children){const C=m.children;for(let _=0;_<C.length;_++)r(C[_],b,f&&f.children[_])}f=f||b}return x?()=>{i(x)}:Ol}function i(d){if(qk(d)){const h=s.get(d);h&&(s.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(i),h.alias.forEach(i))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&s.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return n}function c(d){const h=G4(d,n);n.splice(h,0,d),d.record.name&&!rC(d)&&s.set(d.record.name,d)}function l(d,h){let f,p={},m,v;if("name"in d&&d.name){if(f=s.get(d.name),!f)throw gc(1,{location:d});v=f.record.name,p=ht(sC(h.params,f.keys.filter(x=>!x.optional).concat(f.parent?f.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&sC(d.params,f.keys.map(x=>x.name))),m=f.stringify(p)}else if(d.path!=null)m=d.path,f=n.find(x=>x.re.test(m)),f&&(p=f.parse(m),v=f.record.name);else{if(f=h.name?s.get(h.name):n.find(x=>x.re.test(h.path)),!f)throw gc(1,{location:d,currentLocation:h});v=f.record.name,p=ht({},h.params,d.params),m=f.stringify(p)}const g=[];let b=f;for(;b;)g.unshift(b.record),b=b.parent;return{name:v,path:m,params:p,matched:g,meta:W4(g)}}t.forEach(d=>r(d));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:l,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:o}}function sC(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function oC(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:z4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function z4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function rC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function W4(t){return t.reduce((e,n)=>ht(e,n.meta),{})}function iC(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function G4(t,e){let n=0,s=e.length;for(;n!==s;){const r=n+s>>1;Qk(t,e[r])<0?s=r:n=r+1}const o=H4(t);return o&&(s=e.lastIndexOf(o,s-1)),s}function H4(t){let e=t;for(;e=e.parent;)if(Yk(e)&&Qk(t,e)===0)return e}function Yk({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function K4(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(Uk," "),i=r.indexOf("="),a=ql(i<0?r:r.slice(0,i)),c=i<0?null:ql(r.slice(i+1));if(a in e){let l=e[a];co(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function aC(t){let e="";for(let n in t){const s=t[n];if(n=f4(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(co(s)?s.map(r=>r&&Lv(r)):[s&&Lv(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function q4(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=co(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return e}const X4=Symbol(""),cC=Symbol(""),yy=Symbol(""),xy=Symbol(""),Pv=Symbol("");function ul(){let t=[];function e(s){return t.push(s),()=>{const o=t.indexOf(s);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Tr(t,e,n,s,o,r=i=>i()){const i=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((a,c)=>{const l=h=>{h===!1?c(gc(4,{from:n,to:e})):h instanceof Error?c(h):D4(h)?c(gc(2,{from:e,to:h})):(i&&s.enterCallbacks[o]===i&&typeof h=="function"&&i.push(h),a())},u=r(()=>t.call(s&&s.instances[o],e,n,l));let d=Promise.resolve(u);t.length<3&&(d=d.then(l)),d.catch(h=>c(h))})}function yg(t,e,n,s,o=r=>r()){const r=[];for(const i of t)for(const a in i.components){let c=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(Bk(c)){const u=(c.__vccOpts||c)[e];u&&r.push(Tr(u,n,s,i,a,o))}else{let l=c();r.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const d=n4(u)?u.default:u;i.mods[a]=u,i.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Tr(f,n,s,i,a,o)()}))}}return r}function lC(t){const e=Dn(yy),n=Dn(xy),s=pt(()=>{const c=Ge(t.to);return e.resolve(c)}),o=pt(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const h=d.findIndex(mc.bind(null,u));if(h>-1)return h;const f=uC(c[l-2]);return l>1&&uC(u)===f&&d[d.length-1].path!==f?d.findIndex(mc.bind(null,c[l-2])):h}),r=pt(()=>o.value>-1&&Z4(n.params,s.value.params)),i=pt(()=>o.value>-1&&o.value===n.matched.length-1&&Gk(n.params,s.value.params));function a(c={}){return J4(c)?e[Ge(t.replace)?"replace":"push"](Ge(t.to)).catch(Ol):Promise.resolve()}return{route:s,href:pt(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const Q4=Sn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lC,setup(t,{slots:e}){const n=Wo(lC(t)),{options:s}=Dn(yy),o=pt(()=>({[dC(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[dC(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:pn("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Y4=Q4;function J4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Z4(t,e){for(const n in e){const s=e[n],o=t[n];if(typeof s=="string"){if(s!==o)return!1}else if(!co(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function uC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const dC=(t,e,n)=>t??e??n,eV=Sn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Dn(Pv),o=pt(()=>t.route||s.value),r=Dn(cC,0),i=pt(()=>{let l=Ge(r);const{matched:u}=o.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=pt(()=>o.value.matched[i.value]);ji(cC,pt(()=>i.value+1)),ji(X4,a),ji(Pv,o);const c=is();return to(()=>[c.value,a.value,t.name],([l,u,d],[h,f,p])=>{u&&(u.instances[d]=l,f&&f!==u&&l&&l===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!mc(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=o.value,u=t.name,d=a.value,h=d&&d.components[u];if(!h)return hC(n.default,{Component:h,route:l});const f=d.props[u],p=f?f===!0?l.params:typeof f=="function"?f(l):f:null,v=pn(h,ht({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return hC(n.default,{Component:v,route:l})||v}}});function hC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Jk=eV;function tV(t){const e=j4(t.routes,t),n=t.parseQuery||K4,s=t.stringifyQuery||aC,o=t.history,r=ul(),i=ul(),a=ul(),c=qi(Xs);let l=Xs;Va&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=vg.bind(null,q=>""+q),d=vg.bind(null,m4),h=vg.bind(null,ql);function f(q,ue){let le,pe;return qk(q)?(le=e.getRecordMatcher(q),pe=ue):pe=q,e.addRoute(pe,le)}function p(q){const ue=e.getRecordMatcher(q);ue&&e.removeRoute(ue)}function m(){return e.getRoutes().map(q=>q.record)}function v(q){return!!e.getRecordMatcher(q)}function g(q,ue){if(ue=ht({},ue||c.value),typeof q=="string"){const L=bg(n,q,ue.path),K=e.resolve({path:L.path},ue),oe=o.createHref(L.fullPath);return ht(L,K,{params:h(K.params),hash:ql(L.hash),redirectedFrom:void 0,href:oe})}let le;if(q.path!=null)le=ht({},q,{path:bg(n,q.path,ue.path).path});else{const L=ht({},q.params);for(const K in L)L[K]==null&&delete L[K];le=ht({},q,{params:d(L)}),ue.params=d(ue.params)}const pe=e.resolve(le,ue),_e=q.hash||"";pe.params=u(h(pe.params));const Re=b4(s,ht({},q,{hash:h4(_e),path:pe.path})),N=o.createHref(Re);return ht({fullPath:Re,hash:_e,query:s===aC?q4(q.query):q.query||{}},pe,{redirectedFrom:void 0,href:N})}function b(q){return typeof q=="string"?bg(n,q,c.value.path):ht({},q)}function x(q,ue){if(l!==q)return gc(8,{from:ue,to:q})}function y(q){return _(q)}function w(q){return y(ht(b(q),{replace:!0}))}function C(q){const ue=q.matched[q.matched.length-1];if(ue&&ue.redirect){const{redirect:le}=ue;let pe=typeof le=="function"?le(q):le;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),ht({query:q.query,hash:q.hash,params:pe.path!=null?{}:q.params},pe)}}function _(q,ue){const le=l=g(q),pe=c.value,_e=q.state,Re=q.force,N=q.replace===!0,L=C(le);if(L)return _(ht(b(L),{state:typeof L=="object"?ht({},_e,L.state):_e,force:Re,replace:N}),ue||le);const K=le;K.redirectedFrom=ue;let oe;return!Re&&y4(s,pe,le)&&(oe=gc(16,{to:K,from:pe}),re(pe,pe,!0,!1)),(oe?Promise.resolve(oe):E(K,pe)).catch(se=>qo(se)?qo(se,2)?se:ne(se):D(se,K,pe)).then(se=>{if(se){if(qo(se,2))return _(ht({replace:N},b(se.to),{state:typeof se.to=="object"?ht({},_e,se.to.state):_e,force:Re}),ue||K)}else se=A(K,pe,!0,N,_e);return O(K,pe,se),se})}function S(q,ue){const le=x(q,ue);return le?Promise.reject(le):Promise.resolve()}function I(q){const ue=ye.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(q):q()}function E(q,ue){let le;const[pe,_e,Re]=nV(q,ue);le=yg(pe.reverse(),"beforeRouteLeave",q,ue);for(const L of pe)L.leaveGuards.forEach(K=>{le.push(Tr(K,q,ue))});const N=S.bind(null,q,ue);return le.push(N),ge(le).then(()=>{le=[];for(const L of r.list())le.push(Tr(L,q,ue));return le.push(N),ge(le)}).then(()=>{le=yg(_e,"beforeRouteUpdate",q,ue);for(const L of _e)L.updateGuards.forEach(K=>{le.push(Tr(K,q,ue))});return le.push(N),ge(le)}).then(()=>{le=[];for(const L of Re)if(L.beforeEnter)if(co(L.beforeEnter))for(const K of L.beforeEnter)le.push(Tr(K,q,ue));else le.push(Tr(L.beforeEnter,q,ue));return le.push(N),ge(le)}).then(()=>(q.matched.forEach(L=>L.enterCallbacks={}),le=yg(Re,"beforeRouteEnter",q,ue,I),le.push(N),ge(le))).then(()=>{le=[];for(const L of i.list())le.push(Tr(L,q,ue));return le.push(N),ge(le)}).catch(L=>qo(L,8)?L:Promise.reject(L))}function O(q,ue,le){a.list().forEach(pe=>I(()=>pe(q,ue,le)))}function A(q,ue,le,pe,_e){const Re=x(q,ue);if(Re)return Re;const N=ue===Xs,L=Va?history.state:{};le&&(pe||N?o.replace(q.fullPath,ht({scroll:N&&L&&L.scroll},_e)):o.push(q.fullPath,_e)),c.value=q,re(q,ue,le,N),ne()}let P;function z(){P||(P=o.listen((q,ue,le)=>{if(!fe.listening)return;const pe=g(q),_e=C(pe);if(_e){_(ht(_e,{replace:!0}),pe).catch(Ol);return}l=pe;const Re=c.value;Va&&k4(Jw(Re.fullPath,le.delta),ap()),E(pe,Re).catch(N=>qo(N,12)?N:qo(N,2)?(_(N.to,pe).then(L=>{qo(L,20)&&!le.delta&&le.type===Xl.pop&&o.go(-1,!1)}).catch(Ol),Promise.reject()):(le.delta&&o.go(-le.delta,!1),D(N,pe,Re))).then(N=>{N=N||A(pe,Re,!1),N&&(le.delta&&!qo(N,8)?o.go(-le.delta,!1):le.type===Xl.pop&&qo(N,20)&&o.go(-1,!1)),O(pe,Re,N)}).catch(Ol)}))}let G=ul(),M=ul(),R;function D(q,ue,le){ne(q);const pe=M.list();return pe.length?pe.forEach(_e=>_e(q,ue,le)):console.error(q),Promise.reject(q)}function j(){return R&&c.value!==Xs?Promise.resolve():new Promise((q,ue)=>{G.add([q,ue])})}function ne(q){return R||(R=!q,z(),G.list().forEach(([ue,le])=>q?le(q):ue()),G.reset()),q}function re(q,ue,le,pe){const{scrollBehavior:_e}=t;if(!Va||!_e)return Promise.resolve();const Re=!le&&$4(Jw(q.fullPath,0))||(pe||!le)&&history.state&&history.state.scroll||null;return Uc().then(()=>_e(q,ue,Re)).then(N=>N&&E4(N)).catch(N=>D(N,q,ue))}const de=q=>o.go(q);let he;const ye=new Set,fe={currentRoute:c,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:m,resolve:g,options:t,push:y,replace:w,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:M.add,isReady:j,install(q){const ue=this;q.component("RouterLink",Y4),q.component("RouterView",Jk),q.config.globalProperties.$router=ue,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Ge(c)}),Va&&!he&&c.value===Xs&&(he=!0,y(o.location).catch(_e=>{}));const le={};for(const _e in Xs)Object.defineProperty(le,_e,{get:()=>c.value[_e],enumerable:!0});q.provide(yy,ue),q.provide(xy,tr(le)),q.provide(Pv,c);const pe=q.unmount;ye.add(q),q.unmount=function(){ye.delete(q),ye.size<1&&(l=Xs,P&&P(),P=null,c.value=Xs,he=!1,R=!1),pe()}}};function ge(q){return q.reduce((ue,le)=>ue.then(()=>I(le)),Promise.resolve())}return fe}function nV(t,e){const n=[],s=[],o=[],r=Math.max(e.matched.length,t.matched.length);for(let i=0;i<r;i++){const a=e.matched[i];a&&(t.matched.find(l=>mc(l,a))?s.push(a):n.push(a));const c=t.matched[i];c&&(e.matched.find(l=>mc(l,c))||o.push(c))}return[n,s,o]}function sV(t){return Dn(xy)}const oV=(t,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var s;return((s=t.params[n.slice(1)])==null?void 0:s.toString())||""}),Mv=(t,e)=>{const n=t.route.matched.find(o=>{var r;return((r=o.components)==null?void 0:r.default)===t.Component.type}),s=e??(n==null?void 0:n.meta.key)??(n&&oV(t.route,n));return typeof s=="function"?s(t.route):s},rV=(t,e)=>({default:()=>t?pn(EF,t===!0?{}:t,e):e});function wy(t){return Array.isArray(t)?t:[t]}const iV="modulepreload",aV=function(t,e){return new URL(t,e).href},fC={},wl=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=aV(l,s),l in fC)return;fC[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===l&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":iV,u||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},cV={alias:["/en","/en.html"]},xg=[{name:"en-US",path:"/en-US",meta:cV||{},alias:["/en","/en.html"],component:()=>wl(()=>import("./BqYBw_iy.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)},{name:"en-US-military",path:"/en-US/military",component:()=>wl(()=>import("./BPBAvWHB.js"),__vite__mapDeps([5,6,2,3,7]),import.meta.url)},{name:"index",path:"/",component:()=>wl(()=>import("./BJU16KN_.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)},{name:"military",path:"/military",component:()=>wl(()=>import("./D0tpFfJU.js"),__vite__mapDeps([9,6,2,3,7]),import.meta.url)}],Zk=(t,e,n)=>(e=e===!0?{}:e,{default:()=>{var s;return e?pn(t,e,n):(s=n.default)==null?void 0:s.call(n)}});function pC(t){const e=(t==null?void 0:t.meta.key)??t.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var s;return((s=t.params[n.slice(1)])==null?void 0:s.toString())||""});return typeof e=="function"?e(t):e}function lV(t,e){return t===e||e===Xs?!1:pC(t)!==pC(e)?!0:!t.matched.every((s,o)=>{var r,i;return s.components&&s.components.default===((i=(r=e.matched[o])==null?void 0:r.components)==null?void 0:i.default)})}function d1e(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return e$(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}return null}function e$(t,e=[],n=!1){if(t&&t.nodeName){if(dV(t))return e;if(!uV(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll("[data-island-slot]").forEach(o=>{o.innerHTML=""}),e.push(s.outerHTML)}e$(t.nextSibling,e,n)}return e}function uV(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function dV(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const hV={scrollBehavior(t,e,n){var l;const s=kt(),o=((l=Ln().options)==null?void 0:l.scrollBehaviorType)??"auto";let r=n||void 0;const i=typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop;if(!r&&e&&t&&i!==!1&&lV(t,e)&&(r={left:0,top:0}),t.path===e.path)return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:mC(t.hash),behavior:o}:!1;const a=u=>!!(u.meta.pageTransition??Sv),c=a(e)&&a(t)?"page:transition:finish":"page:finish";return new Promise(u=>{s.hooks.hookOnce(c,async()=>{await new Promise(d=>setTimeout(d,0)),t.hash&&(r={el:t.hash,top:mC(t.hash),behavior:o}),u(r)})})}};function mC(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const fV={hashMode:!1,scrollBehaviorType:"auto"},Is={...fV,...hV},pV=async t=>{var c;let e,n;if(!((c=t.meta)!=null&&c.validate))return;const s=kt(),o=Ln(),r=([e,n]=ac(()=>Promise.resolve(t.meta.validate(t))),e=await e,n(),e);if(r===!0)return;const i=Cu({statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}}),a=o.beforeResolve(l=>{if(a(),l===t){const u=o.afterEach(async()=>{u(),await s.runWithContext(()=>Qa(i)),window==null||window.history.pushState({},"",t.fullPath)});return!1}})},mV=async t=>{let e,n;const s=([e,n]=ac(()=>vy(t.path)),e=await e,n(),e);if(s.redirect)return mr(s.redirect,{acceptRelative:!0})?(window.location.href=s.redirect,!1):s.redirect},gV=[pV,mV],Fl={};function vV(t,e,n){const{pathname:s,search:o,hash:r}=e,i=t.indexOf("#");if(i>-1){const l=r.includes(t.slice(i))?t.slice(i).length:1;let u=r.slice(l);return u[0]!=="/"&&(u="/"+u),Aw(u,"")}const a=Aw(s,t),c=!n||OM(a,n,{trailingSlash:!0})?a:n;return c+(c.includes("?")?"":o)+r}const bV=fo({name:"nuxt:router",enforce:"pre",async setup(t){var v;let e,n,s=xu().app.baseURL;Is.hashMode&&!s.includes("#")&&(s+="#");const o=((v=Is.history)==null?void 0:v.call(Is,s))??(Is.hashMode?R4(s):Kk(s)),r=Is.routes?([e,n]=ac(()=>Is.routes(xg)),e=await e,n(),e??xg):xg;let i;const a=tV({...Is,scrollBehavior:(g,b,x)=>{if(b===Xs){i=x;return}if(Is.scrollBehavior){if(a.options.scrollBehavior=Is.scrollBehavior,"scrollRestoration"in window.history){const y=a.beforeEach(()=>{y(),window.history.scrollRestoration="manual"})}return Is.scrollBehavior(g,Xs,i||x)}},history:o,routes:r});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const c=qi(a.currentRoute.value);a.afterEach((g,b)=>{c.value=b}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>c.value});const l=vV(s,window.location,t.payload.path),u=qi(a.currentRoute.value),d=()=>{u.value=a.currentRoute.value};t.hook("page:finish",d),a.afterEach((g,b)=>{var x,y,w,C;((y=(x=g.matched[0])==null?void 0:x.components)==null?void 0:y.default)===((C=(w=b.matched[0])==null?void 0:w.components)==null?void 0:C.default)&&d()});const h={};for(const g in u.value)Object.defineProperty(h,g,{get:()=>u.value[g],enumerable:!0});t._route=tr(h),t._middleware=t._middleware||{global:[],named:{}};const f=rp();a.afterEach(async(g,b,x)=>{delete t._processingMiddleware,!t.isHydrating&&f.value&&await t.runWithContext(Y3),x&&await t.callHook("page:loading:end"),g.matched.length===0&&await t.runWithContext(()=>Qa(kv({statusCode:404,fatal:!1,statusMessage:`Page not found: ${g.fullPath}`,data:{path:g.fullPath}})))});try{[e,n]=ac(()=>a.isReady()),await e,n()}catch(g){[e,n]=ac(()=>t.runWithContext(()=>Qa(g))),await e,n()}const p=l!==a.currentRoute.value.fullPath?a.resolve(l):a.currentRoute.value;d();const m=t.payload.state._layout;return a.beforeEach(async(g,b)=>{var x;await t.callHook("page:loading:start"),g.meta=Wo(g.meta),t.isHydrating&&m&&!Wr(g.meta.layout)&&(g.meta.layout=m),t._processingMiddleware=!0;{const y=new Set([...gV,...t._middleware.global]);for(const w of g.matched){const C=w.meta.middleware;if(C)for(const _ of wy(C))y.add(_)}{const w=await t.runWithContext(()=>vy(g.path));if(w.appMiddleware)for(const C in w.appMiddleware)w.appMiddleware[C]?y.add(C):y.delete(C)}for(const w of y){const C=typeof w=="string"?t._middleware.named[w]||await((x=Fl[w])==null?void 0:x.call(Fl).then(S=>S.default||S)):w;if(!C)throw new Error(`Unknown route middleware: '${w}'.`);const _=await t.runWithContext(()=>C(g,b));if(!t.payload.serverRendered&&t.isHydrating&&(_===!1||_ instanceof Error)){const S=_||kv({statusCode:404,statusMessage:`Page Not Found: ${l}`});return await t.runWithContext(()=>Qa(S)),!1}if(_!==!0&&(_||_===!1))return _}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),t.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await a.replace({...p,force:!0}),a.options.scrollBehavior=Is.scrollBehavior}catch(g){await t.runWithContext(()=>Qa(g))}}),{provide:{router:a}}}}),Bv=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),yV=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),cp=t=>{const e=kt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Bv(()=>t())}):Bv(()=>t())},xV=fo({name:"nuxt:payload",setup(t){Ln().beforeResolve(async(e,n)=>{if(e.path===n.path)return;const s=await qw(e.path);s&&Object.assign(t.static.data,s.data)}),cp(()=>{var e;t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await qw(n)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(ip,1e3)})}}),wV=fo(()=>{const t=Ln();cp(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),CV=fo(t=>{let e;async function n(){const s=await ip();e&&clearTimeout(e),e=setTimeout(n,Fw);try{const o=await $fetch(my("builds/latest.json")+`?${Date.now()}`);o.id!==s.id&&t.hooks.callHook("app:manifest:update",o)}catch{}}cp(()=>{e=setTimeout(n,Fw)})});function _V(t={}){const e=t.path||window.location.pathname;let n={};try{n=Yh(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||(n==null?void 0:n.path)!==e||(n==null?void 0:n.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:kt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const SV=fo({name:"nuxt:chunk-reload",setup(t){const e=Ln(),n=xu(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:r})=>{s.add(r)});function o(r){const a="href"in r&&r.href[0]==="#"?n.app.baseURL+r.href:sp(n.app.baseURL,r.fullPath);_V({path:a,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(o)}),e.onError((r,i)=>{s.has(r)&&o(i)})}}),IV=fo({name:"nuxt:global-components"}),Ar={default:()=>wl(()=>import("./BvATbo2Q.js"),[],import.meta.url)},EV=fo({name:"nuxt:prefetch",setup(t){const e=Ln();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{var o;const s=(o=n==null?void 0:n.meta)==null?void 0:o.layout;s&&typeof Ar[s]=="function"&&await Ar[s]()})}),t.hooks.hook("link:prefetch",n=>{if(mr(n))return;const s=e.resolve(n);if(!s)return;const o=s.meta.layout;let r=wy(s.meta.middleware);r=r.filter(i=>typeof i=="string");for(const i of r)typeof Fl[i]=="function"&&Fl[i]();o&&typeof Ar[o]=="function"&&Ar[o]()})}});var ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}function n$(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&n$(n)}),t}class gC{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function s$(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Rr(t,...e){const n=Object.create(null);for(const s in t)n[s]=t[s];return e.forEach(function(s){for(const o in s)n[o]=s[o]}),n}const $V="</span>",vC=t=>!!t.scope,TV=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((s,o)=>`${s}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class NV{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=s$(e)}openNode(e){if(!vC(e))return;const n=TV(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){vC(e)&&(this.buffer+=$V)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const bC=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Cy{constructor(){this.rootNode=bC(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=bC({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(s=>this._walk(e,s)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Cy._collapse(n)}))}}class AV extends Cy{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const s=e.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new NV(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Ql(t){return t?typeof t=="string"?t:t.source:null}function o$(t){return ga("(?=",t,")")}function RV(t){return ga("(?:",t,")*")}function DV(t){return ga("(?:",t,")?")}function ga(...t){return t.map(n=>Ql(n)).join("")}function OV(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function _y(...t){return"("+(OV(t).capture?"":"?:")+t.map(s=>Ql(s)).join("|")+")"}function r$(t){return new RegExp(t.toString()+"|").exec("").length-1}function LV(t,e){const n=t&&t.exec(e);return n&&n.index===0}const FV=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Sy(t,{joinWith:e}){let n=0;return t.map(s=>{n+=1;const o=n;let r=Ql(s),i="";for(;r.length>0;){const a=FV.exec(r);if(!a){i+=r;break}i+=r.substring(0,a.index),r=r.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?i+="\\"+String(Number(a[1])+o):(i+=a[0],a[0]==="("&&n++)}return i}).map(s=>`(${s})`).join(e)}const PV=/\b\B/,i$="[a-zA-Z]\\w*",Iy="[a-zA-Z_]\\w*",a$="\\b\\d+(\\.\\d+)?",c$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",l$="\\b(0b[01]+)",MV="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",BV=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=ga(e,/.*\b/,t.binary,/\b.*/)),Rr({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},t)},Yl={begin:"\\\\[\\s\\S]",relevance:0},VV={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Yl]},UV={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Yl]},jV={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},lp=function(t,e,n={}){const s=Rr({scope:"comment",begin:t,end:e,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=_y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:ga(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},zV=lp("//","$"),WV=lp("/\\*","\\*/"),GV=lp("#","$"),HV={scope:"number",begin:a$,relevance:0},KV={scope:"number",begin:c$,relevance:0},qV={scope:"number",begin:l$,relevance:0},XV={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Yl,{begin:/\[/,end:/\]/,relevance:0,contains:[Yl]}]},QV={scope:"title",begin:i$,relevance:0},YV={scope:"title",begin:Iy,relevance:0},JV={begin:"\\.\\s*"+Iy,relevance:0},ZV=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var oh=Object.freeze({__proto__:null,APOS_STRING_MODE:VV,BACKSLASH_ESCAPE:Yl,BINARY_NUMBER_MODE:qV,BINARY_NUMBER_RE:l$,COMMENT:lp,C_BLOCK_COMMENT_MODE:WV,C_LINE_COMMENT_MODE:zV,C_NUMBER_MODE:KV,C_NUMBER_RE:c$,END_SAME_AS_BEGIN:ZV,HASH_COMMENT_MODE:GV,IDENT_RE:i$,MATCH_NOTHING_RE:PV,METHOD_GUARD:JV,NUMBER_MODE:HV,NUMBER_RE:a$,PHRASAL_WORDS_MODE:jV,QUOTE_STRING_MODE:UV,REGEXP_MODE:XV,RE_STARTERS_RE:MV,SHEBANG:BV,TITLE_MODE:QV,UNDERSCORE_IDENT_RE:Iy,UNDERSCORE_TITLE_MODE:YV});function eU(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function tU(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function nU(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=eU,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function sU(t,e){Array.isArray(t.illegal)&&(t.illegal=_y(...t.illegal))}function oU(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function rU(t,e){t.relevance===void 0&&(t.relevance=1)}const iU=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(s=>{delete t[s]}),t.keywords=n.keywords,t.begin=ga(n.beforeMatch,o$(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},aU=["of","and","for","in","not","or","if","then","parent","list","value"],cU="keyword";function u$(t,e,n=cU){const s=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(s,u$(t[r],e,r))}),s;function o(r,i){e&&(i=i.map(a=>a.toLowerCase())),i.forEach(function(a){const c=a.split("|");s[c[0]]=[r,lU(c[0],c[1])]})}}function lU(t,e){return e?Number(e):uU(t)?0:1}function uU(t){return aU.includes(t.toLowerCase())}const yC={},zi=t=>{console.error(t)},xC=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Da=(t,e)=>{yC[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),yC[`${t}/${e}`]=!0)},rf=new Error;function d$(t,e,{key:n}){let s=0;const o=t[n],r={},i={};for(let a=1;a<=e.length;a++)i[a+s]=o[a],r[a+s]=!0,s+=r$(e[a-1]);t[n]=i,t[n]._emit=r,t[n]._multi=!0}function dU(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw zi("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),rf;if(typeof t.beginScope!="object"||t.beginScope===null)throw zi("beginScope must be object"),rf;d$(t,t.begin,{key:"beginScope"}),t.begin=Sy(t.begin,{joinWith:""})}}function hU(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw zi("skip, excludeEnd, returnEnd not compatible with endScope: {}"),rf;if(typeof t.endScope!="object"||t.endScope===null)throw zi("endScope must be object"),rf;d$(t,t.end,{key:"endScope"}),t.end=Sy(t.end,{joinWith:""})}}function fU(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function pU(t){fU(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),dU(t),hU(t)}function mU(t){function e(i,a){return new RegExp(Ql(i),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,c){c.position=this.position++,this.matchIndexes[this.matchAt]=c,this.regexes.push([c,a]),this.matchAt+=r$(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(c=>c[1]);this.matcherRe=e(Sy(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const c=this.matcherRe.exec(a);if(!c)return null;const l=c.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[l];return c.splice(0,l),Object.assign(c,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const c=new n;return this.rules.slice(a).forEach(([l,u])=>c.addRule(l,u)),c.compile(),this.multiRegexes[a]=c,c}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,c){this.rules.push([a,c]),c.type==="begin"&&this.count++}exec(a){const c=this.getMatcher(this.regexIndex);c.lastIndex=this.lastIndex;let l=c.exec(a);if(this.resumingScanAtSamePosition()&&!(l&&l.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,l=u.exec(a)}return l&&(this.regexIndex+=l.position+1,this.regexIndex===this.count&&this.considerAll()),l}}function o(i){const a=new s;return i.contains.forEach(c=>a.addRule(c.begin,{rule:c,type:"begin"})),i.terminatorEnd&&a.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&a.addRule(i.illegal,{type:"illegal"}),a}function r(i,a){const c=i;if(i.isCompiled)return c;[tU,oU,pU,iU].forEach(u=>u(i,a)),t.compilerExtensions.forEach(u=>u(i,a)),i.__beforeBegin=null,[nU,sU,rU].forEach(u=>u(i,a)),i.isCompiled=!0;let l=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),l=i.keywords.$pattern,delete i.keywords.$pattern),l=l||/\w+/,i.keywords&&(i.keywords=u$(i.keywords,t.case_insensitive)),c.keywordPatternRe=e(l,!0),a&&(i.begin||(i.begin=/\B|\b/),c.beginRe=e(c.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(c.endRe=e(c.end)),c.terminatorEnd=Ql(c.end)||"",i.endsWithParent&&a.terminatorEnd&&(c.terminatorEnd+=(i.end?"|":"")+a.terminatorEnd)),i.illegal&&(c.illegalRe=e(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return gU(u==="self"?i:u)})),i.contains.forEach(function(u){r(u,c)}),i.starts&&r(i.starts,a),c.matcher=o(c),c}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Rr(t.classNameAliases||{}),r(t)}function h$(t){return t?t.endsWithParent||h$(t.starts):!1}function gU(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Rr(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:h$(t)?Rr(t,{starts:t.starts?Rr(t.starts):null}):Object.isFrozen(t)?Rr(t):t}var vU="11.10.0";class bU extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const wg=s$,wC=Rr,CC=Symbol("nomatch"),yU=7,f$=function(t){const e=Object.create(null),n=Object.create(null),s=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:AV};function c(R){return a.noHighlightRe.test(R)}function l(R){let D=R.className+" ";D+=R.parentNode?R.parentNode.className:"";const j=a.languageDetectRe.exec(D);if(j){const ne=I(j[1]);return ne||(xC(r.replace("{}",j[1])),xC("Falling back to no-highlight mode for this block.",R)),ne?j[1]:"no-highlight"}return D.split(/\s+/).find(ne=>c(ne)||I(ne))}function u(R,D,j){let ne="",re="";typeof D=="object"?(ne=R,j=D.ignoreIllegals,re=D.language):(Da("10.7.0","highlight(lang, code, ...args) has been deprecated."),Da("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),re=R,ne=D),j===void 0&&(j=!0);const de={code:ne,language:re};G("before:highlight",de);const he=de.result?de.result:d(de.language,de.code,j);return he.code=de.code,G("after:highlight",he),he}function d(R,D,j,ne){const re=Object.create(null);function de(ie,be){return ie.keywords[be]}function he(){if(!T.keywords){Y.addText(ee);return}let ie=0;T.keywordPatternRe.lastIndex=0;let be=T.keywordPatternRe.exec(ee),Ie="";for(;be;){Ie+=ee.substring(ie,be.index);const Pe=oe.case_insensitive?be[0].toLowerCase():be[0],Qe=de(T,Pe);if(Qe){const[At,Gt]=Qe;if(Y.addText(Ie),Ie="",re[Pe]=(re[Pe]||0)+1,re[Pe]<=yU&&(ve+=Gt),At.startsWith("_"))Ie+=be[0];else{const Ho=oe.classNameAliases[At]||At;ge(be[0],Ho)}}else Ie+=be[0];ie=T.keywordPatternRe.lastIndex,be=T.keywordPatternRe.exec(ee)}Ie+=ee.substring(ie),Y.addText(Ie)}function ye(){if(ee==="")return;let ie=null;if(typeof T.subLanguage=="string"){if(!e[T.subLanguage]){Y.addText(ee);return}ie=d(T.subLanguage,ee,!0,U[T.subLanguage]),U[T.subLanguage]=ie._top}else ie=f(ee,T.subLanguage.length?T.subLanguage:null);T.relevance>0&&(ve+=ie.relevance),Y.__addSublanguage(ie._emitter,ie.language)}function fe(){T.subLanguage!=null?ye():he(),ee=""}function ge(ie,be){ie!==""&&(Y.startScope(be),Y.addText(ie),Y.endScope())}function q(ie,be){let Ie=1;const Pe=be.length-1;for(;Ie<=Pe;){if(!ie._emit[Ie]){Ie++;continue}const Qe=oe.classNameAliases[ie[Ie]]||ie[Ie],At=be[Ie];Qe?ge(At,Qe):(ee=At,he(),ee=""),Ie++}}function ue(ie,be){return ie.scope&&typeof ie.scope=="string"&&Y.openNode(oe.classNameAliases[ie.scope]||ie.scope),ie.beginScope&&(ie.beginScope._wrap?(ge(ee,oe.classNameAliases[ie.beginScope._wrap]||ie.beginScope._wrap),ee=""):ie.beginScope._multi&&(q(ie.beginScope,be),ee="")),T=Object.create(ie,{parent:{value:T}}),T}function le(ie,be,Ie){let Pe=LV(ie.endRe,Ie);if(Pe){if(ie["on:end"]){const Qe=new gC(ie);ie["on:end"](be,Qe),Qe.isMatchIgnored&&(Pe=!1)}if(Pe){for(;ie.endsParent&&ie.parent;)ie=ie.parent;return ie}}if(ie.endsWithParent)return le(ie.parent,be,Ie)}function pe(ie){return T.matcher.regexIndex===0?(ee+=ie[0],1):(Ce=!0,0)}function _e(ie){const be=ie[0],Ie=ie.rule,Pe=new gC(Ie),Qe=[Ie.__beforeBegin,Ie["on:begin"]];for(const At of Qe)if(At&&(At(ie,Pe),Pe.isMatchIgnored))return pe(be);return Ie.skip?ee+=be:(Ie.excludeBegin&&(ee+=be),fe(),!Ie.returnBegin&&!Ie.excludeBegin&&(ee=be)),ue(Ie,ie),Ie.returnBegin?0:be.length}function Re(ie){const be=ie[0],Ie=D.substring(ie.index),Pe=le(T,ie,Ie);if(!Pe)return CC;const Qe=T;T.endScope&&T.endScope._wrap?(fe(),ge(be,T.endScope._wrap)):T.endScope&&T.endScope._multi?(fe(),q(T.endScope,ie)):Qe.skip?ee+=be:(Qe.returnEnd||Qe.excludeEnd||(ee+=be),fe(),Qe.excludeEnd&&(ee=be));do T.scope&&Y.closeNode(),!T.skip&&!T.subLanguage&&(ve+=T.relevance),T=T.parent;while(T!==Pe.parent);return Pe.starts&&ue(Pe.starts,ie),Qe.returnEnd?0:be.length}function N(){const ie=[];for(let be=T;be!==oe;be=be.parent)be.scope&&ie.unshift(be.scope);ie.forEach(be=>Y.openNode(be))}let L={};function K(ie,be){const Ie=be&&be[0];if(ee+=ie,Ie==null)return fe(),0;if(L.type==="begin"&&be.type==="end"&&L.index===be.index&&Ie===""){if(ee+=D.slice(be.index,be.index+1),!o){const Pe=new Error(`0 width match regex (${R})`);throw Pe.languageName=R,Pe.badRule=L.rule,Pe}return 1}if(L=be,be.type==="begin")return _e(be);if(be.type==="illegal"&&!j){const Pe=new Error('Illegal lexeme "'+Ie+'" for mode "'+(T.scope||"<unnamed>")+'"');throw Pe.mode=T,Pe}else if(be.type==="end"){const Pe=Re(be);if(Pe!==CC)return Pe}if(be.type==="illegal"&&Ie==="")return 1;if(Z>1e5&&Z>be.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ee+=Ie,Ie.length}const oe=I(R);if(!oe)throw zi(r.replace("{}",R)),new Error('Unknown language: "'+R+'"');const se=mU(oe);let k="",T=ne||se;const U={},Y=new a.__emitter(a);N();let ee="",ve=0,B=0,Z=0,Ce=!1;try{if(oe.__emitTokens)oe.__emitTokens(D,Y);else{for(T.matcher.considerAll();;){Z++,Ce?Ce=!1:T.matcher.considerAll(),T.matcher.lastIndex=B;const ie=T.matcher.exec(D);if(!ie)break;const be=D.substring(B,ie.index),Ie=K(be,ie);B=ie.index+Ie}K(D.substring(B))}return Y.finalize(),k=Y.toHTML(),{language:R,value:k,relevance:ve,illegal:!1,_emitter:Y,_top:T}}catch(ie){if(ie.message&&ie.message.includes("Illegal"))return{language:R,value:wg(D),illegal:!0,relevance:0,_illegalBy:{message:ie.message,index:B,context:D.slice(B-100,B+100),mode:ie.mode,resultSoFar:k},_emitter:Y};if(o)return{language:R,value:wg(D),illegal:!1,relevance:0,errorRaised:ie,_emitter:Y,_top:T};throw ie}}function h(R){const D={value:wg(R),illegal:!1,relevance:0,_top:i,_emitter:new a.__emitter(a)};return D._emitter.addText(R),D}function f(R,D){D=D||a.languages||Object.keys(e);const j=h(R),ne=D.filter(I).filter(O).map(fe=>d(fe,R,!1));ne.unshift(j);const re=ne.sort((fe,ge)=>{if(fe.relevance!==ge.relevance)return ge.relevance-fe.relevance;if(fe.language&&ge.language){if(I(fe.language).supersetOf===ge.language)return 1;if(I(ge.language).supersetOf===fe.language)return-1}return 0}),[de,he]=re,ye=de;return ye.secondBest=he,ye}function p(R,D,j){const ne=D&&n[D]||j;R.classList.add("hljs"),R.classList.add(`language-${ne}`)}function m(R){let D=null;const j=l(R);if(c(j))return;if(G("before:highlightElement",{el:R,language:j}),R.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",R);return}if(R.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(R)),a.throwUnescapedHTML))throw new bU("One of your code blocks includes unescaped HTML.",R.innerHTML);D=R;const ne=D.textContent,re=j?u(ne,{language:j,ignoreIllegals:!0}):f(ne);R.innerHTML=re.value,R.dataset.highlighted="yes",p(R,j,re.language),R.result={language:re.language,re:re.relevance,relevance:re.relevance},re.secondBest&&(R.secondBest={language:re.secondBest.language,relevance:re.secondBest.relevance}),G("after:highlightElement",{el:R,result:re,text:ne})}function v(R){a=wC(a,R)}const g=()=>{y(),Da("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function b(){y(),Da("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let x=!1;function y(){if(document.readyState==="loading"){x=!0;return}document.querySelectorAll(a.cssSelector).forEach(m)}function w(){x&&y()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",w,!1);function C(R,D){let j=null;try{j=D(t)}catch(ne){if(zi("Language definition for '{}' could not be registered.".replace("{}",R)),o)zi(ne);else throw ne;j=i}j.name||(j.name=R),e[R]=j,j.rawDefinition=D.bind(null,t),j.aliases&&E(j.aliases,{languageName:R})}function _(R){delete e[R];for(const D of Object.keys(n))n[D]===R&&delete n[D]}function S(){return Object.keys(e)}function I(R){return R=(R||"").toLowerCase(),e[R]||e[n[R]]}function E(R,{languageName:D}){typeof R=="string"&&(R=[R]),R.forEach(j=>{n[j.toLowerCase()]=D})}function O(R){const D=I(R);return D&&!D.disableAutodetect}function A(R){R["before:highlightBlock"]&&!R["before:highlightElement"]&&(R["before:highlightElement"]=D=>{R["before:highlightBlock"](Object.assign({block:D.el},D))}),R["after:highlightBlock"]&&!R["after:highlightElement"]&&(R["after:highlightElement"]=D=>{R["after:highlightBlock"](Object.assign({block:D.el},D))})}function P(R){A(R),s.push(R)}function z(R){const D=s.indexOf(R);D!==-1&&s.splice(D,1)}function G(R,D){const j=R;s.forEach(function(ne){ne[j]&&ne[j](D)})}function M(R){return Da("10.7.0","highlightBlock will be removed entirely in v12.0"),Da("10.7.0","Please use highlightElement now."),m(R)}Object.assign(t,{highlight:u,highlightAuto:f,highlightAll:y,highlightElement:m,highlightBlock:M,configure:v,initHighlighting:g,initHighlightingOnLoad:b,registerLanguage:C,unregisterLanguage:_,listLanguages:S,getLanguage:I,registerAliases:E,autoDetection:O,inherit:wC,addPlugin:P,removePlugin:z}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=vU,t.regex={concat:ga,lookahead:o$,either:_y,optional:DV,anyNumberOfTimes:RV};for(const R in oh)typeof oh[R]=="object"&&n$(oh[R]);return Object.assign(t,oh),t},vc=f$({});vc.newInstance=()=>f$({});var xU=vc;vc.HighlightJS=vc;vc.default=vc;const Vv=t$(xU),_C="[A-Za-z$_][0-9A-Za-z$_]*",wU=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],CU=["true","false","null","undefined","NaN","Infinity"],p$=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],m$=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],g$=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],_U=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],SU=[].concat(g$,p$,m$);function IU(t){const e=t.regex,n=(D,{after:j})=>{const ne="</"+D[0].slice(1);return D.input.indexOf(ne,j)!==-1},s=_C,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(D,j)=>{const ne=D[0].length+D.index,re=D.input[ne];if(re==="<"||re===","){j.ignoreMatch();return}re===">"&&(n(D,{after:ne})||j.ignoreMatch());let de;const he=D.input.substring(ne);if(de=he.match(/^\s*=/)){j.ignoreMatch();return}if((de=he.match(/^\s+extends\s+/))&&de.index===0){j.ignoreMatch();return}}},a={$pattern:_C,keyword:wU,literal:CU,built_in:SU,"variable.language":_U},c="[0-9](_?[0-9])*",l=`\\.(${c})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${l})|\\.)?|(${l}))[eE][+-]?(${c})\\b`},{begin:`\\b(${u})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},x=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,m,v,{match:/\$\d+/},d];h.contains=x.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(x)});const y=[].concat(b,h.contains),w=y.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(y)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w},_={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},S={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...p$,...m$]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},E={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},O={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function A(D){return e.concat("(?!",D.join("|"),")")}const P={match:e.concat(/\b/,A([...g$,"super","import"].map(D=>`${D}\\s*\\(`)),s,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},G={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},M="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(M)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:w,CLASS_REFERENCE:S},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,m,v,b,{match:/\$\d+/},d,S,{className:"attr",begin:s+e.lookahead(":"),relevance:0},R,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:M,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},E,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},P,O,_,G,{match:/\$[(.]/}]}}Vv.registerLanguage("javascript",IU);const EU=fo(({vueApp:t})=>{t.directive("source-code",{deep:!0,beforeMount(e,n){e.querySelectorAll("code").forEach(o=>{n.value&&(o.textContent=n.value),Vv.highlightElement(o)})},updated(e,n){e.querySelectorAll("code").forEach(o=>{n.value&&(o.textContent=n.value,Vv.highlightElement(o))})}})});/*!
  * shared v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const af=typeof window<"u",ni=(t,e=!1)=>e?Symbol.for(t):Symbol(t),kU=(t,e,n)=>$U({l:t,k:e,s:n}),$U=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),on=t=>typeof t=="number"&&isFinite(t),TU=t=>Ey(t)==="[object Date]",bc=t=>Ey(t)==="[object RegExp]",up=t=>Ye(t)&&Object.keys(t).length===0,un=Object.assign;let SC;const Di=()=>SC||(SC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function IC(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const NU=Object.prototype.hasOwnProperty;function cf(t,e){return NU.call(t,e)}const Lt=Array.isArray,$t=t=>typeof t=="function",Te=t=>typeof t=="string",rt=t=>typeof t=="boolean",ct=t=>t!==null&&typeof t=="object",AU=t=>ct(t)&&$t(t.then)&&$t(t.catch),v$=Object.prototype.toString,Ey=t=>v$.call(t),Ye=t=>Ey(t)==="[object Object]",RU=t=>t==null?"":Lt(t)||Ye(t)&&t.toString===v$?JSON.stringify(t,null,2):String(t);function ky(t,e=""){return t.reduce((n,s,o)=>o===0?n+s:n+e+s,"")}function DU(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const rh=t=>!ct(t)||Lt(t);function Rh(t,e){if(rh(t)||rh(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:s,des:o}=n.pop();Object.keys(s).forEach(r=>{ct(s[r])&&!ct(o[r])&&(o[r]=Array.isArray(s[r])?[]:{}),rh(o[r])||rh(s[r])?o[r]=s[r]:n.push({src:s[r],des:o[r]})})}}/*!
  * message-compiler v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function OU(t,e,n){return{line:t,column:e,offset:n}}function Uv(t,e,n){return{start:t,end:e}}const ft={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},LU=17;function dp(t,e,n={}){const{domain:s,messages:o,args:r}=n,i=t,a=new SyntaxError(String(i));return a.code=t,e&&(a.location=e),a.domain=s,a}function FU(t){throw t}const Xo=" ",PU="\r",Vn=`
`,MU="\u2028",BU="\u2029";function VU(t){const e=t;let n=0,s=1,o=1,r=0;const i=_=>e[_]===PU&&e[_+1]===Vn,a=_=>e[_]===Vn,c=_=>e[_]===BU,l=_=>e[_]===MU,u=_=>i(_)||a(_)||c(_)||l(_),d=()=>n,h=()=>s,f=()=>o,p=()=>r,m=_=>i(_)||c(_)||l(_)?Vn:e[_],v=()=>m(n),g=()=>m(n+r);function b(){return r=0,u(n)&&(s++,o=0),i(n)&&n++,n++,o++,e[n]}function x(){return i(n+r)&&r++,r++,e[n+r]}function y(){n=0,s=1,o=1,r=0}function w(_=0){r=_}function C(){const _=n+r;for(;_!==n;)b();r=0}return{index:d,line:h,column:f,peekOffset:p,charAt:m,currentChar:v,currentPeek:g,next:b,peek:x,reset:y,resetPeek:w,skipToPeek:C}}const _r=void 0,UU=".",EC="'",jU="tokenizer";function zU(t,e={}){const n=e.location!==!1,s=VU(t),o=()=>s.index(),r=()=>OU(s.line(),s.column(),s.index()),i=r(),a=o(),c={currentType:13,offset:a,startLoc:i,endLoc:i,lastType:13,lastOffset:a,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:u}=e;function d(k,T,U,...Y){const ee=l();if(T.column+=U,T.offset+=U,u){const ve=n?Uv(ee.startLoc,T):null,B=dp(k,ve,{domain:jU,args:Y});u(B)}}function h(k,T,U){k.endLoc=r(),k.currentType=T;const Y={type:T};return n&&(Y.loc=Uv(k.startLoc,k.endLoc)),U!=null&&(Y.value=U),Y}const f=k=>h(k,13);function p(k,T){return k.currentChar()===T?(k.next(),T):(d(ft.EXPECTED_TOKEN,r(),0,T),"")}function m(k){let T="";for(;k.currentPeek()===Xo||k.currentPeek()===Vn;)T+=k.currentPeek(),k.peek();return T}function v(k){const T=m(k);return k.skipToPeek(),T}function g(k){if(k===_r)return!1;const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T===95}function b(k){if(k===_r)return!1;const T=k.charCodeAt(0);return T>=48&&T<=57}function x(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=g(k.currentPeek());return k.resetPeek(),Y}function y(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=k.currentPeek()==="-"?k.peek():k.currentPeek(),ee=b(Y);return k.resetPeek(),ee}function w(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=k.currentPeek()===EC;return k.resetPeek(),Y}function C(k,T){const{currentType:U}=T;if(U!==7)return!1;m(k);const Y=k.currentPeek()===".";return k.resetPeek(),Y}function _(k,T){const{currentType:U}=T;if(U!==8)return!1;m(k);const Y=g(k.currentPeek());return k.resetPeek(),Y}function S(k,T){const{currentType:U}=T;if(!(U===7||U===11))return!1;m(k);const Y=k.currentPeek()===":";return k.resetPeek(),Y}function I(k,T){const{currentType:U}=T;if(U!==9)return!1;const Y=()=>{const ve=k.currentPeek();return ve==="{"?g(k.peek()):ve==="@"||ve==="|"||ve===":"||ve==="."||ve===Xo||!ve?!1:ve===Vn?(k.peek(),Y()):O(k,!1)},ee=Y();return k.resetPeek(),ee}function E(k){m(k);const T=k.currentPeek()==="|";return k.resetPeek(),T}function O(k,T=!0){const U=(ee=!1,ve="")=>{const B=k.currentPeek();return B==="{"||B==="@"||!B?ee:B==="|"?!(ve===Xo||ve===Vn):B===Xo?(k.peek(),U(!0,Xo)):B===Vn?(k.peek(),U(!0,Vn)):!0},Y=U();return T&&k.resetPeek(),Y}function A(k,T){const U=k.currentChar();return U===_r?_r:T(U)?(k.next(),U):null}function P(k){const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36}function z(k){return A(k,P)}function G(k){const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36||T===45}function M(k){return A(k,G)}function R(k){const T=k.charCodeAt(0);return T>=48&&T<=57}function D(k){return A(k,R)}function j(k){const T=k.charCodeAt(0);return T>=48&&T<=57||T>=65&&T<=70||T>=97&&T<=102}function ne(k){return A(k,j)}function re(k){let T="",U="";for(;T=D(k);)U+=T;return U}function de(k){let T="";for(;;){const U=k.currentChar();if(U==="{"||U==="}"||U==="@"||U==="|"||!U)break;if(U===Xo||U===Vn)if(O(k))T+=U,k.next();else{if(E(k))break;T+=U,k.next()}else T+=U,k.next()}return T}function he(k){v(k);let T="",U="";for(;T=M(k);)U+=T;return k.currentChar()===_r&&d(ft.UNTERMINATED_CLOSING_BRACE,r(),0),U}function ye(k){v(k);let T="";return k.currentChar()==="-"?(k.next(),T+=`-${re(k)}`):T+=re(k),k.currentChar()===_r&&d(ft.UNTERMINATED_CLOSING_BRACE,r(),0),T}function fe(k){return k!==EC&&k!==Vn}function ge(k){v(k),p(k,"'");let T="",U="";for(;T=A(k,fe);)T==="\\"?U+=q(k):U+=T;const Y=k.currentChar();return Y===Vn||Y===_r?(d(ft.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),Y===Vn&&(k.next(),p(k,"'")),U):(p(k,"'"),U)}function q(k){const T=k.currentChar();switch(T){case"\\":case"'":return k.next(),`\\${T}`;case"u":return ue(k,T,4);case"U":return ue(k,T,6);default:return d(ft.UNKNOWN_ESCAPE_SEQUENCE,r(),0,T),""}}function ue(k,T,U){p(k,T);let Y="";for(let ee=0;ee<U;ee++){const ve=ne(k);if(!ve){d(ft.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${T}${Y}${k.currentChar()}`);break}Y+=ve}return`\\${T}${Y}`}function le(k){return k!=="{"&&k!=="}"&&k!==Xo&&k!==Vn}function pe(k){v(k);let T="",U="";for(;T=A(k,le);)U+=T;return U}function _e(k){let T="",U="";for(;T=z(k);)U+=T;return U}function Re(k){const T=U=>{const Y=k.currentChar();return Y==="{"||Y==="@"||Y==="|"||Y==="("||Y===")"||!Y||Y===Xo?U:(U+=Y,k.next(),T(U))};return T("")}function N(k){v(k);const T=p(k,"|");return v(k),T}function L(k,T){let U=null;switch(k.currentChar()){case"{":return T.braceNest>=1&&d(ft.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),k.next(),U=h(T,2,"{"),v(k),T.braceNest++,U;case"}":return T.braceNest>0&&T.currentType===2&&d(ft.EMPTY_PLACEHOLDER,r(),0),k.next(),U=h(T,3,"}"),T.braceNest--,T.braceNest>0&&v(k),T.inLinked&&T.braceNest===0&&(T.inLinked=!1),U;case"@":return T.braceNest>0&&d(ft.UNTERMINATED_CLOSING_BRACE,r(),0),U=K(k,T)||f(T),T.braceNest=0,U;default:{let ee=!0,ve=!0,B=!0;if(E(k))return T.braceNest>0&&d(ft.UNTERMINATED_CLOSING_BRACE,r(),0),U=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,U;if(T.braceNest>0&&(T.currentType===4||T.currentType===5||T.currentType===6))return d(ft.UNTERMINATED_CLOSING_BRACE,r(),0),T.braceNest=0,oe(k,T);if(ee=x(k,T))return U=h(T,4,he(k)),v(k),U;if(ve=y(k,T))return U=h(T,5,ye(k)),v(k),U;if(B=w(k,T))return U=h(T,6,ge(k)),v(k),U;if(!ee&&!ve&&!B)return U=h(T,12,pe(k)),d(ft.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,U.value),v(k),U;break}}return U}function K(k,T){const{currentType:U}=T;let Y=null;const ee=k.currentChar();switch((U===7||U===8||U===11||U===9)&&(ee===Vn||ee===Xo)&&d(ft.INVALID_LINKED_FORMAT,r(),0),ee){case"@":return k.next(),Y=h(T,7,"@"),T.inLinked=!0,Y;case".":return v(k),k.next(),h(T,8,".");case":":return v(k),k.next(),h(T,9,":");default:return E(k)?(Y=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,Y):C(k,T)||S(k,T)?(v(k),K(k,T)):_(k,T)?(v(k),h(T,11,_e(k))):I(k,T)?(v(k),ee==="{"?L(k,T)||Y:h(T,10,Re(k))):(U===7&&d(ft.INVALID_LINKED_FORMAT,r(),0),T.braceNest=0,T.inLinked=!1,oe(k,T))}}function oe(k,T){let U={type:13};if(T.braceNest>0)return L(k,T)||f(T);if(T.inLinked)return K(k,T)||f(T);switch(k.currentChar()){case"{":return L(k,T)||f(T);case"}":return d(ft.UNBALANCED_CLOSING_BRACE,r(),0),k.next(),h(T,3,"}");case"@":return K(k,T)||f(T);default:{if(E(k))return U=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,U;if(O(k))return h(T,0,de(k));break}}return U}function se(){const{currentType:k,offset:T,startLoc:U,endLoc:Y}=c;return c.lastType=k,c.lastOffset=T,c.lastStartLoc=U,c.lastEndLoc=Y,c.offset=o(),c.startLoc=r(),s.currentChar()===_r?h(c,13):oe(s,c)}return{nextToken:se,currentOffset:o,currentPosition:r,context:l}}const WU="parser",GU=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function HU(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const s=parseInt(e||n,16);return s<=55295||s>=57344?String.fromCodePoint(s):"�"}}}function KU(t={}){const e=t.location!==!1,{onError:n}=t;function s(g,b,x,y,...w){const C=g.currentPosition();if(C.offset+=y,C.column+=y,n){const _=e?Uv(x,C):null,S=dp(b,_,{domain:WU,args:w});n(S)}}function o(g,b,x){const y={type:g};return e&&(y.start=b,y.end=b,y.loc={start:x,end:x}),y}function r(g,b,x,y){e&&(g.end=b,g.loc&&(g.loc.end=x))}function i(g,b){const x=g.context(),y=o(3,x.offset,x.startLoc);return y.value=b,r(y,g.currentOffset(),g.currentPosition()),y}function a(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(5,y,w);return C.index=parseInt(b,10),g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function c(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(4,y,w);return C.key=b,g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function l(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(9,y,w);return C.value=b.replace(GU,HU),g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function u(g){const b=g.nextToken(),x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(8,y,w);return b.type!==11?(s(g,ft.UNEXPECTED_EMPTY_LINKED_MODIFIER,x.lastStartLoc,0),C.value="",r(C,y,w),{nextConsumeToken:b,node:C}):(b.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,bo(b)),C.value=b.value||"",r(C,g.currentOffset(),g.currentPosition()),{node:C})}function d(g,b){const x=g.context(),y=o(7,x.offset,x.startLoc);return y.value=b,r(y,g.currentOffset(),g.currentPosition()),y}function h(g){const b=g.context(),x=o(6,b.offset,b.startLoc);let y=g.nextToken();if(y.type===8){const w=u(g);x.modifier=w.node,y=w.nextConsumeToken||g.nextToken()}switch(y.type!==9&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(y)),y=g.nextToken(),y.type===2&&(y=g.nextToken()),y.type){case 10:y.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(y)),x.key=d(g,y.value||"");break;case 4:y.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(y)),x.key=c(g,y.value||"");break;case 5:y.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(y)),x.key=a(g,y.value||"");break;case 6:y.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(y)),x.key=l(g,y.value||"");break;default:{s(g,ft.UNEXPECTED_EMPTY_LINKED_KEY,b.lastStartLoc,0);const w=g.context(),C=o(7,w.offset,w.startLoc);return C.value="",r(C,w.offset,w.startLoc),x.key=C,r(x,w.offset,w.startLoc),{nextConsumeToken:y,node:x}}}return r(x,g.currentOffset(),g.currentPosition()),{node:x}}function f(g){const b=g.context(),x=b.currentType===1?g.currentOffset():b.offset,y=b.currentType===1?b.endLoc:b.startLoc,w=o(2,x,y);w.items=[];let C=null;do{const I=C||g.nextToken();switch(C=null,I.type){case 0:I.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(I)),w.items.push(i(g,I.value||""));break;case 5:I.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(I)),w.items.push(a(g,I.value||""));break;case 4:I.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(I)),w.items.push(c(g,I.value||""));break;case 6:I.value==null&&s(g,ft.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,bo(I)),w.items.push(l(g,I.value||""));break;case 7:{const E=h(g);w.items.push(E.node),C=E.nextConsumeToken||null;break}}}while(b.currentType!==13&&b.currentType!==1);const _=b.currentType===1?b.lastOffset:g.currentOffset(),S=b.currentType===1?b.lastEndLoc:g.currentPosition();return r(w,_,S),w}function p(g,b,x,y){const w=g.context();let C=y.items.length===0;const _=o(1,b,x);_.cases=[],_.cases.push(y);do{const S=f(g);C||(C=S.items.length===0),_.cases.push(S)}while(w.currentType!==13);return C&&s(g,ft.MUST_HAVE_MESSAGES_IN_PLURAL,x,0),r(_,g.currentOffset(),g.currentPosition()),_}function m(g){const b=g.context(),{offset:x,startLoc:y}=b,w=f(g);return b.currentType===13?w:p(g,x,y,w)}function v(g){const b=zU(g,un({},t)),x=b.context(),y=o(0,x.offset,x.startLoc);return e&&y.loc&&(y.loc.source=g),y.body=m(b),t.onCacheKey&&(y.cacheKey=t.onCacheKey(g)),x.currentType!==13&&s(b,ft.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,g[x.offset]||""),r(y,b.currentOffset(),b.currentPosition()),y}return{parse:v}}function bo(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function qU(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function kC(t,e){for(let n=0;n<t.length;n++)$y(t[n],e)}function $y(t,e){switch(t.type){case 1:kC(t.cases,e),e.helper("plural");break;case 2:kC(t.items,e);break;case 6:{$y(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function XU(t,e={}){const n=qU(t);n.helper("normalize"),t.body&&$y(t.body,n);const s=n.context();t.helpers=Array.from(s.helpers)}function QU(t){const e=t.body;return e.type===2?$C(e):e.cases.forEach(n=>$C(n)),t}function $C(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const s=t.items[n];if(!(s.type===3||s.type===9)||s.value==null)break;e.push(s.value)}if(e.length===t.items.length){t.static=ky(e);for(let n=0;n<t.items.length;n++){const s=t.items[n];(s.type===3||s.type===9)&&delete s.value}}}}function Ua(t){switch(t.t=t.type,t.type){case 0:{const e=t;Ua(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let s=0;s<n.length;s++)Ua(n[s]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let s=0;s<n.length;s++)Ua(n[s]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Ua(e.key),e.k=e.key,delete e.key,e.modifier&&(Ua(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function YU(t,e){const{sourceMap:n,filename:s,breakLineCode:o,needIndent:r}=e,i=e.location!==!1,a={filename:s,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:r,indentLevel:0};i&&t.loc&&(a.source=t.loc.source);const c=()=>a;function l(v,g){a.code+=v}function u(v,g=!0){const b=g?o:"";l(r?b+"  ".repeat(v):b)}function d(v=!0){const g=++a.indentLevel;v&&u(g)}function h(v=!0){const g=--a.indentLevel;v&&u(g)}function f(){u(a.indentLevel)}return{context:c,push:l,indent:d,deindent:h,newline:f,helper:v=>`_${v}`,needIndent:()=>a.needIndent}}function JU(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),yc(t,e.key),e.modifier?(t.push(", "),yc(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function ZU(t,e){const{helper:n,needIndent:s}=t;t.push(`${n("normalize")}([`),t.indent(s());const o=e.items.length;for(let r=0;r<o&&(yc(t,e.items[r]),r!==o-1);r++)t.push(", ");t.deindent(s()),t.push("])")}function ej(t,e){const{helper:n,needIndent:s}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(s());const o=e.cases.length;for(let r=0;r<o&&(yc(t,e.cases[r]),r!==o-1);r++)t.push(", ");t.deindent(s()),t.push("])")}}function tj(t,e){e.body?yc(t,e.body):t.push("null")}function yc(t,e){const{helper:n}=t;switch(e.type){case 0:tj(t,e);break;case 1:ej(t,e);break;case 2:ZU(t,e);break;case 6:JU(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const nj=(t,e={})=>{const n=Te(e.mode)?e.mode:"normal",s=Te(e.filename)?e.filename:"message.intl",o=!!e.sourceMap,r=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],c=YU(t,{mode:n,filename:s,sourceMap:o,breakLineCode:r,needIndent:i});c.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(i),a.length>0&&(c.push(`const { ${ky(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),c.newline()),c.push("return "),yc(c,t),c.deindent(i),c.push("}"),delete t.helpers;const{code:l,map:u}=c.context();return{ast:t,code:l,map:u?u.toJSON():void 0}};function sj(t,e={}){const n=un({},e),s=!!n.jit,o=!!n.minify,r=n.optimize==null?!0:n.optimize,a=KU(n).parse(t);return s?(r&&QU(a),o&&Ua(a),{ast:a,code:""}):(XU(a,n),nj(a,n))}/*!
  * core-base v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function oj(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Di().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Di().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Cg(t){return n=>rj(n,t)}function rj(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const s=n,o=s.c||s.cases;return t.plural(o.reduce((r,i)=>[...r,TC(t,i)],[]))}else return TC(t,n)}function TC(t,e){const n=e.s||e.static;if(n!=null)return t.type==="text"?n:t.normalize([n]);{const s=(e.i||e.items).reduce((o,r)=>[...o,jv(t,r)],[]);return t.normalize(s)}}function jv(t,e){const n=e.t||e.type;switch(n){case 3:{const s=e;return s.v||s.value}case 9:{const s=e;return s.v||s.value}case 4:{const s=e;return t.interpolate(t.named(s.k||s.key))}case 5:{const s=e;return t.interpolate(t.list(s.i!=null?s.i:s.index))}case 6:{const s=e,o=s.m||s.modifier;return t.linked(jv(t,s.k||s.key),o?jv(t,o):void 0,t.type)}case 7:{const s=e;return s.v||s.value}case 8:{const s=e;return s.v||s.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const ij=t=>t;let ih=Object.create(null);const xc=t=>ct(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function aj(t,e={}){let n=!1;const s=e.onError||FU;return e.onError=o=>{n=!0,s(o)},{...sj(t,e),detectError:n}}function cj(t,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Te(t)){rt(e.warnHtmlMessage)&&e.warnHtmlMessage;const s=(e.onCacheKey||ij)(t),o=ih[s];if(o)return o;const{ast:r,detectError:i}=aj(t,{...e,location:!1,jit:!0}),a=Cg(r);return i?a:ih[s]=a}else{const n=t.cacheKey;if(n){const s=ih[n];return s||(ih[n]=Cg(t))}else return Cg(t)}}let Jl=null;function lj(t){Jl=t}function uj(t,e,n){Jl&&Jl.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const dj=hj("function:translate");function hj(t){return e=>Jl&&Jl.emit(t,e)}const sr={INVALID_ARGUMENT:LU,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},fj=24;function or(t){return dp(t,null,void 0)}function Ty(t,e){return e.locale!=null?NC(e.locale):NC(t.locale)}let _g;function NC(t){if(Te(t))return t;if($t(t)){if(t.resolvedOnce&&_g!=null)return _g;if(t.constructor.name==="Function"){const e=t();if(AU(e))throw or(sr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _g=e}else throw or(sr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw or(sr.NOT_SUPPORT_LOCALE_TYPE)}function pj(t,e,n){return[...new Set([n,...Lt(e)?e:ct(e)?Object.keys(e):Te(e)?[e]:[n]])]}function b$(t,e,n){const s=Te(n)?n:Zl,o=t;o.__localeChainCache||(o.__localeChainCache=new Map);let r=o.__localeChainCache.get(s);if(!r){r=[];let i=[n];for(;Lt(i);)i=AC(r,i,e);const a=Lt(e)||!Ye(e)?e:e.default?e.default:null;i=Te(a)?[a]:a,Lt(i)&&AC(r,i,!1),o.__localeChainCache.set(s,r)}return r}function AC(t,e,n){let s=!0;for(let o=0;o<e.length&&rt(s);o++){const r=e[o];Te(r)&&(s=mj(t,e[o],n))}return s}function mj(t,e,n){let s;const o=e.split("-");do{const r=o.join("-");s=gj(t,r,n),o.splice(-1,1)}while(o.length&&s===!0);return s}function gj(t,e,n){let s=!1;if(!t.includes(e)&&(s=!0,e)){s=e[e.length-1]!=="!";const o=e.replace(/!/g,"");t.push(o),(Lt(n)||Ye(n))&&n[o]&&(s=n[o])}return s}const si=[];si[0]={w:[0],i:[3,0],"[":[4],o:[7]};si[1]={w:[1],".":[2],"[":[4],o:[7]};si[2]={w:[2],i:[3,0],0:[3,0]};si[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};si[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};si[5]={"'":[4,0],o:8,l:[5,0]};si[6]={'"':[4,0],o:8,l:[6,0]};const vj=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function bj(t){return vj.test(t)}function yj(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function xj(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function wj(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:bj(e)?yj(e):"*"+e}function Cj(t){const e=[];let n=-1,s=0,o=0,r,i,a,c,l,u,d;const h=[];h[0]=()=>{i===void 0?i=a:i+=a},h[1]=()=>{i!==void 0&&(e.push(i),i=void 0)},h[2]=()=>{h[0](),o++},h[3]=()=>{if(o>0)o--,s=4,h[0]();else{if(o=0,i===void 0||(i=wj(i),i===!1))return!1;h[1]()}};function f(){const p=t[n+1];if(s===5&&p==="'"||s===6&&p==='"')return n++,a="\\"+p,h[0](),!0}for(;s!==null;)if(n++,r=t[n],!(r==="\\"&&f())){if(c=xj(r),d=si[s],l=d[c]||d.l||8,l===8||(s=l[0],l[1]!==void 0&&(u=h[l[1]],u&&(a=r,u()===!1))))return;if(s===7)return e}}const RC=new Map;function _j(t,e){return ct(t)?t[e]:null}function Sj(t,e){if(!ct(t))return null;let n=RC.get(e);if(n||(n=Cj(e),n&&RC.set(e,n)),!n)return null;const s=n.length;let o=t,r=0;for(;r<s;){const i=o[n[r]];if(i===void 0||$t(o))return null;o=i,r++}return o}const Ij="10.0.4",hp=-1,Zl="en-US",DC="",OC=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Ej(){return{upper:(t,e)=>e==="text"&&Te(t)?t.toUpperCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Te(t)?t.toLowerCase():e==="vnode"&&ct(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Te(t)?OC(t):e==="vnode"&&ct(t)&&"__v_isVNode"in t?OC(t.children):t}}let y$;function kj(t){y$=t}let x$;function $j(t){x$=t}let w$;function Tj(t){w$=t}let C$=null;const Nj=t=>{C$=t},Aj=()=>C$;let _$=null;const LC=t=>{_$=t},Rj=()=>_$;let FC=0;function Dj(t={}){const e=$t(t.onWarn)?t.onWarn:DU,n=Te(t.version)?t.version:Ij,s=Te(t.locale)||$t(t.locale)?t.locale:Zl,o=$t(s)?Zl:s,r=Lt(t.fallbackLocale)||Ye(t.fallbackLocale)||Te(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:o,i=Ye(t.messages)?t.messages:{[o]:{}},a=Ye(t.datetimeFormats)?t.datetimeFormats:{[o]:{}},c=Ye(t.numberFormats)?t.numberFormats:{[o]:{}},l=un({},t.modifiers||{},Ej()),u=t.pluralRules||{},d=$t(t.missing)?t.missing:null,h=rt(t.missingWarn)||bc(t.missingWarn)?t.missingWarn:!0,f=rt(t.fallbackWarn)||bc(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,m=!!t.unresolving,v=$t(t.postTranslation)?t.postTranslation:null,g=Ye(t.processor)?t.processor:null,b=rt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,x=!!t.escapeParameter,y=$t(t.messageCompiler)?t.messageCompiler:y$,w=$t(t.messageResolver)?t.messageResolver:x$||_j,C=$t(t.localeFallbacker)?t.localeFallbacker:w$||pj,_=ct(t.fallbackContext)?t.fallbackContext:void 0,S=t,I=ct(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,E=ct(S.__numberFormatters)?S.__numberFormatters:new Map,O=ct(S.__meta)?S.__meta:{};FC++;const A={version:n,cid:FC,locale:s,fallbackLocale:r,messages:i,modifiers:l,pluralRules:u,missing:d,missingWarn:h,fallbackWarn:f,fallbackFormat:p,unresolving:m,postTranslation:v,processor:g,warnHtmlMessage:b,escapeParameter:x,messageCompiler:y,messageResolver:w,localeFallbacker:C,fallbackContext:_,onWarn:e,__meta:O};return A.datetimeFormats=a,A.numberFormats=c,A.__datetimeFormatters=I,A.__numberFormatters=E,__INTLIFY_PROD_DEVTOOLS__&&uj(A,n,O),A}function Ny(t,e,n,s,o){const{missing:r,onWarn:i}=t;if(r!==null){const a=r(t,n,e,o);return Te(a)?a:e}else return e}function dl(t,e,n){const s=t;s.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function Oj(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function Lj(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let s=n+1;s<e.length;s++)if(Oj(t,e[s]))return!0;return!1}function PC(t,...e){const{datetimeFormats:n,unresolving:s,fallbackLocale:o,onWarn:r,localeFallbacker:i}=t,{__datetimeFormatters:a}=t,[c,l,u,d]=zv(...e),h=rt(u.missingWarn)?u.missingWarn:t.missingWarn;rt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,p=Ty(t,u),m=i(t,o,p);if(!Te(c)||c==="")return new Intl.DateTimeFormat(p,d).format(l);let v={},g,b=null;const x="datetime format";for(let C=0;C<m.length&&(g=m[C],v=n[g]||{},b=v[c],!Ye(b));C++)Ny(t,c,g,h,x);if(!Ye(b)||!Te(g))return s?hp:c;let y=`${g}__${c}`;up(d)||(y=`${y}__${JSON.stringify(d)}`);let w=a.get(y);return w||(w=new Intl.DateTimeFormat(g,un({},b,d)),a.set(y,w)),f?w.formatToParts(l):w.format(l)}const S$=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function zv(...t){const[e,n,s,o]=t,r={};let i={},a;if(Te(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw or(sr.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw or(sr.INVALID_ISO_DATE_ARGUMENT)}}else if(TU(e)){if(isNaN(e.getTime()))throw or(sr.INVALID_DATE_ARGUMENT);a=e}else if(on(e))a=e;else throw or(sr.INVALID_ARGUMENT);return Te(n)?r.key=n:Ye(n)&&Object.keys(n).forEach(c=>{S$.includes(c)?i[c]=n[c]:r[c]=n[c]}),Te(s)?r.locale=s:Ye(s)&&(i=s),Ye(o)&&(i=o),[r.key||"",a,r,i]}function MC(t,e,n){const s=t;for(const o in n){const r=`${e}__${o}`;s.__datetimeFormatters.has(r)&&s.__datetimeFormatters.delete(r)}}function BC(t,...e){const{numberFormats:n,unresolving:s,fallbackLocale:o,onWarn:r,localeFallbacker:i}=t,{__numberFormatters:a}=t,[c,l,u,d]=Wv(...e),h=rt(u.missingWarn)?u.missingWarn:t.missingWarn;rt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,p=Ty(t,u),m=i(t,o,p);if(!Te(c)||c==="")return new Intl.NumberFormat(p,d).format(l);let v={},g,b=null;const x="number format";for(let C=0;C<m.length&&(g=m[C],v=n[g]||{},b=v[c],!Ye(b));C++)Ny(t,c,g,h,x);if(!Ye(b)||!Te(g))return s?hp:c;let y=`${g}__${c}`;up(d)||(y=`${y}__${JSON.stringify(d)}`);let w=a.get(y);return w||(w=new Intl.NumberFormat(g,un({},b,d)),a.set(y,w)),f?w.formatToParts(l):w.format(l)}const I$=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Wv(...t){const[e,n,s,o]=t,r={};let i={};if(!on(e))throw or(sr.INVALID_ARGUMENT);const a=e;return Te(n)?r.key=n:Ye(n)&&Object.keys(n).forEach(c=>{I$.includes(c)?i[c]=n[c]:r[c]=n[c]}),Te(s)?r.locale=s:Ye(s)&&(i=s),Ye(o)&&(i=o),[r.key||"",a,r,i]}function VC(t,e,n){const s=t;for(const o in n){const r=`${e}__${o}`;s.__numberFormatters.has(r)&&s.__numberFormatters.delete(r)}}const Fj=t=>t,Pj=t=>"",Mj="text",Bj=t=>t.length===0?"":ky(t),Vj=RU;function UC(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Uj(t){const e=on(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(on(t.named.count)||on(t.named.n))?on(t.named.count)?t.named.count:on(t.named.n)?t.named.n:e:e}function jj(t,e){e.count||(e.count=t),e.n||(e.n=t)}function zj(t={}){const e=t.locale,n=Uj(t),s=ct(t.pluralRules)&&Te(e)&&$t(t.pluralRules[e])?t.pluralRules[e]:UC,o=ct(t.pluralRules)&&Te(e)&&$t(t.pluralRules[e])?UC:void 0,r=g=>g[s(n,g.length,o)],i=t.list||[],a=g=>i[g],c=t.named||{};on(t.pluralIndex)&&jj(n,c);const l=g=>c[g];function u(g,b){const x=$t(t.messages)?t.messages(g,!!b):ct(t.messages)?t.messages[g]:!1;return x||(t.parent?t.parent.message(g):Pj)}const d=g=>t.modifiers?t.modifiers[g]:Fj,h=Ye(t.processor)&&$t(t.processor.normalize)?t.processor.normalize:Bj,f=Ye(t.processor)&&$t(t.processor.interpolate)?t.processor.interpolate:Vj,p=Ye(t.processor)&&Te(t.processor.type)?t.processor.type:Mj,v={list:a,named:l,plural:r,linked:(g,...b)=>{const[x,y]=b;let w="text",C="";b.length===1?ct(x)?(C=x.modifier||C,w=x.type||w):Te(x)&&(C=x||C):b.length===2&&(Te(x)&&(C=x||C),Te(y)&&(w=y||w));const _=u(g,!0)(v),S=w==="vnode"&&Lt(_)&&C?_[0]:_;return C?d(C)(S,w):S},message:u,type:p,interpolate:f,normalize:h,values:un({},i,c)};return v}const jC=()=>"",Ts=t=>$t(t);function zC(t,...e){const{fallbackFormat:n,postTranslation:s,unresolving:o,messageCompiler:r,fallbackLocale:i,messages:a}=t,[c,l]=Gv(...e),u=rt(l.missingWarn)?l.missingWarn:t.missingWarn,d=rt(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,h=rt(l.escapeParameter)?l.escapeParameter:t.escapeParameter,f=!!l.resolvedMessage,p=Te(l.default)||rt(l.default)?rt(l.default)?r?c:()=>c:l.default:n?r?c:()=>c:null,m=n||p!=null&&(Te(p)||$t(p)),v=Ty(t,l);h&&Wj(l);let[g,b,x]=f?[c,v,a[v]||{}]:E$(t,c,v,i,d,u),y=g,w=c;if(!f&&!(Te(y)||xc(y)||Ts(y))&&m&&(y=p,w=y),!f&&(!(Te(y)||xc(y)||Ts(y))||!Te(b)))return o?hp:c;let C=!1;const _=()=>{C=!0},S=Ts(y)?y:k$(t,c,b,y,w,_);if(C)return y;const I=Kj(t,b,x,l),E=zj(I),O=Gj(t,S,E),A=s?s(O,c):O;if(__INTLIFY_PROD_DEVTOOLS__){const P={timestamp:Date.now(),key:Te(c)?c:Ts(y)?y.key:"",locale:b||(Ts(y)?y.locale:""),format:Te(y)?y:Ts(y)?y.source:"",message:A};P.meta=un({},t.__meta,Aj()||{}),dj(P)}return A}function Wj(t){Lt(t.list)?t.list=t.list.map(e=>Te(e)?IC(e):e):ct(t.named)&&Object.keys(t.named).forEach(e=>{Te(t.named[e])&&(t.named[e]=IC(t.named[e]))})}function E$(t,e,n,s,o,r){const{messages:i,onWarn:a,messageResolver:c,localeFallbacker:l}=t,u=l(t,s,n);let d={},h,f=null;const p="translate";for(let m=0;m<u.length&&(h=u[m],d=i[h]||{},(f=c(d,e))===null&&(f=d[e]),!(Te(f)||xc(f)||Ts(f)));m++)if(!Lj(h,u)){const v=Ny(t,e,h,r,p);v!==e&&(f=v)}return[f,h,d]}function k$(t,e,n,s,o,r){const{messageCompiler:i,warnHtmlMessage:a}=t;if(Ts(s)){const l=s;return l.locale=l.locale||n,l.key=l.key||e,l}if(i==null){const l=()=>s;return l.locale=n,l.key=e,l}const c=i(s,Hj(t,n,o,s,a,r));return c.locale=n,c.key=e,c.source=s,c}function Gj(t,e,n){return e(n)}function Gv(...t){const[e,n,s]=t,o={};if(!Te(e)&&!on(e)&&!Ts(e)&&!xc(e))throw or(sr.INVALID_ARGUMENT);const r=on(e)?String(e):(Ts(e),e);return on(n)?o.plural=n:Te(n)?o.default=n:Ye(n)&&!up(n)?o.named=n:Lt(n)&&(o.list=n),on(s)?o.plural=s:Te(s)?o.default=s:Ye(s)&&un(o,s),[r,o]}function Hj(t,e,n,s,o,r){return{locale:e,key:n,warnHtmlMessage:o,onError:i=>{throw r&&r(i),i},onCacheKey:i=>kU(e,n,i)}}function Kj(t,e,n,s){const{modifiers:o,pluralRules:r,messageResolver:i,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=t,h={locale:e,modifiers:o,pluralRules:r,messages:(f,p)=>{let m=i(n,f);if(m==null&&(u||p)){const[,,v]=E$(u||t,f,e,a,c,l);m=i(v,f)}if(Te(m)||xc(m)){let v=!1;const b=k$(t,f,e,m,f,()=>{v=!0});return v?jC:b}else return Ts(m)?m:jC}};return t.processor&&(h.processor=t.processor),s.list&&(h.list=s.list),s.named&&(h.named=s.named),on(s.plural)&&(h.pluralIndex=s.plural),h}oj();/*!
  * vue-i18n v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const qj="10.0.4";function Xj(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Di().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Di().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Di().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Di().__INTLIFY_PROD_DEVTOOLS__=!1)}const Xn={UNEXPECTED_RETURN_TYPE:fj,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function as(t,...e){return dp(t,null,void 0)}const Hv=ni("__translateVNode"),Kv=ni("__datetimeParts"),qv=ni("__numberParts"),$$=ni("__setPluralRules"),T$=ni("__injectWithOption"),Xv=ni("__dispose");function eu(t){if(!ct(t))return t;for(const e in t)if(cf(t,e))if(!e.includes("."))ct(t[e])&&eu(t[e]);else{const n=e.split("."),s=n.length-1;let o=t,r=!1;for(let i=0;i<s;i++){if(n[i]in o||(o[n[i]]={}),!ct(o[n[i]])){r=!0;break}o=o[n[i]]}r||(o[n[s]]=t[e],delete t[e]),ct(o[n[s]])&&eu(o[n[s]])}return t}function Ay(t,e){const{messages:n,__i18n:s,messageResolver:o,flatJson:r}=e,i=Ye(n)?n:Lt(s)?{}:{[t]:{}};if(Lt(s)&&s.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(i[c]=i[c]||{},Rh(l,i[c])):Rh(l,i)}else Te(a)&&Rh(JSON.parse(a),i)}),o==null&&r)for(const a in i)cf(i,a)&&eu(i[a]);return i}function N$(t){return t.type}function A$(t,e,n){let s=ct(e.messages)?e.messages:{};"__i18nGlobal"in n&&(s=Ay(t.locale.value,{messages:s,__i18n:n.__i18nGlobal}));const o=Object.keys(s);o.length&&o.forEach(r=>{t.mergeLocaleMessage(r,s[r])});{if(ct(e.datetimeFormats)){const r=Object.keys(e.datetimeFormats);r.length&&r.forEach(i=>{t.mergeDateTimeFormat(i,e.datetimeFormats[i])})}if(ct(e.numberFormats)){const r=Object.keys(e.numberFormats);r.length&&r.forEach(i=>{t.mergeNumberFormat(i,e.numberFormats[i])})}}}function WC(t){return Je(Mr,null,t,0)}const GC="__INTLIFY_META__",HC=()=>[],Qj=()=>!1;let KC=0;function qC(t){return(e,n,s,o)=>t(n,s,ao()||void 0,o)}const Yj=()=>{const t=ao();let e=null;return t&&(e=N$(t)[GC])?{[GC]:e}:null};function Ry(t={}){const{__root:e,__injectWithOption:n}=t,s=e===void 0,o=t.flatJson,r=af?is:qi;let i=rt(t.inheritLocale)?t.inheritLocale:!0;const a=r(e&&i?e.locale.value:Te(t.locale)?t.locale:Zl),c=r(e&&i?e.fallbackLocale.value:Te(t.fallbackLocale)||Lt(t.fallbackLocale)||Ye(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),l=r(Ay(a.value,t)),u=r(Ye(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=r(Ye(t.numberFormats)?t.numberFormats:{[a.value]:{}});let h=e?e.missingWarn:rt(t.missingWarn)||bc(t.missingWarn)?t.missingWarn:!0,f=e?e.fallbackWarn:rt(t.fallbackWarn)||bc(t.fallbackWarn)?t.fallbackWarn:!0,p=e?e.fallbackRoot:rt(t.fallbackRoot)?t.fallbackRoot:!0,m=!!t.fallbackFormat,v=$t(t.missing)?t.missing:null,g=$t(t.missing)?qC(t.missing):null,b=$t(t.postTranslation)?t.postTranslation:null,x=e?e.warnHtmlMessage:rt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,y=!!t.escapeParameter;const w=e?e.modifiers:Ye(t.modifiers)?t.modifiers:{};let C=t.pluralRules||e&&e.pluralRules,_;_=(()=>{s&&LC(null);const B={version:qj,locale:a.value,fallbackLocale:c.value,messages:l.value,modifiers:w,pluralRules:C,missing:g===null?void 0:g,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:x,escapeParameter:y,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};B.datetimeFormats=u.value,B.numberFormats=d.value,B.__datetimeFormatters=Ye(_)?_.__datetimeFormatters:void 0,B.__numberFormatters=Ye(_)?_.__numberFormatters:void 0;const Z=Dj(B);return s&&LC(Z),Z})(),dl(_,a.value,c.value);function I(){return[a.value,c.value,l.value,u.value,d.value]}const E=pt({get:()=>a.value,set:B=>{a.value=B,_.locale=a.value}}),O=pt({get:()=>c.value,set:B=>{c.value=B,_.fallbackLocale=c.value,dl(_,a.value,B)}}),A=pt(()=>l.value),P=pt(()=>u.value),z=pt(()=>d.value);function G(){return $t(b)?b:null}function M(B){b=B,_.postTranslation=B}function R(){return v}function D(B){B!==null&&(g=qC(B)),v=B,_.missing=g}const j=(B,Z,Ce,ie,be,Ie)=>{I();let Pe;try{__INTLIFY_PROD_DEVTOOLS__,s||(_.fallbackContext=e?Rj():void 0),Pe=B(_)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(_.fallbackContext=void 0)}if(Ce!=="translate exists"&&on(Pe)&&Pe===hp||Ce==="translate exists"&&!Pe){const[Qe,At]=Z();return e&&p?ie(e):be(Qe)}else{if(Ie(Pe))return Pe;throw as(Xn.UNEXPECTED_RETURN_TYPE)}};function ne(...B){return j(Z=>Reflect.apply(zC,null,[Z,...B]),()=>Gv(...B),"translate",Z=>Reflect.apply(Z.t,Z,[...B]),Z=>Z,Z=>Te(Z))}function re(...B){const[Z,Ce,ie]=B;if(ie&&!ct(ie))throw as(Xn.INVALID_ARGUMENT);return ne(Z,Ce,un({resolvedMessage:!0},ie||{}))}function de(...B){return j(Z=>Reflect.apply(PC,null,[Z,...B]),()=>zv(...B),"datetime format",Z=>Reflect.apply(Z.d,Z,[...B]),()=>DC,Z=>Te(Z))}function he(...B){return j(Z=>Reflect.apply(BC,null,[Z,...B]),()=>Wv(...B),"number format",Z=>Reflect.apply(Z.n,Z,[...B]),()=>DC,Z=>Te(Z))}function ye(B){return B.map(Z=>Te(Z)||on(Z)||rt(Z)?WC(String(Z)):Z)}const ge={normalize:ye,interpolate:B=>B,type:"vnode"};function q(...B){return j(Z=>{let Ce;const ie=Z;try{ie.processor=ge,Ce=Reflect.apply(zC,null,[ie,...B])}finally{ie.processor=null}return Ce},()=>Gv(...B),"translate",Z=>Z[Hv](...B),Z=>[WC(Z)],Z=>Lt(Z))}function ue(...B){return j(Z=>Reflect.apply(BC,null,[Z,...B]),()=>Wv(...B),"number format",Z=>Z[qv](...B),HC,Z=>Te(Z)||Lt(Z))}function le(...B){return j(Z=>Reflect.apply(PC,null,[Z,...B]),()=>zv(...B),"datetime format",Z=>Z[Kv](...B),HC,Z=>Te(Z)||Lt(Z))}function pe(B){C=B,_.pluralRules=C}function _e(B,Z){return j(()=>{if(!B)return!1;const Ce=Te(Z)?Z:a.value,ie=L(Ce),be=_.messageResolver(ie,B);return xc(be)||Ts(be)||Te(be)},()=>[B],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[B,Z]),Qj,Ce=>rt(Ce))}function Re(B){let Z=null;const Ce=b$(_,c.value,a.value);for(let ie=0;ie<Ce.length;ie++){const be=l.value[Ce[ie]]||{},Ie=_.messageResolver(be,B);if(Ie!=null){Z=Ie;break}}return Z}function N(B){const Z=Re(B);return Z??(e?e.tm(B)||{}:{})}function L(B){return l.value[B]||{}}function K(B,Z){if(o){const Ce={[B]:Z};for(const ie in Ce)cf(Ce,ie)&&eu(Ce[ie]);Z=Ce[B]}l.value[B]=Z,_.messages=l.value}function oe(B,Z){l.value[B]=l.value[B]||{};const Ce={[B]:Z};if(o)for(const ie in Ce)cf(Ce,ie)&&eu(Ce[ie]);Z=Ce[B],Rh(Z,l.value[B]),_.messages=l.value}function se(B){return u.value[B]||{}}function k(B,Z){u.value[B]=Z,_.datetimeFormats=u.value,MC(_,B,Z)}function T(B,Z){u.value[B]=un(u.value[B]||{},Z),_.datetimeFormats=u.value,MC(_,B,Z)}function U(B){return d.value[B]||{}}function Y(B,Z){d.value[B]=Z,_.numberFormats=d.value,VC(_,B,Z)}function ee(B,Z){d.value[B]=un(d.value[B]||{},Z),_.numberFormats=d.value,VC(_,B,Z)}KC++,e&&af&&(to(e.locale,B=>{i&&(a.value=B,_.locale=B,dl(_,a.value,c.value))}),to(e.fallbackLocale,B=>{i&&(c.value=B,_.fallbackLocale=B,dl(_,a.value,c.value))}));const ve={id:KC,locale:E,fallbackLocale:O,get inheritLocale(){return i},set inheritLocale(B){i=B,B&&e&&(a.value=e.locale.value,c.value=e.fallbackLocale.value,dl(_,a.value,c.value))},get availableLocales(){return Object.keys(l.value).sort()},messages:A,get modifiers(){return w},get pluralRules(){return C||{}},get isGlobal(){return s},get missingWarn(){return h},set missingWarn(B){h=B,_.missingWarn=h},get fallbackWarn(){return f},set fallbackWarn(B){f=B,_.fallbackWarn=f},get fallbackRoot(){return p},set fallbackRoot(B){p=B},get fallbackFormat(){return m},set fallbackFormat(B){m=B,_.fallbackFormat=m},get warnHtmlMessage(){return x},set warnHtmlMessage(B){x=B,_.warnHtmlMessage=B},get escapeParameter(){return y},set escapeParameter(B){y=B,_.escapeParameter=B},t:ne,getLocaleMessage:L,setLocaleMessage:K,mergeLocaleMessage:oe,getPostTranslationHandler:G,setPostTranslationHandler:M,getMissingHandler:R,setMissingHandler:D,[$$]:pe};return ve.datetimeFormats=P,ve.numberFormats=z,ve.rt=re,ve.te=_e,ve.tm=N,ve.d=de,ve.n=he,ve.getDateTimeFormat=se,ve.setDateTimeFormat=k,ve.mergeDateTimeFormat=T,ve.getNumberFormat=U,ve.setNumberFormat=Y,ve.mergeNumberFormat=ee,ve[T$]=n,ve[Hv]=q,ve[Kv]=le,ve[qv]=ue,ve}function Jj(t){const e=Te(t.locale)?t.locale:Zl,n=Te(t.fallbackLocale)||Lt(t.fallbackLocale)||Ye(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,s=$t(t.missing)?t.missing:void 0,o=rt(t.silentTranslationWarn)||bc(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,r=rt(t.silentFallbackWarn)||bc(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,i=rt(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,c=Ye(t.modifiers)?t.modifiers:{},l=t.pluralizationRules,u=$t(t.postTranslation)?t.postTranslation:void 0,d=Te(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,f=rt(t.sync)?t.sync:!0;let p=t.messages;if(Ye(t.sharedMessages)){const w=t.sharedMessages;p=Object.keys(w).reduce((_,S)=>{const I=_[S]||(_[S]={});return un(I,w[S]),_},p||{})}const{__i18n:m,__root:v,__injectWithOption:g}=t,b=t.datetimeFormats,x=t.numberFormats,y=t.flatJson;return{locale:e,fallbackLocale:n,messages:p,flatJson:y,datetimeFormats:b,numberFormats:x,missing:s,missingWarn:o,fallbackWarn:r,fallbackRoot:i,fallbackFormat:a,modifiers:c,pluralRules:l,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:f,__i18n:m,__root:v,__injectWithOption:g}}function Qv(t={}){const e=Ry(Jj(t)),{__extender:n}=t,s={id:e.id,get locale(){return e.locale.value},set locale(o){e.locale.value=o},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(o){e.fallbackLocale.value=o},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(o){e.setMissingHandler(o)},get silentTranslationWarn(){return rt(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(o){e.missingWarn=rt(o)?!o:o},get silentFallbackWarn(){return rt(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(o){e.fallbackWarn=rt(o)?!o:o},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(o){e.fallbackFormat=o},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(o){e.setPostTranslationHandler(o)},get sync(){return e.inheritLocale},set sync(o){e.inheritLocale=o},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){e.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(o){e.escapeParameter=o},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...o){return Reflect.apply(e.t,e,[...o])},rt(...o){return Reflect.apply(e.rt,e,[...o])},tc(...o){const[r,i,a]=o,c={plural:1};let l=null,u=null;if(!Te(r))throw as(Xn.INVALID_ARGUMENT);const d=r;return Te(i)?c.locale=i:on(i)?c.plural=i:Lt(i)?l=i:Ye(i)&&(u=i),Te(a)?c.locale=a:Lt(a)?l=a:Ye(a)&&(u=a),Reflect.apply(e.t,e,[d,l||u||{},c])},te(o,r){return e.te(o,r)},tm(o){return e.tm(o)},getLocaleMessage(o){return e.getLocaleMessage(o)},setLocaleMessage(o,r){e.setLocaleMessage(o,r)},mergeLocaleMessage(o,r){e.mergeLocaleMessage(o,r)},d(...o){return Reflect.apply(e.d,e,[...o])},getDateTimeFormat(o){return e.getDateTimeFormat(o)},setDateTimeFormat(o,r){e.setDateTimeFormat(o,r)},mergeDateTimeFormat(o,r){e.mergeDateTimeFormat(o,r)},n(...o){return Reflect.apply(e.n,e,[...o])},getNumberFormat(o){return e.getNumberFormat(o)},setNumberFormat(o,r){e.setNumberFormat(o,r)},mergeNumberFormat(o,r){e.mergeNumberFormat(o,r)}};return s.__extender=n,s}function Zj(t,e,n){return{beforeCreate(){const s=ao();if(!s)throw as(Xn.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const r=o.i18n;if(o.__i18n&&(r.__i18n=o.__i18n),r.__root=e,this===this.$root)this.$i18n=XC(t,r);else{r.__injectWithOption=!0,r.__extender=n.__vueI18nExtend,this.$i18n=Qv(r);const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}}else if(o.__i18n)if(this===this.$root)this.$i18n=XC(t,o);else{this.$i18n=Qv({__i18n:o.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=t;o.__i18nGlobal&&A$(e,o,o),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,i)=>this.$i18n.te(r,i),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),n.__setInstance(s,this.$i18n)},mounted(){},unmounted(){const s=ao();if(!s)throw as(Xn.UNEXPECTED_ERROR);const o=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,o.__disposer&&(o.__disposer(),delete o.__disposer,delete o.__extender),n.__deleteInstance(s),delete this.$i18n}}}function XC(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[$$](e.pluralizationRules||t.pluralizationRules);const n=Ay(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(s=>t.mergeLocaleMessage(s,n[s])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(s=>t.mergeDateTimeFormat(s,e.datetimeFormats[s])),e.numberFormats&&Object.keys(e.numberFormats).forEach(s=>t.mergeNumberFormat(s,e.numberFormats[s])),t}const Dy={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function ez({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((s,o)=>[...s,...o.type===Ht?o.children:[o]],[]):e.reduce((n,s)=>{const o=t[s];return o&&(n[s]=o()),n},{})}function R$(){return Ht}const tz=Sn({name:"i18n-t",props:un({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>on(t)||!isNaN(t)}},Dy),setup(t,e){const{slots:n,attrs:s}=e,o=t.i18n||fp({useScope:t.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter(d=>d!=="_"),i={};t.locale&&(i.locale=t.locale),t.plural!==void 0&&(i.plural=Te(t.plural)?+t.plural:t.plural);const a=ez(e,r),c=o[Hv](t.keypath,a,i),l=un({},s),u=Te(t.tag)||ct(t.tag)?t.tag:R$();return pn(u,l,c)}}}),QC=tz;function nz(t){return Lt(t)&&!Te(t[0])}function D$(t,e,n,s){const{slots:o,attrs:r}=e;return()=>{const i={part:!0};let a={};t.locale&&(i.locale=t.locale),Te(t.format)?i.key=t.format:ct(t.format)&&(Te(t.format.key)&&(i.key=t.format.key),a=Object.keys(t.format).reduce((h,f)=>n.includes(f)?un({},h,{[f]:t.format[f]}):h,{}));const c=s(t.value,i,a);let l=[i.key];Lt(c)?l=c.map((h,f)=>{const p=o[h.type],m=p?p({[h.type]:h.value,index:f,parts:c}):[h.value];return nz(m)&&(m[0].key=`${h.type}-${f}`),m}):Te(c)&&(l=[c]);const u=un({},r),d=Te(t.tag)||ct(t.tag)?t.tag:R$();return pn(d,u,l)}}const sz=Sn({name:"i18n-n",props:un({value:{type:Number,required:!0},format:{type:[String,Object]}},Dy),setup(t,e){const n=t.i18n||fp({useScope:t.scope,__useComponent:!0});return D$(t,e,I$,(...s)=>n[qv](...s))}}),YC=sz,oz=Sn({name:"i18n-d",props:un({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Dy),setup(t,e){const n=t.i18n||fp({useScope:t.scope,__useComponent:!0});return D$(t,e,S$,(...s)=>n[Kv](...s))}}),JC=oz;function rz(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const s=n.__getInstance(e);return s!=null?s.__composer:t.global.__composer}}function iz(t){const e=i=>{const{instance:a,value:c}=i;if(!a||!a.$)throw as(Xn.UNEXPECTED_ERROR);const l=rz(t,a.$),u=ZC(c);return[Reflect.apply(l.t,l,[...e_(u)]),l]};return{created:(i,a)=>{const[c,l]=e(a);af&&t.global===l&&(i.__i18nWatcher=to(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),i.__composer=l,i.textContent=c},unmounted:i=>{af&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:a})=>{if(i.__composer){const c=i.__composer,l=ZC(a);i.textContent=Reflect.apply(c.t,c,[...e_(l)])}},getSSRProps:i=>{const[a]=e(i);return{textContent:a}}}}function ZC(t){if(Te(t))return{path:t};if(Ye(t)){if(!("path"in t))throw as(Xn.REQUIRED_VALUE,"path");return t}else throw as(Xn.INVALID_VALUE)}function e_(t){const{path:e,locale:n,args:s,choice:o,plural:r}=t,i={},a=s||{};return Te(n)&&(i.locale=n),on(o)&&(i.plural=o),on(r)&&(i.plural=r),[e,a,i]}function az(t,e,...n){const s=Ye(n[0])?n[0]:{};(rt(s.globalInstall)?s.globalInstall:!0)&&([QC.name,"I18nT"].forEach(r=>t.component(r,QC)),[YC.name,"I18nN"].forEach(r=>t.component(r,YC)),[JC.name,"I18nD"].forEach(r=>t.component(r,JC))),t.directive("t",iz(e))}const cz=ni("global-vue-i18n");function lz(t={},e){const n=__VUE_I18N_LEGACY_API__&&rt(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,s=rt(t.globalInjection)?t.globalInjection:!0,o=new Map,[r,i]=uz(t,n),a=ni("");function c(h){return o.get(h)||null}function l(h,f){o.set(h,f)}function u(h){o.delete(h)}const d={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},async install(h,...f){if(h.__VUE_I18N_SYMBOL__=a,h.provide(h.__VUE_I18N_SYMBOL__,d),Ye(f[0])){const v=f[0];d.__composerExtend=v.__composerExtend,d.__vueI18nExtend=v.__vueI18nExtend}let p=null;!n&&s&&(p=bz(h,d.global)),__VUE_I18N_FULL_INSTALL__&&az(h,d,...f),__VUE_I18N_LEGACY_API__&&n&&h.mixin(Zj(i,i.__composer,d));const m=h.unmount;h.unmount=()=>{p&&p(),d.dispose(),m()}},get global(){return i},dispose(){r.stop()},__instances:o,__getInstance:c,__setInstance:l,__deleteInstance:u};return d}function fp(t={}){const e=ao();if(e==null)throw as(Xn.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw as(Xn.NOT_INSTALLED);const n=dz(e),s=fz(n),o=N$(e),r=hz(t,o);if(r==="global")return A$(s,t,o),s;if(r==="parent"){let c=pz(n,e,t.__useComponent);return c==null&&(c=s),c}const i=n;let a=i.__getInstance(e);if(a==null){const c=un({},t);"__i18n"in o&&(c.__i18n=o.__i18n),s&&(c.__root=s),a=Ry(c),i.__composerExtend&&(a[Xv]=i.__composerExtend(a)),gz(i,e,a),i.__setInstance(e,a)}return a}function uz(t,e,n){const s=PI(),o=__VUE_I18N_LEGACY_API__&&e?s.run(()=>Qv(t)):s.run(()=>Ry(t));if(o==null)throw as(Xn.UNEXPECTED_ERROR);return[s,o]}function dz(t){const e=Dn(t.isCE?cz:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw as(t.isCE?Xn.NOT_INSTALLED_WITH_PROVIDE:Xn.UNEXPECTED_ERROR);return e}function hz(t,e){return up(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function fz(t){return t.mode==="composition"?t.global:t.global.__composer}function pz(t,e,n=!1){let s=null;const o=e.root;let r=mz(e,n);for(;r!=null;){const i=t;if(t.mode==="composition")s=i.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const a=i.__getInstance(r);a!=null&&(s=a.__composer,n&&s&&!s[T$]&&(s=null))}if(s!=null||o===r)break;r=r.parent}return s}function mz(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function gz(t,e,n){bu(()=>{},e),Zf(()=>{const s=n;t.__deleteInstance(e);const o=s[Xv];o&&(o(),delete s[Xv])},e)}const vz=["locale","fallbackLocale","availableLocales"],t_=["t","rt","d","n","tm","te"];function bz(t,e){const n=Object.create(null);return vz.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r)throw as(Xn.UNEXPECTED_ERROR);const i=ln(r.value)?{get(){return r.value.value},set(a){r.value.value=a}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,o,i)}),t.config.globalProperties.$i18n=n,t_.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r||!r.value)throw as(Xn.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${o}`,r)}),()=>{delete t.config.globalProperties.$i18n,t_.forEach(o=>{delete t.config.globalProperties[`$${o}`]})}}Xj();kj(cj);$j(Sj);Tj(b$);if(__INTLIFY_PROD_DEVTOOLS__){const t=Di();t.__INTLIFY__=!0,lj(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const yz="About us",xz="Browser",wz="Contact us",Cz="Documentation",_z="Feedback",Sz="Found a bug?",Iz="Grammatical Case",Ez="Gender",kz="Live demo",$z="Military",Tz="бета-тестування",Nz={aboutUs:yz,"aboutUs.author1":"Tetyana Tolochko","aboutUs.author1.responsibility":"Linguistics and philology","aboutUs.author2":"Oleksandr Tolochko","aboutUs.author2.responsibility":"Original idea and development","aboutUs.author3":"Anna Tolochko","aboutUs.author3.responsibility":"Machine learning and data analysis","aboutUs.tribute":"This work is dedicated to the memory of Tetyana Tolochko, whose legacy we strive to continue.","action.backToHome":"Navigate to homepage","action.close":"Close","action.copy":"Copy","action.copyLink":"Copy link address","action.send":"Send","action.tryItOut":"Try it out","action.write":"Write","anthroponym.militaryRank":"Military Rank","anthroponym.militaryAppointment":"Military Appointment","anthroponym.familyName":"Family Name","anthroponym.givenName":"Given Name","anthroponym.patronymicName":"Patronymic Name",browser:xz,contactUs:wz,"contactUs.message":"Please feel free to contact us via email if you have any questions or suggestions.","contactUs.messageSubject":"{appName} - Contact us","contactUs.recipientEmail":"Email address","declension.confirmCorrection":"Yes, fix it!","declension.copyResult":"Use the buttons below to copy the declension results.","declension.correctionMessage":"Do you want to replace {incorrectSpelling} with {correctSpelling} according to the latest spelling rules?","declension.inflect":"Inflect","declension.instruction":"Select a grammatical gender and fill in a personal name in a nominative case.","declension.shareResult":"Share the result of declension","declension.results":"Declension Result",documentation:Cz,"documentation.apiSpec":"API Specification","documentation.howItWorks":"How It Works?","documentation.installation":"Installation","documentation.navigateToFullVersion":"Navigate to full version","documentation.navigateToExtensionPage":"Navigate to the extension page","documentation.usageExample":"Usage Example","error.404.message":"The requested page was not found","error.404.title":"404 Error",feedback:_z,foundBug:Sz,grammaticalCase:Iz,"grammaticalCase.ablative":"Ablative","grammaticalCase.accusative":"Accusative","grammaticalCase.dative":"Dative","grammaticalCase.genitive":"Genitive","grammaticalCase.locative":"Locative","grammaticalCase.nominative":"Nominative","grammaticalCase.vocative":"Vocative",grammaticalGender:Ez,"grammaticalGender.autoDetection":"Automatic grammatical gender detection by first name or patronymic name.","grammaticalGender.detectionFailed":"Failed to detect grammatical gender by first name or patronymic name. Select grammatical gender manually.","grammaticalGender.feminine":"Feminine","grammaticalGender.masculine":"Masculine","grammaticalGender.undefined":"Auto","library.issueReport":"Issue Report","library.license":"License","library.links":"Links",liveDemo:kz,"liveDemo.message":"declension of Ukrainian family names, given names, patronymic names",new:"New","socialShare.facebook":"Share on Facebook","socialShare.linkedIn":"Share on LinkedIn","socialShare.twitter":"Share on Twitter","website.description":"Online declension of Ukrainian family names (last names), given names (first names), and patronymic names.","website.keywords":"ukrainian language, anthroponym declension, personal name declension, given name declension, first name declension, patronymic name declension, patronymic declension, family name declension, surname declension, word declension, declension, word inflection, nominative case, genitive case, dative case, accusative case, ablative case, locative case, vocative case","website.language":"Language","website.locale.en-US":"English","website.locale.uk-UA":"Українська","website.longTitle":"Open-source JavaScript library for declension of Ukrainian personal names","website.title":"Declension of Ukrainian anthroponyms","website.longTitle.military":"The extension for declension of Ukrainian military ranks and appointments","website.title.military":"Declension of of Ukrainian military ranks and appointments","website.description.military":"Online declension of military ranks and appointments.","website.keywords.military":"declension of military ranks, declension of military appointments, nominative case, genitive case, dative case, accusative case, ablative case, locative case, vocative case","liveDemo.message.military":"declension of Ukrainian military ranks and appointments",forMilitary:$z,beta:Tz},Az="Про авторів",Rz="Браузер",Dz="Зворотний зв'язок",Oz="Документація",Lz="Зворотний зв'язок",Fz="Знайшли помилку?",Pz="Граматичний відмінок",Mz="Граматичний рід",Bz="Демонстрація",Vz="Військовим",Uz="бета-тестування",jz={aboutUs:Az,"aboutUs.author1":"Вчитель-методист Толочко Тетяна Григорівна","aboutUs.author1.responsibility":"Мовознавство та філологія","aboutUs.author2":"Толочко Олександр","aboutUs.author2.responsibility":"Ідея та розробка","aboutUs.author3":"Толочко Анна","aboutUs.author3.responsibility":"Машинне навчання та аналіз даних","aboutUs.tribute":"Ця робота присвячена пам'яті Толочко Тетяни Григорівни, чиє спадкове надбання ми прагнемо продовжити.","action.backToHome":"Повернутися на головну сторінку","action.close":"Закрити","action.copy":"Скопіювати","action.copyLink":"Скопіювати адресу посилання","action.send":"Надіслати","action.tryItOut":"Спробувати","action.write":"Написати","anthroponym.militaryRank":"Військове звання","anthroponym.militaryAppointment":"Військова посада","anthroponym.familyName":"Прізвище","anthroponym.givenName":"Ім'я","anthroponym.patronymicName":"По батькові",browser:Rz,contactUs:Dz,"contactUs.message":"Надішліть email на адресу нижче, якщо у вас виникли будь-які питання чи пропозиції.","contactUs.messageSubject":"{appName} - Зворотний зв'язок","contactUs.recipientEmail":"Електронна пошта","declension.confirmCorrection":"Так, виправити!","declension.copyResult":"Використовуйте кнопки нижче, щоб скопіювати результати відмінювання.","declension.correctionMessage":"Бажаєте виправити {incorrectSpelling} на {correctSpelling} згідно з правилами правопису 2019 року?","declension.inflect":"Провідміняти","declension.instruction":"Виберіть граматичний рід та введіть прізвище, ім'я по батькові в називному відмінку однини.","declension.shareResult":"Поділитися результатом відмінювання","declension.results":"Результат відмінювання",documentation:Oz,"documentation.apiSpec":"Специфікація API","documentation.howItWorks":"Принцип роботи","documentation.installation":"Встановлення","documentation.navigateToFullVersion":"Перейти до повної версії","documentation.navigateToExtensionPage":"Перейти до сторінки розширення","documentation.usageExample":"Приклад використання","error.404.message":"Сторінки за заданою адресою не існує","error.404.title":"Помилка 404",feedback:Lz,foundBug:Fz,grammaticalCase:Pz,"grammaticalCase.ablative":"Орудний (ким?)","grammaticalCase.accusative":"Знахідний (кого?)","grammaticalCase.dative":"Давальний (кому?)","grammaticalCase.genitive":"Родовий (кого?)","grammaticalCase.locative":"Місцевий (при кому?)","grammaticalCase.nominative":"Називний (хто?)","grammaticalCase.vocative":"Кличний",grammaticalGender:Mz,"grammaticalGender.autoDetection":"Автоматичне визначення граматичного роду відбувається за ім'ям по батькові.","grammaticalGender.detectionFailed":"Не вдалося визначити граматичний рід за ім'ям по батькові. Виберіть граматичний рід вручну.","grammaticalGender.feminine":"Жіночий","grammaticalGender.masculine":"Чоловічий","grammaticalGender.undefined":"Авто","library.issueReport":"Звіт про помилку","library.license":"Ліцензія","library.links":"Посилання",liveDemo:Bz,"liveDemo.message":"відмінювання українських прізвищ, імен по батькові",new:"Новинка","socialShare.facebook":"Поділитися через Facebook","socialShare.linkedIn":"Поділитися через LinkedIn","socialShare.twitter":"Поділитися через Twitter","website.description":"Відмінювання прізвищ, імен по батькові онлайн. Провідміняти прізвище, ім'я по батькові за відмінками.","website.keywords":"відмінювання ПІБ, відмінювання імен, відмінювання по батькові, відмінювання прізвищ, відмінювання чоловічих прізвищ, відмінювання жіночих прізвищ, називний відмінок, родовий відмінок, давальний відмінок, знахідний відмінок, орудний відмінок, місцевий відмінок, кличний відмінок","website.language":"Мова","website.locale.en-US":"English","website.locale.uk-UA":"Українська","website.longTitle":"JavaScript бібліотека з відкритим кодом для відмінювання українських антропонімів","website.title":"Відмінювання українських антропонімів","website.longTitle.military":"Розширення до бібліотеки для відмінювання українських військових звань та посад","website.title.military":"Відмінювання українських військових звань та посад","website.description.military":"Відмінювання українських військових звань та посад онлайн. Провідміняти військове звання та посаду за відмінками.","website.keywords.military":"відмінювання військових звань, відмінювання військових посад, називний відмінок, родовий відмінок, давальний відмінок, знахідний відмінок, орудний відмінок, місцевий відмінок, кличний відмінок","liveDemo.message.military":"відмінювання українських військових звань та посад",forMilitary:Vz,beta:Uz},O$="uk-UA",zz="en-US",Wz=fo(({vueApp:t})=>{const e=lz({legacy:!1,globalInjection:!0,messageResolver:(o,r)=>{const i=o[r];return i??null},locale:O$,fallbackLocale:zz,messages:{"en-US":Nz,"uk-UA":jz}});t.use(e);const n=Ln(),s=n.resolve.bind(n);n.resolve=(o,r,i)=>{const a=s(o,r,i);return a.href=n_(e.global.locale.value,a.href),a},n.beforeEach((o,r,i)=>{if(r==null){i();return}const a=n_(e.global.locale.value,o.fullPath);if(a!==o.fullPath){i(a);return}i()})});function n_(t,e){if(t===O$)return e;const n=`/${t}`;return e.startsWith(n)?e:`${n}${e}`}const Gz=[ZB,t4,bV,xV,wV,CV,SV,IV,EV,EU,Wz],Hz=Sn({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const e=t.renderKey,n=t.route,s={};for(const o in t.route)Object.defineProperty(s,o,{get:()=>e===t.renderKey?t.route[o]:n[o],enumerable:!0});return ji(wu,tr(s)),()=>pn(t.vnode,{ref:t.vnodeRef})}}),Kz=Sn({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const o=kt(),r=is(),i=Dn(wu,null);let a;s({pageRef:r});const c=Dn(yk,null);let l;const u=o.deferHydration();if(o.isHydrating){const d=o.hooks.hookOnce("app:error",u);Ln().beforeEach(d)}return t.pageKey&&to(()=>t.pageKey,(d,h)=>{d!==h&&o.callHook("page:loading:start")}),()=>pn(Jk,{name:t.name,route:t.route,...e},{default:d=>{const h=Xz(i,d.route,d.Component),f=i&&i.matched.length===d.route.matched.length;if(!d.Component){if(l&&!f)return l;u();return}if(l&&c&&!c.isCurrent(d.route))return l;if(h&&i&&(!c||c!=null&&c.isCurrent(i)))return f?l:null;const p=Mv(d,t.pageKey);!o.isHydrating&&!Qz(i,d.route,d.Component)&&a===p&&o.callHook("page:loading:end"),a=p;const m=!!(t.transition??d.route.meta.pageTransition??Sv),v=m&&qz([t.transition,d.route.meta.pageTransition,Sv,{onAfterLeave:()=>{o.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),g=t.keepalive??d.route.meta.keepalive??d3;return l=Zk(YE,m&&v,rV(g,pn(dy,{suspensible:!0,onPending:()=>o.callHook("page:start",d.Component),onResolve:()=>{Uc(()=>o.callHook("page:finish",d.Component).then(()=>o.callHook("page:loading:end")).finally(u))}},{default:()=>{const b=pn(Hz,{key:p||void 0,vnode:n.default?pn(Ht,void 0,n.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:m,vnodeRef:r});return g&&(b.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),b}}))).default(),l}})}});function qz(t){const e=t.map(n=>({...n,onAfterLeave:n.onAfterLeave?wy(n.onAfterLeave):void 0}));return vk(...e)}function Xz(t,e,n){if(!t)return!1;const s=e.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(n==null?void 0:n.type)});return!s||s===-1?!1:e.matched.slice(0,s).some((o,r)=>{var i,a,c;return((i=o.components)==null?void 0:i.default)!==((c=(a=t.matched[r])==null?void 0:a.components)==null?void 0:c.default)})||n&&Mv({route:e,Component:n})!==Mv({route:t,Component:n})}function Qz(t,e,n){return t?e.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(n==null?void 0:n.type)})<e.matched.length-1:!1}const Yz=Sn({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(t,e){const n=await Ar[t.name]().then(s=>s.default||s);return()=>pn(n,t.layoutProps,e.slots)}}),L$=Sn({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,e){const n=kt(),s=Dn(wu),o=s===op()?sV():s,r=pt(()=>{let c=Ge(t.name)??o.meta.layout??"default";return c&&!(c in Ar)&&t.fallback&&(c=Ge(t.fallback)),c}),i=is();e.expose({layoutRef:i});const a=n.deferHydration();if(n.isHydrating){const c=n.hooks.hookOnce("app:error",a);Ln().beforeEach(c)}return()=>{const c=r.value&&r.value in Ar,l=o.meta.layoutTransition??u3;return Zk(YE,c&&l,{default:()=>pn(dy,{suspensible:!0,onResolve:()=>{Uc(a)}},{default:()=>pn(Jz,{layoutProps:GE(e.attrs,{ref:i}),key:r.value||void 0,name:r.value,shouldProvide:!t.name,hasTransition:!!l},e.slots)})}).default()}}}),Jz=Sn({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,e){const n=t.name;return t.shouldProvide&&ji(yk,{isCurrent:s=>n===(s.meta.layout??"default")}),()=>{var s,o;return!n||typeof n=="string"&&!(n in Ar)?(o=(s=e.slots).default)==null?void 0:o.call(s):pn(Yz,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}});var Hn="top",bs="bottom",ys="right",Kn="left",pp="auto",jc=[Hn,bs,ys,Kn],Yi="start",wc="end",F$="clippingParents",Oy="viewport",ja="popper",P$="reference",Yv=jc.reduce(function(t,e){return t.concat([e+"-"+Yi,e+"-"+wc])},[]),Ly=[].concat(jc,[pp]).reduce(function(t,e){return t.concat([e,e+"-"+Yi,e+"-"+wc])},[]),M$="beforeRead",B$="read",V$="afterRead",U$="beforeMain",j$="main",z$="afterMain",W$="beforeWrite",G$="write",H$="afterWrite",K$=[M$,B$,V$,U$,j$,z$,W$,G$,H$];function Mo(t){return t?(t.nodeName||"").toLowerCase():null}function xs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ji(t){var e=xs(t).Element;return t instanceof e||t instanceof Element}function Ps(t){var e=xs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Fy(t){if(typeof ShadowRoot>"u")return!1;var e=xs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Zz(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},o=e.attributes[n]||{},r=e.elements[n];!Ps(r)||!Mo(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(i){var a=o[i];a===!1?r.removeAttribute(i):r.setAttribute(i,a===!0?"":a)}))})}function eW(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var o=e.elements[s],r=e.attributes[s]||{},i=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),a=i.reduce(function(c,l){return c[l]="",c},{});!Ps(o)||!Mo(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(c){o.removeAttribute(c)}))})}}const Py={name:"applyStyles",enabled:!0,phase:"write",fn:Zz,effect:eW,requires:["computeStyles"]};function No(t){return t.split("-")[0]}var Wi=Math.max,lf=Math.min,Cc=Math.round;function Jv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function q$(){return!/^((?!chrome|android).)*safari/i.test(Jv())}function _c(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),o=1,r=1;e&&Ps(t)&&(o=t.offsetWidth>0&&Cc(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Cc(s.height)/t.offsetHeight||1);var i=Ji(t)?xs(t):window,a=i.visualViewport,c=!q$()&&n,l=(s.left+(c&&a?a.offsetLeft:0))/o,u=(s.top+(c&&a?a.offsetTop:0))/r,d=s.width/o,h=s.height/r;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l,x:l,y:u}}function My(t){var e=_c(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function X$(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fy(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function lr(t){return xs(t).getComputedStyle(t)}function tW(t){return["table","td","th"].indexOf(Mo(t))>=0}function oi(t){return((Ji(t)?t.ownerDocument:t.document)||window.document).documentElement}function mp(t){return Mo(t)==="html"?t:t.assignedSlot||t.parentNode||(Fy(t)?t.host:null)||oi(t)}function s_(t){return!Ps(t)||lr(t).position==="fixed"?null:t.offsetParent}function nW(t){var e=/firefox/i.test(Jv()),n=/Trident/i.test(Jv());if(n&&Ps(t)){var s=lr(t);if(s.position==="fixed")return null}var o=mp(t);for(Fy(o)&&(o=o.host);Ps(o)&&["html","body"].indexOf(Mo(o))<0;){var r=lr(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function _u(t){for(var e=xs(t),n=s_(t);n&&tW(n)&&lr(n).position==="static";)n=s_(n);return n&&(Mo(n)==="html"||Mo(n)==="body"&&lr(n).position==="static")?e:n||nW(t)||e}function By(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pl(t,e,n){return Wi(t,lf(e,n))}function sW(t,e,n){var s=Pl(t,e,n);return s>n?n:s}function Q$(){return{top:0,right:0,bottom:0,left:0}}function Y$(t){return Object.assign({},Q$(),t)}function J$(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var oW=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Y$(typeof e!="number"?e:J$(e,jc))};function rW(t){var e,n=t.state,s=t.name,o=t.options,r=n.elements.arrow,i=n.modifiersData.popperOffsets,a=No(n.placement),c=By(a),l=[Kn,ys].indexOf(a)>=0,u=l?"height":"width";if(!(!r||!i)){var d=oW(o.padding,n),h=My(r),f=c==="y"?Hn:Kn,p=c==="y"?bs:ys,m=n.rects.reference[u]+n.rects.reference[c]-i[c]-n.rects.popper[u],v=i[c]-n.rects.reference[c],g=_u(r),b=g?c==="y"?g.clientHeight||0:g.clientWidth||0:0,x=m/2-v/2,y=d[f],w=b-h[u]-d[p],C=b/2-h[u]/2+x,_=Pl(y,C,w),S=c;n.modifiersData[s]=(e={},e[S]=_,e.centerOffset=_-C,e)}}function iW(t){var e=t.state,n=t.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||X$(e.elements.popper,o)&&(e.elements.arrow=o))}const Z$={name:"arrow",enabled:!0,phase:"main",fn:rW,effect:iW,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sc(t){return t.split("-")[1]}var aW={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cW(t,e){var n=t.x,s=t.y,o=e.devicePixelRatio||1;return{x:Cc(n*o)/o||0,y:Cc(s*o)/o||0}}function o_(t){var e,n=t.popper,s=t.popperRect,o=t.placement,r=t.variation,i=t.offsets,a=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=i.x,f=h===void 0?0:h,p=i.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var g=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),x=Kn,y=Hn,w=window;if(l){var C=_u(n),_="clientHeight",S="clientWidth";if(C===xs(n)&&(C=oi(n),lr(C).position!=="static"&&a==="absolute"&&(_="scrollHeight",S="scrollWidth")),C=C,o===Hn||(o===Kn||o===ys)&&r===wc){y=bs;var I=d&&C===w&&w.visualViewport?w.visualViewport.height:C[_];m-=I-s.height,m*=c?1:-1}if(o===Kn||(o===Hn||o===bs)&&r===wc){x=ys;var E=d&&C===w&&w.visualViewport?w.visualViewport.width:C[S];f-=E-s.width,f*=c?1:-1}}var O=Object.assign({position:a},l&&aW),A=u===!0?cW({x:f,y:m},xs(n)):{x:f,y:m};if(f=A.x,m=A.y,c){var P;return Object.assign({},O,(P={},P[y]=b?"0":"",P[x]=g?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",P))}return Object.assign({},O,(e={},e[y]=b?m+"px":"",e[x]=g?f+"px":"",e.transform="",e))}function lW(t){var e=t.state,n=t.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,i=r===void 0?!0:r,a=n.roundOffsets,c=a===void 0?!0:a,l={placement:No(e.placement),variation:Sc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,o_(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,o_(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Vy={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:lW,data:{}};var ah={passive:!0};function uW(t){var e=t.state,n=t.instance,s=t.options,o=s.scroll,r=o===void 0?!0:o,i=s.resize,a=i===void 0?!0:i,c=xs(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&l.forEach(function(u){u.addEventListener("scroll",n.update,ah)}),a&&c.addEventListener("resize",n.update,ah),function(){r&&l.forEach(function(u){u.removeEventListener("scroll",n.update,ah)}),a&&c.removeEventListener("resize",n.update,ah)}}const Uy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:uW,data:{}};var dW={left:"right",right:"left",bottom:"top",top:"bottom"};function Dh(t){return t.replace(/left|right|bottom|top/g,function(e){return dW[e]})}var hW={start:"end",end:"start"};function r_(t){return t.replace(/start|end/g,function(e){return hW[e]})}function jy(t){var e=xs(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function zy(t){return _c(oi(t)).left+jy(t).scrollLeft}function fW(t,e){var n=xs(t),s=oi(t),o=n.visualViewport,r=s.clientWidth,i=s.clientHeight,a=0,c=0;if(o){r=o.width,i=o.height;var l=q$();(l||!l&&e==="fixed")&&(a=o.offsetLeft,c=o.offsetTop)}return{width:r,height:i,x:a+zy(t),y:c}}function pW(t){var e,n=oi(t),s=jy(t),o=(e=t.ownerDocument)==null?void 0:e.body,r=Wi(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=Wi(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-s.scrollLeft+zy(t),c=-s.scrollTop;return lr(o||n).direction==="rtl"&&(a+=Wi(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:i,x:a,y:c}}function Wy(t){var e=lr(t),n=e.overflow,s=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function eT(t){return["html","body","#document"].indexOf(Mo(t))>=0?t.ownerDocument.body:Ps(t)&&Wy(t)?t:eT(mp(t))}function Ml(t,e){var n;e===void 0&&(e=[]);var s=eT(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),r=xs(s),i=o?[r].concat(r.visualViewport||[],Wy(s)?s:[]):s,a=e.concat(i);return o?a:a.concat(Ml(mp(i)))}function Zv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function mW(t,e){var n=_c(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function i_(t,e,n){return e===Oy?Zv(fW(t,n)):Ji(e)?mW(e,n):Zv(pW(oi(t)))}function gW(t){var e=Ml(mp(t)),n=["absolute","fixed"].indexOf(lr(t).position)>=0,s=n&&Ps(t)?_u(t):t;return Ji(s)?e.filter(function(o){return Ji(o)&&X$(o,s)&&Mo(o)!=="body"}):[]}function vW(t,e,n,s){var o=e==="clippingParents"?gW(t):[].concat(e),r=[].concat(o,[n]),i=r[0],a=r.reduce(function(c,l){var u=i_(t,l,s);return c.top=Wi(u.top,c.top),c.right=lf(u.right,c.right),c.bottom=lf(u.bottom,c.bottom),c.left=Wi(u.left,c.left),c},i_(t,i,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function tT(t){var e=t.reference,n=t.element,s=t.placement,o=s?No(s):null,r=s?Sc(s):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,c;switch(o){case Hn:c={x:i,y:e.y-n.height};break;case bs:c={x:i,y:e.y+e.height};break;case ys:c={x:e.x+e.width,y:a};break;case Kn:c={x:e.x-n.width,y:a};break;default:c={x:e.x,y:e.y}}var l=o?By(o):null;if(l!=null){var u=l==="y"?"height":"width";switch(r){case Yi:c[l]=c[l]-(e[u]/2-n[u]/2);break;case wc:c[l]=c[l]+(e[u]/2-n[u]/2);break}}return c}function Ic(t,e){e===void 0&&(e={});var n=e,s=n.placement,o=s===void 0?t.placement:s,r=n.strategy,i=r===void 0?t.strategy:r,a=n.boundary,c=a===void 0?F$:a,l=n.rootBoundary,u=l===void 0?Oy:l,d=n.elementContext,h=d===void 0?ja:d,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,v=m===void 0?0:m,g=Y$(typeof v!="number"?v:J$(v,jc)),b=h===ja?P$:ja,x=t.rects.popper,y=t.elements[p?b:h],w=vW(Ji(y)?y:y.contextElement||oi(t.elements.popper),c,u,i),C=_c(t.elements.reference),_=tT({reference:C,element:x,strategy:"absolute",placement:o}),S=Zv(Object.assign({},x,_)),I=h===ja?S:C,E={top:w.top-I.top+g.top,bottom:I.bottom-w.bottom+g.bottom,left:w.left-I.left+g.left,right:I.right-w.right+g.right},O=t.modifiersData.offset;if(h===ja&&O){var A=O[o];Object.keys(E).forEach(function(P){var z=[ys,bs].indexOf(P)>=0?1:-1,G=[Hn,bs].indexOf(P)>=0?"y":"x";E[P]+=A[G]*z})}return E}function bW(t,e){e===void 0&&(e={});var n=e,s=n.placement,o=n.boundary,r=n.rootBoundary,i=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=c===void 0?Ly:c,u=Sc(s),d=u?a?Yv:Yv.filter(function(p){return Sc(p)===u}):jc,h=d.filter(function(p){return l.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=Ic(t,{placement:m,boundary:o,rootBoundary:r,padding:i})[No(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function yW(t){if(No(t)===pp)return[];var e=Dh(t);return[r_(t),e,r_(e)]}function xW(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,v=e.options.placement,g=No(v),b=g===v,x=c||(b||!p?[Dh(v)]:yW(v)),y=[v].concat(x).reduce(function(ye,fe){return ye.concat(No(fe)===pp?bW(e,{placement:fe,boundary:u,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),w=e.rects.reference,C=e.rects.popper,_=new Map,S=!0,I=y[0],E=0;E<y.length;E++){var O=y[E],A=No(O),P=Sc(O)===Yi,z=[Hn,bs].indexOf(A)>=0,G=z?"width":"height",M=Ic(e,{placement:O,boundary:u,rootBoundary:d,altBoundary:h,padding:l}),R=z?P?ys:Kn:P?bs:Hn;w[G]>C[G]&&(R=Dh(R));var D=Dh(R),j=[];if(r&&j.push(M[A]<=0),a&&j.push(M[R]<=0,M[D]<=0),j.every(function(ye){return ye})){I=O,S=!1;break}_.set(O,j)}if(S)for(var ne=p?3:1,re=function(fe){var ge=y.find(function(q){var ue=_.get(q);if(ue)return ue.slice(0,fe).every(function(le){return le})});if(ge)return I=ge,"break"},de=ne;de>0;de--){var he=re(de);if(he==="break")break}e.placement!==I&&(e.modifiersData[s]._skip=!0,e.placement=I,e.reset=!0)}}const nT={name:"flip",enabled:!0,phase:"main",fn:xW,requiresIfExists:["offset"],data:{_skip:!1}};function a_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function c_(t){return[Hn,ys,bs,Kn].some(function(e){return t[e]>=0})}function wW(t){var e=t.state,n=t.name,s=e.rects.reference,o=e.rects.popper,r=e.modifiersData.preventOverflow,i=Ic(e,{elementContext:"reference"}),a=Ic(e,{altBoundary:!0}),c=a_(i,s),l=a_(a,o,r),u=c_(c),d=c_(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const sT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wW};function CW(t,e,n){var s=No(t),o=[Kn,Hn].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=r[0],a=r[1];return i=i||0,a=(a||0)*o,[Kn,ys].indexOf(s)>=0?{x:a,y:i}:{x:i,y:a}}function _W(t){var e=t.state,n=t.options,s=t.name,o=n.offset,r=o===void 0?[0,0]:o,i=Ly.reduce(function(u,d){return u[d]=CW(d,e.rects,r),u},{}),a=i[e.placement],c=a.x,l=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[s]=i}const oT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_W};function SW(t){var e=t.state,n=t.name;e.modifiersData[n]=tT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Gy={name:"popperOffsets",enabled:!0,phase:"read",fn:SW,data:{}};function IW(t){return t==="x"?"y":"x"}function EW(t){var e=t.state,n=t.options,s=t.name,o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,v=Ic(e,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),g=No(e.placement),b=Sc(e.placement),x=!b,y=By(g),w=IW(y),C=e.modifiersData.popperOffsets,_=e.rects.reference,S=e.rects.popper,I=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,E=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(C){if(r){var P,z=y==="y"?Hn:Kn,G=y==="y"?bs:ys,M=y==="y"?"height":"width",R=C[y],D=R+v[z],j=R-v[G],ne=f?-S[M]/2:0,re=b===Yi?_[M]:S[M],de=b===Yi?-S[M]:-_[M],he=e.elements.arrow,ye=f&&he?My(he):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Q$(),ge=fe[z],q=fe[G],ue=Pl(0,_[M],ye[M]),le=x?_[M]/2-ne-ue-ge-E.mainAxis:re-ue-ge-E.mainAxis,pe=x?-_[M]/2+ne+ue+q+E.mainAxis:de+ue+q+E.mainAxis,_e=e.elements.arrow&&_u(e.elements.arrow),Re=_e?y==="y"?_e.clientTop||0:_e.clientLeft||0:0,N=(P=O==null?void 0:O[y])!=null?P:0,L=R+le-N-Re,K=R+pe-N,oe=Pl(f?lf(D,L):D,R,f?Wi(j,K):j);C[y]=oe,A[y]=oe-R}if(a){var se,k=y==="x"?Hn:Kn,T=y==="x"?bs:ys,U=C[w],Y=w==="y"?"height":"width",ee=U+v[k],ve=U-v[T],B=[Hn,Kn].indexOf(g)!==-1,Z=(se=O==null?void 0:O[w])!=null?se:0,Ce=B?ee:U-_[Y]-S[Y]-Z+E.altAxis,ie=B?U+_[Y]+S[Y]-Z-E.altAxis:ve,be=f&&B?sW(Ce,U,ie):Pl(f?Ce:ee,U,f?ie:ve);C[w]=be,A[w]=be-U}e.modifiersData[s]=A}}const rT={name:"preventOverflow",enabled:!0,phase:"main",fn:EW,requiresIfExists:["offset"]};function kW(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function $W(t){return t===xs(t)||!Ps(t)?jy(t):kW(t)}function TW(t){var e=t.getBoundingClientRect(),n=Cc(e.width)/t.offsetWidth||1,s=Cc(e.height)/t.offsetHeight||1;return n!==1||s!==1}function NW(t,e,n){n===void 0&&(n=!1);var s=Ps(e),o=Ps(e)&&TW(e),r=oi(e),i=_c(t,o,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((Mo(e)!=="body"||Wy(r))&&(a=$W(e)),Ps(e)?(c=_c(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):r&&(c.x=zy(r))),{x:i.left+a.scrollLeft-c.x,y:i.top+a.scrollTop-c.y,width:i.width,height:i.height}}function AW(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function o(r){n.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var c=e.get(a);c&&o(c)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||o(r)}),s}function RW(t){var e=AW(t);return K$.reduce(function(n,s){return n.concat(e.filter(function(o){return o.phase===s}))},[])}function DW(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function OW(t){var e=t.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var l_={placement:"bottom",modifiers:[],strategy:"absolute"};function u_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function gp(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,o=e.defaultOptions,r=o===void 0?l_:o;return function(a,c,l){l===void 0&&(l=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},l_,r),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(g){var b=typeof g=="function"?g(u.options):g;m(),u.options=Object.assign({},r,u.options,b),u.scrollParents={reference:Ji(a)?Ml(a):a.contextElement?Ml(a.contextElement):[],popper:Ml(c)};var x=RW(OW([].concat(s,u.options.modifiers)));return u.orderedModifiers=x.filter(function(y){return y.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var g=u.elements,b=g.reference,x=g.popper;if(u_(b,x)){u.rects={reference:NW(b,_u(x),u.options.strategy==="fixed"),popper:My(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var w=u.orderedModifiers[y],C=w.fn,_=w.options,S=_===void 0?{}:_,I=w.name;typeof C=="function"&&(u=C({state:u,options:S,name:I,instance:f})||u)}}}},update:DW(function(){return new Promise(function(v){f.forceUpdate(),v(u)})}),destroy:function(){m(),h=!0}};if(!u_(a,c))return f;f.setOptions(l).then(function(v){!h&&l.onFirstUpdate&&l.onFirstUpdate(v)});function p(){u.orderedModifiers.forEach(function(v){var g=v.name,b=v.options,x=b===void 0?{}:b,y=v.effect;if(typeof y=="function"){var w=y({state:u,name:g,instance:f,options:x}),C=function(){};d.push(w||C)}})}function m(){d.forEach(function(v){return v()}),d=[]}return f}}var LW=gp(),FW=[Uy,Gy,Vy,Py],PW=gp({defaultModifiers:FW}),MW=[Uy,Gy,Vy,Py,oT,nT,rT,Z$,sT],Hy=gp({defaultModifiers:MW});const iT=Object.freeze(Object.defineProperty({__proto__:null,afterMain:z$,afterRead:V$,afterWrite:H$,applyStyles:Py,arrow:Z$,auto:pp,basePlacements:jc,beforeMain:U$,beforeRead:M$,beforeWrite:W$,bottom:bs,clippingParents:F$,computeStyles:Vy,createPopper:Hy,createPopperBase:LW,createPopperLite:PW,detectOverflow:Ic,end:wc,eventListeners:Uy,flip:nT,hide:sT,left:Kn,main:j$,modifierPhases:K$,offset:oT,placements:Ly,popper:ja,popperGenerator:gp,popperOffsets:Gy,preventOverflow:rT,read:B$,reference:P$,right:ys,start:Yi,top:Hn,variationPlacements:Yv,viewport:Oy,write:G$},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Sr=new Map,Sg={set(t,e,n){Sr.has(t)||Sr.set(t,new Map);const s=Sr.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,n)},get(t,e){return Sr.has(t)&&Sr.get(t).get(e)||null},remove(t,e){if(!Sr.has(t))return;const n=Sr.get(t);n.delete(e),n.size===0&&Sr.delete(t)}},BW=1e6,VW=1e3,eb="transitionend",aT=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),UW=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),jW=t=>{do t+=Math.floor(Math.random()*BW);while(document.getElementById(t));return t},zW=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),o=Number.parseFloat(n);return!s&&!o?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*VW)},cT=t=>{t.dispatchEvent(new Event(eb))},ir=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Gr=t=>ir(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(aT(t)):null,zc=t=>{if(!ir(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const s=t.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return e},Hr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",lT=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?lT(t.parentNode):null},uf=()=>{},Su=t=>{t.offsetHeight},uT=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ig=[],WW=t=>{document.readyState==="loading"?(Ig.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ig)e()}),Ig.push(t)):t()},Bs=()=>document.documentElement.dir==="rtl",zs=t=>{WW(()=>{const e=uT();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}})},ts=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,dT=(t,e,n=!0)=>{if(!n){ts(t);return}const o=zW(e)+5;let r=!1;const i=({target:a})=>{a===e&&(r=!0,e.removeEventListener(eb,i),ts(t))};e.addEventListener(eb,i),setTimeout(()=>{r||cT(e)},o)},Ky=(t,e,n,s)=>{const o=t.length;let r=t.indexOf(e);return r===-1?!n&&s?t[o-1]:t[0]:(r+=n?1:-1,s&&(r=(r+o)%o),t[Math.max(0,Math.min(r,o-1))])},GW=/[^.]*(?=\..*)\.|.*/,HW=/\..*/,KW=/::\d+$/,Eg={};let d_=1;const hT={mouseenter:"mouseover",mouseleave:"mouseout"},qW=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function fT(t,e){return e&&`${e}::${d_++}`||t.uidEvent||d_++}function pT(t){const e=fT(t);return t.uidEvent=e,Eg[e]=Eg[e]||{},Eg[e]}function XW(t,e){return function n(s){return qy(s,{delegateTarget:t}),n.oneOff&&xe.off(t,s.type,e),e.apply(t,[s])}}function QW(t,e,n){return function s(o){const r=t.querySelectorAll(e);for(let{target:i}=o;i&&i!==this;i=i.parentNode)for(const a of r)if(a===i)return qy(o,{delegateTarget:i}),s.oneOff&&xe.off(t,o.type,e,n),n.apply(i,[o])}}function mT(t,e,n=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===n)}function gT(t,e,n){const s=typeof e=="string",o=s?n:e||n;let r=vT(t);return qW.has(r)||(r=t),[s,o,r]}function h_(t,e,n,s,o){if(typeof e!="string"||!t)return;let[r,i,a]=gT(e,n,s);e in hT&&(i=(p=>function(m){if(!m.relatedTarget||m.relatedTarget!==m.delegateTarget&&!m.delegateTarget.contains(m.relatedTarget))return p.call(this,m)})(i));const c=pT(t),l=c[a]||(c[a]={}),u=mT(l,i,r?n:null);if(u){u.oneOff=u.oneOff&&o;return}const d=fT(i,e.replace(GW,"")),h=r?QW(t,n,i):XW(t,i);h.delegationSelector=r?n:null,h.callable=i,h.oneOff=o,h.uidEvent=d,l[d]=h,t.addEventListener(a,h,r)}function tb(t,e,n,s,o){const r=mT(e[n],s,o);r&&(t.removeEventListener(n,r,!!o),delete e[n][r.uidEvent])}function YW(t,e,n,s){const o=e[n]||{};for(const[r,i]of Object.entries(o))r.includes(s)&&tb(t,e,n,i.callable,i.delegationSelector)}function vT(t){return t=t.replace(HW,""),hT[t]||t}const xe={on(t,e,n,s){h_(t,e,n,s,!1)},one(t,e,n,s){h_(t,e,n,s,!0)},off(t,e,n,s){if(typeof e!="string"||!t)return;const[o,r,i]=gT(e,n,s),a=i!==e,c=pT(t),l=c[i]||{},u=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(l).length)return;tb(t,c,i,r,o?n:null);return}if(u)for(const d of Object.keys(c))YW(t,c,d,e.slice(1));for(const[d,h]of Object.entries(l)){const f=d.replace(KW,"");(!a||e.includes(f))&&tb(t,c,i,h.callable,h.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const s=uT(),o=vT(e),r=e!==o;let i=null,a=!0,c=!0,l=!1;r&&s&&(i=s.Event(e,n),s(t).trigger(i),a=!i.isPropagationStopped(),c=!i.isImmediatePropagationStopped(),l=i.isDefaultPrevented());const u=qy(new Event(e,{bubbles:a,cancelable:!0}),n);return l&&u.preventDefault(),c&&t.dispatchEvent(u),u.defaultPrevented&&i&&i.preventDefault(),u}};function qy(t,e={}){for(const[n,s]of Object.entries(e))try{t[n]=s}catch{Object.defineProperty(t,n,{configurable:!0,get(){return s}})}return t}function f_(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function kg(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const ar={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${kg(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${kg(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let o=s.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=f_(t.dataset[s])}return e},getDataAttribute(t,e){return f_(t.getAttribute(`data-bs-${kg(e)}`))}};class Iu{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const s=ir(n)?ar.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...ir(n)?ar.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[s,o]of Object.entries(n)){const r=e[s],i=ir(r)?"element":UW(r);if(!new RegExp(o).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${i}" but expected type "${o}".`)}}}const JW="5.3.3";class po extends Iu{constructor(e,n){super(),e=Gr(e),e&&(this._element=e,this._config=this._getConfig(n),Sg.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Sg.remove(this._element,this.constructor.DATA_KEY),xe.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,s=!0){dT(e,n,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Sg.get(Gr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return JW}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const $g=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>aT(n)).join(","):null},Me={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let s=t.parentNode.closest(e);for(;s;)n.push(s),s=s.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Hr(n)&&zc(n))},getSelectorFromElement(t){const e=$g(t);return e&&Me.findOne(e)?e:null},getElementFromSelector(t){const e=$g(t);return e?Me.findOne(e):null},getMultipleElementsFromSelector(t){const e=$g(t);return e?Me.find(e):[]}},vp=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;xe.on(document,n,`[data-bs-dismiss="${s}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Hr(this))return;const r=Me.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(r)[e]()})},ZW="alert",eG="bs.alert",bT=`.${eG}`,tG=`close${bT}`,nG=`closed${bT}`,sG="fade",oG="show";class bp extends po{static get NAME(){return ZW}close(){if(xe.trigger(this._element,tG).defaultPrevented)return;this._element.classList.remove(oG);const n=this._element.classList.contains(sG);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),xe.trigger(this._element,nG),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=bp.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}vp(bp,"close");zs(bp);const rG="button",iG="bs.button",aG=`.${iG}`,cG=".data-api",lG="active",p_='[data-bs-toggle="button"]',uG=`click${aG}${cG}`;class yp extends po{static get NAME(){return rG}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(lG))}static jQueryInterface(e){return this.each(function(){const n=yp.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}xe.on(document,uG,p_,t=>{t.preventDefault();const e=t.target.closest(p_);yp.getOrCreateInstance(e).toggle()});zs(yp);const dG="swipe",Wc=".bs.swipe",hG=`touchstart${Wc}`,fG=`touchmove${Wc}`,pG=`touchend${Wc}`,mG=`pointerdown${Wc}`,gG=`pointerup${Wc}`,vG="touch",bG="pen",yG="pointer-event",xG=40,wG={endCallback:null,leftCallback:null,rightCallback:null},CG={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class df extends Iu{constructor(e,n){super(),this._element=e,!(!e||!df.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return wG}static get DefaultType(){return CG}static get NAME(){return dG}dispose(){xe.off(this._element,Wc)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),ts(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=xG)return;const n=e/this._deltaX;this._deltaX=0,n&&ts(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(xe.on(this._element,mG,e=>this._start(e)),xe.on(this._element,gG,e=>this._end(e)),this._element.classList.add(yG)):(xe.on(this._element,hG,e=>this._start(e)),xe.on(this._element,fG,e=>this._move(e)),xe.on(this._element,pG,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===bG||e.pointerType===vG)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _G="carousel",SG="bs.carousel",ri=`.${SG}`,yT=".data-api",IG="ArrowLeft",EG="ArrowRight",kG=500,hl="next",Oa="prev",za="left",Oh="right",$G=`slide${ri}`,Tg=`slid${ri}`,TG=`keydown${ri}`,NG=`mouseenter${ri}`,AG=`mouseleave${ri}`,RG=`dragstart${ri}`,DG=`load${ri}${yT}`,OG=`click${ri}${yT}`,xT="carousel",ch="active",LG="slide",FG="carousel-item-end",PG="carousel-item-start",MG="carousel-item-next",BG="carousel-item-prev",wT=".active",CT=".carousel-item",VG=wT+CT,UG=".carousel-item img",jG=".carousel-indicators",zG="[data-bs-slide], [data-bs-slide-to]",WG='[data-bs-ride="carousel"]',GG={[IG]:Oh,[EG]:za},HG={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},KG={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Eu extends po{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Me.findOne(jG,this._element),this._addEventListeners(),this._config.ride===xT&&this.cycle()}static get Default(){return HG}static get DefaultType(){return KG}static get NAME(){return _G}next(){this._slide(hl)}nextWhenVisible(){!document.hidden&&zc(this._element)&&this.next()}prev(){this._slide(Oa)}pause(){this._isSliding&&cT(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){xe.one(this._element,Tg,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){xe.one(this._element,Tg,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const o=e>s?hl:Oa;this._slide(o,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&xe.on(this._element,TG,e=>this._keydown(e)),this._config.pause==="hover"&&(xe.on(this._element,NG,()=>this.pause()),xe.on(this._element,AG,()=>this._maybeEnableCycle())),this._config.touch&&df.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Me.find(UG,this._element))xe.on(s,RG,o=>o.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(za)),rightCallback:()=>this._slide(this._directionToOrder(Oh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),kG+this._config.interval))}};this._swipeHelper=new df(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=GG[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Me.findOne(wT,this._indicatorsElement);n.classList.remove(ch),n.removeAttribute("aria-current");const s=Me.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(ch),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const s=this._getActive(),o=e===hl,r=n||Ky(this._getItems(),s,o,this._config.wrap);if(r===s)return;const i=this._getItemIndex(r),a=f=>xe.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:i});if(a($G).defaultPrevented||!s||!r)return;const l=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=r;const u=o?PG:FG,d=o?MG:BG;r.classList.add(d),Su(r),s.classList.add(u),r.classList.add(u);const h=()=>{r.classList.remove(u,d),r.classList.add(ch),s.classList.remove(ch,d,u),this._isSliding=!1,a(Tg)};this._queueCallback(h,s,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(LG)}_getActive(){return Me.findOne(VG,this._element)}_getItems(){return Me.find(CT,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Bs()?e===za?Oa:hl:e===za?hl:Oa}_orderToDirection(e){return Bs()?e===Oa?za:Oh:e===Oa?Oh:za}static jQueryInterface(e){return this.each(function(){const n=Eu.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(document,OG,zG,function(t){const e=Me.getElementFromSelector(this);if(!e||!e.classList.contains(xT))return;t.preventDefault();const n=Eu.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(ar.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});xe.on(window,DG,()=>{const t=Me.find(WG);for(const e of t)Eu.getOrCreateInstance(e)});zs(Eu);const qG="collapse",XG="bs.collapse",ku=`.${XG}`,QG=".data-api",YG=`show${ku}`,JG=`shown${ku}`,ZG=`hide${ku}`,eH=`hidden${ku}`,tH=`click${ku}${QG}`,Ng="show",Ya="collapse",lh="collapsing",nH="collapsed",sH=`:scope .${Ya} .${Ya}`,oH="collapse-horizontal",rH="width",iH="height",aH=".collapse.show, .collapse.collapsing",nb='[data-bs-toggle="collapse"]',cH={parent:null,toggle:!0},lH={parent:"(null|element)",toggle:"boolean"};class tu extends po{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=Me.find(nb);for(const o of s){const r=Me.getSelectorFromElement(o),i=Me.find(r).filter(a=>a===this._element);r!==null&&i.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return cH}static get DefaultType(){return lH}static get NAME(){return qG}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(aH).filter(a=>a!==this._element).map(a=>tu.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||xe.trigger(this._element,YG).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(Ya),this._element.classList.add(lh),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(lh),this._element.classList.add(Ya,Ng),this._element.style[s]="",xe.trigger(this._element,JG)},i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||xe.trigger(this._element,ZG).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Su(this._element),this._element.classList.add(lh),this._element.classList.remove(Ya,Ng);for(const o of this._triggerArray){const r=Me.getElementFromSelector(o);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(lh),this._element.classList.add(Ya),xe.trigger(this._element,eH)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ng)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Gr(e.parent),e}_getDimension(){return this._element.classList.contains(oH)?rH:iH}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(nb);for(const n of e){const s=Me.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=Me.find(sH,this._config.parent);return Me.find(e,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const s of e)s.classList.toggle(nH,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const s=tu.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}xe.on(document,tH,nb,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of Me.getMultipleElementsFromSelector(this))tu.getOrCreateInstance(e,{toggle:!1}).toggle()});zs(tu);const m_="dropdown",uH="bs.dropdown",va=`.${uH}`,Xy=".data-api",dH="Escape",g_="Tab",hH="ArrowUp",v_="ArrowDown",fH=2,pH=`hide${va}`,mH=`hidden${va}`,gH=`show${va}`,vH=`shown${va}`,_T=`click${va}${Xy}`,ST=`keydown${va}${Xy}`,bH=`keyup${va}${Xy}`,Wa="show",yH="dropup",xH="dropend",wH="dropstart",CH="dropup-center",_H="dropdown-center",Oi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SH=`${Oi}.${Wa}`,Lh=".dropdown-menu",IH=".navbar",EH=".navbar-nav",kH=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",$H=Bs()?"top-end":"top-start",TH=Bs()?"top-start":"top-end",NH=Bs()?"bottom-end":"bottom-start",AH=Bs()?"bottom-start":"bottom-end",RH=Bs()?"left-start":"right-start",DH=Bs()?"right-start":"left-start",OH="top",LH="bottom",FH={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},PH={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ao extends po{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Me.next(this._element,Lh)[0]||Me.prev(this._element,Lh)[0]||Me.findOne(Lh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return FH}static get DefaultType(){return PH}static get NAME(){return m_}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Hr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!xe.trigger(this._element,gH,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(EH))for(const s of[].concat(...document.body.children))xe.on(s,"mouseover",uf);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wa),this._element.classList.add(Wa),xe.trigger(this._element,vH,e)}}hide(){if(Hr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!xe.trigger(this._element,pH,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))xe.off(s,"mouseover",uf);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wa),this._element.classList.remove(Wa),this._element.setAttribute("aria-expanded","false"),ar.removeDataAttribute(this._menu,"popper"),xe.trigger(this._element,mH,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!ir(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${m_.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof iT>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:ir(this._config.reference)?e=Gr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Hy(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Wa)}_getPlacement(){const e=this._parent;if(e.classList.contains(xH))return RH;if(e.classList.contains(wH))return DH;if(e.classList.contains(CH))return OH;if(e.classList.contains(_H))return LH;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(yH)?n?TH:$H:n?AH:NH}_detectNavbar(){return this._element.closest(IH)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ar.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...ts(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const s=Me.find(kH,this._menu).filter(o=>zc(o));s.length&&Ky(s,n,e===v_,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Ao.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===fH||e.type==="keyup"&&e.key!==g_)return;const n=Me.find(SH);for(const s of n){const o=Ao.getInstance(s);if(!o||o._config.autoClose===!1)continue;const r=e.composedPath(),i=r.includes(o._menu);if(r.includes(o._element)||o._config.autoClose==="inside"&&!i||o._config.autoClose==="outside"&&i||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===g_||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:o._element};e.type==="click"&&(a.clickEvent=e),o._completeHide(a)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),s=e.key===dH,o=[hH,v_].includes(e.key);if(!o&&!s||n&&!s)return;e.preventDefault();const r=this.matches(Oi)?this:Me.prev(this,Oi)[0]||Me.next(this,Oi)[0]||Me.findOne(Oi,e.delegateTarget.parentNode),i=Ao.getOrCreateInstance(r);if(o){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),r.focus())}}xe.on(document,ST,Oi,Ao.dataApiKeydownHandler);xe.on(document,ST,Lh,Ao.dataApiKeydownHandler);xe.on(document,_T,Ao.clearMenus);xe.on(document,bH,Ao.clearMenus);xe.on(document,_T,Oi,function(t){t.preventDefault(),Ao.getOrCreateInstance(this).toggle()});zs(Ao);const IT="backdrop",MH="fade",b_="show",y_=`mousedown.bs.${IT}`,BH={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},VH={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ET extends Iu{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return BH}static get DefaultType(){return VH}static get NAME(){return IT}show(e){if(!this._config.isVisible){ts(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Su(n),n.classList.add(b_),this._emulateAnimation(()=>{ts(e)})}hide(e){if(!this._config.isVisible){ts(e);return}this._getElement().classList.remove(b_),this._emulateAnimation(()=>{this.dispose(),ts(e)})}dispose(){this._isAppended&&(xe.off(this._element,y_),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(MH),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Gr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),xe.on(e,y_,()=>{ts(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){dT(e,this._getElement(),this._config.isAnimated)}}const UH="focustrap",jH="bs.focustrap",hf=`.${jH}`,zH=`focusin${hf}`,WH=`keydown.tab${hf}`,GH="Tab",HH="forward",x_="backward",KH={autofocus:!0,trapElement:null},qH={autofocus:"boolean",trapElement:"element"};class kT extends Iu{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return KH}static get DefaultType(){return qH}static get NAME(){return UH}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),xe.off(document,hf),xe.on(document,zH,e=>this._handleFocusin(e)),xe.on(document,WH,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,xe.off(document,hf))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=Me.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===x_?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===GH&&(this._lastTabNavDirection=e.shiftKey?x_:HH)}}const w_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",C_=".sticky-top",uh="padding-right",__="margin-right";class sb{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,uh,n=>n+e),this._setElementAttributes(w_,uh,n=>n+e),this._setElementAttributes(C_,__,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,uh),this._resetElementAttributes(w_,uh),this._resetElementAttributes(C_,__)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,s){const o=this.getWidth(),r=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+o)return;this._saveInitialAttribute(i,n);const a=window.getComputedStyle(i).getPropertyValue(n);i.style.setProperty(n,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,n){const s=e.style.getPropertyValue(n);s&&ar.setDataAttribute(e,n,s)}_resetElementAttributes(e,n){const s=o=>{const r=ar.getDataAttribute(o,n);if(r===null){o.style.removeProperty(n);return}ar.removeDataAttribute(o,n),o.style.setProperty(n,r)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,n){if(ir(e)){n(e);return}for(const s of Me.find(e,this._element))n(s)}}const XH="modal",QH="bs.modal",Vs=`.${QH}`,YH=".data-api",JH="Escape",ZH=`hide${Vs}`,e6=`hidePrevented${Vs}`,$T=`hidden${Vs}`,TT=`show${Vs}`,t6=`shown${Vs}`,n6=`resize${Vs}`,s6=`click.dismiss${Vs}`,o6=`mousedown.dismiss${Vs}`,r6=`keydown.dismiss${Vs}`,i6=`click${Vs}${YH}`,S_="modal-open",a6="fade",I_="show",Ag="modal-static",c6=".modal.show",l6=".modal-dialog",u6=".modal-body",d6='[data-bs-toggle="modal"]',h6={backdrop:!0,focus:!0,keyboard:!0},f6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ec extends po{constructor(e,n){super(e,n),this._dialog=Me.findOne(l6,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sb,this._addEventListeners()}static get Default(){return h6}static get DefaultType(){return f6}static get NAME(){return XH}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||xe.trigger(this._element,TT,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(S_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||xe.trigger(this._element,ZH).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(I_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){xe.off(window,Vs),xe.off(this._dialog,Vs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ET({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new kT({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Me.findOne(u6,this._dialog);n&&(n.scrollTop=0),Su(this._element),this._element.classList.add(I_);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,xe.trigger(this._element,t6,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){xe.on(this._element,r6,e=>{if(e.key===JH){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),xe.on(window,n6,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),xe.on(this._element,o6,e=>{xe.one(this._element,s6,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(S_),this._resetAdjustments(),this._scrollBar.reset(),xe.trigger(this._element,$T)})}_isAnimated(){return this._element.classList.contains(a6)}_triggerBackdropTransition(){if(xe.trigger(this._element,e6).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Ag)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ag),this._queueCallback(()=>{this._element.classList.remove(Ag),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!e){const o=Bs()?"paddingLeft":"paddingRight";this._element.style[o]=`${n}px`}if(!s&&e){const o=Bs()?"paddingRight":"paddingLeft";this._element.style[o]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const s=Ec.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](n)}})}}xe.on(document,i6,d6,function(t){const e=Me.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),xe.one(e,TT,o=>{o.defaultPrevented||xe.one(e,$T,()=>{zc(this)&&this.focus()})});const n=Me.findOne(c6);n&&Ec.getInstance(n).hide(),Ec.getOrCreateInstance(e).toggle(this)});vp(Ec);zs(Ec);const p6="offcanvas",m6="bs.offcanvas",gr=`.${m6}`,NT=".data-api",g6=`load${gr}${NT}`,v6="Escape",E_="show",k_="showing",$_="hiding",b6="offcanvas-backdrop",AT=".offcanvas.show",y6=`show${gr}`,x6=`shown${gr}`,w6=`hide${gr}`,T_=`hidePrevented${gr}`,RT=`hidden${gr}`,C6=`resize${gr}`,_6=`click${gr}${NT}`,S6=`keydown.dismiss${gr}`,I6='[data-bs-toggle="offcanvas"]',E6={backdrop:!0,keyboard:!0,scroll:!1},k6={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Kr extends po{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return E6}static get DefaultType(){return k6}static get NAME(){return p6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||xe.trigger(this._element,y6,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sb().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(k_);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(E_),this._element.classList.remove(k_),xe.trigger(this._element,x6,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||xe.trigger(this._element,w6).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add($_),this._backdrop.hide();const n=()=>{this._element.classList.remove(E_,$_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sb().reset(),xe.trigger(this._element,RT)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){xe.trigger(this._element,T_);return}this.hide()},n=!!this._config.backdrop;return new ET({className:b6,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new kT({trapElement:this._element})}_addEventListeners(){xe.on(this._element,S6,e=>{if(e.key===v6){if(this._config.keyboard){this.hide();return}xe.trigger(this._element,T_)}})}static jQueryInterface(e){return this.each(function(){const n=Kr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}xe.on(document,_6,I6,function(t){const e=Me.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Hr(this))return;xe.one(e,RT,()=>{zc(this)&&this.focus()});const n=Me.findOne(AT);n&&n!==e&&Kr.getInstance(n).hide(),Kr.getOrCreateInstance(e).toggle(this)});xe.on(window,g6,()=>{for(const t of Me.find(AT))Kr.getOrCreateInstance(t).show()});xe.on(window,C6,()=>{for(const t of Me.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Kr.getOrCreateInstance(t).hide()});vp(Kr);zs(Kr);const $6=/^aria-[\w-]*$/i,DT={"*":["class","dir","id","lang","role",$6],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},T6=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),N6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,A6=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?T6.has(n)?!!N6.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function R6(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const o=new window.DOMParser().parseFromString(t,"text/html"),r=[].concat(...o.body.querySelectorAll("*"));for(const i of r){const a=i.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){i.remove();continue}const c=[].concat(...i.attributes),l=[].concat(e["*"]||[],e[a]||[]);for(const u of c)A6(u,l)||i.removeAttribute(u.nodeName)}return o.body.innerHTML}const D6="TemplateFactory",O6={allowList:DT,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},L6={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},F6={entry:"(string|element|function|null)",selector:"(string|element)"};class P6 extends Iu{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return O6}static get DefaultType(){return L6}static get NAME(){return D6}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,r]of Object.entries(this._config.content))this._setContent(e,r,o);const n=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,s]of Object.entries(e))super._typeCheckConfig({selector:n,entry:s},F6)}_setContent(e,n,s){const o=Me.findOne(s,e);if(o){if(n=this._resolvePossibleFunction(n),!n){o.remove();return}if(ir(n)){this._putElementInTemplate(Gr(n),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(n);return}o.textContent=n}}_maybeSanitize(e){return this._config.sanitize?R6(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return ts(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const M6="tooltip",B6=new Set(["sanitize","allowList","sanitizeFn"]),Rg="fade",V6="modal",dh="show",U6=".tooltip-inner",N_=`.${V6}`,A_="hide.bs.modal",fl="hover",Dg="focus",j6="click",z6="manual",W6="hide",G6="hidden",H6="show",K6="shown",q6="inserted",X6="click",Q6="focusin",Y6="focusout",J6="mouseenter",Z6="mouseleave",eK={AUTO:"auto",TOP:"top",RIGHT:Bs()?"left":"right",BOTTOM:"bottom",LEFT:Bs()?"right":"left"},tK={allowList:DT,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},nK={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Gc extends po{constructor(e,n){if(typeof iT>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return tK}static get DefaultType(){return nK}static get NAME(){return M6}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),xe.off(this._element.closest(N_),A_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=xe.trigger(this._element,this.constructor.eventName(H6)),s=(lT(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(o),xe.trigger(this._element,this.constructor.eventName(q6))),this._popper=this._createPopper(o),o.classList.add(dh),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))xe.on(a,"mouseover",uf);const i=()=>{xe.trigger(this._element,this.constructor.eventName(K6)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||xe.trigger(this._element,this.constructor.eventName(W6)).defaultPrevented)return;if(this._getTipElement().classList.remove(dh),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))xe.off(o,"mouseover",uf);this._activeTrigger[j6]=!1,this._activeTrigger[Dg]=!1,this._activeTrigger[fl]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),xe.trigger(this._element,this.constructor.eventName(G6)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Rg,dh),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=jW(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Rg),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new P6({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[U6]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Rg)}_isShown(){return this.tip&&this.tip.classList.contains(dh)}_createPopper(e){const n=ts(this._config.placement,[this,e,this._element]),s=eK[n.toUpperCase()];return Hy(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return ts(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...ts(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")xe.on(this._element,this.constructor.eventName(X6),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==z6){const s=n===fl?this.constructor.eventName(J6):this.constructor.eventName(Q6),o=n===fl?this.constructor.eventName(Z6):this.constructor.eventName(Y6);xe.on(this._element,s,this._config.selector,r=>{const i=this._initializeOnDelegatedTarget(r);i._activeTrigger[r.type==="focusin"?Dg:fl]=!0,i._enter()}),xe.on(this._element,o,this._config.selector,r=>{const i=this._initializeOnDelegatedTarget(r);i._activeTrigger[r.type==="focusout"?Dg:fl]=i._element.contains(r.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},xe.on(this._element.closest(N_),A_,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=ar.getDataAttributes(this._element);for(const s of Object.keys(n))B6.has(s)&&delete n[s];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Gr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(e[n]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Gc.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}zs(Gc);const sK="popover",oK=".popover-header",rK=".popover-body",iK={...Gc.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},aK={...Gc.DefaultType,content:"(null|string|element|function)"};class Qy extends Gc{static get Default(){return iK}static get DefaultType(){return aK}static get NAME(){return sK}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[oK]:this._getTitle(),[rK]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Qy.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}zs(Qy);const cK="scrollspy",lK="bs.scrollspy",Yy=`.${lK}`,uK=".data-api",dK=`activate${Yy}`,R_=`click${Yy}`,hK=`load${Yy}${uK}`,fK="dropdown-item",La="active",pK='[data-bs-spy="scroll"]',Og="[href]",mK=".nav, .list-group",D_=".nav-link",gK=".nav-item",vK=".list-group-item",bK=`${D_}, ${gK} > ${D_}, ${vK}`,yK=".dropdown",xK=".dropdown-toggle",wK={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},CK={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class xp extends po{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return wK}static get DefaultType(){return CK}static get NAME(){return cK}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Gr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(xe.off(this._config.target,R_),xe.on(this._config.target,R_,Og,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const s=this._rootElement||window,o=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:o,behavior:"smooth"});return}s.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=i=>this._targetLinks.get(`#${i.target.id}`),s=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(n(i))},o=(this._rootElement||document.documentElement).scrollTop,r=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(i));continue}const a=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(i),!o)return;continue}!r&&!a&&s(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Me.find(Og,this._config.target);for(const n of e){if(!n.hash||Hr(n))continue;const s=Me.findOne(decodeURI(n.hash),this._element);zc(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(La),this._activateParents(e),xe.trigger(this._element,dK,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(fK)){Me.findOne(xK,e.closest(yK)).classList.add(La);return}for(const n of Me.parents(e,mK))for(const s of Me.prev(n,bK))s.classList.add(La)}_clearActiveClass(e){e.classList.remove(La);const n=Me.find(`${Og}.${La}`,e);for(const s of n)s.classList.remove(La)}static jQueryInterface(e){return this.each(function(){const n=xp.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(window,hK,()=>{for(const t of Me.find(pK))xp.getOrCreateInstance(t)});zs(xp);const _K="tab",SK="bs.tab",ba=`.${SK}`,IK=`hide${ba}`,EK=`hidden${ba}`,kK=`show${ba}`,$K=`shown${ba}`,TK=`click${ba}`,NK=`keydown${ba}`,AK=`load${ba}`,RK="ArrowLeft",O_="ArrowRight",DK="ArrowUp",L_="ArrowDown",Lg="Home",F_="End",Li="active",P_="fade",Fg="show",OK="dropdown",OT=".dropdown-toggle",LK=".dropdown-menu",Pg=`:not(${OT})`,FK='.list-group, .nav, [role="tablist"]',PK=".nav-item, .list-group-item",MK=`.nav-link${Pg}, .list-group-item${Pg}, [role="tab"]${Pg}`,LT='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Mg=`${MK}, ${LT}`,BK=`.${Li}[data-bs-toggle="tab"], .${Li}[data-bs-toggle="pill"], .${Li}[data-bs-toggle="list"]`;class kc extends po{constructor(e){super(e),this._parent=this._element.closest(FK),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),xe.on(this._element,NK,n=>this._keydown(n)))}static get NAME(){return _K}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),s=n?xe.trigger(n,IK,{relatedTarget:e}):null;xe.trigger(e,kK,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Li),this._activate(Me.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Fg);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),xe.trigger(e,$K,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(P_))}_deactivate(e,n){if(!e)return;e.classList.remove(Li),e.blur(),this._deactivate(Me.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Fg);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),xe.trigger(e,EK,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(P_))}_keydown(e){if(![RK,O_,DK,L_,Lg,F_].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(o=>!Hr(o));let s;if([Lg,F_].includes(e.key))s=n[e.key===Lg?0:n.length-1];else{const o=[O_,L_].includes(e.key);s=Ky(n,e.target,o,!0)}s&&(s.focus({preventScroll:!0}),kc.getOrCreateInstance(s).show())}_getChildren(){return Me.find(Mg,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",n),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=Me.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(OK))return;const o=(r,i)=>{const a=Me.findOne(r,s);a&&a.classList.toggle(i,n)};o(OT,Li),o(LK,Fg),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,s){e.hasAttribute(n)||e.setAttribute(n,s)}_elemIsActive(e){return e.classList.contains(Li)}_getInnerElement(e){return e.matches(Mg)?e:Me.findOne(Mg,e)}_getOuterElement(e){return e.closest(PK)||e}static jQueryInterface(e){return this.each(function(){const n=kc.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(document,TK,LT,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Hr(this)&&kc.getOrCreateInstance(this).show()});xe.on(window,AK,()=>{for(const t of Me.find(BK))kc.getOrCreateInstance(t)});zs(kc);const VK="toast",UK="bs.toast",ii=`.${UK}`,jK=`mouseover${ii}`,zK=`mouseout${ii}`,WK=`focusin${ii}`,GK=`focusout${ii}`,HK=`hide${ii}`,KK=`hidden${ii}`,qK=`show${ii}`,XK=`shown${ii}`,QK="fade",M_="hide",hh="show",fh="showing",YK={animation:"boolean",autohide:"boolean",delay:"number"},JK={animation:!0,autohide:!0,delay:5e3};class wp extends po{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return JK}static get DefaultType(){return YK}static get NAME(){return VK}show(){if(xe.trigger(this._element,qK).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(QK);const n=()=>{this._element.classList.remove(fh),xe.trigger(this._element,XK),this._maybeScheduleHide()};this._element.classList.remove(M_),Su(this._element),this._element.classList.add(hh,fh),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||xe.trigger(this._element,HK).defaultPrevented)return;const n=()=>{this._element.classList.add(M_),this._element.classList.remove(fh,hh),xe.trigger(this._element,KK)};this._element.classList.add(fh),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(hh),super.dispose()}isShown(){return this._element.classList.contains(hh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){xe.on(this._element,jK,e=>this._onInteraction(e,!0)),xe.on(this._element,zK,e=>this._onInteraction(e,!1)),xe.on(this._element,WK,e=>this._onInteraction(e,!0)),xe.on(this._element,GK,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=wp.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}vp(wp);zs(wp);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var ZK=[{description:"жіноче ім'я любов",examples:["любов"],wordClass:"noun",gender:["feminine"],priority:6,applicationType:["givenName"],pattern:{find:"^любов$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"і"}}],dative:[{0:{action:"append",value:"і"}}],accusative:[],ablative:[{0:{action:"append",value:"'ю"}}],locative:[{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічі імена федір, сидір",examples:["федір","сидір"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:["givenName"],pattern:{find:"^(федір|сидір)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"слово суддя",examples:["суддя"],wordClass:"noun",gender:["masculine","feminine"],priority:6,applicationType:["familyName"],pattern:{find:"^суддя$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"слово рілля",examples:["рілля"],wordClass:"noun",gender:["masculine","feminine"],priority:6,applicationType:["familyName"],pattern:{find:"^рілля$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)вень",examples:["півень"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)вень$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}},{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}],vocative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)лець",examples:["стрілець","білець"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)лець$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ь"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ь"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(к|п|кр|пл|др|жив)іт",examples:["кіт","кріт"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(к|п|кр|пл|др|жив)іт$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -грім",examples:["грім"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"грім$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(дзвін|хрін)",examples:["дзвін"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(дзвін|хрін)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -батіг",examples:["батіг"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"батіг$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"зі"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"гу"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -сокіл",examples:["сокіл"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"сокіл$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -кріль",examples:["кріль"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"кріль$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}}]}},{description:"чоловічі імена ігор, лазар",examples:["ігор","лазар"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"^(ігор|лазар)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"слово сіль",examples:["сіль"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:["familyName"],pattern:{find:"^сіль$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],accusative:[],ablative:[{2:{action:"replace",value:"лю"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)(твердий приголосний)е(ц|н)ь",examples:["половець"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)е(ц|н)ь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(твердий приголосний)(твердий приголосний)е(ц|н)ь",examples:["жнець"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)е(ц|н)ь$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(рід|плід)",examples:["рід","плід"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(рід|плід)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / чоловічі прізвища на -ніс, без чергування",examples:["ханіс","деніс","маніс"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"^(б|в|г|ґ|д|дз|дж|ж|з|й|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)(а|е|є|и|і|ї|о|у|ю|я)ніс$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(з|яв)ір",examples:["дивозір","явір"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(з|яв|г)ір$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -орел",examples:["орел"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"орел$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ові"}},{0:{action:"replace",value:"л"},1:{action:"replace",value:"у"}}],accusative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ові"}}],vocative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -якір",examples:["якір"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"якір$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"я"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -бідь",examples:["лебідь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:".бідь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -мінь",examples:["кремінь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:".мінь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -сіль",examples:["кисіль"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"сіль$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -кінь",examples:["кінь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"кінь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -куліш",examples:["куліш"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"куліш$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"жіночий рід / на -(твердий приголосний)ька",examples:["ільницька","сумська"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)ька$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -ова",examples:["іванова"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"ова$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -іна",examples:["зеленкіна"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"іна$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)єць",examples:["заєць"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)єць$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"й"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"й"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -віз",examples:["узвіз"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"віз$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ків",examples:["яків"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:["givenName"],pattern:{find:".ків$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(к|р)іп",examples:["прокіп"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:".(к|р)іп$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -піп",examples:["прокіп"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"піп$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ніс",examples:["кривоніс"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ніс$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -віл",examples:["рябовіл"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"віл$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ріг",examples:["пиріг"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ріг$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"зі"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -хід",examples:["прихід"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"хід$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / жіночий рід / м'яка група / на -(голосний)ль",examples:["мішель","ніколь","cесіль"],wordClass:"noun",gender:["feminine"],priority:4,applicationType:["givenName"],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)ль$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"і"}}],dative:[{1:{action:"replace",value:"і"}}],accusative:[],ablative:[{0:{action:"replace",value:"лл"},1:{action:"replace",value:"ю"}}],locative:[{1:{action:"replace",value:"і"}}],vocative:[]}},{description:"друга відміна / жіночий рід / м'яка група / на (губний_приголосний)",examples:["зейнаб","руф"],wordClass:"noun",gender:["feminine"],priority:4,applicationType:["givenName"],pattern:{find:"(б|п|в|м|ф)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"і"}}],dative:[{0:{action:"append",value:"і"}}],accusative:[{0:{action:"append",value:"і"}}],ablative:[{0:{action:"append",value:"і"}}],locative:[{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"і"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ишин",examples:["ковалишин"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ишин$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(аго|ово)",examples:["живаго"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(аго|ово)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -тер",examples:["вітер","буймистер"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"[іс]тер$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -єгер",examples:["єгер"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"єгер$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -світ",examples:["світ"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"світ$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічі імена / на -(в|д)ір",examples:["дір","вір"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(в|д)ір$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічий рід / на -кій (помилкова транслітерація)",examples:["дідківській"],wordClass:"adjective",gender:["masculine"],priority:3,applicationType:["familyName"],pattern:{find:"кій$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ого"}}],dative:[{0:{action:"replace",value:"ому"}}],accusative:[{0:{action:"replace",value:"ого"}}],ablative:[{0:{action:"replace",value:"им"}}],locative:[{0:{action:"replace",value:"ому"}}],vocative:[]}},{description:"множина / на -их",examples:["седих"],wordClass:"adjective",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"их$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -га",examples:["нога"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"га$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -екар, -етар, -зар, -ухар",examples:["пекар","решетар","кожухар","кобзар"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"(екар|етар|зар|ухар)(?<!гузар)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -кіш",examples:["розкіш"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"кіш$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ьо",examples:["іваньо","кузьо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ьо$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"append",value:"м"}}],locative:[{0:{action:"replace",value:"ю"}}],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -ред",examples:["альфред"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ред$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / бусел",examples:["бусел"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"бусел$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -е[вмн]",examples:["артем","семен","лев"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"е[вмн]$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ер",examples:["ріхтер"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ер$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -пес",examples:["пес"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"пес$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ко",examples:["марко"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ко$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"у"}},{0:{action:"replace",value:"ові"}}],accusative:[{0:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"ові"}},{0:{action:"replace",value:"у"}}],vocative:[{0:{action:"replace",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ий",examples:["батий"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ий$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"єм"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -йо",examples:["йойо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"йо$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"append",value:"ві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"append",value:"м"}}],locative:[{0:{action:"append",value:"ві"}}],vocative:[]}},{description:"перша відміна / чоловічий рід / тверда група / на -бо",examples:["голембо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"бо$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[]}},{description:"чоловічий рід / на -ой, -ий",examples:["толстой","сухомлинський"],wordClass:"adjective",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"(ой|ий)$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ого"}}],dative:[{0:{action:"replace",value:"ому"}}],accusative:[{0:{action:"replace",value:"ого"}}],ablative:[{0:{action:"replace",value:"им"}}],locative:[{0:{action:"replace",value:"ому"}}],vocative:[]}},{description:"чоловічий рід / на -ій",examples:["заболотній"],wordClass:"adjective",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"ій$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ього"}}],dative:[{0:{action:"replace",value:"ьому"}}],accusative:[{0:{action:"replace",value:"ього"}}],ablative:[{0:{action:"replace",value:"ім"}}],locative:[{0:{action:"replace",value:"ьому"}}],vocative:[]}},{description:"жіночий рід / на -(твердий приголосний)а",examples:["зелена"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -(твердий приголосний)я",examples:["задорожня"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ьої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ьою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -ая",examples:["толстая"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"ая$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ую"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -яя",examples:["заболотняя"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"яя$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ьої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ьою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"чоловічі по батькові та прізвища / на -ич",examples:["валерійович","риндич"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["patronymicName","familyName"],pattern:{find:"ич$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"чоловічі по батькові та прізвища / на -іч",examples:["ілліч"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["patronymicName","familyName"],pattern:{find:"іч$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"жіночі по батькові / на -на",examples:["юріївна"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:["patronymicName"],pattern:{find:"на$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"жіночі імена / на -(твердий приголосний)я",examples:["неля"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:["givenName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"чоловічі імена / на -ня",examples:["женя"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["givenName"],pattern:{find:"ня$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ов, -ев (-єв), -ів (-їв), -ін (-їн)",examples:["павлов","нікітін"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"([оеє]в|[ії]в|[ії]н)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ин",examples:["гаршин"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"[^у][^с]ин$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -яр",examples:["скляр"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"яр$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / жіночий рід / тверда, м'яка група / на -(о|ь|твердий приголосний)",examples:["шевченко"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:[],pattern:{find:"(о|ь|(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ))$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -ок",examples:["бурячок"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"((?<=(а|е|є|и|і|ї|о|у|ю|я).*(а|е|є|и|і|ї|о|у|ю|я).*л)|(?<=(а|е|є|и|і|ї|о|у|ю|я).*[^л]))ок$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}},{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -е(тверда_прилосона)",examples:["марек"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"е(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(твердий приголосний)я",examples:["гмиря"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий, жіночий роди / м'яка група / на -(голосний|ь|й)я",examples:["юлія","майя"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"((а|е|є|и|і|ї|о|у|ю|я)|ь|й)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ї"}}],dative:[{0:{action:"replace",value:"ї"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"єю"}}],locative:[{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"є"}}]}},{description:"друга відміна / чоловічий рід / мішана група / на -(дж|ж|ч|ш)",examples:["януш","джордж"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(дж|ж|ч|ш)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / (свекор|цукор)",examples:["свекор","цукор"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(свекор|цукор)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / снігир",examples:["снігир"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"снігир$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"ю"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"ю"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -к",examples:["кузик","мисяк"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"к$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -х",examples:["кожух"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"х$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / соловей",examples:["соловей"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"соловей$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"replace",value:"'я"}}],dative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'єві"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}}],accusative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'я"}}],ablative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'єм"}}],locative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'ї"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'єві"}}],vocative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -ха",examples:["старуха"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ха$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"с"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"с"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}},{1:{action:"replace",value:"а"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -ка",examples:["прилука"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ка$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"ц"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ц"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}},{1:{action:"replace",value:"а"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / журавель",examples:["журавель"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"журавель$",modify:"(.{3})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ля"}}],dative:[{0:{action:"replace",value:"леві"}},{0:{action:"replace",value:"лю"}}],accusative:[{0:{action:"replace",value:"ля"}}],ablative:[{0:{action:"replace",value:"лем"}}],locative:[{0:{action:"replace",value:"лю"}},{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"лю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -(твердий приголосний)о",examples:["петро","павло"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)о$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"у"}}],accusative:[{0:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"ові"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"перша відміна / жіночий рід / тверда група / на -(г|ґ)а",examples:["ольга"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:[],pattern:{find:"(г|ґ)а$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -ле",examples:["поле"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ле$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"е"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[]}},{description:"перша відміна / чоловічий, жіночий роди / мішана група / на -а",examples:["мойша"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"(дж|ж|ч|ш|щ)а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(твердий приголосний)",examples:["олександр"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -а",examples:["анна"],wordClass:"noun",gender:["masculine","feminine"],priority:1,applicationType:[],pattern:{find:"а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -й",examples:["валерій"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"й$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"єві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"єм"}}],locative:[{0:{action:"replace",value:"єві"}},{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ь",examples:["петрунь"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"ь$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"жіночі імена / на -('|`)я",examples:["дар'я","мар'я"],wordClass:"noun",gender:["feminine"],priority:1,applicationType:["givenName"],pattern:{find:"('|`)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ї"}}],dative:[{0:{action:"replace",value:"ї"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"єю"}}],locative:[{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"є"}}]}}];/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var ff;(function(t){t[t.а=1]="а",t[t.б=2]="б",t[t.в=3]="в",t[t.г=4]="г",t[t.ґ=5]="ґ",t[t.д=6]="д",t[t.е=7]="е",t[t.є=8]="є",t[t.ж=9]="ж",t[t.з=10]="з",t[t.и=11]="и",t[t.і=12]="і",t[t.ї=13]="ї",t[t.й=14]="й",t[t.к=15]="к",t[t.л=16]="л",t[t.м=17]="м",t[t.н=18]="н",t[t.о=19]="о",t[t.п=20]="п",t[t.р=21]="р",t[t.с=22]="с",t[t.т=23]="т",t[t.у=24]="у",t[t.ф=25]="ф",t[t.х=26]="х",t[t.ц=27]="ц",t[t.ч=28]="ч",t[t.ш=29]="ш",t[t.щ=30]="щ",t[t.ь=31]="ь",t[t.ю=32]="ю",t[t.я=33]="я"})(ff||(ff={}));Object.keys(ff).length/2;/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var Ja;(function(t){t.NOUN="noun",t.ADJECTIVE="adjective"})(Ja||(Ja={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var B_;(function(t){t.NOMINATIVE="nominative",t.GENITIVE="genitive",t.DATIVE="dative",t.ACCUSATIVE="accusative",t.ABLATIVE="ablative",t.LOCATIVE="locative",t.VOCATIVE="vocative"})(B_||(B_={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var pf;(function(t){t.MASCULINE="masculine",t.FEMININE="feminine"})(pf||(pf={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */function eq(t,e){let n="";for(let s=0;s<e.length;s+=1){const o=t[s]||t[t.length-1],r=e[s];nq(o)?n+=r.toLowerCase():tq(o)?n+=r.toUpperCase():n+=r}return n}function tq(t,e=0){const n=t.charAt(e);return n===n.toUpperCase()}function nq(t,e=0){const n=t.charAt(e);return n===n.toLowerCase()}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class sq{constructor(e){this.command=e}exec(e){return e+this.command.value}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var mf;(function(t){t.REPLACE="replace",t.APPEND="append"})(mf||(mf={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class oq{constructor(e){this.command=e}exec(){return this.command.value}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class rq{make(e){switch(e.action){case mf.APPEND:return new sq(e);case mf.REPLACE:return new oq(e);default:throw new TypeError(`Invalid command action: ${e.action}.`)}}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */function iq(t){const n=new RegExp(`${t.toString()}|`).exec("");return n==null?0:n.length-1}class aq{constructor(e){this.rule=e,this.commandRunnerFactory=new rq}inflect(e,n){const[s]=this.rule.grammaticalCases[n];if(s){const o=new RegExp(this.rule.pattern.modify,"gi"),r=e.replace(o,(i,...a)=>{let c="";const l=iq(this.rule.pattern.modify);for(let u=0;u<l;u+=1){let d=a[u];const h=s[u];h!=null&&(d=this.commandRunnerFactory.make(h).exec(d)),c+=d}return c});return eq(e,r)}return e}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class cq{constructor(e){this.declensionRules=[...e].sort((n,s)=>s.priority-n.priority)}async inflect(e,n){const[s]=await this.findMatchingRules(e,n);return s==null?e:new aq(s).inflect(e,n.grammaticalCase)}async findMatchingRules(e,n){return this.declensionRules.filter(o=>o.gender.includes(n.gender)).filter(o=>!n.applicationType||o.applicationType.length===0||o.applicationType.includes(n.applicationType)).filter(o=>new RegExp(o.pattern.find,"gi").test(e)).filter(o=>!n.wordClass||o.wordClass===n.wordClass).filter((o,r,i)=>!n.customRuleFilter||n.customRuleFilter(o,r,i))}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Cp=new cq(ZK);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class lq{constructor(e,n,s){this.givenNameInflector=e,this.patronymicNameInflector=n,this.familyNameInflector=s}async inflect(e,n,s){const o={};return e.givenName!=null&&(o.givenName=await this.givenNameInflector.inflect(e.givenName,n,s)),e.patronymicName!=null&&(o.patronymicName=await this.patronymicNameInflector.inflect(e.patronymicName,n,s)),e.familyName!=null&&(o.familyName=await this.familyNameInflector.inflect(e.familyName,n,s)),o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uq=1e-7,dq=1e-4;class FT{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Jy{refCount(e){return Zn("refCount")}incRef(e){return Zn("incRef")}timerAvailable(){return!0}time(e){return Zn("time")}read(e){return Zn("read")}readSync(e){return Zn("readSync")}readToGPU(e,n){return Zn("readToGPU")}numDataIds(){return Zn("numDataIds")}disposeData(e,n){return Zn("disposeData")}write(e,n,s){return Zn("write")}move(e,n,s,o,r){return Zn("move")}createTensorFromGPUData(e,n,s){return Zn("createTensorFromGPUData")}memory(){return Zn("memory")}floatPrecision(){return Zn("floatPrecision")}epsilon(){return this.floatPrecision()===32?uq:dq}dispose(){return Zn("dispose")}}function Zn(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Ga(t,e,n)}function Zi(t,e,n){return Math.max(t,Math.min(e,n))}function Zy(t){return t%2===0?t:t+1}function Ga(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function fq(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function $(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function e0(t,e,n=""){$(at(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function PT(t){$(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ce(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function at(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $c(t){return t%1===0}function ob(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function cc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function V_(t,e=o=>0,n,s){return new Promise((o,r)=>{let i=0;const a=()=>{if(t()){o();return}i++;const c=e(i);if(n!=null&&i>=n){r();return}s!=null?s(a,c):setTimeout(a,c)};a()})}function MT(t,e){let n=1,s=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)n*=t[r];else if(t[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(t[r]<0)throw Error(`Shapes can not be < 0. Found ${t[r]} at dim ${r}`);if(s===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[s]=e/n,o}function qe(t,e){const n=e.length;return t=t==null?e.map((s,o)=>o):[].concat(t),$(t.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),$(t.every(s=>$c(s)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(s=>s<0?n+s:s)}function ai(t,e){const n=[],s=[],o=e!=null&&Array.isArray(e)&&e.length===0,r=e==null||o?null:qe(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(r!=null){if(r[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(r[i]==null||r[i]>a)&&t[a]===1&&(n.push(t[a]),s.push(a)),r[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),s.push(a))}return{newShape:n,keptDims:s}}function wn(t,e){return Ft(t,e)}function Ft(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function pq(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${e} being uploaded contains ${s}.`)}}function mq(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function BT(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function gf(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function gq(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function $u(t){return typeof t=="string"||t instanceof String}function vq(t){return typeof t=="boolean"}function rb(t){return typeof t=="number"}function Hc(t){return Array.isArray(t)?Hc(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":rb(t)?"float32":$u(t)?"string":vq(t)?"bool":"float32"}function ib(t){return!!(t&&t.constructor&&t.call&&t.apply)}function ab(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function De(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let s=e-3;s>=0;--s)n[s]=n[s+1]*t[s+1];return n}function VT(t,e,n,s=!1){const o=new Array;if(e.length===1){const r=e[0]*(s?2:1);for(let i=0;i<r;i++)o[i]=n[t+i]}else{const r=e[0],i=e.slice(1),a=i.reduce((c,l)=>c*l)*(s?2:1);for(let c=0;c<r;c++)o[c]=VT(t+c*a,i,n,s)}return o}function no(t,e,n=!1){if(t.length===0)return e[0];const s=t.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return VT(0,t,e,n)}function bq(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function t0(t,e){const n=Cn(t,e);for(let s=0;s<n.length;s++)n[s]=1;return n}function Cn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function UT(t,e){const n=t.reduce((s,o)=>s*o,1);if(e==null||e==="float32")return no(t,new Float32Array(n));if(e==="int32")return no(t,new Int32Array(n));if(e==="bool")return no(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function vr(t){t.forEach(e=>{$(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Ro(t,e,n){if(e===0)return 0;if(e===1)return t[0];let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=n[o]*t[o];return s}function Kc(t,e,n){if(e===0)return[];if(e===1)return[t];const s=new Array(e);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(t/n[o]),t-=s[o]*n[o];return s[s.length-1]=t,s}function n0(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_="tfjsflags";class yq{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xq,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,s){if(this.flagRegistry[e]={evaluationFn:n,setHook:s},this.urlFlags[e]!=null){const o=this.urlFlags[e];te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(n0(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);U_ in e&&e[U_].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=Cq(o,r)})}}function xq(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(wq(e,s[0],s[1]),s.join("="))),e}function wq(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Cq(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function te(){return jT}let jT=null;function _q(t){jT=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Bg;function zT(){if(Bg==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Bg=t}return Bg}function Sq(){const t=zT();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function s0(t,e){const n=Sq();if(n.has(t))return n.get(t);{const s=e();return n.set(t,s),n.get(t)}}const _p="Abs",Tu="Acos",Nu="Acosh",qc="Add",o0="AddN",r0="All",i0="Any",Sp="ArgMax",Ip="ArgMin",Au="Asin",Ru="Asinh",Du="Atan",Ou="Atanh",Lu="Atan2",Ep="AvgPool",a0="AvgPoolGrad",kp="AvgPool3D",c0="AvgPool3DGrad",$p="BatchMatMul",Tp="BatchToSpaceND",l0="Bincount",u0="BitwiseAnd",Iq="BroadcastTo",WT="BroadcastArgs",Fu="Cast",Pu="Ceil",Mu="ClipByValue",d0="Complex",Np="ComplexAbs",Ap="Concat",Rp="Conv2D",h0="Conv2DBackpropFilter",Dp="Conv2DBackpropInput",Op="Conv3D",f0="Conv3DBackpropFilterV2",p0="Conv3DBackpropInputV2",Bu="Cos",Vu="Cosh",m0="Cumprod",Lp="Cumsum",g0="CropAndResize",v0="DenseBincount",b0="DepthToSpace",Fp="DepthwiseConv2dNative",y0="DepthwiseConv2dNativeBackpropFilter",x0="DepthwiseConv2dNativeBackpropInput",GT="Diag",Pp="Dilation2D",cb="Dilation2DBackpropInput",lb="Dilation2DBackpropFilter",Eq="Draw",Uu="RealDiv",w0="Einsum",ju="Elu",C0="EluGrad",zu="Erf",Mp="Equal",Wu="Exp",Bp="ExpandDims",Gu="Expm1",_0="FFT",S0="Fill",I0="FlipLeftRight",Hu="Floor",Ku="FloorDiv",Vp="FusedBatchNorm",Up="GatherV2",HT="GatherNd",jp="Greater",qu="GreaterEqual",Xu="Identity",E0="IFFT",k0="Imag",Qu="IsFinite",Yu="IsInf",Ju="IsNan",zp="LeakyRelu",Wp="Less",Gp="LessEqual",KT="LinSpace",Zu="Log",ed="Log1p",Hp="LogicalAnd",Kp="LogicalNot",qp="LogicalOr",kq="LogSoftmax",Xp="LRN",$0="LRNGrad",Qp="Max",td="Maximum",Yp="MaxPool",T0="MaxPoolGrad",Jp="MaxPool3D",N0="MaxPool3DGrad",qT="MaxPoolWithArgmax",Zp="Mean",em="Min",nd="Minimum",tm="MirrorPad",sd="Mod",XT="Multinomial",od="Multiply",nm="Neg",sm="NotEqual",A0="NonMaxSuppressionV3",R0="NonMaxSuppressionV4",D0="NonMaxSuppressionV5",om="OnesLike",rm="OneHot",im="Pack",am="PadV2",rd="Pow",cm="Prelu",lm="Prod",QT="RaggedGather",YT="RaggedRange",JT="RaggedTensorToTensor",O0="Range",L0="Real",id="Reciprocal",ad="Relu",um="Reshape",dm="ResizeNearestNeighbor",F0="ResizeNearestNeighborGrad",hm="ResizeBilinear",P0="ResizeBilinearGrad",cd="Relu6",fm="Reverse",ld="Round",ud="Rsqrt",ZT="ScatterNd",eN="TensorScatterUpdate",tN="SearchSorted",pm="Select",dd="Selu",mm="Slice",hd="Sin",fd="Sinh",pd="Sign",md="Sigmoid",gd="Softplus",vd="Sqrt",gm="Sum",vm="SpaceToBatchND",bm="SplitV",ym="Softmax",nN="SparseFillEmptyRows",sN="SparseReshape",oN="SparseSegmentMean",rN="SparseSegmentSum",iN="SparseToDense",bd="SquaredDifference",M0="Square",B0="StaticRegexReplace",V0="StridedSlice",aN="StringNGrams",cN="StringSplit",lN="StringToHashBucketFast",yd="Sub",xd="Tan",wd="Tanh",Cd="Tile",U0="TopK",j0="Transform",lc="Transpose",z0="Unique",xm="Unpack",wm="UnsortedSegmentSum",Cm="ZerosLike",_d="Step",$q="FromPixels",W0="RotateWithOffset",vf="_FusedMatMul",bf="FusedConv2D",uN="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ms(...t){te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(...t)}function Tq(...t){te().getBool("IS_TEST")||te().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yf=s0("kernelRegistry",()=>new Map),ub=s0("gradRegistry",()=>new Map);function j_(t,e){const n=hN(t,e);return yf.get(n)}function z_(t){return ub.get(t)}function W_(t){const e=yf.entries(),n=[];for(;;){const{done:s,value:o}=e.next();if(s)break;const[r,i]=o,[a]=r.split("_");a===t&&n.push(i)}return n}function dN(t){const{kernelName:e,backendName:n}=t,s=hN(e,n);yf.has(s)&&ms(`The kernel '${e}' for backend '${n}' is already registered`),yf.set(s,t)}function Nq(t){const{kernelName:e}=t;ub.has(e)&&te().getBool("DEBUG")&&ms(`Overriding the gradient for '${e}'`),ub.set(e,t)}function hN(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fN(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var pN=It,As=null;try{As=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function It(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}It.prototype.__isLong__;Object.defineProperty(It.prototype,"__isLong__",{value:!0});function ds(t){return(t&&t.__isLong__)===!0}It.isLong=ds;var G_={},H_={};function ya(t,e){var n,s,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(s=H_[t],s)?s:(n=Et(t,(t|0)<0?-1:0,!0),o&&(H_[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(s=G_[t],s)?s:(n=Et(t,t<0?-1:0,!1),o&&(G_[t]=n),n))}It.fromInt=ya;function Rs(t,e){if(isNaN(t))return e?Fi:Ds;if(e){if(t<0)return Fi;if(t>=mN)return bN}else{if(t<=-q_)return os;if(t+1>=q_)return vN}return t<0?Rs(-t,e).neg():Et(t%Tc|0,t/Tc|0,e)}It.fromNumber=Rs;function Et(t,e,n){return new It(t,e,n)}It.fromBits=Et;var xf=Math.pow;function G0(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ds;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return G0(t.substring(1),e,n).neg();for(var o=Rs(xf(n,8)),r=Ds,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+a),n);if(a<8){var l=Rs(xf(n,a));r=r.mul(l).add(Rs(c))}else r=r.mul(o),r=r.add(Rs(c))}return r.unsigned=e,r}It.fromString=G0;function mo(t,e){return typeof t=="number"?Rs(t,e):typeof t=="string"?G0(t,e):Et(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}It.fromValue=mo;var K_=65536,Aq=1<<24,Tc=K_*K_,mN=Tc*Tc,q_=mN/2,X_=ya(Aq),Ds=ya(0);It.ZERO=Ds;var Fi=ya(0,!0);It.UZERO=Fi;var Za=ya(1);It.ONE=Za;var gN=ya(1,!0);It.UONE=gN;var db=ya(-1);It.NEG_ONE=db;var vN=Et(-1,2147483647,!1);It.MAX_VALUE=vN;var bN=Et(-1,-1,!0);It.MAX_UNSIGNED_VALUE=bN;var os=Et(0,-2147483648,!1);It.MIN_VALUE=os;var Ee=It.prototype;Ee.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ee.toNumber=function(){return this.unsigned?(this.high>>>0)*Tc+(this.low>>>0):this.high*Tc+(this.low>>>0)};Ee.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(os)){var n=Rs(e),s=this.div(n),o=s.mul(n).sub(this);return s.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var r=Rs(xf(e,6),this.unsigned),i=this,a="";;){var c=i.div(r),l=i.sub(c.mul(r)).toInt()>>>0,u=l.toString(e);if(i=c,i.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Ee.getHighBits=function(){return this.high};Ee.getHighBitsUnsigned=function(){return this.high>>>0};Ee.getLowBits=function(){return this.low};Ee.getLowBitsUnsigned=function(){return this.low>>>0};Ee.getNumBitsAbs=function(){if(this.isNegative())return this.eq(os)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Ee.isZero=function(){return this.high===0&&this.low===0};Ee.eqz=Ee.isZero;Ee.isNegative=function(){return!this.unsigned&&this.high<0};Ee.isPositive=function(){return this.unsigned||this.high>=0};Ee.isOdd=function(){return(this.low&1)===1};Ee.isEven=function(){return(this.low&1)===0};Ee.equals=function(e){return ds(e)||(e=mo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Ee.eq=Ee.equals;Ee.notEquals=function(e){return!this.eq(e)};Ee.neq=Ee.notEquals;Ee.ne=Ee.notEquals;Ee.lessThan=function(e){return this.comp(e)<0};Ee.lt=Ee.lessThan;Ee.lessThanOrEqual=function(e){return this.comp(e)<=0};Ee.lte=Ee.lessThanOrEqual;Ee.le=Ee.lessThanOrEqual;Ee.greaterThan=function(e){return this.comp(e)>0};Ee.gt=Ee.greaterThan;Ee.greaterThanOrEqual=function(e){return this.comp(e)>=0};Ee.gte=Ee.greaterThanOrEqual;Ee.ge=Ee.greaterThanOrEqual;Ee.compare=function(e){if(ds(e)||(e=mo(e)),this.eq(e))return 0;var n=this.isNegative(),s=e.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Ee.comp=Ee.compare;Ee.negate=function(){return!this.unsigned&&this.eq(os)?os:this.not().add(Za)};Ee.neg=Ee.negate;Ee.add=function(e){ds(e)||(e=mo(e));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,i=e.high>>>16,a=e.high&65535,c=e.low>>>16,l=e.low&65535,u=0,d=0,h=0,f=0;return f+=r+l,h+=f>>>16,f&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=s+a,u+=d>>>16,d&=65535,u+=n+i,u&=65535,Et(h<<16|f,u<<16|d,this.unsigned)};Ee.subtract=function(e){return ds(e)||(e=mo(e)),this.add(e.neg())};Ee.sub=Ee.subtract;Ee.multiply=function(e){if(this.isZero())return Ds;if(ds(e)||(e=mo(e)),As){var n=As.mul(this.low,this.high,e.low,e.high);return Et(n,As.get_high(),this.unsigned)}if(e.isZero())return Ds;if(this.eq(os))return e.isOdd()?os:Ds;if(e.eq(os))return this.isOdd()?os:Ds;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(X_)&&e.lt(X_))return Rs(this.toNumber()*e.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,a=e.high>>>16,c=e.high&65535,l=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,p=0;return p+=i*u,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,h+=o*u,d+=h>>>16,h&=65535,h+=r*l,d+=h>>>16,h&=65535,h+=i*c,d+=h>>>16,h&=65535,d+=s*u+o*l+r*c+i*a,d&=65535,Et(f<<16|p,d<<16|h,this.unsigned)};Ee.mul=Ee.multiply;Ee.divide=function(e){if(ds(e)||(e=mo(e)),e.isZero())throw Error("division by zero");if(As){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?As.div_u:As.div_s)(this.low,this.high,e.low,e.high);return Et(n,As.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Fi:Ds;var s,o,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Fi;if(e.gt(this.shru(1)))return gN;r=Fi}else{if(this.eq(os)){if(e.eq(Za)||e.eq(db))return os;if(e.eq(os))return Za;var i=this.shr(1);return s=i.div(e).shl(1),s.eq(Ds)?e.isNegative()?Za:db:(o=this.sub(e.mul(s)),r=s.add(o.div(e)),r)}else if(e.eq(os))return this.unsigned?Fi:Ds;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Ds}for(o=this;o.gte(e);){s=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),c=a<=48?1:xf(2,a-48),l=Rs(s),u=l.mul(e);u.isNegative()||u.gt(o);)s-=c,l=Rs(s,this.unsigned),u=l.mul(e);l.isZero()&&(l=Za),r=r.add(l),o=o.sub(u)}return r};Ee.div=Ee.divide;Ee.modulo=function(e){if(ds(e)||(e=mo(e)),As){var n=(this.unsigned?As.rem_u:As.rem_s)(this.low,this.high,e.low,e.high);return Et(n,As.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Ee.mod=Ee.modulo;Ee.rem=Ee.modulo;Ee.not=function(){return Et(~this.low,~this.high,this.unsigned)};Ee.and=function(e){return ds(e)||(e=mo(e)),Et(this.low&e.low,this.high&e.high,this.unsigned)};Ee.or=function(e){return ds(e)||(e=mo(e)),Et(this.low|e.low,this.high|e.high,this.unsigned)};Ee.xor=function(e){return ds(e)||(e=mo(e)),Et(this.low^e.low,this.high^e.high,this.unsigned)};Ee.shiftLeft=function(e){return ds(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Et(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Et(0,this.low<<e-32,this.unsigned)};Ee.shl=Ee.shiftLeft;Ee.shiftRight=function(e){return ds(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Et(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Et(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Ee.shr=Ee.shiftRight;Ee.shiftRightUnsigned=function(e){if(ds(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var s=this.low;return Et(s>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Et(n,0,this.unsigned):Et(n>>>e-32,0,this.unsigned)};Ee.shru=Ee.shiftRightUnsigned;Ee.shr_u=Ee.shiftRightUnsigned;Ee.toSigned=function(){return this.unsigned?Et(this.low,this.high,!1):this};Ee.toUnsigned=function(){return this.unsigned?this:Et(this.low,this.high,!0)};Ee.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Ee.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Ee.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};It.fromBytes=function(e,n,s){return s?It.fromBytesLE(e,n):It.fromBytesBE(e,n)};It.fromBytesLE=function(e,n){return new It(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};It.fromBytesBE=function(e,n){return new It(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const yN=t$(pN),Rq=kL({__proto__:null,default:yN},[pN]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ni=yN||Rq;function _m(t){return Ni.fromString(t,!0,16)}const xN=_m("c3a5c85c97cb3127"),ki=_m("b492b66fbe98f273"),An=_m("9ae16a3b2f90404f");function hb(t){return t.xor(t.shru(47))}function wN(t,e,n){const s=t.slice(e,e+n);return Ni.fromBytes(Array.from(s),!0,!0)}function yt(t,e){return wN(t,e,8)}function Q_(t,e){return wN(t,e,4)}function nn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Vr(t,e,n=_m("9ddfea08eb382d69")){let s=t.xor(e).mul(n);s=s.xor(s.shru(47));let o=e.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function Dq(t,e,n,s,o,r){o=o.add(t),r=nn(r.add(o).add(s),21);const i=o;return o=o.add(e),o=o.add(n),r=r.add(nn(o,44)),[o.add(s),r.add(i)]}function ph(t,e,n,s){return Dq(yt(t,e),yt(t,e+8),yt(t,e+16),yt(t,e+24),n,s)}function Oq(t,e=t.length){if(e>=8){const n=An.add(e*2),s=yt(t,0).add(An),o=yt(t,e-8),r=nn(o,37).mul(n).add(s),i=nn(s,25).add(o).mul(n);return Vr(r,i,n)}if(e>=4){const n=An.add(e*2),s=Q_(t,0);return Vr(s.shl(3).add(e),Q_(t,e-4),n)}if(e>0){const n=t[0],s=t[e>>1],o=t[e-1],r=n+(s<<8),i=e+(o<<2);return hb(An.mul(r).xor(xN.mul(i))).mul(An)}return An}function Lq(t,e=t.length){const n=An.add(e*2),s=yt(t,0).mul(ki),o=yt(t,8),r=yt(t,e-8).mul(n),i=yt(t,e-16).mul(An);return Vr(nn(s.add(o),43).add(nn(r,30)).add(i),s.add(nn(o.add(An),18)).add(r),n)}function Fq(t,e=t.length){const n=An.add(e*2),s=yt(t,0).mul(An),o=yt(t,8),r=yt(t,e-8).mul(n),i=yt(t,e-16).mul(An),a=nn(s.add(o),43).add(nn(r,30)).add(i),c=Vr(a,s.add(nn(o.add(An),18)).add(r),n),l=yt(t,16).mul(n),u=yt(t,24),d=a.add(yt(t,e-32)).mul(n),h=c.add(yt(t,e-24)).mul(n);return Vr(nn(l.add(u),43).add(nn(d,30)).add(h),l.add(nn(u.add(s),18)).add(d),n)}function Pq(t,e=t.length){const n=Ni.fromNumber(81,!0);if(e<=32)return e<=16?Oq(t,e):Lq(t,e);if(e<=64)return Fq(t,e);let s=n,o=n.mul(ki).add(113),r=hb(o.mul(An).add(113)).mul(An),i=[Ni.UZERO,Ni.UZERO],a=[Ni.UZERO,Ni.UZERO];s=s.mul(An).add(yt(t,0));let c=0;const l=(e-1>>6)*64,u=l+(e-1&63)-63;do s=nn(s.add(o).add(i[0]).add(yt(t,c+8)),37).mul(ki),o=nn(o.add(i[1]).add(yt(t,c+48)),42).mul(ki),s=s.xor(a[1]),o=o.add(i[0]).add(yt(t,c+40)),r=nn(r.add(a[0]),33).mul(ki),i=ph(t,c,i[1].mul(ki),s.add(a[0])),a=ph(t,c+32,r.add(a[1]),o.add(yt(t,c+16))),[r,s]=[s,r],c+=64;while(c!==l);const d=ki.add(r.and(255).shl(1));return c=u,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=nn(s.add(o).add(i[0]).add(yt(t,c+8)),37).mul(d),o=nn(o.add(i[1]).add(yt(t,c+48)),42).mul(d),s=s.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(yt(t,c+40))),r=nn(r.add(a[0]),33).mul(d),i=ph(t,c,i[1].mul(d),s.add(a[0])),a=ph(t,c+32,r.add(a[1]),o.add(yt(t,c+16))),[r,s]=[s,r],Vr(Vr(i[0],a[0],d).add(hb(o).mul(xN)).add(r),Vr(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t,e){return e==="string"?Ur(t):xa([t],e)}function Mq(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function xa(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ea(t)),te().getBool("DEBUG")&&pq(t,e),Mq(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let s=0;s<n.length;++s)Math.round(t[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${e}`)}function jn(){return te().platform.now()}function Ur(t,e="utf-8"){return e=e||"utf-8",te().platform.encode(t,e)}function qr(t,e="utf-8"){return e=e||"utf-8",te().platform.decode(t,e)}function Us(t){return te().platform.isTypedArray!=null?te().platform.isTypedArray(t):fN(t)}function ea(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||n0(t)||t==null||Us(t)&&n)e.push(t);else if(Array.isArray(t)||Us(t))for(let s=0;s<t.length;++s)ea(t[s],e,n);else{let s=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(s=Math.max(s,Number(o)));for(let o=0;o<=s;o++)ea(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bq{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Uq)}profileKernel(e,n,s){let o;const r=()=>{o=s()};let i;const a=jn();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const l of o)l.dataSync();i=Promise.resolve({kernelMs:jn()-a})}if(te().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<o.length;l++){const u=o[l];u.data().then(d=>{Vq(d,u.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(l=>l.kernelMs),extraInfo:i.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:i}=e;s.forEach(a=>{Promise.all([a.data(),o,i]).then(c=>{this.logger.logKernelProfile(n,a,c[0],c[1],r,c[2])})})}}function Vq(t,e,n){if(e!=="float32")return!1;for(let s=0;s<t.length;s++){const o=t[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class Uq{logKernelProfile(e,n,s,o,r,i){const a=typeof o=="number"?cc(`${o}ms`,9):o.error,c=cc(e,25),l=n.rank,u=n.size,d=cc(n.shape.toString(),14);let h="";for(const f in r){const p=r[f];if(p!=null){const m=p.shape||n.shape,v=m.length;h+=`${f}: ${v}D ${v>0?m:""} `}}console.log(`%c${c}	%c${a}	%c${l}D ${d}	%c${u}	%c${h}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(t,e,n){const s={},o={};for(let c=0;c<e.length;c++)s[e[c].id]=!0;for(let c=0;c<t.length;c++){const l=t[c],u=l.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<e.length;p++)if(s[h.id]){l.outputs.forEach(m=>s[m.id]=!0),f=!0,o[l.id]=!0;break}if(f)break}}const r={};r[n.id]=!0;const i={};for(let c=t.length-1;c>=0;c--){const l=t[c],u=l.inputs;for(let d=0;d<l.outputs.length;d++)if(r[l.outputs[d].id]){for(const h in u)r[u[h].id]=!0,i[l.id]=!0;break}}const a=[];for(let c=0;c<t.length;c++){const l=t[c];if(o[l.id]&&i[l.id]){const u={};for(const h in l.inputs){const f=l.inputs[h];s[f.id]&&(u[h]=f)}const d=Object.assign({},l);d.inputs=u,d.outputs=l.outputs,a.push(d)}}return a}function zq(t,e,n,s){for(let o=e.length-1;o>=0;o--){const r=e[o],i=[];if(r.outputs.forEach(c=>{const l=t[c.id];l!=null?i.push(l):i.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(i);for(const c in r.inputs){if(!(c in a))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[c]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${l.dtype}'`);const u=r.inputs[c];if(!at(l.shape,u.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${c}' has shape '${l.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=l;else{const d=t[u.id];t[u.id]=s(d,l),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_=20,pl=3,Vg=7;function Wq(t,e,n,s){const o=De(e),r=Gq(t,e,n,o),i=e.length,a=Fh(t,e,n,o,r),c=["Tensor"];return s&&(c.push(`  dtype: ${n}`),c.push(`  rank: ${i}`),c.push(`  shape: [${e}]`),c.push("  values:")),c.push(a.map(l=>"    "+l).join(`
`)),c.join(`
`)}function Gq(t,e,n,s){const o=ce(e),r=s[s.length-1],i=new Array(r).fill(0),a=e.length,c=n==="complex64"?_l(t):t;if(a>1)for(let l=0;l<o/r;l++){const u=l*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],Cl(c[u+d],0,n).length)}return i}function Cl(t,e,n){let s;return Array.isArray(t)?s=`${parseFloat(t[0].toFixed(Vg))} + ${parseFloat(t[1].toFixed(Vg))}j`:$u(t)?s=`'${t}'`:n==="bool"?s=CN(t):s=parseFloat(t.toFixed(Vg)).toString(),cc(s,e)}function CN(t){return t===0?"false":"true"}function Fh(t,e,n,s,o,r=!0){const i=n==="complex64"?2:1,a=e[0],c=e.length;if(c===0){if(n==="complex64"){const m=_l(t);return[Cl(m[0],0,n)]}return n==="bool"?[CN(t[0])]:[t[0].toString()]}if(c===1){if(a>Y_){const v=pl*i;let g=Array.from(t.slice(0,v)),b=Array.from(t.slice((a-pl)*i,a*i));return n==="complex64"&&(g=_l(g),b=_l(b)),["["+g.map((x,y)=>Cl(x,o[y],n)).join(", ")+", ..., "+b.map((x,y)=>Cl(x,o[a-pl+y],n)).join(", ")+"]"]}return["["+(n==="complex64"?_l(t):Array.from(t)).map((v,g)=>Cl(v,o[g],n)).join(", ")+"]"]}const l=e.slice(1),u=s.slice(1),d=s[0]*i,h=[];if(a>Y_){for(let m=0;m<pl;m++){const v=m*d,g=v+d;h.push(...Fh(t.slice(v,g),l,n,u,o,!1))}h.push("...");for(let m=a-pl;m<a;m++){const v=m*d,g=v+d;h.push(...Fh(t.slice(v,g),l,n,u,o,m===a-1))}}else for(let m=0;m<a;m++){const v=m*d,g=v+d;h.push(...Fh(t.slice(v,g),l,n,u,o,m===a-1))}const f=c===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<c;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(r?"":p),h}function _l(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mn{constructor(e,n,s){if(this.dtype=n,this.shape=e.slice(),this.size=ce(e),s!=null){const o=s.length;$(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Ft(n,this.size),this.strides=De(e)}set(e,...n){n.length===0&&(n=[0]),$(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=this.strides[o]*e[o];return this.values[s]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let s=0;s<e.length-1;++s)n+=this.strides[s]*e[s];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(e/this.strides[s]),e-=n[s]*this.strides[s];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Qs().makeTensor(this.values,this.shape,this.dtype)}}let Qs=null,Ha=null;function Hq(t){Qs=t}function Kq(t){Ha=t}class Kt{constructor(e,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ce(e),this.strides=De(e),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ha.buffer(this.shape,this.dtype,e)}bufferSync(){return Ha.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return no(this.shape,e,this.dtype==="complex64")}arraySync(){return no(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Qs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(s=>qr(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Qs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Qs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>qr(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Qs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Qs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ha.print(this,e)}clone(){return this.throwIfDisposed(),Ha.clone(this)}toString(e=!1){const n=this.dataSync();return Wq(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ha.cast(this,e)}variable(e=!0,n,s){return this.throwIfDisposed(),Qs().makeVariable(this,e,n,s)}}Object.defineProperty(Kt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ae(){return s0("Tensor",()=>Kt)}ae();class wf extends Kt{constructor(e,n,s,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=s}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!at(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Qs().disposeTensor(this),this.dataId=e.dataId,Qs().incRef(this,null)}dispose(){Qs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(wf,Symbol.hasInstance,{value:t=>t instanceof Kt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var J_;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(J_||(J_={}));var fb;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(fb||(fb={}));var pb;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(pb||(pb={}));var mb;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(mb||(mb={}));var gb;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(gb||(gb={}));const qq={float32:mb,int32:fb,bool:pb,complex64:gb};function cs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return qq[t][e]}function H0(t){return cs(t,"int32")}function _N(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function SN(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mt(t,e){if(t.dtype===e.dtype)return[t,e];const n=cs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function IN(t){const e=[];return EN(t,e,new Set),e}function EN(t,e,n){if(t==null)return;if(t instanceof Kt){e.push(t);return}if(!Xq(t))return;const s=t;for(const o in s){const r=s[o];n.has(r)||(n.add(r),EN(r,e,n))}}function Xq(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ug(t){return t.kernelName!=null}class Z_{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Nc{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Z_}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,s=1){return e in this.registryFactory?(ms(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:s},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(e);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Bq(this.backendInstance),!0}setupRegisteredKernels(){W_(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){W_(e).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof Jy)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,ms(`Initialization of backend ${e} failed`),ms(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[e]=s,{success:!0,asyncInit:!1}}catch(s){return ms(`Initialization of backend ${e} failed`),ms(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),s.backend=e,e.move(n,r,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let s=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,s){e();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Nc.nextTensorId++}nextVariableId(){return Nc.nextVariableId++}clone(e){const n=H.runKernel(Xu,{x:e}),s={x:e},o=i=>({x:()=>{const a="float32",c={x:i},l={dtype:a};return H.runKernel(Fu,c,l)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(e,n,s){if(this.backendName==null&&this.backend,!(j_(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(c=>{r+=c.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-r-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let c;const l=Ug(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Ug(e)){const{kernelName:p,inputs:m,attrs:v}=e;this.backendName==null&&this.backend;const g=j_(p,this.backendName);$(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();c=g.kernelFunc({inputs:m,attrs:v,backend:this.backend});const x=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,x);const y=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(p,m,y);s=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=e,m=v=>{o&&(s=v.map(g=>this.keep(this.clone(g))))};a=()=>{const v=this.backend.numDataIds();c=this.tidy(()=>p(this.backend,m));const g=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,v,g),g}}const{inputs:u,attrs:d}=e,h=Ug(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(l,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),o&&this.addTapeNode(l,u,n,h,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,n,s){const o=z_(e);if(o!=null){const r=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?($(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(l=>n[l])):a=r.map(l=>n[l]);const c=s.filter((l,u)=>i[u]);return a.concat(c)}return[]}makeTensor(e,n,s,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=e;s==="string"&&$u(e[0])&&(r=e.map(c=>Ur(c)));const i=o.write(r,n,s),a=new Kt(n,s,i,this.nextTensorId());if(this.trackTensor(a,o),s==="string"){const c=this.state.tensorInfo.get(i),l=gq(r);this.state.numBytes+=l-c.bytes,c.bytes=l}return a}makeTensorFromDataId(e,n,s,o){s=s||"float32";const r={dataId:e,shape:n,dtype:s};return this.makeTensorFromTensorInfo(r,o)}makeTensorFromTensorInfo(e,n){const{dataId:s,shape:o,dtype:r}=e,i=new Kt(o,r,s,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const r=new wf(e,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let s=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(s=e.size*gf(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof wf||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const s=e.size*gf(e.dtype);this.state.numBytes-=s}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,s,o,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:s,saved:r},c=z_(e);c!=null&&(o=c.gradFunc),o!=null&&(a.gradient=l=>(l=l.map((u,d)=>{if(u==null){const h=s[d],f=Cn(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),o(l.length>1?l:l[0],r,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=IN(e),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(e,n,s,o=!1){if($(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));$(r instanceof Kt,()=>"The result y returned by f() must be a tensor.");const i=jq(this.state.activeTape,n,r);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s??Qq(r.shape),zq(a,i,l=>this.tidy(l),Yq);const c=n.map(l=>a[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const u of l.saved)u.dispose()}),this.state.activeTape=null),{value:r,grads:c}})}customGrad(e){return $(ib(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{$(n.every(a=>a instanceof Kt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((a,c)=>{o[c]=a});const r=(a,c)=>(s=e(...n,c),$(s.value instanceof Kt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),$(ib(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,c)=>{const l=s.gradFunc(a,c),u=Array.isArray(l)?l:[l];$(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),$(u.every(h=>h instanceof Kt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=jn(),s=await this.backend.time(e);return s.wallMs=jn()-n,s}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Z_;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Nc.nextTensorId=0;Nc.nextVariableId=0;function Qq(t){const e=t0(ce(t),"float32");return H.makeTensor(e,t,"float32")}function kN(){const t=zT();if(t._tfengine==null){const e=new yq(t);t._tfengine=new Nc(e)}return _q(t._tfengine.ENV),Hq(()=>t._tfengine),t._tfengine}const H=kN();function Yq(t,e){const n={a:t,b:e};return H.runKernel(qc,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jq(){return typeof navigator<"u"&&navigator!=null}function $N(t){if(t||Jq()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function TN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qn=te();Qn.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Qn.registerFlag("IS_BROWSER",()=>TN());Qn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Qn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Qn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Qn.registerFlag("PROD",()=>!1);Qn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Qn.getBool("DEBUG"));Qn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Qn.registerFlag("IS_TEST",()=>!1);Qn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Qn.getBool("DEBUG"));Qn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Qn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Qn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sm(t,e){let n=t;if(Us(t))return e==="string"?[]:[t.length];if(_N(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(SN(t))return[t.buffer.size/(e==null?4:gf(e))];if(!Array.isArray(t))return[];const s=[];for(;Array.isArray(n)||Us(n)&&e!=="string";)s.push(n.length),n=n[0];return Array.isArray(t)&&te().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&NN(t,s,[]),s}function NN(t,e,n){if(n=n||[],!Array.isArray(t)&&!Us(t)){$(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}$(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),$(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const s=e.slice(1);for(let o=0;o<t.length;++o)NN(t[o],s,n.concat(o))}function eS(t,e,n,s){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${t} tensor, but got ${e} tensor`)}}function F(t,e,n,s="numeric"){if(t instanceof ae())return eS(s,t.dtype,e,n),t;let o=Hc(t);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),eS(s,o,e,n),t==null||!Us(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const c=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${c}'`)}const r=Sm(t,o);!Us(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?xa(t,o):ea(t,[],!0);return H.makeTensor(a,r,o)}function AN(t,e,n,s="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((r,i)=>F(r,`${e}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zq="__op";function Q(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const s=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Zq;const o=(...r)=>{H.startScope(n);try{const i=s(...r);return n0(i)&&console.error("Cannot return a Promise inside of tidy."),H.endScope(i),i}catch(i){throw H.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8(t,e){const n=F(t,"real","complex"),s=F(e,"imag","complex");e0(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return H.runKernel(d0,o)}const ta=Q({complex_:e8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Im(t,e,n,s){if(s==null)s=Hc(t);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(SN(t)||_N(t)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return H.backend.createTensorFromGPUData(t,e||n,s)}if(!Us(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){vr(e);const o=ce(e),r=ce(n);$(o===r,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${r}`);for(let i=0;i<n.length;++i){const a=n[i],c=i===n.length-1?a!==ce(e.slice(i)):!0;$(n[i]===e[i]||!c,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Us(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=s!=="string"?xa(t,s):ea(t,[],!0),H.makeTensor(t,e,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bl(t,e,n){const s=Sm(t,n);return Im(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cf={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class li{static join(e){return new li(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(s=>Us(s)?s.buffer:s),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let s=0;s<e.length;s++){const o=e[s];s!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=n+o.byteLength;this.shards.push({buffer:o,start:n,end:r}),n=r}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const s=this.findShardForByte(e);if(s===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,r=new ArrayBuffer(o),i=new Uint8Array(r);let a=0;for(let c=s;c<this.shards.length;c++){const l=this.shards[c],d=e+a-l.start,h=a,p=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,d,p-d);if(i.set(m,h),a+=m.length,n<l.end)break}return r}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=t8(this.shards,n);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function t8(t,e){let n=0,s=t.length;for(;n<=s;){const o=Math.floor((s-n)/2)+n,r=e(t[o]);if(r===0)return o;r<0?s=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xo(){return H}function tS(){return H.memory()}function J(t,e){return H.tidy(t,e)}function He(t){IN(t).forEach(n=>n.dispose())}function Do(t){return H.keep(t)}function RN(t,e,n=1){return H.registerBackend(t,e,n)}function n8(){return H.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ac=4;async function nS(t,e){const n=[],s=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],c=Array.isArray(t)?t[i].tensor:t[a];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${c.dtype}`);const l={name:a,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){const u=new Promise(async d=>{const h=await c.bytes(),f=h.reduce((v,g)=>v+g.length,0)+Ac*h.length,p=new Uint8Array(f);let m=0;for(let v=0;v<h.length;v++){const g=h[v],b=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(b,m),m+=Ac,p.set(g,m),m+=g.length}d(p)});s.push(u)}else s.push(c.data());e!=null&&(l.group=e),n.push(l)}const r=await Promise.all(s);return{data:i8(r),specs:n}}function s8(t,e){const n=new li(t),s={};let o=0;for(const r of e){const i=o8(r,(a,c)=>n.slice(o+a,o+c));s[r.name]=r8(r,n.slice(o,o+i)),o+=i}return s}function o8(t,e){const n=ce(t.shape);let s;if("quantization"in t){const o=t.quantization;s=Cf[o.dtype]}else if(t.dtype==="string"){let o=0;for(let r=0;r<n;r++)o+=Ac+new Uint32Array(e(o,o+Ac))[0];return o}else s=Cf[t.dtype];return n*s}function r8(t,e){const n=t.name,s=t.dtype,o=t.shape,r=ce(o);let i,a=0;if("quantization"in t){const c=t.quantization;if(c.dtype==="uint8"||c.dtype==="uint16"){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${t.name} with quantization ${c.dtype} doesn't have corresponding metadata min and scale.`)}else if(c.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${t.name} is quantized with ${c.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${c.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=Cf[c.dtype],u=c.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(s==="float32")if(c.dtype==="uint8"||c.dtype==="uint16"){i=new Float32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];i[d]=h*c.scale+c.min}}else if(c.dtype==="float16")i=g8()(u);else throw new Error(`Unsupported quantization type ${c.dtype} for weight type float32.`);else if(s==="int32"){if(c.dtype!=="uint8"&&c.dtype!=="uint16")throw new Error(`Unsupported quantization type ${c.dtype} for weight type int32.`);i=new Int32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];i[d]=Math.round(h*c.scale+c.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=r*l}else if(s==="string"){const c=ce(t.shape);i=[];for(let l=0;l<c;l++){const u=new Uint32Array(e.slice(a,a+Ac))[0];a+=Ac;const d=new Uint8Array(e.slice(a,a+u));i.push(d),a+=u}}else{const c=Cf[s];if(s==="float32")i=new Float32Array(e);else if(s==="int32")i=new Int32Array(e);else if(s==="bool")i=new Uint8Array(e);else if(s==="complex64"){i=new Float32Array(e);const l=new Float32Array(i.length/2),u=new Float32Array(i.length/2);for(let p=0;p<l.length;p++)l[p]=i[p*2],u[p]=i[p*2+1];const d=Bl(l,o,"float32"),h=Bl(u,o,"float32"),f=ta(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=r*c}return Bl(i,o,s)}function i8(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(r=>{if(e+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(e);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const K0=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function sS(t){return K0?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function a8(t){if(K0)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let s=0,o=e.length;s<o;s++)n+=String.fromCharCode(e[s]);return btoa(n)}function c8(t){if(K0){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}function l8(t){return li.join(t)}function u8(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function d8(t,e,n){const s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(s.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");s.weightSpecs=e,s.weightData=n}return t.signature!=null&&(s.signature=t.signature),t.userDefinedMetadata!=null&&(s.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(s.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(s.initializerSignature=t.initializerSignature),s}async function h8(t,e){let n,s;return t.weightsManifest!=null&&([n,s]=await e(t.weightsManifest)),d8(t,n,s)}function q0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:sS(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:sS(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new li(t.weightData).byteLength}}function oS(t){const e=[];for(const n of t)e.push(...n.weights);return e}function f8(){const t=n=>{let s=n<<13,o=0;for(;!(s&8388608);)o-=8388608,s<<=1;return s&=-8388609,o+=947912704,s|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function p8(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function m8(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function g8(){const t=f8(),e=p8(),n=m8();return s=>{const o=new ArrayBuffer(4*s.length),r=new Uint32Array(o);for(let i=0;i<s.length;i++){const a=s[i],c=t[n[a>>10]+(a&1023)]+e[a>>10];r[i]=c}return new Float32Array(o)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return tn.instance==null&&(tn.instance=new tn),tn.instance}static registerSaveRouter(e){tn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){tn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return tn.getHandlers(e,"save")}static getLoadHandlers(e,n){return tn.getHandlers(e,"load",n)}static getHandlers(e,n,s){const o=[];return(n==="load"?tn.getInstance().loadRouters:tn.getInstance().saveRouters).forEach(i=>{const a=i(e,s);a!==null&&o.push(a)}),o}}const v8=t=>tn.getSaveHandlers(t),b8=(t,e)=>tn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vb="tensorflowjs",bb=1,Pi="models_store",Dr="model_info_store";function DN(){if(!te().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function yb(t){const e=t.result;e.createObjectStore(Pi,{keyPath:"modelPath"}),e.createObjectStore(Dr,{keyPath:"modelPath"})}class na{constructor(e){if(this.indexedDB=DN(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((s,o)=>{const r=this.indexedDB.open(vb,bb);r.onupgradeneeded=()=>yb(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(Pi,"readonly"),l=a.objectStore(Pi).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(l.result.modelArtifacts)},l.onerror=u=>(i.close(),o(l.error)),a.oncomplete=()=>i.close()}else{n.weightData=li.join(n.weightData);const a=q0(n),c=i.transaction(Dr,"readwrite");let l=c.objectStore(Dr),u;try{u=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return o(h)}let d;u.onsuccess=()=>{d=i.transaction(Pi,"readwrite");const h=d.objectStore(Pi);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}f.onsuccess=()=>s({modelArtifactsInfo:a}),f.onerror=p=>{l=c.objectStore(Dr);const m=l.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(f.error)),m.onerror=v=>(i.close(),o(f.error))}},u.onerror=h=>(i.close(),o(u.error)),c.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>o(r.error)})}}na.URL_SCHEME="indexeddb://";const ON=t=>te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(na.URL_SCHEME)?y8(t.slice(na.URL_SCHEME.length)):null;tn.registerSaveRouter(ON);tn.registerLoadRouter(ON);function y8(t){return new na(t)}function x8(t){return t.startsWith(na.URL_SCHEME)?t.slice(na.URL_SCHEME.length):t}class w8{constructor(){this.indexedDB=DN()}async listModels(){return new Promise((e,n)=>{const s=this.indexedDB.open(vb,bb);s.onupgradeneeded=()=>yb(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(Dr,"readonly"),a=r.objectStore(Dr).getAll();a.onsuccess=()=>{const c={};for(const l of a.result)c[l.modelPath]=l.modelArtifactsInfo;e(c)},a.onerror=c=>(o.close(),n(a.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(e){return e=x8(e),new Promise((n,s)=>{const o=this.indexedDB.open(vb,bb);o.onupgradeneeded=()=>yb(o),o.onsuccess=()=>{const r=o.result,i=r.transaction(Dr,"readwrite"),a=i.objectStore(Dr),c=a.get(e);let l;c.onsuccess=()=>{if(c.result==null)return r.close(),s(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{l=r.transaction(Pi,"readwrite");const f=l.objectStore(Pi).delete(e);f.onsuccess=()=>n(c.result.modelArtifactsInfo),f.onerror=p=>s(c.error)};u.onsuccess=d,u.onerror=h=>(d(),r.close(),s(c.error))}},c.onerror=u=>(r.close(),s(c.error)),i.oncomplete=()=>{l==null?r.close():l.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const er="/",Ka="tensorflowjs_models",LN="info",C8="model_topology",_8="weight_specs",S8="weight_data",I8="model_metadata";function FN(t){return{info:[Ka,t,LN].join(er),topology:[Ka,t,C8].join(er),weightSpecs:[Ka,t,_8].join(er),weightData:[Ka,t,S8].join(er),modelMetadata:[Ka,t,I8].join(er)}}function PN(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function E8(t){const e=t.split(er);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(er)}function k8(t){return t.startsWith(sa.URL_SCHEME)?t.slice(sa.URL_SCHEME.length):t}class sa{constructor(e){if(!te().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=FN(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),o=q0(e),r=li.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,a8(r));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw PN(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=c8(i),n}}sa.URL_SCHEME="localstorage://";const MN=t=>te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(sa.URL_SCHEME)?$8(t.slice(sa.URL_SCHEME.length)):null;tn.registerSaveRouter(MN);tn.registerLoadRouter(MN);function $8(t){return new sa(t)}class T8{constructor(){$(te().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),$(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ka+er,s=er+LN;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const i=E8(r);e[i]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){e=k8(e);const n=FN(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const s=JSON.parse(this.LS.getItem(n.info));return PN(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rS="://";class Co{constructor(){this.managers={}}static getInstance(){return Co.instance==null&&(Co.instance=new Co),Co.instance}static registerManager(e,n){$(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(rS)&&(e=e.slice(0,e.indexOf(rS))),$(e.length>0,()=>"scheme must not be an empty string.");const s=Co.getInstance();$(s.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),s.managers[e]=n}static getManager(e){const n=Co.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Co.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N8{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!te().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const o=this.functionRefs[s.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return fN(e)}}if(te().get("IS_BROWSER")){te().setPlatform("browser",new N8);try{Co.registerManager(sa.URL_SCHEME,new T8)}catch{}try{Co.registerManager(na.URL_SCHEME,new w8)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8={importFetch:()=>require("node-fetch")};let jg;class R8{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return te().global.fetch!=null?te().global.fetch(e,n):(jg==null&&(jg=A8.importFetch()),jg(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}te().get("IS_NODE")&&!te().get("IS_BROWSER")&&te().setPlatform("node",new R8);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ke(t,e="float32",n){return e=e||"float32",vr(t),new mn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(t,e){const n=F(t,"x","cast");if(!mq(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:e};return H.runKernel(Fu,s,o)}const $e=Q({cast_:D8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(t){const n={x:F(t,"x","clone","string_or_numeric")};return H.runKernel(Xu,n)}const Gi=Q({clone_:O8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */kN();const F8={buffer:Ke,cast:$e,clone:Gi,print:L8};Kq(F8);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(t,e){let n=F(t,"a","add"),s=F(e,"b","add");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(qc,o)}const we=Q({add_:P8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8(t,e){let n=F(t,"a","floorDiv"),s=F(e,"b","floorDiv");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(Ku,o)}const BN=Q({floorDiv_:M8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B8(t,e){let n=F(t,"a","div"),s=F(e,"b","div");if([n,s]=Mt(n,s),n.dtype==="int32"&&s.dtype==="int32")return BN(n,s);const o={a:n,b:s},r={};return H.runKernel(Uu,o,r)}const Fe=Q({div_:B8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(t,e){let n=F(t,"a","mul"),s=F(e,"b","mul");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(od,o)}const W=Q({mul_:V8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8(t){const e=F(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return H.runKernel(Np,n)}else{const n={x:e};return H.runKernel(_p,n)}}const $n=Q({abs_:U8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8(t){const n={x:F(t,"x","acos")};return H.runKernel(Tu,n)}const z8=Q({acos_:j8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8(t){const n={x:F(t,"x","acosh")};return H.runKernel(Nu,n)}const G8=Q({acosh_:W8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(t,e=null,n=!1){const o={x:F(t,"x","all","bool")},r={axis:e,keepDims:n};return H.runKernel(r0,o,r)}const VN=Q({all_:H8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t,e=null,n=!1){const o={x:F(t,"x","any","bool")},r={axis:e,keepDims:n};return H.runKernel(i0,o,r)}const xb=Q({any_:K8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(t,e=0){const s={x:F(t,"x","argMax")},o={axis:e};return H.runKernel(Sp,s,o)}const nu=Q({argMax_:q8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(t,e=0){const s={x:F(t,"x","argMin")},o={axis:e};return H.runKernel(Ip,s,o)}const Q8=Q({argMin_:X8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(t){const n={x:F(t,"x","asin")};return H.runKernel(Au,n)}const J8=Q({asin_:Y8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(t){const n={x:F(t,"x","asinh")};return H.runKernel(Ru,n)}const e5=Q({asinh_:Z8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(t){const n={x:F(t,"x","atan")};return H.runKernel(Du,n)}const n5=Q({atan_:t5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(t,e){let n=F(t,"a","atan2"),s=F(e,"b","atan2");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(Lu,o)}const o5=Q({atan2_:s5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5(t){const n={x:F(t,"x","atanh")};return H.runKernel(Ou,n)}const i5=Q({atanh_:r5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sd(t,e,n,s,o="NHWC",r){const i=t[3],a=[...e,i],c=yr(o);return gn(t,a,n,r,s,null,null,c)}function Ws(t,e,n,s,o,r,i="channelsLast"){const[a,c]=su(e);let l;if(i==="channelsLast")l=[a,c,t[3],t[3]];else if(i==="channelsFirst")l=[a,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return gn(t,l,n,s,o,r,!1,i)}function br(t,e,n,s,o,r,i="NDHWC"){const[a,c,l]=wb(e);let u,d;if(i==="NDHWC")d="channelsLast",u=[a,c,l,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",u=[a,c,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return ui(t,u,n,s,o,!1,d,r)}function gn(t,e,n,s,o,r,i=!1,a="channelsLast"){let[c,l,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[c,l,u,d]=t;else if(a==="channelsFirst")[c,d,l,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,v]=su(n),[g,b]=su(s),x=uc(h,g),y=uc(f,b),{padInfo:w,outHeight:C,outWidth:_}=l5(o,l,u,m,v,x,y,r,a),S=i?p*d:p;let I;return a==="channelsFirst"?I=[c,S,C,_]:a==="channelsLast"&&(I=[c,C,_,S]),{batchSize:c,dataFormat:a,inHeight:l,inWidth:u,inChannels:d,outHeight:C,outWidth:_,outChannels:S,padInfo:w,strideHeight:m,strideWidth:v,filterHeight:h,filterWidth:f,effectiveFilterHeight:x,effectiveFilterWidth:y,dilationHeight:g,dilationWidth:b,inShape:t,outShape:I,filterShape:e}}function ui(t,e,n,s,o,r=!1,i="channelsLast",a){let[c,l,u,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[c,l,u,d,h]=t;else if(i==="channelsFirst")[c,h,l,u,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,m,,v]=e,[g,b,x]=wb(n),[y,w,C]=wb(s),_=uc(f,y),S=uc(p,w),I=uc(m,C),{padInfo:E,outDepth:O,outHeight:A,outWidth:P}=u5(o,l,u,d,g,b,x,_,S,I,a),z=r?v*h:v;let G;return i==="channelsFirst"?G=[c,z,O,A,P]:i==="channelsLast"&&(G=[c,O,A,P,z]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:u,inWidth:d,inChannels:h,outDepth:O,outHeight:A,outWidth:P,outChannels:z,padInfo:E,strideDepth:g,strideHeight:b,strideWidth:x,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:_,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationDepth:y,dilationHeight:w,dilationWidth:C,inShape:t,outShape:G,filterShape:e}}function a5(t,e,n,s,o){s==null&&(s=X0(t,e,n));const r=t[0],i=t[1],a=ou((r-e+2*s)/n+1,o),c=ou((i-e+2*s)/n+1,o);return[a,c]}function c5(t,e,n,s,o,r){o==null&&(o=X0(t,e[0],s[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=ou((t[a]-e[a]+2*o)/s[a]+1,r));return i}function X0(t,e,n,s=1){const o=uc(e,s);return Math.floor((t[0]*(n-1)-n+o)/2)}function su(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function wb(t){return typeof t=="number"?[t,t,t]:t}function uc(t,e){return e<=1?t:t+(t-1)*(e-1)}function l5(t,e,n,s,o,r,i,a,c){let l,u,d;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=a5([e,n],r,s,t,a);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/s),d=Math.ceil(n/o);const h=Math.max(0,(u-1)*s+r-e),f=Math.max(0,(d-1)*o+i-n),p=Math.floor(h/2),m=h-p,v=Math.floor(f/2),g=f-v;l={top:p,bottom:m,left:v,right:g,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-r+1)/s),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const h=c==="channelsLast"?t[1][0]:t[2][0],f=c==="channelsLast"?t[1][1]:t[2][1],p=c==="channelsLast"?t[2][0]:t[3][0],m=c==="channelsLast"?t[2][1]:t[3][1];l={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=ou((e-r+h+f)/s+1,a),d=ou((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:u,outWidth:d}}function u5(t,e,n,s,o,r,i,a,c,l,u){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=c5([e,n,s,1],[a,c,l],1,[o,r,i],t,u);h=v[0],f=v[1],p=v[2]}else if(t==="same"){h=Math.ceil(e/o),f=Math.ceil(n/r),p=Math.ceil(s/i);const m=(h-1)*o+a-e,v=(f-1)*r+c-n,g=(p-1)*i+l-s,b=Math.floor(m/2),x=m-b,y=Math.floor(v/2),w=v-y,C=Math.floor(g/2),_=g-C;d={top:y,bottom:w,left:C,right:_,front:b,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function ou(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function oa(t){const[e,n,s]=su(t);return e===1&&n===1&&s===1}function In(t,e){return oa(t)||oa(e)}function ra(t){return su(t).every(e=>e>0)}function yr(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Jn(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")$($c(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(s=>{s.forEach(o=>{$($c(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(t,e){const s={x:F(t,"x","reshape","string_or_numeric")},o={shape:e};return H.runKernel(um,s,o)}const X=Q({reshape_:d5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5(t,e,n,s,o){const r=F(t,"x","avgPool","float32"),i=1;$(In(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=r,c=!1;r.rank===3&&(c=!0,a=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Jn("avgPool",s,o);const l={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o};let d=H.runKernel(Ep,l,u);return d=$e(d,r.dtype),c?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Q0=Q({avgPool_:h5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5(t,e,n,s,o,r="NDHWC"){const i=F(t,"x","avgPool3d","float32");let a=i,c=!1;i.rank===4&&(c=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),$(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),$(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Jn("avgPool3d",s,o);const l={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=H.runKernel(kp,l,u);return d=$e(d,a.dtype),c?X(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const p5=Q({avgPool3d_:f5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5(t,e=0){$(t.length>=1,()=>"Pass at least one tensor to concat");const n=AN(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Gi(n[0]);const s=n,o={axis:e};return H.runKernel(Ap,s,o)}const qn=Q({concat_:m5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5(t,e,n=!1,s=!1){let o=F(t,"a","matMul"),r=F(e,"b","matMul");[o,r]=Mt(o,r);const i={a:o,b:r},a={transposeA:n,transposeB:s};return H.runKernel($p,i,a)}const ot=Q({matMul_:g5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5(t){const n={x:F(t,"x","sigmoid","float32")};return H.runKernel(md,n)}const Xc=Q({sigmoid_:v5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(t,e,n){const s=F(t,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:e,size:n};return H.runKernel(mm,o,r)}const xt=Q({slice_:b5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y5(t){const n={x:F(t,"x","tanh","float32")};return H.runKernel(wd,n)}const Em=Q({tanh_:y5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(t,e,n){const s=F(t,"x","batchToSpaceND"),o=e.reduce((a,c)=>a*c);$(s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),$(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),$(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const r={x:s},i={blockShape:e,crops:n};return H.runKernel(Tp,r,i)}const Y0=Q({batchToSpaceND_:x5});function w5(t){let e;return t.rank===0||t.rank===1?e=X(t,[1,1,1,t.size]):t.rank===2?e=X(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5(t,e,n,s,o,r){r==null&&(r=.001);const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");let l;o!=null&&(l=F(o,"scale","batchNorm"));let u;s!=null&&(u=F(s,"offset","batchNorm")),$(a.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:w5(i),scale:l,offset:u,mean:a,variance:c},f={varianceEpsilon:r},p=H.runKernel(Vp,h,f);return X(p,i.shape)}const km=Q({batchNorm_:C5});function _5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");let l;o!=null&&(l=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),$(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),$(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&$(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&$(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),km(i,a,c,u,l,r)}const S5=Q({batchNorm2d_:_5});function I5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");let l;o!=null&&(l=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),$(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),$(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&$(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&$(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),km(i,a,c,u,l,r)}const E5=Q({batchNorm3d_:I5});function k5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");let l;o!=null&&(l=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),$(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),$(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&$(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&$(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),km(i,a,c,u,l,r)}const $5=Q({batchNorm4d_:k5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(t,e,n){const s=F(t,"x","bincount"),o=F(e,"weights","bincount");$(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),$(n>=0,()=>`size must be non-negative, but got ${n}.`),$(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},i={size:n};return H.runKernel(l0,r,i)}const N5=Q({bincount_:T5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5(t,e){let n=F(t,"broadcastTo","x");const s=n.shape;if(vr(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=X(n,l)}const o=n.shape,r=Array.from(e);for(let l=e.length-1;l>=0;l--)if(o[l]===e[l])r[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);if(r.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return Gi(n);const a={x:n},c={reps:r};return H.runKernel(Cd,a,c)}const Vl=Q({broadcastTo_:A5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(t){const n={x:F(t,"x","ceil","float32")};return H.runKernel(Pu,n)}const D5=Q({ceil_:R5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $m(t,e,n){vr(t),n=n||Hc(e);const s={shape:t,value:e,dtype:n};return H.runKernel(S0,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5(t,e,n){const s=F(t,"x","clipByValue");if($(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return $m(s.shape,e,s.dtype);const o={x:s},r={clipValueMin:e,clipValueMax:n};return H.runKernel(Mu,o,r)}const ws=Q({clipByValue_:O5});function L5(t){return qn(t,0)}const F5=Q({concat1d_:L5});function P5(t,e){return qn(t,e)}const M5=Q({concat2d_:P5});function B5(t,e){return qn(t,e)}const V5=Q({concat3d_:B5});function U5(t,e){return qn(t,e)}const j5=Q({concat4d_:U5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(t,e,n,s,o="NHWC",r=[1,1],i){const a=F(t,"x","conv2d","float32"),c=F(e,"filter","conv2d","float32");let l=a,u=!1;a.rank===3&&(u=!0,l=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),$(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),Jn("conv2d",s,i);const d=o==="NHWC"?l.shape[3]:l.shape[1];$(d===c.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${c.shape[2]}.`),$(In(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),$(ra(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),$(ra(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:l,filter:c},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=H.runKernel(Rp,h,f);return u?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ia=Q({conv2d_:z5});function W5(t,e,n,s,o="NWC",r=1,i){const a=F(t,"x","conv1d"),c=F(e,"filter","conv1d");let l=a,u=!1;a.rank===2&&(u=!0,l=X(a,[1,a.shape[0],a.shape[1]])),$(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),$(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),Jn("conv1d",s,i),$(l.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${c.shape[1]}.`),$(In(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),$(ra(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),$(ra(n),()=>"Error in conv1D: Stride should be larger than 0."),$(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=X(c,[1,c.shape[0],c.shape[1],c.shape[2]]),h=X(l,[l.shape[0],1,l.shape[1],l.shape[2]]),v=ia(h,d,[1,n],s,"NHWC",[1,r],i);return u?X(v,[v.shape[2],v.shape[3]]):X(v,[v.shape[0],v.shape[2],v.shape[3]])}const UN=Q({conv1d_:W5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5(t,e,n,s,o,r="NHWC",i){$(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,c=e,l=!1;e.rank===3&&(l=!0,c=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),$(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),$(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),$(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?c.shape[3]:c.shape[1];$(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),$(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Jn("conv2dDerInput",o,i);const h={dy:c,filter:n},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,inputShape:a},p=H.runKernel(Dp,h,f);return l?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const J0=Q({conv2DBackpropInput_:G5});function H5(t,e,n,s,o,r){const i=F(t,"x","conv2dTranspose"),a=F(e,"filter","conv2dTranspose");return J0(n,i,a,s,o,"NHWC",r)}const jN=Q({conv2dTranspose_:H5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t,e,n,s,o="NDHWC",r=[1,1,1]){const i=F(t,"x","conv3d"),a=F(e,"filter","conv3d");let c=i,l=!1;i.rank===4&&(l=!0,c=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),$(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),$(c.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${a.shape[3]}.`),$(In(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),$(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),$(ra(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),$(ra(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:c,filter:a},d={strides:n,pad:s,dataFormat:o,dilations:r},h=H.runKernel(Op,u,d);return l?X(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const q5=Q({conv3d_:K5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(t,e,n,s,o){$(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let r=t,i=e,a=!1;e.rank===4&&(a=!0,i=X(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const c=r[4],l=i.shape[4];$(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),$(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),$(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),$(c===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[3]}.`),$(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const u={dy:i,filter:n},d={pad:o,strides:s,inputShape:r},h=H.runKernel(p0,u,d);return a?X(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const zN=Q({conv3DBackpropInput_:X5});function Q5(t,e,n,s,o){const r=F(t,"x","conv3dTranspose"),i=F(e,"filter","conv3dTranspose");return zN(n,r,i,s,o)}const Y5=Q({conv3dTranspose_:Q5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5(t){const n={x:F(t,"x","cos","float32")};return H.runKernel(Bu,n)}const Z0=Q({cos_:J5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5(t){const n={x:F(t,"x","cosh","float32")};return H.runKernel(Vu,n)}const WN=Q({cosh_:Z5});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e=0,n=!1,s=!1){const r={x:F(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:s};return H.runKernel(m0,r,i)}const Cb=Q({cumprod_:eX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tX(t,e=0,n=!1,s=!1){const r={x:F(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:s};return H.runKernel(Lp,r,i)}const GN=Q({cumsum_:tX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(t,e,n,s=!1){const o=F(t,"x","denseBincount"),r=F(e,"weights","denseBincount");$(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),$(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),$(n>=0,()=>`size must be non-negative, but got ${n}.`),$(r.size===o.size||r.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${r.shape}.`);const i={x:o,weights:r},a={size:n,binaryOutput:s};return H.runKernel(v0,i,a)}const iS=Q({denseBincount_:nX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sX(t,e,n="NHWC"){const s=F(t,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];$(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),$(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${s.shape}`),$(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e} for depthToSpace with input shape
        ${s.shape}`),$(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},c={blockSize:e,dataFormat:n};return H.runKernel(b0,a,c)}const oX=Q({depthToSpace_:sX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rX(t,e,n,s,o="NHWC",r=[1,1],i){const a=F(t,"x","depthwiseConv2d","float32"),c=F(e,"filter","depthwiseConv2d","float32");let l=a,u=!1;a.rank===3&&(u=!0,l=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),$(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);const d=o==="NHWC"?l.shape[3]:l.shape[1];$(d===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${c.shape[2]}.`),Jn("depthwiseConv2d",s,i);const h={x:l,filter:c},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=H.runKernel(Fp,h,f);return u?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ex=Q({depthwiseConv2d_:rX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(t,e,n,s,o=[1,1],r="NHWC"){const i=F(t,"x","dilation2d"),a=F(e,"filter","dilation2d");$(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),$(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),$(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let c=i,l=!1;i.rank===3&&(c=X(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),$(c.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${a.shape[2]}`);const u={x:c,filter:a},d={strides:n,pad:s,dilations:o},h=H.runKernel(Pp,u,d);return l?X(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const aX=Q({dilation2d_:iX});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,i=t[r]||1;(e[e.length-1-o]||1)>1&&i===1&&s.unshift(r)}return s}function Zt(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,i=e[r];(o==null||o===1&&i>1)&&n.unshift(r)}return n}function ze(t,e){const n=Math.max(t.length,e.length),s=new Array(n);for(let o=0;o<n;o++){let r=t[t.length-o-1];r==null&&(r=1);let i=e[e.length-o-1];if(i==null&&(i=1),r===1)s[n-o-1]=i;else if(i===1)s[n-o-1]=r;else if(r!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else s[n-o-1]=r}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(t,e){let n=F(t,"a","equal","string_or_numeric"),s=F(e,"b","equal","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Mp,o)}const Bo=Q({equal_:cX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lX(t,e,n){const s=F(e,"a","where"),o=F(n,"b","where"),r=F(t,"condition","where","bool"),i=ze(ze(r.shape,s.shape),o.shape),a=Vl(r,i),c=Vl(s,i),l=Vl(o,i),u={condition:a,t:c,e:l};return H.runKernel(pm,u)}const On=Q({where_:lX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(t){const n={x:F(t,"x","zerosLike")};return H.runKernel(Cm,n)}const et=Q({zerosLike_:uX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t,e){let n=F(t,"a","div"),s=F(e,"b","div");[n,s]=Mt(n,s);const o=Fe(n,s),r=et(o),i=Bo(s,r);return On(i,r,o)}const hX=Q({divNoNan_:dX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fX(t,e){const n=F(t,"t1","dot"),s=F(e,"t2","dot");$((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if($(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const i=X(n,[1,-1]),a=X(s,[-1,1]),c=ot(i,a);return X(c,[])}else if(n.rank===1&&s.rank===2){const i=X(n,[1,-1]),a=X(s,[s.shape[0],s.shape[1]]),c=ot(i,a);return X(c,[c.size])}else if(n.rank===2&&s.rank===1){const i=X(s,[-1,1]),a=ot(n,i);return X(a,[a.size])}else{const i=X(s,[s.shape[0],s.shape[1]]);return ot(n,i)}}const pX=Q({dot_:fX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(t,...e){const n=e.map((o,r)=>F(o,`tensors${r}`,"einsum")),s={equation:t};return H.runKernel(w0,n,s)}const ml=Q({einsum_:mX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gX(t){const n={x:F(t,"x","elu","float32")};return H.runKernel(ju,n)}const Tm=Q({elu_:gX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vX(t){let e=F(t,"x","erf");$(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=$e(e,"float32"));const n={x:e};return H.runKernel(zu,n)}const HN=Q({erf_:vX});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tx(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function KN(t,e,n){const s=t.length+e.length,o=[];let r=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?o.push(t[r++]):o.push(e[i++]);return o}function dn(t,e){const n=[],s=t.length;for(let r=0;r<s;r++)e.indexOf(r)===-1&&n.push(t[r]);const o=e.map(r=>t[r]);return[n,o]}function Wt(t,e){const n=e.map(s=>1);return KN(t,n,e)}function vn(t,e,n){$(tx(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Dt(t,e){if(tx(t,e))return null;const n=[];for(let s=0;s<e;++s)t.indexOf(s)===-1&&n.push(s);return t.forEach(s=>n.push(s)),n}function di(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Bt(t,e){const n=[];for(let s=e-t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(t,e=null,n=!1){const o={x:F(t,"x","max")},r={reductionIndices:e,keepDims:n};return H.runKernel(Qp,o,r)}const so=Q({max_:bX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(t,e=null,n=!1){const o={x:F(t,"x","min")},r={axis:e,keepDims:n};return H.runKernel(em,o,r)}const _f=Q({min_:yX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(t,e){let n=F(t,"base","pow"),s=F(e,"exp","pow");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(rd,o)}const aa=Q({pow_:xX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(t,e){if((Us(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Us(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Im(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(t){const n={x:F(t,"x","sqrt","float32")};return H.runKernel(vd,n)}const _n=Q({sqrt_:wX});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(t){const e=F(t,"x","square"),n={};return H.runKernel("Square",{x:e},n)}const St=Q({square_:CX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _X(t,e=null,n=!1){let s=F(t,"x","sum");s.dtype==="bool"&&(s=$e(s,"int32"));const o={x:s},r={axis:e,keepDims:n};return H.runKernel(gm,o,r)}const Oe=Q({sum_:_X});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(t,e="euclidean",n=null,s=!1){t=F(t,"x","norm");const o=qN(t,e,n);let r=o.shape;if(s){const i=qe(n,t.shape);r=Wt(o.shape,i)}return X(o,r)}function qN(t,e,n=null){if(t.rank===0)return $n(t);if(t.rank!==1&&n===null)return qN(X(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Oe($n(t),n);if(e===1/0)return so($n(t),n);if(e===-1/0)return _f($n(t),n);if(e==="euclidean"||e===2)return _n(Oe(aa($n(t),it(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return so(Oe($n(t),n[0]),n[1]-1);if(e===1/0)return so(Oe($n(t),n[1]),n[0]);if(e===-1/0)return _f(Oe($n(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return _n(Oe(St(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Nm=Q({norm_:SX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(t,e=null,n=!1){return Nm(t,"euclidean",e,n)}const EX=Q({euclideanNorm_:IX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(t){const n={x:F(t,"x","exp")};return H.runKernel(Wu,n)}const Vo=Q({exp_:kX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(t,e=0){const n=F(t,"x","expandDims","string_or_numeric");$(e<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:e};return H.runKernel(Bp,s,o)}const Wn=Q({expandDims_:$X});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(t){const n={x:F(t,"x","expm1")};return H.runKernel(Gu,n)}const NX=Q({expm1_:TX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(t,e){const n=F(t,"x","tile","string_or_numeric");$(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const s={x:n},o={reps:e};return H.runKernel(Cd,s,o)}const Zs=Q({tile_:AX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(t,e,n,s="float32"){e==null&&(e=t);const o=Ke([t,e],s),r=t<=e?t:e;for(let a=0;a<r;++a)o.set(1,a,a);const i=X(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Zs(Wn(i,0),[n[0],1,1]);if(n.length===2)return Zs(Wn(Wn(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Zs(Wn(Wn(Wn(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const XN=Q({eye_:RX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t){const n={x:F(t,"x","floor","float32")};return H.runKernel(Hu,n)}const Am=Q({floor_:DX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(t,e,n=0,s=0){const o=F(t,"x","gather"),r=F(e,"indices","gather","int32"),i={x:o,indices:r},a={axis:n,batchDims:s};return H.runKernel(Up,i,a)}const nx=Q({gather_:OX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(t,e){let n=F(t,"a","greater","string_or_numeric"),s=F(e,"b","greater","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(jp,o)}const Cs=Q({greater_:LX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FX(t,e){let n=F(t,"a","greaterEqual","string_or_numeric"),s=F(e,"b","greaterEqual","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(qu,o)}const wa=Q({greaterEqual_:FX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PX(t){const n={input:F(t,"input","imag")};return H.runKernel(k0,n)}const sx=Q({imag_:PX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(t){const n={x:F(t,"x","isFinite")};return H.runKernel(Qu,n)}const BX=Q({isFinite_:MX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t){const n={x:F(t,"x","isInf")};return H.runKernel(Yu,n)}const UX=Q({isInf_:VX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(t){const n={x:F(t,"x","isNaN")};return H.runKernel(Ju,n)}const zX=Q({isNaN_:jX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(t,e=.2){const s={x:F(t,"x","leakyRelu")},o={alpha:e};return H.runKernel(zp,s,o)}const ox=Q({leakyRelu_:WX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(t,e){let n=F(t,"a","less","string_or_numeric"),s=F(e,"b","less","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Wp,o)}const Sf=Q({less_:GX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(t,e){let n=F(t,"a","lessEqual","string_or_numeric"),s=F(e,"b","lessEqual","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Gp,o)}const Qc=Q({lessEqual_:HX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t,e=5,n=1,s=1,o=.5){const r=F(t,"x","localResponseNormalization");$(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),$($c(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=r,a=!1;r.rank===3&&(a=!0,i=X(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const c={x:i},l={depthRadius:e,bias:n,alpha:s,beta:o},u=H.runKernel(Xp,c,l);return a?X(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const qX=Q({localResponseNormalization_:KX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XX(t){const n={x:F(t,"x","log","float32")};return H.runKernel(Zu,n)}const Uo=Q({log_:XX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(t){const n={x:F(t,"x","log1p")};return H.runKernel(ed,n)}const QN=Q({log1p_:QX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(t,e){$(ib(t),()=>"The f passed in variableGrads(f) must be a function"),$(e==null||Array.isArray(e)&&e.every(l=>l instanceof wf),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in H.registeredVariables)e.push(H.registeredVariables[l])}const s=n?e.filter(l=>!l.trainable):null,o=e.length;e=e.filter(l=>l.trainable),$(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:i,grads:a}=H.gradients(t,e,null,r);$(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),$(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const c={};return e.forEach((l,u)=>{a[u]!=null&&(c[l.name]=a[u])}),s!=null&&s.forEach(l=>c[l.name]=null),{value:i,grads:c}}function Dc(t){return H.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JX(t){const n={x:F(t,"x","neg")};return H.runKernel(nm,n)}const Pt=Q({neg_:JX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t){const n={x:F(t,"x","softplus")};return H.runKernel(gd,n)}const Id=Q({softplus_:ZX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(t){const e=F(t,"x","logSigmoid");return Dc(s=>({value:Pt(Id(Pt(s))),gradFunc:i=>W(i,Xc(Pt(s)))}))(e)}const tQ=Q({logSigmoid_:eQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e){let n=F(t,"a","sub"),s=F(e,"b","sub");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(yd,o)}const Ve=Q({sub_:nQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQ(t,e=-1){const n=F(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Dc((o,r)=>{const a=so(o,e,!0),c=Ve(o,a),l=Ve($e(c,"float32"),Uo(Oe(Vo(c),e,!0)));return r([l]),{value:l,gradFunc:(d,h)=>{const[f]=h,p=!0,m=Vo(f);return Ve(d,W(Oe(d,e,p),m))}}})(n)}const YN=Q({logSoftmax_:sQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(t,e=null,n=!1){const s=F(t,"x","logSumExp"),o=qe(e,s.shape),r=so(s,o,!0),i=Ve(s,r),a=Vo(i),c=Oe(a,o),l=Uo(c),u=we(X(r,l.shape),l);if(n){const d=Wt(u.shape,o);return X(u,d)}return u}const JN=Q({logSumExp_:oQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(t,e){const n=F(t,"a","logicalAnd","bool"),s=F(e,"b","logicalAnd","bool");ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Hp,o)}const ur=Q({logicalAnd_:rQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQ(t){const n={x:F(t,"x","logicalNot","bool")};return H.runKernel(Kp,n)}const rx=Q({logicalNot_:iQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(t,e){const n=F(t,"a","logicalOr","bool"),s=F(e,"b","logicalOr","bool");ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(qp,o)}const ZN=Q({logicalOr_:aQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(t,e){const n=F(t,"a","logicalXor","bool"),s=F(e,"b","logicalXor","bool");return ze(n.shape,s.shape),ur(ZN(t,e),rx(ur(t,e)))}const lQ=Q({logicalXor_:cQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(t,e,n,s,o){const r=F(t,"x","maxPool"),i=1;let a=r,c=!1;r.rank===3&&(c=!0,a=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),$(In(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Jn("maxPool",s,o);const l={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o},d=H.runKernel(Yp,l,u);return c?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ix=Q({maxPool_:uQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(t,e=[1,1,1],n,s,o,r="NDHWC"){const i=F(t,"x","maxPool3d");let a=i,c=!1;i.rank===4&&(c=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),$(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Jn("maxPool3d",s,o);const l={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=H.runKernel(Jp,l,u);return c?X(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const hQ=Q({maxPool3d_:dQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(t,e){let n=F(t,"a","maximum"),s=F(e,"b","maximum");[n,s]=Mt(n,s),n.dtype==="bool"&&(n=$e(n,"int32"),s=$e(s,"int32")),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(td,o)}const hi=Q({maximum_:fQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(t,e=null,n=!1){const o={x:F(t,"x","mean")},r={axis:e,keepDims:n};return H.runKernel(Zp,o,r)}const zt=Q({mean_:pQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rn(t,e="float32"){if(vr(t),e==="complex64"){const s=rn(t,"float32"),o=rn(t,"float32");return ta(s,o)}const n=Cn(ce(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fi(t,e="float32"){if(vr(t),e==="complex64"){const s=fi(t,"float32"),o=rn(t,"float32");return ta(s,o)}const n=t0(ce(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQ(t,e){let n=F(t,"a","minimum"),s=F(e,"b","minimum");[n,s]=Mt(n,s),n.dtype==="bool"&&(n=$e(n,"int32"),s=$e(s,"int32")),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(nd,o)}const ru=Q({minimum_:mQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(t,e,n){$(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=F(t,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");$(e.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)$(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),$(e[a][0]>=0&&e[a][0]<=s.shape[a]-o&&e[a][1]>=0&&e[a][1]<=s.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:e,mode:n},i={x:s};return H.runKernel(tm,i,r)}const vQ=Q({mirrorPad_:gQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(t,e){let n=F(t,"a","mod"),s=F(e,"b","mod");[n,s]=Mt(n,s);const o={a:n,b:s};return H.runKernel(sd,o)}const yQ=Q({mod_:bQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e=null,n=!1){t=F(t,"x","moments");const s=qe(e,t.shape),o=zt(t,s,n);let r=o.shape;n||(r=Wt(o.shape,s));const i=St(Ve($e(t,"float32"),X(o,r))),a=zt(i,s,n);return{mean:o,variance:a}}const ax=Q({moments_:xQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(t,e){let n=F(t,"a","notEqual","string_or_numeric"),s=F(e,"b","notEqual","string_or_numeric");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(sm,o)}const If=Q({notEqual_:wQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e,n=1,s=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:F(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:s};return H.runKernel(rm,i,a)}const eA=Q({oneHot_:CQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t){const n={x:F(t,"x","onesLike")};return H.runKernel(om,n)}const js=Q({onesLike_:_Q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQ(t,e,n=0){const s=F(t,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},r={x:s};return H.runKernel(am,r,o)}const cx=Q({pad_:SQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t,e,n){const s=F(t,"x","spaceToBatchND");$(s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),$(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),$(s.shape.reduce((i,a,c)=>c>0&&c<=e.length?i&&(a+n[c-1][0]+n[c-1][1])%e[c-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:s},r={blockShape:e,paddings:n};return H.runKernel(vm,o,r)}const lx=Q({spaceToBatchND_:IQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQ(t,e,n,s,o,r,i){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=F(t,"x","maxPool");let c=a,l=!1;a.rank===3&&(l=!0,c=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(In(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const u=Ws(c.shape,e,r,o,s),d=[u.dilationHeight,u.dilationWidth];let h;s==="same"?h=$Q([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=kQ([u.inHeight,u.inWidth],d,h),v=f?s:"valid",g=f?c:lx(c,d,p),x=(n==="avg"?()=>Q0(g,e,r,v,i):()=>ix(g,e,r,v,i))(),y=f?x:Y0(x,d,m);return l?X(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function kQ(t,e,n){const s=n.map(u=>u[0]),o=n.map(u=>u[1]),r=t.concat(s,o),i=e.map((u,d)=>(u-r[d]%u)%u),a=o.map((u,d)=>u+i[d]),c=e.map((u,d)=>[s[d],a[d]]),l=e.map((u,d)=>[0,i[d]]);return[c,l]}function $Q(t,e){const s=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),r=s.map((i,a)=>i-o[a]);return s.map((i,a)=>[o[a],r[a]])}const TQ=Q({pool_:EQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(t,e){const n=F(t,"x","prelu"),s=F(e,"alpha","prelu"),o={x:n,alpha:s};return H.runKernel(cm,o)}const ux=Q({prelu_:NQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t,e=null,n=!1){let s=F(t,"x","prod");s.dtype==="bool"&&(s=$e(s,"int32"));const o={x:s},r={axis:e,keepDims:n};return H.runKernel(lm,o,r)}const RQ=Q({prod_:AQ});var dx={exports:{}};dx.exports;(function(t){(function(e,n,s){function o(c){var l=this,u=a();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=u(" "),l.s1=u(" "),l.s2=u(" "),l.s0-=u(c),l.s0<0&&(l.s0+=1),l.s1-=u(c),l.s1<0&&(l.s1+=1),l.s2-=u(c),l.s2<0&&(l.s2+=1),u=null}function r(c,l){return l.c=c.c,l.s0=c.s0,l.s1=c.s1,l.s2=c.s2,l}function i(c,l){var u=new o(c),d=l&&l.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&r(d,u),h.state=function(){return r(u,{})}),h}function a(){var c=4022871197,l=function(u){u=String(u);for(var d=0;d<u.length;d++){c+=u.charCodeAt(d);var h=.02519603282416938*c;c=h>>>0,h-=c,h*=c,c=h>>>0,h-=c,c+=h*4294967296}return(c>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:this.alea=i})(ma,t)})(dx);var DQ=dx.exports,hx={exports:{}};hx.exports;(function(t){(function(e,n,s){function o(a){var c=this,l="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},a===(a|0)?c.x=a:l+=a;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,c.next()}function r(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c}function i(a,c){var l=new o(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&r(u,l),d.state=function(){return r(l,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(ma,t)})(hx);var OQ=hx.exports,fx={exports:{}};fx.exports;(function(t){(function(e,n,s){function o(a){var c=this,l="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(d^d<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,a===(a|0)?c.x=a:l+=a;for(var u=0;u<l.length+64;u++)c.x^=l.charCodeAt(u)|0,u==l.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function r(a,c){return c.x=a.x,c.y=a.y,c.z=a.z,c.w=a.w,c.v=a.v,c.d=a.d,c}function i(a,c){var l=new o(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&r(u,l),d.state=function(){return r(l,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(ma,t)})(fx);var LQ=fx.exports,px={exports:{}};px.exports;(function(t){(function(e,n,s){function o(a){var c=this;c.next=function(){var u=c.x,d=c.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,c.i=d+1&7,f};function l(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}l(c,a)}function r(a,c){return c.x=a.x.slice(),c.i=a.i,c}function i(a,c){a==null&&(a=+new Date);var l=new o(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,u&&(u.x&&r(u,l),d.state=function(){return r(l,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(ma,t)})(px);var FQ=px.exports,mx={exports:{}};mx.exports;(function(t){(function(e,n,s){function o(a){var c=this;c.next=function(){var u=c.w,d=c.X,h=c.i,f,p;return c.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,c.i=h,p+(u^u>>>16)|0};function l(u,d){var h,f,p,m,v,g=[],b=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,h=g[m&127]^=f+v,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;u.w=v,u.X=g,u.i=p}l(c,a)}function r(a,c){return c.i=a.i,c.w=a.w,c.X=a.X.slice(),c}function i(a,c){a==null&&(a=+new Date);var l=new o(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,u&&(u.X&&r(u,l),d.state=function(){return r(l,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(ma,t)})(mx);var PQ=mx.exports,gx={exports:{}};gx.exports;(function(t){(function(e,n,s){function o(a){var c=this,l="";c.next=function(){var d=c.b,h=c.c,f=c.d,p=c.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,c.b=d=d<<20^d>>>12^h,c.c=h=h-f|0,c.d=f<<16^h>>>16^p,c.a=p-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,a===Math.floor(a)?(c.a=a/4294967296|0,c.b=a|0):l+=a;for(var u=0;u<l.length+20;u++)c.b^=l.charCodeAt(u)|0,c.next()}function r(a,c){return c.a=a.a,c.b=a.b,c.c=a.c,c.d=a.d,c}function i(a,c){var l=new o(a),u=c&&c.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,u&&(typeof u=="object"&&r(u,l),d.state=function(){return r(l,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(ma,t)})(gx);var MQ=gx.exports,tA={exports:{}};const BQ={},VQ=Object.freeze(Object.defineProperty({__proto__:null,default:BQ},Symbol.toStringTag,{value:"Module"})),UQ=kV(VQ);(function(t){(function(e,n,s){var o=256,r=6,i=52,a="random",c=s.pow(o,r),l=s.pow(2,i),u=l*2,d=o-1,h;function f(y,w,C){var _=[];w=w==!0?{entropy:!0}:w||{};var S=g(v(w.entropy?[y,x(n)]:y??b(),3),_),I=new p(_),E=function(){for(var O=I.g(r),A=c,P=0;O<l;)O=(O+P)*o,A*=o,P=I.g(1);for(;O>=u;)O/=2,A/=2,P>>>=1;return(O+P)/A};return E.int32=function(){return I.g(4)|0},E.quick=function(){return I.g(4)/4294967296},E.double=E,g(x(I.S),n),(w.pass||C||function(O,A,P,z){return z&&(z.S&&m(z,I),O.state=function(){return m(I,{})}),P?(s[a]=O,A):O})(E,S,"global"in w?w.global:this==s,w.state)}function p(y){var w,C=y.length,_=this,S=0,I=_.i=_.j=0,E=_.S=[];for(C||(y=[C++]);S<o;)E[S]=S++;for(S=0;S<o;S++)E[S]=E[I=d&I+y[S%C]+(w=E[S])],E[I]=w;(_.g=function(O){for(var A,P=0,z=_.i,G=_.j,M=_.S;O--;)A=M[z=d&z+1],P=P*o+M[d&(M[z]=M[G=d&G+A])+(M[G]=A)];return _.i=z,_.j=G,P})(o)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function v(y,w){var C=[],_=typeof y,S;if(w&&_=="object")for(S in y)try{C.push(v(y[S],w-1))}catch{}return C.length?C:_=="string"?y:y+"\0"}function g(y,w){for(var C=y+"",_,S=0;S<C.length;)w[d&S]=d&(_^=w[d&S]*19)+C.charCodeAt(S++);return x(w)}function b(){try{var y;return h&&(y=h.randomBytes)?y=y(o):(y=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(y)),x(y)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(y){return String.fromCharCode.apply(0,y)}if(g(s.random(),n),t.exports){t.exports=f;try{h=UQ}catch{}}else s["seed"+a]=f})(typeof self<"u"?self:ma,[],Math)})(tA);var jQ=tA.exports,zQ=DQ,WQ=OQ,GQ=LQ,HQ=FQ,KQ=PQ,qQ=MQ,Ca=jQ;Ca.alea=zQ;Ca.xor128=WQ;Ca.xorwow=GQ;Ca.xorshift7=HQ;Ca.xor4096=KQ;Ca.tychei=qQ;var vx=Ca;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nA{constructor(e,n,s,o,r){this.mean=e,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=vx.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,s=!1;for(;!s;){let o,r,i;do o=2*this.random()-1,r=2*this.random()-1,i=o*o+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(e))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class XQ{constructor(e=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=vx.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQ(t,e=0,n=1,s,o){if(vr(t),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new nA(e,n,s,!1,o),i=Ke(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const YQ=Q({randomNormal_:QQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQ(t,e=0,n=1,s="float32",o){vr(t);const r=Ke(t,s),i=new XQ(e,n,null,o);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const Ed=Q({randomUniform_:JQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(t,e,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:s};return H.runKernel(O0,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(t){const n={input:F(t,"input","real")};return H.runKernel(L0,n)}const Ef=Q({real_:ZQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(t){const n={x:F(t,"x","reciprocal")};return H.runKernel(id,n)}const tY=Q({reciprocal_:eY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(t){const n={x:F(t,"x","relu")};return H.runKernel(ad,n)}const _a=Q({relu_:nY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(t){const n={x:F(t,"x","relu6")};return H.runKernel(cd,n)}const sA=Q({relu6_:sY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(t,e){const s={x:F(t,"x","reverse")},o={dims:e};return H.runKernel(fm,s,o)}const ca=Q({reverse_:oY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(t){const n={x:F(t,"x","round")};return H.runKernel(ld,n)}const oA=Q({round_:rY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iY(t){const n={x:F(t,"x","rsqrt","float32")};return H.runKernel(ud,n)}const rA=Q({rsqrt_:iY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(t){const n={x:F(t,"x","selu")};return H.runKernel(dd,n)}const iA=Q({selu_:aY});function cY(t,e,n,s,o,r=[1,1],i="NHWC"){const a=F(t,"x","separableConv2d"),c=F(e,"depthwiseFilter","separableConv2d"),l=F(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");$(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),$(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),$(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),$(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),$(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const h=c.shape[2],f=c.shape[3];$(l.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${l.shape[2]}.`);const p=ex(u,c,s,o,i,r),v=ia(p,l,1,"valid",i);return d?X(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const aA=Q({separableConv2d_:cY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lY(t){const n={x:F(t,"x","sign")};return H.runKernel(pd,n)}const uY=Q({sign_:lY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(t){const n={x:F(t,"x","sin","float32")};return H.runKernel(hd,n)}const cA=Q({sin_:dY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t){const n={x:F(t,"x","sinh")};return H.runKernel(fd,n)}const lA=Q({sinh_:hY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(t,e,n){const s=F(t,"x","slice1d");return $(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),xt(s,[e],[n])}const bx=Q({slice1d_:fY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(t,e,n){const s=F(t,"x","slice2d");return $(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const uA=Q({slice2d_:pY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t,e,n){const s=F(t,"x","slice3d");return $(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const yx=Q({slice3d_:mY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(t,e,n){const s=F(t,"x","slice4d");return $(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const kf=Q({slice4d_:gY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vY(t,e=-1){const n=F(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const s={logits:n},o={dim:e};return H.runKernel(ym,s,o)}const xx=Q({softmax_:vY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(t){$(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(_0,e)}const dA=Q({fft_:bY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(t){$(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(E0,e)}const _b=Q({ifft_:yY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(t){const e=t.shape[t.shape.length-1],n=t.size/e;let s;if(e<=2){const o=X(t,[n,e]);s=_b(o)}else{const o=[n,2*(e-1)],r=X(Ef(t),[n,e]),i=X(sx(t),[n,e]),a=ca(xt(r,[0,1],[n,e-2]),1),c=W(ca(xt(i,[0,1],[n,e-2]),1),it(-1)),l=qn([r,a],1),u=qn([i,c],1),d=X(ta(l,u),[o[0],o[1]]);s=_b(d)}if(s=Ef(s),t.rank===3&&t.shape[0]!==0){const o=s,r=t.shape[0];s=X(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const wY=Q({irfft_:xY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(t,e,n=0){const o={x:F(t,"x","split")},r={numOrSizeSplits:e,axis:n};return H.runKernel(bm,o,r)}const vs=Q({split_:CY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(t,e){$(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const s=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(v=>0),m=t.shape.map(v=>v);m[t.shape.length-1]=e,o=xt(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=qn([t,rn(p)],t.shape.length-1),n=e}else o=t;const r=et(o),i=X(ta(o,r),[s,n]),a=dA(i),c=Math.floor(n/2)+1,l=Ef(a),u=sx(a),d=vs(l,[c,n-c],l.shape.length-1),h=vs(u,[c,n-c],u.shape.length-1),f=o.shape.slice();return f[o.shape.length-1]=c,X(ta(d[0],h[0]),f)}const SY=Q({rfft_:_Y});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(t,e){let n=F(t,"a","squaredDifference"),s=F(e,"b","squaredDifference");[n,s]=Mt(n,s),ze(n.shape,s.shape);const o={a:n,b:s},r={};return H.runKernel(bd,o,r)}const EY=Q({squaredDifference_:IY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(t,e){const n=F(t,"x","squeeze","string_or_numeric");return X(n,ai(n.shape,e).newShape)}const kd=Q({squeeze_:kY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t,e=0){const n=AN(t,"tensors","stack","string_or_numeric");$(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&$(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:e};return H.runKernel(im,s,o)}const dr=Q({stack_:$Y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(t,e=0){const s={x:F(t,"x","step")},o={alpha:e};return H.runKernel(_d,s,o)}const $d=Q({step_:TY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(t,e,n,s,o=0,r=0,i=0,a=0,c=0){const u={x:F(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:c};return H.runKernel(V0,u,d)}const AY=Q({stridedSlice_:NY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(t){const n={x:F(t,"x","tan","float32")};return H.runKernel(xd,n)}const DY=Q({tan_:RY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rs(t,e){PT(t);const n=Sm(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Im(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ph(t,e,n){if(PT(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=Sm(t,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Im(t,e,s,n)}function hA(t,e,n){const s=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(t.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+t.length-s)throw new Error(r+` update.rank != ${o+t.length-s}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(r+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+s])throw new Error(r+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function OY(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}hA(n,e,t)}function Sa(t,e,n){const s=e.shape.length,o=s>1?e.shape[s-1]:1,r=n.length;let i=1;for(let d=o;d<r;++d)i*=n[d];const a=o<1?1:o,c=ce(e.shape)/a,l=[...De(n.slice(0,o)),1],u=ce(n);return{sliceRank:o,numUpdates:c,sliceSize:i,strides:l,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(t,e=1,n=!0){const s=F(t,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const r={x:s},i={k:e,sorted:n},[a,c]=H.runKernel(U0,r,i);return{values:a,indices:c}}const FY=Q({topk_:LY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(t,e=0,n=1,s,o){if(vr(t),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new nA(e,n,s,!0,o),i=Ke(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const fA=Q({truncatedNormal_:PY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(t,e=0){const n=F(t,"x","unique","string_or_numeric");$(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:e},[r,i]=H.runKernel(z0,s,o);return{values:r,indices:i}}const BY=Q({unique_:MY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(t,e,n){const s=F(t,"x","unsortedSegmentSum"),o=F(e,"segmentIds","unsortedSegmentSum","int32");$($c(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},i={numSegments:n};return H.runKernel(wm,r,i)}const pA=Q({unsortedSegmentSum_:VY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(t,e=0){const n=F(t,"x","unstack","string_or_numeric");$(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:e};return H.runKernel(xm,s,o)}const la=Q({unstack_:UY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(t,e=!0,n,s){return H.makeVariable(t,e,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mA(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const s=Ke(t,"int32"),o=Ke([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const i=s.indexToLoc(n[r]),a=r*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(t,e,n){const s=F(t,"x","transpose");if(e==null&&(e=s.shape.map((i,a)=>a).reverse()),$(s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${e}.`),e.forEach(i=>{$(i>=0&&i<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${e}`)}),s.rank<=1)return s.clone();const o={x:s},r={perm:e};return s.dtype==="complex64"?J(()=>{let i=Ef(s),a=sx(s);return i=H.runKernel(lc,{x:i},r),a=H.runKernel(lc,{x:a},r),n&&(a=Pt(a)),ta(i,a)}):H.runKernel(lc,o,r)}const Ze=Q({transpose_:zY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WY(t,e){if(e==null)return t.shape.slice();if(at(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let s=0;s<t.shape.length;s++)e[s]==null&&t.shape[s]!=null?n.push(t.shape[s]):n.push(e[s]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(t,e,n,s){const o=F(t,"x","dropout");if($(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),$(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Kt?o.clone():o;const r=WY(o,n),i=1-e,a=Fe(Am(we(Ed(r,0,1,"float32",s),i)),i);return W(o,a)}const HY=Q({dropout_:GY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(t,e,n,s,o,r="NHWC",i){let a=t;t.rank===3&&(a=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=X(e,[1,e.shape[0],e.shape[1],e.shape[2]])),$(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),$(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),$(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=r==="NHWC"?a.shape[3]:a.shape[1],u=r==="NHWC"?c.shape[3]:c.shape[1];$(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),$(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Jn("conv2dDerFilter",o,i);const d={x:a,dy:c},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,filterShape:n};return H.runKernel(h0,d,h)}const wx=Q({conv2DBackpropFilter_:KY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cx(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return W(t,$d(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function _x(t,e){let n=e;const s=Zt(t.shape,e.shape);return s.length>0&&(n=Oe(n,s)),X(n,t.shape)}function Sx(t,e,n,s){if(e==="linear")return t;if(e==="relu")return _a(t);if(e==="elu")return Tm(t);if(e==="relu6")return sA(t);if(e==="prelu")return ux(t,n);if(e==="leakyrelu")return ox(t,s);if(e==="sigmoid")return Xc(t);throw new Error(`Unknown fused activation ${e}.`)}const Ix=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY({x:t,filter:e,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:u}){if(c=c||"linear",Ix(H.state.gradientDepth,c)===!1){$(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=ia(t,e,n,s,o,r,i);return a!=null&&(C=we(C,a)),Sx(C,c,l,u)}const d=F(t,"x","conv2d","float32"),h=F(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=X(d,[1,d.shape[0],d.shape[1],d.shape[2]])),$(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),$(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Jn("fused conv2d",s,i);const m=o==="NHWC"?f.shape[3]:f.shape[1];$(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),$(In(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const v=gn(f.shape,h.shape,n,r,s,i);let g;a!=null&&(g=F(a,"bias","fused conv2d"),[g]=Mt(g,d),o==="NHWC"?ze(v.outShape,g.shape):($(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),$(g.shape.length===0||g.shape[0]===v.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let b;if(l!=null){const C=l.shape;if($(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)$(C[0]===1||C[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${v.outChannels}).`);else if(C.length===3)try{ze(C,v.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(S)}b=F(l,"prelu weights","fused conv2d")}const x=(C,_)=>{$(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[S,I,E,O]=_,A=Cx(C,E,c);$(oa(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const P=J0(I.shape,A,S,n,s),z=wx(I,A,S.shape,n,s),G=[P,z];if(O!=null){const M=_x(O,A);G.push(M)}return G},y={x:f,filter:h,bias:g,preluActivationWeights:b},w={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i,activation:c,leakyreluAlpha:u};return a==null?Dc((_,S,I)=>{let E=H.runKernel(bf,y,w);return I([S,_,E]),p&&(E=X(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(f,h):Dc((_,S,I,E)=>{let O=H.runKernel(bf,y,w);return E([S,_,O,I]),p&&(O=X(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:x}})(f,h,g)}const XY=Q({fusedConv2d_:qY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(t,e,n,s,o,r=[1,1],i){let a=t;t.rank===3&&(a=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c=e;c.rank===3&&(c=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:a,dy:c},u={strides:s,pad:o,dimRoundingMode:i,dilations:r,filterShape:n};return H.runKernel(y0,l,u)}const YY=Q({depthwiseConv2dNativeBackpropFilter_:QY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(t,e,n,s,o,r=[1,1],i){let a=e,c=!1;e.rank===3&&(c=!0,a=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:a,filter:n},u={strides:s,pad:o,dimRoundingMode:i,dilations:r,inputShape:t},d=H.runKernel(x0,l,u);return c?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ZY=Q({depthwiseConv2dNativeBackpropInput_:JY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7({a:t,b:e,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(Ix(H.state.gradientDepth,r)===!1){let O=ot(t,e,n,s);return o!=null&&(O=we(O,o)),Sx(O,r,i,a)}let c=F(t,"a","fused matMul"),l=F(e,"b","fused matMul");[c,l]=Mt(c,l);const u=n?c.shape[c.rank-2]:c.shape[c.rank-1],d=s?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?c.shape[c.rank-1]:c.shape[c.rank-2],f=s?l.shape[l.rank-2]:l.shape[l.rank-1],p=c.shape.slice(0,-2),m=l.shape.slice(0,-2),v=ce(p),g=ce(m);$(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${c.shape} and ${l.shape} and transposeA=${n} and transposeB=${s} must match.`);const x=ze(c.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,f]),y=n?X(c,[v,u,h]):X(c,[v,h,u]),w=s?X(l,[g,f,d]):X(l,[g,d,f]);let C;o!=null&&(C=F(o,"bias","fused matMul"),[C]=Mt(C,c),ze(x,C.shape));let _;i!=null&&(_=F(i,"prelu weights","fused matMul"));const S=(O,A)=>{const[P,z,G,M]=A,R=Cx(X(O,G.shape),G,r);let D,j;if(!n&&!s?(D=ot(R,z,!1,!0),j=ot(P,R,!0,!1)):!n&&s?(D=ot(R,z,!1,!1),j=ot(R,P,!0,!1)):n&&!s?(D=ot(z,R,!1,!0),j=ot(P,R,!1,!1)):(D=ot(z,R,!0,!0),j=ot(R,P,!0,!0)),o!=null){const ne=_x(M,R);return[D,j,ne]}else return[D,j]},I={a:y,b:w,bias:C,preluActivationWeights:_},E={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:a};return o==null?Dc((A,P,z)=>{const G=H.runKernel(vf,I,E);return z([A,P,G]),{value:X(G,x),gradFunc:S}})(y,w):Dc((A,P,z,G)=>{const M=H.runKernel(vf,I,E);return G([A,P,M,z]),{value:X(M,x),gradFunc:S}})(y,w,C)}const aS=Q({fusedMatMul_:e7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7(t,e,n,s,o="bilinear",r=0){const i=F(t,"image","cropAndResize"),a=F(e,"boxes","cropAndResize","float32"),c=F(n,"boxInd","cropAndResize","int32"),l=a.shape[0];$(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),$(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),$(c.rank===1&&c.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),$(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),$(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),$(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const u={image:i,boxes:a,boxInd:c},d={method:o,extrapolationValue:r,cropSize:s};return H.runKernel(g0,u,d)}const n7=Q({cropAndResize_:t7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(t){const e=F(t,"image","flipLeftRight","float32");$(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return H.runKernel(I0,n,{})}const o7=Q({flipLeftRight_:s7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(t){const e=F(t,"image","grayscaleToRGB"),n=e.rank-1,s=e.shape[n];$(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),$(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Zs(e,o)}const i7=Q({grayscaleToRGB_:r7});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(t){const e=F(t,"image","RGBToGrayscale"),n=e.rank-1,s=e.shape[n];$(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),$(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const o=e.dtype,r=$e(e,"float32"),i=rs([.2989,.587,.114]);let a;switch(e.rank){case 2:a=ml("ij,j->i",r,i);break;case 3:a=ml("ijk,k->ij",r,i);break;case 4:a=ml("ijkl,l->ijk",r,i);break;case 5:a=ml("ijklm,m->ijkl",r,i);break;case 6:a=ml("ijklmn,n->ijklm",r,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Wn(a,-1),$e(a,o)}const c7=Q({rgbToGrayscale_:a7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(t,e,n=0,s=.5){const o=F(t,"image","rotateWithOffset","float32");$(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},i={radians:e,fillValue:n,center:s};return H.runKernel(W0,r,i)}const u7=Q({rotateWithOffset_:l7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t,e,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=t.shape[0];return n=Math.min(n,i),$(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),$(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),$(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),$(e.rank===1,()=>"scores must be a 1D tensor"),$(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),$(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=F(t,"boxes","nonMaxSuppression","float32"),i=F(e,"scores","nonMaxSuppression","float32"),a=Yc(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const c={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return H.runKernel(A0,{boxes:r,scores:i},c)}const h7=Q({nonMaxSuppression_:d7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7(t,e,n){const s=p7(t,e,n),o=s<0?-(s+1):s;t.splice(o,0,e)}function p7(t,e,n){return g7(t,e,n||m7)}function m7(t,e){return t>e?1:t<e?-1:0}function g7(t,e,n){let s=0,o=t.length,r=0,i=!1;for(;s<o;){r=s+(o-s>>>1);const a=n(e,t[r]);a>0?s=r+1:(o=r,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ex(t,e,n,s,o){return Tx(t,e,n,s,o,0)}function kx(t,e,n,s,o,r){return Tx(t,e,n,s,o,0,!1,r,!0)}function $x(t,e,n,s,o,r){return Tx(t,e,n,s,o,r,!0)}function Tx(t,e,n,s,o,r,i=!1,a=!1,c=!1){const l=[];for(let v=0;v<e.length;v++)e[v]>o&&l.push({score:e[v],boxIndex:v,suppressBeginIndex:0});l.sort(cS);const u=r>0?-.5/r:0,d=[],h=[];for(;d.length<n&&l.length>0;){const v=l.pop(),{score:g,boxIndex:b,suppressBeginIndex:x}=v;if(g<o)break;let y=!1;for(let w=d.length-1;w>=x;--w){const C=v7(t,b,d[w]);if(C>=s){y=!0;break}if(v.score=v.score*b7(s,u,C),v.score<=o)break}v.suppressBeginIndex=d.length,y||(v.score===g?(d.push(b),h.push(v.score)):v.score>o&&f7(l,v,cS))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),c&&(m.validOutputs=f),m}function v7(t,e,n){const s=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),c=Math.max(s[1],s[3]),l=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),f=(a-r)*(c-i),p=(d-l)*(h-u);if(f<=0||p<=0)return 0;const m=Math.max(r,l),v=Math.max(i,u),g=Math.min(a,d),b=Math.min(c,h),x=Math.max(g-m,0)*Math.max(b-v,0);return x/(f+p-x)}function b7(t,e,n){const s=Math.exp(e*n*n);return n<=t?s:0}function cS(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function y7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=F(t,"boxes","nonMaxSuppressionAsync"),i=F(e,"scores","nonMaxSuppressionAsync"),a=Yc(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const c=await Promise.all([r.data(),i.data()]),l=c[0],u=c[1],{selectedIndices:d}=Ex(l,u,n,s,o);return r!==t&&r.dispose(),i!==e&&i.dispose(),rs(d,"int32")}const x7=y7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),c=Yc(i,a,n,s,o,r);n=c.maxOutputSize,s=c.iouThreshold,o=c.scoreThreshold,r=c.softNmsSigma;const l={boxes:i,scores:a},u={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=H.runKernel(D0,l,u);return{selectedIndices:d[0],selectedScores:d[1]}}const C7=Q({nonMaxSuppressionWithScore_:w7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),c=Yc(i,a,n,s,o,r);n=c.maxOutputSize,s=c.iouThreshold,o=c.scoreThreshold,r=c.softNmsSigma;const l=await Promise.all([i.data(),a.data()]),u=l[0],d=l[1],{selectedIndices:h,selectedScores:f}=$x(u,d,n,s,o,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:rs(h,"int32"),selectedScores:rs(f)}}const S7=_7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),c=Yc(i,a,n,s,o,null),l=c.maxOutputSize,u=c.iouThreshold,d=c.scoreThreshold,h={boxes:i,scores:a},f={maxOutputSize:l,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:r},p=H.runKernel(R0,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const E7=Q({nonMaxSuppressionPadded_:I7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function k7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),c=Yc(i,a,n,s,o,null),l=c.maxOutputSize,u=c.iouThreshold,d=c.scoreThreshold,[h,f]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=kx(h,f,l,u,d,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:rs(p,"int32"),validOutputs:it(m,"int32")}}const $7=k7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7(t,e,n=!1,s=!1){const o=F(t,"images","resizeBilinear");$(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),$(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),$(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=X(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},c={alignCorners:n,halfPixelCenters:s,size:e},l=H.runKernel(hm,a,c);return i?X(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const gA=Q({resizeBilinear_:T7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7(t,e,n=!1,s=!1){const o=F(t,"images","resizeNearestNeighbor");$(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),$(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),$(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),$(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=X(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},c={alignCorners:n,halfPixelCenters:s,size:e},l=H.runKernel(dm,a,c);return i?X(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const vA=Q({resizeNearestNeighbor_:N7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A7(t,e="binary",n=!1,s=.5){const o=F(t,"image","threshold"),r=.2989,i=.587,a=.114,c=o.shape[0]*o.shape[1];let l=W(rs([s]),255),u,d,h,f;if($(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),$(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),$(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),$(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[u,d,h]=vs(o,[1,1,1],-1);const v=W(u,r),g=W(d,i),b=W(h,a);f=we(we(v,g),b)}else f=t;if(e==="otsu"){const v=N5($e(oA(f),"int32"),Bl([]),256);l=R7(v,c)}const p=n?Qc(f,l):Cs(f,l);return $e(W(p,255),"int32")}function R7(t,e){let n=rs([-1]),s=rs([0]),o=rs([0]),r,i,a,c,l,u;for(let d=0;d<t.size-1;d++){r=xt(t,0,d+1),i=xt(t,d+1),l=Fe(Oe(r),e),u=Fe(Oe(i),e);const h=Oe(W(r,iu(0,r.size)));a=Fe(h,Oe(r));const f=$m(i.shape,r.size),p=we(iu(0,i.size),f),m=W(i,p);c=Fe(Oe(m),Oe(i));const v=Ve(a,c),g=Ve(a,c),b=W(l,u);o=W(W(b,v),g);const x=Cs(o,s);s=On(x,o,s),n=On(x,rs([d]),n)}return n}const D7=Q({threshold_:A7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(t,e,n="nearest",s="constant",o=0,r){const i=F(t,"image","transform","float32"),a=F(e,"transforms","transform","float32");$(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),$(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),$(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const c={image:i,transforms:a},l={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return H.runKernel(j0,c,l)}const L7=Q({transform_:O7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F7(t,e,n){const s=F(t,"a","bandPart");$(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,i]=s.shape.slice(-2);let a,c;typeof e=="number"?($(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),$(e<=r,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${r}).`),a=F(e<0?r:e,"numLower","bandPart")):($(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=On(Sf(e,0),r,ru(e,r))),typeof n=="number"?($(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),$(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),c=F(n<0?i:n,"numUpper","bandPart")):($(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=On(Sf(n,0),i,ru(n,i)));const l=X(iu(0,r,1,"int32"),[-1,1]),u=iu(0,i,1,"int32"),d=Ve(l,u),h=ur(Qc(d,a),wa(d,Pt(c))),f=rn([r,i],s.dtype);return X(dr(la(X(s,[-1,r,i])).map(p=>On(h,p,f))),o)}const P7=Q({bandPart_:F7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7(t){let e;if(Array.isArray(t)){e=!1,$(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let r=1;r<t.length;++r)$(t[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[r].shape[0]} vs. ${o})`)}else e=!0,t=vs(t,t.shape[0],0).map(o=>kd(o,[0]));$(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],s=t;for(let o=0;o<t.length;++o)n.push(H.tidy(()=>{let r=s[o];if(o>0)for(let i=0;i<o;++i){const a=W(Oe(W(n[i],r)),n[i]);r=Ve(r,a)}return Fe(r,Nm(r,"euclidean"))}));return e?dr(n,0):n}const B7=Q({gramSchmidt_:M7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(t,e=!1){if($(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return lS(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((c,l)=>c*l),s=la(X(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],r=[];s.forEach(c=>{const[l,u]=lS(c,e);o.push(l),r.push(u)});const i=X(dr(o,0),t.shape),a=X(dr(r,0),t.shape);return[i,a]}}function lS(t,e=!1){return H.tidy(()=>{$(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],s=t.shape[1];let o=XN(n),r=Gi(t);const i=Ph([[1]],[1,1]);let a=Gi(i);const c=n>=s?s:n;for(let l=0;l<c;++l){const u=r,d=a,h=o;[a,r,o]=H.tidy(()=>{const f=xt(r,[l,l],[n-l,1]),p=Nm(f),m=xt(r,[l,l],[1,1]),v=On(Cs(m,0),Ph([[-1]]),Ph([[1]])),g=Ve(m,W(v,p)),b=Fe(f,g);b.shape[0]===1?a=Gi(i):a=qn([i,xt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const x=Pt(Fe(ot(v,g),p)),y=xt(r,[l,0],[n-l,s]),w=W(x,a),C=Ze(a);if(l===0)r=Ve(y,ot(w,ot(C,y)));else{const I=Ve(y,ot(w,ot(C,y)));r=qn([xt(r,[0,0],[l,s]),I],0)}const _=Ze(w),S=xt(o,[0,l],[n,o.shape[1]-l]);if(l===0)o=Ve(S,ot(ot(S,a),_));else{const I=Ve(S,ot(ot(S,a),_));o=qn([xt(o,[0,0],[n,l]),I],1)}return[a,r,o]}),He([u,d,h])}return!e&&n>s&&(o=xt(o,[0,0],[n,s]),r=xt(r,[0,0],[s,s])),[o,r]})}const U7=Q({qr_:V7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rr={flipLeftRight:o7,grayscaleToRGB:i7,resizeNearestNeighbor:vA,resizeBilinear:gA,rgbToGrayscale:c7,rotateWithOffset:u7,cropAndResize:n7,nonMaxSuppression:h7,nonMaxSuppressionAsync:x7,nonMaxSuppressionWithScore:C7,nonMaxSuppressionWithScoreAsync:S7,nonMaxSuppressionPadded:E7,nonMaxSuppressionPaddedAsync:$7,threshold:D7,transform:L7},j7={bandPart:P7,gramSchmidt:B7,qr:U7};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z7=new Map,W7=new Map;class Jc{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ns{constructor(){this.classNameMap={}}static getMap(){return Ns.instance==null&&(Ns.instance=new Ns),Ns.instance}static register(e){Ns.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function me(t,e,n){$(t.className!=null,()=>"Class being registered does not have the static className property defined."),$(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),$(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const s=n,o=e+">"+s;return Ns.register(t),z7.set(o,t),W7.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pi extends Jc{minimize(e,n=!1,s){const{value:o,grads:r}=this.computeGradients(e,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return He(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return YX(e,n)}dispose(){this.iterations_!=null&&He(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:it(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(pi,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bA extends pi{static get className(){return"Adadelta"}constructor(e,n,s=null){super(),this.learningRate=e,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:J(()=>et(r).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:J(()=>et(r).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[s];if(a==null)return;const c=this.accumulatedGrads[o].variable,l=this.accumulatedUpdates[o].variable;J(()=>{const u=we(W(c,this.rho),W(St(a),1-this.rho)),d=W(Fe(_n(we(l,this.epsilon)),_n(we(c,this.epsilon))),a),h=we(W(l,this.rho),W(St(d),1-this.rho));c.assign(u),l.assign(h);const f=we(W(d,-this.learningRate),r);r.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(He(this.accumulatedGrads.map(e=>e.variable)),He(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,s=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yA extends pi{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:J(()=>$m(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[s];if(i==null)return;const a=this.accumulatedGrads[o].variable;J(()=>{const c=we(a,St(i));a.assign(c);const l=we(W(Fe(i,_n(we(c,H.backend.epsilon()))),-this.learningRate),r);r.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&He(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xA extends pi{static get className(){return"Adam"}constructor(e,n,s,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],J(()=>{this.accBeta1=it(n).variable(),this.accBeta2=it(s).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);J(()=>{const s=Ve(1,this.accBeta1),o=Ve(1,this.accBeta2);n.forEach((r,i)=>{const a=H.registeredVariables[r],c=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:J(()=>et(a).variable(c))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${r}/v`,variable:J(()=>et(a).variable(c))});const l=Array.isArray(e)?e[i].tensor:e[r];if(l==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=we(W(u,this.beta1),W(l,1-this.beta1)),f=we(W(d,this.beta2),W(St(l),1-this.beta2)),p=Fe(h,s),m=Fe(f,o);u.assign(h),d.assign(f);const v=we(W(Fe(p,we(_n(m),this.epsilon)),-this.learningRate),a);a.assign(v)}),this.accBeta1.assign(W(this.accBeta1,this.beta1)),this.accBeta2.assign(W(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&He(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&He(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),J(()=>{this.accBeta1.assign(aa(this.beta1,this.iterations_+1)),this.accBeta2.assign(aa(this.beta2,this.iterations_+1))});const n=e.length/2,s=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wA extends pi{static get className(){return"Adamax"}constructor(e,n,s,o=null,r=0){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],J(()=>{this.iteration=it(0).variable(),this.accBeta1=it(n).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);J(()=>{const s=Ve(1,this.accBeta1),o=Fe(-this.learningRate,we(W(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=H.registeredVariables[r],c=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:et(a).variable(c)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${r}/v`,variable:et(a).variable(c)});const l=Array.isArray(e)?e[i].tensor:e[r];if(l==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=we(W(u,this.beta1),W(l,1-this.beta1)),f=W(d,this.beta2),p=$n(l),m=hi(f,p);u.assign(h),d.assign(m);const v=we(W(Fe(o,s),Fe(h,we(m,this.epsilon))),a);a.assign(v)}),this.iteration.assign(we(this.iteration,1)),this.accBeta1.assign(W(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&He(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&He(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nx extends pi{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=Array.isArray(e)?e[o].tensor:e[s];if(r==null)return;const i=H.registeredVariables[s];J(()=>{const a=we(W(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Do(it(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CA extends Nx{static get className(){return"Momentum"}constructor(e,n,s=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=it(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:J(()=>et(r).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[s];a!=null&&J(()=>{let c;const l=we(W(this.m,i),a);this.useNesterov?c=we(W(this.c,we(a,W(l,this.m))),r):c=we(W(this.c,l),r),i.assign(l),r.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&He(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _A extends pi{static get className(){return"RMSProp"}constructor(e,n=.9,s=0,o=null,r=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=H.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:J(()=>et(r).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:J(()=>et(r).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:J(()=>et(r).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[s];if(a==null)return;const c=this.accumulatedMeanSquares[o].variable,l=this.accumulatedMoments[o].variable;J(()=>{const u=we(W(c,this.decay),W(St(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,h=we(W(d,this.decay),W(a,1-this.decay)),f=Fe(W(a,this.learningRate),_n(Ve(u,we(St(h),this.epsilon)))),p=we(W(l,this.momentum),f);c.assign(u),d.assign(h),l.assign(p);const m=Ve(r,p);r.assign(m)}else{const d=we(W(c,this.decay),W(St(a),1-this.decay)),h=we(W(l,this.momentum),Fe(W(a,this.learningRate),_n(we(d,this.epsilon))));c.assign(d),l.assign(h);const f=Ve(r,h);r.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&He(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&He(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&He(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,s=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7=[bA,yA,xA,wA,CA,_A,Nx];function H7(){for(const t of G7)me(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uS(t,e,n,s){i(t),n=n??0,s=s??1,a(n,s);let o=0;const r=c=>(c.then(l=>{const u=n+ ++o/t.length*(s-n);return e(u),l}),c);function i(c){$(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function a(c,l){$(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),$(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),$(l>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${l}`)}return Promise.all(t.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function K7(t,e){e==null&&(e={});const n=e.fetchFunc==null?te().platform.fetch:e.fetchFunc,s=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(s):await uS(s,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await uS(a,e.onProgress,.5,1)}function q7(t,e){var n;const s=e.fetchFunc==null?te().platform.fetch:e.fetchFunc;let o=0,r;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;o<t.length;){r||(r=(await s(t[o],e.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:l}=await r.read();if(c){o++,r=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}i.enqueue(l);return}i.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7="application/octet-stream",Q7="application/json";class Ax{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?($(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=te().platform.fetch,$(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&$(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=u8(e,s);if(n.body.append("model.json",new Blob([JSON.stringify(o)],{type:Q7}),"model.json"),e.weightData!=null){const i=li.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:X7}),"model.weights.bin")}const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:q0(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return h8(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),s=oS(e.weightsManifest),o=()=>q7(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:s,getWeightStream:o})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=Y7(n),r=this.weightPathPrefix||s,i=[],a=[];for(const c of e)for(const l of c.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(l)):i.push(r+l+o);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),s=oS(e),o=await K7(n,this.loadOptions);return[s,o]}}Ax.URL_SCHEME_REGEX=/^https?:\/\//;function Y7(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),s=t.substring(0,e),o=n>e?t.substring(n):"";return[s+"/",o]}function dS(t){return t.match(Ax.URL_SCHEME_REGEX)!=null}const SA=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(s=>dS(s)):n=dS(t),n)return IA(t,e)}return null};tn.registerSaveRouter(SA);tn.registerLoadRouter(SA);function IA(t,e){return new Ax(t,e)}function J7(t,e){return IA(t,e)}function Rx(t,e){const n=t.shape.length,s=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[s-1]} vs. ${n}`);if(ce(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,r=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,c=o.slice();c.pop();let l=1;for(let d=r;d<n;++d)l*=a[d],c.push(a[d]);const u=[...De(t.shape).map(d=>d/l),1].slice(0,r);return[c,i,l,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sb=-2,Z7=-1;function Dx(t,e,n){const s=t.shape.length;$(s===e.length,()=>`Error in slice${s}D: Length of begin ${e} must match the rank of the array (${s}).`),$(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)$(e[o]+n[o]<=t.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function e9(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Ox(t,e,n){const s=[];for(let o=0;o<t.length;o++)s[o]=Math.ceil((e[o]-t[o])/n[o]);return s}function EA(t,e,n,s){const o=[...t];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function kA(t,e,n){return n<=t?n:n-(e-1)}function $A(t,e){const n=[];for(let s=0;s<t;s++)n.push(e+s);return n}function t9(t,e,n,s,o,r,i,a,c){const l=t.length;let u=new Array(l),d=new Array(l),h=new Array(l);if(e.length&&n>0){const f=e[0],p=n+1;u=TA(i,f,p,s,t),d=NA(a,f,p,o,t),h=EA(r,f,p,t)}else for(let f=0;f<l;f++)u[f]=RA(i,s,r,t,f,c),d[f]=DA(a,o,r,t,f,c),h[f]=AA(r,f,c);return{begin:u,end:d,strides:h}}function TA(t,e,n,s,o){const r=[...o],i=$A(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const c=kA(e,n,a);let l=s[c];t&1<<c&&(l=0),r[a]=l}return r}function NA(t,e,n,s,o){const r=[...o],i=$A(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const c=kA(e,n,a);let l=s[c];t&1<<c&&(l=Number.MAX_SAFE_INTEGER),r[a]=l}for(let a=0;a<r.length;a++){const c=o[a];r[a]<0&&(r[a]+=c),r[a]=Zi(0,r[a],o[a])}return r}function AA(t,e,n){let s=t[e];return(n&1<<e||s==null)&&(s=1),s}function RA(t,e,n,s,o,r){let i=e[o];const a=n[o]||1;(t&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const c=s[o];return i<0&&(i+=c),i=Zi(0,i,c-1),i}function DA(t,e,n,s,o,r){let i=e[o];const a=n[o]||1;(t&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const c=s[o];return i<0&&(i+=c),a>0?i=Zi(0,i,c):i=Zi(-1,i,c-1),i}function Lx(t,e,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function Fx(t,e){let n=t.length>0?t[t.length-1]:1;for(let s=0;s<t.length-1;s++)n+=t[s]*e[s];return n}function Rm(t,e,n){let s;const o=t.shape.length;typeof e=="number"?s=[e,...new Array(o-1).fill(0)]:e.length<o?s=e.concat(new Array(o-e.length).fill(0)):s=e.slice(),s.forEach(i=>{$(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:($(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-s[a])),[s,r]}function Px(t,e,n,s,o,r,i,a,c){let l;if(s==null?(l=new Array(e.length),l.fill(1)):l=s,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:c};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};n9(d,h);let f=!0,p=!0,m=!0;const v=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const y=!!(h.shrinkAxisMask&1<<x),w=t[x];if(w===-1){v.push(y?1:-1);continue}const C=[h.beginMask&1<<x,h.endMask&1<<x],_=[h.strides[x]>0?0:-1,h.strides[x]>0?w:w-1];if(y&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[x]===1;const S=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(y){const A=h.begin[x]<0?w+h.begin[x]:h.begin[x];if(h.begin[x]=A,h.end[x]=h.begin[x]+1,A<0||A>=w)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=hS(h.begin[x],0,h.strides[x],w,C,_),h.end[x]=hS(h.end[x],1,h.strides[x],w,C,_);const O=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===w;f=f&&O,p=p&&(x===0&&h.strides[x]===1||O)}else f=f&&h.strides[x]===1&&S,p=p&&(x===0&&h.strides[x]===1||S);let I,E=!1;if(h.beginValid&&h.endValid?(I=h.end[x]-h.begin[x],E=!0):y?(I=1,E=!0):S&&w>=0&&(h.strides[x]<0?I=-w:I=w,E=!0),E){let O;I===0||I<0!=h.strides[x]<0?O=0:O=Math.trunc(I/h.strides[x])+(I%h.strides[x]!==0?1:0),v.push(O)}else v.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const y=h.finalShapeGatherIndices[x];y>=0?g.push(v[y]):y===Sb&&g.push(1)}return{finalShapeSparse:g.filter((x,y)=>h.finalShapeGatherIndices[y]!==Sb),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function n9(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let s=0;s<t.dims;s++)if(1<<s&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-s)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&t.newAxisMask)e.finalShapeGatherIndices.push(Sb),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[s]),t.end!=null&&(e.end[n]=t.end[s]),e.strides[n]=t.strides[s],t.beginMask&1<<s&&(e.beginMask|=1<<n),t.endMask&1<<s&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<s?(e.finalShapeGatherIndices.push(Z7),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(s)),e.inputShapeGatherIndicesSparse[n]=s,n++}}function hS(t,e,n,s,o,r){if(o[e])return n>0?r[e]:r[e+1&1];{const i=t<0?s+t:t;return i<r[0]?r[0]:i>r[1]?r[1]:i}}const s9=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Dx,computeFlatOffset:Fx,computeOutShape:Ox,getNormalizedAxes:t9,isSliceContinous:Lx,maskToAxes:e9,parseSliceParams:Rm,sliceInfo:Px,startForAxis:RA,startIndicesWithElidedDims:TA,stopForAxis:DA,stopIndicesWithElidedDims:NA,stridesForAxis:AA,stridesWithElidedDims:EA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o9{static sgd(e){return new Nx(e)}static momentum(e,n,s=!1){return new CA(e,n,s)}static rmsprop(e,n=.9,s=0,o=null,r=!1){return new _A(e,n,s,o,r)}static adam(e=.001,n=.9,s=.999,o=null){return new xA(e,n,s,o)}static adadelta(e=.001,n=.95,s=null){return new bA(e,n,s)}static adamax(e=.002,n=.9,s=.999,o=null,r=0){return new wA(e,n,s,o,r)}static adagrad(e,n=.1){return new yA(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fa=o9;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function OA(){return new Promise(t=>r9(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mx(t,e){const n=t[0].length;t.forEach((o,r)=>{$(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),$(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=t[0];t.forEach((o,r)=>{for(let i=0;i<n;i++)$(i===e||o[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function Oo(t,e){const n=t[0].slice();for(let s=1;s<t.length;s++)n[e]+=t[s][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ys;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Ys||(Ys={}));function LA(t,e,n){let s=new Array;if(n==null&&e==null)return s;if(e==null)for(;s.length<t+n.length;)s.push(-1);else s=e.slice();if(n==null)return s;if(t+n.length!==s.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${s.length}`);for(let o=1;o<n.length;++o){const r=n[o],i=s[s.length-n.length+o],a=s[i];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${r} but shape[${o+t}] = ${a}`)}else s[i]=r}return s}function FA(t){const e={FIRST_DIM_SIZE:Ys.FIRST_DIM_SIZE,VALUE_ROWIDS:Ys.VALUE_ROWIDS,ROW_LENGTHS:Ys.ROW_LENGTHS,ROW_SPLITS:Ys.ROW_SPLITS,ROW_LIMITS:Ys.ROW_LIMITS,ROW_STARTS:Ys.ROW_STARTS},n=[];for(const s of t)if(s in e)n.push(e[s]);else break;return n}function PA(t){return t.length===0?0:t[0]===Ys.FIRST_DIM_SIZE?t.length-1:t.length}function MA(t,e){if(t==null||e==null)return;const n=t.length,s=e.length;if(n>=s)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${s})`);for(let o=0;o<Math.min(n,s-1);++o){const r=t[o],i=e[o+1];if(r>=0&&i>=0&&r!==1&&r!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${r} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bx=30;function Dm(t){return t<=Bx?t:ab(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vx(t,e,n){const s=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Td(t,e,n,s=!0){let o=[];if(s)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const r=e.length;for(let i=0;i<r;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(r+1))}return o}function Nd(t,e,n=!0){const s=[];if(n){s.push(e);for(let o=e+1;o<t;++o)o<=2*e?(s.push(o),s.push(o-(e+1))):s.push(o)}else{const o=[],r=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?r.push(i):o.push(i);s.push(...o),s.push(0),s.push(...r)}return s}function Ad(t,e,n,s=!0){const o=[];s?o.push(t[0]/n):o.push(t[0]*n);for(let r=1;r<t.length;++r)r<=e.length?s?o.push(e[r-1]*t[r]):o.push(t[r]/e[r-1]):o.push(t[r]);return o}function Ux(t,e){const n=[0];for(let s=0;s<e;++s)n.push(t[s][0]);return n}function jx(t,e,n){const s=t.slice(0,1);for(let o=0;o<n;++o)s.push(t[o+1]-e[o][0]-e[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Om=1.7580993408473768,Lm=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zx=.3275911,Wx=.254829592,Gx=-.284496736,Hx=1.421413741,Kx=-1.453152027,qx=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let s=0;s<n.length;s+=2)n[s]=t[s/2],n[s+1]=e[s/2];return n}function BA(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=t[s],n[s/2]=t[s+1];return{real:e,imag:n}}function VA(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],s[Math.floor(o/4)]=t[o+1];return{real:n,imag:s}}function UA(t){const e=Math.floor(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],s[Math.floor(o/4)]=t[o+1];return{real:n,imag:s}}function Xx(t,e){const n=t[e*2],s=t[e*2+1];return{real:n,imag:s}}function jA(t,e,n,s){t[s*2]=e,t[s*2+1]=n}function zA(t,e){const n=new Float32Array(t/2),s=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const r=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function WA(t,e,n){const s=(n?2:-2)*Math.PI*(t/e),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zg="->",i9=/->/g,fS=",",pS="...";function Qx(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(i9,"").length)/zg.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${zg}").`);const[s,o]=t.split(zg);$(s.indexOf(pS)===-1,()=>`The ellipsis notation ("${pS}") is not supported yet.`);const r=s.split(fS),i=r.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<o.length;++h){const f=o[h];if(!r.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<s.length;++h){const f=s[h];a.indexOf(f)===-1&&f!==fS&&a.push(f)}const c=new Array(r.length);for(let h=0;h<i;++h){if(new Set(r[h].split("")).size!==r[h].length)throw new Error(`Found duplicate axes in input component ${r[h]}. Support for duplicate axes in input is not implemented yet.`);c[h]=[];for(let f=0;f<r[h].length;++f)c[h].push(a.indexOf(r[h][f]))}const l=a.length,u=o.length,d=[];for(let h=u;h<l;++h)d.push(h);return{allDims:a,summedDims:d,idDims:c}}function Yx(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const s=[];for(let o=0;o<t;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function Jx(t,e,n){const s=new Array(t);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let i=0;i<e[o].length;++i)s[e[o][i]]===void 0?s[e[o][i]]=r[i]:$(s[e[o][i]]===r[i],()=>`Expected dimension ${s[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(r)}, but got dimension ${r[i]}`)}}function Zx(t,e){const n=t,s=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)s.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],c=a9(e,a);for(const l of c)r.indexOf(l)===-1&&(s[i].push(l),r.push(l))}return{path:n,steps:s}}function e1(t){return t.every((e,n)=>e===n)}function a9(t,e){const n=[];for(let s=0;s<t.length;++s)(t[s].length===0||t[s].indexOf(e)!==-1||e===-1)&&n.push(s);return n}function t1(t,e,n=0){let s=[];if(typeof e=="number")$(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);$(o<=1,()=>"There should be only one negative value in split array.");const r=e.indexOf(-1);if(r!==-1){const i=e.reduce((a,c)=>c>0?a+c:a);e[r]=t.shape[n]-i}$(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=e}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function HA(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function KA(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qA(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function XA(t,e){return`size ${t} must be non-negative, not ${e}`}function QA(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function YA(t,e){const n=ce(t),s=ce(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${t} outputShape= ${e}`}function JA(t,e){const n=ce(t),s=ce(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ib(){return"segment ids must be >= 0"}function ZA(){return"segment ids are not increasing"}function eR(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function tR(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nR(t,e){let n=!1,s;for(t<=Bx?(s=t,n=!0):s=ab(t,Math.floor(Math.sqrt(t)));!n;)s>e||s===t?n=!0:s=ab(t,s+1);return s}function sR(t,e,n){const s=[],o=t.length;for(let r=0;r<o;r++)r!==e?s.push(t[r]):s.push(n);return s}function n1(t,e,n,s){const o=e.shape.length,r=t.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let c=1,l=1,u=1;for(let d=0;d<s;++d)a.push(t.shape[d]),c*=t.shape[d];for(let d=s;d<n;d++)a.push(t.shape[d]),l*=t.shape[d];for(let d=s;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<r;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:i,outputShape:a}}const c9=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:n1,computeOutShape:sR,segOpComputeOptimalWindowSize:nR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fr(t){try{return t.map(e=>qr(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function oR(t){return t.map(e=>Ur(e))}const l9=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Wx,ERF_A2:Gx,ERF_A3:Hx,ERF_A4:Kx,ERF_A5:qx,ERF_P:zx,PARALLELIZE_THRESHOLD:Bx,get RowPartitionType(){return Ys},SELU_SCALE:Lm,SELU_SCALEALPHA:Om,applyActivation:Sx,assertAndGetBroadcastShape:ze,assertAxesAreInnerMostDims:vn,assertParamsConsistent:Mx,assignToTypedArray:jA,axesAreInnerMostDims:tx,calculateShapes:Sa,checkEinsumDimSizes:Jx,checkPadOnDimRoundingMode:Jn,combineLocations:KN,combineRaggedTensorToTensorShapes:LA,complexWithEvenIndex:VA,complexWithOddIndex:UA,computeConv2DInfo:gn,computeConv3DInfo:ui,computeDefaultPad:X0,computeDilation2DInfo:Sd,computeOptimalWindowSize:Dm,computeOutAndReduceShapes:dn,computeOutShape:Oo,computePool2DInfo:Ws,computePool3DInfo:br,convertConv2DDataFormat:yr,decodeEinsumEquation:Qx,eitherStridesOrDilationsAreOne:In,expandShapeToKeepDim:Wt,exponent:WA,exponents:zA,fromStringArrayToUint8:oR,fromUint8ToStringArray:fr,getAxesPermutation:Dt,getBroadcastDims:Rc,getComplexWithIndex:Xx,getEinsumComputePath:Zx,getEinsumPermutation:Yx,getFusedBiasGradient:_x,getFusedDyActivation:Cx,getImageCenter:Vx,getInnerMostAxes:Bt,getPermuted:Nd,getRaggedRank:PA,getReductionAxes:Zt,getReshaped:Td,getReshapedPermuted:Ad,getRowPartitionTypesHelper:FA,getSliceBeginCoords:Ux,getSliceSize:jx,getSparseFillEmptyRowsIndicesDenseShapeMismatch:GA,getSparseFillEmptyRowsNegativeIndexErrorMessage:HA,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:KA,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:QA,getSparseReshapeInputOutputMismatchErrorMessage:JA,getSparseReshapeInputOutputMultipleErrorMessage:YA,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qA,getSparseReshapeNegativeOutputDimErrorMessage:XA,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:tR,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Ib,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:ZA,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:eR,getUndoAxesPermutation:di,isIdentityPermutation:e1,log:Tq,mergeRealAndImagArrays:hr,prepareAndValidate:Rx,prepareSplitSize:t1,segment_util:c9,shouldFuse:Ix,slice_util:s9,splitRealAndImagArrays:BA,stridesOrDilationsArePositive:ra,tupleValuesAreOne:oa,upcastType:cs,validateDefaultValueShape:MA,validateInput:OY,validateUpdateShape:hA,warn:ms},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */H7();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rR={kernelName:_p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,$d($e(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9={kernelName:Tu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=St($e(n,"float32")),o=_n(Ve(it(1),s));return Pt(Fe(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9={kernelName:Nu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=_n(Ve(St($e(n,"float32")),1));return Fe(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9={kernelName:qc,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{let a=t;const c=Zt(n.shape,o);return c.length>0&&(a=Oe(a,c)),X(a,n.shape)},b:()=>{let a=t;const c=Zt(s.shape,o);return c.length>0&&(a=Oe(a,c)),X(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9={kernelName:o0,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((s,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9={kernelName:Sp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m9={kernelName:Ip,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>et(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g9={kernelName:Au,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,_n(Ve(it(1),St($e(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v9={kernelName:Ru,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=_n(we(it(1),St($e(n,"float32"))));return Fe(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9={kernelName:Lu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{const a=we(St(n),St(s));let c=W(t,Fe(s,a));const l=Zt(n.shape,o);return l.length>0&&(c=Oe(c,l)),X(c,n.shape)},b:()=>{const a=we(St(n),St(s));let c=Pt(W(t,Fe(n,a)));const l=Zt(s.shape,o);return l.length>0&&(c=Oe(c,l)),X(c,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9={kernelName:Du,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,we(St($e(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9={kernelName:Ou,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,Ve(it(1),St($e(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(t,e,n,s,o,r){const i=F(t,"dy","avgPool3dGrad"),a=F(e,"input","avgPool3dGrad");let c=i,l=a,u=!1;a.rank===4&&(u=!0,c=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=X(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),$(c.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),$(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Jn("avgPool3dGrad",o,r);const d={dy:c,input:l},h={filterSize:n,strides:s,pad:o,dimRoundingMode:r},f=H.runKernel(c0,d,h);return u?X(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const C9=Q({avgPool3dGrad_:w9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _9={kernelName:kp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:o,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>C9(t,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9(t,e,n,s,o){const r=F(t,"dy","avgPoolGrad"),i=F(e,"input","avgPoolGrad");$(i.rank===r.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${r.rank})`);let a=i,c=r,l=!1;i.rank===3&&(l=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(c.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${c.rank}.`),$(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:c,input:a},d={filterSize:n,strides:s,pad:o},h=H.runKernel(a0,u,d);return l?X(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const I9=Q({avgPoolGrad_:S9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E9={kernelName:Ep,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:o,strides:r,pad:i}=n;return{x:()=>I9(t,s,o,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k9={kernelName:$p,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[s,o]=e,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>ot(t,o,!1,!0),b:()=>ot(s,t,!0,!1)}:!r&&i?{a:()=>ot(t,o,!1,!1),b:()=>ot(t,s,!0,!1)}:r&&!i?{a:()=>ot(o,t,!1,!0),b:()=>ot(s,t,!1,!1)}:{a:()=>ot(o,t,!0,!0),b:()=>ot(t,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9={kernelName:Tp,gradFunc:(t,e,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>lx(t,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T9={kernelName:Iq,gradFunc:(t,e,n)=>{const s=n,o=s.inputShape,r=s.shape,i=Array.from(r);for(let c=o.length-1;c>=0;c--)if(o[c]===r[c])i[c]=1;else if(o[c]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const a=[];for(let c=0;c<i.length;c++)i[c]>1&&a.push(c);return{x:()=>Oe(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N9={kernelName:Fu,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A9={kernelName:Pu,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R9={kernelName:Mu,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>On(ur(wa(s,o),Qc(s,r)),t,et(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D9={kernelName:Np,inputsToSave:["x"],gradFunc:rR.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O9={kernelName:Ap,saveAllInputs:!0,gradFunc:(t,e,n)=>{const s=e.map(c=>c.shape),{axis:o}=n,r=qe(o,e[0].shape)[0],i=s.map(c=>c[r]);return vs(t,i,r).map(c=>()=>c)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L9={kernelName:Rp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,{dilations:r,strides:i,pad:a,dataFormat:c}=n;return $(oa(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>J0(s.shape,t,o,i,a,c),filter:()=>wx(s,t,o.shape,i,a,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F9={kernelName:Dp,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,{strides:r,pad:i,dataFormat:a,dimRoundingMode:c}=n;return{dy:()=>ia(t,o,r,i,a,1,c),filter:()=>wx(t,s,o.shape,r,i,a,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(t,e,n,s,o){let r=t;t.rank===4&&(r=X(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=X(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),$(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),$(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),$(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),$(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),$(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:i},c={strides:s,pad:o,filterShape:n};return H.runKernel(f0,a,c)}const M9=Q({conv3DBackpropFilter_:P9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B9={kernelName:Op,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:o,pad:r}=n;$(oa(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=e;return{x:()=>zN(i.shape,t,a,o,r),filter:()=>M9(i,t,a.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V9={kernelName:Bu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(Pt(cA($e(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9={kernelName:Vu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(lA($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9={kernelName:Lp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o,exclusive:r,reverse:i}=n;return{x:()=>{const a=Dt([o],s.rank);let c=GN(t,o,r,!i);return a!=null&&(c=Ze(c,a)),c}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9={kernelName:Fp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:i}=n,a=s??[1,1];$(oa(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[c,l]=e;return $(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${c.rank}.`),$(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),$(c.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),$(In(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Jn("depthwiseConv2d",r,i),{x:()=>ZY(c.shape,t,l,o,r,a,i),filter:()=>YY(c,t,l.shape,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9={kernelName:Pp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,r={x:s,filter:o,dy:t},i={x:s,filter:o,dy:t};return{x:()=>H.runKernel(cb,r,n),filter:()=>H.runKernel(lb,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G9={kernelName:ju,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,s={dy:t,y:n};return{x:()=>H.runKernel(C0,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9={kernelName:zu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=W(Vo(Pt(St(n))),2/Math.sqrt(Math.PI));return{x:()=>W(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K9={kernelName:Wu,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q9={kernelName:Bp,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>X(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9={kernelName:Gu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Vo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q9={kernelName:Hu,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y9={kernelName:Ku,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{const a=Fe(t,$e(s,"float32")),c=Zt(n.shape,o);return c.length>0?X(Oe(a,c),n.shape):a},b:()=>{let a=W(t,$e(n,"float32"));const c=Zt(s.shape,o);c.length>0&&(a=X(Oe(a,c),s.shape));const l=St(s);return Pt(Fe(a,$e(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J9={kernelName:Vp,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:s}=n,[o,r,i,a]=e,c=a??it(1),l=Zt(r.shape,o.shape),u=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)u.push(o.shape[y]);u.push(1)}const d=Ve(o,r),h=W(t,c),f=rA(we(i,it(s))),p=W(W(W(f,f),f),it(-.5));return{x:()=>r.rank===1?X(W(W(t,Zs(X(f,[1,1,1,r.shape[0]]),u)),c),o.shape):X(W(W(t,f),c),o.shape),mean:()=>{let y=W(W(f,it(-1)),h);return r.rank===1&&(y=Oe(y,l)),X(y,r.shape)},variance:()=>{let y=W(W(p,d),h);return r.rank===1&&(y=Oe(y,l)),X(y,r.shape)},scale:()=>{const y=W(d,f);let w=W(t,y);return r.rank===1&&(w=Oe(w,l)),X(w,r.shape)},offset:()=>{let y=t;return r.rank===1&&(y=Oe(y,l)),X(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z9={kernelName:Up,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[s,o]=e,{axis:r,batchDims:i}=n,a=qe(r,s.shape)[0],c=(l,u,d)=>()=>{const h=l.shape,f=u.size,p=h.slice(0,a),m=p.length,v=h.slice(r,h.length).slice(1),g=v.length,b=mS(0,m),x=mS(m+1,m+1+g),y=gS([p,[f],v]),w=X(d,y),C=X(u,[f]),_=gS([[m],b,x]),S=Ze(w,_);let I=pA(S,C,l.shape[a]);const E=di(_);return I=Ze(I,E),I};if(i===1){const l=s.shape[0],u=s.split(l,0);return{x:()=>dr(u.map((f,p)=>c(f,o.slice(p,1),t.slice(p,1))())).reshape(s.shape),indices:()=>o}}else return{x:c(s,o,t),indices:()=>o}}};function mS(t,e){const n=[];for(let s=t;s<e;++s)n.push(s);return n}function gS(t){const e=[];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)e.push(t[n][s]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ={kernelName:qu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>et(n),b:()=>et(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJ={kernelName:Xu,gradFunc:t=>({x:()=>$e(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJ={kernelName:Qu,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sJ={kernelName:Yu,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ={kernelName:Ju,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJ={kernelName:zp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{alpha:o}=n,r=Cs(s,0);return{x:()=>On(r,t,W(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ={kernelName:ed,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,we(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJ={kernelName:Zu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,$e(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ={kernelName:kq,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n;return{logits:()=>{const i=Vo(s);return Ve(t,W(Oe(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(t,e,n,s=5,o=1,r=1,i=.5){const a={x:t,y:e,dy:n},c={depthRadius:s,bias:o,alpha:r,beta:i};return H.runKernel($0,a,c)}const uJ=Q({localResponseNormalizationBackprop_:lJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJ={kernelName:Xp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{depthRadius:r,bias:i,alpha:a,beta:c}=n;return{x:()=>uJ(s,o,t,r,i,a,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iR(t,e,n,s){return e.rank<n.rank&&(e=X(e,Wt(e.shape,s))),t.rank<n.rank&&(t=X(t,Wt(t.shape,s))),{x:()=>W(t,$e(Bo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vS={kernelName:Qp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{reductionIndices:o}=s,r=e[0],i=e[1],a=qe(o,r.shape),c=iR(t,i,r,a);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJ={kernelName:td,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>W(t,$e(wa(n,s),"float32")),b:()=>W(t,$e(Sf(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJ(t,e,n,s,o,r,i){const a=F(t,"dy","maxPool3dGrad"),c=F(e,"input","maxPool3dGrad"),l=F(n,"output","maxPool3dGrad");let u=a,d=c,h=l,f=!1;c.rank===4&&(f=!0,u=X(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=X(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=X(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),$(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),$(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),$(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Jn("maxPool3dGrad",r,i);const p={dy:u,input:d,output:h},m={filterSize:s,strides:o,pad:r,dimRoundingMode:i},v=H.runKernel(N0,p,m);return f?X(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const pJ=Q({maxPool3dGrad_:fJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJ={kernelName:Jp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:c}=n;return{x:()=>pJ(t,s,o,r,i,a,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJ(t,e,n,s,o,r,i){const a=F(t,"dy","maxPoolGrad"),c=F(e,"input","maxPoolGrad"),l=F(n,"output","maxPoolGrad");$(c.rank===a.rank,()=>`Rank of input (${c.rank}) does not match rank of dy (${a.rank})`),$(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),$(c.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${c.rank}.`),Jn("maxPoolGrad",r,i);const u={dy:a,input:c,output:l},d={filterSize:s,strides:o,pad:r,dimRoundingMode:i};return H.runKernel(T0,u,d)}const vJ=Q({maxPoolGrad_:gJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bJ={kernelName:Yp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{filterSize:r,strides:i,pad:a}=n;return{x:()=>vJ(t,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yJ={kernelName:Zp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n,r=qe(o,s.shape),a=dn(s.shape,r)[1],c=ce(a);return{x:()=>{const u=s.shape.slice();r.forEach(f=>{u[f]=1});const d=X(t,u);return Fe(W(d,fi(s.shape,"float32")),c)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ={kernelName:em,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{axis:o}=s,[r,i]=e,a=qe(o,r.shape),c=iR(t,i,r,a);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJ={kernelName:nd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>W(t,$e(Qc(n,s),"float32")),b:()=>W(t,$e(Cs(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CJ={kernelName:tm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>xt(t,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _J={kernelName:sd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{const a=Zt(n.shape,o);return a.length>0?X(Oe(t,a),n.shape):t},b:()=>{const a=W(t,Pt(Am(Fe(n,s)))),c=Zt(s.shape,o);return c.length>0?X(Oe(a,c),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SJ={kernelName:od,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{const a=W(t,$e(s,"float32")),c=Zt(n.shape,o);return c.length>0?X(Oe(a,c),n.shape):a},b:()=>{const a=W(t,$e(n,"float32")),c=Zt(s.shape,o);return c.length>0?X(Oe(a,c),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IJ={kernelName:nm,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EJ={kernelName:rm,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>rn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kJ={kernelName:om,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $J={kernelName:im,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:s}=n;return la(t,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bS={kernelName:am,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>xt(t,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJ={kernelName:rd,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,s,o]=e,r=n,i=s,a=ze(r.shape,i.shape);return{a:()=>{const u=$e(i,"float32");let d=W(t,W(u,aa(r,Ve(u,it(1)))));const h=Zt(r.shape,a);return h.length>0&&(d=Oe(d,h)),X(d,r.shape)},b:()=>{const u=Cs(r,0),d=On(u,Uo(r),et(r));let h=W(t,W(o,d));const f=Zt(i.shape,a);return f.length>0&&(h=Oe(h,f)),X(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NJ={kernelName:cm,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,s]=e,o=Cs(n,0);return{x:()=>On(o,t,W(t,s)),alpha:()=>{let r=On(o,et(t),W(t,n));const i=Zt(s.shape,t.shape);return i.length>0&&(r=Oe(r,i)),X(r,s.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AJ(t,e,n){const s=t.shape.slice();s[n]=1;const o=X(e,s),r=Cb(t,n,!0,!1),i=Cb(t,n,!0,!0),a=W(r,i);return W(o,a)}function RJ(t,e,n){const s=t.shape.length,o=s-n.length,r=Dt(n,s);let i=t;r!=null&&(i=Ze(t,r));const a=i.shape.slice(),l=a.splice(s-n.length,n.length).reduce((h,f)=>h*f,1);a.push(l);const u=i.reshape(a);let d=AJ(u,e,o);if(d=d.reshape(i.shape),r!=null){const h=di(r);d=Ze(d,h)}return d}const DJ={kernelName:lm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n;let r=[];return o==null?r=s.shape.map((i,a)=>a):typeof o=="number"?r=[o]:r=o,{x:()=>RJ(s,t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OJ={kernelName:Uu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{const a=Fe(t,$e(s,"float32")),c=Zt(n.shape,o);return c.length>0?X(Oe(a,c),n.shape):a},b:()=>{let a=W(t,$e(n,"float32"));const c=Zt(s.shape,o);c.length>0&&(a=X(Oe(a,c),s.shape));const l=St(s);return Pt(Fe(a,$e(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ={kernelName:id,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,Pt(St(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ={kernelName:cd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=W(Qc(n,6),$d(n));return{x:()=>W(t,$e(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PJ={kernelName:ad,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,$e($d(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJ={kernelName:um,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>X(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BJ={kernelName:hm,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,o={dy:t,images:s};return{images:()=>H.runKernel(P0,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VJ={kernelName:dm,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,o={dy:t,images:s};return{images:()=>H.runKernel(F0,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJ={kernelName:fm,gradFunc:(t,e,n)=>{const{dims:s}=n,o=qe(s,t.shape);return{x:()=>ca(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jJ={kernelName:ld,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJ={kernelName:ud,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Pt(Fe(t,W(aa(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJ={kernelName:pm,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>$e(et(n),"float32"),t:()=>W(t,$e(n,t.dtype)),e:()=>W(t,$e(rx(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJ={kernelName:dd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Cs(n,it(0)),o=it(Om),r=it(Lm),i=W(t,r),a=W(W(t,o),Vo($e(n,"float32")));return On(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJ={kernelName:md,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(n,Ve(it(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJ={kernelName:pd,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJ={kernelName:hd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(Z0($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XJ={kernelName:fd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(WN($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QJ={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{begin:o,size:r}=n,i=s.shape,[a,c]=Rm(s,o,r),l=[];for(let u=0;u<t.rank;u++)l.push([a[u],i[u]-a[u]-c[u]]);return{x:()=>cx(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YJ={kernelName:ym,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{dim:o}=n,r=!0,i=W(t,s);return{logits:()=>Ve(i,W(Oe(i,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJ={kernelName:gd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Xc(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yS={kernelName:vm,gradFunc:(t,e,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>Y0(t,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xS={kernelName:bm,gradFunc:(t,e,n)=>{const{axis:s}=n;return{x:()=>qn(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZJ={kernelName:vd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,W(_n($e(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZ={kernelName:M0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W($e(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZ={kernelName:bd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=it(2);return{a:()=>W(t,W(o,Ve(n,s))),b:()=>W(t,W(o,Ve(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ={kernelName:_d,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZ={kernelName:yd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=ze(n.shape,s.shape);return{a:()=>{let a=t;const c=Zt(n.shape,o);return c.length>0&&(a=Oe(a,c)),X(a,n.shape)},b:()=>{let a=t;const c=Zt(s.shape,o);return c.length>0&&(a=Oe(a,c)),X(Pt(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oZ={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,o=s.shape.slice(),{axis:r}=n;qe(r,s.shape).forEach(l=>{o[l]=1});const a=X(t,o),c=W(a,fi(s.shape,"float32"));return{x:()=>c}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZ={kernelName:xd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,St(Z0(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iZ={kernelName:wd,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(Ve(it(1),St(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aZ={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{reps:o}=n;return{x:()=>{let i=et(s);if(s.rank===1)for(let a=0;a<o[0];++a)i=we(i,xt(t,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<o[0];++a)for(let c=0;c<o[1];++c)i=we(i,xt(t,[a*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<o[0];++a)for(let c=0;c<o[1];++c)for(let l=0;l<o[2];++l)i=we(i,xt(t,[a*s.shape[0],c*s.shape[1],l*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<o[0];++a)for(let c=0;c<o[1];++c)for(let l=0;l<o[2];++l)for(let u=0;u<o[3];++u)i=we(i,xt(t,[a*s.shape[0],c*s.shape[1],l*s.shape[2],u*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cZ={kernelName:lc,gradFunc:(t,e,n)=>{const s=n,{perm:o}=s,r=di(o);return{x:()=>Ze(t,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZ={kernelName:xm,gradFunc:(t,e,n)=>{const s=n,{axis:o}=s;return{value:()=>dr(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZ={kernelName:wm,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dZ(t,n)}}};function dZ(t,e){const n=hi(e,et(e)),s=nx(t,n);let o=wa(e,it(0,"int32"));const r=s.rank-o.rank;for(let a=0;a<r;++a)o=Wn(o,a+1);o=ur(o,fi(s.shape,"bool"));const i=et(s);return On(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ={kernelName:Cm,gradFunc:t=>({x:()=>et(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fZ=[rR,u9,d9,h9,f9,p9,m9,g9,v9,b9,y9,x9,_9,E9,k9,$9,T9,N9,A9,R9,D9,O9,F9,L9,B9,V9,U9,j9,z9,W9,OJ,G9,H9,K9,q9,X9,Y9,Q9,J9,Z9,eJ,tJ,nJ,sJ,oJ,rJ,iJ,aJ,cJ,dJ,vS,vS,hJ,mJ,bJ,yJ,xJ,wJ,CJ,_J,SJ,IJ,EJ,kJ,$J,bS,bS,TJ,NJ,DJ,LJ,FJ,PJ,MJ,BJ,VJ,UJ,jJ,zJ,WJ,GJ,HJ,KJ,qJ,XJ,QJ,YJ,JJ,yS,yS,xS,xS,ZJ,tZ,eZ,nZ,sZ,oZ,rZ,iZ,aZ,cZ,lZ,uZ,hZ];for(const t of fZ)Nq(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.abs=function(){return this.throwIfDisposed(),$n(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acos=function(){return this.throwIfDisposed(),z8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acosh=function(){return this.throwIfDisposed(),G8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.add=function(t){return this.throwIfDisposed(),we(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.all=function(t,e){return this.throwIfDisposed(),VN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.any=function(t,e){return this.throwIfDisposed(),xb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMax=function(t){return this.throwIfDisposed(),nu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMin=function(t){return this.throwIfDisposed(),Q8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asScalar=function(){return this.throwIfDisposed(),$(this.size===1,()=>"The array must have only 1 element."),X(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asType=function(t){return this.throwIfDisposed(),$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as1D=function(){return this.throwIfDisposed(),X(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as2D=function(t,e){return this.throwIfDisposed(),X(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),X(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as4D=function(t,e,n,s){return this.throwIfDisposed(),X(this,[t,e,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as5D=function(t,e,n,s,o){return this.throwIfDisposed(),X(this,[t,e,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asin=function(){return this.throwIfDisposed(),J8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asinh=function(){return this.throwIfDisposed(),e5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan=function(){return this.throwIfDisposed(),n5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan2=function(t){return this.throwIfDisposed(),o5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atanh=function(){return this.throwIfDisposed(),i5(this)};ae().prototype.avgPool=function(t,e,n,s){return this.throwIfDisposed(),Q0(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Y0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchNorm=function(t,e,n,s,o){return this.throwIfDisposed(),km(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Vl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cast=function(t){return this.throwIfDisposed(),$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ceil=function(){return this.throwIfDisposed(),D5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ws(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Kt&&(t=[t]),qn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv1d=function(t,e,n,s,o,r){return this.throwIfDisposed(),UN(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2dTranspose=function(t,e,n,s,o){return this.throwIfDisposed(),jN(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),ia(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cos=function(){return this.throwIfDisposed(),Z0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cosh=function(){return this.throwIfDisposed(),WN(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Cb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),GN(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),oX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthwiseConv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),ex(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dilation2d=function(t,e,n,s,o){return this.throwIfDisposed(),aX(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.divNoNan=function(t){return this.throwIfDisposed(),hX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.div=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dot=function(t){return this.throwIfDisposed(),pX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.elu=function(){return this.throwIfDisposed(),Tm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.equal=function(t){return this.throwIfDisposed(),Bo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.erf=function(){return this.throwIfDisposed(),HN(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),EX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.exp=function(){return this.throwIfDisposed(),Vo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expandDims=function(t){return this.throwIfDisposed(),Wn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expm1=function(){return this.throwIfDisposed(),NX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.fft=function(){return this.throwIfDisposed(),dA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.flatten=function(){return this.throwIfDisposed(),X(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floor=function(){return this.throwIfDisposed(),Am(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floorDiv=function(t){return this.throwIfDisposed(),BN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.gather=function(t,e,n){return this.throwIfDisposed(),nx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greaterEqual=function(t){return this.throwIfDisposed(),wa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greater=function(t){return this.throwIfDisposed(),Cs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ifft=function(){return this.throwIfDisposed(),_b(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.irfft=function(){return this.throwIfDisposed(),wY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isFinite=function(){return this.throwIfDisposed(),BX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isInf=function(){return this.throwIfDisposed(),UX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isNaN=function(){return this.throwIfDisposed(),zX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.leakyRelu=function(t){return this.throwIfDisposed(),ox(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.lessEqual=function(t){return this.throwIfDisposed(),Qc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.less=function(t){return this.throwIfDisposed(),Sf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.localResponseNormalization=function(t,e,n,s){return this.throwIfDisposed(),qX(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSigmoid=function(){return this.throwIfDisposed(),tQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSoftmax=function(t){return this.throwIfDisposed(),YN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),JN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log=function(){return this.throwIfDisposed(),Uo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log1p=function(){return this.throwIfDisposed(),QN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ur(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalNot=function(){return this.throwIfDisposed(),rx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalOr=function(t){return this.throwIfDisposed(),ZN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalXor=function(t){return this.throwIfDisposed(),lQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),ot(this,t,e,n)};ae().prototype.maxPool=function(t,e,n,s){return this.throwIfDisposed(),ix(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.max=function(t,e){return this.throwIfDisposed(),so(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.maximum=function(t){return this.throwIfDisposed(),hi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mean=function(t,e){return this.throwIfDisposed(),zt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.min=function(t,e){return this.throwIfDisposed(),_f(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.minimum=function(t){return this.throwIfDisposed(),ru(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),vQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mod=function(t){return this.throwIfDisposed(),yQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mul=function(t){return this.throwIfDisposed(),W(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.neg=function(){return this.throwIfDisposed(),Pt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Nm(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.notEqual=function(t){return this.throwIfDisposed(),If(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),eA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.onesLike=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pad=function(t,e){return this.throwIfDisposed(),cx(this,t,e)};ae().prototype.pool=function(t,e,n,s,o,r){return this.throwIfDisposed(),TQ(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pow=function(t){return this.throwIfDisposed(),aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prelu=function(t){return this.throwIfDisposed(),ux(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prod=function(t,e){return this.throwIfDisposed(),RQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reciprocal=function(){return this.throwIfDisposed(),tY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu=function(){return this.throwIfDisposed(),_a(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu6=function(){return this.throwIfDisposed(),sA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshapeAs=function(t){return this.throwIfDisposed(),X(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshape=function(t){return this.throwIfDisposed(),X(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),gA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),vA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reverse=function(t){return this.throwIfDisposed(),ca(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rfft=function(){return this.throwIfDisposed(),SY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.round=function(){return this.throwIfDisposed(),oA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rsqrt=function(){return this.throwIfDisposed(),rA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.selu=function(){return this.throwIfDisposed(),iA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.separableConv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),aA(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sigmoid=function(){return this.throwIfDisposed(),Xc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sign=function(){return this.throwIfDisposed(),uY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sin=function(){return this.throwIfDisposed(),cA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sinh=function(){return this.throwIfDisposed(),lA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.slice=function(t,e){return this.throwIfDisposed(),xt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softmax=function(t){return this.throwIfDisposed(),xx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softplus=function(){return this.throwIfDisposed(),Id(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),lx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.split=function(t,e){return this.throwIfDisposed(),vs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sqrt=function(){return this.throwIfDisposed(),_n(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.square=function(){return this.throwIfDisposed(),St(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squaredDifference=function(t){return this.throwIfDisposed(),EY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squeeze=function(t){return this.throwIfDisposed(),kd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Kt?[this,t]:[this,...t];return dr(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.step=function(t){return this.throwIfDisposed(),$d(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stridedSlice=function(t,e,n,s,o,r,i,a){return this.throwIfDisposed(),AY(this,t,e,n,s,o,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sub=function(t){return this.throwIfDisposed(),Ve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sum=function(t,e){return this.throwIfDisposed(),Oe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tan=function(){return this.throwIfDisposed(),DY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tanh=function(){return this.throwIfDisposed(),Em(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tile=function(t){return this.throwIfDisposed(),Zs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toBool=function(){return this.throwIfDisposed(),$e(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toFloat=function(){return this.throwIfDisposed(),$e(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toInt=function(){return this.throwIfDisposed(),$e(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.topk=function(t,e){return this.throwIfDisposed(),FY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.transpose=function(t){return this.throwIfDisposed(),Ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unique=function(t){return this.throwIfDisposed(),BY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),pA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unstack=function(t){return this.throwIfDisposed(),la(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.where=function(t,e){return this.throwIfDisposed(),On(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.zerosLike=function(){return this.throwIfDisposed(),et(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,_o.prototype)}}class Os extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Os.prototype)}}class V extends Error{constructor(e){super(e),Object.setPrototypeOf(this,V.prototype)}}class We extends Error{constructor(e){super(e),Object.setPrototypeOf(this,We.prototype)}}class s1 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s1.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aR{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ua(t,e){if(Array.isArray(t)){let n=[];for(let s=0;s<e;s++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function So(t,e){if(!t)throw new s1(e)}function wS(t,e){let n=0;for(const s of t)s===e&&n++;return n}function Gn(t){return t.length===1?t[0]:t}function lt(t){return Array.isArray(t)?t:[t]}function Yo(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ai(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Es={};function o1(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Eb(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Eb(e));else{const e=Object.keys(t);for(const n of e){const s=t[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?t[n]=s.value:Eb(s))}}}function Rd(t,e={},n={},s="object",o=!1){if(typeof t=="string"){const r=t;let i;if(r in n)i=n[r];else if(r in Es)i=Es[r];else if(i=e[r],i==null)throw new V(`Unknown ${s}: ${t}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const r=t;if(r.className==null||r.config==null)throw new V(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const i=r.className;let a,c;if(i in n?[a,c]=n[i]:i in Es?[a,c]=Es.className:i in e&&([a,c]=e[i]),a==null)throw new V(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(c!=null){const l={};for(const f of Object.keys(Es))l[f]=Es[f];for(const f of Object.keys(n))l[f]=n[f];const u=r.config;u.customObjects=l;const d=Object.assign({},Es);for(const f of Object.keys(n))Es[f]=n[f];Eb(r.config);const h=c(a,r.config,n,o);return Es=Object.assign({},d),h}else{const l=Object.assign({},Es);for(const d of Object.keys(n))Es[d]=n[d];const u=new a(r.config);return Es=Object.assign({},l),u}}}function pZ(t,e){return t<e?-1:t>e?1:0}function mh(t,e){return-1*pZ(t,e)}function jr(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function mZ(t){if(t==null)throw new V(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ia(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new V(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function r1(t,e,n=0,s=1/0){return So(n>=0),So(s>=n),Array.isArray(t)&&t.length>=n&&t.length<=s&&t.every(o=>typeof o===e)}function cn(t,e){Array.isArray(t)?($(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,s)=>cn(n,`element ${s+1} of ${e}`))):$(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${cR(t)}.`)}function cR(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>cR(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function gZ(t,e,n){let s=n!=null?n():jn(),o;return(...i)=>{const a=n!=null?n():jn();return a-s<e||(s=a,o=t(...i)),o}}function lR(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let vZ=0;function uR(){return vZ++}const gh={};function Fm(t=""){return t in gh||(gh[t]=0),gh[t]+=1,t+gh[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bZ=["channelsFirst","channelsLast"],yZ=["nearest","bilinear"],xZ=["valid","same","causal"],wZ=["max","avg"],CZ=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Pa=new Map;function Vt(t){Ia(bZ,"DataFormat",t)}function _Z(t){Ia(yZ,"InterpolationFormat",t)}function _s(t){Ia(xZ,"PaddingMode",t)}function dR(t){Ia(wZ,"PoolMode",t)}const Ul=[],CS="/";function Hi(t,e){Ul.push(t);try{const n=e();return Ul.pop(),n}catch(n){throw Ul.pop(),n}}function SZ(){return Ul.length===0?"":Ul.join(CS)+CS}function hR(t){if(!pR(t))throw new Error("Not a valid tensor name: '"+t+"'");return SZ()+t}function fR(t){if(!pR(t))throw new Error("Not a valid tensor name: '"+t+"'");Pa.has(t)||Pa.set(t,0);const e=Pa.get(t);if(Pa.set(t,Pa.get(t)+1),e>0){const n=`${t}_${e}`;return Pa.set(n,1),n}else return t}const IZ=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function pR(t){return!!t.match(IZ)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EZ(t){return t===parseInt(t.toString(),10)}function zr(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let s=1;for(let o=e;o<n;++o)s*=t[o];return s}function Oc(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s<e&&(e=s)}return e}function Xr(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s>e&&(e=s)}return e}function lo(t,e){if(e<t)throw new V(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let s=t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Wg;function qt(){return Wg==null&&(Wg=n8().epsilon()),Wg}function uo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lo(t,e){return $e(t,e)}function Dd(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),X(t,n)}function kZ(t,e){return J(()=>{if(t.shape.length!==2)throw new V(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Dd(t,1);return kb(n,[1,e,1])})}function $Z(t){const e=[zr(t.shape)];return X(t,e)}function TZ(t){if(t.rank<=1)throw new V(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],zr(t.shape,1)];return X(t,e)}function Ki(t,e,n){return J(()=>{switch(t.rank){case 1:return bx(t,e,n);case 2:return uA(t,[e,0],[n,t.shape[1]]);case 3:return yx(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return kf(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return xt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return xt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new V(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Gg(t,e,n){return J(()=>{switch(t.rank){case 1:return bx(t,e,n);case 2:return uA(t,[0,e],[t.shape[0],n]);case 3:return yx(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return kf(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new V(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function vh(t,e,n,s){return J(()=>{switch(t.rank){case 1:return bx(t,e,n);case 2:switch(s){case 1:return Ki(t,e,n);case 2:return Gg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Ki(t,e,n);case 2:return yx(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Gg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Ki(t,e,n);case 2:return kf(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return kf(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Gg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}default:throw new V(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function i1(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),qn(t,e)}function _S(t,e){switch(t.rank){case 1:return F5([t,e]);case 2:return M5([t,e],0);case 3:return V5([t,e],0);case 4:return j5([t,e],0);default:throw new V(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function kb(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new V(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Zs(t,e)}function Pm(t,e=0,n=1,s,o){return YQ(t,e,n,s,o)}function Fo(t,e,n,s){if(t.rank<2||e.rank<2)throw new We(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(o!==r)throw new We(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return aS({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?$b(t.rank,s,uo()):null,activation:n});{const o=t.shape.slice(),r=o.pop();t=X(t,[-1,r]);const i=e.shape.slice(),a=i.pop(),c=i.pop(),l=[...i,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=X(Ze(e,u),[c,-1]);const d=[...o,...l];return X(aS({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?$b(t.rank,s,uo()):null,activation:n}),d)}}function mR(t,e,n){return J(()=>(Array.isArray(e)?e=rs(e,"int32"):e=$e(e,"int32"),nx(t,e,n)))}function Od(t){return W(t,t)}function $b(t,e,n){const s=e.shape;if(e.rank!==1&&e.rank!==t)throw new V(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1,1,1]):X(e,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,1,1,s[0]]):X(e,[1].concat(s))}else if(t===4){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1,1]):X(e,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,1,s[0]]):X(e,[1].concat(s))}else if(t===3){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1]):X(e,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,s[0]]):X(e,[1].concat(s))}else if(t<3)return e;throw new V(`Unsupported input rank by biasAdd: ${e.rank}`)}function go(t,e,n){return J(()=>(n==null&&(n=uo()),Vt(n),we(t,$b(t.rank,e,n))))}function NZ(t,e=1){if(e!==1)throw new We(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Tm(t)}function AZ(t){return J(()=>Fe(t,we($n(t),1)))}function gR(t,e,n,s){return J(()=>HY(t,e,n,s))}function RZ(t){return J(()=>{const e=we(.5,W(.2,t));return ws(e,0,1)})}function Ld(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DZ=["fanIn","fanOut","fanAvg"],OZ=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LZ(t){Ia(DZ,"FanMode",t)}function FZ(t){Ia(OZ,"Distribution",t)}class Gs extends Jc{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class vR extends Gs{apply(e,n){return rn(e,n)}}vR.className="Zeros";me(vR);class a1 extends Gs{apply(e,n){return fi(e,n)}}a1.className="Ones";me(a1);class bR extends Gs{constructor(e){if(super(),typeof e!="object")throw new V(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new V(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return J(()=>W(it(this.value),fi(e,n)))}getConfig(){return{value:this.value}}}bR.className="Constant";me(bR);class yR extends Gs{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Ed(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}yR.className="RandomUniform";me(yR);class xR extends Gs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`randomNormal does not support dType ${n}.`);return Pm(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}xR.className="RandomNormal";me(xR);class wR extends Gs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`truncatedNormal does not support dType ${n}.`);return fA(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}wR.className="TruncatedNormal";me(wR);class CR extends Gs{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return J(()=>{if(e.length!==2||e[0]!==e[1])throw new V("Identity matrix initializer can only be used for 2D square matrices.");return W(this.gain,XN(e[0]))})}getConfig(){return{gain:this.gain}}}CR.className="Identity";me(CR);function PZ(t,e="channelsLast"){let n,s;if(Vt(e),t.length===2)n=t[0],s=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=zr(t,2);n=t[1]*o,s=t[0]*o}else if(e==="channelsLast"){const o=zr(t,0,t.length-2);n=t[t.length-2]*o,s=t[t.length-1]*o}}else{const o=zr(t);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class ls extends Gs{constructor(e){if(super(),e.scale<0)throw new V(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,LZ(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,FZ(this.distribution),this.seed=e.seed}apply(e,n){const s=PZ(e),o=s[0],r=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(o+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`${this.getClassName()} does not support dType ${n}.`);return fA(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Ed(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ls.className="VarianceScaling";me(ls);class c1 extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}c1.className="GlorotUniform";me(c1);class l1 extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}l1.className="GlorotNormal";me(l1);class u1 extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}u1.className="HeNormal";me(u1);class d1 extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}d1.className="HeUniform";me(d1);class h1 extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}h1.className="LeCunNormal";me(h1);class f1 extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}f1.className="LeCunUniform";me(f1);class _R extends Gs{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return J(()=>{if(e.length<2)throw new We("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const s=ce(e.slice(0,-1)),o=e[e.length-1],r=s*o;r>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${r}) elements: Slowness may result.`);const i=[Math.max(o,s),Math.min(o,s)],a=Pm(i,0,1,n,this.seed),c=j7.qr(a,!1);let l=c[0];const d=c[1].flatten().stridedSlice([0],[Math.min(o,s)*Math.min(o,s)],[Math.min(o,s)+1]);return l=W(l,d.sign()),s<o&&(l=l.transpose()),W(it(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}_R.className="Orthogonal";me(_R);const SS={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function IS(t,e={}){return Rd(t,Ns.getMap().classNameMap,e,"initializer")}function Rt(t){return o1(t)}function Tt(t){if(typeof t=="string"){const e=t in SS?SS[t]:t;if(e==="GlorotNormal")return new l1;if(e==="GlorotUniform")return new c1;if(e==="HeNormal")return new u1;if(e==="HeUniform")return new d1;if(e==="LeCunNormal")return new h1;if(e==="LeCunUniform")return new f1;{const n={};return n.className=e,n.config={},IS(n)}}else return t instanceof Gs?t:IS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tb(t){return Array.isArray(t)&&Array.isArray(t[0])}function $f(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ue(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new V(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function nt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new V(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tf(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((s,o)=>s*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ES="Variable";class MZ{constructor(e,n="float32",s=ES,o=!0,r=null){this.dtype=n??"float32",this.shape=e.shape,this.id=uR(),s=s??ES,this.originalName=hR(s),this.name=fR(this.originalName),this.trainable_=o,this.constraint=r,this.val=jY(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),BZ(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function BZ(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Nb(t){return t.map(e=>e.read())}function p1(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Xt{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class jo{constructor(e,n,s,o,r,i,a){this.dtype=e,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=a,this.id=uR(),i!=null&&(this.originalName=hR(i),this.name=fR(this.originalName)),this.rank=n.length}}let VZ=0,Mm=class{constructor(e,n){this.callArgs=n,this.id=VZ++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const s of e.inboundLayers)s!=null&&s.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},UZ=0;class Xe extends Jc{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=UZ++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const s=this.getClassName();n=Yo(s)+"_"+Fm(s)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let s;if(e.batchInputShape!=null)s=e.batchInputShape;else if(e.inputShape!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),s=[r].concat(e.inputShape)}this.batchInputShape=s;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Os(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new V(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Gn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Gn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new _o(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new _o(`Layer ${this.name} is not connected, no input to return.`);return Gn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new _o(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new _o(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Gn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=lt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=lt(this.inputSpec);if(n.length!==s.length)throw new V(`Layer ${this.name} expects ${s.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const r=n[o],i=s[o];if(i==null)continue;const a=r.rank;if(i.ndim!=null&&a!==i.ndim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&r.dtype!==i.dtype)throw new V(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const c=r.shape;for(const l in i.axes){const u=Number(l),d=i.axes[l],h=u>=0?c[u]:c[c.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${c}.`)}}if(i.shape!=null)for(let c=0;c<i.shape.length;++c){const l=i.shape[c],u=r.shape[c];if(l!=null&&u!=null&&l!==u)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const s=lt(e),o=WZ(e),r=GZ(e);if(o===r)throw new V("Arguments to apply() must be all SymbolicTensors or all Tensors");return Hi(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of lt(e))i.push(a.shape);this.build(Gn(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=lt(i),c=[];for(let l of a)s.indexOf(l)!==-1&&(l=l.clone()),c.push(l);if(i=Gn(c),this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=jZ(e),a=this.computeOutputShape(i);let c;const l=zZ(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?c=a.map((u,d)=>new jo(l,u,this,lt(e),n,this.name,d)):c=new jo(l,a,this,lt(e),n,this.name),this.addInboundNode(e,c,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&e[o]!=null&&e[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new _o(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);e.indexOf(s)===-1&&e.push(s)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new _o(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Os(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Tf(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Nb(e?this.trainableWeights:this.weights)}setWeights(e){J(()=>{const n=this.weights;if(n.length!==e.length)throw new V(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const s=[],o=Nb(n);for(let r=0;r<o.length;++r){const i=o[r],a=n[r],c=e[r];if(!at(i.shape,c.shape))throw new V(`Layer weight shape ${i.shape} not compatible with provided weight shape ${c.shape}`);s.push([a,c])}p1(s)})}addWeight(e,n,s,o,r,i,a,c){if(this._addedWeightNames.indexOf(e)!==-1)throw new V(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=c!=null?c():Tt("zeros"));const l=o.apply(n,s),u=new MZ(l,s,e,i,a);return l.dispose(),r!=null&&this.addLoss(()=>r.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=lt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,s){if(!this.supportsMasking)return;const o=this.computeMask(e,s),r=lt(n),i=lt(o);if(r.length!==i.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=i[a]}addInboundNode(e,n,s,o,r,i,a=null){const c=lt(e);n=lt(n),s=lt(s),o=lt(o),r=$f(r),i=$f(i);const l=[],u=[],d=[];for(const h of c)l.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new Mm({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:d,inputTensors:c,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:i},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function jZ(t){t=lt(t);const e=[];for(const n of t)e.push(n.shape);return Gn(e)}function zZ(t){return"float32"}function SR(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const s=e.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const i=s.inputTensors[r],a=s.inboundLayers[r],c=s.nodeIndices[r],l=SR(i,a,c);for(const u of l)o.indexOf(u)===-1&&o.push(u)}return o}}}function WZ(t){let e=!0;for(const n of lt(t))if(!(n instanceof jo)){e=!1;break}return e}function GZ(t){let e=!0;for(const n of lt(t))if(n instanceof jo){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fd extends Xe{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Fm("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new V("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new V("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new V("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new jo(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Mm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new V(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Fd.className="InputLayer";me(Fd);function HZ(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new V("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Fd({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KZ(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return $e(e,t.dtype)}catch{throw new V(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Or{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Or)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,s){if(this.id2Value[e.id]==null)this.id2Value[e.id]=KZ(e,n),this.name2Id[e.name]=e.id,s!=null&&(this.id2Mask[e.id]=s);else throw new V(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof jo){if(this.id2Value[e.id]==null)throw new V(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new V(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof jo){if(this.id2Value[e.id]==null)throw new V(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new V(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&He(this.id2Mask)}}const Nf=new aR,Af=new aR;function qZ(t){Nf!=null&&Nf.setMaxEntries(t),Af!=null&&Af.setMaxEntries(t)}function Sl(t,e,n,s){const o=n==null?!1:n.training,r=Array.isArray(t),i=r?t:[t],a=i.map(p=>p.name),c=[],l=e.names();for(const p of a)l.indexOf(p)!==-1?c.push(e.getValue(p)):c.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=Nf.get(u),h;if(d==null){const p=XZ(i,e);d=p.sorted,h=p.recipientCounts,Nf.put(u,d),Af.put(u,h)}h={},o||Object.assign(h,Af.get(u));const f=new Or(e);for(let p=0;p<d.length;++p){const m=d[p],v=m.sourceLayer;if(v instanceof Fd)continue;const g=[],b=[],x=[];let y=!1;for(const I of m.inputs){const E=f.getValue(I),O=f.getMask(I);g.push(E),b.push(O),O!=null&&(y=!0),o||(h[I.name]--,h[I.name]===0&&!e.hasKey(I)&&a.indexOf(I.name)===-1&&!E.isDisposed&&I.sourceLayer.stateful!==!0&&x.push(E))}y&&(n=n||{},n.mask=b[0]);const w=lt(v.apply(g,n));let C=null;v.supportsMasking&&(C=v.computeMask(g,b));const _=YZ(m),S=Array.isArray(_)?_:[_];for(let I=0;I<S.length;++I){f.hasKey(S[I])||f.add(S[I],w[I],Array.isArray(C)?C[0]:C);const E=a.indexOf(S[I].name);E!==-1&&(c[E]=w[I])}o||He(x)}return f.disposeMasks(),r?c:c[0]}function XZ(t,e){$(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(t.length===1){const o=kS(t[0],e);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of t){const{sorted:i,recipientMap:a}=kS(r,e);for(const c of i)o.has(c.name)||(n.push(c),o.add(c.name));for(const c in a)s[c]==null&&(s[c]=new Set),a[c].forEach(l=>s[c].add(l))}}return{sorted:n,recipientCounts:QZ(s)}}function QZ(t){const e={};for(const n in t)e[n]=t[n].size;return e}function kS(t,e){const n=new Set,s=[],o={};for(const a of e.names())n.add(a);const r=[],i=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const c=i[i.length-1]===r.length-1;if(a.inputs.length===0||c)r.pop(),s.push(a),n.add(a.name),c&&i.pop();else{i.push(r.length-1);for(const l of a.inputs)o[l.name]==null&&(o[l.name]=new Set),o[l.name].add(a.name),!n.has(l.name)&&r.push(l)}}return{sorted:s,recipientMap:o}}function YZ(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let s=0;s<t.sourceLayer.inboundNodes.length;++s)for(const o of t.sourceLayer.inboundNodes[s].outputTensors)if(o.id===t.id){n=s;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JZ=te();JZ.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,qZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function m1(t,e){return J(()=>_n(Oe(W(t,t),e,!0)))}class Pd extends Jc{getConfig(){return{}}}class IR extends Pd{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=m1(e,this.axis),s=ws(n,0,this.maxValue);return W(e,Fe(s,we(qt(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}IR.className="MaxNorm";me(IR);class ER extends Pd{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>Fe(e,we(qt(),m1(e,this.axis))))}getConfig(){return{axis:this.axis}}}ER.className="UnitNorm";me(ER);class kR extends Pd{apply(e){return _a(e)}}kR.className="NonNeg";me(kR);class $R extends Pd{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=m1(e,this.axis),s=we(W(this.rate,ws(n,this.minValue,this.maxValue)),W(1-this.rate,n));return W(e,Fe(s,we(qt(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}$R.className="MinMaxNorm";me($R);const $S={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Qt(t){return o1(t)}function TS(t,e={}){return Rd(t,Ns.getMap().classNameMap,e,"constraint")}function Yt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in $S?$S[t]:t,config:{}};return TS(n)}else return t instanceof Pd?t:TS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function _i(t){if(t==null)return;const e=[],n=[],s=[];for(const o in t){const r=t[o];if(typeof r!="number"){const i=r;e.push(i.data()),n.push(o),s.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let r=0;r<o.length;++r)t[n[r]]=o[r][0];He(s)}}function TR(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var NS;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(NS||(NS={}));const ZZ=125;class au{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class eee{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class tee extends au{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=J(()=>we(this.totals[o],W(r,s)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:J(()=>{const o=W(Fe(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),Do(n[s])}))}}class nee extends au{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const e=[],n=[],s=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const c=i[a];e.push(c.data()),n.push(r),s.push(a)}}const o=await Promise.all(e);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class see extends au{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||OA,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=ZZ),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");rb(this.yieldEvery)&&(this.maybeWait=gZ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,s){const o=[];this.yield!=null&&(await _i(s),o.push(this.yield(e,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await _i(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const s=[];this.epochEnd!=null&&(await _i(n),s.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(e,n){this.batchBegin!=null&&(await _i(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const s=[];this.batchEnd!=null&&(await _i(n),s.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):rb(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(s)}async onTrainBegin(e){this.trainBegin!=null&&(await _i(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await _i(e),await this.trainEnd(e))}}function NR(t,e){return t==null&&(t={}),t instanceof au?[t]:Array.isArray(t)&&t[0]instanceof au?t:lt(t).map(s=>new see(s,e))}class $s{constructor(){}static registerCallbackConstructor(e,n){$(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),$s.checkForDuplicate(n),$s.constructors[e]==null&&($s.constructors[e]=[]),$s.constructors[e].push(n)}static checkForDuplicate(e){for(const n in $s.constructors)$s.constructors[+n].forEach(o=>{if(o===e)throw new V("Duplicate callback constructor.")})}static clear(){$s.constructors={}}static createCallbacks(e){const n=[];for(const s in $s.constructors){const o=+s;e>=o&&n.push(...$s.constructors[o])}return n.map(s=>new s)}}$s.constructors={};function AR(t,e,n,s,o,r,i,a,c){const l=new nee,u=[new tee,...$s.createCallbacks(e)];t!=null&&u.push(...t),u.push(l);const d=new eee(u);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:i,verbose:e,doValidation:a,metrics:c}),{callbackList:d,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Po(t,e={},n=!1){return Rd(t,Ns.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rf(t,e){return J(()=>{t.dtype!=="float32"&&(t=$e(t,"float32"));const n=Oe(Od(t),e,!0),s=$m(n.shape,qt()),o=_n(hi(n,s));return Fe(t,o)})}function Bm(t,e){return J(()=>zt(Od(Ve(e,t)),-1))}function g1(t,e){return J(()=>zt($n(Ve(e,t)),-1))}function v1(t,e){return J(()=>{const n=Ve(t,e),s=ws($n(t),qt(),Number.MAX_VALUE),o=$n(Fe(n,s));return W(100,zt(o,-1))})}function oee(t,e){return J(()=>{const n=ws(e,qt(),Number.MAX_VALUE),s=Uo(we(1,n)),o=ws(t,qt(),Number.MAX_VALUE),r=Uo(we(1,o));return zt(Od(Ve(s,r)),-1)})}function ree(t,e){return J(()=>{const n=hi(0,Ve(1,W(t,e)));return zt(Od(n),-1)})}function iee(t,e){return J(()=>{const n=hi(0,Ve(1,W(t,e)));return zt(n,-1)})}function aee(t,e){return J(()=>{const n=Oe(W(t,e),-1),s=so(W(Ve(1,t),e),-1);return hi(0,we(1,Ve(s,n)))})}function cee(t,e){return J(()=>{const n=Math.log(2),s=Ve(e,t),o=Ve(we(s,Id(W(-2,s))),n);return zt(o,-1)})}function cu(t,e,n=!1){return J(()=>{if(n)e=xx(e);else{const s=Oe(e,e.shape.length-1,!0);e=Fe(e,s)}return e=ws(e,qt(),1-qt()),Pt(Oe(W($e(t,"float32"),Uo(e)),e.shape.length-1))})}function Df(t,e,n=!1){return J(()=>{const s=$e(Am($Z(t)),"int32");e=ws(e,qt(),1-qt());const o=e.shape,r=X(eA(s,o[o.length-1]),o);return cu(r,e,n)})}function lee(t,e){if(!at(t.shape,e.shape))throw new V(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return J(()=>{const n=_a(e),s=Pt($n(e));return we(Ve(n,W(e,t)),QN(Vo(s)))})}function Vm(t,e){return J(()=>{let n;return n=ws(e,qt(),1-qt()),n=Uo(Fe(n,Ve(1,n))),zt(lee(t,n),-1)})}function uee(t,e){return J(()=>{const n=ws(t,qt(),1),s=ws(e,qt(),1);return Oe(W(t,Uo(Fe(n,s))),-1)})}function dee(t,e){return J(()=>{const n=Uo(we(qt(),e));return zt(Ve(e,W(t,n)),-1)})}function RR(t,e){return J(()=>{const n=Rf(t,-1),s=Rf(e,-1),o=W(n,s);return Pt(Oe(o,-1))})}const Of={meanSquaredError:Bm,meanAbsoluteError:g1,meanAbsolutePercentageError:v1,meanSquaredLogarithmicError:oee,squaredHinge:ree,hinge:iee,categoricalHinge:aee,logcosh:cee,categoricalCrossentropy:cu,sparseCategoricalCrossentropy:Df,binaryCrossentropy:Vm,kullbackLeiblerDivergence:uee,poisson:dee,cosineProximity:RR};function Hg(t){if(typeof t=="string"){if(t in Of)return Of[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new V(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DR(t,e){return J(()=>{const n=W(.5,js(e)),s=Lo(Cs(e,n),t.dtype);return zt(Bo(t,s),-1)})}function OR(t,e){return J(()=>Lo(Bo(nu(t,-1),nu(e,-1)),"float32"))}function hee(t,e){return J(()=>$e(Oe(ur(Bo(t,1),Bo(e,1))),"float32"))}function fee(t,e){return J(()=>$e(Oe(ur(Bo(t,0),Bo(e,1))),"float32"))}function pee(t,e){return J(()=>{const n=hee(t,e),s=fee(t,e),o=we(n,s);return $e(On(Cs(o,0),Fe(n,o),0),"float32")})}function mee(t,e){return Vm(t,e)}function gee(t,e){return t.rank===e.rank&&(t=kd(t,[t.rank-1])),e=nu(e,-1),e.dtype!==t.dtype&&(e=$e(e,t.dtype)),$e(Bo(t,e),"float32")}const vee=Bm,bee=Bm,yee=g1,xee=g1,wee=v1,Cee=v1,LR=cu,_ee=RR,FR=Df,Lf={binaryAccuracy:DR,categoricalAccuracy:OR,precision:pee,categoricalCrossentropy:LR,sparseCategoricalCrossentropy:FR,mse:vee,MSE:bee,mae:yee,MAE:xee,mape:wee,MAPE:Cee,cosine:_ee};function See(t){if(typeof t=="string"&&t in Lf)return Lf[t];if(typeof t!="string"&&t!=null)return t;throw new V(`Unknown metric ${t}`)}function bh(t){if(So(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Of))if(Of[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Lf))if(Lf[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iee(t){const e={Adagrad:()=>Fa.adagrad(.01),Adadelta:()=>Fa.adadelta(1,.95,qt()),Adam:()=>Fa.adam(.001,.9,.999,qt()),Adamax:()=>Fa.adamax(.002,.9,.999,qt(),0),RMSProp:()=>Fa.rmsprop(.001,.9,0,qt()),SGD:()=>Fa.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new V(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const AS=1*1024*1024;function RS(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Ab(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(t);s.length>AS&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${AS}.`)}}function Ab(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Ab(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Ab(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Eee(t,e,n,s=console.log){const o=$ee(t),r=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let i;if(!o){r.push("Receives inputs"),i=[];for(const u in t.nodesByDepth)i.push(...t.nodesByDepth[u])}s("_".repeat(e)),Ff(r,n,s),s("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)o?Tee(a[u],n,s):Nee(a[u],n,i,s),s((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const c=kee(t),l=Tf(t.nonTrainableWeights);s(`Total params: ${c+l}`),s(`Trainable params: ${c}`),s(`Non-trainable params: ${l}`),s("_".repeat(e))}function kee(t){let e;return t.collectedTrainableWeights!=null?e=Tf(t.collectedTrainableWeights):e=Tf(t.trainableWeights),e}function $ee(t){let e=!0;const n=[],s=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}s.push(...o)}if(e)for(const o of t.layers){let r=!1;for(const i of o.inboundNodes)if(s.indexOf(i)!==-1)if(r){e=!1;break}else r=!0;if(!e)break}return e}function Ff(t,e,n=console.log){let s="";for(let o=0;o<t.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=t[o],s=s.slice(0,e[o]),s+=" ".repeat(e[o]-s.length);n(s)}function Tee(t,e,n){let s,o;try{o=t.inboundNodes.map(c=>JSON.stringify(c.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const r=t.name,i=t.getClassName(),a=[`${r} (${i})`,o,s,t.countParams().toString()];Ff(a,e,n)}function Nee(t,e,n,s){let o,r;try{r=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{r="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];i.push(`${f}[${p}][${m}]`)}const a=t.name,c=t.getClassName(),l=i.length===0?"":i[0],u=[`${a} (${c})`,r,o,t.countParams().toString(),l];Ff(u,e,s);for(let d=1;d<i.length;++d)Ff(["","","","",i[d]],e,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PR(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Pf(t,e){if(t===null)return null;if(typeof t=="string")return Ai(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let o=0;o<s;++o){const r=t[o];PR(e,o,r)?n.push(r):n.push(Pf(r,e))}return n}else{const n={};for(const s of Object.keys(t)){const o=t[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=Ai(s);n[r]=Pf(o,r)}}return n}}function Rb(t,e){if(t==null)return null;if(typeof t=="string")return Yo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let o=0;o<s;++o){const r=t[o];PR(e,o,r)?n.push(r):n.push(Rb(r,e))}return n}else{const n={};for(const s of Object.keys(t)){const o=t[s],r=Yo(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=Rb(o,s)}return n}}/** @license See the LICENSE file. */const MR="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Aee=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class qs extends Xe{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=Fm(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],jr(this.inputs).length!==this.inputs.length)throw new V(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);jr(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const x=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const x=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;So(y===0,"input layer has >1 nodes"),So(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const x=this.inputLayers[b];if(!(x instanceof Fd))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},i={},a=[],c=(b,x,y,w,C,_)=>{(w==null||C==null||_==null)&&(w=b.sourceLayer,C=b.nodeIndex,_=b.tensorIndex);const S=w.inboundNodes[C];if(y.indexOf(S)!==-1)throw new Os(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf(S)!==-1)return;this.containerNodes.add(qs.nodeKey(w,C)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(S)===-1&&y.push(S);const I=S.inboundLayers.length;for(let E=0;E<I;E++){const O=S.inputTensors[E],A=S.inboundLayers[E],P=S.nodeIndices[E],z=S.tensorIndices[E];c(O,x,y,A,P,z)}for(x.push(S);y.indexOf(S)>=0;)y.splice(y.indexOf(S),1);a.push(S)},l=[],u=[];for(const b of this.outputs)c(b,l,u);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let x=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];x=Math.max(x,y),o[b.outboundLayer.id]=x,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=x;for(let w=0;w<b.inboundLayers.length;w++){const C=b.inboundLayers[w],_=b.nodeIndices[w],S=C.inboundNodes[_],I=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(x+1,I),s[S.id]=S}}const h={};for(const b in n){const x=n[b];x in h||(h[x]=[]),h[x].push(s[b])}const f={};for(const b in o){const x=o[b];x in f||(f[x]=[]),f[x].push(r[b])}let p=Object.keys(f).map(b=>parseInt(b,10)).sort(mh);this.layers=[];for(const b of p){const x=f[b];x.sort((y,w)=>{const C=i[y.id],_=i[w.id];return C<_?-1:C>_?1:0});for(const y of x)y instanceof qs&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=f,p=Object.keys(h).map(b=>parseInt(b,10)).sort(mh);const m=this.inputs.slice(),v=[];for(const b of p)for(const x of h[b]){const y=x.outboundLayer;if(y!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new Os(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${v}`);for(const w of x.outputTensors)m.push(w);v.push(y.name)}}this.nodesByDepth=h;const g=this.layers.map(b=>b.name);for(const b of g){const x=g.filter(y=>y===b).length;if(x!==1)throw new Os(`The name "${b}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Mm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new V("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const s={};let o=0;const r=Aee(e);r&&this.parseWeights(e);for(const a of this.layers)for(const[c,l]of a.weights.entries()){const u=r?`${l.name.split("/").slice(0,-1).join("/")+"/"}${c}`:l.originalName;if(s[u]!=null)throw new V(`Duplicate weight name: ${u}`);s[u]=l,o++}const i=[];for(const a in e){let c=a;if(s[a]==null){const l=a.split("/");c=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(s[c]!=null)i.push([s[c],e[a]]);else if(n)throw new V(`Provided weight data has no target variable: ${a}`);delete s[c]}if(n){const a=[];for(const c in s)a.push(c);if(a.length>0)throw new V(`${a.length} of ${o} weights are not set: ${a}`)}p1(i)}parseWeights(e){for(const n in Object.keys(e)){const s=n.split("/"),o=["vars","layer_checkpoint_dependencies"],r=s.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");r!==n&&(e[r]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${MR}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const s=Rb(this.updatedConfig());return n?JSON.stringify(s):s}call(e,n){return J(()=>{e=lt(e);const s=new Or;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],e[o]);return Sl(this.outputs,s,n)})}computeMask(e,n){return J(()=>{e=lt(e);let s;return n==null?s=ua(null,e.length):s=lt(n),this.runInternalGraph(e,s)[1]})}computeOutputShape(e){const n=$f(e);if(n.length!==this.inputLayers.length)throw new V(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const c=this.inputLayers[a],l=n[a],u=c.name+"_0_0";s[u]=l}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(mh);if(o.length>1)for(const a of o){const c=this.nodesByDepth[a];for(const l of c){const u=l.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<l.inboundLayers.length;m++){const v=l.inboundLayers[m],g=l.nodeIndices[m],b=l.tensorIndices[m],x=`${v.name}_${g}_${b}`,y=s[x];d.push(y)}const h=u.computeOutputShape(Gn(d)),f=$f(h),p=u.inboundNodes.indexOf(l);for(let m=0;m<f.length;m++){const v=`${u.name}_${p}_${m}`;s[v]=f[m]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const c=this.outputLayers[a],l=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${c.name}_${l}_${u}`;i.push(d)}for(let a=0;a<i.length;a++){const c=i[a];So(c in s),r.push(s[c])}return Gn(r)}runInternalGraph(e,n){n==null&&(n=ua(null,e.length));const s={};for(let c=0;c<this.inputs.length;++c){const l=this.inputs[c],u=e[c],d=n[c];s[l.id]=[u,d]}const o=Object.keys(this.nodesByDepth).map(c=>parseInt(c,10)).sort(mh);for(const c of o){const l=this.nodesByDepth[c];for(const u of l){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of h)m.id in s&&p.push(s[m.id]);if(p.length===h.length){let m={},v,g,b,x;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[y,w]=p[0];m.mask==null&&(m.mask=w),b=lt(d.call(y,m)),x=lt(d.computeMask(y,w)),v=[y],g=[w]}else v=p.map(y=>y[0]),g=p.map(y=>y[1]),m.mask==null&&(m.mask=g),b=lt(d.call(v,m)),x=lt(d.computeMask(v,g));if(d.activityRegularizer)throw new We("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<f.length;++y){const w=f[y],C=b[y],_=x[y];s[w.id]=[C,_]}}}}const r=[],i=[],a=[];for(const c of this.outputs){So(c.id in s,`Could not compute output ${c.name} : ${c.id}`);const[l,u]=s[c.id];a.push(l.shape),r.push(l),i.push(u)}return[r,i,a]}buildNodeConversionMap(e){const n={};let s;for(const o of this.layers){s=o instanceof qs?1:0;for(let r=0;r<o.inboundNodes.length;r++){const i=qs.nodeKey(o,r);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new V("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const s of this.layers)if(s.name===e)return s;throw new V(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new V(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return J(()=>{const e=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=qs.nodeKey(n,s);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),c=i.getConfig(),l=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],f=qs.nodeKey(i,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let v=0;v<h.inboundLayers.length;v++){const g=h.inboundLayers[v],b=h.nodeIndices[v],x=h.tensorIndices[v],y=qs.nodeKey(g,b);let w=n[y];w==null&&(w=0),m.push([g.name,w,x,p])}l.push(m)}}}const u={};u.name=i.name,u.className=a,u.config=c,u.inboundNodes=l,s.push(u)}e.layers=s;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],c=this.inputLayersNodeIndices[i],l=qs.nodeKey(a,c);if(!this.containerNodes.has(l))continue;let u=n[l];u==null&&(u=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,u,d])}e.inputLayers=o;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],c=this.outputLayersNodeIndices[i],l=qs.nodeKey(a,c);if(!this.containerNodes.has(l))continue;let u=n[l];u==null&&(u=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,u,d])}return e.outputLayers=r,e}static fromConfig(e,n,s={},o=!1){const r={},i={};function a(v,g){v.name in i?i[v.name].push(g):i[v.name]=[g]}function c(v,g){const b=[];let x;for(const y of g){const w=y[0],C=y[1],_=y[2];if(x=y[3]==null?{}:y[3],!(w in r)){a(v,g);return}const S=r[w];if(S.inboundNodes.length<=C){a(v,g);return}const I=S.inboundNodes[C];b.push(I.outputTensors[_])}b.length>0&&v.apply(Gn(b),x)}function l(v){const g=v.name,b=Po(v,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[g]=b,v.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new V(`Corrupted configuration, expected array for nodeData: ${y}`);a(b,y)})}const u=n.name,d=n.layers;for(const v of d)l(v);for(;!mZ(i);)for(const v of d){const g=r[v.name];if(g.name in i){const b=i[g.name];delete i[g.name];for(const x of b)c(g,x)}}const h=[],f=[],p=n.inputLayers;for(const v of p){const g=v[0],b=v[1],x=v[2];So(g in r);const w=r[g].inboundNodes[b].outputTensors;h.push(w[x])}const m=n.outputLayers;for(const v of m){const g=v[0],b=v[1],x=v[2];So(g in r);const w=r[g].inboundNodes[b].outputTensors;f.push(w[x])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new V("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){J(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ree(t,e,n){const s=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(s===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==s)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(r=>{r in t?o.push(t[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function BR(t,e){return Ree(t,e,"classWeight")}async function VR(t,e,n,s){if(n!=null){const o=J(()=>{if(t.shape.length===1)return Gi(t);if(t.shape.length===2){if(t.shape[1]>1)return nu(t,1);if(t.shape[1]===1)return X(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());He(o);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),rs(i,"float32")}else return null}function Dee(t,e){return W(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Oee=32;function UR(t,e){let n,s;const o=e;n=o.xs,s=o.ys,$(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const r=DS("input",t.inputNames,n),i=DS("output",t.outputNames,s),a=r[0].shape[0];$(r.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),$(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let c=0;c<r.length;c++)$(r[c].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[c]} has ${r[c].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let c=0;c<i.length;c++)$(i[c].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[c]} has ${i[c].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:r,ys:i}}function DS(t,e,n){if(n instanceof Kt)return[n];if(Array.isArray(n))return $(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const s=[];for(const o of e){if(n[o]==null)throw new V(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);s.push(n[o])}return s}}function Lee(t){if(t.length===3)throw new We("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Fee(t,e,n){const s=n.batchesPerEpoch!=null;if($(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),$(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),$(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),$(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),$(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let r,i;if(o)if(OS(n.validationData))$(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=Lee(n.validationData);r=v.xs,i=v.ys}const a=t.makeTrainFunction(),c=t.getDedupedMetricsNames();let l;o?l=c.slice().concat(c.map(v=>"val_"+v)):l=c.slice();const u=NR(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=AR(u,d,n.epochs,null,null,Pee(e,n),null,o,l);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const v={};await h.onEpochBegin(p);let g=0,b=0;for(s||(m=await e.iterator());!s||g<n.batchesPerEpoch;){const x=await m.next();if(s&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:y,ys:w}=UR(t,x.value),C={};C.batch=b,C.size=y[0].shape[0],await h.onBatchBegin(b,C);const _=[];if(n.classWeight!=null){const E=BR(n.classWeight,t.outputNames);for(let O=0;O<E.length;++O)_.push(await VR(w[O],null,E[O]))}const S=y.concat(w).concat(_),I=a(S);He(S);for(let E=0;E<c.length;++E){const O=c[E],A=I[E];C[O]=A,Do(A)}await h.onBatchEnd(b,C),TR(C),b++,g++}if(s?g>=n.batchesPerEpoch:x.done){if(o){let y;OS(n.validationData)?y=lt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=lt(t.evaluate(r,i,{batchSize:n.validationBatchSize==null?Oee:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)v[`val_${t.metricsNames[w]}`]=y[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,v),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Pee(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function OS(t){return typeof t.iterator=="function"}function Mee(t){return typeof t.next=="function"}async function Bee(t,e,n){n=n||{};const s=n.batches!=null,o=t.testFunction;let r=[];if(n.verbose>0)throw new We("Verbose mode is not implemented yet.");$(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Mee(e)?e:await e.iterator();let a=0,c=0;for(;!s||c<n.batches;){const l=await i.next();if(r=J(()=>{if(l.value){const{xs:u,ys:d}=UR(t,l.value),h=u.concat(d),f=J(()=>o(h));if(He(h),c===0)for(let m=0;m<f.length;++m)r.push(it(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const v=f[m],g=r[m];r[m]=J(()=>we(r[m],W(p,v))),c>0&&He(g)}He(f),a+=p,++c}return r}),l.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<r.length;++l){const u=r[l];r[l]=Fe(r[l],a),He(u)}return Gn(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kg(t){$(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function gl(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(s=>Ki(s,e,n-e)):Ki(t,e,n-e)}function Db(t,e){return J(()=>t==null?null:Array.isArray(t)?t.map(n=>Db(n,e)):mR(t,e.dtype==="int32"?e:$e(e,"int32")))}function qg(t,e){const n=[];let s=0,o=null;for(;s<t;)o=s+e,o>=t&&(o=t),n.push([s,o]),s=o;return n}function jR(t){const e=[];t instanceof Kt&&(t=[t]);for(let n=0;n<t.length;++n){const s=t[n];if(s.rank===1)e.push(Dd(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(s)}}return e}function Ks(t,e){if(t==null)return;const n=[];if(e instanceof Kt)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const r=e[o];n.push(r.id)}const s=[];if(t instanceof Kt)n.indexOf(t.id)===-1&&s.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(t!=null)for(const o in t){const r=t[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vee(t){return t instanceof Kt}function Ob(t){return Array.isArray(t)}function LS(t){return!Vee(t)&&!Ob(t)}function FS(t,e,n,s=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(Ob(t)&&t.length>0)i=!0;else if(LS(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new V(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let r;if(LS(t)){t=t,r=[];for(const i of e){if(t[i]==null)throw new V(`No data provided for "${i}". Need data for each key in: ${e}`);r.push(t[i])}}else if(Ob(t)){if(t=t,t.length!==e.length)throw new V(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);r=t}else{if(t=t,e.length>1)throw new V(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);r=[t]}if(r=jR(r),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new V(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let c=0;c<n[i].length;++c){if(c===0&&!s)continue;const l=a.shape[c],u=n[i][c];if(u!=null&&u>=0&&l!==u)throw new V(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function Uee(t,e,n){const s=jr(t.map(r=>r.shape[0]));s.sort();const o=jr(e.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new V(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(o.length>1)throw new V(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!at(s,o))throw new V(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function jee(t,e,n){const s=[Bm,Vm,cu];for(let o=0;o<t.length;++o){const r=t[o],i=e[o],a=n[o];if(i!=null){if(i===cu&&r.shape[r.shape.length-1]===1)throw new V(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const c=r.shape.slice(1),l=a.slice(1);for(let u=0;u<c.length;++u){const d=c[u],h=l[u];if(h!=null&&d!==h)throw new V(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function PS(t,e,n,s=!0,o=""){let r;if(Array.isArray(t)){if(t.length!==e.length)throw new V(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);r=t}else{if(e.length>1)throw new V(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);r=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new V(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let c=0;c<n[i].length;++c){if(c===0&&!s)continue;const l=a.shape[c],u=n[i][c];if(u!=null&&u!==l)throw new V(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function zee(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(s=>n);{const s=[];for(const o of e){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const Wee="layers-model";class dc extends qs{constructor(e){super(e),this.isTraining=!1}summary(e,n,s=console.log){if(!this.built)throw new V("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Eee(this,e,n,s)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Iee(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof pi))throw new V("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new V(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(Hg(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new V(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Hg(a))}else{const i=Hg(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],c=this.outputNames[i];this.feedOutputNames.push(c),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Hi("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=zee(e.metrics,this.outputNames),r=(i,a,c)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([c,i])};Hi("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=o[i];(l=>{const u="";let d,h,f;for(const p of l){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const v=this.internalOutputShapes[i];v[v.length-1]===1||this.lossFunctions[i]===Vm?["accuracy","acc"].indexOf(p)!==-1?h=DR:["crossentropy","ce"].indexOf(p)!==-1&&(h=mee):this.lossFunctions[i]===Df?["accuracy","acc"].indexOf(p)!==-1?h=gee:["crossentropy","ce"].indexOf(p)!==-1&&(h=FR):["accuracy","acc"].indexOf(p)!==-1?h=OR:["crossentropy","ce"].indexOf(p)!==-1&&(h=LR);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=u+g}else f=See(p),d=u+bh(p);let m;Hi(d,()=>{m=f}),r(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,s={}){const o=s.batchSize==null?32:s.batchSize;Kg(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const c=this.testFunction,l=this.testLoop(c,a,o,s.verbose,s.steps);return Gn(l)}finally{Ks(i[0],e),Ks(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Bee(this,e,n)}checkNumSamples(e,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new V(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?r=e[0].shape[0]:r=e.shape[0];else throw new V(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new V("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),i=new Or;if(e instanceof Kt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new V(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)i.add(this.inputs[c],e[c])}else for(const c of this.inputs){const l=e[c.name];if(l==null)throw new V(`No value is provided for the model's input ${c.name}`);i.add(c,l)}const a=Sl(r,i);return s?a:a[0]}retrieveSymbolicTensors(e){const n=ua(null,e.length);let s=e.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],i=r.map(a=>a.name);for(let a=0;a<e.length;++a){const c=i.indexOf(e[a]);if(c!==-1&&(n[a]=r[c],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,i)=>{r==null&&o.push(e[i])}),new V(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,s=!1){return J(()=>{const o=this.checkNumSamples(e);if(s)throw new We("Verbose predictLoop() is not implemented yet.");const r=qg(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)J(()=>{const l=r[a][0],u=r[a][1],d=gl(e,l,u),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Or(h);return Sl(this.outputs,f)}).forEach((l,u)=>i[u].push(l));return Gn(i.map(a=>qn(a,0)))})}predict(e,n={}){const s=jR(e);PS(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return Kg(o),this.predictLoop(s,o)}finally{Ks(s,e)}}predictOnBatch(e){PS(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,s=!0,o){if(this.optimizer_==null)throw new Os("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Df?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(e=FS(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=FS(n,this.feedOutputNames,r,!1,"target"),Uee(e,n),jee(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new V(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,s,o,r=!0,i){const[a,c]=this.standardizeUserDataXY(e,n,r,i);if(s!=null)throw new Error("sample weight is not supported yet.");let l=null;if(o!=null){const u=BR(o,this.outputNames);l=[];for(let d=0;d<u.length;++d)l.push(await VR(c[d],null,u[d]))}return[a,c,l]}testLoop(e,n,s,o=0,r){return J(()=>{const i=this.checkNumSamples(n,s,r,"steps"),a=[];if(o>0)throw new We("Verbose mode is not implemented yet.");if(r!=null)throw new We("steps mode in testLoop() is not implemented yet");{const c=qg(i,s),l=rs(lo(0,i));for(let u=0;u<c.length;++u){const d=c[u][0],h=c[u][1],f=Ki(l,d,h-d),p=Db(n,f),m=e(p);if(u===0)for(let v=0;v<m.length;++v)a.push(it(0));for(let v=0;v<m.length;++v){const g=m[v];a[v]=we(a[v],W(h-d,g))}}for(let u=0;u<a.length;++u)a[u]=Fe(a[u],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let s=0;s<e.length;++s){const o=e[s];let r=o;if(wS(e,o)>1){const i=wS(e.slice(0,s),o);r+=`_${i}`}n.push(r)}return n}makeTrainFunction(){return e=>{const n=[],s=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:s[m]});const h=new Or(d),f=Sl(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const v=this.lossFunctions[m];let g=v(o[m],f[m]);r[m]!=null&&(g=Dee(g,r[m]));const b=zt(g);n.push(b),m===0?p=g:p=we(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let v;if(this.outputs.length>1&&m<this.outputs.length)v=n[m];else{const g=this.metricsTensors[m][0],b=this.metricsTensors[m][1];v=zt(g(o[b],f[b]))}Do(v),i.push(v)}return p=zt(p),this.calculateLosses().forEach(m=>{p=we(p,m)}),p},c=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,c)].concat(i)}}makeTestFunction(){this.testFunction=e=>J(()=>{const n=[];let s;const o=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:o[l]});const a=new Or(i),c=Sl(this.outputs,a);for(let l=0;l<this.lossFunctions.length;++l){const u=this.lossFunctions[l],d=zt(u(r[l],c[l]));l===0?s=d:s=we(s,d),n.push(s)}for(let l=0;l<this.metricsTensors.length;++l){const u=this.metricsTensors[l][0],d=this.metricsTensors[l][1],h=zt(u(r[d],c[d]));n.push(h)}return n})}async fit(e,n,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,r,i,a,c,l,u,d,h;try{const f=s.batchSize==null?32:s.batchSize;Kg(f);const m=await this.standardizeUserData(e,n,s.sampleWeight,s.classWeight,!1,f);o=m[0],r=m[1],h=m[2];let v=!1,g;if(s.validationData!=null&&s.validationData.length>0){if(v=!0,s.validationData.length===2)c=s.validationData[0],l=s.validationData[1];else throw s.validationData.length===3?new We("validationData including sample weights is not supported yet."):new V(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const E=await this.standardizeUserData(c,l,null,null,!0,f);u=E[0],d=E[1],g=u.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){v=!0;const I=Math.floor(o[0].shape[0]*(1-s.validationSplit)),E=o[0].shape[0];u=gl(o,I,E),i=o,o=gl(o,0,I),d=gl(r,I,E),a=r,r=gl(r,0,I),g=u.concat(d)}else s.validationSteps!=null&&(v=!0);const b=o.concat(r).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let w,C;v?(this.makeTestFunction(),w=this.testFunction,C=y.slice().concat(y.map(I=>"val_"+I))):(w=null,g=[],C=y.slice());const _=NR(s.callbacks,s.yieldEvery);return await this.fitLoop(x,b,y,f,s.epochs,s.verbose,_,w,g,s.shuffle,C,s.initialEpoch,null,null)}finally{this.isTraining=!1,Ks(o,e),Ks(r,n),Ks(i,e),Ks(a,n),Ks(u,c),Ks(d,l),h!=null&&He(h)}}async fitLoop(e,n,s,o,r,i,a,c,l,u,d,h,f,p){o==null&&(o=32),r==null&&(r=1),u==null&&(u=!0),h==null&&(h=0);let m=!1;if(c!=null&&l!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new V("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,o,f,"steps_per_epoch");let g;v!=null&&(g=lo(0,v)),i==null&&(i=1);const{callbackList:b,history:x}=AR(a,i,r,h,v,f,o,m,d);b.setModel(this),this.history=x,await b.onTrainBegin(),this.stopTraining_=!1;for(let y=h;y<r;++y){await b.onEpochBegin(y);const w={};if(f!=null)throw new We("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new We("batch shuffling is not implemneted yet");u&&hq(g);const C=rs(g),_=qg(v,o);for(let S=0;S<_.length;++S){const I={};if(await b.onBatchBegin(S,I),J(()=>{const E=_[S][0],O=_[S][1],A=Ki(C,E,O-E);I.batch=S,I.size=O-E;const P=Db(n,A),z=e(P);for(let G=0;G<s.length;++G){const M=s[G],R=z[G];I[M]=R,Do(R)}if(S===_.length-1&&m){const G=this.testLoop(c,l,o);for(let M=0;M<s.length;++M){const R=s[M],D=G[M];Do(D),w["val_"+R]=D}}}),await b.onBatchEnd(S,I),TR(I),this.stopTraining_)break}C.dispose()}if(await b.onEpochEnd(y,w),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Fee(this,e,n)}async trainOnBatch(e,n){const s=await this.standardizeUserData(e,n),o=s[0],r=s[1],a=this.makeTrainFunction()(o.concat(r)),c=[];for(const l of a){const u=await l.data();c.push(u[0])}return He(a),Ks(s[0],e),Ks(s[1],n),Gn(c)}getNamedWeights(e){const n=[],s=e!=null&&e.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let i=0;i<o.length;++i)s&&!o[i].trainable||n.push({name:o[i].originalName,tensor:r[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=tS().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-tS().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Yo(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Yo(n))}else{const n=Object.keys(this.loss);e={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")e[o]=Yo(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Yo(bh(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Yo(bh(e)));{const e={};for(const n in this.metrics)e[n]=Yo(bh(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Pf(e.optimizer_config),s=Po(n);let o;if(typeof e.loss=="string")o=Ai(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>Ai(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=Ai(e.loss[i])}let r;if(Array.isArray(e.metrics))r=e.metrics.map(i=>Ai(i));else if(e.metrics!=null){r={};for(const i in e.metrics)r[i]=Ai(e.metrics[i])}this.compile({loss:o,metrics:r,optimizer:s})}async save(e,n){if(typeof e=="string"){const l=v8(e);if(l.length===0)throw new V(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new V(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new V("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await nS(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Wee,generatedBy:`TensorFlow.js tfjs-layers v${MR}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:u,specs:d}=await nS(await this.optimizer.getWeights(),l);s.specs.push(...d),s.data=l8([s.data,u])}return this.userDefinedMetadata!=null&&(RS(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,e.save(a)}setUserDefinedMetadata(e){RS(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}dc.className="Model";me(dc);class zR extends dc{}zR.className="Functional";me(zR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Gee(t,e){if(e==null&&(e={}),typeof t=="string"){const n=b8(t,e);if(n.length===0)n.push(J7(t,e));else if(n.length>1)throw new V(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Hee(t,void 0,e)}async function Hee(t,e,n){if(n==null&&(n={}),t.load==null)throw new V("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const s=await t.load();let o=s.modelTopology;o.model_config!=null&&(o=o.model_config);const r=n.strict==null?!0:n.strict,i=s.weightData!=null&&s.weightSpecs!=null&&r,a=Po(Pf(o),e,i),c=s.trainingConfig;if(c!=null&&a.loadTrainingConfig(c),s.userDefinedMetadata!=null&&a.setUserDefinedMetadata(s.userDefinedMetadata),s.weightData!=null){if(s.weightSpecs==null)throw new V("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:l,optimizerWeights:u}=Kee(s.weightData,s.weightSpecs);a.loadWeights(l,r),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),He(l),He(u.map(d=>d.tensor))}return a}function Kee(t,e){const n=s8(t,e),s={},o=[];return e.forEach(r=>{r.group==="optimizer"?o.push({name:r.name,tensor:n[r.name]}):s[r.name]=n[r.name]}),{modelWeights:s,optimizerWeights:o}}class lu extends dc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Fm("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new V(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof lu||e instanceof dc;let s;if(n){if(s=e,s.outputs.length!==1)throw new V("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new V("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new V("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=HZ({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(e.inboundNodes.length!==1)throw new V(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new V("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=SR(this.outputs[0])}this.inboundNodes=[],new Mm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ua(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(nt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new dc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,s=console.log){this.built||this.build(),super.summary(e,n,s)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,s={}){if(!this.built)throw new Os("The model needs to be compiled before being used.");return this.model.evaluate(e,n,s)}async evaluateDataset(e,n){if(!this.built)throw new Os("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,s={}){if(!this.built)throw new Os("The model needs to be compiled before being used.");return this.model.fit(e,n,s)}async fitDataset(e,n){if(!this.built)throw new Os("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,s={},o=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new V("Legacy serialization format not supported yet.");r=n}else $(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof lu))throw new We(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const c of r){const u=Po(c,void 0,o);o&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new V("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new V("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),e.push(s)}return{name:this.name,layers:e}}}lu.className="Sequential";me(lu);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let En=class extends Jc{getConfig(){return{}}};class WR extends En{apply(e,n=1){return NZ(e,n)}}WR.className="elu";me(WR);class GR extends En{apply(e){return iA(e)}}GR.className="selu";me(GR);class HR extends En{apply(e){return _a(e)}}HR.className="relu";me(HR);class KR extends En{apply(e){return J(()=>ru(6,_a(e)))}}KR.className="relu6";me(KR);class qR extends En{apply(e){return e}}qR.className="linear";me(qR);class XR extends En{apply(e){return Xc(e)}}XR.className="sigmoid";me(XR);class QR extends En{apply(e){return RZ(e)}}QR.className="hardSigmoid";me(QR);class YR extends En{apply(e){return Id(e)}}YR.className="softplus";me(YR);class JR extends En{apply(e){return AZ(e)}}JR.className="softsign";me(JR);class ZR extends En{apply(e){return Em(e)}}ZR.className="tanh";me(ZR);let b1=class extends En{apply(e,n=-1){return xx(e,n)}};b1.className="softmax";me(b1);class e2 extends En{apply(e,n=-1){return YN(e,n)}}e2.className="logSoftmax";me(e2);class t2 extends En{apply(e){return J(()=>J(()=>{const n=Math.sqrt(2),s=W(.5,we(1,HN(Fe(e,n))));return W(e,s)}))}}t2.className="gelu";me(t2);class n2 extends En{apply(e){return J(()=>W(.5,W(e,we(1,Em(W(_n(Fe(2,Math.PI)),we(e,W(.044715,aa(e,3)))))))))}}n2.className="gelu_new";me(n2);class s2 extends En{apply(e){return J(()=>W(e,Em(Id(e))))}}s2.className="mish";me(s2);class o2 extends En{apply(e,n=1){return J(()=>W(Xc(W(e,n)),e))}}o2.className="swish";me(o2);function Qr(t){return t.getClassName()}function Xg(t,e={}){return Rd(t,Ns.getMap().classNameMap,e,"activation")}function Yr(t){if(t==null){const e={};return e.className="linear",e.config={},Xg(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},Xg(e)}else return t instanceof En?t:Xg(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qee(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class r2 extends Jc{}class i2 extends r2{constructor(e){super(),qee(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return J(()=>{let n=rn([1]);return this.hasL1&&(n=we(n,Oe(W(this.l1,$n(e))))),this.hasL2&&(n=we(n,Oe(W(this.l2,Od(e))))),X(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}i2.className="L1L2";me(i2);const MS={l1l2:"L1L2"};function vt(t){return o1(t)}function BS(t,e={}){return Rd(t,Ns.getMap().classNameMap,e,"regularizer")}function Nt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in MS?MS[t]:t,config:{}};return BS(n)}else return t instanceof r2?t:BS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class a2 extends Xe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ue(e);let s=_a(e);return this.maxValue!=null&&(s=ws(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}a2.className="ReLU";me(a2);class c2 extends Xe{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Ue(e);return ox(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}c2.className="LeakyReLU";me(c2);class l2 extends Xe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Tt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Nt(e.alphaRegularizer),this.alphaConstraint=Yt(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new V(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=nt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)s[o]=e[o];this.inputSpec=[new Xt({ndim:e.length,axes:s})],this.built=!0}call(e,n){return e=Ue(e),ux(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Rt(this.alphaInitializer),alphaRegularizer:vt(this.alphaRegularizer),alphaConstraint:Qt(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}l2.className="PReLU";me(l2);let u2=class extends Xe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new We(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Ue(e);return Tm(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};u2.className="ELU";me(u2);class d2 extends Xe{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const s=Ue(e);return W(s,$e(Cs(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}d2.className="ThresholdedReLU";me(d2);class h2 extends Xe{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new b1().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return J(()=>{let s=Ue(e);const o=n.mask;if(o!=null){const r=W(Ve(fi(s.shape),$e(o,s.dtype)),it(-1e9));s=we(s,r)}return this.axis instanceof Array?this.axis.length>1?Vo(Ve(s,JN(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}h2.className="Softmax";me(h2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hc(t,e,n){if(typeof t=="number")return ua(t,e);if(t.length!==e)throw new V(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let s=0;s<e;++s){const o=t[s];if(!EZ(o))throw new V(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function oo(t,e,n,s,o=1){if(t==null)return t;const r=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-r+1,Math.floor((i+s-1)/s)}function Io(t,e,n,s){if(t==null)return null;if(s==="valid")t=t*e+Xr([n-e,0]);else if(s==="same")t=t*e;else throw new V(`Unsupport padding mode: ${s}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y1(t,e){return J(()=>(Vt(e),e==="channelsFirst"?Ze(t,[0,2,3,1]):t))}function f2(t,e){return J(()=>(Vt(e),e==="channelsFirst"?Ze(t,[0,2,3,4,1]):t))}function Xee(t,e,n,s=1,o="valid",r,i=1){return J(()=>{if(r==null&&(r=uo()),Vt(r),t.shape.length!==3)throw new V(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new V(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new V(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(r==="channelsFirst"&&(t=Ze(t,[0,2,1])),o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=UN(t,e,s,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=go(a,n)),a})}function VS(t,e,n,s=[1,1],o="valid",r,i,a=null){return J(()=>{if(r==null&&(r=uo()),Vt(r),t.rank!==3&&t.rank!==4)throw new V(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new V(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let c=y1(t,r);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=XY({x:c,filter:e,strides:s,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(c=Ze(c,[0,3,1,2])),c})}function Qee(t,e,n,s=[1,1,1],o="valid",r,i){return J(()=>{if(r==null&&(r=uo()),Vt(r),t.rank!==4&&t.rank!==5)throw new V(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new V(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=f2(t,r);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=q5(a,e,s,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=go(a,n)),r==="channelsFirst"&&(a=Ze(a,[0,4,1,2,3])),a})}class Um extends Xe{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Um.verifyArgs(n),this.rank=e,cn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new We(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=hc(n.kernelSize,e,"kernelSize"),this.strides=hc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,_s(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Vt(this.dataFormat),this.activation=Yr(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Tt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Yt(n.biasConstraint),this.biasRegularizer=Nt(n.biasRegularizer),this.activityRegularizer=Nt(n.activityRegularizer),this.dilationRate=hc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new V(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new V(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new V(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(So("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!r1(e.kernelSize,"number",1,3))throw new V(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Qr(this.activation),useBias:this.useBias,biasInitializer:Rt(this.biasInitializer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),biasConstraint:Qt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Zc extends Um{constructor(e,n){super(e,n),this.kernel=null,Zc.verifyArgs(n),this.filters=n.filters,cn(this.filters,"filters"),this.kernelInitializer=Tt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Yt(n.kernelConstraint),this.kernelRegularizer=Nt(n.kernelRegularizer)}build(e){e=nt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V(`The channel dimension of the input should be defined. Found ${e[n]}`);const s=e[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s;const o=this.bias==null?null:this.bias.read(),r=lR(this.activation.getClassName());if(r!=null&&this.rank===2)s=VS(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=Xee(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=VS(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=Qee(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new We("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(e){e=nt(e);const n=[],s=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<s.length;++r){const i=oo(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:Rt(this.kernelInitializer),kernelRegularizer:vt(this.kernelRegularizer),kernelConstraint:Qt(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new V(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Md extends Zc{constructor(e){super(2,e),Md.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!r1(e.kernelSize,"number",1,2))throw new V(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Md.className="Conv2D";me(Md);class Bd extends Zc{constructor(e){super(3,e),Bd.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new V(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Bd.className="Conv3D";me(Bd);class p2 extends Md{constructor(e){if(super(e),this.inputSpec=[new Xt({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new V(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=nt(e),e.length!==4)throw new V("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xt({ndim:4,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{let s=Ue(e);if(s.shape.length!==4)throw new V(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const c=o[i],l=o[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=Io(c,h,u,this.padding),m=Io(l,f,d,this.padding),v=[r,p,m,this.filters];this.dataFormat!=="channelsLast"&&(s=Ze(s,[0,2,3,1]));let g=jN(s,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=Ze(g,[0,3,1,2])),this.bias!=null&&(g=go(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=nt(e);const n=e.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],c=this.strides[0],l=this.strides[1];return n[s]=this.filters,n[o]=Io(n[o],c,i,this.padding),n[r]=Io(n[r],l,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}p2.className="Conv2DTranspose";me(p2);class m2 extends Bd{constructor(e){if(super(e),this.inputSpec=[new Xt({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new V(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=nt(e),e.length!==5)throw new V("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xt({ndim:5,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{let s=Ue(e);if(s.shape.length!==5)throw new V(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a,c;this.dataFormat==="channelsFirst"?(c=2,i=3,a=4):(c=1,i=2,a=3);const l=o[c],u=o[i],d=o[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],v=this.strides[1],g=this.strides[2],b=Io(l,m,h,this.padding),x=Io(u,v,f,this.padding),y=Io(d,g,p,this.padding),w=[r,b,x,y,this.filters];this.dataFormat!=="channelsLast"&&(s=Ze(s,[0,2,3,4,1]));let C=Y5(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Ze(C,[0,4,1,2,3])),this.bias!==null&&(C=go(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=nt(e);const n=e.slice();let s,o,r,i;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,i=4):(s=4,o=1,r=2,i=3);const a=this.kernelSize[0],c=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[s]=this.filters,n[o]=Io(n[o],u,a,this.padding),n[r]=Io(n[r],d,c,this.padding),n[i]=Io(n[i],h,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}m2.className="Conv3DTranspose";me(m2);class g2 extends Zc{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new V("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new V("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new V(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Tt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Nt(n.depthwiseRegularizer),this.depthwiseConstraint=Yt(n.depthwiseConstraint),this.pointwiseInitializer=Tt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Nt(n.pointwiseRegularizer),this.pointwiseConstraint=Yt(n.pointwiseConstraint)}build(e){if(e=nt(e),e.length<this.rank+2)throw new V(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new V(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const s=e[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Xt({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s;if(this.rank===1)throw new We("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ze(e,[0,2,3,1])),s=aA(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=go(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=Ze(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Rt(this.depthwiseInitializer),e.pointwiseInitializer=Rt(this.pointwiseInitializer),e.depthwiseRegularizer=vt(this.depthwiseRegularizer),e.pointwiseRegularizer=vt(this.pointwiseRegularizer),e.depthwiseConstraint=Qt(this.depthwiseConstraint),e.pointwiseConstraint=Qt(this.pointwiseConstraint),e}}g2.className="SeparableConv";class v2 extends g2{constructor(e){super(2,e)}}v2.className="SeparableConv2D";me(v2);class jm extends Zc{constructor(e){super(1,e),jm.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!r1(e.kernelSize,"number",1,1))throw new V(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}jm.className="Conv1D";me(jm);class b2 extends Xe{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return J(()=>{if(e=Ue(e),this.dataFormat==="channelsLast"){const s=vh(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return vh(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=vh(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return vh(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}b2.className="Cropping2D";me(b2);class y2 extends Xe{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vt(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,_Z(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],s=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,s]}else{const n=e[1]==null?null:this.size[0]*e[1],s=e[2]==null?null:this.size[1]*e[2];return[e[0],n,s,e[3]]}}call(e,n){return J(()=>{let s=Ue(e);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=Ze(s,[0,2,3,1]);const r=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?rr.resizeNearestNeighbor(s,[r,i]):rr.resizeBilinear(s,[r,i]);return Ze(a,[0,3,1,2])}else{const r=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?rr.resizeNearestNeighbor(s,[r,i]):rr.resizeBilinear(s,[r,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}y2.className="UpSampling2D";me(y2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yee(t,e,n=[1,1],s="valid",o,r){return J(()=>{o==null&&(o=uo()),Vt(o);let i=y1(t,o);if(t.rank!==4)throw new V(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new V(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=ex(i,e,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(i=Ze(i,[0,3,1,2])),i})}class x2 extends Um{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Tt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Yt(e.depthwiseConstraint),this.depthwiseRegularizer=Nt(e.depthwiseRegularizer)}build(e){if(e=nt(e),e.length<4)throw new V(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new V(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const s=e[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s=Yee(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=go(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=nt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=oo(n,this.kernelSize[0],this.padding,this.strides[0]),i=oo(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,r,i]:[e[0],r,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Rt(this.depthwiseInitializer),e.depthwiseRegularizer=vt(this.depthwiseRegularizer),e.depthwiseConstraint=Qt(this.depthwiseRegularizer),e}}x2.className="DepthwiseConv2D";me(x2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w2(t,e,n,s){if(Array.isArray(t)){if(e!=null||n!=null)throw new V("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=t.slice(t.length-s,t.length),t=t.slice(0,t.length-s)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function C2(t,e,n,s=!1,o,r,i=!1,a=!1){return J(()=>{const c=e.shape.length;if(c<3)throw new V(`Input should be at least 3D, but is ${c}D.`);const l=[1,0].concat(lo(2,c));e=Ze(e,l),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=$e($e(o,"bool"),"float32"),o.rank===c-1&&(o=Wn(o,-1)),o=Ze(o,l)),s&&(e=ca(e,0),o!=null&&(o=ca(o,0)));const u=[];let d,h=n;const f=e.shape[0],p=la(e);let m;o!=null&&(m=la(o));for(let g=0;g<f;++g){const b=p[g],x=J(()=>t(b,h));if(o==null)d=x[0],h=x[1];else{const y=J(()=>{const w=m[g],C=Ve(js(w),w),_=we(W(x[0],w),W(h[0],C)),S=h.map((I,E)=>we(W(x[1][E],w),W(I,C)));return{output:_,newStates:S}});d=y.output,h=y.newStates}a&&u.push(d)}let v;return a&&(v=dr(u,1)),[d,v,h]})}class mi extends Xe{constructor(e){super(e);let n;if(e.cell==null)throw new V("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new C1({cells:e.cell}):n=e.cell,n.stateSize==null)throw new V("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Xt({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return lo(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Tb(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[e[0],e[1],s]:o=[e[0],s],this.returnState){const r=[];for(const i of n)r.push([e[0],i]);return[o].concat(r)}else return o}computeMask(e,n){return J(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<e;++s)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new We("Constants support is not implemented in RNN yet.");Tb(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new Xt({shape:[n,null,...s]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!at(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new V(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(i=>new Xt({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new _o("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new V("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>rn([s,o])):this.states_=[rn([s,this.cell.stateSize])];else if(e==null)He(this.states_),this.keptStates!=null&&(He(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>rn([s,o])):this.states_[0]=rn([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new V(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):He(this.states_);for(let o=0;o<this.states_.length;++o){const r=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[s,i];if(!at(r.shape,a))throw new V(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>Do(o.clone()))})}apply(e,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=w2(e,s,o,this.numConstants);e=r.inputs,s=r.initialState,o=r.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const l of s)this.stateSpec.push(new Xt({shape:l.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof jo){const l=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(l,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;e=Ue(e),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new V(`RNN Layer has ${i} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},l=C2((p,m)=>{const v=this.cell.call([p].concat(m),a);return[v[0],v.slice(1)]},e,r,this.goBackwards,s,null,this.unroll,this.returnSequences),u=l[0],d=l[1],h=l[2];this.stateful&&this.resetStates(h,o);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return J(()=>{let n=rn(e.shape);return n=Oe(n,[1,2]),n=Dd(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?kb(n,[1,s]):n):this.cell.stateSize>1?[kb(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===mi.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),n)}static fromConfig(e,n,s={}){const o=n.cell,r=Po(o,s);return new e(Object.assign(n,{cell:r}))}}mi.className="RNN";me(mi);class zm extends Xe{}class x1 extends zm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,cn(this.units,"units"),this.activation=Yr(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=Yt(e.kernelConstraint),this.recurrentConstraint=Yt(e.recurrentConstraint),this.biasConstraint=Yt(e.biasConstraint),this.dropout=Oc([1,Xr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Oc([1,Xr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=nt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new V(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jr({ones:()=>js(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jr({ones:()=>js(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=Fo(W(e,i),this.kernel.read()):r=Fo(e,this.kernel.read()),this.bias!=null&&(r=go(r,this.bias.read())),a!=null&&(s=W(s,a));let c=we(r,Fo(s,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Qr(this.activation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Qt(this.kernelConstraint),recurrentConstraint:Qt(this.recurrentConstraint),biasConstraint:Qt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}x1.className="SimpleRNNCell";me(x1);class _2 extends mi{constructor(e){e.cell=new x1(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(He(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(He(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return new e(n)}}_2.className="SimpleRNN";me(_2);class w1 extends zm{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new V("GRUCell does not support reset_after parameter set to true.");this.units=e.units,cn(this.units,"units"),this.activation=Yr(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yr(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=Yt(e.kernelConstraint),this.recurrentConstraint=Yt(e.recurrentConstraint),this.biasConstraint=Yt(e.biasConstraint),this.dropout=Oc([1,Xr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Oc([1,Xr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=nt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new V(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jr({ones:()=>js(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jr({ones:()=>js(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,c,l;0<this.dropout&&this.dropout<1&&(e=W(e,r[0]));let u=Fo(e,this.kernel.read());this.useBias&&(u=go(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,i[0]));const d=this.recurrentKernel.read(),[h,f]=vs(d,[2*this.units,this.units],d.rank-1),p=Fo(o,h),[m,v,g]=vs(u,3,u.rank-1),[b,x]=vs(p,2,p.rank-1);a=this.recurrentActivation.apply(we(m,b)),c=this.recurrentActivation.apply(we(v,x));const y=Fo(W(c,o),f);l=this.activation.apply(we(g,y));const w=we(W(a,o),W(we(1,Pt(a)),l));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Qr(this.activation),recurrentActivation:Qr(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Qt(this.kernelConstraint),recurrentConstraint:Qt(this.recurrentConstraint),biasConstraint:Qt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}w1.className="GRUCell";me(w1);class S2 extends mi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new w1(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(He(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(He(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}S2.className="GRU";me(S2);class Wm extends zm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,cn(this.units,"units"),this.activation=Yr(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Yr(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=Yt(e.kernelConstraint),this.recurrentConstraint=Yt(e.recurrentConstraint),this.biasConstraint=Yt(e.biasConstraint),this.dropout=Oc([1,Xr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Oc([1,Xr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=nt(e);const s=e[e.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;o=new(n=class extends Gs{apply(c,l){const u=r.apply([i]),d=new a1().apply([i]),h=r.apply([i*2]);return _S(_S(u,d),h)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return J(()=>{const s=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new V(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jr({ones:()=>js(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jr({ones:()=>js(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let c,l,u,d;0<this.dropout&&this.dropout<1&&(e=W(e,i[0]));let h=Fo(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,a[0])),h=we(h,Fo(o,this.recurrentKernel.read())),this.useBias&&(h=go(h,this.bias.read()));const[f,p,m,v]=vs(h,4,h.rank-1);c=this.recurrentActivation.apply(f),l=this.recurrentActivation.apply(p),u=we(W(l,r),W(c,this.activation.apply(m))),d=this.recurrentActivation.apply(v);const g=W(d,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Qr(this.activation),recurrentActivation:Qr(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Qt(this.kernelConstraint),recurrentConstraint:Qt(this.recurrentConstraint),biasConstraint:Qt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Wm.className="LSTMCell";me(Wm);class I2 extends mi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wm(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(He(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(He(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}I2.className="LSTM";me(I2);class C1 extends zm{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return J(()=>{e=e;let s=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(s.splice(0,a.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const c=this.cells[a];s=o[a],a===0?i=[e[0]].concat(s):i=[i[0]].concat(s),i=c.call(i,n),r.push(i.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(e){Tb(e)&&(e=e[0]),e=e;let n;this.cells.forEach((s,o)=>{Hi(`RNNCell_${o}`,()=>{s.build(e),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,s={}){const o=[];for(const r of n.cells)o.push(Po(r,s));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Nb(e)}setWeights(e){const n=[];for(const s of this.cells){const o=s.weights.length,r=e.splice(o);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],r[i]])}p1(n)}}C1.className="StackedRNNCells";me(C1);function Jr(t){const{ones:e,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=t,i=()=>r!=null?r(e(),n):gR(e(),n),a=()=>Ld(i,e,s);return!o||o<=1?Do(a().clone()):Array(o).fill(void 0).map(a).map(l=>Do(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Jee=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n};class E2 extends mi{constructor(e){if(e.unroll)throw new We("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new We("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Xt({ndim:5})]}call(e,n){return J(()=>{if(this.cell.dropoutMask!=null&&(He(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(He(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new V("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return J(()=>{const{stateSize:n}=this.cell,s=e.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],i=rn(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new _o("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new V("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>rn(r)):this.states_=[rn(r)];else if(e==null)He(this.states_),this.keptStates!=null&&(He(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>rn(r)):this.states_[0]=rn(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new V(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):He(this.states_);for(let a=0;a<this.states_.length;++a){const c=e[a],l=r;if(!at(c.shape,l))throw new V(`State ${a} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${c.shape}`);this.states_[a]=c}}this.states_=this.states_.map(a=>Do(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:i,dilationRate:a}=this.cell,c=n==="channelsFirst",l=e[c?3:2],u=e[c?4:3],d=oo(l,o[0],r,i[0],a[0]),h=oo(u,o[1],r,i[1],a[1]);return[...e.slice(0,2),...c?[s,d,h]:[d,h,s]]}}E2.className="ConvRNN2D";class _1 extends Wm{constructor(e){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,cn(this.filters,"filters"),this.kernelSize=hc(s,2,"kernelSize"),this.kernelSize.forEach(c=>cn(c,"kernelSize")),this.strides=hc(o||1,2,"strides"),this.strides.forEach(c=>cn(c,"strides")),this.padding=r||"valid",_s(this.padding),this.dataFormat=i||"channelsLast",Vt(this.dataFormat),this.dilationRate=hc(a||1,2,"dilationRate"),this.dilationRate.forEach(c=>cn(c,"dilationRate"))}build(e){var n;e=nt(e);const s=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[s]==null)throw new V(`The channel dimension of the input should be defined. Found ${e[s]}`);const o=e[s],r=4,i=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const l=this.biasInitializer,u=this.filters;c=new(n=class extends Gs{apply(h,f){const p=l.apply([u]),m=fi([u]),v=l.apply([u*2]);return i1([p,m,v])}},n.className="CustomInit",n)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return J(()=>{if(e.length!==3)throw new V(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training||!1,o=e[0],r=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Jr({ones:()=>js(o),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,l=(ne,re,de)=>!re||!re[de]?ne:W(re[de],ne);let u=l(o,c,0),d=l(o,c,1),h=l(o,c,2),f=l(o,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Jr({ones:()=>js(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=l(r,p,0),v=l(r,p,1),g=l(r,p,2),b=l(r,p,3);const x=3,[y,w,C,_]=vs(this.kernel.read(),a,x),[S,I,E,O]=this.useBias?vs(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,y,S,this.padding),d=this.inputConv(d,w,I,this.padding),h=this.inputConv(h,C,E,this.padding),f=this.inputConv(f,_,O,this.padding);const[A,P,z,G]=vs(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,A),v=this.recurrentConv(v,P),g=this.recurrentConv(g,z),b=this.recurrentConv(b,G);const M=this.recurrentActivation.apply(we(u,m)),R=this.recurrentActivation.apply(we(d,v)),D=we(W(R,i),W(M,this.activation.apply(we(h,g)))),j=W(this.recurrentActivation.apply(we(f,b)),this.activation.apply(D));return[j,j,D]})}getConfig(){const e=super.getConfig(),n=Jee(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),s)}inputConv(e,n,s,o){const r=ia(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?go(r,s,this.dataFormat):r}recurrentConv(e,n){return ia(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}_1.className="ConvLSTM2DCell";me(_1);class k2 extends E2{constructor(e){const n=new _1(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}k2.className="ConvLSTM2D";me(k2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S1 extends Xe{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return Ld(()=>gR(s,this.rate,r,this.seed),()=>s,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}S1.className="Dropout";me(S1);class $2 extends S1{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}$2.className="SpatialDropout1D";me($2);class T2 extends Xe{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,cn(this.units,"units"),this.activation=Yr(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Yt(e.kernelConstraint),this.biasConstraint=Yt(e.biasConstraint),this.kernelRegularizer=Nt(e.kernelRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.activityRegularizer=Nt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=nt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=nt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),o=lR(this.activation.getClassName());let r;return o!=null?r=Fo(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=Fo(s,this.kernel.read()),this.bias!=null&&(r=go(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const e={units:this.units,activation:Qr(this.activation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Qt(this.kernelConstraint),biasConstraint:Qt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}T2.className="Dense";me(T2);class N2 extends Xe{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=nt(e);for(const n of e.slice(1))if(n==null)throw new V(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],zr(e,1)]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let s=Ue(e);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=Ze(s,o)}return TZ(s)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}N2.className="Flatten";me(N2);class A2 extends Xe{constructor(e){super(e),this.supportsMasking=!0,this.activation=Yr(e.activation)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return this.activation.apply(s)})}getConfig(){const e={activation:Qr(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}A2.className="Activation";me(A2);class R2 extends Xe{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return J(()=>(e=Ue(e),kZ(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}R2.className="RepeatVector";me(R2);class D2 extends Xe{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,i=null;for(let c=0;c<o.length;++c){const l=o[c];if(this.isUnknown(l))if(i===null)i=c;else throw new V("Can only specifiy one unknown dimension.");else r*=l}const a=zr(e);if(i!==null){if(r===0||a%r!==0)throw new V(s);o[i]=a/r}else if(a!==r)throw new V(s);return o}computeOutputShape(e){let n=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return X(s,r)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}D2.className="Reshape";me(D2);class O2 extends Xe{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=lo(1,e.dims.length+1);if(!at(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Xt({ndim:this.dims.length+1})]}computeOutputShape(e){e=nt(e);const n=e.slice();return this.dims.forEach((s,o)=>{n[o+1]=e[s]}),n}call(e,n){return Ze(Ue(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}O2.className="Permute";me(O2);class L2 extends Xe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const s=Ue(e);return xb(If(s,this.maskValue),-1)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),i=xb(If(s,this.maskValue),-1,!0);return W(s,$e(i,s.dtype))})}}L2.className="Masking";me(L2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class F2 extends Xe{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(lt(e.inputLength))}this.inputDim=e.inputDim,cn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,cn(this.outputDim,"outputDim"),this.embeddingsInitializer=Tt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Nt(e.embeddingsRegularizer),this.activityRegularizer=Nt(e.activityRegularizer),this.embeddingsConstraint=Yt(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return J(()=>this.maskZero?(e=Ue(e),If(e,et(e))):null)}computeOutputShape(e){if(e=nt(e),this.inputLength==null)return[...e,this.outputDim];const n=lt(this.inputLength);if(n.length!==e.length-1)throw new V(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],i=e[o+1];if(r!=null&&i!=null&&r!==i)throw new V(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);r==null&&(n[s]=i),s++}}return[e[0],...n,this.outputDim]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let s=Ue(e);s.dtype!=="int32"&&(s=Lo(s,"int32"));const o=mR(this.embeddings.read(),X(s,[s.size]));return X(o,nt(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Rt(this.embeddingsInitializer),embeddingsRegularizer:vt(this.embeddingsRegularizer),activityRegularizer:vt(this.activityRegularizer),embeddingsConstraint:Qt(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}F2.className="Embedding";me(F2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ea extends Xe{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new We}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const s=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const r=e[e.length-n.length+o],i=n[o];if(r==null||i==null||r<0||i<0)s.push(null);else if(r===1)s.push(i);else if(i===1)s.push(r);else{if(r!==i)throw new V("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));s.push(r)}}return s}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[nt(e)]),e=e,e.length<2)throw new V(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const r of e)r!=null&&r[0]!==null&&n.push(r[0]);if(n=jr(n),n.length>1)throw new V(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let s=e[0]==null?null:e[0].slice(1);for(let r=1;r<e.length;++r){const i=e[r]==null?null:e[r].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const o=e.map(r=>r.length);e.indexOf(null)===-1&&jr(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return J(()=>{if(e=e,this.reshapeRequired){const s=[],o=e.map(r=>r.rank);if(o.indexOf(null)===-1){const r=Xr(o);for(let i of e){const a=i.rank;for(let c=0;c<r-a;++c)i=Dd(i,1);s.push(i)}return this.mergeFunction(s)}else{let r=!1;for(const c of e){const l=c.rank;if(l==null){const u=c.shape,d=u[0],h=u.slice(1).concat([d]);let f=X(c,[d].concat(zr(u.slice(1))));f=Ze(f,[1,0]),f=X(f,h),s.push(f),r=!0}else if(l>1){const u=lo(1,l).concat([0]);s.push(Ze(c,u)),r=!0}else s.push(c)}let i=this.mergeFunction(s);const a=i.rank;if(r){if(a==null){const c=i.shape,l=c.length,u=c[l-1],d=[u].concat(c.slice(0,c.length-1));i=X(Ze(X(i,[-1,u]),[1,0]),d)}else if(a>1){const c=[a-1].concat(lo(0,a-1));i=Ze(i,c)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const r=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of e)o!=null&&o[0]!==null&&s.push(o[0]);return s=jr(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(e,n){return J(()=>{if(n==null)return null;if(!Array.isArray(n))throw new V("`mask` should be an Array");if(!Array.isArray(e))throw new V("`inputs` should be an Array");if(n.length!==e.length)throw new V(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Wn(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=ur(s,n[o]);return s})}}class P2 extends Ea{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=we(n,e[s]);return n})}}P2.className="Add";me(P2);class M2 extends Ea{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=W(n,e[s]);return n})}}M2.className="Multiply";me(M2);class B2 extends Ea{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=we(n,e[s]);return W(1/e.length,n)})}}B2.className="Average";me(B2);class V2 extends Ea{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=hi(n,e[s]);return n})}}V2.className="Maximum";me(V2);class U2 extends Ea{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=ru(n,e[s]);return n})}}U2.className="Minimum";me(U2);class j2 extends Ea{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new V("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<e.length;++o){const r=e[o].slice();r.splice(this.axis,1);let i=!1;for(const a of s)if(at(a,r)){i=!0;break}i||s.push(r)}if(s.length>1)throw new V("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return J(()=>i1(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new V("A `Concatenate` layer should be called on a list of inputs.");const n=e,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new V("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new V("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new V(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return J(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push($e(js(e[i]),"bool")):n[i].rank<e[i].rank?o.push(Wn(n[i],-1)):o.push(n[i]);const r=qn(o,this.axis);return VN(r,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}j2.className="Concatenate";me(j2);function vl(t,e){for(;t<0;)t+=e;return t}function Zee(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new We("batchDot is not implemented for tensors of 4D or higher rank yet");if($(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),$(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new We("batchDot is not implemented for complex64-type Tensors yet.");const s=t.shape.length,o=e.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return J(()=>{let i;if(s>o){i=s-o;const c=[];for(let l=0;l<i;++l)c.push(1);e=X(e,e.shape.concat(c))}else if(o>s){i=o-s;const c=[];for(let l=0;l<i;++l)c.push(1);t=X(t,t.shape.concat(c))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)r[0]===r[1]?a=Oe(W(t,e),r[0]):a=Oe(W(Ze(t,[1,0]),e),r[1]);else{const c=r[0]!==t.shape.length-1,l=r[1]===e.shape.length-1;a=ot(t,e,c,l)}if(i>0){let c;s>o?c=s+o-3:c=s-1;const l=[];for(let u=c;u<c+i;++u)l.push(u);a=kd(a,l)}return a.shape.length===1&&(a=Wn(a,1)),a})}class z2 extends Ea{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){$(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],s=e[1];if(n.length>3||s.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new V(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new V(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],s=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,i)=>vl(r,e[i].shape.length)):o=[vl(this.axes,n.shape.length),vl(this.axes,s.shape.length)],this.normalize&&(n=Rf(n,o[0]),s=Rf(s,o[1])),Zee(n,s,o)}interpretAxes(e,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[vl(this.axes,e.length),vl(this.axes,n.length)],s}computeOutputShape(e){$(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),s=e[1].slice();if(n.length>3||s.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}z2.className="Dot";me(z2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class W2 extends Xe{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return Ld(()=>we(Pm(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}W2.className="GaussianNoise";me(W2);class G2 extends Xe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return this.rate>0&&this.rate<1?Ld(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return W(s,Pm(s.shape,1,r))},()=>s,n.training||!1):s})}}G2.className="GaussianDropout";me(G2);class H2 extends Xe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ue(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return Ld(()=>{const r=Ue(e),c=-1.6732632423543772*1.0507009873554805;let l=wa(Ed(s),this.rate);l=Lo(l,"float32");const u=((1-this.rate)*(1+this.rate*c**2))**-.5,d=-u*c*this.rate,h=we(W(r,l),W(we(l,-1),c));return we(W(h,u),d)},()=>Ue(e),n.training||!1)}return e})}}H2.className="AlphaDropout";me(H2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uu(t,e,n,s,o,r=.001){let i;if(t.rank===2)i=S5(t,e,n,s,o,r);else if(t.rank===3)i=E5(t,e,n,s,o,r);else if(t.rank===4)i=$5(t,e,n,s,o,r);else throw new We(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function ete(t,e,n,s,o=.001){return J(()=>{const r=ax(t,s),i=r.mean,a=r.variance;return[uu(t,i,a,n,e,o),i,a]})}function tte(t,e,n,s,o=.001){return J(()=>{const r=ax(t,s),i=r.mean,a=r.variance,c=[];for(const p of lo(0,t.rank))s.indexOf(p)!==-1?c.push(1):c.push(t.shape[p]);const l=X(i,c),u=X(a,c),d=e==null?null:X(e,c),h=n==null?null:X(n,c);return[uu(t,l,u,h,d,o),i,a]})}function nte(t,e,n,s,o=.001){return at(s.slice().sort(),lo(0,t.rank-1))?ete(t,e,n,s,o):tte(t,e,n,s,o)}class K2 extends Xe{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Tt(e.betaInitializer||"zeros"),this.gammaInitializer=Tt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Tt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Tt(e.movingVarianceInitializer||"ones"),this.betaConstraint=Yt(e.betaConstraint),this.gammaConstraint=Yt(e.gammaConstraint),this.betaRegularizer=Nt(e.betaRegularizer),this.gammaRegularizer=Nt(e.gammaRegularizer)}build(e){e=nt(e);const n=this.axis>=0?this.axis:this.axis+e.length,s=e[n];if(s==null)throw new V(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Xt({ndim:e.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return J(()=>{const s=n.training==null?!1:n.training,o=Ue(e),r=o.shape,i=r.length,a=lo(0,i),c=this.axis>=0?this.axis:this.axis+i;a.splice(c,1);const l=ua(1,i);l[c]=r[c];const u=a.slice();u.sort();const d=!at(u,lo(0,i).slice(0,i-1)),h=()=>{if(d){const b=X(this.movingMean.read(),l),x=X(this.movingVariance.read(),l),y=this.center?X(this.beta.read(),l):null,w=this.scale?X(this.gamma.read(),l):null;return uu(o,b,x,y,w,this.epsilon)}else return uu(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return h();const[f,p,m]=nte(o,this.gamma.read(),this.beta.read(),a,this.epsilon),v=(b,x,y)=>{J(()=>{const w=1-y,C=b.read(),_=W(Ve(C,x),w);b.write(Ve(C,_))})};return(()=>{v(this.movingMean,p,this.momentum),v(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rt(this.betaInitializer),gammaInitializer:Rt(this.gammaInitializer),movingMeanInitializer:Rt(this.movingMeanInitializer),movingVarianceInitializer:Rt(this.movingVarianceInitializer),betaRegularizer:vt(this.betaRegularizer),gammaRegularizer:vt(this.gammaRegularizer),betaConstraint:Qt(this.betaConstraint),gammaConstraint:Qt(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}K2.className="BatchNormalization";me(K2);class q2 extends Xe{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Tt(e.betaInitializer||"zeros"),this.gammaInitializer=Tt(e.gammaInitializer||"ones"),this.betaRegularizer=Nt(e.betaRegularizer),this.gammaRegularizer=Nt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=nt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==jr(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>e[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const s=Ue(e),o=s.shape,r=o.length;return J(()=>{let{mean:a,variance:c}=ax(s,this.axis,!0);const l=ua(1,r);for(const m of this.axis)l[m]=o[m];const u=m=>m!=null&&m.shape.length!==r?X(m,l):m;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<r;++m)this.axis.indexOf(m)!==-1?(f.push(o[m]),p.push(1)):(f.push(1),p.push(o[m]));return a=Zs(a,f),c=Zs(c,f),d!=null&&(d=Zs(d,p)),h!=null&&(h=Zs(h,p)),uu(s,a,c,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rt(this.betaInitializer),gammaInitializer:Rt(this.gammaInitializer),betaRegularizer:vt(this.betaRegularizer),gammaRegularizer:vt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}q2.className="LayerNormalization";me(q2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ste(t,e,n){return J(()=>{if(t.rank!==4)throw new V(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new V("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=uo()),n!=="channelsLast"&&n!=="channelsFirst")throw new V(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],e[0],e[1]]:s=[[0,0],e[0],e[1],[0,0]],cx(t,s)})}class X2 extends Xe{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?uo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new V(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,s;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new V(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new V(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[n,s]}this.inputSpec=[new Xt({ndim:4})]}computeOutputShape(e){e=nt(e);let n,s;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?s=e[3]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],e[1],n,s]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?s=e[2]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],n,s,e[3]])}call(e,n){return J(()=>ste(Ue(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}X2.className="ZeroPadding2D";me(X2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gm(t,e,n,s,o,r){return J(()=>{Vt(o),dR(r),_s(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=uo()),r==null&&(r="max"),t=y1(t,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=ix(t,e,n,a):i=Q0(t,e,n,a),o==="channelsFirst"&&(i=Ze(i,[0,3,1,2])),i})}function Q2(t,e,n,s,o,r){return J(()=>{Vt(o),dR(r),_s(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=uo()),r==null&&(r="max"),t=f2(t,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=hQ(t,e,n,a):i=p5(t,e,n,a),o==="channelsFirst"&&(i=Ze(i,[0,4,1,2,3])),i})}class Y2 extends Xe{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new V(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(cn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new V(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);cn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,_s(this.padding),this.inputSpec=[new Xt({ndim:3})]}computeOutputShape(e){e=nt(e);const n=oo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return J(()=>{this.invokeCallHook(e,n),e=Dd(Ue(e),2);const s=this.poolingFunction(Ue(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return kd(s,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class J2 extends Y2{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Gm(e,n,s,o,r,"max")}}J2.className="MaxPooling1D";me(J2);class Z2 extends Y2{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Gm(e,n,s,o,r,"avg")}}Z2.className="AveragePooling1D";me(Z2);class eD extends Xe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new V(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];cn(this.poolSize,"poolSize"),cn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vt(this.dataFormat),_s(this.padding),this.inputSpec=[new Xt({ndim:4})]}computeOutputShape(e){e=nt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=oo(n,this.poolSize[0],this.padding,this.strides[0]),s=oo(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s]:[e[0],n,s,e[3]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class tD extends eD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Gm(e,n,s,o,r,"max")}}tD.className="MaxPooling2D";me(tD);class nD extends eD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Gm(e,n,s,o,r,"avg")}}nD.className="AveragePooling2D";me(nD);class sD extends Xe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new V(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];cn(this.poolSize,"poolSize"),cn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vt(this.dataFormat),_s(this.padding),this.inputSpec=[new Xt({ndim:5})]}computeOutputShape(e){e=nt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=oo(n,this.poolSize[0],this.padding,this.strides[0]),s=oo(s,this.poolSize[1],this.padding,this.strides[1]),o=oo(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s,o]:[e[0],n,s,o,e[4]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class oD extends sD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Q2(e,n,s,o,r,"max")}}oD.className="MaxPooling3D";me(oD);class rD extends sD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return Vt(r),_s(o),Q2(e,n,s,o,r,"avg")}}rD.className="AveragePooling3D";me(rD);class iD extends Xe{constructor(e){super(e),this.inputSpec=[new Xt({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new We}}class aD extends iD{constructor(e){super(e||{})}call(e,n){return J(()=>{const s=Ue(e);return zt(s,1)})}}aD.className="GlobalAveragePooling1D";me(aD);class cD extends iD{constructor(e){super(e||{})}call(e,n){return J(()=>{const s=Ue(e);return so(s,1)})}}cD.className="GlobalMaxPooling1D";me(cD);class lD extends Xe{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Vt(this.dataFormat),this.inputSpec=[new Xt({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new We}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class uD extends lD{call(e,n){return J(()=>{const s=Ue(e);return this.dataFormat==="channelsLast"?zt(s,[1,2]):zt(s,[2,3])})}}uD.className="GlobalAveragePooling2D";me(uD);class dD extends lD{call(e,n){return J(()=>{const s=Ue(e);return this.dataFormat==="channelsLast"?so(s,[1,2]):so(s,[2,3])})}}dD.className="GlobalMaxPooling2D";me(dD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hD extends Xe{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,s={}){const o=n.layer,r=Po(o,s);delete n.layer;const i={layer:r};return Object.assign(i,n),new e(i)}}class fD extends hD{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=nt(e),e.length<3)throw new V(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=nt(e);const n=[e[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(n),o=e[1];return[s[0],o].concat(s.slice(1))}call(e,n){return J(()=>(e=Ue(e),C2((i,a)=>[Ue(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}fD.className="TimeDistributed";me(fD);function ote(t){Ia(CZ,"BidirectionalMergeMode",t)}const rte="concat";class pD extends hD{constructor(e){super(e);const n=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=n,this.forwardLayer=Po(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Po(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?rte:e.mergeMode,ote(this.mergeMode),e.weights)throw new We("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,s=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):Gn(o)}apply(e,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=w2(e,s,o,this.numConstants);if(e=r.inputs,s=r.initialState,o=r.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(s==null||s.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(s!=null){const l=s.length;if(l%2>0)throw new V("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const u=s.map(d=>new Xt({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,l/2),this.backwardLayer.stateSpec=u.slice(l/2),a.push(...u)}if(o!=null)throw new We("Support for constants in Bidirectional layers is not implemented yet.");const c=i[0]instanceof jo;for(const l of i)if(l instanceof jo!==c)throw new V("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const l=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(l,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(e,n),r=this.backwardLayer.call(e,n);else{const c=s.slice(0,s.length/2),l=s.slice(s.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:c})),r=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=ca(r,1));let a;return this.mergeMode==="concat"?a=i1([o,r]):this.mergeMode==="sum"?a=we(o,r):this.mergeMode==="ave"?a=W(.5,we(o,r)):this.mergeMode==="mul"?a=W(o,r):this.mergeMode==null&&(a=[o,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Hi(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Hi(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const s=Po(n.layer);if(delete n.layer,n.numConstants!=null)throw new We("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new e(o)}}pD.className="Bidirectional";me(pD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mD extends Xe{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>(e=Ue(e),e.dtype!=="float32"&&(e=Lo(e,"float32")),we(W(e,this.scale),this.offset)))}}mD.className="Rescaling";me(mD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ite,cropAndResize:ate}=rr;class gD extends Xe{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,s,o,r,i,a,c){return J(()=>{let l,u=!1;const d=n/i,h=s/a,f=(o+n)/i,p=(r+s)/a,m=[d,h,f,p],v=[];e.rank===3?(u=!0,l=dr([e])):l=e;for(let w=0;w<l.shape[0];w++)v.push(m);const g=Bl(v,[v.length,4]),b=iu(0,v.length,1,"int32"),y=ate(l,g,b,[o,r],"nearest");return Lo(u?Ue(la(y)):y,c)})}upsize(e,n,s,o){return J(()=>{const r=ite(e,[n,s]);return Lo(r,o)})}call(e,n){return J(()=>{const s=Ue(e),o=s.dtype,r=s.shape,i=r[r.length-3],a=r[r.length-2];let c=0;i!==this.height&&(c=Math.floor((i-this.height)/2));let l=0;return a!==this.width&&(l=Math.floor((a-this.width)/2),l===0&&(l=1)),c>=0&&l>=0?this.centerCrop(s,c,l,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=nt(e);const n=e.length-3,s=e.length-2;return e[n]=this.height,e[s]=this.width,e}}gD.className="CenterCrop";me(gD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cte(t,e,n,s){let o=Ue(t);if(o.dtype!=="int32"&&(o=Lo(o,"int32")),e==="int")return o;const r=o.shape;if(o.rank===0&&(o=Wn(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Wn(o,-1)),o.rank>2)throw new V(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${r} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let c;if(typeof s<"u"&&e==="count"?c=iS(a,s,n,i):c=iS(a,[],n,i),e!=="tfIdf")return c;if(s)return W(c,s);throw new V("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vD extends Xe{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=nt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return J(()=>{e=Ue(e),e.dtype!=="int32"&&(e=Lo(e,"int32"));let s;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new V(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);s=Ue(n.countWeights)}const o=so(e),r=_f(e),i=Cs(this.numTokens,o).bufferSync().get(0),a=wa(r,0).bufferSync().get(0);if(!(i&&a))throw new V(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return cte(e,this.outputMode,this.numTokens,s)})}}vD.className="CategoryEncoding";me(vD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lte=["bilinear","nearest"],US=new Set(lte);class bD extends Xe{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(US.has(e.interpolation))this.interpolation=e.interpolation;else throw new V(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=nt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return rr.resizeBilinear(e,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return rr.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...US]} are supported`)})}}bD.className="Resizing";me(bD);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yD{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}yD.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xD extends Xe{constructor(e){super(e),this.randomGenerator=new yD(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}xD.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ute=["bilinear","nearest"],jS=new Set(ute);class wD extends xD{constructor(e){super(e);const{factor:n,interpolation:s="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new V(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new V(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new V(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(jS.has(s))this.interpolation=s;else throw new V(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=nt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return J(()=>{const s=Ue(e);this.imgHeight=s.shape[s.shape.length-3];const o=s.shape[s.shape.length-2];this.widthFactor=Ed([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*o;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return rr.resizeBilinear(e,i);case"nearest":return rr.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...jS]} are supported`)}})}}wD.className="RandomWidth";me(wD);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dte=te();dte.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var zS;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(zS||(zS={}));var WS;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(WS||(WS={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var GS;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(GS||(GS={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ne(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&$(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hte=mA;class Hm extends Jy{nextDataId(){return Hm.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new FT(this,xo())}write(e,n,s){this.firstUse&&(this.firstUse=!1,te().get("IS_NODE")&&ms(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:s,refCount:1}),o}makeTensorInfo(e,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&$u(s[0])){const r=s.map(i=>Ur(i));o=this.write(r,e,n)}else o=this.write(s,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,s,o,r){this.data.set(e,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:s}=this.data.get(e);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return hr(o,r)}return bq(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(o=>qr(o));return Ke(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ke(e.shape,e.dtype,n)}makeOutput(e,n,s){return xo().makeTensorFromTensorInfo(this.makeTensorInfo(n,s,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=jn();return e(),{kernelMs:jn()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ne([e],"where");const n=this.readSync(e.dataId);return hte(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Hm.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CD(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const fte=t=>{const{x:e}=t.inputs,n=t.backend;Ne(e,"abs");let s=new Float32Array(ce(e.shape));const o=n.data.get(e.dataId).values;return s=CD(o),n.makeOutput(s,e.shape,e.dtype)},pte={kernelName:_p,backendName:"cpu",kernelFunc:fte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ut(t){return(e,n,s,o,r)=>{const i=ze(e,n),a=i.length,c=De(i),l=ce(i),u=wn(r,l),d=e.length,h=n.length,f=De(e),p=De(n),m=Rc(e,i),v=Rc(n,i);if(m.length+v.length===0)for(let g=0;g<u.length;++g)u[g]=t(s[g%s.length],o[g%o.length]);else for(let g=0;g<u.length;++g){const b=Kc(g,a,c),x=b.slice(-d);m.forEach(_=>x[_]=0);const y=Ro(x,d,f),w=b.slice(-h);v.forEach(_=>w[_]=0);const C=Ro(w,h,p);u[g]=t(s[y],o[C])}return[u,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(t){const{inputs:e,backend:n}=t,{real:s,imag:o}=e,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),c=n.data.get(a.dataId);return c.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const mte={kernelName:d0,backendName:"cpu",kernelFunc:ns};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mf(t,e,n="float32"){if(n==="complex64"){const o=Mf(t,e,"float32"),r=Mf(t,e,"float32");return ns({inputs:{real:o,imag:r},backend:t})}const s=Cn(ce(e),n);return t.makeTensorInfo(e,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zo(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const gte={kernelName:Xu,backendName:"cpu",kernelFunc:zo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function da(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const vte={kernelName:L0,backendName:"cpu",kernelFunc:da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _D(t,e,n,s){if(s==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(s==="bool"){const o=xa([0],n),[r,i]=Ut((a,c)=>a!==c?1:0)(e,[],t,o,"bool");return[i,"bool",r]}throw new Error(`Error in Cast: failed to cast ${n} to ${s}`)}function Zr(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return zo({inputs:{x:o},backend:n});const u=Mf(n,o.shape,o.dtype),d=Zr({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),h=ns({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(o.dtype==="complex64"){const u=da({inputs:{input:o},backend:n}),d=Zr({inputs:{x:u},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(u),d}if(!BT(o.dtype,r)){const u=zo({inputs:{x:o},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:r}}const i=n.data.get(o.dataId).values,[a,c,l]=_D(i,o.shape,o.dtype,r);return n.makeTensorInfo(a,c,l)}const bte={kernelName:Fu,backendName:"cpu",kernelFunc:Zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(t,e,n,s){return n==null?({inputs:o,backend:r})=>{const{a:i,b:a}=o,c=r;Ne([i,a],t);const l=c.data.get(i.dataId).values,u=c.data.get(a.dataId).values,d=i.dtype==="string"?fr(l):l,h=i.dtype==="string"?fr(u):u,f=s||i.dtype,[p,m]=e(i.shape,a.shape,d,h,f);return c.makeTensorInfo(m,f,p)}:({inputs:o,backend:r})=>{const{a:i,b:a}=o,c=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const l=Zr({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),u=c.data.get(l.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=c.data.get(d.dataId).values,p=c.data.get(h.dataId).values,m=Zr({inputs:{x:a},backend:c,attrs:{dtype:"complex64"}}),v=c.data.get(m.dataId),g=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,x=c.data.get(g.dataId).values,y=c.data.get(b.dataId).values,[w,C,_]=n(i.shape,a.shape,f,p,x,y),S=c.makeTensorInfo(_,"float32",w),I=c.makeTensorInfo(_,"float32",C),E=ns({inputs:{real:S,imag:I},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(S),c.disposeIntermediateTensorInfo(I),E}else{const l=c.data.get(i.dataId).values,u=c.data.get(a.dataId).values,d=s||i.dtype,[h,f]=e(i.shape,a.shape,l,u,d);return c.makeTensorInfo(f,d,h)}}}function I1(t){return(e,n,s,o,r,i)=>{const a=ze(e,n),c=ce(a),l=a.length,u=De(a),d=wn("float32",c),h=wn("float32",c),f=Rc(e,a),p=Rc(n,a),m=hr(s,o),v=hr(r,i),g=e.length,b=De(e),x=n.length,y=De(n);if(f.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%m.length,_=w%v.length,S=t(m[C*2],m[C*2+1],v[_*2],v[_*2+1]);d[w]=S.real,h[w]=S.imag}else for(let w=0;w<d.length;w++){const C=Kc(w,l,u),_=C.slice(-g);f.forEach(A=>_[A]=0);const S=Ro(_,g,b),I=C.slice(-x);p.forEach(A=>I[A]=0);const E=Ro(I,x,y),O=t(m[S*2],m[S*2+1],v[E*2],v[E*2+1]);d[w]=O.real,h[w]=O.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SD=Ut((t,e)=>t+e),yte=I1((t,e,n,s)=>({real:t+n,imag:e+s})),Lc=en(qc,SD,yte),xte={kernelName:qc,backendName:"cpu",kernelFunc:Lc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1(t,e,n,s,o){const r=ce(s),i=Cn(o,n);for(let a=0;a<t.length;a++){const c=t[a];if(c<0)throw new Error("Input x must be non-negative!");c>=o||(r>0?i[c]+=e[a]:i[c]+=1)}return i}function ID(t,e,n,s=!1){const o=t.shape[0],r=t.shape[1],i=Ke([o,n],e.dtype);for(let a=0;a<o;a++)for(let c=0;c<r;c++){const l=t.get(a,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(s?i.set(1,a,l):e.size>0?i.set(i.get(a,l)+e.get(a,c),a,l):i.set(i.get(a,l)+1,a,l))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ED=Ut((t,e)=>t&e),wte=en(u0,ED),Cte={kernelName:u0,backendName:"cpu",kernelFunc:wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Go(t){return(e,n,s)=>{const o=Ft(n,e.length);for(let r=0;r<e.length;++r)o[r]=t(e[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dt(t,e,n){const s=Go(e);return gi(t,s,n)}function gi(t,e,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;Ne(i,t);const a=r,c=a.data.get(i.dataId).values;let l;if(i.dtype==="string"){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");l=fr(c)}else l=c;const u=n||i.dtype,d=e(l,u,o);return a.makeTensorInfo(i.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kD=Go(t=>Math.ceil(t)),_te=gi(Pu,kD),Ste={kernelName:Pu,backendName:"cpu",kernelFunc:_te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D(t,e,n,s){const o=Ft(n,ce(e));if(s&&n!=="string"){let r=0;t.forEach(i=>{const a=ce(i.shape);o.set(i.vals,r),r+=a})}else{let r=0;t.forEach(i=>{const a=n==="string"?fr(i.vals):i.vals;let c=0;for(let l=0;l<i.shape[0];++l){const u=l*e[1]+r;for(let d=0;d<i.shape[1];++d)o[u+d]=a[c++]}r+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TD=Ut((t,e)=>t===e?1:0),ND=en(Mp,TD,null,"bool"),Ite={kernelName:Mp,backendName:"cpu",kernelFunc:ND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AD=Go(t=>Math.exp(t)),RD=gi(Wu,AD,"float32"),Ete={kernelName:Wu,backendName:"cpu",kernelFunc:RD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DD=Go(t=>Math.expm1(t)),kte=gi(Gu,DD),$te={kernelName:Gu,backendName:"cpu",kernelFunc:kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=Go(t=>Math.floor(t)),Tte=gi(Hu,OD),Nte={kernelName:Hu,backendName:"cpu",kernelFunc:Tte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LD=Ut((t,e)=>Math.floor(t/e)),Ate=en(Ku,LD,null,"int32"),Rte={kernelName:Ku,backendName:"cpu",kernelFunc:Ate};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FD(t,e,n,s,o,r,i,a,c){const l=Ke([s,r],n);for(let u=0;u<s;u++){const d=[];let h=0;for(let f=0;f<o;f++){const p=t[u*o+f];h+=p*i[f],d.push(p)}if(h<0||h>=c/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<r;f++)l.values[u*r+f]=e.get(...e.indexToLoc(h*r+f))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PD(t,e,n){const s=Ke(n,t.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),a=i[0],c=i[2],l=e.locToIndex([a,c]);i[2]=e.values[l];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(s.values[o]=t.values[u])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MD=Ut((t,e)=>t>e?1:0),Dte=en(jp,MD,null,"bool"),Ote={kernelName:jp,backendName:"cpu",kernelFunc:Dte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BD=Ut((t,e)=>t>=e?1:0),Lte=en(qu,BD,null,"bool"),Fte={kernelName:qu,backendName:"cpu",kernelFunc:Lte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD=Ut((t,e)=>t<e?1:0),Pte=en(Wp,VD,null,"bool"),Mte={kernelName:Wp,backendName:"cpu",kernelFunc:Pte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD=Ut((t,e)=>t<=e?1:0),Bte=en(Gp,UD,null,"bool"),Vte={kernelName:Gp,backendName:"cpu",kernelFunc:Bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jD(t,e,n){const s=(e-t)/(n-1),o=Cn(n,"float32");o[0]=t;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zD=Go(t=>Math.log(t)),Ute=gi(Zu,zD),jte={kernelName:Zu,backendName:"cpu",kernelFunc:Ute};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WD(t,e,n,s){const o=wn(s,ce(n));for(let r=0;r<o.length;++r){const i=r*e;let a=t[i];for(let c=0;c<e;++c){const l=t[i+c];(Number.isNaN(l)||l>a)&&(a=l)}o[r]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GD=Ut((t,e)=>Math.max(t,e)),zte=en(td,GD),Wte={kernelName:td,backendName:"cpu",kernelFunc:zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HD=Ut((t,e)=>Math.min(t,e)),Gte=en(nd,HD),Hte={kernelName:nd,backendName:"cpu",kernelFunc:Gte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1=Ut((t,e)=>t*e),Kte=I1((t,e,n,s)=>({real:t*n-e*s,imag:t*s+e*n})),Km=en(od,k1,Kte),qte={kernelName:od,backendName:"cpu",kernelFunc:Km};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KD(t,e,n){const s=ci(-1,n);return k1([],e,s,t,n)}function Xte(t){const{inputs:e,backend:n}=t,{x:s}=e;Ne(s,"neg");const o=n.data.get(s.dataId).values,[r,i]=KD(o,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,r)}const Qte={kernelName:nm,backendName:"cpu",kernelFunc:Xte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qD=Ut((t,e)=>t!==e?1:0),Yte=en(sm,qD,null,"bool"),Jte={kernelName:sm,backendName:"cpu",kernelFunc:Yte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1(t,e,n,s,o){const r=e.length,i=ce(e),a=De(e),c=De(o),l=wn(n,ce(o));for(let u=0;u<i;++u){const d=Kc(u,r,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[s[p]];const f=Ro(h,r,c);l[f]=t[u]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(t){const{inputs:e,attrs:n,backend:s}=t,{x:o}=e,{perm:r}=n;Ne(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[r[d]];const c=s.data.get(o.dataId).values,l=$1(c,o.shape,o.dtype,r,a);return{dataId:s.write(l,a,o.dtype),shape:a,dtype:o.dtype}}const Zte={kernelName:lc,backendName:"cpu",kernelFunc:Yn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XD(t,e,n,s){const[o,r]=dn(t,s),i=cs(e,"int32"),a=Cn(ce(o),i),c=ce(r);for(let l=0;l<a.length;++l){const u=l*c;let d=1;for(let h=0;h<c;++h)d*=n[u+h];a[l]=d}return{outVals:a,outShape:o,outDtype:i}}function ene(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ne(o,"prod");const a=o.shape.length,c=qe(r,o.shape),l=Dt(c,a);let u=c,d=o;const h=[];l!=null&&(d=Yn({inputs:{x:o},backend:n,attrs:{perm:l}}),h.push(d),u=Bt(u.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:v}=XD(d.shape,d.dtype,f,u);let g=m;return i&&(g=Wt(m,c)),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(g,v,p)}const tne={kernelName:lm,backendName:"cpu",kernelFunc:ene};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t,e,n){t.forEach((s,o)=>{if(s<0||s>=n){const r=Kc(o,e.length,De(e)).join(",");throw new Error(`indices[${r}] = ${s} is not in [0, ${n})`)}})}function sne(t,e){for(let n=0;n<t.length;++n){const s=t[n],o=n===t.length-1?e:t[n+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>o)throw new Error("Ragged splits must not point past values");for(let r=1;r<s.length;++r)if(s[r-1]>s[r])throw new Error("Ragged splits must be sorted in ascending order")}}function one(t,e,n,s){const o=[];let r=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);sne(n,s);let c=1;for(let l=0;l<e.length-1;++l){c*=e[l];const u=e[l+1];for(let d=1;d<c+1;++d)a[l].push(d*u)}for(let l=0;l<t.length;++l){let u=t[l],d=t[l]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],v=m[m.length-1]-f[u];for(let g=u;g<d;++g)a[p].push(f[g+1]+v)}u=f[u],d=f[d]}d!==u&&(o.push([u,d]),r+=d-u)}return{outSplits:a,valueSlices:o,numValues:r}}function rne(t){const e=[];for(let n=0;n<t.length;++n){const s=t[n].length,o=Ft("int32",s);e.push(o),t[n].forEach((r,i)=>o[i]=r)}return e}function HS(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let s=e;s<t.length;s++)n[e-1]*=t[s];return n}function ine(t,e,n,s,o,r){const i=HS(e,2)[1],a=HS(r,2)[1];let c=0;for(const l of n)for(let u=l[0];u<l[1];++u){for(let d=0;d<s;++d)o[c*a+d]=t[u*i+d];++c}}function ane(t,e,n,s,o){const r=e.slice();r[0]=o;const i=Ft(n,ce(r)),a=t.length,c=a===0?0:a/e[0];return ine(t,e,s,c,i,r),[i,r]}function QD(t,e,n,s,o,r,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const c=e[0][0]-1;if(nne(r,i,c),s.length===0)throw new Error("params.rank must be nonzero");const l=s[0],{outSplits:u,valueSlices:d,numValues:h}=one(r,i,t,l),f=rne(u),p=ane(n,s,o,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KS=2147483647;function YD(t,e,n,s,o,r,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,c=o.length===0,l=i.length===0,u=[];a||u.push(e[0]),c||u.push(o[0]),l||u.push(i[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=Ft("int32",d+1);h[0]=0;for(let v=0;v<d;++v){const g=a?t[0]:t[v],b=c?s[0]:s[v],x=l?r[0]:r[v];if(x===0)throw new Error("Requires delta != 0");let y;if(x>0&&b<g||x<0&&b>g)y=0;else if(y=Math.ceil(Math.abs((b-g)/x)),y>KS)throw new Error(`Requires ((limit - start) / delta) <= ${KS}`);h[v+1]=h[v]+y}const f=h[d],p=Ft(n,f);let m=0;for(let v=0;v<d;++v){const g=h[v+1]-h[v];let b=a?t[0]:t[v];const x=l?r[0]:r[v];for(let y=0;y<g;++y)p[m++]=b,b+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ks=Ys;class Bf{constructor(e,n,s,o,r,i,a,c,l,u){this.shape=e,this.shapeShape=n,this.values=s,this.valuesShape=o,this.valuesDType=r,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=c,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=FA(u),this.raggedRank=PA(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===ks.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===ks.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case ks.VALUE_ROWIDS:return Bf.getMaxWidthValueRowID(n);case ks.ROW_SPLITS:return Bf.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ks[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let s=0;for(let o=0;o<n-1;++o){const r=e[o+1]-e[o];r>s&&(s=r)}return s}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let s=0,o=e[0],r=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,r=Math.max(i-s,r),s=i)}return Math.max(n-s,r)}tensorShapeFromTensor(e,n,s=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return XS(e,s)}calculateOutputSize(e){const n=this.valuesShape,s=this.defaultValueShape;MA(s,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=LA(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,s){const o=Math.min(e,s),r=[];let i=0;for(let a=0;a<o;++a,i+=n)r.push(i);for(let a=o;a<e;++a)r.push(-1);return $(r.length===e,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(e,n,s,o){const r=e.length,i=[];for(let a=0;a<r-1;++a){const c=e[a+1]-e[a];let l=Math.min(o,c),u=n[a];u===-1&&(l=0);for(let d=0;d<l;++d)i.push(u),u+=s;for(let d=0;d<c-l;++d)i.push(-1)}if(r>0&&i.length!==e[r-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,s,o){const r=e.length,i=[];if(r===0)return[];let a=0,c=e[0];if(c>=n.length)throw new Error(`Got currentValueRowId=${c}, which is not less than ${n.length}`);let l=n[c];i.push(l);for(let u=1;u<r;++u){const d=e[u];if(d===c)l>=0&&(++a,a<o?l+=s:l=-1);else{if(a=0,c=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);l=n[d]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,s,o){const r=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case ks.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,n,s,o);case ks.ROW_SPLITS:if(r.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(r,n,s,o);default:throw new Error(`Unsupported partition type: ${ks[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ks.FIRST_DIM_SIZE:return e[0];case ks.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ks.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ks[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),s=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let c=o.length-2;c>=0;--c)o[c]=o[c+1]*s[c+1];const r=XS(s,!1),i=Ft(this.valuesDType,ce(r));if(o[0]*s[0]>0){let c=this.calculateFirstParentOutputIndex(n,o[0],s[0]);for(let l=1;l<=this.raggedRank;++l)c=this.calculateOutputIndex(l-1,c,o[l],s[l]);this.setOutput(this.raggedRank,c,i,r)}return[r,i]}setOutput(e,n,s,o){if(s.length===0)return;const r=this.values,i=s;let a=o.slice();a=a.slice(e+1);const c=ce(a),l=n.length;let u=this.defaultValue;if(u.length!==c&&u.length!==1){const p=this.defaultValueShape;J(()=>{const m=X(u,p);u=Vl(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=l;++p){let m=p<l?n[p]:-1;if(m===f){++f;continue}if(h<f){const v=r.subarray(d*c),g=i.subarray(h*c),b=(f-h)*c;qS(g,v,b)}if(p>=l){const v=s.length;m=Math.floor(v/c)}if(m>f)if(this.defaultValue.length===1)i.subarray(f*c,m*c).fill(this.defaultValue[0]),f=m;else for(;m>f;){const v=i.slice(f*c);qS(v,u,c),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function qS(t,e,n){for(let s=0;s<n;s++)t[s]=e[s]}function XS(t,e){const n=[];for(let s of t){if(s<0){if(!e)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}n.push(s)}return n}function JD(t,e,n,s,o,r,i,a,c,l){return new Bf(t,e,n,s,o,r,i,a,c,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZD(t,e,n,s){const o=t===e,r=t<e&&n<0,i=e<t&&n>1;if(o||r||i)return Cn(0,s);const a=Math.abs(Math.ceil((e-t)/n)),c=Cn(a,s);e<t&&n===1&&(n=-1),c[0]=t;for(let l=1;l<c.length;l++)c[l]=c[l-1]+n;return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eO=Go(t=>1/Math.sqrt(t)),cne=gi(ud,eO),lne={kernelName:ud,backendName:"cpu",kernelFunc:cne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(t,e,n,s,o,r,i,a,c,l){const u=[s/o,o],d=t.values,h=e.values;if(s===0)return Ke(n,e.dtype);const f=c instanceof mn?c:Ke(u,e.dtype);typeof c=="string"||typeof c=="number"?f.values.fill(c):typeof c=="boolean"&&f.values.fill(+c);for(let p=0;p<r;p++){const m=[];let v=0;for(let g=0;g<i;g++){const b=d[p*i+g];m.push(b),v+=b*a[g]}if(v<0||v>=s/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<o;g++)l?f.values[v*o+g]+=h[p*o+g]:f.values[v*o+g]=e.rank===0?h[0]:h[p*o+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const une=Go(t=>1/(1+Math.exp(-t))),tO=dt(md,t=>1/(1+Math.exp(-t))),dne={kernelName:md,backendName:"cpu",kernelFunc:tO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nO(t,e,n,s,o){const r=Lx(s,e,n),i=ce(n),a=De(s);if(r){const d=Fx(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const c=o==="string"?fr(t):t,l=Ke(s,o,c),u=Ke(n,o);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,m)=>p+e[m]);u.set(l.get(...f),...h)}return o==="string"?oR(u.values):u.values}function ha(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,size:i}=s;Ne(o,"slice");const[a,c]=Rm(o,r,i);Dx(o,a,c);const l=n.data.get(o.dataId).values,u=nO(l,a,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,u)}const hne={kernelName:mm,backendName:"cpu",kernelFunc:ha};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sO(t,e,n,s,o,r,i){const a=e[0],c=r[0],l=new Array(c),u=new Array(a),d=e[1];if(c===0){if(a!==0)throw new Error(GA(a));const v=Ft(n,0),g=Ft(o,0);return[v,[0,d],g,l,u]}let h=!0,f=0;const p=new Array(c).fill(0);for(let v=0;v<a;++v){const g=t[v*d];if(g<0)throw new Error(HA(v,g));if(g>=c)throw new Error(KA(v,g,c));++p[g],h=h&&g>=f,f=g}let m=!0;for(let v=0;v<c;++v){const g=p[v]===0;l[v]=g,m=m&&!g,p[v]=Math.max(p[v],1),v>0&&(p[v]+=p[v-1])}if(m&&h){const v=t,g=s;for(let b=0;b<a;++b)u[b]=b;return[v,[a,d],g,l,u]}else{const v=p[c-1],g=Ft(n,v*d),b=Ft(o,v),x=new Array(c).fill(0);for(let y=0;y<a;++y){const w=t[y*d],C=x[w],_=(w===0?0:p[w-1])+C;x[w]++;for(let S=0;S<d;++S)g[_*d+S]=t[y*d+S];b[_]=s[y],u[y]=_}for(let y=0;y<c;++y)if(x[y]===0){const C=y===0?0:p[y-1];g[C*d+0]=y;for(let _=1;_<d;++_)g[C*d+_]=0;b[C]=i}return[g,[v,d],b,l,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oO(t,e,n,s,o){const r=ce(s),i=e[0],a=o.length,c=[];let l=1,u=-1;for(let v=0;v<a;++v){const g=o[v];if(g===-1){if(u!==-1)throw new Error(qA(u,v));u=v,c.push(1)}else{if(g<0)throw new Error(XA(v,g));l*=g,c.push(g)}}if(u!==-1){if(l<=0)throw new Error(QA());const v=Math.trunc(r/l);if(l*v!==r)throw new Error(YA(s,c));c[u]=v}if(ce(c)!==r)throw new Error(JA(s,c));const h=s.length,f=[];if(h>0){f[h-1]=1;for(let v=h-2;v>=0;--v)f[v]=f[v+1]*s[v+1]}const p=[];if(a>0){p[a-1]=1;for(let v=a-2;v>=0;--v)p[v]=p[v+1]*c[v+1]}const m=Ft(n,i*a);for(let v=0;v<i;++v){let g=0;for(let b=0;b<h;++b)g+=t[v*h+b]*f[b];for(let b=0;b<a;++b)m[v*a+b]=Math.trunc(g/p[b]),g%=p[b]}return[m,[i,a],c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1(t,e,n,s,o,r=!1,i=0){const a=s.length,c=[e[0],t.length/e[0]],l=c[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(Ib());const h=e.slice();h[0]=d;const f=h.reduce((x,y)=>x*y,1),p=Ft(n,f);if(a===0)return d>0&&p.fill(i),[p,h];if(d<=0)throw new Error(Ib());let m=0,v=1,g=0,b=o[m];for(;;){let x=0;if(v<a){if(x=o[v],b===x){++v;continue}if(b>=x)throw new Error(ZA())}if(b<0||b>=d)throw new Error(eR(b,d));b>g&&p.fill(i,g*l,b*l);for(let y=m;y<v;++y){const w=s[y];if(w<0||w>=c[0])throw new Error(tR(y,s[y],c[0]));for(let C=0;C<l;C++)p[b*l+C]+=t[w*l+C]}if(r)for(let y=0;y<l;y++)p[b*l+y]/=v-m;if(m=v,++v,g=b+1,b=x,v>a)break}return g<d&&p.fill(i,g*l,d*l),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fne=Go(t=>Math.sqrt(t)),pne=dt(vd,t=>Math.sqrt(t)),mne={kernelName:vd,backendName:"cpu",kernelFunc:pne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rO=Ut((t,e)=>{const n=t-e;return n*n}),gne=en(bd,rO),vne={kernelName:bd,backendName:"cpu",kernelFunc:gne};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iO=Go((t,e)=>{const{pattern:n,replaceGlobal:s,rewrite:o}=e;return t.replace(new RegExp(n,s?"g":""),o)}),bne=gi(B0,iO),yne={kernelName:B0,backendName:"cpu",kernelFunc:bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aO(t,e,n,s){const o=Ke(t,e.dtype);for(let r=0;r<o.size;r++){const i=o.indexToLoc(r),a=new Array(i.length);for(let c=0;c<a.length;c++)a[c]=i[c]*n[c]+s[c];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xne{constructor(e,n,s,o,r,i){this.separator=Ur(e),this.nGramWidths=n,this.leftPad=Ur(s),this.rightPad=Ur(o),this.padWidth=r,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const s=this.getPadWidth(n);return Math.max(0,e+2*s-n+1)}createNGrams(e,n,s,o,r,i){for(let a=0;a<r;++a){const c=this.getPadWidth(i),l=Math.max(0,c-a),u=Math.max(0,c-(r-(a+1))),d=i-(l+u),h=n+(l>0?0:a-c);let f=0;f+=l*this.leftPad.length;for(let b=0;b<d;++b)f+=e[h+b].length;f+=u*this.rightPad.length;const p=l+u+d-1;f+=p*this.separator.length,s[o+a]=new Uint8Array(f);const m=s[o+a];let v=0;const g=b=>b.forEach(x=>m[v++]=x);for(let b=0;b<l;++b)g(this.leftPad),g(this.separator);for(let b=0;b<d-1;++b)g(e[h+b]),g(this.separator);if(d>0){g(e[h+d-1]);for(let b=0;b<u;++b)g(this.separator),g(this.rightPad)}else{for(let b=0;b<u-1;++b)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const s=e.length,o=n.length;if(o>0){let c=n[0];if(c!==0)throw new Error(`First split value must be 0, got ${c}`);for(let l=1;l<o;++l){let u=n[l]>=c;if(u=u&&n[l]<=s,!u)throw new Error(`Invalid split value ${n[l]}, must be in [${c}, ${s}]`);c=n[l]}if(c!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${c}`)}const r=o-1,i=Ft("int32",o);if(s===0||o===0){const c=new Array(s);for(let l=0;l<=r;++l)i[l]=0;return[c,i]}i[0]=0;for(let c=1;c<=r;++c){const l=n[c]-n[c-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(l,d)}),this.preserveShort&&l>0&&u===0&&(u=1),i[c]=i[c-1]+u}const a=new Array(i[r]);for(let c=0;c<r;++c){const l=n[c];let u=i[c];if(this.nGramWidths.forEach(d=>{const h=n[c+1]-n[c],f=this.getNumNGrams(h,d);this.createNGrams(e,l,a,u,f,d),u+=f}),this.preserveShort&&u===i[c]){const d=n[c+1]-n[c];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,l,a,u,1,h)}}return[a,i]}}function cO(t,e,n,s,o,r,i,a){return new xne(n,s,o,r,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wne(t,e,n,s){if(!t.length)return;if(e.length===0){for(let r=0;r<t.length;++r)s.push(t.subarray(r,r+1));return}if(e.length===1){const r=e[0];let i=t.indexOf(r);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&s.push(a),t=t.subarray(i+1),i=t.indexOf(r)}(!n||t.length!==0)&&s.push(t);return}let o=0;for(let r=0;r<t.length+1;r++)if(r===t.length||e.indexOf(t[r])!==-1){const i=t.subarray(o,r);(!n||i.length!==0)&&s.push(i),o=r+1}}function lO(t,e,n){const s=t.length,o=[];let r=0,i=0;const a=new Array(s);for(let h=0;h<s;++h){const f=o.length;wne(t[h],e,n,o);const p=o.length-f;a[h]=p,r+=p,i=Math.max(i,p)}const c=Ft("int32",r*2),l=new Array(r),u=[s,i];let d=0;for(let h=0;h<s;++h)for(let f=0;f<a[h];++f)c[d*2]=h,c[d*2+1]=f,l[d]=o[d],++d;return[c,l,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uO(t,e){const n=Ft("int32",t.length);for(let s=0;s<t.length;++s)n[s]=Pq(t[s]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dO=Ut((t,e)=>t-e),Cne=I1((t,e,n,s)=>({real:t-n,imag:e-s})),N1=en(yd,dO,Cne),_ne={kernelName:yd,backendName:"cpu",kernelFunc:N1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hO(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const s=Ke(n,t.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),i=new Array(t.rank);for(let c=0;c<i.length;c++)i[c]=r[c]%t.shape[c];const a=t.locToIndex(i);s.values[o]=t.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Il=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function fO(t,e,n=0,s=t.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,c=e-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(a-u)/a)*Math.sign(c-a/2),h=Math.max(n,Math.floor(e-c*u/a+d)),f=Math.min(s,Math.floor(e+(a-c)*u/a+d));fO(t,e,h,f)}const o=t[e];let r=n,i=s;for(Ga(t,n,e),Il(t[s],o)>0&&Ga(t,n,s);r<i;){for(Ga(t,r,i),r++,i--;Il(t[r],o)<0;)r=r+1;for(;Il(t[i],o)>0;)i=i-1}Il(t[n],o)===0?Ga(t,n,i):(i=i+1,Ga(t,i,s)),i<=e&&(n=i+1),e<=i&&(s=i-1)}}function pO(t,e,n,s,o){const r=e[e.length-1],[i,a]=[t.length/r,r],c=wn(n,i*s),l=wn("int32",i*s);for(let d=0;d<i;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((b,x)=>p[x]={value:b,index:x}),s<p.length&&(fO(p,s),p=p.slice(0,s)),o&&p.sort(Il);const m=d*s,v=c.subarray(m,m+s),g=l.subarray(m,m+s);for(let b=0;b<s;b++)v[b]=p[b].value,g[b]=p[b].index}const u=e.slice();return u[u.length-1]=s,[Ke(u,n,c),Ke(u,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mO(t,e,n,s){const o=qe(e,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const i=new Map,a=new Int32Array(n[o]),c=new mn(r,s,t),l=[],u=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let m;if(u)m=t[p].toString();else{const g=[];for(let b=0;b<r[0];b++)for(let x=0;x<r[2];x++)g.push(c.get(b,p,x));m=g.join(",")}const v=i.get(m);if(v!=null)a[p]=v;else{const g=i.size;i.set(m,g),a[p]=g,l.push(p)}}const d=r.slice();d[1]=i.size;const h=new mn(d,s);l.forEach((p,m)=>{for(let v=0;v<r[0];v++)for(let g=0;g<r[2];g++)h.set(c.get(v,p,g),v,m,g)});const f=n.slice();return f[o]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sne=Object.freeze(Object.defineProperty({__proto__:null,addImpl:SD,bincountImpl:E1,bincountReduceImpl:ID,bitwiseAndImpl:ED,castImpl:_D,ceilImpl:kD,concatImpl:$D,equalImpl:TD,expImpl:AD,expm1Impl:DD,floorDivImpl:LD,floorImpl:OD,gatherNdImpl:FD,gatherV2Impl:PD,greaterEqualImpl:BD,greaterImpl:MD,lessEqualImpl:UD,lessImpl:VD,linSpaceImpl:jD,logImpl:zD,maxImpl:WD,maximumImpl:GD,minimumImpl:HD,multiplyImpl:k1,negImpl:KD,notEqualImpl:qD,prodImpl:XD,raggedGatherImpl:QD,raggedRangeImpl:YD,raggedTensorToTensorImpl:JD,rangeImpl:ZD,rsqrtImpl:eO,scatterImpl:Mi,sigmoidImpl:une,simpleAbsImpl:CD,sliceImpl:nO,sparseFillEmptyRowsImpl:sO,sparseReshapeImpl:oO,sparseSegmentReductionImpl:T1,sqrtImpl:fne,squaredDifferenceImpl:rO,staticRegexReplaceImpl:iO,stridedSliceImpl:aO,stringNGramsImpl:cO,stringSplitImpl:lO,stringToHashBucketFastImpl:uO,subImpl:dO,tileImpl:hO,topKImpl:pO,transposeImpl:$1,uniqueImpl:mO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */RN("cpu",()=>new Hm,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO=dt(ju,t=>t>=0?t:Math.exp(t)-1),Ine={kernelName:ju,backendName:"cpu",kernelFunc:gO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{alpha:r}=s;Ne([o],"leakyRelu");const i=ce(o.shape),a=n.data.get(o.dataId).values,c=wn("float32",i);for(let l=0;l<a.length;l++)c[l]=a[l]<0?r*a[l]:a[l];return n.makeTensorInfo(o.shape,"float32",c)}const Ene={kernelName:zp,backendName:"cpu",kernelFunc:vO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kne=Ut((t,e)=>t<0?e*t:t);function bO(t){const{inputs:e,backend:n}=t,{x:s,alpha:o}=e;Ne([s,o],"prelu");const r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,[a,c]=kne(s.shape,o.shape,r,i,"float32");return n.makeTensorInfo(c,"float32",a)}const $ne={kernelName:cm,backendName:"cpu",kernelFunc:bO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yO=dt(ad,t=>Math.max(0,t)),Tne={kernelName:ad,backendName:"cpu",kernelFunc:yO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xO=dt(cd,t=>Math.min(Math.max(0,t),6)),Nne={kernelName:cd,backendName:"cpu",kernelFunc:xO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vf(t,e,n,s,o){if(n==="linear")return zo({inputs:{x:e},backend:t});if(n==="relu")return yO({inputs:{x:e},backend:t});if(n==="elu")return gO({inputs:{x:e},backend:t});if(n==="relu6")return xO({inputs:{x:e},backend:t});if(n==="prelu")return bO({inputs:{x:e,alpha:s},backend:t});if(n==="leakyrelu")return vO({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return tO({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{shape:r}=s,i=ce(o.shape),a=MT(r,i),c=ce(a);$(i===c,()=>`The new shape (${a}) has ${c} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const l=n.data.get(o.dataId);if(l.complexTensorInfos!=null){const u=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const Ane={kernelName:um,backendName:"cpu",kernelFunc:Ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wO(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r}=e,{transposeA:i,transposeB:a}=s;Ne([o,r],"matMul");const c=o.shape.length,l=r.shape.length,u=i?o.shape[c-2]:o.shape[c-1],d=a?r.shape[l-1]:r.shape[l-2],h=i?o.shape[c-1]:o.shape[c-2],f=a?r.shape[l-2]:r.shape[l-1],p=o.shape.slice(0,-2),m=r.shape.slice(0,-2),v=ce(p),g=ce(m),x=ze(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,f]);$(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${i} and transposeB=${a} must match.`);const y=i?[v,u,h]:[v,h,u],w=a?[g,f,d]:[g,d,f],C=Ct({inputs:{x:o},backend:n,attrs:{shape:y}}),_=Ct({inputs:{x:r},backend:n,attrs:{shape:w}}),S=i?C.shape[1]:C.shape[2],I=i?C.shape[2]:C.shape[1],E=a?_.shape[1]:_.shape[2],O=Math.max(v,g),A=n.data.get(C.dataId).values,P=n.data.get(_.dataId).values,z=De(C.shape),G=De(_.shape),[M,R,D]=i?[z[0],1,z[1]]:[z[0],z[1],1],[j,ne,re]=a?[1,G[1],G[0]]:[G[1],1,G[0]],de=I*E,he=Ke([O,I,E],C.dtype),ye=he.values,fe=n.blockSize;for(let ge=0;ge<O;ge++){const q=ge%v,ue=ge%g;for(let le=0;le<I;le+=fe){const pe=Math.min(le+fe,I);for(let _e=0;_e<E;_e+=fe){const Re=Math.min(_e+fe,E);for(let N=0;N<S;N+=fe){const L=Math.min(N+fe,S);for(let K=le;K<pe;K++)for(let oe=_e;oe<Re;oe++){let se=0;for(let k=N;k<L;k++){const T=A[q*M+K*R+k*D],U=P[k*j+oe*ne+ue*re];se+=T*U}ye[ge*de+(K*E+oe)]+=se}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(x,he.dtype,he.values)}const Rne={kernelName:$p,backendName:"cpu",kernelFunc:wO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:d}=s;let h,f,p;const m=[];h=wO({inputs:{a:o,b:r},attrs:{transposeA:c,transposeB:l},backend:n}),i&&(f=Lc({inputs:{a:h,b:i},backend:n}),m.push(h),h=f),u&&(p=Vf(n,h,u,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const One={kernelName:vf,backendName:"cpu",kernelFunc:Dne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lne=dt(Tu,t=>Math.acos(t)),Fne={kernelName:Tu,backendName:"cpu",kernelFunc:Lne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pne=dt(Nu,t=>Math.acosh(t)),Mne={kernelName:Nu,backendName:"cpu",kernelFunc:Pne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bne(t){const{inputs:e,backend:n}=t,s=e;Ne(e,"addN");const o=s.map(a=>n.data.get(a.dataId).values),r=Ke(s[0].shape,s[0].dtype),i=r.values;for(let a=0;a<s.length;a++){const c=o[a];for(let l=0;l<i.length;l++)i[l]+=c[l]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const Vne={kernelName:o0,backendName:"cpu",kernelFunc:Bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ne(o,"all");const a=qe(r,o.shape);let c=a;const l=Dt(c,o.shape.length);let u=o;l!=null&&(u=Yn({inputs:{x:o},backend:n,attrs:{perm:l}}),c=Bt(c.length,o.shape.length)),vn("all",c,u.shape.length);const[d,h]=dn(u.shape,c),f=ce(h),p=Cn(ce(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];x=x&&w}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Wt(d,a),b=Ct({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const jne={kernelName:r0,backendName:"cpu",kernelFunc:Une};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ne(o,"any");const a=qe(r,o.shape);let c=a;const l=Dt(c,o.shape.length);let u=o;l!=null&&(u=Yn({inputs:{x:o},backend:n,attrs:{perm:l}}),c=Bt(c.length,o.shape.length)),vn("any",c,u.shape.length);const[d,h]=dn(u.shape,c),f=ce(h),p=Cn(ce(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];x=x||w}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Wt(d,a),b=Ct({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const Wne={kernelName:i0,backendName:"cpu",kernelFunc:zne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;Ne(o,"argMax");let i=qe(r,o.shape);const a=Dt(i,o.shape.length);let c=o;const l=[];a!=null&&(c=Yn({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(c),i=Bt(i.length,c.shape.length)),i=[i[0]],vn("argMax",i,c.shape.length);const[u,d]=dn(c.shape,i),h=ce(u),f=Cn(h,"int32"),p=ce(d),m=n.data.get(c.dataId).values;for(let v=0;v<f.length;++v){const g=v*p;let b=m[g],x=0;for(let y=0;y<p;++y){const w=m[g+y];w>b&&(b=w,x=y)}f[v]=x}return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const Hne={kernelName:Sp,backendName:"cpu",kernelFunc:Gne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;Ne(o,"argMin");let i=qe(r,o.shape);const a=Dt(i,o.shape.length);let c=o;const l=[];a!=null&&(c=Yn({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(c),i=Bt(i.length,c.shape.length)),i=[i[0]],vn("argMin",i,c.shape.length);const[u,d]=dn(c.shape,i),h=ce(u),f=Cn(h,"int32"),p=ce(d),m=n.data.get(c.dataId).values;for(let v=0;v<f.length;++v){const g=v*p;let b=m[g],x=0;for(let y=0;y<p;++y){const w=m[g+y];w<b&&(b=w,x=y)}f[v]=x}return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const qne={kernelName:Ip,backendName:"cpu",kernelFunc:Kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xne=dt(Au,t=>Math.asin(t)),Qne={kernelName:Au,backendName:"cpu",kernelFunc:Xne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yne=dt(Ru,t=>Math.asinh(t)),Jne={kernelName:Ru,backendName:"cpu",kernelFunc:Yne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zne=dt(Du,t=>Math.atan(t)),ese={kernelName:Du,backendName:"cpu",kernelFunc:Zne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse=Ut((t,e)=>Math.atan2(t,e)),nse=en(Lu,tse),sse={kernelName:Lu,backendName:"cpu",kernelFunc:nse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose=dt(Ou,t=>Math.atanh(t)),rse={kernelName:Ou,backendName:"cpu",kernelFunc:ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1(t,e,n,s,o,r){const i=o.strideHeight,a=o.strideWidth,c=o.dilationHeight,l=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=o.padInfo.top,f=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ke(o.outShape,n),v=m.values,g=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],x=o.outShape[3];for(let y=0;y<o.batchSize;++y){const w=y*g,C=y*s[0];for(let _=0;_<o.inChannels;++_)for(let S=0;S<o.outHeight;++S){const I=S*i-h,E=Math.max(0,I),O=Math.min(o.inHeight,u+I),A=w+S*b;for(let P=0;P<o.outWidth;++P){const z=P*a-f,G=Math.max(0,z),M=Math.min(o.inWidth,d+z);let R=p,D=0,j=0;for(let re=E;re<O;re+=c){const de=C+re*s[1];for(let he=G;he<M;he+=l){const ye=de+he*s[2],fe=t[ye+_];r==="max"&&fe>R?R=fe:r==="avg"&&(D+=fe,j++)}if(isNaN(R))break}const ne=A+P*x+_;v[ne]=r==="avg"?D/j:R}}}return m}function CO(t,e,n,s,o=!1,r=!1){const i=Ke(s.outShape,"int32"),a=s.strideHeight,c=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,d=s.effectiveFilterHeight,h=s.effectiveFilterWidth,f=s.padInfo.top,p=s.padInfo.left,m=Ke(e,n,t);for(let v=0;v<s.batchSize;++v)for(let g=0;g<s.inChannels;++g)for(let b=0;b<s.outHeight;++b){const x=b*a-f;let y=x;for(;y<0;)y+=l;const w=Math.min(s.inHeight,d+x);for(let C=0;C<s.outWidth;++C){const _=C*c-p;let S=_;for(;S<0;)S+=u;const I=Math.min(s.inWidth,h+_);let E=Number.NEGATIVE_INFINITY,O=-1;for(let A=y;A<w;A+=l){const P=A-x;for(let z=S;z<I;z+=u){const G=z-_,M=m.get(v,A,z,g);M>E&&(E=M,o?O=r?((v*s.inHeight+A)*s.inWidth+z)*s.inChannels+g:(A*s.inWidth+z)*s.inChannels+g:O=P*h+G)}}i.set(O,v,b,C,g)}}return i}function _O(t,e,n,s,o,r){const i=o.strideDepth,a=o.strideHeight,c=o.strideWidth,l=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,h=o.effectiveFilterDepth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,v=o.padInfo.top,g=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ke(o.outShape,n),y=x.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],_=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let I=0;I<o.batchSize;++I){const E=I*w,O=I*s[0];for(let A=0;A<o.inChannels;++A)for(let P=0;P<o.outDepth;++P){const z=P*i-m;let G=z;for(;G<0;)G+=l;const M=Math.min(o.inDepth,h+z),R=E+P*C;for(let D=0;D<o.outHeight;++D){const j=D*a-v;let ne=j;for(;ne<0;)ne+=u;const re=Math.min(o.inHeight,f+j),de=R+D*_;for(let he=0;he<o.outWidth;++he){const ye=he*c-g;let fe=ye;for(;fe<0;)fe+=d;const ge=Math.min(o.inWidth,p+ye),q=de+he*S;let ue=b,le=0,pe=0;for(let Re=G;Re<M;Re+=l){const N=O+Re*s[1];for(let L=ne;L<re;L+=u){const K=N+L*s[2];for(let oe=fe;oe<ge;oe+=d){const se=K+oe*s[3],k=t[se+A];if(r==="max"&&k>ue?ue=k:r==="avg"&&(le+=k,pe++),isNaN(ue))break}if(isNaN(ue))break}if(isNaN(ue))break}const _e=q+A;y[_e]=r==="avg"?le/Math.max(pe,1):ue}}}}return x}function ise(t,e){const n=Ke(e.outShape,"int32"),s=e.strideDepth,o=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let v=0;v<e.inChannels;++v)for(let g=0;g<e.outDepth;++g){const b=g*s-h;let x=b;for(;x<0;)x+=i;const y=Math.min(e.inDepth,l+b);for(let w=0;w<e.outHeight;++w){const C=w*o-f;let _=C;for(;_<0;)_+=a;const S=Math.min(e.inHeight,u+C);for(let I=0;I<e.outWidth;++I){const E=I*r-p;let O=E;for(;O<0;)O+=c;const A=Math.min(e.inWidth,d+E);let P=Number.NEGATIVE_INFINITY,z=-1;for(let G=x;G<y;G+=i){const M=G-b;for(let R=_;R<S;R+=a){const D=R-C;for(let j=O;j<A;j+=c){const ne=j-E,re=t.get(m,G,R,j,v);re>=P&&(P=re,z=M*u*d+D*u+ne)}}}n.set(z,m,g,w,I,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ase(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Ne(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:c}=s,l=1;$(In(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const u=Ws(o.shape,r,i,l,a,c);let d;if(u.filterWidth===1&&u.filterHeight===1&&at(u.inShape,u.outShape))d=zo({inputs:{x:o},backend:n});else{const h=n.data.get(o.dataId).values,f=De(o.shape),p=A1(h,o.shape,o.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const cse={kernelName:Ep,backendName:"cpu",kernelFunc:ase};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:c,dataFormat:l}=s;Ne(o,"avgPool3d");const u=br(o.shape,r,i,1,a,c,l),d=n.data.get(o.dataId).values,h=_O(d,o.shape,o.dtype,De(o.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const use={kernelName:kp,backendName:"cpu",kernelFunc:lse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,{filterSize:i,strides:a,pad:c,dimRoundingMode:l}=s;Ne([o,r],"avgPool3DGrad");const u=br(r.shape,i,a,1,c,l),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,v=u.filterWidth,g=u.dilationDepth,b=u.dilationHeight,x=u.dilationWidth,y=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,_=y-1-u.padInfo.front,S=C-1-u.padInfo.left,I=w-1-u.padInfo.top,E=Ke(r.shape,"float32"),O=1/(p*m*v),A=n.bufferSync(o);for(let P=0;P<u.batchSize;++P)for(let z=0;z<u.inChannels;++z)for(let G=0;G<u.inDepth;++G)for(let M=0;M<u.inHeight;++M)for(let R=0;R<u.inWidth;++R){const D=G-_,j=M-I,ne=R-S;let re=0;for(let de=0;de<y;de+=g){const he=(D+de)/d;if(!(he<0||he>=u.outDepth||Math.floor(he)!==he))for(let ye=0;ye<w;ye+=b){const fe=(j+ye)/h;if(!(fe<0||fe>=u.outHeight||Math.floor(fe)!==fe))for(let ge=0;ge<C;ge+=x){const q=(ne+ge)/f;if(q<0||q>=u.outWidth||Math.floor(q)!==q)continue;const ue=A.get(P,he,fe,q,z);re+=ue}}}E.set(re*O,P,G,M,R,z)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const hse={kernelName:c0,backendName:"cpu",kernelFunc:dse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r;Ne([o,r],"avgPoolGrad");const{filterSize:a,strides:c,pad:l}=s,u=Ws(i.shape,a,c,1,l),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,v=u.dilationWidth,g=u.effectiveFilterHeight,b=u.effectiveFilterWidth,x=b-1-u.padInfo.left,y=g-1-u.padInfo.top,w=Ke(i.shape,"float32"),C=1/(f*p),_=n.data.get(o.dataId).values,S=Ke(o.shape,"float32",_);for(let I=0;I<u.batchSize;++I)for(let E=0;E<u.inChannels;++E)for(let O=0;O<u.inHeight;++O)for(let A=0;A<u.inWidth;++A){const P=O-y,z=A-x;let G=0;for(let M=0;M<g;M+=m){const R=(P+M)/d;if(!(R<0||R>=u.outHeight||Math.floor(R)!==R))for(let D=0;D<b;D+=v){const j=(z+D)/h;if(j<0||j>=u.outWidth||Math.floor(j)!==j)continue;const ne=S.get(I,R,j,E);G+=ne}}w.set(G*C,I,O,A,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const pse={kernelName:a0,backendName:"cpu",kernelFunc:fse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,scale:r,offset:i,mean:a,variance:c}=e;$(a.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ne([o,a,c,r,i],"batchNorm");let{varianceEpsilon:l}=s;l==null&&(l=.001);const u=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(c.dataId).values,f=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),v=p.length,g=f.length,b=h.length,x=d.length;let y=0,w=0,C=0,_=0;for(let S=0;S<u.length;++S)m[S]=p[y++]+(u[S]-d[w++])*f[C++]/Math.sqrt(h[_++]+l),y>=v&&(y=0),w>=x&&(w=0),C>=g&&(C=0),_>=b&&(_=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const gse={kernelName:Vp,backendName:"cpu",kernelFunc:mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,crops:i}=s;Ne([o],"batchToSpaceND");const a=r.reduce((g,b)=>g*b),c=Td(o.shape,r,a),l=Nd(c.length,r.length),u=Ad(o.shape,r,a),d=Ux(i,r.length),h=jx(u,i,r.length),f=Ct({inputs:{x:o},backend:n,attrs:{shape:c}}),p=Yn({inputs:{x:f},backend:n,attrs:{perm:l}}),m=Ct({inputs:{x:p},backend:n,attrs:{shape:u}}),v=ha({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}const bse={kernelName:Tp,backendName:"cpu",kernelFunc:vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i}=s,a=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,l=E1(a,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,l)}const xse={kernelName:l0,backendName:"cpu",kernelFunc:yse};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wse(t){const{inputs:e,backend:n}=t,{s0:s,s1:o}=e,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=ze(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Cse={kernelName:WT,backendName:"cpu",kernelFunc:wse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _se=dt(Mu,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Sse={kernelName:Mu,backendName:"cpu",kernelFunc:_se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ise=t=>{const{x:e}=t.inputs,n=t.backend,s=new Float32Array(ce(e.shape)),o=n.data.get(e.dataId),r=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values;for(let l=0;l<a.length;l++){const u=a[l],d=c[l];s[l]=Math.hypot(u,d)}return n.makeOutput(s,e.shape,"float32")},Ese={kernelName:Np,backendName:"cpu",kernelFunc:Ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fc(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const kse={kernelName:k0,backendName:"cpu",kernelFunc:Fc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s,r=qe(o,e[0].shape)[0],i=e.map(m=>m.shape);Mx(i,r);let a=Oo(e.map(m=>m.shape),r);if(ce(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const c=e.filter(m=>ce(m.shape)>0);if(c.length===1)return zo({inputs:{x:c[0]},backend:n});if(c[0].dtype==="complex64"){const m=c.map(y=>da({inputs:{input:y},backend:n})),v=c.map(y=>Fc({inputs:{input:y},backend:n})),g=Pc({inputs:m,backend:n,attrs:{axis:r}}),b=Pc({inputs:v,backend:n,attrs:{axis:r}}),x=ns({inputs:{real:g,imag:b},backend:n});return m.forEach(y=>n.disposeIntermediateTensorInfo(y)),v.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}const l=c.map(m=>{const g=[-1,ce(m.shape.slice(r))];return Ct({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=l.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Oo(l.map(m=>m.shape),1);const d=l[0].shape[0]===1,h=$D(u,a,e[0].dtype,d),f=Oo(c.map(m=>m.shape),r),p=n.makeTensorInfo(f,e[0].dtype,h);return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const $se={kernelName:Ap,backendName:"cpu",kernelFunc:Pc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dataFormat:c,dilations:l,dimRoundingMode:u}=s;Ne([o,r],"conv2d");const d=yr(c),h=gn(o.shape,r.shape,i,l,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,v=h.dilationWidth,g=h.padInfo.left,b=h.padInfo.top,x=h.dataFormat==="channelsLast",y=new mn(h.outShape,o.dtype),w=De(o.shape),C=De(r.shape),_=w[0],S=x?w[1]:w[2],I=x?w[2]:1,E=x?1:w[1],O=y.strides[0],A=x?y.strides[1]:y.strides[2],P=x?y.strides[2]:1,z=x?1:y.strides[1],G=n.data.get(o.dataId).values,M=n.data.get(r.dataId).values,R=y.values;for(let D=0;D<h.batchSize;++D){const j=D*_,ne=D*O;for(let re=0;re<h.outHeight;++re){const de=ne+re*A,he=re*h.strideHeight-b;for(let ye=0;ye<f;++ye){const fe=he+ye*m;if(fe<0||fe>=h.inHeight)continue;const ge=ye*C[0],q=j+fe*S;for(let ue=0;ue<h.outWidth;++ue){const le=de+ue*P,pe=ue*h.strideWidth-g;for(let _e=0;_e<p;++_e){const Re=pe+_e*v;if(Re<0||Re>=h.inWidth)continue;const N=ge+_e*C[1],L=q+Re*I;let K=N;for(let oe=0;oe<h.inChannels;++oe){const se=G[L+oe*E];for(let k=0;k<h.outChannels;++k)R[le+k*z]+=se*M[K+k];K+=h.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,R)}const Tse={kernelName:Rp,backendName:"cpu",kernelFunc:SO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,dataFormat:c,dimRoundingMode:l,filterShape:u}=s;Ne([o,r],"conv2dBackpropFilter");const d=yr(c),h=gn(o.shape,u,i,1,a,l,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:v}=h,g=h.dataFormat==="channelsLast",b=new mn(h.filterShape,"float32"),x=h.padInfo.left,y=h.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,_=new mn(o.shape,o.dtype,w),S=new mn(r.shape,r.dtype,C);for(let I=0;I<m;++I){const E=Math.max(0,Math.ceil((y-I)/f)),O=Math.min(h.outHeight,(h.inHeight+y-I)/f);for(let A=0;A<v;++A){const P=Math.max(0,Math.ceil((x-A)/p)),z=Math.min(h.outWidth,(h.inWidth+x-A)/p);for(let G=0;G<h.inChannels;++G)for(let M=0;M<h.outChannels;++M){let R=0;for(let D=0;D<h.batchSize;++D)for(let j=E;j<O;++j){const ne=I+j*f-y;for(let re=P;re<z;++re){const de=A+re*p-x;g?R+=_.get(D,ne,de,G)*S.get(D,j,re,M):R+=_.get(D,G,ne,de)*S.get(D,M,j,re)}}b.set(R,I,A,G,M)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Ase={kernelName:h0,backendName:"cpu",kernelFunc:Nse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{inputShape:i,strides:a,pad:c,dataFormat:l,dimRoundingMode:u}=s;Ne([o,r],"conv2dBackpropInput");const d=De(r.shape),h=De(o.shape);let f=yr(l);const p=gn(i,r.shape,a,1,c,u,!1,f),m=new mn(p.inShape,"float32"),v=m.values,g=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[x,y,w]=d,{batchSize:C,filterHeight:_,filterWidth:S,inChannels:I,inHeight:E,inWidth:O,outChannels:A,outHeight:P,outWidth:z,strideHeight:G,strideWidth:M}=p;f=p.dataFormat;const R=_-1-p.padInfo.top,D=S-1-p.padInfo.left,j=f==="channelsLast",ne=m.strides[0],re=j?m.strides[1]:m.strides[2],de=j?m.strides[2]:1,he=j?1:m.strides[1],ye=h[0],fe=j?h[1]:h[2],ge=j?h[2]:1,q=j?1:h[1];for(let ue=0;ue<C;++ue)for(let le=0;le<I;++le)for(let pe=0;pe<E;++pe){const _e=pe-R,Re=Math.max(0,Math.ceil(_e/G)),N=Math.min(P,(_+_e)/G);for(let L=0;L<O;++L){const K=L-D,oe=Math.max(0,Math.ceil(K/M)),se=Math.min(z,(S+K)/M);let k=0;for(let U=Re;U<N;++U){const Y=U*G-_e;for(let ee=oe;ee<se;++ee){const ve=ee*M-K,B=ye*ue+fe*U+ge*ee,Z=x*(_-1-Y)+y*(S-1-ve)+w*le;for(let Ce=0;Ce<A;++Ce){const ie=g[B+q*Ce],be=b[Z+Ce];k+=ie*be}}}const T=ne*ue+re*pe+de*L+he*le;v[T]=k}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const Dse={kernelName:Dp,backendName:"cpu",kernelFunc:Rse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ose(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:c}=s;Ne([o,r],"conv3d");const l=ui(o.shape,r.shape,i,c,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:v}=l,g=v.front,b=v.left,x=v.top,y=new mn(l.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,_=y.values,S=De(o.shape),I=De(r.shape);for(let E=0;E<l.batchSize;++E){const O=E*S[0],A=E*y.strides[0];for(let P=0;P<l.outDepth;++P){const z=A+P*y.strides[1],G=P*l.strideDepth-g;for(let M=0;M<u;++M){const R=G+M*f;if(R<0||R>=l.inDepth)continue;const D=M*I[0],j=O+R*S[1];for(let ne=0;ne<l.outHeight;++ne){const re=z+ne*y.strides[2],de=ne*l.strideHeight-x;for(let he=0;he<d;++he){const ye=de+he*p;if(ye<0||ye>=l.inHeight)continue;const fe=D+he*I[1],ge=j+ye*S[2];for(let q=0;q<l.outWidth;++q){const ue=re+q*l.outChannels,le=q*l.strideWidth-b;for(let pe=0;pe<h;++pe){const _e=le+pe*m;if(_e<0||_e>=l.inWidth)continue;const Re=fe+pe*I[2],N=ge+_e*l.inChannels;let L=Re;for(let K=0;K<l.inChannels;++K){const oe=w[N+K];for(let se=0;se<l.outChannels;++se)_[ue+se]+=oe*C[L+se];L+=l.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Lse={kernelName:Op,backendName:"cpu",kernelFunc:Ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,filterShape:c}=s;Ne([o,r],"conv3dBackpropFilterV2");const l=De(o.shape),u=De(r.shape),d=ui(o.shape,c,i,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,v=d.filterHeight,g=d.filterWidth,b=new mn(d.filterShape,"float32"),x=b.values,[y,w,C,_]=b.strides,S=n.data.get(r.dataId).values,[I,E,O,A]=u,P=n.data.get(o.dataId).values,[z,G,M,R]=l,D=d.padInfo.front,j=d.padInfo.left,ne=d.padInfo.top;for(let re=0;re<m;++re){const de=Math.max(0,Math.ceil((D-re)/h)),he=Math.min(d.outDepth,(d.inDepth+D-re)/h),ye=re*y;for(let fe=0;fe<v;++fe){const ge=Math.max(0,Math.ceil((ne-fe)/f)),q=Math.min(d.outHeight,(d.inHeight+ne-fe)/f),ue=fe*w+ye;for(let le=0;le<g;++le){const pe=Math.max(0,Math.ceil((j-le)/p)),_e=Math.min(d.outWidth,(d.inWidth+j-le)/p),Re=le*C+ue;for(let N=0;N<d.inChannels;++N){const L=N*_+Re;for(let K=0;K<d.outChannels;++K){let oe=0;for(let se=0;se<d.batchSize;++se){const k=se*z,T=se*I;for(let U=de;U<he;++U){const ee=(re+U*h-D)*G+k,ve=U*E+T;for(let B=ge;B<q;++B){const Ce=(fe+B*f-ne)*M+ee,ie=B*O+ve;for(let be=pe;be<_e;++be){const Pe=(le+be*p-j)*R+Ce,Qe=be*A+ie;oe+=P[Pe+N]*S[Qe+K]}}}}x[L+K]=oe}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Pse={kernelName:f0,backendName:"cpu",kernelFunc:Fse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{pad:i,strides:a,inputShape:c}=s;Ne([o],"conv3dBackpropInputV2");const l=De(o.shape),u=De(r.shape),d=ui(c,r.shape,a,1,i),h=new mn(d.inShape,"float32"),f=h.values,[p,m,v,g]=h.strides,b=n.data.get(o.dataId).values,[x,y,w,C]=l,_=n.data.get(r.dataId).values,[S,I,E,O]=u,{batchSize:A,filterDepth:P,filterHeight:z,filterWidth:G,inChannels:M,inDepth:R,inHeight:D,inWidth:j,outChannels:ne,outDepth:re,outHeight:de,outWidth:he,strideDepth:ye,strideHeight:fe,strideWidth:ge}=d,q=P-1-d.padInfo.front,ue=z-1-d.padInfo.top,le=G-1-d.padInfo.left;for(let pe=0;pe<A;++pe)for(let _e=0;_e<M;++_e)for(let Re=0;Re<R;++Re){const N=Re-q,L=Math.max(0,Math.ceil(N/ye)),K=Math.min(re,(P+N)/ye);for(let oe=0;oe<D;++oe){const se=oe-ue,k=Math.max(0,Math.ceil(se/fe)),T=Math.min(de,(z+se)/fe);for(let U=0;U<j;++U){const Y=U-le,ee=Math.max(0,Math.ceil(Y/ge)),ve=Math.min(he,(G+Y)/ge);let B=0;for(let Z=L;Z<K;++Z){const Ce=Z*ye-N;for(let ie=k;ie<T;++ie){const be=ie*fe-se;for(let Ie=ee;Ie<ve;++Ie){const Pe=Ie*ge-Y,Qe=x*pe+y*Z+w*ie+C*Ie,At=S*(P-1-Ce)+I*(z-1-be)+E*(G-1-Pe)+O*_e;for(let Gt=0;Gt<ne;++Gt){const Ho=b[Qe+Gt],Kd=_[At+Gt];B+=Ho*Kd}}}}f[p*pe+m*Re+v*oe+g*U+_e]=B}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Bse={kernelName:p0,backendName:"cpu",kernelFunc:Mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vse=dt(Bu,t=>Math.cos(t)),Use={kernelName:Bu,backendName:"cpu",kernelFunc:Vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jse=dt(Vu,t=>Math.cosh(t)),zse={kernelName:Vu,backendName:"cpu",kernelFunc:jse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t){const{inputs:e,backend:n,attrs:s}=t,{image:o,boxes:r,boxInd:i}=e,{cropSize:a,method:c,extrapolationValue:l}=s,[u,d,h,f]=o.shape,p=r.shape[0],[m,v]=a,g=Ke([p,m,v,f],"float32"),b=n.data.get(r.dataId).values,x=n.data.get(i.dataId).values,y=n.data.get(o.dataId).values,w=De(o.shape),C=De(g.shape);for(let _=0;_<p;_++){const S=_*4,I=b[S],E=b[S+1],O=b[S+2],A=b[S+3],P=x[_];if(P>=u)continue;const z=m>1?(O-I)*(d-1)/(m-1):0,G=v>1?(A-E)*(h-1)/(v-1):0;for(let M=0;M<m;M++){const R=m>1?I*(d-1)+M*z:.5*(I+O)*(d-1);if(R<0||R>d-1){for(let D=0;D<v;D++)for(let j=0;j<f;j++){const ne=j+D*C[2]+M*C[1]+_*C[0];g.values[ne]=l}continue}if(c==="bilinear"){const D=Math.floor(R),j=Math.ceil(R),ne=R-D;for(let re=0;re<v;re++){const de=v>1?E*(h-1)+re*G:.5*(E+A)*(h-1);if(de<0||de>h-1){for(let ge=0;ge<f;ge++){const q=ge+re*C[2]+M*C[1]+_*C[0];g.values[q]=l}continue}const he=Math.floor(de),ye=Math.ceil(de),fe=de-he;for(let ge=0;ge<f;ge++){let q=ge+he*w[2]+D*w[1]+P*w[0];const ue=y[q];q=ge+ye*w[2]+D*w[1]+P*w[0];const le=y[q];q=ge+he*w[2]+j*w[1]+P*w[0];const pe=y[q];q=ge+ye*w[2]+j*w[1]+P*w[0];const _e=y[q],Re=ue+(le-ue)*fe,N=pe+(_e-pe)*fe;q=ge+re*C[2]+M*C[1]+_*C[0],g.values[q]=Re+(N-Re)*ne}}}else for(let D=0;D<v;++D){const j=v>1?E*(h-1)+D*G:.5*(E+A)*(h-1);if(j<0||j>h-1){for(let de=0;de<f;de++){const he=de+D*C[2]+M*C[1]+_*C[0];g.values[he]=l}continue}const ne=Math.round(j),re=Math.round(R);for(let de=0;de<f;de++){const he=de+ne*w[2]+re*w[1]+P*w[0],ye=de+D*C[2]+M*C[1]+_*C[0];g.values[ye]=y[he]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Gse={kernelName:g0,backendName:"cpu",kernelFunc:Wse};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;Ne(o,"cumprod");const c=Dt([r],o.shape.length);let l=o;c!=null&&(l=Yn({inputs:{x:o},backend:n,attrs:{perm:c}}));const u=Bt(1,o.shape.length)[0];if(u!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${u}`);const d=cs(l.dtype,"int32"),h=t0(ce(l.shape),d),f=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(g,b)=>g+p-b-1:(g,b)=>g+b;for(let g=0;g<f.length;g+=p)for(let b=0;b<p;b++){const x=m(g,b);if(b===0)h[x]=i?1:f[x];else{const y=m(g,b-1);h[x]=i?f[y]*h[y]:f[x]*h[y]}}const v=n.makeTensorInfo(l.shape,d,h);if(c!=null){const g=di(c),b=Yn({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(l),b}return v}const Kse={kernelName:m0,backendName:"cpu",kernelFunc:Hse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;Ne(o,"cumsum");const c=Dt([r],o.shape.length);let l=o;c!=null&&(l=Yn({inputs:{x:o},backend:n,attrs:{perm:c}}));const u=Bt(1,o.shape.length)[0];if(u!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${u}`);const d=cs(l.dtype,"int32"),h=Cn(ce(l.shape),d),f=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(g,b)=>g+p-b-1:(g,b)=>g+b;for(let g=0;g<f.length;g+=p)for(let b=0;b<p;b++){const x=m(g,b);if(b===0)h[x]=i?0:f[x];else{const y=m(g,b-1);h[x]=i?f[y]+h[y]:f[x]+h[y]}}const v=n.makeTensorInfo(l.shape,d,h);if(c!=null){const g=di(c),b=Yn({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(l),b}return v}const Xse={kernelName:Lp,backendName:"cpu",kernelFunc:qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const c=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=E1(c,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(o.shape.length===2){const c=n.bufferSync(o),l=n.bufferSync(r),u=ID(c,l,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Yse={kernelName:v0,backendName:"cpu",kernelFunc:Qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockSize:r,dataFormat:i}=s;$(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],c=o.shape[1],l=o.shape[2],u=o.shape[3],d=c*r,h=l*r,f=u/(r*r),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*h*f);let v=0;for(let g=0;g<a;++g)for(let b=0;b<d;++b){const x=Math.floor(b/r),y=b%r;for(let w=0;w<h;++w){const C=Math.floor(w/r),_=w%r,S=(y*r+_)*f;for(let I=0;I<f;++I){const O=I+S+u*(C+l*(x+c*g));m[v++]=p[O]}}}return n.makeTensorInfo([a,d,h,f],o.dtype,m)}const Zse={kernelName:b0,backendName:"cpu",kernelFunc:Jse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:c,dimRoundingMode:l}=s;Ne([o,r],"depthwiseConv2DNative");const u=De(o.shape),d=De(r.shape);let h=c;h==null&&(h=[1,1]),$(In(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const f=gn(o.shape,r.shape,i,h,a,l,!0),{filterHeight:p,filterWidth:m,dilationHeight:v,dilationWidth:g,padInfo:b}=f,x=b.left,y=b.top,w=f.outChannels/f.inChannels,C=new mn(f.outShape,o.dtype),_=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,I=C.values;for(let E=0;E<f.batchSize;++E){const O=E*u[0],A=E*C.strides[0];for(let P=0;P<f.outHeight;++P){const z=A+P*C.strides[1],G=P*f.strideHeight-y;for(let M=0;M<p;++M){const R=G+M*v;if(R<0||R>=f.inHeight)continue;const D=M*d[0],j=O+R*u[1];for(let ne=0;ne<f.outWidth;++ne){const re=z+ne*C.strides[2],de=ne*f.strideWidth-x;for(let he=0;he<m;++he){const ye=de+he*g;if(ye<0||ye>=f.inWidth)continue;const fe=D+he*d[1],ge=j+ye*f.inChannels;let q=re,ue=fe;for(let le=0;le<f.inChannels;++le){const pe=_[ge+le];for(let _e=0;_e<w;++_e)I[q+_e]+=pe*S[ue+_e];q+=w,ue+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const eoe={kernelName:Fp,backendName:"cpu",kernelFunc:IO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,dilations:a,pad:c,dimRoundingMode:l,filterShape:u}=s;Ne([o,r],"depthwiseConv2dNativeBackpropFilter");const d=gn(o.shape,u,i,a,c,l,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,v=new mn(d.filterShape,"float32"),g=d.padInfo.left,b=d.padInfo.top,x=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,w=new mn(o.shape,o.dtype,y),C=n.data.get(r.dataId).values,_=new mn(r.shape,r.dtype,C);for(let S=0;S<p;++S){const I=Math.max(0,Math.ceil((b-S)/h)),E=Math.min(d.outHeight,(d.inHeight+b-S)/h);for(let O=0;O<m;++O){const A=Math.max(0,Math.ceil((g-O)/f)),P=Math.min(d.outWidth,(d.inWidth+g-O)/f);for(let z=0;z<d.outChannels;++z){const G=Math.trunc(z/x),M=z%x;let R=0;for(let D=0;D<d.batchSize;++D)for(let j=I;j<E;++j){const ne=S+j*h-b;for(let re=A;re<P;++re){const de=O+re*f-g;R+=w.get(D,ne,de,G)*_.get(D,j,re,z)}}v.set(R,S,O,G,M)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const noe={kernelName:y0,backendName:"cpu",kernelFunc:toe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function soe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{strides:i,dilations:a,pad:c,dimRoundingMode:l,inputShape:u}=s;Ne([o,r],"depthwiseConv2DNativeBackpropInput");const d=De(o.shape),h=De(r.shape),f=gn(u,r.shape,i,a,c,l,!0),p=new mn(f.inShape,"float32"),m=p.values,[v,g,b]=p.strides,x=n.data.get(o.dataId).values,[y,w,C]=d,_=n.data.get(r.dataId).values,[S,I,E]=h,{batchSize:O,filterHeight:A,filterWidth:P,inChannels:z,inHeight:G,inWidth:M,outChannels:R,outHeight:D,outWidth:j,strideHeight:ne,strideWidth:re}=f,de=A-1-f.padInfo.top,he=P-1-f.padInfo.left,ye=R/z;for(let fe=0;fe<O;++fe)for(let ge=0;ge<z;++ge)for(let q=0;q<G;++q){const ue=q-de,le=Math.max(0,Math.ceil(ue/ne)),pe=Math.min(D,(A+ue)/ne);for(let _e=0;_e<M;++_e){const Re=_e-he,N=Math.max(0,Math.ceil(Re/re)),L=Math.min(j,(P+Re)/re);let K=0;for(let oe=le;oe<pe;++oe){const se=oe*ne-ue;for(let k=N;k<L;++k){const T=k*re-Re,U=y*fe+w*oe+C*k,Y=S*(A-1-se)+I*(P-1-T)+E*ge;for(let ee=0;ee<ye;++ee){const ve=ge*ye+ee,B=x[U+ve],Z=_[Y+ee];K+=B*Z}}}m[v*fe+g*q+b*_e+ge]=K}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const ooe={kernelName:x0,backendName:"cpu",kernelFunc:soe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function roe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=ce(s.shape),r=n.data.get(s.dataId).values,i=Ke([o,o],s.dtype),a=i.values;for(let l=0;l<r.length;l++)a[l*o+l]=r[l];const c=[...s.shape,...s.shape];return n.makeTensorInfo(c,i.dtype,i.values)}const ioe={kernelName:GT,backendName:"cpu",kernelFunc:roe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aoe={kernelName:Pp,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o}=t,{strides:r,pad:i,dilations:a}=n,c=e,l=c.data.get(s.dataId).values,u=s.shape.length,d=c.data.get(o.dataId).values,h=o.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:v,outHeight:g,outWidth:b,padInfo:x,strideHeight:y,strideWidth:w,filterHeight:C,filterWidth:_,dilationHeight:S,dilationWidth:I,outShape:E}=Sd(s.shape,o.shape,r,i,"NHWC",a),O=ce(E),A=E.length,P=Ft(s.dtype,O);for(let G=0;G<f;++G)for(let M=0;M<g;++M){const R=M*y-x.top;for(let D=0;D<b;++D){const j=D*w-x.left;for(let ne=0;ne<v;++ne){let re=Number.MIN_SAFE_INTEGER;for(let he=0;he<C;++he){const ye=R+he*S;if(ye>=0&&ye<p)for(let fe=0;fe<_;++fe){const ge=j+fe*I;if(ge>=0&&ge<m){const q=Ro([G,ye,ge,ne],u,De(s.shape)),ue=Ro([he,fe,ne],h,De(o.shape)),le=l[q]+d[ue];le>re&&(re=le)}}}const de=Ro([G,M,D,ne],A,De(E));P[de]=re}}}return{dataId:c.write(xa(P,s.dtype),E,s.dtype),shape:E,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const coe={kernelName:lb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o,dy:r}=t,{strides:i,pad:a,dilations:c}=n,l=e,u=no(s.shape,l.data.get(s.dataId).values),d=no(o.shape,l.data.get(o.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:v,outWidth:g,padInfo:b,strideHeight:x,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:S,outShape:I}=Sd(s.shape,o.shape,i,a,"NHWC",c);$(r.rank===I.length,()=>`Error in ${lb}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const E=no(I,l.data.get(r.dataId).values),O=UT(o.shape,o.dtype);for(let P=0;P<h;++P)for(let z=0;z<v;++z){const G=z*x-b.top;for(let M=0;M<g;++M){const R=M*y-b.left;for(let D=0;D<m;++D){let j=Number.MIN_SAFE_INTEGER,ne=0,re=0;for(let de=0;de<w;++de){const he=G+de*_;if(he>=0&&he<f)for(let ye=0;ye<C;++ye){const fe=R+ye*S;if(fe>=0&&fe<p){const ge=u[P][he][fe][D]+d[de][ye][D];ge>j&&(j=ge,ne=de,re=ye)}}}O[ne][re][D]+=E[P][z][M][D]}}}return{dataId:l.write(xa(O,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const loe={kernelName:cb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o,dy:r}=t,{strides:i,pad:a,dilations:c}=n,l=e,u=no(s.shape,l.data.get(s.dataId).values),d=no(o.shape,l.data.get(o.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:v,outWidth:g,padInfo:b,strideHeight:x,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:S,outShape:I}=Sd(s.shape,o.shape,i,a,"NHWC",c);$(r.rank===I.length,()=>`Error in ${cb}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const E=no(I,l.data.get(r.dataId).values),O=UT(s.shape,s.dtype);for(let P=0;P<h;++P)for(let z=0;z<v;++z){const G=z*x-b.top;for(let M=0;M<g;++M){const R=M*y-b.left;for(let D=0;D<m;++D){let j=Number.MIN_SAFE_INTEGER,ne=G<0?0:G,re=R<0?0:R;for(let de=0;de<w;++de){const he=G+de*_;if(he>=0&&he<f)for(let ye=0;ye<C;++ye){const fe=R+ye*S;if(fe>=0&&fe<p){const ge=u[P][he][fe][D]+d[de][ye][D];ge>j&&(j=ge,ne=he,re=fe)}}}O[P][ne][re][D]+=E[P][z][M][D]}}}return{dataId:l.write(xa(O,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uoe(t){const{inputs:e,backend:n,attrs:s}=t,{image:o}=e,{canvas:r,options:i}=s,{contextOptions:a,imageOptions:c}=i||{},l=(c==null?void 0:c.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=r.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,v=o.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let x=0;x<h*f;++x){const y=[0,0,0,255*l];for(let C=0;C<p;C++){const _=m[x*p+C];if(o.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(o.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);p===1?(y[0]=_*v,y[1]=_*v,y[2]=_*v):y[C]=_*v}const w=x*4;g[w+0]=Math.round(y[0]),g[w+1]=Math.round(y[1]),g[w+2]=Math.round(y[2]),g[w+3]=Math.round(y[3])}r.width=f,r.height=h;const b=new ImageData(g,f,h);return d.putImageData(b,0,0),o}const doe={kernelName:Eq,backendName:"cpu",kernelFunc:uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vd(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ne(o,"sum");let a;o.dtype==="bool"?a=Zr({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=zo({inputs:{x:o},backend:n});const c=a.shape.length,l=qe(r,a.shape),u=Dt(l,c);let d=l,h=a;u!=null&&(h=Yn({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Bt(d.length,c)),vn("sum",d,h.shape.length);const[f,p]=dn(h.shape,d),m=cs(h.dtype,"int32");let v=Mf(n,f,m);const g=ce(p),b=n.data.get(v.dataId).values,x=n.data.get(h.dataId).values;for(let y=0;y<b.length;++y){const w=y*g;let C=0;for(let _=0;_<g;++_)C+=x[w+_];b[y]=C}if(i){const y=Wt(v.shape,l),w=v;v=Ct({inputs:{x:v},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),v}const hoe={kernelName:gm,backendName:"cpu",kernelFunc:Vd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function foe(t){const{inputs:e,backend:n,attrs:s}=t,{equation:o}=s,r=e,{allDims:i,summedDims:a,idDims:c}=Qx(o,r.length);Jx(i.length,c,r);const{path:l,steps:u}=Zx(a,c),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const v of u[m]){const{permutationIndices:g,expandDims:b}=Yx(f,c[v]);let x;e1(g)?x=r[v]:(x=Yn({inputs:{x:r[v]},backend:n,attrs:{perm:g}}),p.push(x));const y=x.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);at(x.shape,y)||(x=Ct({inputs:{x},backend:n,attrs:{shape:y}}),p.push(x)),h===null?h=x:(h=Km({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(l[m]>=0&&(h=Vd({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const poe={kernelName:w0,backendName:"cpu",kernelFunc:foe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(t){const{inputs:e,backend:n}=t,{dy:s,y:o}=e;Ne([s,o],"eluGrad");const r=new Float32Array(ce(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values;for(let c=0;c<i.length;++c){const l=i[c];l>=0?r[c]=a[c]:r[c]=a[c]*(l+1)}return n.makeTensorInfo(o.shape,"float32",r)}const goe={kernelName:C0,backendName:"cpu",kernelFunc:moe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const voe=zx,boe=Wx,yoe=Gx,xoe=Hx,woe=Kx,Coe=qx,_oe=dt(zu,t=>{const e=Math.sign(t),n=Math.abs(t),s=1/(1+voe*n);return e*(1-((((Coe*s+woe)*s+xoe)*s+yoe)*s+boe)*s*Math.exp(-n*n))}),Soe={kernelName:zu,backendName:"cpu",kernelFunc:_oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t){const{inputs:e,backend:n,attrs:s}=t,{input:o}=e,{dim:r}=s,i=o.shape.length,a=o.shape.slice();let c=r;return r<0&&($(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),c=i+r+1),a.splice(c,0,1),Ct({inputs:{x:o},backend:n,attrs:{shape:a}})}const Ioe={kernelName:Bp,backendName:"cpu",kernelFunc:Uf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe=Ut((t,e)=>t/e),R1=en(Uu,Eoe),Lb={kernelName:Uu,backendName:"cpu",kernelFunc:R1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(t,e,n){const s=t.shape,o=s[0],r=s[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,c=i.complexTensorInfos.imag,l=[o,r],u=ce(l),d=wn("float32",u),h=wn("float32",u);for(let v=0;v<o;v++){const g=ha({inputs:{x:a},backend:n,attrs:{begin:[v,0],size:[1,r]}}),b=ha({inputs:{x:c},backend:n,attrs:{begin:[v,0],size:[1,r]}}),x=ns({inputs:{real:g,imag:b},backend:n}),{real:y,imag:w}=koe(x,e,n),C=hr(y,w);for(let _=0;_<r;_++){const S=Xx(C,_);d[v*r+_]=S.real,h[v*r+_]=S.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x)}const f=n.makeTensorInfo(l,"float32",d),p=n.makeTensorInfo(l,"float32",h),m=ns({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function koe(t,e,n){const s=ce(t.shape),o=n.data.get(t.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if($oe(s)){const a=Fb(r,i,s,e,n),c=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(c,"float32",a.real),u=n.makeTensorInfo(c,"float32",a.imag),d=n.makeTensorInfo([],"float32",ci(s,"float32")),h=zo({inputs:{x:d},backend:n}),f=Lb.kernelFunc({inputs:{a:l,b:d},backend:n}),p=Lb.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(f.dataId).values,v=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:v}}return a}else{const a=hr(r,i),c=Toe(a,s,e);return BA(c)}}function $oe(t){return(t&t-1)===0}function Fb(t,e,n,s,o){if(n===1)return{real:t,imag:e};const r=hr(t,e),i=n/2,a=VA(r),c=a.real,l=a.imag,u=[c.length],d=o.makeTensorInfo(u,"float32",c),h=o.makeTensorInfo(u,"float32",l),f=ns({inputs:{real:d,imag:h},backend:o}),p=UA(r),m=p.real,v=p.imag,g=[m.length],b=o.makeTensorInfo(g,"float32",m),x=o.makeTensorInfo(g,"float32",v),y=ns({inputs:{real:b,imag:x},backend:o}),w=Fb(c,l,i,s,o),C=w.real,_=w.imag,S=[C.length],I=o.makeTensorInfo(S,"float32",C),E=o.makeTensorInfo(S,"float32",_),O=ns({inputs:{real:I,imag:E},backend:o}),A=Fb(m,v,i,s,o),P=A.real,z=A.imag,G=[P.length],M=o.makeTensorInfo(G,"float32",P),R=o.makeTensorInfo(G,"float32",z),D=ns({inputs:{real:M,imag:R},backend:o}),j=zA(n,s),ne=[j.real.length],re=o.makeTensorInfo(ne,"float32",j.real),de=o.makeTensorInfo(ne,"float32",j.imag),he=ns({inputs:{real:re,imag:de},backend:o}),ye=Km({inputs:{a:he,b:D},backend:o}),fe=Lc({inputs:{a:O,b:ye},backend:o}),ge=N1({inputs:{a:O,b:ye},backend:o}),q=da({inputs:{input:fe},backend:o}),ue=da({inputs:{input:ge},backend:o}),le=Fc({inputs:{input:fe},backend:o}),pe=Fc({inputs:{input:ge},backend:o}),_e=Pc({inputs:[q,ue],backend:o,attrs:{axis:0}}),Re=Pc({inputs:[le,pe],backend:o,attrs:{axis:0}}),N=o.data.get(_e.dataId).values,L=o.data.get(Re.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(re),o.disposeIntermediateTensorInfo(de),o.disposeIntermediateTensorInfo(he),o.disposeIntermediateTensorInfo(ye),o.disposeIntermediateTensorInfo(fe),o.disposeIntermediateTensorInfo(ge),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(_e),o.disposeIntermediateTensorInfo(Re),{real:N,imag:L}}function Toe(t,e,n){const s=new Float32Array(e*2);for(let o=0;o<e;o++){let r=0,i=0;for(let a=0;a<e;a++){const c=WA(o*a,e,n),l=Xx(t,a);r+=l.real*c.real-l.imag*c.imag,i+=l.real*c.imag+l.imag*c.real}n&&(r/=e,i/=e),jA(s,r,i,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(t){const{inputs:e,backend:n}=t,{input:s}=e,o=ce(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=Ct({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),c=EO(a,!1,n),l=Ct({inputs:{x:c},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),l}const Aoe={kernelName:_0,backendName:"cpu",kernelFunc:Noe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1(t){const{backend:e,attrs:n}=t,{shape:s,value:o,dtype:r}=n,i=r||Hc(o),a=Ft(i,ce(s));return Doe(a,o,i),e.makeTensorInfo(s,i,a)}const Roe={kernelName:S0,backendName:"cpu",kernelFunc:D1};function Doe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ooe={kernelName:I0,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,o=n,r=wn(s.dtype,ce(s.shape)),[i,a,c,l]=s.shape,u=o.data.get(s.dataId).values;for(let h=0;h<i;h++){const f=h*c*a*l;for(let p=0;p<a;p++){const m=p*(c*l);for(let v=0;v<c;v++){const g=v*l;for(let b=0;b<l;b++){const x=Math.round(c-v-1),y=f+m+g+b;let w=u[y];if(x>=0&&x<c){const C=x*l,_=f+m+C+b;w=u[_]}r[y]=w}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Loe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=SO({inputs:{x:o,filter:r},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const v=m;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const g=Ct({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Lc({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Lc({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=Ct({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=Vf(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=Vf(n,m,f,a,p);n.disposeIntermediateTensorInfo(v)}return m}const Foe={kernelName:bf,backendName:"cpu",kernelFunc:Loe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Poe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=IO({inputs:{x:o,filter:r},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const v=m;m=Lc({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=m;m=Vf(n,m,f,a,p),n.disposeIntermediateTensorInfo(v)}return m}const Moe={kernelName:uN,backendName:"cpu",kernelFunc:Poe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Boe(t){const{inputs:e,backend:n}=t,{params:s,indices:o}=e,r=ce(s.shape),i=o.shape,a=i[i.length-1],[c,l,u,d]=Rx(s,o);if(l===0)return n.makeTensorInfo(c,s.dtype,[]);const h=n.data.get(o.dataId).values,f=n.bufferSync(s),p=FD(h,f,s.dtype,l,a,u,d,s.shape,r);return n.makeTensorInfo(c,s.dtype,p.values)}const Voe={kernelName:HT,backendName:"cpu",kernelFunc:Boe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uoe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,indices:r}=e,{axis:i,batchDims:a}=s;Ne([o,r],"gatherV2");const c=qe(i,o.shape)[0],l=n.data.get(r.dataId).values,u=o.shape[c];for(let y=0;y<l.length;++y){const w=l[y];$(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const h=ce(r.shape),f=n1(o,r,c,d),p=Ct({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=Ct({inputs:{x:r},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),v=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),b=n.bufferSync(p),x=PD(b,g,v);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,x.dtype,x.values)}const joe={kernelName:Up,backendName:"cpu",kernelFunc:Uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zoe(t){const{inputs:e,backend:n}=t,{input:s}=e,o=ce(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=Ct({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),c=EO(a,!0,n),l=Ct({inputs:{x:c},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),l}const Woe={kernelName:E0,backendName:"cpu",kernelFunc:zoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Goe=dt(Qu,t=>Number.isFinite(t)?1:0,"bool"),Hoe={kernelName:Qu,backendName:"cpu",kernelFunc:Goe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Koe=dt(Yu,t=>Math.abs(t)===1/0?1:0,"bool"),qoe={kernelName:Yu,backendName:"cpu",kernelFunc:Koe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xoe=dt(Ju,t=>Number.isNaN(t)?1:0,"bool"),Qoe={kernelName:Ju,backendName:"cpu",kernelFunc:Xoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yoe(t){const{backend:e,attrs:n}=t,{start:s,stop:o,num:r}=n,i=jD(s,o,r);return e.makeTensorInfo([i.length],"float32",i)}const Joe={kernelName:KT,backendName:"cpu",kernelFunc:Yoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zoe=dt(ed,t=>Math.log1p(t)),ere={kernelName:ed,backendName:"cpu",kernelFunc:Zoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tre=Ut((t,e)=>t&&e),nre=en(Hp,tre,null,"bool"),sre={kernelName:Hp,backendName:"cpu",kernelFunc:nre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ore=dt(Kp,t=>t?0:1,"bool"),rre={kernelName:Kp,backendName:"cpu",kernelFunc:ore};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ire=Ut((t,e)=>t||e),are=en(qp,ire,null,"bool"),cre={kernelName:qp,backendName:"cpu",kernelFunc:are};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{depthRadius:r,bias:i,alpha:a,beta:c}=s;Ne(o,"LRN");const l=o.shape[3],u=l-1,d=n.data.get(o.dataId).values,h=ce(o.shape),f=new Float32Array(h);function p(m){const v=m%l;let g=m-v+Math.max(0,v-r);const b=m-v+Math.min(v+r,u);let x=0;for(;g<=b;g++){const y=d[g];x+=y*y}return x}for(let m=0;m<h;m++){const v=p(m),g=d[m]*Math.pow(i+a*v,-c);f[m]=g}return n.makeTensorInfo(o.shape,o.dtype,f)}const ure={kernelName:Xp,backendName:"cpu",kernelFunc:lre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,y:r,dy:i}=e,{depthRadius:a,bias:c,alpha:l,beta:u}=s;Ne(i,"LRNGrad");const d=ce(i.shape),h=i.shape[3],f=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(r.dataId).values,v=new Float32Array(d),g=d;for(let b=0;b<g;b++){const x=b%h,y=b-x+Math.max(0,x-a),w=b-x+Math.min(h,x+a+1);let C=0;for(let _=y;_<w;_++)C+=Math.pow(p[_],2);C=l*C+c;for(let _=y;_<w;_++){let S=-2*l*u*p[_]*m[b]/C;b===_&&(S+=Math.pow(C,-u)),S*=f[b],v[_]+=S}}return n.makeTensorInfo(i.shape,o.dtype,v)}const hre={kernelName:$0,backendName:"cpu",kernelFunc:dre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reductionIndices:r,keepDims:i}=s,a=n;let c=o.shape;const l=c.length,u=qe(r,c);let d=u;const h=Dt(d,l);let f=a.data.get(o.dataId).values;if(h!=null){const y=new Array(l);for(let w=0;w<y.length;w++)y[w]=c[h[w]];f=$1(f,c,o.dtype,h,y),d=Bt(d.length,l),c=y}Ne(o,"max"),vn("max",d,l);const[p,m]=dn(c,d),v=ce(m),g=WD(f,v,p,o.dtype),b=a.write(g,p,o.dtype);let x=p;return i&&(x=Wt(p,u)),{dataId:b,shape:x,dtype:o.dtype}}const fre={kernelName:Qp,backendName:"cpu",kernelFunc:kO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Ne(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:c}=s,l=1;$(In(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const u=Ws(o.shape,r,i,l,a,c);let d;if(u.filterWidth===1&&u.filterHeight===1&&at(u.inShape,u.outShape))d=zo({inputs:{x:o},backend:n});else{const h=n.data.get(o.dataId).values,f=De(o.shape),p=A1(h,o.shape,o.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const mre={kernelName:Yp,backendName:"cpu",kernelFunc:pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:c,dataFormat:l}=s;Ne(o,"maxPool3d");const u=br(o.shape,r,i,1,a,c,l),d=n.data.get(o.dataId).values,h=_O(d,o.shape,o.dtype,De(o.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const vre={kernelName:Jp,backendName:"cpu",kernelFunc:gre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,{filterSize:i,strides:a,pad:c,dimRoundingMode:l}=s;Ne([o,r],"maxPool3DGrad");const u=br(r.shape,i,a,1,c,l),d=n.bufferSync(r),h=ise(d,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,v=u.dilationDepth,g=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterDepth,y=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=x-1-u.padInfo.front,_=w-1-u.padInfo.left,S=y-1-u.padInfo.top,I=Ke(r.shape,"float32"),E=n.bufferSync(o);for(let O=0;O<u.batchSize;++O)for(let A=0;A<u.inChannels;++A)for(let P=0;P<u.inDepth;++P)for(let z=0;z<u.inHeight;++z)for(let G=0;G<u.inWidth;++G){const M=P-C,R=z-S,D=G-_;let j=0;for(let ne=0;ne<x;ne+=v){const re=(M+ne)/f;if(!(re<0||re>=u.outDepth||Math.floor(re)!==re))for(let de=0;de<y;de+=g){const he=(R+de)/p;if(!(he<0||he>=u.outHeight||Math.floor(he)!==he))for(let ye=0;ye<w;ye+=b){const fe=(D+ye)/m;if(fe<0||fe>=u.outWidth||Math.floor(fe)!==fe)continue;const ge=x*y*w-1-h.get(O,re,he,fe,A),q=ne*y*w+de*w+ye,ue=ge===q?1:0;if(ue===0)continue;const le=E.get(O,re,he,fe,A);j+=le*ue}}}I.set(j,O,P,z,G,A)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const yre={kernelName:N0,backendName:"cpu",kernelFunc:bre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r,output:i}=e,a=r;Ne([r,i],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:d}=s,h=Ws(a.shape,c,l,1,u,d),f=n.data.get(a.dataId).values,p=Ke(h.outShape,a.dtype,CO(f,a.shape,a.dtype,h).values),m=h.strideHeight,v=h.strideWidth,g=h.dilationHeight,b=h.dilationWidth,x=h.effectiveFilterHeight,y=h.effectiveFilterWidth,w=y-1-h.padInfo.left,C=x-1-h.padInfo.top,_=Ke(a.shape,"float32"),S=n.data.get(o.dataId).values,I=Ke(o.shape,"float32",S);for(let E=0;E<h.batchSize;++E)for(let O=0;O<h.inChannels;++O)for(let A=0;A<h.inHeight;++A)for(let P=0;P<h.inWidth;++P){const z=A-C,G=P-w;let M=0;for(let R=0;R<x;R+=g){const D=(z+R)/m;if(!(D<0||D>=h.outHeight||Math.floor(D)!==D))for(let j=0;j<y;j+=b){const ne=(G+j)/v;if(ne<0||ne>=h.outWidth||Math.floor(ne)!==ne)continue;const re=x*y-1-p.get(E,D,ne,O),de=R*y+j,he=re===de?1:0;if(he===0)continue;const ye=I.get(E,D,ne,O);M+=ye*he}}_.set(M,E,A,P,O)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const wre={kernelName:T0,backendName:"cpu",kernelFunc:xre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cre(t,e,n,s,o){const r=De(e),i=A1(t,e,n,r,o,"max"),a=CO(t,e,n,o,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _re={kernelName:qT,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=e,c=n;Ne(s,"MaxPoolWithArgmax");const l=c.data.get(s.dataId).values,u=Ws(s.shape,o,r,[1,1],i),[d,h]=Cre(l,s.shape,s.dtype,a,u),f=c.write(d,u.outShape,s.dtype),p=c.write(h,u.outShape,s.dtype);return[{dataId:f,shape:u.outShape,dtype:s.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=qe(r,o.shape),l=dn(o.shape,a)[1],u=ce(l),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=Zr({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=R1({inputs:{a:f,b:h},backend:n});d.push(p);const m=Vd({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const Ire={kernelName:Zp,backendName:"cpu",kernelFunc:Sre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ere(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ne(o,"min");const a=qe(r,o.shape);let c=a;const l=Dt(c,o.shape.length);let u=o;l!=null&&(u=Yn({inputs:{x:o},backend:n,attrs:{perm:l}}),c=Bt(c.length,o.shape.length)),vn("min",c,u.shape.length);const[d,h]=dn(u.shape,c),f=ce(h),p=Cn(ce(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];(Number.isNaN(w)||w<x)&&(x=w)}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Wt(d,a),b=Ct({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const kre={kernelName:em,backendName:"cpu",kernelFunc:Ere};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $re(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,mode:i}=s;Ne(o,"mirrorPad");const a=r.map((x,y)=>x[0]+o.shape[y]+x[1]),c=r.map(x=>x[0]),l=r.map((x,y)=>x[0]+o.shape[y]),u=i==="reflect"?0:1,d=n.data.get(o.dataId).values,h=o.shape.length,f=De(o.shape),p=ce(a),m=a.length,v=De(a),g=wn(o.dtype,p);for(let x=0;x<p;x++){let y=Kc(x,m,v);for(let C=0;C<m;C++)y[C]<c[C]?y[C]=c[C]*2-y[C]-u:y[C]>=l[C]&&(y[C]=(l[C]-1)*2-y[C]+u);y=y.map((C,_)=>C-c[_]);const w=Ro(y,h,f);g[x]=d[w]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const Tre={kernelName:tm,backendName:"cpu",kernelFunc:$re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nre=Ut((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Are=en(sd,Nre),Rre={kernelName:sd,backendName:"cpu",kernelFunc:Are};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $O(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{dim:r}=s,i=o.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const c=qe([a],o.shape),l=kO({inputs:{x:o},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),u=Wt(l.shape,c),d=Ct({inputs:{x:l},backend:n,attrs:{shape:u}}),h=N1({inputs:{a:o,b:d},backend:n}),f=RD({inputs:{x:h},backend:n}),p=Vd({inputs:{x:f},backend:n,attrs:{axis:c,keepDims:!1}}),m=Ct({inputs:{x:p},backend:n,attrs:{shape:u}}),v=R1({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}const Dre={kernelName:ym,backendName:"cpu",kernelFunc:$O};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ore(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{numSamples:r,seed:i,normalized:a}=s;Ne(o,"multinomial");const c=a?o:$O({inputs:{logits:o},backend:n,attrs:{dim:-1}}),l=c.shape[0],u=c.shape[1],d=n.data.get(c.dataId).values,h=[l,r],f=Cn(ce(h),"int32");for(let p=0;p<l;++p){const m=p*u,v=new Float32Array(u-1);v[0]=d[m];for(let x=1;x<v.length;++x)v[x]=v[x-1]+d[m+x];const g=vx.alea(i.toString()),b=p*r;for(let x=0;x<r;++x){const y=g();f[b+x]=v.length;for(let w=0;w<v.length;w++)if(y<v[w]){f[b+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(h,"int32",f)}const Lre={kernelName:XT,backendName:"cpu",kernelFunc:Ore};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fre=Ex;function Pre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c}=s;Ne(o,"NonMaxSuppression");const l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,{selectedIndices:d}=Fre(l,u,i,a,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Mre={kernelName:A0,backendName:"cpu",kernelFunc:Pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=kx;function Vre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c,padToMaxOutputSize:l}=s;Ne(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:h,validOutputs:f}=Bre(u,d,i,a,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Ure={kernelName:R0,backendName:"cpu",kernelFunc:Vre};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jre=$x;function zre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c,softNmsSigma:l}=s;Ne(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,h=i,f=a,p=c,m=l,{selectedIndices:v,selectedScores:g}=jre(u,d,h,f,p,m);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Wre={kernelName:D0,backendName:"cpu",kernelFunc:zre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gre(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o}=e,{dtype:r,depth:i,onValue:a,offValue:c}=s;Ne(o,"oneHot");const l=ce(o.shape),u=new Float32Array(l*i);u.fill(c);const d=n.data.get(o.dataId).values;for(let h=0;h<l;++h)d[h]>=0&&d[h]<i&&(u[h*i+d[h]]=a);return n.makeTensorInfo([...o.shape,i],r,u)}const Hre={kernelName:rm,backendName:"cpu",kernelFunc:Gre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=da({inputs:{input:s},backend:n}),r=jf({inputs:{x:o},backend:n}),i=Fc({inputs:{input:s},backend:n}),a=jf({inputs:{x:i},backend:n}),c=ns({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),c}else return D1({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const Kre={kernelName:Cm,backendName:"cpu",kernelFunc:jf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TO(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=da({inputs:{input:s},backend:n}),r=TO({inputs:{x:o},backend:n}),i=Fc({inputs:{input:s},backend:n}),a=jf({inputs:{x:i},backend:n}),c=ns({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),c}else return D1({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const qre={kernelName:om,backendName:"cpu",kernelFunc:TO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NO(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s;if(e.length===1)return Uf({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{e0(r,u.shape,"All tensors passed to stack must have matching shapes"),$(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=e.map(u=>{const d=Uf({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),l=Pc({inputs:c,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),l}const Xre={kernelName:im,backendName:"cpu",kernelFunc:NO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,constantValue:i}=s;Ne(o,"pad");const a=r.map((b,x)=>b[0]+o.shape[x]+b[1]),c=r.map(b=>b[0]),l=n.data.get(o.dataId).values,u=ce(o.shape),d=o.shape.length,h=De(o.shape),f=ce(a),p=a.length,m=De(a),v=wn(o.dtype,f);i!==0&&v.fill(i);for(let b=0;b<u;b++){const y=Kc(b,d,h).map((C,_)=>C+c[_]),w=Ro(y,p,m);v[w]=l[b]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const AO={kernelName:am,backendName:"cpu",kernelFunc:Qre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yre=Ut((t,e)=>Math.pow(t,e)),Jre=en(rd,Yre),Zre={kernelName:rd,backendName:"cpu",kernelFunc:Jre};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:o,paramsDenseValues:r,indices:i}=e,a=o.map(v=>n.data.get(v.dataId).values),c=o.map(v=>v.shape),l=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,[d,h,f]=QD(a,c,l,r.shape,r.dtype,u,i.shape),p=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),m=n.makeTensorInfo(f,r.dtype,h);return p.concat([m])}const tie={kernelName:QT,backendName:"cpu",kernelFunc:eie};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(t){const{inputs:e,backend:n}=t,{starts:s,limits:o,deltas:r}=e,i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,[l,u]=YD(i,s.shape,s.dtype,a,o.shape,c,r.shape),d=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([u.length],s.dtype,u);return[d,h]}const sie={kernelName:YT,backendName:"cpu",kernelFunc:nie};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oie(t){const{inputs:e,backend:n,attrs:s}=t,{shape:o,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:c}=s,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,d=n.data.get(i.dataId).values,h=a.map(v=>n.data.get(v.dataId).values),f=a.map(v=>v.shape),[p,m]=JD(l,o.shape,u,r.shape,r.dtype,d,i.shape,h,f,c);return n.makeTensorInfo(p,r.dtype,m)}const rie={kernelName:JT,backendName:"cpu",kernelFunc:oie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(t){const{backend:e,attrs:n}=t,{start:s,stop:o,dtype:r,step:i}=n,a=ZD(s,o,i,r);return e.makeTensorInfo([a.length],r,a)}const aie={kernelName:O0,backendName:"cpu",kernelFunc:iie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cie=dt(id,t=>1/t),lie={kernelName:id,backendName:"cpu",kernelFunc:cie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s;Ne(o,"resizeBilinear");const c=De(o.shape),[l,u]=a,[d,h,f,p]=o.shape,m=n.data.get(o.dataId).values,v=new Float32Array(ce([d,l,u,p])),g=[r&&l>1?h-1:h,r&&u>1?f-1:f],b=[r&&l>1?l-1:l,r&&u>1?u-1:u];let x=0;const y=g[0]/b[0],w=g[1]/b[1];for(let C=0;C<d;C++)for(let _=0;_<l;_++){let S;i?S=y*(_+.5)-.5:S=y*_;const I=Math.max(0,Math.floor(S)),E=S-I,O=Math.min(h-1,Math.ceil(S)),A=C*c[0]+I*c[1],P=C*c[0]+O*c[1];for(let z=0;z<u;z++){let G;i?G=w*(z+.5)-.5:G=w*z;const M=Math.max(0,Math.floor(G)),R=G-M,D=Math.min(f-1,Math.ceil(G)),j=A+M*c[2],ne=P+M*c[2],re=A+D*c[2],de=P+D*c[2];for(let he=0;he<p;he++){const ye=m[j+he],fe=m[ne+he],ge=m[re+he],q=m[de+he],ue=ye+(ge-ye)*R,le=fe+(q-fe)*R,pe=ue+(le-ue)*E;v[x++]=pe}}}return n.makeTensorInfo([d,l,u,p],"float32",v)}const die={kernelName:hm,backendName:"cpu",kernelFunc:uie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s;Ne([r,o],"resizeBilinearGrad");const a=De(o.shape),[c,l,u,d]=o.shape,[,h,f]=r.shape,p=new Float32Array(c*l*u*d),m=[i&&h>1?l-1:l,i&&f>1?u-1:u],v=[i&&h>1?h-1:h,i&&f>1?f-1:f],g=m[0]/v[0],b=m[1]/v[1],x=n.data.get(r.dataId).values;let y=0;for(let w=0;w<c;w++){const C=w*a[0];for(let _=0;_<h;_++){const S=_*g,I=Math.floor(S),E=Math.min(Math.ceil(S),l-1),O=C+I*a[1],A=C+E*a[1],P=S-I,z=1-P;for(let G=0;G<f;G++){const M=G*b,R=Math.floor(M),D=Math.min(Math.ceil(M),u-1),j=M-R,ne=1-j,re=O+R*a[2],de=O+D*a[2],he=A+R*a[2],ye=A+D*a[2],fe=z*ne,ge=z*j,q=P*ne,ue=P*j;for(let le=0;le<d;le++){const pe=x[y++];p[re+le]+=pe*fe,p[de+le]+=pe*ge,p[he+le]+=pe*q,p[ye+le]+=pe*ue}}}}return n.makeTensorInfo([c,u,l,d],"float32",p)}const fie={kernelName:P0,backendName:"cpu",kernelFunc:hie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s;Ne(o,"resizeNearestNeighbor");const c=De(o.shape),[l,u]=a,[d,h,f,p]=o.shape,m=n.data.get(o.dataId).values,v=new Float32Array(d*l*u*p),g=[r&&l>1?h-1:h,r&&u>1?f-1:f],b=[r&&l>1?l-1:l,r&&u>1?u-1:u],x=g[0]/b[0],y=g[1]/b[1];let w=0;for(let C=0;C<d;C++){const _=C*c[0];for(let S=0;S<l;S++){const I=i?x*(S+.5):x*S;let E=Math.min(h-1,r?Math.round(I):Math.floor(I));i&&(E=Math.max(0,E));const O=_+E*c[1];for(let A=0;A<u;A++){const P=i?y*(A+.5):y*A;let z=Math.min(f-1,r?Math.round(P):Math.floor(P));i&&(z=Math.max(0,z));const G=O+z*c[2];for(let M=0;M<p;M++){const R=m[G+M];v[w++]=R}}}}return n.makeTensorInfo([d,l,u,p],o.dtype,v)}const mie={kernelName:dm,backendName:"cpu",kernelFunc:pie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s;Ne([r,o],"resizeNearestNeighborGrad");const a=De(o.shape),c=De(r.shape),[l,u,d,h]=o.shape,[,f,p]=r.shape,m=new Float32Array(l*u*d*h),v=n.data.get(r.dataId).values,g=[i&&f>1?u-1:u,i&&p>1?d-1:d],b=[i&&f>1?f-1:f,i&&p>1?p-1:p],x=g[0]/b[0],y=g[1]/b[1],w=1/x,C=1/y,_=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let I=0;I<l;I++){const E=I*a[0];for(let O=0;O<u;O++){const A=E+O*a[1],P=Math.floor(O*w),z=Math.floor(P-_/2);for(let G=0;G<d;G++){const M=A+G*a[2],R=Math.floor(G*C),D=Math.floor(R-S/2);for(let j=0;j<h;j++){let ne=0;for(let re=0;re<_;re++){const de=re+z;if(de<0||de>=f)continue;const he=E+de*c[1],ye=de*x,fe=Math.min(u-1,i?Math.round(ye):Math.floor(ye));if(O===fe)for(let ge=0;ge<S;ge++){const q=ge+D;if(q<0||q>=p)continue;const ue=he+q*c[2],le=q*y,pe=Math.min(d-1,i?Math.round(le):Math.floor(le));G===pe&&(ne+=v[ue+j])}}m[M+j]=ne}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const vie={kernelName:F0,backendName:"cpu",kernelFunc:gie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bie(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dims:r}=s;Ne(o,"reverse");const i=o.shape.length,a=qe(r,o.shape);if(i===0)return zo({inputs:{x:o},backend:n});const c=new mn(o.shape,o.dtype),l=n.bufferSync(o);for(let u=0;u<c.size;u++){const d=c.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=o.shape[f]-1-h[f]),c.set(l.get(...h),...d)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}const yie={kernelName:fm,backendName:"cpu",kernelFunc:bie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xie={kernelName:W0,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:o,fillValue:r,center:i}=e,a=n,c=wn(s.dtype,ce(s.shape)),[l,u,d,h]=s.shape,[f,p]=Vx(i,u,d),m=255,v=Math.sin(o),g=Math.cos(o),b=a.data.get(s.dataId).values;for(let y=0;y<l;y++){const w=y*d*u*h;for(let C=0;C<u;C++){const _=C*(d*h);for(let S=0;S<d;S++){const I=S*h;for(let E=0;E<h;E++){const O=[l,C,S,E],A=O[2],P=O[1];let z=(A-f)*g-(P-p)*v,G=(A-f)*v+(P-p)*g;z=Math.round(z+f),G=Math.round(G+p);let M=r;if(typeof r!="number"&&(E===3?M=m:M=r[E]),z>=0&&z<d&&G>=0&&G<u){const D=G*(d*h),j=z*h,ne=w+D+j+E;M=b[ne]}const R=w+_+I+E;c[R]=M}}}}return{dataId:a.write(c,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wie=dt(ld,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Cie={kernelName:ld,backendName:"cpu",kernelFunc:wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ie(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o,updates:r}=e,{shape:i}=s,{sliceRank:a,numUpdates:c,sliceSize:l,strides:u,outputSize:d}=Sa(r,o,i),h=!0,f=n.bufferSync(o),p=n.bufferSync(r),m=Mi(f,p,i,d,l,c,a,u,0,h);return n.makeTensorInfo(i,m.dtype,m.values)}const Sie={kernelName:ZT,backendName:"cpu",kernelFunc:_ie};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(t,e){let n=0,s=t.length,o=0;for(;n<s;)o=Math.floor((n+s)/2),t[o]<e?n=o+1:s=o;return s}function Eie(t,e){let n=0,s=t.length,o=0;for(;n<s;)o=Math.floor((n+s)/2),t[o]<=e?n=o+1:s=o;return s}function kie(t,e,n,s,o,r){const i=Ft("int32",n*o);for(let a=0;a<n;++a){const c=t.slice(a*s,(a+1)*s),l=a*o;for(let u=0;u<o;++u)i[l+u]=r==="left"?Iie(c,e[u+l]):Eie(c,e[u+l])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ie(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:o,values:r}=e,{side:i}=s,a=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,l=kie(a,c,o.shape[0],o.shape[1],r.shape[1],i);return n.makeTensorInfo(r.shape,"int32",l)}const Tie={kernelName:tN,backendName:"cpu",kernelFunc:$ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(t){const{inputs:e,backend:n}=t,{condition:s,t:o,e:r}=e;Ne([s,o,r],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=cs(o.dtype,r.dtype),d=Cn(ce(o.shape),u);let h=0;const f=i===0||i>1||o.shape.length===1?1:ce(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=c[p]:d[h++]=l[p];return n.makeTensorInfo(o.shape,u,d)}const Aie={kernelName:pm,backendName:"cpu",kernelFunc:Nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rie=Om,Die=Lm,Oie=dt(dd,t=>t>=0?Die*t:Rie*(Math.exp(t)-1)),Lie={kernelName:dd,backendName:"cpu",kernelFunc:Oie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fie=dt(pd,t=>t<0?-1:t>0?1:0),Pie={kernelName:pd,backendName:"cpu",kernelFunc:Fie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mie=dt(hd,t=>Math.sin(t)),Bie={kernelName:hd,backendName:"cpu",kernelFunc:Mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vie=dt(fd,t=>Math.sinh(t)),Uie={kernelName:fd,backendName:"cpu",kernelFunc:Vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jie=11920928955078125e-23,QS=Math.log(jie)+2,zie=dt(gd,t=>{const e=t>-QS,n=t<QS,s=Math.exp(t);let o;return n?o=s:e?o=t:o=Math.log(1+s),o}),Wie={kernelName:gd,backendName:"cpu",kernelFunc:zie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gie(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,paddings:i}=s;Ne([o],"spaceToBatchND");const a=ce(r),c=[[0,0]];c.push(...i);for(let C=1+r.length;C<o.shape.length;++C)c.push([0,0]);const l=AO.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),u=Td(l.shape,r,a,!1),d=Nd(u.length,r.length,!1),h=Ad(l.shape,r,a,!1),m=Ct({inputs:{x:l},backend:n,attrs:{shape:u}}),b=Yn({inputs:{x:m},backend:n,attrs:{perm:d}}),w=Ct({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),w}const Hie={kernelName:vm,backendName:"cpu",kernelFunc:Gie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t){const{inputs:e,backend:n}=t,{indices:s,values:o,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values[0],[d,h,f,p,m]=sO(a,s.shape,s.dtype,c,o.dtype,l,u);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],o.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const qie={kernelName:nN,backendName:"cpu",kernelFunc:Kie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:o,newShape:r}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(s.dataId).values,c=Array.from(n.data.get(r.dataId).values),[l,u,d]=oO(a,s.shape,s.dtype,i,c);return[n.makeTensorInfo(u,s.dtype,l),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const Qie={kernelName:sN,backendName:"cpu",kernelFunc:Xie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yie(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,[l,u]=T1(i,s.shape,s.dtype,a,c,!0);return n.makeTensorInfo(u,s.dtype,l)}const Jie={kernelName:oN,backendName:"cpu",kernelFunc:Yie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zie(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,[l,u]=T1(i,s.shape,s.dtype,a,c);return n.makeTensorInfo(u,s.dtype,l)}const eae={kernelName:rN,backendName:"cpu",kernelFunc:Zie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tae(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:o,sparseValues:r,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:c,numUpdates:l,sliceSize:u,strides:d,outputSize:h}=Sa(r,o,a),f=!1,p=n.bufferSync(o);let m;switch(r.dtype){case"bool":{const v=n.bufferSync(r),g=!!n.data.get(i.dataId).values[0];m=Mi(p,v,a,h,u,l,c,d,g,f);break}case"float32":{const v=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=Mi(p,v,a,h,u,l,c,d,g,f);break}case"int32":{const v=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=Mi(p,v,a,h,u,l,c,d,g,f);break}case"string":{const v=n.bufferSync(r),g=qr(n.data.get(i.dataId).values[0]);m=Mi(p,v,a,h,u,l,c,d,g,f);break}default:throw new Error(`Unsupported type ${r.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const nae={kernelName:iN,backendName:"cpu",kernelFunc:tae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{numOrSizeSplits:r,axis:i}=s,a=qe(i,o.shape)[0],c=t1(o,r,a),l=new Array(o.shape.length).fill(0),u=o.shape.slice();return c.map(d=>{const h=[...u];h[a]=d;const f=ha({inputs:{x:o},backend:n,attrs:{begin:l,size:h}});return l[a]+=d,f})}const oae={kernelName:bm,backendName:"cpu",kernelFunc:sae};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rae={kernelName:M0,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,s=e;Ne(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let a=0;a<o.length;++a){const c=o[a];r[a]=c*c}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iae=dt(_d,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),aae={kernelName:_d,backendName:"cpu",kernelFunc:iae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,end:i,strides:a,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=s;Ne(o,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:v,isSimpleSlice:g,begin:b,end:x,strides:y}=Px(o.shape,r,i,a,c,l,u,d,h);let w;if(m)w=Ct({inputs:{x:o},backend:n,attrs:{shape:p}});else if(v||g){$(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=Ox(b,x,y),_=ha({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});w=Ct({inputs:{x:_},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(_)}else{const C=n.bufferSync(o),_=aO(f,C,y,b);w=n.makeTensorInfo(p,_.dtype,_.values)}return w}const lae={kernelName:V0,backendName:"cpu",kernelFunc:cae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t){const{inputs:e,backend:n,attrs:s}=t,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:c,preserveShortSequences:l}=s,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[p,m]=cO(h,f,o,r,i,a,c,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const dae={kernelName:aN,backendName:"cpu",kernelFunc:uae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:o}=s,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values[0],[l,u,d]=lO(a,c,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const fae={kernelName:cN,backendName:"cpu",kernelFunc:hae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pae(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:o}=s,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=uO(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const mae={kernelName:lN,backendName:"cpu",kernelFunc:pae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gae=dt(xd,t=>Math.tan(t)),vae={kernelName:xd,backendName:"cpu",kernelFunc:gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bae=dt(wd,t=>Math.tanh(t)),yae={kernelName:wd,backendName:"cpu",kernelFunc:bae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xae(t){const{inputs:e,backend:n}=t,{tensor:s,indices:o,updates:r}=e,{sliceRank:i,numUpdates:a,sliceSize:c,strides:l,outputSize:u}=Sa(r,o,s.shape),d=!1,h=n.bufferSync(o),f=n.bufferSync(r),p=n.bufferSync(s),m=Mi(h,f,s.shape,u,c,a,i,l,p,d);return n.makeTensorInfo(s.shape,m.dtype,m.values)}const wae={kernelName:eN,backendName:"cpu",kernelFunc:xae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reps:r}=s;Ne(o,"tile");const i=hO(n.bufferSync(o),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const _ae={kernelName:Cd,backendName:"cpu",kernelFunc:Cae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{k:r,sorted:i}=s;Ne(o,"topk");const a=n.data.get(o.dataId).values,[c,l]=pO(a,o.shape,o.dtype,r,i);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const Iae={kernelName:U0,backendName:"cpu",kernelFunc:Sae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eae(t){const{inputs:e,attrs:n,backend:s}=t,{image:o,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:c,outputShape:l}=n,[u,d,h,f]=o.shape,[p,m]=l??[d,h],v=[u,p,m,f],g=De(o.shape),b=g[0],x=g[1],y=g[2],w=De(v),C=w[0],_=w[1],S=w[2],I=wn(o.dtype,ce(v));I.fill(c);const E=s.data.get(o.dataId).values,O=s.data.get(r.dataId).values;for(let P=0;P<u;++P){const z=r.shape[0]===1?O:O.subarray(P*8,P*8+8);for(let G=0;G<p;++G)for(let M=0;M<m;++M)for(let R=0;R<f;++R){let D;const j=z[6]*M+z[7]*G+1;if(j===0)continue;const ne=(z[0]*M+z[1]*G+z[2])/j,re=(z[3]*M+z[4]*G+z[5])/j,de=YS(ne,h,a),he=YS(re,d,a);switch(i){case"nearest":D=Rae(E,d,h,b,x,y,P,he,de,R,c);break;case"bilinear":D=Dae(E,d,h,b,x,y,P,he,de,R,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ye=P*C+G*_+M*S+R;I[ye]=D}return s.makeTensorInfo(v,o.dtype,I)}return{dataId:s.write(I,v,o.dtype),shape:o.shape,dtype:o.dtype}}const kae={kernelName:j0,backendName:"cpu",kernelFunc:Eae};function YS(t,e,n){switch(n){case"reflect":return $ae(t,e);case"wrap":return Tae(t,e);case"nearest":return Aae(t,e);case"constant":default:return Nae(t)}}function $ae(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=2*e;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-e?n+s:-n-1}else if(n>e-1)if(e<=1)n=0;else{const s=2*e;n-=s*Math.trunc(n/s),n>=e&&(n=s-n-1)}return Zi(0,n,e-1)}function Tae(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=e-1;n+=e*(Math.trunc(-n/s)+1)}else if(n>e-1)if(e<=1)n=0;else{const s=e-1;n-=e*Math.trunc(n/s)}return Zi(0,n,e-1)}function Nae(t,e){return t}function Aae(t,e){return Zi(0,t,e-1)}function El(t,e,n,s,o,r,i,a,c,l,u){const d=i*s+a*o+c*r+l;return 0<=a&&a<e&&0<=c&&c<n?t[d]:u}function Rae(t,e,n,s,o,r,i,a,c,l,u){const d=Math.round(a),h=Math.round(c);return El(t,e,n,s,o,r,i,d,h,l,u)}function Dae(t,e,n,s,o,r,i,a,c,l,u){const d=Math.floor(a),h=Math.floor(c),f=d+1,p=h+1,m=(p-c)*El(t,e,n,s,o,r,i,d,h,l,u)+(c-h)*El(t,e,n,s,o,r,i,d,p,l,u),v=(p-c)*El(t,e,n,s,o,r,i,f,h,l,u)+(c-h)*El(t,e,n,s,o,r,i,f,p,l,u);return(f-a)*m+(a-d)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oae(t){const{inputs:e,attrs:n,backend:s}=t,{axis:o}=n,{x:r}=e;Ne(r,"unique");const i=s.data.get(r.dataId).values,{outputValues:a,outputShape:c,indices:l}=mO(i,o,r.shape,r.dtype);return[s.makeTensorInfo(c,r.dtype,a),s.makeTensorInfo([l.length],"int32",l)]}const Lae={kernelName:z0,backendName:"cpu",kernelFunc:Oae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fae(t){const{inputs:e,backend:n,attrs:s}=t,{value:o}=e;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o.shape.length,a=o.shape[r],c=new Array(i-1);let l=0;for(let f=0;f<i;f++)f!==r&&(c[l++]=o.shape[f]);const u=new Array(i).fill(0),d=o.shape.slice();d[r]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[r]=f;const p=ha({inputs:{x:o},backend:n,attrs:{begin:u,size:d}});h[f]=Ct({inputs:{x:p},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(p)}return h}const Pae={kernelName:xm,backendName:"cpu",kernelFunc:Fae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,segmentIds:r}=e,{numSegments:i}=s;Ne(o,"unsortedSegmentSum");const a=o.shape.length,c=r.shape.length,l=[],u=[],d=a-c;let h=r;for(let p=0;p<d;++p){const m=Uf({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,u.push(m)}for(let p=0;p<i;++p){const m=ci(p,"int32"),v=n.makeTensorInfo([],"int32",m),g=ND({inputs:{a:v,b:h},backend:n}),b=Zr({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=Km({inputs:{a:b,b:o},backend:n}),y=Vd({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});l.push(y),u.push(v),u.push(g),u.push(b),u.push(x),u.push(y)}const f=NO({inputs:l,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const Bae={kernelName:wm,backendName:"cpu",kernelFunc:Mae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vae=[One,pte,Fne,Mne,xte,Vne,jne,Wne,Hne,qne,Qne,Jne,ese,sse,rse,cse,use,hse,pse,Rne,gse,bse,xse,Cte,Cse,bte,Ste,Sse,mte,Ese,$se,Tse,Ase,Dse,Lse,Pse,Bse,Use,zse,Gse,Kse,Xse,Yse,Zse,eoe,noe,ooe,ioe,aoe,coe,loe,doe,poe,Ine,goe,Ite,Soe,Ete,Ioe,$te,Aoe,Roe,Ooe,Nte,Rte,Foe,Moe,Voe,joe,Ote,Fte,gte,Woe,kse,Hoe,qoe,Qoe,Ene,Mte,Vte,Joe,jte,ere,sre,rre,cre,ure,hre,fre,Wte,mre,vre,yre,wre,_re,Ire,kre,Hte,Tre,Rre,Lre,qte,Qte,Mre,Ure,Wre,Jte,Hre,qre,Xre,AO,Zre,$ne,tne,tie,sie,rie,aie,vte,Lb,lie,Tne,Nne,Ane,die,fie,mie,vie,yie,xie,Cie,lne,Sie,Tie,Aie,Lie,dne,Pie,Bie,Uie,hne,Dre,Wie,Hie,qie,Qie,Jie,eae,nae,oae,mne,rae,vne,yne,aae,lae,dae,fae,mae,_ne,hoe,vae,yae,wae,_ae,Iae,kae,Zte,Lae,Pae,Bae,Kre];for(const t of Vae)dN(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ri={},yh={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Uae(t,e){Ri[t]=e}function ho(t,e){if(!(t in Ri)||e!=null){const s=zae(t,e);if(s!==null)Ri[t]=s;else return console.log("Could not get context for WebGL version",t),null}const n=Ri[t];return n==null||n.isContextLost()?(delete Ri[t],ho(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ri[t])}function jae(t){if(!te().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zae(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??jae(t);return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete Ri[t]},!1),te().getBool("SOFTWARE_WEBGL_ENABLED")&&(yh.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",yh)||n.getContext("experimental-webgl",yh):n.getContext("webgl2",yh)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var du;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(du||(du={}));var gs;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(gs||(gs={}));var fn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(fn||(fn={}));function Ud(t,e){return[e,t]}function Wae(t,e){return t*e}function xh(t){const e=ce(t),n=Math.ceil(e/4);return ob(n)}function el(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Gae(t,e){const[n,s]=el(t,e);return n*s*4}function O1(t,e){const n=t;let s,o,r,i,a,c,l,u,d,h;return te().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,l=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,c=n.RGBA8):(s=t.RGBA,o=t.RGBA,r=t.RGBA,i=n.RGBA,a=t.RGBA,l=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,c=t.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:c,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ke(t,e){const n=e();return te().getBool("DEBUG")&&Hae(t),n}function Hae(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Qae(t,e))}const Kae=596e-10,qae=65504;function Xae(t){return!!(te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Kae<Math.abs(t)&&Math.abs(t)<qae)}function Qae(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function wh(t,e){return xr(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Yae(t,e){const n=xr(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ke(t,()=>t.shaderSource(n,e)),ke(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Jae(t,e){const n=xr(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ke(t,()=>t.shaderSource(n,e)),ke(t,()=>t.compileShader(n)),te().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw RO(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Zae=/ERROR: [0-9]+:([0-9]+):/g;function RO(t,e){const n=Zae.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const s=+n[1],o=t.split(`
`),r=o.length.toString().length+2,i=o.map((d,h)=>cc((h+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const c=i.slice(0,s-1),l=i.slice(s-1,s),u=i.slice(s);console.log(c.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${cc(l[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function ece(t){return xr(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function tce(t,e){if(ke(t,()=>t.linkProgram(e)),!te().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Qg(t,e){if(ke(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function nce(t,e){const n=xr(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ke(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function sce(t,e){const n=xr(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ke(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ke(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function oce(t){return xr(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function rce(t,e){const n=te().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const s=`[${t}x${e}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(t>n||e>n){const s=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function ice(t){return xr(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function JS(t,e,n,s,o,r,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,s)),ke(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,r,i)),ke(t,()=>t.enableVertexAttribArray(a)),!0)}function ace(t,e,n){hce(t,n),ke(t,()=>t.activeTexture(t.TEXTURE0+n)),ke(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function cce(t,e,n){return xr(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function lce(t,e,n){return t.getUniformLocation(e,n)}function uce(t,e,n,s){ke(t,()=>ace(t,e,s)),ke(t,()=>t.uniform1i(n,s))}function Yg(t,e,n){ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function ZS(t,e){ke(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ke(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ch(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+dce(t,e))}function dce(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function xr(t,e,n){const s=ke(t,()=>e());if(s==null)throw new Error(n);return s}function hce(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=e+t.TEXTURE0;if(s<t.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Mc(t,e=2){return ce(t.slice(0,t.length-e))}function Bc(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _h(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Mc(t),...Bc(t)]),e}function fce(t,e=!1){let n=te().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=te().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&te().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=n/2),e&&(n=n*2,s=s*2,t=t.map((a,c)=>c>=t.length-2?Zy(t[c]):t[c]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ai(t).newShape);let o=ce(t),r=null;t.length<=1&&o<=n?r=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?r=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?r=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?r=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?r=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(r=[t[0],t[1]*t[2]*t[3]]);const i=r!=null&&Math.max(...r)>s&&Math.min(...r)<=(e?2:1)&&Math.min(...r)>0;if(r==null||i)if(e){const a=Mc(t);let c=2,l=2;t.length&&([c,l]=Bc(t)),o=a*(c/2)*(l/2),r=ob(o).map(u=>u*2)}else r=ob(o);return r}function Sh(t){return t%2===0}function zf(t,e){if(t=t.slice(-2),e=e.slice(-2),at(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],s=e[e.length-1];if(n===s||Sh(n)&&Sh(s)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Sh(t[0])&&Sh(e[0])}let Jg,Zg;function pce(t){if(Jg==null){const e=ho(t);Jg=e.getParameter(e.MAX_TEXTURE_SIZE)}return Jg}function mce(t){if(Zg==null){const e=ho(t);Zg=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Zg)}function gce(t){if(t===0)return 0;let e;const n=ho(t);return Ls(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ls(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ls(t,e){return t.getExtension(e)!=null}function eI(t){try{if(ho(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function vce(t){if(t===0)return!1;const e=ho(t);if(t===1){if(!Ls(e,"OES_texture_float"))return!1}else if(!Ls(e,"EXT_color_buffer_float"))return!1;return Pb(e)}function bce(t){if(t===0)return!1;const e=ho(t);if(t===1){if(!Ls(e,"OES_texture_float")||!Ls(e,"WEBGL_color_buffer_float"))return!1}else{if(Ls(e,"EXT_color_buffer_float"))return Pb(e);const s="EXT_color_buffer_half_float";if(Ls(e,s)){const o=e.getExtension(s);return yce(e,o)}return!1}return Pb(e)}function Pb(t){const e=O1(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function yce(t,e){const n=O1(t,e),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(s),t.deleteFramebuffer(i),a}function xce(t){return t!==2?!1:ho(t).fenceSync!=null}function jd(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&$(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ae=te();Ae.registerFlag("HAS_WEBGL",()=>Ae.getNumber("WEBGL_VERSION")>0);Ae.registerFlag("WEBGL_VERSION",()=>eI(2)?2:eI(1)?1:0);Ae.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ae.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ae.get("WEBGL_VERSION")===2);Ae.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ae.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ae.registerFlag("WEBGL_PACK",()=>Ae.getBool("HAS_WEBGL"));Ae.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_CLIP",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_REDUCE",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_CONV_IM2COL",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ae.getBool("WEBGL_PACK"));Ae.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>pce(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>mce(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ae.getNumber("WEBGL_VERSION");return t===0?0:gce(t)});Ae.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ae.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!$N());Ae.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>vce(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ae.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ae.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ae.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>bce(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_FENCE_API_ENABLED",()=>xce(Ae.getNumber("WEBGL_VERSION")));Ae.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ae.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ae.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ae.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>$N()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ae.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ae.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ae.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ae.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ae.registerFlag("WEBGL_EXP_CONV",()=>!1);Ae.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ae.getBool("IS_TEST"));Ae.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ae.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ae.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ae.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(){let t,e,n,s,o,r,i,a,c,l;return te().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",s="in",o="texture",r="outputColor",i="out vec4 outputColor;",a=te().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",c="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:c,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ka(t,e,n="index"){const s=De(e);return s.map((o,r)=>{const i=`int ${t[r]} = ${n} / ${o}`,a=r===s.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${o}`:`index -= ${t[r]} * ${o}`;return`${i}; ${a};`}).join("")}function qm(t,e,n="index"){const s=De(e);return s.map((o,r)=>{const i=`int ${t[r]} = ${n} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * outShapeStrides[${r}]`:`index -= ${t[r]} * outShapeStrides[${r}]`;return`${i}; ${a};`}).join("")}function wce(t,e){const n=t.length,s=t.map(r=>`${e}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function Cce(t,e,n="index"){const s=t.map((r,i)=>i),o=wce(s,e);return o.map((r,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,c=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${c};`}).join("")}function L1(t){const e=De(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function F1(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const DO=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:OO}=l9;function _ce(t,e,n){const s=[];if(t.forEach(f=>{const p=ce(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?s.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${f.name};`),s.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=P1(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:s.push(`uniform int ${f.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${f.name}Shape;`);break}s.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{s.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const o=s.join(`
`),r=t.map(f=>Sce(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=Pn(),c=kce(a);let l,u,d=Nce(a);return e.isPacked?(l=Ice(e.logicalShape,i,n.enableShapeUniforms),u=Tce(a)):(l=Ece(e.logicalShape,i,n.enableShapeUniforms),u=$ce(a)),n.packedInputs&&(d+=Oce),[d,c,u,o,l,r,n.userCode].join(`
`)}function tl(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Hce(t,e);case 1:return qce(t,e);case 2:return Qce(t,e);case 3:return Jce(t,e);case 4:return ele(t,e);case 5:return tle(t);case 6:return nle(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function LO(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Gce(t);case 1:return Kce(t,e);case 2:return Xce(t,e);case 3:return Yce(t,e);default:return Zce(t,e)}}function Sce(t,e,n=!1,s){let o="";n?o+=LO(t,s):o+=tl(t,s);const r=t.shapeInfo.logicalShape,i=e.logicalShape;return r.length<=i.length&&(n?o+=sle(t,e):o+=ole(t,e)),o}function Ice(t,e,n){switch(t.length){case 0:return FO();case 1:return Lce(t,e,n);case 2:return zce(t,e,n);case 3:return Pce(t,e,n);default:return Bce(t,e,n)}}function Ece(t,e,n){switch(t.length){case 0:return FO();case 1:return Fce(t,e,n);case 2:return Wce(t,e,n);case 3:return Mce(t,e,n);case 4:return Vce(t,e,n);case 5:return Uce(t,e);case 6:return jce(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function kce(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function $ce(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Tce(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Nce(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ace}
    ${Rce}
    ${Dce}
  `}const Ace=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Rce=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Dce=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Oce=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function FO(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Lce(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function Fce(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Pce(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),r=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function Mce(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${qm(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const s=ka(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function Bce(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),r=o*Math.ceil(t[t.length-2]/2);let i=r,a="",c="b, r, c";for(let l=2;l<t.length-1;l++)i*=t[t.length-l-1],a=`
      int b${l} = index / ${i};
      index -= b${l} * ${i};
    `+a,c=`b${l}, `+c;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${c});
    }
  `}function Vce(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${qm(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const s=ka(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function Uce(t,e){const n=ka(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function jce(t,e){const n=ka(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function zce(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(at(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function Wce(t,e,n){return at(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function $a(t){return`offset${t}`}function Gce(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),s=Pn();return`
    vec4 ${n}() {
      return ${s.texture2D}(${e}, halfCR);
    }
  `}function Hce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=t.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=$a(n);if(e)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,c]=t.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${c}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function Kce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,r=Pn();if(e)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function qce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${nl(t)}
      }
    `;const o=t.shapeInfo.texShape,r=o[0],i=o[1];if(i===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=$a(n);return i===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Xce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape,i=r[0],a=r[1],c=Pn();if(r!=null&&at(n,r))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${c.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${c.texture2D}(${s}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${c.texture2D}(${s}, uv);
    }
  `;const l=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${l[0]}, ${l[1]}, row, col);
      return ${c.texture2D}(${s}, uv);
    }
  `}function Qce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape;if(r!=null&&at(n,r)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const h=r[0],f=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=ai(n),c=i;if(c.length<n.length){const h=sl(t,c),f=["row","col"];return`
      ${tl(h,e)}
      float ${o}(int row, int col) {
        return ${o}(${ol(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${nl(t)}
      }
    `;const l=r[0],u=r[1],d=$a(s);return u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${s}, uv);
    }
  `:l===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${l}, ${u}, index);
    return sampleTexture(${s}, uv);
  }
`}function Yce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=sl(t,h),m=["b","row","col"];return`
        ${LO(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${ol(m,f)});
        }
      `}const a=Pn();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const c=i[0],l=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${c}, ${l}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function Jce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:c}=ai(n),l=a;if(l.length<n.length){const m=sl(t,l),v=["row","col","depth"];return`
        ${tl(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${ol(v,c)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${i}, 1)));
        ${nl(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===r&&f==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(h===i&&f==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=$a(s);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${s}, uv);
      }
  `}function Zce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Pn();if(e)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=t.shapeInfo.logicalShape,i=r.length,a=t.shapeInfo.texShape,c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=c[0],u=c[1],d=Math.ceil(r[i-1]/2);let h=d*Math.ceil(r[i-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)f=`int b${m}, `+f,h*=r[i-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${s}(${f}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${l});
      return ${o.texture2D}(${n}, uv);
    }
  `}function ele(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:c,keptDims:l}=ai(n);if(c.length<n.length){const b=sl(t,c),x=["row","col","depth","depth2"];return`
      ${tl(b,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${ol(x,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${r}, 1)));
        ${nl(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${s}Shape[3];`,m=`int stride1 = ${s}Shape[2] * stride2;`,v=`int stride0 = ${s}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(f===r&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;const g=$a(s);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${g});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${g});
      return sampleTexture(${s}, uv);
    }
  `}function tle(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],r=e[3]*o,i=e[2]*r,a=e[1]*i,{newShape:c,keptDims:l}=ai(e);if(c.length<e.length){const m=sl(t,c),v=["row","col","depth","depth2","depth3"];return`
      ${tl(m)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${ol(v,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${r}, ${o})) +
          depth3;
        ${nl(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&u==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===o&&u==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=$a(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function nle(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=ai(e);if(o.length<e.length){const v=sl(t,o),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${tl(v)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${ol(g,r)});
      }
    `}const i=e[5],a=e[4]*i,c=e[3]*a,l=e[2]*c,u=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${l}, ${c}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${nl(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${c}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=$a(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${l} + depth * ${c} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function nl(t){const e=t.name,n=ce(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function sle(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=OO(t.shapeInfo.logicalShape,e.logicalShape),c=mt(i),l=i-r;let u;const d=["x","y","z","w","u","v"];r===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${d[b+l]} = 0;`).join(`
`);let h="";i<2&&r>0?h="coords":h=t.shapeInfo.logicalShape.map((b,x)=>`coords.${d[x+l]}`).join(", ");let f="return outputValue;";const m=ce(t.shapeInfo.logicalShape)===1,g=ce(e.logicalShape)===1;if(r===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)i===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,x=r-1;a.indexOf(b)>-1&&a.indexOf(x)>-1?f="return vec4(outputValue.x);":a.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${c} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${s}(${h});
      ${f}
    }
  `}function ole(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===c&&t.shapeInfo.flatOffset==null&&at(i,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=mt(c),u=OO(t.shapeInfo.logicalShape,e.logicalShape),d=c-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":c<2&&u.length>=1?h="coords = 0;":h=u.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return c<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${o}() {
      ${l} coords = getOutputCoords();
      ${h}
      return get${s}(${p});
    }
  `}function mt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function P1(t,e,n){const{newShape:s,keptDims:o}=ai(e),r=e.length,i=t&&r===3&&e[0]===1,a=i?e.slice(1):s,c=!t&&r>1&&!at(e,n)&&s.length<r||i;return{useSqueezeShape:c,uniformShape:c?a:e,keptDims:o}}function sl(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ol(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rle(t,e,n,s){const o=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),r=o.map(u=>u.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=_ce(o,i,e),c=Jae(t.gl,a),l=t.createProgram(c);return te().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:c,source:a,webGLProgram:l,inShapeInfos:r,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:c,source:a,webGLProgram:l,inShapeInfos:r,outShapeInfo:i},PO(t,e,l)))}function PO(t,e,n){const s=[],o=[];let r,i,a,c=null,l=null;l=t.getUniformLocation(n,"NAN",!1),te().getNumber("WEBGL_VERSION")===1&&(c=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),s.push(h)}if(e.enableShapeUniforms&&(r=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),i=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:s,customUniformLocations:o,infLoc:c,nanLoc:l,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:i}}function tI(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,s)=>{const o=n.logicalShape,r=e[s],i=r.shape;if(!at(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,c=r.isUniform?null:r.texData.texShape;if(!at(a,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${c} must match`)})}function ile(t,e,n,s,o){e.program.enableShapeUniforms||(tI(e.inShapeInfos,n),tI([e.outShapeInfo],[s]));const r=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):t.setOutputMatrixTexture(r.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),te().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let c=0;c<n.length;++c){const l=n[c],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[c];if(h){const{uniformShape:p}=P1(e.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,l.texData.texShape[0],l.texData.texShape[1]),u!=null){if(l.isUniform){if(ce(l.shape)<2)t.gl.uniform1f(u,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}l.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,u,c)}}const a=e.outShapeLocation;if(a)switch(s.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(s.shape));break}if(e.outShapeStridesLocation){const c=De(s.shape);switch(s.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(c));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(c));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(c));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),e.program.customUniforms&&o)for(let c=0;c<e.program.customUniforms.length;++c){const l=e.program.customUniforms[c],u=e.customUniformLocations[c],d=o[c];if(l.type==="float")t.gl.uniform1fv(u,d);else if(l.type==="vec2")t.gl.uniform2fv(u,d);else if(l.type==="vec3")t.gl.uniform3fv(u,d);else if(l.type==="vec4")t.gl.uniform4fv(u,d);else if(l.type==="int")t.gl.uniform1iv(u,d);else if(l.type==="ivec2")t.gl.uniform2iv(u,d);else if(l.type==="ivec3")t.gl.uniform3iv(u,d);else if(l.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function ale(t,e,n){let s="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const c=i.texData.texShape,{useSqueezeShape:l,uniformShape:u,keptDims:d}=P1(t.packedInputs,i.shape,c);let h="",f="",p="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=De(u);p=`${w[0]===c[1]}_${w[w.length-1]===c[1]}`}const m=i.shape.length,v=u.length===2&&at(i.shape,c),g=ce(i.shape)===1,b=Rc(i.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&at(c,n.texData.texShape),y=t.packedInputs||u.length>2?"":`${c[0]>1}_${c[1]>1}`;s+=`${m}_${x}_${l?d:""}_${u.length}_${g}_${b}_${v}_${h}_${f}_${p}_${y}_${a}`}else{const c=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${c}_${a}`}});const o=t.userCode;let r=t.constructor.name;return r+="_"+s+"_"+o+`${te().getNumber("WEBGL_VERSION")}`,r}function kn(t){return te().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cle{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=du.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pn();this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?qm(["r","c","d"],e):ka(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lle{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=du.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pn();this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?qm(["r","c","d"],e):ka(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ule{constructor(e){this.variableNames=["A"],this.outTexUsage=gs.DOWNLOAD;const n=Pn();this.outputShape=e,this.userCode=`
      ${DO}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dle{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gs.DOWNLOAD;const n=Pn();this.outputShape=e,this.userCode=`
      ${DO}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hle={R:0,G:1,B:2,A:3};class nI{constructor(e,n=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=Pn();this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length);let r="result";n&&(r="floor(result * 255. + 0.5)");let i="";for(let a=0;a<s.length;a++){const c=s[a];i+=`
          if(offset == ${a}) {
            result = values[${hle[c]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?F1():L1(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${r}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fle{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Pn();this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const c=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${c}] = values[0];
            } else if (offset == 1) {
              result[${c}] = values[1];
            } else if (offset == 2) {
              result[${c}] = values[2];
            } else {
              result[${c}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?F1():L1(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ple(t){const e=Pn(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Yae(t,n)}function mle(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return nce(t,e)}function gle(t){const e=new Uint16Array([0,1,2,2,1,3]);return sce(t,e)}function zd(t,e,n,s,o,r){rce(e,n);const i=oce(t),a=t.TEXTURE_2D;return ke(t,()=>t.bindTexture(a,i)),ke(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ke(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ke(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ke(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),te().getNumber("WEBGL_VERSION")===1?ke(t,()=>t.texImage2D(a,0,s,e,n,0,o,r,null)):ke(t,()=>t.texStorage2D(a,1,s,e,n)),ke(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function MO(t){return t.internalFormatFloat}function vle(t,e,n,s){const[o,r]=Ud(e,n);return zd(t,o,r,MO(s),s.textureFormatFloat,t.FLOAT)}function BO(t){return t.internalFormatHalfFloat}function ble(t,e,n,s){const[o,r]=Ud(e,n);return zd(t,o,r,BO(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function VO(t){return t.downloadTextureFormat}function yle(t,e,n,s){const[o,r]=Ud(e,n);return zd(t,o,r,VO(s),t.RGBA,t.UNSIGNED_BYTE)}function UO(t){return t.internalFormatPackedFloat}function xle(t,e,n,s){const[o,r]=el(e,n);return zd(t,o,r,UO(s),t.RGBA,t.FLOAT)}function jO(t){return t.internalFormatPackedHalfFloat}function wle(t,e,n,s){const[o,r]=el(e,n);return zd(t,o,r,jO(s),t.RGBA,s.textureTypeHalfFloat)}function Cle(t,e,n){return ke(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),JS(t,e,"clipSpacePos",n,3,20,0)&&JS(t,e,"uv",n,2,20,12)}function _le(t,e,n,s,o,r){ke(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,c;o instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=t.UNSIGNED_BYTE,c=t.RGBA):(i=new Float32Array(n*s*4),a=t.FLOAT,c=r.internalFormatPackedFloat),i.set(o),te().getNumber("WEBGL_VERSION")===2?ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,s,t.RGBA,a,i)):ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,c,n,s,0,t.RGBA,a,i)),ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Sle(t,e,n){ke(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?te().getNumber("WEBGL_VERSION")===2?ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):te().getNumber("WEBGL_VERSION")===2?ke(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ke(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ke(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Ile(t,e,n,s){const o=t.createBuffer();ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return ke(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ke(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function Ele(t,e,n){const s=t,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function kle(t,e,n,s){const[o,r]=Ud(e,n),i=4,a=new Uint8Array(Wae(e*n,i));return ke(t,()=>t.readPixels(0,0,o,r,s.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function $le(t,e,n,s,o,r,i,a){const c=t,l=new Float32Array(Gae(r,i));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function Tle(t,e,n){const s=new Float32Array(e*n*4);return ke(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ev{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=te().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Uae(n,e)):this.gl=ho(n),e=this.gl,te().getNumber("WEBGL_VERSION")===2){const r=e;this.createVertexArray=()=>ke(r,()=>r.createVertexArray()),this.bindVertexArray=i=>ke(r,()=>r.bindVertexArray(i)),this.deleteVertexArray=i=>ke(r,()=>r.deleteVertexArray(i)),this.getVertexArray=()=>ke(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(e!=null){const r=e.getExtension("OES_vertex_array_object");if(r==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ke(e,()=>r.createVertexArrayOES()),this.bindVertexArray=i=>ke(e,()=>r.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ke(e,()=>r.deleteVertexArrayOES(i)),this.getVertexArray=()=>ke(e,()=>e.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),te().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=wh(this.gl,r),Ls(this.gl,i))this.textureHalfFloatExtension=wh(this.gl,i);else if(te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),Ls(this.gl,o))this.colorBufferHalfFloatExtension=wh(this.gl,o);else if(te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",Ls(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(Ls(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=mle(this.gl),this.indexBuffer=gle(this.gl),this.framebuffer=ice(this.gl),this.textureConfig=O1(this.gl,this.textureHalfFloatExtension)}get debug(){return te().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ke(e,()=>e.finish()),ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ke(e,()=>e.deleteFramebuffer(this.framebuffer)),ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ke(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ke(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),vle(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),ble(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),yle(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Sle(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,s,o){this.throwIfDisposed(),_le(this.gl,e,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),wle(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),xle(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(ZS(this.gl,this.framebuffer),this.outputTexture=null),ke(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,s){return this.downloadMatrixDriver(e,()=>kle(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,s,o,r,i){return $le(this.gl,e,n,s,o,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Ele(this.gl,e,n)}createBufferFromTexture(e,n,s){this.bindTextureToFrameBuffer(e);const o=Ile(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,s;if(te().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),s=()=>{const i=o.clientWaitSync(r,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=r}else te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(e,n,s){return this.downloadMatrixDriver(e,()=>Tle(this.gl,n,s))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=ple(n));const s=ece(n);ke(n,()=>n.attachShader(s,this.vertexShader)),ke(n,()=>n.attachShader(s,e)),tce(n,s);const o=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&Qg(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ke(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Cle(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ke(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Qg(this.gl,this.program),ke(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,s=!0){return this.throwIfDisposed(),s?cce(this.gl,e,n):lce(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ke(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),uce(this.gl,e,n,s)}setOutputMatrixTexture(e,n,s){this.setOutputMatrixTextureDriver(e,s,n)}setOutputPackedMatrixTexture(e,n,s){this.throwIfDisposed();const[o,r]=el(n,s);this.setOutputMatrixTextureDriver(e,o,r)}setOutputMatrixWriteRegion(e,n,s,o){this.setOutputMatrixWriteRegionDriver(s,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Qg(this.gl,this.program),Ch(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ke(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ke(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=wh(this.gl,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await V_(()=>this.disposed||this.isQueryAvailable(e,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(e,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(e,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Nle(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in te().platform&&(s=te().platform.setTimeoutCustom.bind(te().platform)),V_(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Yg(this.gl,e,this.framebuffer),this.debug&&Ch(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Yg(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ch(this.gl)):ZS(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(e,n,s){this.throwIfDisposed();const o=this.gl;Yg(o,e,this.framebuffer),this.debug&&Ch(o),this.outputTexture=e,ke(o,()=>o.viewport(0,0,n,s)),ke(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(e,n,s,o){this.throwIfDisposed(),ke(this.gl,()=>this.gl.scissor(e,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Nle(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Ale,bincountImpl:zO,bincountReduceImpl:Rle,bitwiseAndImpl:Dle,castImpl:Ole,ceilImpl:Lle,concatImpl:Fle,equalImpl:Ple,expImpl:Mle,expm1Impl:Ble,floorImpl:Vle,gatherNdImpl:Ule,gatherV2Impl:jle,greaterImpl:zle,greaterEqualImpl:Wle,lessImpl:Gle,lessEqualImpl:Hle,linSpaceImpl:Kle,logImpl:qle,maxImpl:Xle,maximumImpl:Qle,minimumImpl:Yle,multiplyImpl:Jle,negImpl:Zle,notEqualImpl:eue,prodImpl:tue,raggedGatherImpl:nue,raggedRangeImpl:sue,raggedTensorToTensorImpl:oue,rangeImpl:rue,rsqrtImpl:iue,scatterImpl:aue,sigmoidImpl:cue,simpleAbsImpl:WO,sliceImpl:lue,sparseFillEmptyRowsImpl:uue,sparseReshapeImpl:due,sparseSegmentReductionImpl:GO,sqrtImpl:hue,staticRegexReplaceImpl:fue,stridedSliceImpl:pue,stringNGramsImpl:mue,stringSplitImpl:gue,stringToHashBucketFastImpl:vue,subImpl:bue,tileImpl:yue,topKImpl:xue,transposeImpl:M1,uniqueImpl:wue}=Sne;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Rn(t,e){return e===1?[t]:HO(t,e)}function Cue(t,e){if(t===1)return"rc";let n="";for(let s=0;s<t;s++)n+=e[s],s<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ue{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=kn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Rn("rc",this.rank),s=mt(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)r=`${e[e.length-1-i]},`+r;n.push(r)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${e[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KO{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Sue(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?F1():L1(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${s}

        setOutput(result);
      }
    `}}function Sue(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Cce(["r","c","d"],"inputShape"):ka(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iue{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,s){const o=oI(n,s),r=rI(e,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=sI(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const c=this.freeTextures[r].pop();return this.usedTextures[r].push(c),c}let a;return o===fn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===fn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===fn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===fn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===fn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,s,o){if(this.freeTextures==null)return;const r=oI(s,o),i=rI(n,r,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=sI(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),c=te().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");c!==-1&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[i],u=l&&l.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Eue(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function sI(t,e,n,s,o){const r=kue(e,s);let i;if(o){const[c,l]=el(t[0],t[1]);i=c*l}else{const[c,l]=Ud(t[0],t[1]);i=c*l}const a=Eue(n,r);return i*a}function kue(t,e){switch(t){case fn.PACKED_2X2_FLOAT32:return UO(e);case fn.PACKED_2X2_FLOAT16:return jO(e);case fn.UNPACKED_FLOAT32:return MO(e);case fn.UNPACKED_FLOAT16:return BO(e);case fn.PACKED_4X1_UNSIGNED_BYTE:return VO(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function $ue(t){return te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?fn.PACKED_2X2_FLOAT32:fn.UNPACKED_FLOAT32:t?fn.PACKED_2X2_FLOAT16:fn.UNPACKED_FLOAT16}function oI(t,e){if(t===gs.UPLOAD)return fn.PACKED_2X2_FLOAT32;if(t===gs.RENDER||t==null)return $ue(e);if(t===gs.DOWNLOAD||t===gs.PIXELS)return fn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function rI(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ko{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Hs="if (isnan(x)) return x;",Tue="return x;",iI="return abs(x);",Nue="return (x >= 0.0) ? x : (exp(x) - 1.0);",Aue=Hs+`
  return (x < 0.0) ? 0.0 : x;
`,Rue=Hs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Nr="return x;",Due="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oue="return x;",Lue=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Fue=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pue=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Mue="return 1.0 / (1.0 + exp(-1.0 * x));";class Lr{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bue{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length);const n=e.length,s=Rn("rc",n),o=mt(n),r=Cue(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vue=mA,Uue=1e-7,jue=1e-4,Ih={};function zue(t){return t in Ih||(Ih[t]={}),Ih[t]}const Wue=te().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Gue=600;function Hue(){return te().global.screen==null?1024:te().global.screen.height*te().global.screen.width*window.devicePixelRatio*Gue/1024/1024}class Xm extends Jy{nextDataId(){return Xm.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!te().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof ev)n=e;else{const s=ho(te().getNumber("WEBGL_VERSION"),e);n=new ev(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=ho(te().getNumber("WEBGL_VERSION"));n=new ev(s),this.binaryCache=zue(te().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Iue(this.gpgpu),this.numMBBeforeWarning=Hue(),this.texData=new FT(this,xo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,s,o,r,i){const a=this.makeTensorInfo(n,s),c=this.texData.get(a.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[o,r]},c.texShape=[o,r];const l=_h(n),u=new nI(l,!1,i),d=this.runWebGLProgram(u,[a],s,[[o,r]]);return d.shape=n,c.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,s){if((te().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||te().getBool("DEBUG"))&&this.checkNumericalProblems(e),s==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:e,usage:gs.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,s,o,r){if(te().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:o,values:n,usage:gs.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:s,dtype:o,complexTensorInfos:r,slice:i,shape:a,isPacked:c}=n;if(i!=null){let h;c?h=new Lr(a,Nr):h=new ko(a,Nr);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(s!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return s;const l=this.activeTimers!=null;let u;l&&(u=jn());let d;if(o==="complex64"){const h=this.readSync(r.real.dataId),f=this.readSync(r.imag.dataId);d=hr(h,f)}else d=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=jn()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:s,shape:o,slice:r,dtype:i,complexTensorInfos:a,isPacked:c}=n;if(r!=null){let p;c?p=new Lr(o,Nr):p=new ko(o,Nr);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),v=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),v}if(s!=null)return this.convertAndCacheOnCPU(e);if(te().getBool("DEBUG")&&!te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&te().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,u;if(i!=="complex64"&&te().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...xh(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],v=p[1];d=hr(m,v)}else if(l==null)d=this.getValuesFromTexture(e);else{const p=ce(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),l!=null){const p=this.gpgpu.gl;ke(p,()=>p.deleteBuffer(l))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&xo().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const s=this.texData.get(e),{values:o,shape:r,slice:i,dtype:a,isPacked:c,texture:l}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let f;c?f=new Lr(r,Nr):f=new ko(r,Nr);const p=this.runWebGLProgram(f,[{dataId:e,shape:r,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(l==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=xo().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(o=>qr(o));return Ke(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ke(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const s=e[n];if(!Xae(s))throw te().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:s,isPacked:o}=this.texData.get(e),r=ce(n);if(te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...xh(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(h),p}const i=te().getBool("WEBGL_PACK")&&o===!0,a=i?_h(n):n,c=i?new dle(a):new ule(a),l=this.runWebGLProgram(c,[{shape:a,dtype:s,dataId:e}],"float32"),u=this.texData.get(l.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(l),d}timerAvailable(){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,e();const r=ea(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),i=ea(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const c=await Promise.all(r);a.kernelMs=fq(c),a.getExtraProfileInfo=()=>c.map((l,u)=>({name:i[u],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:jn(),endMs:null}}endTimer(e){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=jn(),e)}async getQueryTime(e){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:i,slice:a}=this.texData.get(e),c=a&&a.origDataId||e,l=this.dataRefCount.get(c);l>1?this.dataRefCount.set(c,l-1):(this.dataRefCount.delete(c),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Wue){return te().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>this.texData.get(s.dataId).texture==null&&ce(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ms("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Vue(e.shape,n)}packedUnaryOp(e,n,s){const o=new Lr(e.shape,n),r=this.compileAndRun(o,[e],s);return xo().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=WO(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(te().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iI,e.dtype);const n=new ko(e.shape,iI),s=this.compileAndRun(n,[e]);return xo().makeTensorFromTensorInfo(s)}makeTensorInfo(e,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&$u(s[0])){const r=s.map(i=>Ur(i));o=this.write(r,e,n)}else o=this.write(s,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,s){return xo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,s),this)}unpackTensor(e){const n=new Bue(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new _ue(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const s=[Mc(e.shape),...Bc(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[Mc(n),...Bc(n)],i=new KO(r,s),a=!0,c=[s],l=this.runWebGLProgram(i,[o],e.dtype,c,a);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const s=this.texData.get(e),{isPacked:o,shape:r,dtype:i}=s;if(n!=null){const h=ce(r),f=n[0]*n[1]*4;$(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=_h(r);let c;o?c=new lle(a):c=new cle(a);const l=!0,u=[n??xh(a)],d=this.runWebGLProgram(c,[{shape:a,dtype:i,dataId:e}],i,u,l,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(e,n,s,o,r=!1,i){const a=this.makeTensorInfo(e.outputShape,s),c=this.texData.get(a.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===du.DENSE){const g=i??xh(e.outputShape);c.texShape=g.map(b=>b*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),ce(a.shape)===0)return c.values=wn(a.dtype,0),a;const l=[],u=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(g.dataId);if(b.texture==null){if(!e.packedInputs&&ce(g.shape)<=te().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!b.isPacked!=!!e.packedInputs)g=b.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),b=this.texData.get(g.dataId);else if(b.isPacked&&!zf(b.shape,g.shape)){const x=g,y=g.shape;g.shape=b.shape,g=this.packedReshape(g,y),l.push(g),b=this.texData.get(g.dataId),x.shape=y}return{shape:g.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:c,isUniform:!1},h=ale(e,u,d),f=this.getAndSaveBinary(h,()=>rle(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),te().get("ENGINE_COMPILE_ONLY")||ile(this.gpgpu,f,u,d,o),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const v=te().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const g=jn();g-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!te().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&r===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(e,n,s,o,r)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(te().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=J(()=>{if(!te().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=te().getBool("DEBUG");te().set("DEBUG",!1);const n=this.abs(it(1e-8)).dataSync()[0];if(te().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Uue:jue}uploadToGPU(e){const n=this.texData.get(e),{shape:s,dtype:o,values:r,texture:i,usage:a,isPacked:c}=n;if(i!=null)return;const l=this.activeTimers!=null;let u;l&&(u=jn());let d=n.texShape;if(d==null&&(d=fce(s,c),n.texShape=d),r!=null){const h=_h(s);let f,p=d[1],m=d[0];const v=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(c||!v)&&([p,m]=el(d[0],d[1])),c?f=new fle(h,v):f=new nI(h,v);const g=v?[m,p]:d,b=this.makeTensorInfo(g,o),x=this.texData.get(b.dataId);v?x.usage=gs.PIXELS:x.usage=gs.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,r);const y=[[m,p]],C=this.runWebGLProgram(f,[b],o,y,!0),_=this.texData.get(C.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,te().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=jn()-u)}else{const h=this.acquireTexture(d,a,o,c);n.texture=h}}convertAndCacheOnCPU(e,n){const s=this.texData.get(e),{dtype:o}=s;return n!=null&&(s.values=Kue(n,o)),s.values}acquireTexture(e,n,s,o){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*gf(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const s=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(r){throw r}});e.push(s)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await OA(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(RO(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:s,infLoc:o,nanLoc:r,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:c}=PO(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=s,e.infLoc=o,e.nanLoc=r,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=c}}createTensorFromGPUData(e,n,s){e.channels=e.channels||"RGBA";const{texture:o,height:r,width:i,channels:a}=e,c=xo().backend;if(!c.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=c.writeTexture(o,n,s,r,i,a);return xo().makeTensorFromDataId(l,n,s,c)}}Xm.nextDataId=0;function Kue(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let s=0;s<n.length;++s)n[s]=Math.round(t[s]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */TN()&&RN("webgl",()=>new Xm,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B1=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class fa{constructor(e,n,s){this.variableNames=["A","B"],this.outputShape=ze(n,s),this.enableShapeUniforms=kn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ta=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class rl{constructor(e,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ze(n,s);const r=this.outputShape.length;this.enableShapeUniforms=kn(r);let i="";if(o)if(r===0||ce(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${mt(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const c=Rn("coords",r);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${c[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${c[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${c[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${c[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function us(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const que={kernelName:Xu,backendName:"webgl",kernelFunc:us};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t){const{inputs:e,backend:n}=t,{real:s,imag:o}=e,r=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(r.dataId),a=us({inputs:{x:s},backend:n}),c=us({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:c},r}const Xue={kernelName:d0,backendName:"webgl",kernelFunc:vi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qO="return (a < 0.) ? b * a : a;",XO=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Que(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{alpha:r}=s,i=n.makeTensorInfo([],"float32",ci(r,"float32")),a=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rl(XO,o.shape,i.shape):new fa(qO,o.shape,i.shape),c=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),c}const Yue={kernelName:zp,backendName:"webgl",kernelFunc:Que};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QO="return (a < 0.) ? b * a : a;",YO=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Jue(t){const{inputs:e,backend:n}=t,{x:s,alpha:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rl(YO,s.shape,o.shape):new fa(QO,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const Zue={kernelName:cm,backendName:"webgl",kernelFunc:Jue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const il="if (isnan(x)) return x;";function tt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:i}=o,a=r,c=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),h=n(d.values,c);return a.makeTensorInfo(i.shape,c,h)}const l=te().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return l?u=new Lr(i.shape,e):u=new ko(i.shape,t),a.runWebGLProgram(u,[i],c)}}function bn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:i,backend:a})=>{const{a:c,b:l}=i,u=a;if(s&&c.dtype==="complex64"){const p=u.texData.get(c.dataId),m=u.texData.get(l.dataId),[v,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[y,w]=x,C={dataId:y.dataId,dtype:y.dtype,shape:c.shape},_={dataId:w.dataId,dtype:w.dtype,shape:l.shape},S=new fa(t,c.shape,l.shape);return u.runWebGLProgram(S,[C,_],cs(y.dtype,w.dtype))}),b=vi({inputs:{real:v,imag:g},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(g),b}const d=r||cs(c.dtype,l.dtype);if((c.dtype==="string"||l.dtype==="string"||u.shouldExecuteOnCPU([c,l]))&&o!=null){const p=u.texData.get(c.dataId).values,m=u.texData.get(l.dataId).values,v=c.dtype==="string"?fr(p):p,g=c.dtype==="string"?fr(m):m,[b,x]=o(c.shape,l.shape,v,g,d),y=u.makeTensorInfo(x,d),w=u.texData.get(y.dataId);return w.values=b,y}const h=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new rl(e,c.shape,l.shape,n):f=new fa(t,c.shape,l.shape),u.runWebGLProgram(f,[c,l],d)}}function hu(t,e=!1){if(t==="linear")return e?Oue:Tue;if(t==="relu")return e?Fue:Aue;if(t==="elu")return e?Lue:Nue;if(t==="relu6")return e?Pue:Rue;if(t==="prelu")return e?YO:QO;if(t==="leakyrelu")return e?XO:qO;if(t==="sigmoid")return e?Mue:Due;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JO{constructor(e,n,s,o=!1,r=!1,i=!1,a=null,c=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=kn(this.outputShape.length);const u=o?e[1]:e[2],d=Math.ceil(u/2),h=o?"i * 2, rc.y":"rc.y, i * 2",f=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",g="";a&&(c?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:l?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:v=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let x="rc.x",y="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(y=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${y};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aI={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class cI{constructor(e,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ze(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lI="return a * b;";function V1(t){const{inputs:e,backend:n}=t,{a:s,b:o}=e,r=cs(s.dtype,o.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),c=n.texData.get(o.dataId),l=new cI(aI.REAL,s.shape,o.shape),u=new cI(aI.IMAG,s.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:o.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:o.shape}],h=n.runWebGLProgram(l,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=vi({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([s,o])){const a=n.texData.get(s.dataId),c=n.texData.get(o.dataId),[l,u]=Jle(s.shape,o.shape,a.values,c.values,r),d=n.makeTensorInfo(u,r),h=n.texData.get(d.dataId);return h.values=l,d}let i;return te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new rl(lI,s.shape,o.shape):i=new fa(lI,s.shape,o.shape),n.runWebGLProgram(i,[s,o],r)}const ede={kernelName:od,backendName:"webgl",kernelFunc:V1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tde(t,e,n){const s=[Mc(t.shape),...Bc(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Mc(e),...Bc(e)],i=new KO(r,s),a=!0,c=[s],l=n.runWebGLProgram(i,[o],t.dtype,c,a);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Se(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{shape:r}=s,i=n,a=ce(o.shape),c=MT(r,a),l=ce(c);$(a===l,()=>`The new shape (${c}) has ${l} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=i.texData.get(o.dataId);return u.isPacked&&!zf(o.shape,c)&&!(u.texture!==null&&zf(u.shape,c))?tde(o,c,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:c,dtype:o.dtype})}const nde={kernelName:um,backendName:"webgl",kernelFunc:Se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uI{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(s/4)*4,c=s%4;let l="sumValue += dot(values, ones);";if(n!=null){const d=1/n;l=`sumValue += dot(values * ${$c(d)?d.toPrecision(2):d}, ones);`}let u="";r%s>0&&(u=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${a};
        if (${c===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sde{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=e;this.outputShape=[o,i];let a="0.0",c="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",c="min"):n==="max"&&(a="-1.0 / 1e-20",c="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const u=Math.floor(s/4)*4,d=s%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${c}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${c}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ode(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],s=Dm(n);e.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return e}function Na(t,e,n,s){const o=ode(t.shape);let r=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:c,outSize:l}=o[i];let u,d;n==="mean"?u=i===0?new uI({windowSize:c,inSize:a,batchSize:t.shape[0],outSize:l},a):new uI({windowSize:c,inSize:a,batchSize:t.shape[0],outSize:l}):u=new sde({windowSize:c,inSize:a,batchSize:t.shape[0],outSize:l},n),d=r,r=s.runWebGLProgram(u,[r],e),d.dataId!==t.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rde{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[n[i]];this.outputShape=s,this.rank=s.length;const o=mt(this.rank),r=ide(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function ide(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<t.length;o++)s[t[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ade{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(e.length);for(let u=0;u<s.length;u++)s[u]=e[n[u]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=mt(this.rank),r=HO("rc",this.rank),i=new Array(this.rank);for(let u=0;u<n.length;u++)i[n[u]]=r[u];const a=`vec2(${i.slice(-2).join()})`,c=`++${r[this.rank-1]} < ${s[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${c}) {
        result[1] = ${l};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${l};
        if(${c}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qm(t,e,n){const s=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ade(t.shape,e):new rde(t.shape,e);return n.runWebGLProgram(s,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cde(t,e,n,s){const o=e,r=t.shape.length,i=qe(o,t.shape);let a=i;const c=Dt(a,r),l=c!=null;let u=t;l&&(u=Qm(t,c,s),a=Bt(a.length,r)),vn("sum",a,r);const[d,h]=dn(u.shape,a);let f=d;n&&(f=Wt(d,i));const p=ce(h),v=ce(t.shape)/p,g=Se({inputs:{x:u},attrs:{shape:[v,p]},backend:s}),b=H0(t.dtype),x=Na(g,b,"sum",s),y=Se({inputs:{x},attrs:{shape:f},backend:s});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(x),l&&s.disposeIntermediateTensorInfo(u),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ym(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;return cde(o,r,i,n)}const lde={kernelName:gm,backendName:"webgl",kernelFunc:Ym};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fn(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{perm:r}=s,i=n,a=o.shape.length,c=new Array(a);for(let u=0;u<c.length;u++)c[u]=o.shape[r[u]];let l;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,h=M1(d,o.shape,o.dtype,r,c);l=i.makeTensorInfo(c,o.dtype);const f=i.texData.get(l.dataId);f.values=h}else l=Qm(o,r,i);return l}const ude={kernelName:lc,backendName:"webgl",kernelFunc:Fn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZO=1e3;function Wf({a:t,b:e,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:c=null}){const l=t.shape.length,u=e.shape.length,d=n?t.shape[l-2]:t.shape[l-1],h=s?e.shape[u-1]:e.shape[u-2],f=n?t.shape[l-1]:t.shape[l-2],p=s?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),v=e.shape.slice(0,-2),g=ce(m),b=ce(v),y=ze(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);$(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[g,d,f]:[g,f,d],C=s?[b,p,h]:[b,h,p],_=Se({inputs:{x:t},backend:o,attrs:{shape:w}}),S=Se({inputs:{x:e},backend:o,attrs:{shape:C}}),I=[_,S],E=Math.max(g,b),O=n?_.shape[1]:_.shape[2],A=r!=null,P=i!=null,z=c==="leakyrelu",G=c!=null?hu(c,!0):null,M=A||P||z||G!=null;let R;if((f===1||p===1)&&O>ZO&&M===!1){let j=_,ne=S;n&&(j=Fn({inputs:{x:_},backend:o,attrs:{perm:[0,2,1]}}),I.push(j)),s&&(ne=Fn({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),I.push(ne));const re=p!==1,de=p===1;let he=j;re&&(he=Se({inputs:{x:j},backend:o,attrs:{shape:[E,O,1]}}),I.push(he));const ye=p===1?2:1;let fe=ne;de&&(fe=Se({inputs:{x:ne},backend:o,attrs:{shape:[E,1,O]}}),I.push(fe));const ge=V1({inputs:{a:he,b:fe},backend:o});R=Ym({inputs:{x:ge},backend:o,attrs:{axis:ye,keepDims:!0}}),I.push(ge)}else{const j=cs(t.dtype,e.dtype),ne=new JO(w,C,[E,f,p],n,s,A,G,P,z),re=[_,S];if(r!=null&&re.push(r),P&&re.push(i),z){const de=o.makeTensorInfo([],"float32",ci(a,"float32"));re.push(de),I.push(de)}R=o.runWebGLProgram(ne,re,j)}const D=Se({inputs:{x:R},backend:o,attrs:{shape:y}});I.push(R);for(const j of I)o.disposeIntermediateTensorInfo(j);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:d}=s;return Wf({a:o,b:r,transposeA:c,transposeB:l,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const hde={kernelName:vf,backendName:"webgl",kernelFunc:dde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dI="return abs(x);";function fde(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),i=WO(r.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let o;return te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Lr(s.shape,dI):o=new ko(s.shape,dI),n.runWebGLProgram(o,[s],s.dtype)}const pde={kernelName:_p,backendName:"webgl",kernelFunc:fde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mde=Hs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,gde=tt({opSnippet:mde}),vde={kernelName:Tu,backendName:"webgl",kernelFunc:gde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bde=Hs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yde=tt({opSnippet:bde}),xde={kernelName:Nu,backendName:"webgl",kernelFunc:yde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hI="return a + b;",wde=bn({opSnippet:hI,packedOpSnippet:hI,supportsComplex:!0,cpuKernelImpl:Ale}),Cde={kernelName:qc,backendName:"webgl",kernelFunc:wde};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _de{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sde{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(t){const{inputs:e,backend:n}=t,s=e;if(s.length===1)return us({inputs:{x:s[0]},backend:n});if(s.length>te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(s.length/2),l=Mh({inputs:s.slice(0,c),backend:n}),u=Mh({inputs:s.slice(c),backend:n});return Mh({inputs:[l,u],backend:n})}const o=s.map(c=>c.dtype).reduce((c,l)=>cs(c,l)),r=s.map(c=>c.shape),a=te().getBool("WEBGL_PACK")?new Sde(s[0].shape,r):new _de(s[0].shape,r);return n.runWebGLProgram(a,s,o)}const Ide={kernelName:o0,backendName:"webgl",kernelFunc:Mh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ede(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,c=qe(r,o.shape);let l=c;const u=Dt(l,a);let d=o;u!=null&&(d=Fn({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Bt(l.length,a)),vn("all",l,a);const[h,f]=dn(d.shape,l),p=ce(f),m=Se({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Na(m,m.dtype,"all",n);let g;if(i){const b=Wt(h,c);g=Se({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Se({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const kde={kernelName:r0,backendName:"webgl",kernelFunc:Ede};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $de(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,c=qe(r,o.shape);let l=c;const u=Dt(l,a);let d=o;u!=null&&(d=Fn({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Bt(l.length,a)),vn("any",l,a);const[h,f]=dn(d.shape,l),p=ce(f),m=Se({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Na(m,m.dtype,"any",n);let g;if(i){const b=Wt(h,c);g=Se({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Se({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Tde={kernelName:i0,backendName:"webgl",kernelFunc:$de};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nde{constructor(e,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:i}=e;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",c=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${c};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ade{constructor(e,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,$(e.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=e[e.length-1],i=Math.ceil(r/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,c=a.length,l=mt(c),u=Rn("coords",c);let d,h;if(i===1){h=c+1;const S=mt(h);d=`
        ${S} sourceLocR = ${S}(${u.join()}, 0);
        ++${u[c-1]};
        ${S} sourceLocG = ${S}(${u.join()}, 0);
        ++${u[c-2]};
        ${S} sourceLocA = ${S}(${u.join()}, 0);
        --${u[c-1]};
        ${S} sourceLocB = ${S}(${u.join()}, 0);
        --${u[c-2]};`}else h=c,d=`
        ${l} sourceLocR = coords;
        ++${u[c-1]};
        ${l} sourceLocG = coords;
        ++${u[c-2]};
        ${l} sourceLocA = coords;
        --${u[c-1]};
        ${l} sourceLocB = coords;
        --${u[c-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(S=>"int "+S),v=Rn("sourceLocR",h-1).concat("inIdx.r"),g=Rn("sourceLocG",h-1).concat("inIdx.g"),b=Rn("sourceLocB",h-1).concat("inIdx.b"),x=Rn("sourceLocA",h-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,_=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${u[c-1]} < ${a[c-1]-1};
        bool hasNextRow = ${u[c-2]} < ${a[c-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(t,e,n,s=null){let o=e.shape[0],r=e.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const i=Dm(r),a={windowSize:i,inSize:r,batchSize:o,outSize:Math.ceil(r/i)},c=new Nde(a,n,s==null),l=[e];s!=null&&l.push(s);const u=t.runWebGLProgram(c,l,"int32");if(u.shape[1]===1)return u;const d=eL(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function tL(t,e,n,s=null){const o=s!=null?s.shape:e.shape,r=o[o.length-1],i=Dm(r),a=new Ade(o,i,n,s==null),c=s==null?[e]:[e,s],l=t.runWebGLProgram(a,c,"int32");if(l.shape.length===e.shape.length){const u=tL(t,e,n,l);return t.disposeIntermediateTensorInfo(l),u}return l}function nL(t,e,n,s){const o=[n];if(vn("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,e.shape.length),!te().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const r=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let c=e;a&&(c=t.unpackTensor(e),r.push(c));const[l,u]=dn(c.shape,o),d=ce(u),h=Se({inputs:{x:c},backend:t,attrs:{shape:[-1,d]}});r.push(h);const f=eL(t,h,s);r.push(f);const p=Se({inputs:{x:f},backend:t,attrs:{shape:l}});return r.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return tL(t,e,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;let i=qe(r,o.shape);const a=Dt(i,o.shape.length);let c=o;const l=[];a!=null&&(c=Fn({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(c),i=Bt(i.length,c.shape.length)),vn("argMax",[i[0]],c.shape.length);const u=nL(n,c,i[0],"max");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Dde={kernelName:Sp,backendName:"webgl",kernelFunc:Rde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ode(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;let i=qe(r,o.shape);const a=Dt(i,o.shape.length);let c=o;const l=[];a!=null&&(c=Fn({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(c),i=Bt(i.length,c.shape.length)),vn("argMin",[i[0]],c.shape.length);const u=nL(n,c,i[0],"min");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Lde={kernelName:Ip,backendName:"webgl",kernelFunc:Ode};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fde=Hs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Pde=tt({opSnippet:Fde}),Mde={kernelName:Au,backendName:"webgl",kernelFunc:Pde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bde=Hs+"return log(x + sqrt(x * x + 1.0));",Vde=tt({opSnippet:Bde}),Ude={kernelName:Ru,backendName:"webgl",kernelFunc:Vde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jde=Hs+`
  return atan(x);
`,zde=tt({opSnippet:jde}),Wde={kernelName:Du,backendName:"webgl",kernelFunc:zde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gde=B1+`
  return atan(a, b);
`,Hde=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ta+`
  return result;
`,Kde=bn({opSnippet:Gde,packedOpSnippet:Hde}),qde={kernelName:Lu,backendName:"webgl",kernelFunc:Kde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xde=Hs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Qde=tt({opSnippet:Xde}),Yde={kernelName:Ou,backendName:"webgl",kernelFunc:Qde};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fu{constructor(e,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${c});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?v:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,C=i%4,_=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${c});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${y});
      }
    `}}class U1{constructor(e,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,c=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,v=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let y="0.0";if(x||(y="-1.0 / 1e-20"),s){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${c}, ${l});
        const ivec3 pads = ivec3(${v}, ${g}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const _=Math.floor(i/4)*4,S=i%4,I=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${c}, ${l});
      const ivec3 pads = ivec3(${v}, ${g}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${_};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;jd(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:c}=s,l=1;$(In(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const u=Ws(o.shape,r,i,l,a,c);if(u.filterWidth===1&&u.filterHeight===1&&at(u.inShape,u.outShape))return us({inputs:{x:o},backend:n});const d=new fu(u,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const Zde={kernelName:Ep,backendName:"webgl",kernelFunc:Jde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ehe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:c,dataFormat:l}=s,u=[1,1,1],d=br(o.shape,r,i,u,a,c,l),h=new U1(d,"avg",!1);return n.runWebGLProgram(h,[o],"float32")}const the={kernelName:kp,backendName:"webgl",kernelFunc:ehe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nhe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=c-1-e.padInfo.top,d=l-1-e.padInfo.left,h=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${c};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class she{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,o=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,v=f-1-e.padInfo.left,g=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${v});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ohe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r,{filterSize:a,strides:c,pad:l,dimRoundingMode:u}=s,d=[1,1,1],h=br(i.shape,a,c,d,l,u),f=new she(h);return n.runWebGLProgram(f,[o],i.dtype)}const rhe={kernelName:c0,backendName:"webgl",kernelFunc:ohe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ihe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r;jd([o,r],"avgPoolGrad");const{filterSize:a,strides:c,pad:l}=s,u=Ws(i.shape,a,c,1,l),d=new nhe(u);return n.runWebGLProgram(d,[o],i.dtype)}const ahe={kernelName:a0,backendName:"webgl",kernelFunc:ihe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r}=e,{transposeA:i,transposeB:a}=s;return Wf({a:o,b:r,transposeA:i,transposeB:a,backend:n})}const lhe={kernelName:$p,backendName:"webgl",kernelFunc:che};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uhe{constructor(e,n,s,o,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ze(e,n),ze(e,s);let a="0.0";o!=null&&(ze(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let c="1.0";r!=null&&(ze(e,r),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${c};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dhe{constructor(e,n,s,o,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ze(e,n),ze(e,s);let a="vec4(0.0)";o!=null&&(ze(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let c="vec4(1.0)";r!=null&&(ze(e,r),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${c};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hhe=({inputs:t,backend:e,attrs:n})=>{const{x:s,mean:o,variance:r,offset:i,scale:a}=t;$(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=n;c==null&&(c=.001);const l=[s,o,r];let u=null;i!=null&&(u=i.shape,l.push(i));let d=null;a!=null&&(d=a.shape,l.push(a));const h=te().getBool("WEBGL_PACK_NORMALIZATION")?new dhe(s.shape,o.shape,r.shape,u,d,c):new uhe(s.shape,o.shape,r.shape,u,d,c);return e.runWebGLProgram(h,l,l[0].dtype)},fhe={kernelName:Vp,backendName:"webgl",kernelFunc:hhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class phe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=mt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=mhe(this.rank);let o;const r=e.map((i,a)=>`sourceLoc.${Mb[a]} = start[${a}] + coords.${Mb[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const Mb=["x","y","z","w","u","v"];function mhe(t){if(t===1)return"sourceLoc";if(t<=6)return Mb.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ghe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=mt(this.rank),s=Rn("coords",this.rank),o=Rn("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${r})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,c=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${a}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(t,e,n,s){const o=s.texData.get(t.dataId),r=s.makeTensorInfo(n,t.dtype),i=s.texData.get(r.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=Fx(e,De(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const c=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,c+1),r}function al(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,size:i}=s,[a,c]=Rm(o,r,i);if(Dx(o,a,c),ce(c)===0)return n.makeTensorInfo(c,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),h=lue(d.values,a,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,h)}const{isPacked:l}=n.texData.get(o.dataId),u=Lx(o.shape,a,c);if(l||!u){const d=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ghe(c):new phe(c),h=[a];return n.runWebGLProgram(d,[o],o.dtype,h)}return n.uploadToGPU(o.dataId),vhe(o,a,c,n)}const bhe={kernelName:mm,backendName:"webgl",kernelFunc:al};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yhe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,crops:i}=s;$(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,x)=>b*x),c=Td(o.shape,r,a),l=Nd(c.length,r.length),u=Ad(o.shape,r,a),d=Ux(i,r.length),h=jx(u,i,r.length),f=[],p=Se({inputs:{x:o},backend:n,attrs:{shape:c}}),m=Fn({inputs:{x:p},backend:n,attrs:{perm:l}}),v=Se({inputs:{x:m},backend:n,attrs:{shape:u}}),g=al({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(v),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),g},xhe={kernelName:Tp,backendName:"webgl",kernelFunc:yhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i}=s,a=n.readSync(o.dataId),c=n.readSync(r.dataId),l=zO(a,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,l)}const Che={kernelName:l0,backendName:"webgl",kernelFunc:whe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _he=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,She=`
  return float(int(a.r) & int(b.r));
`;function Ihe(t){const{inputs:e,backend:n}=t,{a:s,b:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=te().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([s,o])||i===1){const c=n.texData.get(s.dataId).values,l=n.texData.get(o.dataId).values,[u,d]=Dle(s.shape,o.shape,c,l,s.dtype),h=n.makeTensorInfo(d,s.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let a;return r?a=new rl(_he,s.shape,o.shape,!1):a=new fa(She,s.shape,o.shape),n.runWebGLProgram(a,[s,o],s.dtype)}const Ehe={kernelName:u0,backendName:"webgl",kernelFunc:Ihe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t){const{inputs:e,backend:n}=t,{s0:s,s1:o}=e,r=n.readSync(s.dataId),i=n.readSync(o.dataId),a=ze(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const $he={kernelName:WT,backendName:"webgl",kernelFunc:khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The="return float(a != b);",sL=bn({opSnippet:The,cpuKernelImpl:eue,dtype:"bool"}),Nhe={kernelName:sm,backendName:"webgl",kernelFunc:sL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wd(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.texData.get(s.dataId);return us({inputs:{x:o.complexTensorInfos.real},backend:n})}const Ahe={kernelName:L0,backendName:"webgl",kernelFunc:Wd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe="return float(int(x));";function Dhe(t,e){const n=new ko(t.shape,Rhe),s=e.runWebGLProgram(n,[t],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bb(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return us({inputs:{x:o},backend:n});const i=rn(o.shape),a=Bb({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),c=vi({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),c}if(o.dtype==="complex64"){const i=Wd({inputs:{input:o},backend:n}),a=Bb({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!BT(o.dtype,r)){const i=us({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,c,l]=Ole(i,o.shape,o.dtype,r);return n.makeTensorInfo(a,c,l)}if(r==="int32")return Dhe(o,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",wn("bool",1)),c=sL({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),c}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const Ohe={kernelName:Fu,backendName:"webgl",kernelFunc:Bb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fI="return ceil(x);",Lhe=tt({opSnippet:fI,packedOpSnippet:fI,cpuKernelImpl:Lle}),Fhe={kernelName:Pu,backendName:"webgl",kernelFunc:Lhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Phe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mhe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{clipValueMin:r,clipValueMax:i}=s;let a;te().getBool("WEBGL_PACK_CLIP")?a=new Mhe(o.shape):a=new Phe(o.shape);const c=[[r],[i]];return n.runWebGLProgram(a,[o],o.dtype,c)}const Vhe={kernelName:Mu,backendName:"webgl",kernelFunc:Bhe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uhe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pI(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function jhe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=n.texData.get(s.dataId),r=new Uhe(s.shape),i=[pI(s,o.complexTensorInfos.real),pI(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const zhe={kernelName:Np,backendName:"webgl",kernelFunc:jhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Whe{constructor(e){this.outputShape=[],this.outputShape=Oo(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ghe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Oo(e,n);const s=this.outputShape,o=s.length,r=mt(o),i=Rn("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,v)=>`T${v}`);const c=new Array(e.length-1);c[0]=e[0][n];for(let m=1;m<c.length;m++)c[m]=c[m-1]+e[m][n];const l=a[n],u=a.slice(-2),d=a.join();let h=`if (${l} < ${c[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<c.length;m++){const v=c[m-1];h+=`
        if (${l} < ${c[m]}  && ${l} >= ${c[m-1]}) {
          return getChannel(
            getT${m}(${Eh(a,l,v)}),
            vec2(${Eh(u,l,v)}));
        }`}const f=c.length,p=c[c.length-1];h+=`
        return getChannel(
          getT${f}(${Eh(a,l,p)}),
          vec2(${Eh(u,l,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Eh(t,e,n){const s=t.indexOf(e);return t.map((r,i)=>i===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jm(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.texData.get(s.dataId);return us({inputs:{x:o.complexTensorInfos.imag},backend:n})}const Hhe={kernelName:k0,backendName:"webgl",kernelFunc:Jm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kl(t,e,n){const s=t[0].dtype;if(s==="complex64"){const f=t.map(b=>Wd({inputs:{input:b},backend:n})),p=t.map(b=>Jm({inputs:{input:b},backend:n})),m=kl(f,e,n),v=kl(p,e,n),g=vi({inputs:{real:m,imag:v},backend:n});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),g}let o=n.shouldExecuteOnCPU(t);if(s==="string"&&(o=!0),o){const f=t.map(y=>{const C=[-1,ce(y.shape.slice(e))];return Se({inputs:{x:y},backend:n,attrs:{shape:C}})}),p=f.map(y=>({vals:n.readSync(y.dataId),shape:y.shape})),m=Oo(f.map(y=>y.shape),1),v=f[0].shape[0]===1,g=Fle(p,m,s,v),b=Oo(t.map(y=>y.shape),e),x=n.makeTensorInfo(b,s,g);return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const r=t.filter(f=>ce(f.shape)>0),i=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(r.length===1){const f=i?new ko(t[0].shape,Nr):new Lr(t[0].shape,Nr);return n.runWebGLProgram(f,t,s)}const a=te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const f=[];for(let m=0;m<r.length;m+=a){const v=r.slice(m,m+a);f.push(kl(v,e,n))}const p=kl(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(i){const f=new Ghe(r.map(p=>p.shape),e);return n.runWebGLProgram(f,r,s)}const{tensors2D:c,outShape:l}=Khe(r,e,n),u=new Whe(c.map(f=>f.shape)),d=n.runWebGLProgram(u,c,s);c.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=Se({inputs:{x:d},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(d),h}function Khe(t,e,n){const s=Oo(t.map(r=>r.shape),e);return{tensors2D:t.map(r=>Se({inputs:{x:r},attrs:{shape:[-1,ce(r.shape.slice(e))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oL(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s,r=qe(o,e[0].shape)[0],i=e.map(l=>l.shape);Mx(i,r);const a=Oo(e.map(l=>l.shape),r);if(ce(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const c=e.filter(l=>ce(l.shape)>0);return c.length===1?us({inputs:{x:c[0]},backend:n}):kl(c,r,n)}const qhe={kernelName:Ap,backendName:"webgl",kernelFunc:oL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,c=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,x=v?3:1;let y="",w="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${c}, ${l});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class Xhe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${c};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kn(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,c=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<u;v++)h+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;h+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<u;v++)h+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const g=v*2;if(h+=`
           xC = xCCorner + ${g*c};
           `,a===1){if(g<u&&(i%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,c===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<u)){const b=i%2===0?Zy(c):c;c%2===0&&i%2===1||c%2!==0&&i%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,c>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):b===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<u&&(i%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<u&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<u&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<u&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";s&&(o?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:r?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:f=`vec4 activation(vec4 x) {
           ${s}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qhe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=kn(this.outputShape.length);const{dataFormat:s}=n,o=Pn(),r=s==="channelsLast",i=r?1:2,a=r?2:3,c=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)l+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${c}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function aL({x:t,filter:e,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const c=t.shape,l=s.texData.get(t.dataId),u=n.inChannels,d=c[0]*c[1]*c[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let v;const g=[];if(r!=null){const y=Gf(r.shape,f);y!=null&&(r=Se({inputs:{x:r},backend:s,attrs:{shape:y}}),g.push(r))}if(o!=null){const y=Gf(o.shape,f);y!=null&&(o=Se({inputs:{x:o},backend:s,attrs:{shape:y}}),g.push(o))}if(!((d===1||h===1)&&u>ZO)&&l.isPacked&&f&&l.texture!=null&&c[2]%2!==0&&at(l.shape.slice(-3),c.slice(-3))){const y=c[0]*c[1]*(c[2]+1),w={dataId:t.dataId,shape:[1,y,n.inChannels],dtype:t.dtype},C=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,$(zf(l.shape,w.shape),()=>`packed reshape ${l.shape} to ${w.shape} isn't free`);const _=Se({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(_);const S=Wf({a:w,b:_,backend:s,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),I=s.texData.get(S.dataId);$(I.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=C,I.shape=n.outShape,v=us({inputs:{x:S},backend:s}),v.shape=n.outShape,g.push(S)}else{const y=n.outHeight*n.outWidth,w=Se({inputs:{x:t},backend:s,attrs:{shape:f?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),C=Se({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=Wf({a:f?w:C,b:f?C:w,transposeA:!f,transposeB:m,backend:s,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i});v=Se({inputs:{x:_},backend:s,attrs:{shape:n.outShape}}),g.push(w),g.push(C),g.push(_)}for(const y of g)s.disposeIntermediateTensorInfo(y);return v}function cL({x:t,filter:e,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:c,filterHeight:l,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=c*l*u,v=h*d,g=[n.batchSize,m,v],b=!0,x=!1,y=[];if(r!=null){const D=Gf(r.shape,p);D!=null&&(r=Se({inputs:{x:r},backend:s,attrs:{shape:D}}),y.push(r))}if(o!=null){const D=Gf(o.shape,p);D!=null&&(o=Se({inputs:{x:o},backend:s,attrs:{shape:D}}),y.push(o))}const w=Se({inputs:{x:e},backend:s,attrs:{shape:[1,m,ce(e.shape)/m]}});y.push(w);const C=new Qhe(g,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=s.runWebGLProgram(C,[t],"float32",_),I=Se({inputs:{x:S},backend:s,attrs:{shape:g}});y.push(S),y.push(I);const E=o!=null,O=r!=null,A=a==="leakyrelu",P=a?hu(a,!0):null,z=new JO(p?I.shape:w.shape,p?w.shape:I.shape,p?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],b,x,E,P,O,A),G=p?[I,w]:[w,I];if(o&&G.push(o),O&&G.push(r),A){const D=s.makeTensorInfo([],"float32",ci(i,"float32"));G.push(D),y.push(D)}const M=s.runWebGLProgram(z,G,"float32"),R=Se({inputs:{x:M},backend:s,attrs:{shape:n.outShape}});y.push(M);for(const D of y)s.disposeIntermediateTensorInfo(D);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dataFormat:c,dilations:l,dimRoundingMode:u}=s,d=yr(c),h=gn(o.shape,r.shape,i,l,a,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=aL({x:o,filter:r,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&te().getBool("WEBGL_EXP_CONV")){const m=new iL(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[o,r],"float32",v)}else if(te().getBool("WEBGL_CONV_IM2COL"))f=cL({x:o,filter:r,convInfo:h,backend:n});else{const m=new rL(h);f=n.runWebGLProgram(m,[o,r],"float32")}const p=Se({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const Jhe={kernelName:Rp,backendName:"webgl",kernelFunc:Yhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zhe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,o=e.padInfo.top,r=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class efe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,c=s-1-e.padInfo.left,l=i?1:2,u=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class tfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,s=e.strideHeight,o=e.strideWidth,r=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,o=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,c=n-1-e.padInfo.front,l=s-1-e.padInfo.top,u=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${l}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,dataFormat:c,dimRoundingMode:l,filterShape:u}=s,d=yr(c),h=gn(o.shape,u,i,1,a,l,!1,d),f=new Zhe(h);return n.runWebGLProgram(f,[o,r],"float32")}const ofe={kernelName:h0,backendName:"webgl",kernelFunc:sfe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rfe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=kn(this.outputShape.length);const n=e.filterHeight,s=e.filterWidth,o=n-1-e.padInfo.top,r=s-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{inputShape:i,strides:a,pad:c,dataFormat:l,dimRoundingMode:u}=s,d=yr(l),h=gn(i,r.shape,a,1,c,u,!1,d);if(te().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new rfe(h);return n.runWebGLProgram(p,[o,r],"float32",f)}else{const f=new efe(h);return n.runWebGLProgram(f,[o,r],"float32")}}const afe={kernelName:Dp,backendName:"webgl",kernelFunc:ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:c}=s,l=ui(o.shape,r.shape,i,c,a),u=new Xhe(l);return n.runWebGLProgram(u,[o,r],"float32")}const lfe={kernelName:Op,backendName:"webgl",kernelFunc:cfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ufe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,filterShape:c}=s,l=ui(o.shape,c,i,1,a),u=new tfe(l);return n.runWebGLProgram(u,[o,r],"float32")}const dfe={kernelName:f0,backendName:"webgl",kernelFunc:ufe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{pad:i,strides:a,inputShape:c}=s,l=ui(c,r.shape,a,1,i),u=new nfe(l);return n.runWebGLProgram(u,[o,r],"float32")}const ffe={kernelName:p0,backendName:"webgl",kernelFunc:hfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pfe=il+`
  return cos(x);
`,mfe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Ta}
  return result;
`,gfe=tt({opSnippet:pfe,packedOpSnippet:mfe}),vfe={kernelName:Bu,backendName:"webgl",kernelFunc:gfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bfe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,yfe=tt({opSnippet:bfe}),xfe={kernelName:Vu,backendName:"webgl",kernelFunc:yfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wfe{constructor(e,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,c,l]=e,[u]=n,[d,h]=s;this.outputShape=[u,d,h,l];const f=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${c-1}.0`],[v,g,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,y,w]=h>1?[`${(c-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cfe=t=>{const{inputs:e,backend:n,attrs:s}=t,{image:o,boxes:r,boxInd:i}=e,{cropSize:a,method:c,extrapolationValue:l}=s,u=new wfe(o.shape,r.shape,a,c,l);return n.runWebGLProgram(u,[o,r,i],"float32")},_fe={kernelName:g0,backendName:"webgl",kernelFunc:Cfe};var pu;(function(t){t.Prod="*",t.Sum="+"})(pu||(pu={}));class mI{constructor(e,n,s,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,i=this.op===pu.Prod?"1.0":"0.0",a=s?i:`getX(${gI(r,"coords",this.op)})`,c=this.outputShape[this.outputShape.length-1];let l="",u="";s?(l=o?`end != ${c-1}`:"end != 0",u=o?"end + 1":"end - 1"):(l=o?`end + pow2 < ${c}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${mt(r)} coords = getOutputCoords();
        int end = ${vI(r,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${u};
          ${vI(r,"coords",this.op)} = idx;
          val ${this.op}= getX(${gI(r,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function gI(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function vI(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lL(t,e,n,s,o,r){const i=e.shape.length,a=Dt([s],i);let c=e;a!=null&&(c=Fn({inputs:{x:e},backend:n,attrs:{perm:a}}));const l=Bt(1,i)[0];if(l!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${s}`);const u=c.shape[l];let d=us({inputs:{x:c},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new mI(t,c.shape,!1,r),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const h=new mI(t,c.shape,o,r),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=di(a),f=Fn({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(c),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;return lL(pu.Prod,o,n,r,i,a)}const Ife={kernelName:m0,backendName:"webgl",kernelFunc:Sfe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Efe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;return lL(pu.Sum,o,n,r,i,a)}const kfe={kernelName:Lp,backendName:"webgl",kernelFunc:Efe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $fe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const c=n.readSync(o.dataId),l=n.readSync(r.dataId),u=zO(c,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(o.shape.length===2){const c=n.bufferSync(o),l=n.bufferSync(r),u=Rle(c,l,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Tfe={kernelName:v0,backendName:"webgl",kernelFunc:$fe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nfe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Afe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockSize:r,dataFormat:i}=s,a=o.shape[0],c=i==="NHWC"?o.shape[1]:o.shape[2],l=i==="NHWC"?o.shape[2]:o.shape[3],u=i==="NHWC"?o.shape[3]:o.shape[1],d=c*r,h=l*r,f=u/(r*r),p=i==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new Nfe(p,r,i);return n.runWebGLProgram(m,[o],o.dtype)}const Rfe={kernelName:b0,backendName:"webgl",kernelFunc:Afe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kn(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,c=e.outChannels/e.inChannels;let l="",u="";s&&(o?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:l=`
          float activation(float x) {
            ${s}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${c};
        int q = d2 - d1 * ${c};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=kn(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,c=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<d;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const b=g*2;if(f+=`
          xC = xCCorner + ${b*l};
          `,c===1){if(b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,l===1&&b>0?f+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const x=a%2===0?Zy(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,l>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:f+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):x===1?f+=`
                    xC${b+1} = xTexelC${b};
                    `:f+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(f+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(f+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(f+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,m="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:c,dimRoundingMode:l}=s;let u=c;u==null&&(u=[1,1]),$(In(i,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const d=gn(o.shape,r.shape,i,u,a,l,!0);let h;te().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new dL(d):h=new uL(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[o,r],"float32",f)}const Ofe={kernelName:Fp,backendName:"webgl",kernelFunc:Dfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,o=e.padInfo.top,r=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Ffe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=n-1-e.padInfo.top,a=s-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${c}; dm++) {
              int d2 = d1 * ${c} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,dilations:a,pad:c,dimRoundingMode:l,filterShape:u}=s,d=gn(o.shape,u,i,a,c,l,!0),h=new Lfe(d);return n.runWebGLProgram(h,[o,r],"float32")}const Mfe={kernelName:y0,backendName:"webgl",kernelFunc:Pfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{strides:i,dilations:a,pad:c,dimRoundingMode:l,inputShape:u}=s,d=gn(u,r.shape,i,a,c,l,!0),h=new Ffe(d);return n.runWebGLProgram(h,[o,r],"float32")}const Vfe={kernelName:x0,backendName:"webgl",kernelFunc:Bfe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ufe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=[...s.shape,...s.shape],r=ce(s.shape),i=Se({inputs:{x:s},backend:n,attrs:{shape:[r]}}),a=new Ufe(r),c=n.runWebGLProgram(a,[i],i.dtype),l=Se({inputs:{x:c},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),l}const zfe={kernelName:GT,backendName:"webgl",kernelFunc:jfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wfe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:c,dilationHeight:l,dilationWidth:u}=e,{top:d,left:h}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${c}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:c}=s,l=Sd(o.shape,r.shape,i,a,"NHWC",c);let u;const d=new Wfe(l);u=n.runWebGLProgram(d,[o,r],"float32");const h=Se({inputs:{x:u},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(u),h}const Hfe={kernelName:Pp,backendName:"webgl",kernelFunc:Gfe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kfe(t){const{inputs:e,backend:n,attrs:s}=t,{equation:o}=s,r=e,{allDims:i,summedDims:a,idDims:c}=Qx(o,r.length);Jx(i.length,c,r);const{path:l,steps:u}=Zx(a,c),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const v of u[m]){const{permutationIndices:g,expandDims:b}=Yx(f,c[v]);let x;e1(g)?x=r[v]:(x=Fn({inputs:{x:r[v]},backend:n,attrs:{perm:g}}),p.push(x));const y=x.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);at(x.shape,y)||(x=Se({inputs:{x},backend:n,attrs:{shape:y}}),p.push(x)),h===null?h=x:(h=V1({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(l[m]>=0&&(h=Ym({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const qfe={kernelName:w0,backendName:"webgl",kernelFunc:Kfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xfe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Qfe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Yfe=tt({opSnippet:Xfe,packedOpSnippet:Qfe}),Jfe={kernelName:ju,backendName:"webgl",kernelFunc:Yfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zfe="return (b >= 0.0) ? a : a * (b + 1.0);",epe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,tpe=t=>{const{inputs:e,backend:n}=t,{dy:s,y:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new rl(epe,s.shape,o.shape):new fa(Zfe,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},npe={kernelName:C0,backendName:"webgl",kernelFunc:tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spe=`
  return vec4(equal(a, b));
`,ope="return float(a == b);",rpe=bn({opSnippet:ope,packedOpSnippet:spe,dtype:"bool",cpuKernelImpl:Ple}),ipe={kernelName:Mp,backendName:"webgl",kernelFunc:rpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ape=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${zx};
  float a1 = ${Wx};
  float a2 = ${Gx};
  float a3 = ${Hx};
  float a4 = ${Kx};
  float a5 = ${qx};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,cpe=tt({opSnippet:ape}),lpe={kernelName:zu,backendName:"webgl",kernelFunc:cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const upe=il+`
  return exp(x);
`,dpe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hL=tt({opSnippet:upe,packedOpSnippet:dpe,cpuKernelImpl:Mle,dtype:"float32"}),hpe={kernelName:Wu,backendName:"webgl",kernelFunc:hL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vb(t){const{inputs:e,attrs:n,backend:s}=t,{dim:o}=n,{input:r}=e,i=r.shape.length,a=r.shape.slice();let c=o;return o<0&&($(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),c=i+o+1),a.splice(c,0,1),Se({inputs:{x:r},backend:s,attrs:{shape:a}})}const fpe={kernelName:Bp,backendName:"webgl",kernelFunc:Vb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bI="return exp(x) - 1.0;",ppe=tt({opSnippet:bI,packedOpSnippet:bI,cpuKernelImpl:Ble}),mpe={kernelName:Gu,backendName:"webgl",kernelFunc:ppe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yI{constructor(e,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fL(t,e,n){const s=n.texData.get(t.dataId),o=ce(t.shape),r=t.shape[t.shape.length-1],i=o/r,a=Se({inputs:{x:t},backend:n,attrs:{shape:[i,r]}}),c=a.shape,l=new yI("real",c,e),u=new yI("imag",c,e),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:c},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:c}],h=n.runWebGLProgram(l,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=vi({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=Se({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpe(t){const{inputs:e,backend:n}=t,{input:s}=e;return fL(s,!1,n)}const vpe={kernelName:_0,backendName:"webgl",kernelFunc:gpe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bpe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gd(t){const{backend:e,attrs:n}=t,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||Hc(o),r==="string"){const i=Ft(r,ce(s));return i.fill(o),e.makeTensorInfo(s,r,i)}else{const i=new bpe(s,o),a=[[o]];return e.runWebGLProgram(i,[],r,a)}}const ype={kernelName:S0,backendName:"webgl",kernelFunc:Gd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xpe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpe={kernelName:I0,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,s=e,o=new xpe(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xI="return floor(x);",Cpe=tt({opSnippet:xI,packedOpSnippet:xI,cpuKernelImpl:Vle}),_pe={kernelName:Hu,backendName:"webgl",kernelFunc:Cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Ipe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Epe=bn({opSnippet:Spe,packedOpSnippet:Ipe,dtype:"int32"}),kpe={kernelName:Ku,backendName:"webgl",kernelFunc:Epe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $pe{constructor(e){this.variableNames=["A"];const n=Pn(),[s,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tpe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pn(),[s,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe={kernelName:$q,backendName:"webgl",kernelFunc:Ape};let Ma,tv=te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Ape(t){const{inputs:e,backend:n,attrs:s}=t;let{pixels:o}=e;const{numChannels:r}=s,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[c,l]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[l,c],d=[l,c,r];if(a||i){const m=te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ma==null||m!==tv)&&(tv=m,Ma=document.createElement("canvas").getContext("2d",{willReadFrequently:tv})),Ma.canvas.width=c,Ma.canvas.height=l,Ma.drawImage(o,0,0,c,l),o=Ma.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=gs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);const f=te().getBool("WEBGL_PACK")?new Tpe(d):new $pe(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rpe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:c,pad:l,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s,m=yr(u),v=gn(o.shape,r.shape,c,d,l,h,!1,m);let g;const b=[],x=i!=null,y=a!=null,w=f==="leakyrelu",C=()=>{const S=[o,r],I=(E,O)=>{if(O==="NCHW"&&E.shape.length===1&&E.shape[0]!==1){const A=Se({inputs:{x:E},backend:n,attrs:{shape:[E.shape[0],1,1]}});return b.push(A),A}return E};if(x&&S.push(I(i,u)),y&&S.push(I(a,u)),w){const E=n.makeTensorInfo([],"float32",ci(p,"float32"));S.push(E),b.push(E)}return S};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))g=aL({x:o,filter:r,convInfo:v,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(v.strideWidth<=2&&m==="channelsLast"&&te().getBool("WEBGL_EXP_CONV")){const S=f?hu(f,!0):null,I=new iL(v,x,S,y,w),E=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],O=C();g=n.runWebGLProgram(I,O,"float32",E)}else if(te().getBool("WEBGL_CONV_IM2COL"))g=cL({x:o,filter:r,convInfo:v,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const S=f?hu(f,!1):null,I=new rL(v,x,S,y,w),E=C();g=n.runWebGLProgram(I,E,"float32")}const _=Se({inputs:{x:g},backend:n,attrs:{shape:v.outShape}});return b.push(g),b.forEach(S=>n.disposeIntermediateTensorInfo(S)),_}const Dpe={kernelName:bf,backendName:"webgl",kernelFunc:Rpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ope(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:c,pad:l,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=s,p=[];let m=u;m==null&&(m=[1,1]),$(In(c,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${m}'`);const v=gn(o.shape,r.shape,c,m,l,d,!0),g=te().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=h?hu(h,g):null,x=[o,r],y=i!=null,w=a!=null,C=h==="leakyrelu";if(y&&x.push(i),w&&x.push(a),C){const E=n.makeTensorInfo([],"float32",ci(f,"float32"));x.push(E),p.push(E)}let _;g?_=new dL(v,y,b,w,C):_=new uL(v,y,b,w,C);const S=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],I=n.runWebGLProgram(_,x,"float32",S);return p.forEach(E=>n.disposeIntermediateTensorInfo(E)),I}const Lpe={kernelName:uN,backendName:"webgl",kernelFunc:Ope};class Fpe{constructor(e,n,s,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=s;const r=mt(s.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppe(t){const{inputs:e,backend:n}=t,{params:s,indices:o}=e,r=o.shape,i=r[r.length-1],a=ce(s.shape),[c,l,u,d]=Rx(s,o),h=Se({inputs:{x:o},backend:n,attrs:{shape:[l,i]}}),f=Se({inputs:{x:s},backend:n,attrs:{shape:[ce(s.shape)/u,u]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const g=n.readSync(o.dataId),b=n.bufferSync(s),x=Ule(g,b,s.dtype,l,i,u,d,s.shape,a);return n.makeTensorInfo(c,s.dtype,x.values)}const p=new Fpe(i,d,[l,u],s.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),v=Se({inputs:{x:m},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}const Mpe={kernelName:HT,backendName:"webgl",kernelFunc:Ppe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bpe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=mt(this.rank),o=Vpe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function Vpe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<t.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,indices:r}=e,{axis:i,batchDims:a}=s,c=qe(i,o.shape)[0];if(te().get("DEBUG")){const b=n.readSync(r.dataId),x=o.shape[c];for(let y=0;y<b.length;++y){const w=b[y];$(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const l=n1(o,r,c,a),u=ce(r.shape),d=[],h=Se({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),f=Se({inputs:{x:r},backend:n,attrs:{shape:[l.batchSize,u/l.batchSize]}});d.push(h),d.push(f);const p=[l.batchSize,l.outerSize,u/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(f),x=n.bufferSync(h),y=jle(x,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(l.outputShape,y.dtype,y.values)}const m=new Bpe(h.shape,p),v=n.runWebGLProgram(m,[h,f],h.dtype);d.push(v);const g=Se({inputs:{x:v},backend:n,attrs:{shape:l.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),g}const Upe={kernelName:Up,backendName:"webgl",kernelFunc:pL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe="return float(a > b);",zpe=`
  return vec4(greaterThan(a, b));
`,Wpe=bn({opSnippet:jpe,packedOpSnippet:zpe,cpuKernelImpl:zle,dtype:"bool"}),Gpe={kernelName:jp,backendName:"webgl",kernelFunc:Wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe="return float(a >= b);",Kpe=`
  return vec4(greaterThanEqual(a, b));
`,qpe=bn({opSnippet:Hpe,packedOpSnippet:Kpe,dtype:"bool",cpuKernelImpl:Wle}),Xpe={kernelName:qu,backendName:"webgl",kernelFunc:qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpe(t){const{inputs:e,backend:n}=t,{input:s}=e;return fL(s,!0,n)}const Ype={kernelName:E0,backendName:"webgl",kernelFunc:Qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpe="return float(!isnan(x) && !isinf(x));",Zpe=tt({opSnippet:Jpe,dtype:"bool"}),eme={kernelName:Qu,backendName:"webgl",kernelFunc:Zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme="return float(isinf(x));",nme=tt({opSnippet:tme,dtype:"bool"}),sme={kernelName:Yu,backendName:"webgl",kernelFunc:nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome="return float(isnan(x));",rme=tt({opSnippet:ome,dtype:"bool"}),ime={kernelName:Ju,backendName:"webgl",kernelFunc:rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame="return float(a < b);",cme=`
  return vec4(lessThan(a, b));
`,lme=bn({opSnippet:ame,packedOpSnippet:cme,cpuKernelImpl:Gle,dtype:"bool"}),ume={kernelName:Wp,backendName:"webgl",kernelFunc:lme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dme="return float(a <= b);",hme=`
  return vec4(lessThanEqual(a, b));
`,fme=bn({opSnippet:dme,packedOpSnippet:hme,cpuKernelImpl:Hle,dtype:"bool"}),pme={kernelName:Gp,backendName:"webgl",kernelFunc:fme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mme(t){const{backend:e,attrs:n}=t,{start:s,stop:o,num:r}=n,i=Kle(s,o,r);return e.makeTensorInfo([i.length],"float32",i)}const gme={kernelName:KT,backendName:"webgl",kernelFunc:mme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme=il+`
  return x < 0.0 ? 0./0. : log(x);
`,bme=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,yme=tt({opSnippet:vme,packedOpSnippet:bme,cpuKernelImpl:qle}),xme={kernelName:Zu,backendName:"webgl",kernelFunc:yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme=il+`
  return log(1.0 + x);
`,Cme=tt({opSnippet:wme}),_me={kernelName:ed,backendName:"webgl",kernelFunc:Cme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sme="return float(a >= 1.0 && b >= 1.0);",Ime=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Eme=bn({opSnippet:Sme,packedOpSnippet:Ime,dtype:"bool"}),kme={kernelName:Hp,backendName:"webgl",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $me="return float(!(x >= 1.0));",Tme=tt({opSnippet:$me}),Nme={kernelName:Kp,backendName:"webgl",kernelFunc:Tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ame="return float(a >= 1.0 || b >= 1.0);",Rme=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Dme=bn({opSnippet:Ame,packedOpSnippet:Rme,dtype:"bool"}),Ome={kernelName:qp,backendName:"webgl",kernelFunc:Dme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lme{constructor(e,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let c;const l=`float(${s}) + float(${o}) * sum`;r===.5?c=`inversesqrt(${l})`:r===1?c=`1.0/(${l})`:c=`exp(log(${l}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${c};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fme{constructor(e,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let c;const l=`float(${s}) + float(${o}) * sum`;r===.5?c=`inversesqrt(${l})`:r===1?c=`1.0/(${l})`:c=`exp(log(${l}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${c};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pme=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{depthRadius:r,bias:i,alpha:a,beta:c}=s,l=te().getBool("WEBGL_PACK_NORMALIZATION")?new Fme(o.shape,r,i,a,c):new Lme(o.shape,r,i,a,c);return n.runWebGLProgram(l,[o],o.dtype)},Mme={kernelName:Xp,backendName:"webgl",kernelFunc:Pme};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bme{constructor(e,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vme=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o,y:r,dy:i}=e,{depthRadius:a,bias:c,alpha:l,beta:u}=s,d=new Bme(o.shape,a,c,l,u);return n.runWebGLProgram(d,[o,r,i],o.dtype)},Ume={kernelName:$0,backendName:"webgl",kernelFunc:Vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t,e,n,s){const o=ce(e),i=ce(t.shape)/o,a=Se({inputs:{x:t},attrs:{shape:[i,o]},backend:s}),c=Na(a,t.dtype,"max",s),l=Se({inputs:{x:c},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(c),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reductionIndices:r,keepDims:i}=s,a=o.shape.length,c=qe(r,o.shape);let l=c;const u=Dt(l,a),d=u!=null,h=n.shouldExecuteOnCPU([o]);let f=o;if(d){if(h){const x=n.texData.get(f.dataId).values,y=new Array(a);for(let _=0;_<y.length;_++)y[_]=o.shape[u[_]];const w=M1(x,o.shape,o.dtype,u,y);f=n.makeTensorInfo(y,o.dtype);const C=n.texData.get(f.dataId);C.values=w}else f=Qm(o,u,n);l=Bt(l.length,a)}vn("max",l,a);const[p,m]=dn(f.shape,l);let v=p;i&&(v=Wt(p,c));let g;if(h){const x=n.texData.get(f.dataId).values,y=Xle(x,ce(m),v,o.dtype);g=n.makeTensorInfo(v,o.dtype);const w=n.texData.get(g.dataId);w.values=y}else g=jme(f,m,v,n);return d&&n.disposeIntermediateTensorInfo(f),g}const zme={kernelName:Qp,backendName:"webgl",kernelFunc:mL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wme=B1+`
  return max(a, b);
`,Gme=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ta+`
  return result;
`,Hme=bn({opSnippet:Wme,packedOpSnippet:Gme,cpuKernelImpl:Qle}),Kme={kernelName:td,backendName:"webgl",kernelFunc:Hme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;jd(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:c}=s,l=1;$(In(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const u=Ws(o.shape,r,i,l,a,c);if(u.filterWidth===1&&u.filterHeight===1&&at(u.inShape,u.outShape))return us({inputs:{x:o},backend:n});const d=new fu(u,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const Xme={kernelName:Yp,backendName:"webgl",kernelFunc:qme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dataFormat:c,dimRoundingMode:l}=s,u=[1,1,1],d=br(o.shape,r,i,u,a,l,c),h=new U1(d,"max",!1);return n.runWebGLProgram(h,[o],o.dtype)}const Yme={kernelName:Jp,backendName:"webgl",kernelFunc:Qme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jme{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,r=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=r-1-e.padInfo.top,c=i-1-e.padInfo.left,l=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Zme{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,s=e.strideHeight,o=e.strideWidth,r=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=c-1-e.padInfo.front,h=l-1-e.padInfo.top,f=u-1-e.padInfo.left,p=c*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r,{filterSize:a,strides:c,pad:l,dimRoundingMode:u}=s,d=[1,1,1],h=br(i.shape,a,c,d,l,u),f=new U1(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),m=new Zme(h),v=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),v}const tge={kernelName:N0,backendName:"webgl",kernelFunc:ege};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nge(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r,output:i}=e,a=r;jd([r,i],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:d}=s,h=Ws(a.shape,c,l,1,u,d),f=!0,p=new fu(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),v=new Jme(h),g=n.runWebGLProgram(v,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const sge={kernelName:T0,backendName:"webgl",kernelFunc:nge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(t,e,n,s){let o=new fu(n,"max",!1);const r=s.runWebGLProgram(o,[t],"float32");o=new fu(n,"max",!0,!0,e);const i=s.runWebGLProgram(o,[t],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rge={kernelName:qT,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=e,c=n;$(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const l=[1,1];$(In(r,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${l}'`);const u=Ws(s.shape,o,r,l,i),[d,h]=oge(s,a,u,c);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t,e,n,s){const o=ce(e),i=ce(t.shape)/o,a=Se({inputs:{x:t},attrs:{shape:[i,o]},backend:s}),c=Na(a,"float32","mean",s),l=Se({inputs:{x:c},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(c),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const age={kernelName:Zp,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{keepDims:o,axis:r}=e,i=n,a=s.shape.length,c=qe(r,s.shape);let l=c;const u=Dt(l,a),d=u!=null,h=i.shouldExecuteOnCPU([s]),f=[];let p=s;if(d){if(h){const y=i.texData.get(p.dataId).values,w=new Array(a);for(let S=0;S<w.length;S++)w[S]=s.shape[u[S]];const C=M1(y,s.shape,s.dtype,u,w);p=i.makeTensorInfo(w,s.dtype);const _=i.texData.get(p.dataId);_.values=C}else p=Qm(s,u,i);f.push(p),l=Bt(l.length,a)}vn("sum",l,a);const[m,v]=dn(p.shape,l);let g=m;o&&(g=Wt(m,c));const b=ige(p,v,g,i);for(const x of f)i.disposeIntermediateTensorInfo(x);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,c=qe(r,o.shape);let l=c;const u=Dt(l,a);let d=o;u!=null&&(d=Fn({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Bt(l.length,o.shape.length)),vn("min",l,a);const[h,f]=dn(d.shape,l),p=ce(f),m=Se({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Na(m,m.dtype,"min",n);let g;if(i){const b=Wt(h,c);g=Se({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Se({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const lge={kernelName:em,backendName:"webgl",kernelFunc:cge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uge=B1+`
  return min(a, b);
`,dge=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ta+`
  return result;
`,hge=bn({opSnippet:uge,packedOpSnippet:dge,cpuKernelImpl:Yle}),fge={kernelName:nd,backendName:"webgl",kernelFunc:hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pge{constructor(e,n,s){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const o=e.length,r=mt(o),i=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),l=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${c}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mge{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,r=mt(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),c=Rn("rc",o),l=Rn("source",o),u=`${c[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${l.slice(-2).join()})`,h=s==="reflect"?0:1;let f="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${c[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${c[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
        rc = outputLoc;
        ${c[o-2]} += 1;
        if(${c[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${d});
          ${c[o-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gge=({inputs:t,backend:e,attrs:n})=>{const{x:s}=t,{paddings:o,mode:r}=n,i=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mge(s.shape,o,r):new pge(s.shape,o,r);return e.runWebGLProgram(i,[s],s.dtype)},vge={kernelName:tm,backendName:"webgl",kernelFunc:gge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bge=`if (b == 0.0) return NAN;
  return mod(a, b);`,yge=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Ta+`
  return result;
`,xge=bn({opSnippet:bge,packedOpSnippet:yge}),wge={kernelName:sd,backendName:"webgl",kernelFunc:xge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cge{constructor(e,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ge=`
if (a == b) {
  return 1.0;
};
return a / b;`,Sge=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,gL=bn({opSnippet:_ge,packedOpSnippet:Sge,checkOutOfBounds:!0}),Ige={kernelName:Uu,backendName:"webgl",kernelFunc:gL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wI="return a - b;",vL=bn({opSnippet:wI,packedOpSnippet:wI,supportsComplex:!0,cpuKernelImpl:bue}),Ege={kernelName:yd,backendName:"webgl",kernelFunc:vL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bL(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{dim:r}=s,i=qe([r],o.shape),a=mL({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),c=Wt(a.shape,i),l=Se({inputs:{x:a},backend:n,attrs:{shape:c}}),u=vL({inputs:{a:o,b:l},backend:n}),d=hL({inputs:{x:u},backend:n}),h=Ym({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=Se({inputs:{x:h},backend:n,attrs:{shape:c}}),p=gL({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const kge={kernelName:ym,backendName:"webgl",kernelFunc:bL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ge(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{numSamples:r,seed:i,normalized:a}=s,c=a?o:bL({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),l=c.shape[0],u=c.shape[1],d=new Cge(l,u,r),h=[[i]],f=n.runWebGLProgram(d,[c],"int32",h);return a||n.disposeIntermediateTensorInfo(c),f}const Tge={kernelName:XT,backendName:"webgl",kernelFunc:$ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nge=Hs+`
  return -x;
`,Age=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Rge(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[i,a]=Zle(r.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let o;return te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Lr(s.shape,Age):o=new ko(s.shape,Nge),n.runWebGLProgram(o,[s],s.dtype)}const Dge={kernelName:nm,backendName:"webgl",kernelFunc:Rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oge=Ex;function Lge(t){ms("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c}=s,l=n.readSync(o.dataId),u=n.readSync(r.dataId),{selectedIndices:d}=Oge(l,u,i,a,c);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Fge={kernelName:A0,backendName:"webgl",kernelFunc:Lge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pge=kx;function Mge(t){ms("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c,padToMaxOutputSize:l}=s,u=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:h,validOutputs:f}=Pge(u,d,i,a,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Bge={kernelName:R0,backendName:"webgl",kernelFunc:Mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vge=$x;function Uge(t){ms("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:c,softNmsSigma:l}=s,u=n.readSync(o.dataId),d=n.readSync(r.dataId),h=i,f=a,p=c,m=l,{selectedIndices:v,selectedScores:g}=Vge(u,d,h,f,p,m);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const jge={kernelName:D0,backendName:"webgl",kernelFunc:Uge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zge{constructor(e,n,s,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wge=t=>{const{inputs:e,backend:n,attrs:s}=t,{indices:o}=e,{dtype:r,depth:i,onValue:a,offValue:c}=s,l=ce(o.shape),u=new zge(l,i,a,c),d=Se({inputs:{x:o},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(u,[d],r);n.disposeIntermediateTensorInfo(d);const f=[...o.shape,i],p=Se({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},Gge={kernelName:rm,backendName:"webgl",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="complex64"){const o=Wd({inputs:{input:s},backend:n}),r=Hf({inputs:{x:o},backend:n}),i=Jm({inputs:{input:s},backend:n}),a=Hf({inputs:{x:i},backend:n}),c=vi({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),c}else return Gd({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const Hge={kernelName:Cm,backendName:"webgl",kernelFunc:Hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yL(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=Wd({inputs:{input:s},backend:n}),r=yL({inputs:{x:o},backend:n}),i=Jm({inputs:{input:s},backend:n}),a=Hf({inputs:{x:i},backend:n}),c=vi({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),c}else return Gd({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const Kge={kernelName:om,backendName:"webgl",kernelFunc:yL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s;if(e.length===1)return Vb({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{e0(r,u.shape,"All tensors passed to stack must have matching shapes"),$(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=e.map(u=>{const d=Vb({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),l=oL({inputs:c,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),l}const Xge={kernelName:im,backendName:"webgl",kernelFunc:qge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qge{constructor(e,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,u)=>l[0]+e[u]+l[1]);const o=e.length,r=mt(o),i=n.map(l=>l[0]).join(","),a=n.map((l,u)=>l[0]+e[u]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${c}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yge{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,v)=>m[0]+e[v]+m[1]);const o=e.length,r=mt(o),i=n.map(m=>m[0]).join(","),a=n.map((m,v)=>m[0]+e[v]).join(","),c=Rn("rc",o),l=Rn("source",o),u=`${c[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${l.slice(-2).join()})`,h=[`${r} rc = outputLoc;`,`${c[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${c[o-2]} += 1;
       if(${c[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${c[o-1]} += 1;
         if(${u}) {`],f=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,v=o===1?2:4;m<v;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${m}] = getChannel(getX(${l.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xL=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,constantValue:i}=s;if(ce(o.shape)===0){const l=r.map((u,d)=>u[0]+o.shape[d]+u[1]);return Gd({backend:n,attrs:{shape:l,value:i,dtype:o.dtype}})}const a=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yge(o.shape,r,i):new Qge(o.shape,r,i),c=[[i]];return n.runWebGLProgram(a,[o],o.dtype,c)},Jge={kernelName:am,backendName:"webgl",kernelFunc:xL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zge=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,eve=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Ta+`
  return result;
`,tve=bn({opSnippet:Zge,packedOpSnippet:eve}),nve={kernelName:rd,backendName:"webgl",kernelFunc:tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,c=[],l=qe(r,o.shape);let u=l;const d=Dt(u,a);let h=o;d!=null&&(h=Fn({inputs:{x:o},backend:n,attrs:{perm:d}}),u=Bt(u.length,a),c.push(h)),vn("prod",u,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:v,outDtype:g}=tue(h.shape,h.dtype,p,u);f=n.makeTensorInfo(v,g,m)}else{const[p,m]=dn(h.shape,u),v=ce(m),g=Se({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=H0(o.dtype),x=Na(g,b,"prod",n);f=Se({inputs:{x},backend:n,attrs:{shape:p}}),c.push(g),c.push(x)}if(i){c.push(f);const p=Wt(f.shape,l);f=Se({inputs:{x:f},backend:n,attrs:{shape:p}})}return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const ove={kernelName:lm,backendName:"webgl",kernelFunc:sve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:o,paramsDenseValues:r,indices:i}=e,{outputRaggedRank:a}=s,c=o.map(g=>n.readSync(g.dataId)),l=o.map(g=>g.shape),u=n.readSync(r.dataId),d=n.readSync(i.dataId),[h,f,p]=nue(c,l,u,r.shape,r.dtype,d,i.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),v=n.makeTensorInfo(p,r.dtype,f);return m.concat([v])}const ive={kernelName:QT,backendName:"webgl",kernelFunc:rve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(t){const{inputs:e,backend:n}=t,{starts:s,limits:o,deltas:r}=e,i=n.readSync(s.dataId),a=n.readSync(o.dataId),c=n.readSync(r.dataId),[l,u]=sue(i,s.shape,s.dtype,a,o.shape,c,r.shape),d=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([u.length],s.dtype,u);return[d,h]}const cve={kernelName:YT,backendName:"webgl",kernelFunc:ave};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t){const{inputs:e,backend:n,attrs:s}=t,{shape:o,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:c}=s,l=n.readSync(o.dataId),u=n.readSync(r.dataId),d=n.readSync(i.dataId),h=a.map(v=>n.readSync(v.dataId)),f=a.map(v=>v.shape),[p,m]=oue(l,o.shape,u,r.shape,r.dtype,d,i.shape,h,f,c);return n.makeTensorInfo(p,r.dtype,m)}const uve={kernelName:JT,backendName:"webgl",kernelFunc:lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wL=t=>{const{backend:e,attrs:n}=t,{start:s,stop:o,step:r,dtype:i}=n,a=rue(s,o,r,i);return e.makeTensorInfo([a.length],i,a)},dve={kernelName:O0,backendName:"webgl",kernelFunc:wL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hve="return 1.0 / x;",fve=tt({opSnippet:hve}),pve={kernelName:id,backendName:"webgl",kernelFunc:fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mve=Hs+`
  return (x < 0.0) ? 0.0 : x;
`,gve=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vve=tt({opSnippet:mve,packedOpSnippet:gve}),bve={kernelName:ad,backendName:"webgl",kernelFunc:vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yve=Hs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xve=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,wve=tt({opSnippet:yve,packedOpSnippet:xve}),Cve={kernelName:cd,backendName:"webgl",kernelFunc:wve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ve{constructor(e,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,c,l]=e;this.outputShape=[i,n,s,l];const u=[o&&n>1?a-1:a,o&&s>1?c-1:c],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let h;r?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sve{constructor(e,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,c,l]=e;this.outputShape=[i,n,s,l];const u=[o&&n>1?a-1:a,o&&s>1?c-1:c],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let h;r?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s,[c,l]=a,u=te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Sve(o.shape,c,l,r,i):new _ve(o.shape,c,l,r,i);return n.runWebGLProgram(u,[o],"float32")}const Eve={kernelName:hm,backendName:"webgl",kernelFunc:Ive};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kve{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=e,c=[s&&i>1?o-1:o,s&&a>1?r-1:r],l=[s&&i>1?i-1:i,s&&a>1?a-1:a],u=c[0]/l[0],d=c[1]/l[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s,a=new kve(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Tve={kernelName:P0,backendName:"webgl",kernelFunc:$ve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nve{constructor(e,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,c,l]=e;this.outputShape=[i,n,s,l];const u=[o&&n>1?a-1:a,o&&s>1?c-1:c],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],h=o?"0.5":"0.0";let f;r?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ave{constructor(e,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,c,l]=e;this.outputShape=[i,n,s,l];const u=[o&&n>1?a-1:a,o&&s>1?c-1:c],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],h=o?"0.5":"0.0";let f;r?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s,[c,l]=a,u=te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ave(o.shape,c,l,r,i):new Nve(o.shape,c,l,r,i);return n.runWebGLProgram(u,[o],o.dtype)}const Dve={kernelName:dm,backendName:"webgl",kernelFunc:Rve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ove{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=e,c=[s&&i>1?o-1:o,s&&a>1?r-1:r],l=[s&&i>1?i-1:i,s&&a>1?a-1:a],u=c[0]/l[0],d=c[1]/l[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${c[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${c[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s,a=new Ove(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Fve={kernelName:F0,backendName:"webgl",kernelFunc:Lve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pve{constructor(e,n){this.variableNames=["x"];const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=e,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,r=e.map((a,c)=>o(c)).join(","),i=mt(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mve{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=e;const o=Rn("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,a=mt(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(o.slice())};
          if(${r}){
            result.g = ${l(o.slice())};
          }
          if(${i}) {
            result.b = ${u(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function c(p){return h(p)}function l(p){return p[s-1]="("+p[s-1]+" + 1)",h(p)}function u(p){return p[s-2]="("+p[s-2]+" + 1)",h(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",h(p)}function h(p){const m=e.map((b,x)=>f(x,p)),v=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${g}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dims:r}=s,i=o.shape.length,a=qe(r,o.shape);if(i===0)return us({inputs:{x:o},backend:n});const c=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mve(o.shape,a):new Pve(o.shape,a);return n.runWebGLProgram(c,[o],o.dtype)}const Vve={kernelName:fm,backendName:"webgl",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uve{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=e[1],o=e[2];this.outputShape=e;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve={kernelName:W0,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:o,fillValue:r,center:i}=e,a=n,c=new Uve(s.shape,r),[l,u]=Vx(i,s.shape[1],s.shape[2]),d=[[l,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(c,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Wve=tt({opSnippet:zve}),Gve={kernelName:ld,backendName:"webgl",kernelFunc:Wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hve="return inversesqrt(x);",Kve=tt({opSnippet:Hve,cpuKernelImpl:iue}),qve={kernelName:ud,backendName:"webgl",kernelFunc:Kve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j1{constructor(e,n,s,o,r,i,a=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=mt(r.length),u=mt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";c&&(m="coords[0], coords[1]");const v=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xve{constructor(e,n,s,o,r,i,a=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const l=mt(r.length),u=mt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";c&&(m="coords[0], coords[1]");const v=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o,updates:r}=e,{shape:i}=s,{sliceRank:a,numUpdates:c,sliceSize:l,strides:u,outputSize:d}=Sa(r,o,i),h=[d/l,l];if(d===0)return n.makeTensorInfo(i,o.dtype);const f=Se({inputs:{x:o},backend:n,attrs:{shape:[c,a]}}),p=Se({inputs:{x:r},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;te().getBool("WEBGL_PACK")?v=new Xve(c,a,f.shape.length,p.shape.length,u,h):v=new j1(c,a,f.shape.length,p.shape.length,u,h);const g=n.runWebGLProgram(v,[p,f,m],p.dtype),b=Se({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),b}const Yve={kernelName:ZT,backendName:"webgl",kernelFunc:Qve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jve{constructor(e,n,s,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,s];const r="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=te().getNumber("WEBGL_VERSION")===2?r:i,c=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${c} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zve(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:o,values:r}=e,{side:i}=s,a=new Jve(o.shape[0],o.shape[1],r.shape[1],i),c=[[o.shape[1]]];return n.runWebGLProgram(a,[o,r],"int32",c)}const ebe={kernelName:tN,backendName:"webgl",kernelFunc:Zve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tbe{constructor(e,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],l=[];for(let u=0;u<n.length;u++)l.push(`${a[u]}`),u<e&&c.push(`${a[u]}`);o=c.join(),r=l.join()}const i=mt(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t){const{inputs:e,backend:n}=t,{condition:s,t:o,e:r}=e,i=new tbe(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[s,o,r],cs(o.dtype,r.dtype))}const sbe={kernelName:pm,backendName:"webgl",kernelFunc:nbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const obe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Om};
  float scale = ${Lm};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,rbe=tt({opSnippet:obe}),ibe={kernelName:dd,backendName:"webgl",kernelFunc:rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abe=il+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,cbe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lbe=tt({opSnippet:abe,packedOpSnippet:cbe,cpuKernelImpl:cue}),ube={kernelName:md,backendName:"webgl",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dbe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,hbe=tt({opSnippet:dbe}),fbe={kernelName:pd,backendName:"webgl",kernelFunc:hbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pbe=il+`
  return sin(x);
`,mbe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Ta}
  return result;
`,gbe=tt({opSnippet:pbe,packedOpSnippet:mbe}),vbe={kernelName:hd,backendName:"webgl",kernelFunc:gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bbe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,ybe=tt({opSnippet:bbe}),xbe={kernelName:fd,backendName:"webgl",kernelFunc:ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Cbe=tt({opSnippet:wbe}),_be={kernelName:gd,backendName:"webgl",kernelFunc:Cbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sbe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,paddings:i}=s;$(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((g,b)=>g*b),c=[[0,0]];c.push(...i);for(let g=1+r.length;g<o.shape.length;++g)c.push([0,0]);const l=[],u=xL({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),d=Td(u.shape,r,a,!1),h=Nd(d.length,r.length,!1),f=Ad(u.shape,r,a,!1),p=Se({inputs:{x:u},backend:n,attrs:{shape:d}}),m=Fn({inputs:{x:p},backend:n,attrs:{perm:h}}),v=Se({inputs:{x:m},backend:n,attrs:{shape:f}});return l.push(u),l.push(p),l.push(m),l.forEach(g=>n.disposeIntermediateTensorInfo(g)),v},Ibe={kernelName:vm,backendName:"webgl",kernelFunc:Sbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t){const{inputs:e,backend:n}=t,{indices:s,values:o,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),c=n.readSync(o.dataId),l=n.readSync(r.dataId),u=n.readSync(i.dataId)[0],[d,h,f,p,m]=uue(a,s.shape,s.dtype,c,o.dtype,l,u);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],o.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const kbe={kernelName:nN,backendName:"webgl",kernelFunc:Ebe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:o,newShape:r}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(s.dataId),c=Array.from(n.readSync(r.dataId)),[l,u,d]=due(a,s.shape,s.dtype,i,c);return[n.makeTensorInfo(u,s.dtype,l),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const Tbe={kernelName:sN,backendName:"webgl",kernelFunc:$be};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),c=n.readSync(r.dataId),[l,u]=GO(i,s.shape,s.dtype,a,c,!0);return n.makeTensorInfo(u,s.dtype,l)}const Abe={kernelName:oN,backendName:"webgl",kernelFunc:Nbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),c=n.readSync(r.dataId),[l,u]=GO(i,s.shape,s.dtype,a,c);return n.makeTensorInfo(u,s.dtype,l)}const Dbe={kernelName:rN,backendName:"webgl",kernelFunc:Rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:o,sparseValues:r,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:c,numUpdates:l,sliceSize:u,strides:d,outputSize:h}=Sa(r,o,a),f=!1;if(r.dtype==="string"){const g=n.bufferSync(o),b=n.bufferSync(r),x=qr(n.readSync(i.dataId)[0]),y=aue(g,b,a,h,u,l,c,d,x,f);return n.makeTensorInfo(a,y.dtype,y.values)}const p=new j1(l,c,o.shape.length,r.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[r,o,i],r.dtype),v=Se({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),v}const Lbe={kernelName:iN,backendName:"webgl",kernelFunc:Obe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{numOrSizeSplits:r,axis:i}=s,a=qe(i,o.shape)[0],c=t1(o,r,a),l=o.shape.length,u=new Array(l).fill(0),d=o.shape.slice();return c.map(h=>{const f=[...d];f[a]=h;const p=al({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const Pbe={kernelName:bm,backendName:"webgl",kernelFunc:Fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CI="return sqrt(x);",Mbe=tt({opSnippet:CI,packedOpSnippet:CI,cpuKernelImpl:hue}),Bbe={kernelName:vd,backendName:"webgl",kernelFunc:Mbe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vbe="return x * x;",Ube=tt({opSnippet:Vbe}),jbe={kernelName:M0,backendName:"webgl",kernelFunc:Ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _I="return (a - b) * (a - b);",zbe=bn({opSnippet:_I,packedOpSnippet:_I}),Wbe={kernelName:bd,backendName:"webgl",kernelFunc:zbe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const r=n.readSync(o.dataId),i=fr(r),a=fue(i,"string",s);return n.makeTensorInfo(o.shape,"string",a)}const Hbe={kernelName:B0,backendName:"webgl",kernelFunc:Gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe({inputs:t,attrs:e,backend:n}){const{x:s}=t,o=Hs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,r=new ko(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const qbe={kernelName:_d,backendName:"webgl",kernelFunc:Kbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xbe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=mt(s.length),i=mt(s.length);let a="";if(o===1)a="coords * strides + begin";else{let c=0;a=s.map((l,u)=>(c++,s.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${c-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${e});
      ${r} strides = ${r}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,end:i,strides:a,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=s,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:v,isSimpleSlice:g,begin:b,end:x,strides:y}=Px(o.shape,r,i,a,c,l,u,d,h);let w;if(m)w=Se({inputs:{x:o},backend:n,attrs:{shape:p}});else if(v||g){$(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const _=Ox(b,x,y),S=al({inputs:{x:o},backend:n,attrs:{begin:b,size:_}});w=Se({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([o])){const S=n.readSync(o.dataId),I=Ke(o.shape,o.dtype,S),E=pue(f,I,y,b);w=n.makeTensorInfo(p,o.dtype,E.values)}else{const S=new Xbe(b,y,f);w=n.runWebGLProgram(S,[o],o.dtype)}const C=Se({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const Ybe={kernelName:V0,backendName:"webgl",kernelFunc:Qbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t){const{inputs:e,backend:n,attrs:s}=t,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:c,preserveShortSequences:l}=s,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[p,m]=mue(h,f,o,r,i,a,c,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const Zbe={kernelName:aN,backendName:"webgl",kernelFunc:Jbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:o}=s,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(r.dataId),c=n.readSync(i.dataId)[0],[l,u,d]=gue(a,c,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const tye={kernelName:cN,backendName:"webgl",kernelFunc:eye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:o}=s,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=vue(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const sye={kernelName:lN,backendName:"webgl",kernelFunc:nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oye="return tan(x);",rye=tt({opSnippet:oye}),iye={kernelName:xd,backendName:"webgl",kernelFunc:rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aye=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,cye=tt({opSnippet:aye}),lye={kernelName:wd,backendName:"webgl",kernelFunc:cye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const{inputs:e,backend:n,attrs:s}=t,{tensor:o,indices:r,updates:i}=e,{sliceRank:a,numUpdates:c,sliceSize:l,strides:u,outputSize:d}=Sa(i,r,o.shape),h=[d/l,l];if(d===0)return n.makeTensorInfo(o.shape,r.dtype);const f=Se({inputs:{x:r},backend:n,attrs:{shape:[c,a]}}),p=Se({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),m=Se({inputs:{x:o},backend:n,attrs:{shape:h}}),v=new j1(c,a,f.shape.length,p.shape.length,u,h,!1,!0),g=n.runWebGLProgram(v,[p,f,m],m.dtype),b=Se({inputs:{x:g},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const dye={kernelName:eN,backendName:"webgl",kernelFunc:uye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hye{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[i]*n[i];this.outputShape=s,this.rank=s.length;const o=mt(this.rank),r=fye(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function fye(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<t.length;o++)s.push(`imod(${n[o]}, ${t[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const c=n.readSync(o.dataId),l=o.dtype==="string"?c.map(h=>qr(h)):c,u=Ke(o.shape,o.dtype,l),d=yue(u,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new hye(o.shape,r);return n.runWebGLProgram(i,[o],o.dtype)}const pye={kernelName:Cd,backendName:"webgl",kernelFunc:CL};class mye{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class gye{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function SI(t){let e=1;for(;e<t;)e*=2;return e}function vye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{k:r,sorted:i}=s,a=te().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=te().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=o.shape,u=l[l.length-1];if(n.shouldExecuteOnCPU([o])||u<a||r>c){const E=n.readSync(o.dataId),[O,A]=xue(E,l,o.dtype,r,i);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(r===0)return l[l.length-1]=0,[n.makeTensorInfo(l,o.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(u===1)return[o,Gd({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(o):o,m=ce(l)/u,v=Se({inputs:{x:f},attrs:{shape:[m,u]},backend:n});h&&Si(n,f);const g=SI(r),b=SI(u);let x=null;const y=()=>x===null?[v,v]:[v,x],w=(E,O,A)=>{const P=y(),z=new mye(A),M=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[E],[O]],R=x;x=n.runWebGLProgram(z,P,"int32",M),Si(n,R)};for(let E=1;E<g;E*=2){const O=E*2;for(let A=E;A>=1;A/=2)w(O,A,[m,b])}for(let E=b;E>g;E/=2){const O=y(),A=new gye([m,E/2]),z=[[u],[x===null?1:0],[g]],G=x;x=n.runWebGLProgram(A,O,"int32",z),Si(n,G);const M=g/2,R=M*2;for(let D=M;D>=1;D/=2)w(R,D,x.shape)}let C=x;x=al({inputs:{x},backend:n,attrs:{begin:0,size:[m,r]}}),Si(n,C);let _=pL({inputs:{x:v,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Si(n,v);const S=l.slice(0,-1);S.push(r),C=x,x=Se({inputs:{x},attrs:{shape:S},backend:n}),Si(n,C);const I=_;return _=Se({inputs:{x:_},attrs:{shape:S},backend:n}),Si(n,I),[_,x]}const bye={kernelName:U0,backendName:"webgl",kernelFunc:vye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yye{constructor(e,n,s,o,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let c;switch(o){case"constant":c=1;break;case"reflect":c=2;break;case"wrap":c=3;break;case"nearest":c=4;break;default:c=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${c} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(t){const{inputs:e,backend:n,attrs:s}=t,{image:o,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:c,outputShape:l}=s,[u,d,h,f]=o.shape,[p,m]=l??[d,h],v=[u,p,m,f],g=new yye(d,h,i,a,c,v);return n.runWebGLProgram(g,[o,r],"float32")}const wye={kernelName:j0,backendName:"webgl",kernelFunc:xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t){const{inputs:e,attrs:n,backend:s}=t,{axis:o}=n,{x:r}=e;jd(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(r.dataId),{outputValues:a,outputShape:c,indices:l}=wue(i,o,r.shape,r.dtype);return[s.makeTensorInfo(c,r.dtype,a),s.makeTensorInfo([l.length],"int32",l)]}const _ye={kernelName:z0,backendName:"webgl",kernelFunc:Cye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t){const{inputs:e,backend:n,attrs:s}=t,{value:o}=e;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o,a=i.shape.length,c=o.shape[r],l=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==r&&(l[u++]=i.shape[m]);const d=[],h=new Array(a).fill(0),f=i.shape.slice();f[r]=1;const p=new Array(c);for(let m=0;m<p.length;m++){h[r]=m;const v=al({inputs:{x:i},backend:n,attrs:{begin:h,size:f}}),g=Se({inputs:{x:v},backend:n,attrs:{shape:l}});p[m]=g,d.push(v)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Iye={kernelName:xm,backendName:"webgl",kernelFunc:Sye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eye{constructor(e,n){this.variableNames=["x","segmentIds"];const s=e.windowSize,o=e.batchSize,r=e.inSize,i=e.numSegments,a=i*Math.ceil(r/s);this.outputShape=[o,a];const c="0.0",l="sumValue",u=Math.floor(s/4)*4,d=s%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";r%s>0&&(f=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${c};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,segmentIds:r}=e,{numSegments:i}=s,a=o.shape.length,c=[];let l=0;const u=Dt([l],a);let d=o;u!=null&&(d=Fn({inputs:{x:o},backend:n,attrs:{perm:u}}),c.push(d),l=Bt(1,a)[0]);const h=sR(d.shape,l,i),f=ce([d.shape[l]]),p=Se({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});c.push(p);const m=H0(o.dtype),v=(y,w,C,_,S)=>{const I=y.shape[0],E=y.shape[1],O=nR(E,S),A={windowSize:O,inSize:E,batchSize:I,numSegments:S},P=new Eye(A,w),z=n.compileAndRun(P,[y,C],_);if(c.push(z),z.shape[1]===S)return z;const G=wL({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),M=CL({inputs:{x:G},backend:n,attrs:{reps:[E/O]}});return c.push(G),c.push(M),v(z,w,M,_,S)},g=v(p,"unsortedSegmentSum",r,m,i),b=Se({inputs:{x:g},backend:n,attrs:{shape:h}});let x=b;if(u!=null){c.push(b);const y=di(u);x=Fn({inputs:{x},backend:n,attrs:{perm:y}})}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const $ye={kernelName:wm,backendName:"webgl",kernelFunc:kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye=[hde,pde,vde,xde,Cde,Ide,kde,Tde,Dde,Lde,Mde,Ude,Wde,qde,Yde,Zde,the,rhe,ahe,lhe,fhe,xhe,Che,Ehe,$he,Ohe,Fhe,Vhe,Xue,zhe,qhe,Jhe,ofe,afe,lfe,dfe,ffe,vfe,xfe,_fe,Ife,kfe,Tfe,Rfe,Ofe,Mfe,Vfe,zfe,Hfe,qfe,Jfe,npe,ipe,lpe,hpe,fpe,mpe,vpe,ype,wpe,_pe,kpe,Npe,Dpe,Lpe,Mpe,Upe,Gpe,Xpe,que,Ype,Hhe,eme,sme,ime,Yue,ume,pme,gme,xme,_me,kme,Nme,Ome,Mme,Ume,zme,Kme,Xme,Yme,tge,sge,rge,age,lge,fge,vge,wge,Tge,ede,Dge,Fge,Bge,jge,Nhe,Gge,Kge,Xge,Jge,nve,Zue,ove,ive,cve,uve,dve,Ahe,Ige,pve,bve,Cve,nde,Eve,Tve,Dve,Fve,Vve,jve,Gve,qve,Yve,ebe,sbe,ibe,ube,fbe,vbe,xbe,bhe,kge,_be,Ibe,kbe,Tbe,Abe,Dbe,Lbe,Pbe,Bbe,jbe,Wbe,Hbe,qbe,Ybe,Zbe,tye,sye,Ege,lde,iye,lye,dye,pye,bye,wye,ude,_ye,Iye,$ye,Hge];for(const t of Tye)dN(t);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var Nye={штих:"noun",пяних:"noun",белих:"adjective",борзих:"adjective",малих:"adjective",старих:"adjective",дарнопих:"noun",сухих:"adjective",черемних:"noun",сирих:"adjective",плохих:"adjective",целих:"adjective",жих:"noun",войцих:"noun",скорих:"adjective",бурих:"adjective",чалих:"adjective",серих:"adjective",удалих:"adjective",карих:"adjective",гених:"noun",литвих:"noun",марцих:"noun",сізих:"adjective",яних:"noun",мжачих:"adjective",сірих:"adjective",янбих:"noun",бодрих:"adjective",стрий:"noun",чорторий:"noun",юрий:"adjective",цибрий:"noun",цібрий:"noun",карий:"adjective",куприй:"noun",кирий:"noun",негрий:"noun",губрий:"noun",шкабрий:"noun",замрий:"noun",передрий:"noun",одерий:"noun",жегрий:"noun",жарий:"adjective",зюбрий:"noun",семерий:"noun",лий:"noun",бий:"noun",рий:"noun",вий:"noun",ший:"noun",валий:"noun",крайній:"adjective",осінній:"adjective",кутній:"adjective",середній:"adjective",горішній:"adjective",безродній:"adjective",осадчій:"adjective",кий:"noun",новохатній:"adjective",очеретній:"adjective",рбий:"noun",закутній:"adjective",недавній:"adjective",порожній:"adjective",бокий:"noun",вчерашній:"adjective",огородній:"adjective",трощий:"noun",вчорашній:"adjective",житній:"adjective",нижній:"adjective",синій:"adjective",хорий:"noun",краснобокій:"adjective",хижній:"adjective",забродній:"adjective",калюжній:"adjective",виноградній:"adjective",коломий:"noun",летучій:"adjective",поздній:"adjective",серий:"noun",нагорній:"adjective",фартушній:"adjective",холошвій:"noun",батий:"noun",волошиній:"adjective",жирий:"noun",заможній:"adjective",короткій:"adjective",останній:"adjective",передній:"adjective",піддубній:"adjective",пізній:"adjective",погородній:"adjective",бояжній:"adjective",смий:"noun",задвірній:"adjective",остатній:"adjective",підсадній:"adjective",достатній:"adjective",зимній:"adjective",рябой:"adjective",рудой:"adjective",козодой:"noun",яровой:"adjective",кривой:"adjective",садовой:"adjective",полевой:"adjective",сисой:"noun",плохой:"adjective",сухой:"adjective",гаєвой:"adjective",глухой:"adjective",горевой:"adjective",кутовой:"adjective",копаной:"adjective",злой:"adjective",сєдой:"adjective",благой:"adjective",водостой:"noun",косой:"adjective",ліждвой:"noun",большой:"adjective",половой:"adjective",чорной:"adjective",косогой:"adjective",золотой:"adjective",лановой:"adjective",яловой:"adjective",дорогой:"adjective",німой:"adjective",первой:"adjective",русой:"adjective",худой:"adjective",цаподой:"noun",авасілой:"noun",валовой:"adjective",гнідой:"adjective",молокопой:"noun",золотобой:"noun",ярковой:"noun",аміхалакіой:"noun",седой:"adjective",крутой:"adjective",кучной:"adjective",слепой:"adjective",дурной:"adjective",молодой:"adjective",бухой:"adjective",самотній:"adjective",біла:"adjective",бура:"adjective",велика:"adjective",домовина:"noun",рослина:"noun",врецьона:"noun",глибока:"adjective",висока:"adjective",гладка:"adjective",грицина:"noun",гужва:"noun",ковінька:"noun",дика:"adjective",діброва:"noun",кицька:"noun",ківа:"noun",лепка:"adjective",островерха:"adjective",петрина:"noun",прудка:"adjective",семенина:"noun",турчина:"noun",чуприна:"noun",швидка:"adjective",щербина:"noun",яковина:"noun",синьоока:"adjective",крива:"adjective",сліпа:"adjective",глуха:"adjective",жовта:"adjective",добра:"adjective",хоробра:"adjective",сухоребра:"adjective",гарна:"adjective",мала:"adjective",весна:"noun",зла:"adjective",жива:"adjective",ніяка:"adjective",ціла:"adjective",молода:"adjective",далека:"adjective",золота:"adjective",жвава:"adjective",дорога:"adjective",коса:"adjective",литва:"noun",чужа:"adjective",тепла:"adjective",груба:"adjective",слава:"noun",брова:"noun",стара:"adjective",катерина:"noun",василина:"noun",нижня:"adjective",худа:"adjective",проста:"adjective",дівоча:"adjective",крута:"adjective",метка:"adjective",чорна:"adjective",сторона:"noun",невкрита:"adjective",руда:"adjective",темна:"adjective",проява:"noun",тиха:"adjective",божа:"adjective",весела:"adjective",бабина:"adjective",суха:"adjective",люта:"adjective",стіна:"noun",вража:"adjective",хороша:"adjective",легка:"adjective",козача:"adjective",польща:"noun",недужа:"adjective",розлога:"adjective",гаряча:"adjective",середня:"adjective",торішня:"adjective",сита:"adjective",гостра:"adjective",осіння:"adjective",невесела:"adjective",москва:"noun",широка:"adjective",половина:"noun",синя:"adjective",сира:"adjective",довга:"adjective",коротка:"adjective",лукава:"adjective",абияка:"adjective",королева:"noun",чайна:"adjective",сіра:"adjective",сутула:"adjective",сава:"noun",дебела:"adjective",мокра:"adjective",убога:"adjective",безрука:"adjective",димна:"adjective",мила:"adjective",боса:"adjective",гола:"adjective",красноока:"adjective",остання:"adjective",десна:"noun",житня:"adjective",тризна:"noun",цупка:"adjective",порожня:"adjective",ліва:"adjective",сьома:"adjective",вовна:"noun",сова:"noun",бела:"adjective",ряба:"adjective",гніда:"adjective",гожа:"adjective",кисла:"adjective",кутня:"adjective",огниста:"adjective",мудра:"adjective",дужа:"adjective",підстава:"noun",бодра:"adjective",бадьора:"adjective",кривохижа:"adjective",прихожа:"adjective",побожа:"adjective",пригожа:"adjective",петрунька:"noun",ковинька:"noun",кишинька:"noun",кропивянька:"noun",зеленька:"noun",лабунька:"noun","м'якенька":"adjective",бухонька:"noun",сиза:"adjective",маза:"adjective",блаза:"adjective",улина:"adjective",ейвена:"adjective",еремина:"adjective",ена:"adjective",клята:"adjective",периста:"adjective",працевита:"adjective",свіжа:"adjective",рижа:"adjective",копистира:"noun",скорина:"noun",більченя:"noun",кривошеня:"noun",нестереня:"noun",захарченя:"noun",войценя:"noun",протасеня:"noun",олещеня:"noun",денисеня:"noun",стрельченя:"noun",молодоженя:"noun",заграва:"noun",неменша:"adjective",неменьша:"adjective",меньша:"adjective",паший:"noun",пєша:"adjective",дзвінка:"adjective",пухка:"adjective",безпала:"adjective",вобла:"adjective",горжа:"adjective",горіла:"adjective",китаста:"adjective",лиса:"adjective",осадча:"adjective",пелехата:"adjective",підпала:"adjective",ставнича:"adjective",чала:"adjective",чубата:"adjective",целомудра:"adjective",кара:"adjective",коцупатра:"adjective",немудра:"adjective",шара:"adjective",шингира:"adjective",передера:"adjective",далекора:"adjective",жара:"adjective",яра:"adjective",золотопера:"adjective",остра:"adjective",хитра:"adjective",прозора:"adjective",карчинска:"adjective",гнила:"adjective",хижа:"adjective",крижа:"adjective",погоріла:"adjective",куца:"adjective",солодка:"adjective",безверха:"adjective",усата:"adjective",довгопола:"adjective",щербата:"adjective",пишна:"adjective",хоружа:"adjective",мирна:"adjective",долга:"adjective",бєла:"adjective",надточа:"adjective",гаркава:"adjective",мягка:"adjective",топча:"adjective",товста:"adjective",блага:"adjective",захожа:"adjective",боліла:"adjective",басиста:"adjective",басіста:"adjective",люба:"adjective",горбата:"adjective",драна:"adjective",куряча:"adjective",куса:"adjective",зайва:"adjective",кругла:"adjective",брижата:"adjective",скора:"adjective",плоха:"adjective",горяча:"adjective",тверда:"adjective",невідома:"adjective",картава:"adjective",горна:"adjective",черна:"adjective",гуржа:"adjective",гикава:"adjective",шита:"adjective",сєра:"adjective",сіда:"adjective",гнуча:"adjective",слизька:"adjective",бистра:"adjective",полева:"adjective",парубоча:"adjective",вібла:"adjective",мазна:"adjective",волохата:"adjective",шалена:"adjective",щира:"adjective",слаба:"adjective",суковата:"adjective",нища:"adjective",одинока:"adjective",сядриста:"adjective",яшна:"adjective",ракоча:"adjective",губата:"adjective",летуча:"adjective",патлата:"adjective",вяла:"adjective",гірна:"adjective",кіптіла:"adjective",кривовяза:"adjective",лиха:"adjective",подуфала:"adjective",буйна:"adjective",зайшла:"adjective",купрата:"adjective",мерзла:"adjective",варгата:"adjective",горда:"adjective",драпата:"adjective",загризла:"adjective",кичата:"adjective",оковита:"adjective",тлуста:"adjective",тонка:"adjective",коптіла:"adjective",погожа:"adjective",товстокора:"adjective",гладенька:"adjective",глубока:"adjective",періста:"adjective",виконавча:"adjective",кохана:"adjective",кризька:"adjective",німа:"adjective",росла:"adjective",некипіла:"adjective",плакуща:"adjective",похила:"adjective",строга:"adjective",богата:"adjective",заливча:"adjective",крамна:"adjective",поставнича:"adjective",безуса:"adjective",плоска:"adjective",сергата:"adjective",сухотепла:"adjective",толста:"adjective",шарпата:"adjective",безребра:"adjective",душна:"adjective",змерзла:"adjective",золотоверха:"adjective",наточа:"adjective",положа:"adjective",рокоча:"adjective",горлата:"adjective",скупа:"adjective",бібла:"adjective",ільніцка:"adjective",рогоча:"adjective",сміла:"adjective",щедра:"adjective",безклуба:"adjective",білоока:"adjective",шерстка:"adjective",безкишка:"adjective",летюча:"adjective",ловча:"adjective",піша:"adjective",раба:"adjective",суховерха:"adjective",тягла:"adjective",шаблиста:"adjective",шубала:"adjective",бедрата:"adjective",верлата:"adjective",галича:"adjective",запухла:"adjective",зубата:"adjective",кунта:"adjective",некрита:"adjective",пахуча:"adjective",теляча:"adjective",шпарка:"adjective",глива:"adjective",косата:"adjective",любима:"adjective",низька:"adjective",окрепка:"adjective",робоча:"adjective",слизькоуха:"adjective",хропата:"adjective",цівата:"adjective",шията:"adjective",безборода:"adjective",голоборода:"adjective",голомоза:"adjective",горєла:"adjective",єжела:"adjective",калиста:"adjective",корчиста:"adjective",курна:"adjective",надута:"adjective",пікуща:"adjective",погорела:"adjective",савіцка:"adjective",тупа:"adjective",дзяна:"adjective",жовкла:"adjective",колюча:"adjective",мазана:"adjective",сапата:"adjective",світа:"adjective",сухолитка:"adjective",цаберяба:"adjective",цвіла:"adjective",чупла:"adjective",асадча:"adjective",гарагата:"adjective",дзюбата:"adjective",долгопола:"adjective",жилава:"adjective",козина:"adjective",крепка:"adjective",ласа:"adjective",личката:"adjective",лобата:"adjective",льогка:"adjective",мишаста:"adjective",невмита:"adjective",перката:"adjective",рідка:"adjective",саплива:"adjective",тонкошкура:"adjective",цепла:"adjective",беззуба:"adjective",бушна:"adjective",бяла:"adjective",кріпка:"adjective",лакома:"adjective",майна:"adjective",нагла:"adjective",огніста:"adjective",осядла:"adjective",рабоча:"adjective",рапава:"adjective",розмаїта:"adjective",тупча:"adjective",ушата:"adjective",чорноока:"adjective",галянта:"adjective",голомовза:"adjective",одажа:"adjective",орлата:"adjective",пашиста:"adjective",пробита:"adjective",сепіта:"adjective",слабка:"adjective",цікава:"adjective",шамка:"adjective",шибиста:"adjective",баліцка:"adjective",бита:"adjective",боляча:"adjective",глабчаста:"adjective",гусліста:"adjective",деньдобра:"adjective",замліла:"adjective",лабата:"adjective",мяка:"adjective",несміла:"adjective",нєма:"adjective",обща:"adjective",одайна:"adjective",оката:"adjective",остиста:"adjective",пахуща:"adjective",пстра:"adjective",сладка:"adjective",храпата:"adjective",чесніша:"adjective",чула:"adjective",бідноша:"adjective",довгорука:"adjective",довгоша:"adjective",іваніцка:"adjective",корната:"adjective",кулява:"adjective",літуча:"adjective",марна:"adjective",медзата:"adjective",обмокла:"adjective",піджара:"adjective",побоча:"adjective",сагата:"adjective",удала:"adjective",усяка:"adjective",байдужа:"adjective",бескорса:"adjective",гірка:"adjective",главата:"adjective",горча:"adjective",горька:"adjective",добровольска:"adjective",довгопта:"adjective",досужа:"adjective",драпята:"adjective",камяна:"adjective",каправа:"adjective",киричата:"adjective",колота:"adjective",комарніцка:"adjective",люзна:"adjective",молодша:"adjective",неумита:"adjective",пересідла:"adjective",підла:"adjective",пухла:"adjective",семяниста:"adjective",сіроока:"adjective",стряпча:"adjective",твереза:"adjective",цибульска:"adjective",чарна:"adjective",ярка:"adjective",безгуба:"adjective",білоборода:"adjective",болєла:"adjective",бровата:"adjective",гікава:"adjective",голобока:"adjective",драбата:"adjective",жарка:"adjective",каплата:"adjective",кісла:"adjective",ковалевска:"adjective",ковальска:"adjective",козловска:"adjective",крилата:"adjective",куцка:"adjective",малоока:"adjective",мгка:"adjective",немята:"adjective",непроста:"adjective",нехороша:"adjective",пелихата:"adjective",підласа:"adjective",подпала:"adjective",руцка:"adjective",семениста:"adjective",услиста:"adjective",шорстка:"adjective",хила:"adjective",буката:"adjective",васалата:"adjective",вибла:"adjective",видойна:"adjective",виловата:"adjective",гарча:"adjective",горела:"adjective",дута:"adjective",зибла:"adjective",індича:"adjective",кальноока:"adjective",карнауха:"adjective",кривобедра:"adjective",кричфалуша:"adjective",кубата:"adjective",кужда:"adjective",ломана:"adjective",мацевита:"adjective",івашина:"noun",солоха:"adjective",перерва:"noun",проскура:"adjective",бова:"noun",сметана:"noun",дуброва:"noun",проскурня:"noun",родіна:"noun",єна:"noun",солонина:"noun",ліщина:"noun",лугина:"adjective",сосна:"noun",гавва:"noun",ужва:"noun",кулина:"adjective",халява:"noun",холява:"noun",підкова:"noun",крайня:"adjective",хохотва:"noun",цибулька:"noun",нікульча:"noun",кравчина:"noun",лупина:"adjective",лихошва:"noun",думбрава:"noun",плахотня:"adjective",покутня:"adjective",пона:"noun",семена:"noun",грона:"noun",єва:"noun",парасківа:"noun",шова:"noun",бурдужа:"adjective",козюберда:"adjective",говтва:"noun",приколота:"adjective",варнава:"noun",гурина:"adjective",рябокобила:"noun",кучина:"adjective",савва:"noun",кремена:"noun",малая:"adjective",горішня:"adjective",бурдюжа:"adjective",слаква:"noun",городня:"adjective",лиштва:"noun",цяцька:"noun",походня:"noun",недавня:"adjective",долішня:"adjective",марюхна:"noun",борона:"noun",колошва:"noun",семенча:"noun",затона:"noun",заплава:"noun",краснопера:"adjective",рибитва:"noun",сидора:"adjective",краплина:"noun",крутиголова:"noun",бакалина:"adjective",немна:"noun",очеретня:"adjective",пробийголова:"noun",мальона:"noun",сажина:"adjective",вчерашня:"adjective",бузина:"noun",забийворота:"noun",магльона:"noun",нейчева:"noun",потороча:"noun",ревіна:"noun",матьора:"adjective",святина:"noun",хіна:"noun",кожина:"adjective",наріжня:"noun",леона:"noun",передня:"adjective",савина:"adjective",сікачина:"noun",кльова:"noun",недолуга:"adjective",шкоропата:"noun",карасава:"noun",морева:"adjective",мустафіна:"noun",цьова:"noun",бубна:"noun",катона:"noun",міна:"noun",похвала:"noun",слоква:"noun",статіва:"noun",строна:"noun",вова:"noun",карева:"adjective",місюна:"noun",швая:"noun",бальва:"noun",вершина:"noun",врона:"noun",білокобила:"noun",гордина:"noun",кольва:"noun",льова:"noun",перекліта:"noun",основа:"noun",харена:"noun",борозна:"noun",будаква:"noun",каранікола:"noun",палесіка:"noun",рожина:"noun",штана:"noun",вицина:"noun",дубна:"noun",жовна:"noun",зіва:"noun",катарина:"noun",похмура:"adjective",фесина:"noun",шемена:"noun",галутва:"noun",зарева:"noun",ковальва:"noun",мирона:"noun",новосела:"noun",пачина:"adjective",совва:"noun",гіна:"noun",корона:"noun",новоженя:"noun",підберезня:"adjective",ряднина:"noun",сакська:"noun",канна:"noun",лукачина:"noun",плачінта:"noun",редьква:"noun",софина:"adjective",шатня:"adjective",блозва:"noun",вчорашня:"adjective",гриценя:"noun",куропатва:"noun",людва:"noun",стехна:"noun",парахоня:"noun",плєва:"noun",яворина:"noun",бендина:"noun",жовтонога:"adjective",конева:"adjective",мандалина:"noun",мацина:"noun",перезва:"noun",похвата:"noun",токмина:"noun",тюрина:"adjective",гицина:"noun",дзіна:"noun",куява:"noun",малонога:"adjective",стоколоса:"adjective",тимина:"adjective",біднина:"noun",вдовина:"adjective",лисохмара:"noun",микитина:"adjective",полівара:"noun",рибонька:"noun",ружина:"noun",тишина:"noun",цюрмаста:"noun",чалая:"adjective",васина:"noun",воїна:"noun",гулая:"noun",кова:"noun",она:"noun",палісіка:"noun",підошва:"noun",свидина:"noun",тирсина:"noun",хаврона:"noun",зона:"noun",кнзєва:"noun",розна:"adjective",ронжина:"noun",рудомина:"noun",сальва:"noun",скільсара:"noun",служала:"noun",фомина:"adjective",чупина:"adjective",шалупня:"noun",джупина:"noun",зоська:"noun",кузява:"noun",неледва:"noun",равва:"noun",разьва:"noun",шкорина:"noun",білозора:"adjective",бранціра:"noun",випна:"noun",галина:"adjective",мандаліна:"noun",мицька:"noun",мячина:"adjective",недосєка:"noun",пристая:"noun","м'яка":"adjective",вовчина:"noun",гринява:"noun",дівонька:"noun",ігіна:"noun",обійдихата:"noun",хижня:"adjective",челядина:"noun",янева:"adjective",голева:"adjective",дзюнька:"noun",дубрава:"noun",лигомина:"noun",мална:"noun",мархева:"noun",несправа:"noun",озява:"noun",панна:"noun",пупена:"noun",силява:"noun",сухокобила:"noun",цюрмоста:"noun",чевельча:"noun",чівільча:"noun",башева:"noun",бражна:"noun",варавва:"noun",волна:"noun",гольча:"noun",густа:"adjective",достатня:"adjective",зуграва:"noun",карапулька:"noun",кірна:"adjective",крапіва:"noun",луковина:"noun",мамона:"noun",мелещеня:"noun",мряна:"noun",параскева:"noun",похідня:"noun",пріхна:"noun",свтина:"noun",сьоська:"noun",терепіща:"noun",ціцяла:"noun",бодаква:"noun",гальвіта:"noun",деревенча:"noun",дона:"noun",дубена:"noun",задависвічка:"noun",йовва:"noun",капаціла:"noun",котельва:"noun",лісота:"noun",малюська:"noun",підсадня:"adjective",рєва:"noun",сувора:"adjective",хаджава:"noun",хомина:"adjective",псина:"noun",бобина:"noun",болотня:"adjective",бруква:"noun",кіона:"noun",ковбінька:"noun",кривонога:"adjective",лєва:"noun",мухина:"adjective",нефортуна:"noun",органіста:"noun",пасулька:"noun",пристава:"noun",бачина:"noun",безкорса:"adjective",бєлокобила:"noun",борзина:"noun",бружина:"noun",воротня:"adjective",гальона:"noun",голтва:"noun",горемульта:"noun",дацина:"noun",забанджала:"noun",злая:"adjective",кікена:"noun",коропатва:"noun",кузина:"adjective",лапунька:"noun",літава:"noun",мінчуна:"noun",на:"noun",ничая:"noun",новіцка:"adjective",пенькна:"noun",пухна:"noun",пуцята:"noun",рісна:"noun",розмаіта:"noun",румина:"adjective",свтна:"noun",сердита:"adjective",січінава:"noun",сментина:"noun",трізна:"noun",шкуропата:"noun",безхутра:"adjective",гальва:"noun",гнєда:"adjective",гребенча:"noun",гусонька:"noun",калабанька:"noun",козупляка:"noun",лапина:"adjective",мурина:"adjective",некульча:"noun",орона:"noun",парна:"adjective",пліва:"noun",приходька:"noun",сенина:"noun",солотва:"noun",тетева:"adjective",хавана:"noun",царева:"adjective",ахалая:"noun",варенька:"noun",варшава:"noun",вересоча:"noun",галунька:"noun",гліва:"noun",голина:"adjective",грузька:"adjective",гудина:"noun",євона:"noun",кірева:"adjective","кожем'яка":"noun",колоберда:"adjective",курінька:"noun",маржина:"noun",мигалина:"noun",мікава:"adjective",падва:"noun",паланичка:"adjective",палена:"adjective",подкова:"noun",ратушня:"adjective",селегейна:"noun",сминтина:"noun",сумина:"adjective",теміркая:"noun",ухата:"adjective",хавроня:"noun",холоста:"adjective",ціва:"noun",чернята:"noun",чикольва:"noun",шалина:"adjective",юдина:"adjective",адвена:"noun",балева:"adjective",брона:"noun",вербовата:"adjective",веремєва:"noun",волчаста:"adjective",гафина:"adjective",голутва:"noun",закрева:"noun",каджая:"noun",кальченя:"noun",капаниста:"adjective",кикина:"adjective",костерева:"noun",кривокобила:"noun",кулєва:"noun",лавна:"noun",маліцка:"adjective",молдова:"noun",моркова:"noun",пажина:"adjective",перевернихата:"noun",пилева:"adjective",піддубня:"adjective",постіва:"noun",пуста:"adjective",суботня:"adjective",фадеева:"adjective",ходаніцка:"adjective",хохітва:"noun",цибата:"adjective",черноока:"adjective",чкадуа:"noun",чокена:"noun",шепетина:"noun",шербина:"noun",яка:"adjective",ятва:"noun",безена:"noun",безшкура:"adjective",безязика:"adjective",белая:"adjective",берулава:"noun",бузна:"noun",бурсала:"noun",бучаста:"adjective",вчина:"noun",гапона:"noun",гернажа:"noun",гордуна:"noun",горсва:"noun",горясва:"noun",грицька:"noun",двіжона:"noun",задурня:"adjective",заслона:"noun",зачешигрива:"noun",йона:"noun",качна:"adjective",козовіта:"noun",криворота:"adjective","кур'ята":"noun",лозна:"adjective",люлява:"noun",лютая:"adjective",матухна:"noun",накутня:"adjective",плохая:"adjective",бухая:"adjective",самотня:"adjective",панібудьласка:"noun"};/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Aye{encode(e){const n=new Uint8Array(1);switch(e.wordClass){case Ja.NOUN:n[0]=1;break;case Ja.ADJECTIVE:n[0]=0;break;default:throw new TypeError(`Invalid word class: "${e.wordClass}".`)}return n}decode(e){if(e.length<1||e.length>1)throw new RangeError("Invalid vector length.");const n=e[0];if(n<0||n>1)throw new RangeError("Invalid vector value.");return{wordClass:n>=.5?Ja.NOUN:Ja.ADJECTIVE}}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Rye=20;/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Dye{constructor(e,n=0){this.vectorSize=e,this.unknownCharcode=n}encode(e){var n;const s=new Uint8Array(this.vectorSize),o=e.slice(-this.vectorSize).toLowerCase().padStart(this.vectorSize,"-");for(let r=0;r<o.length;r+=1){const i=o[r];s[r]=(n=ff[i])!==null&&n!==void 0?n:this.unknownCharcode}return s}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */te().set("IS_NODE",!1);class Oye{constructor(e){this.modelLoader=e,this.modelPromise=null,this.wordTransformer=new Dye(Rye),this.familyNameClassTransformer=new Aye}async classify(e){let n=this.getCached(e);if(n!=null)return n;const s=await this.loadModel(),o=this.wordTransformer.encode(e),r=await s.predict(Ph([o])).data();return n=this.familyNameClassTransformer.decode(r),n}getCached(e){let n=null;const s=Nye[e.toLowerCase()];return s&&(n={wordClass:s}),n}async loadModel(){return this.modelPromise==null&&(this.modelPromise=Gee(this.modelLoader)),this.modelPromise}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var Lye={dateSaved:"2023-02-25T18:20:32.974Z",modelTopologyType:"JSON",modelTopologyBytes:1659,weightSpecsBytes:428,weightDataBytes:4356},Fye={class_name:"Sequential",config:{name:"sequential_1",layers:[{class_name:"Embedding",config:{input_dim:34,output_dim:16,embeddings_initializer:{class_name:"RandomUniform",config:{minval:-.05,maxval:.05,seed:null}},embeddings_regularizer:null,activity_regularizer:null,embeddings_constraint:null,mask_zero:null,input_length:null,name:"embedding_Embedding1",trainable:!0,batch_input_shape:[null,null]}},{class_name:"SimpleRNN",config:{name:"simple_rnn_SimpleRNN1",trainable:!0,units:16,activation:"relu",use_bias:!0,kernel_initializer:{class_name:"VarianceScaling",config:{scale:1,mode:"fan_avg",distribution:"normal",seed:null}},recurrent_initializer:{class_name:"Orthogonal",config:{gain:1,seed:null}},bias_initializer:{class_name:"Zeros",config:{}},kernel_regularizer:null,recurrent_regularizer:null,bias_regularizer:null,activity_regularizer:null,kernel_constraint:null,recurrent_constraint:null,bias_constraint:null,dropout:0,recurrent_dropout:0,return_sequences:!1,return_state:!1,go_backwards:!1,stateful:!1,unroll:!1}},{class_name:"Dense",config:{units:1,activation:"sigmoid",use_bias:!0,kernel_initializer:{class_name:"VarianceScaling",config:{scale:1,mode:"fan_avg",distribution:"normal",seed:null}},bias_initializer:{class_name:"Zeros",config:{}},kernel_regularizer:null,bias_regularizer:null,activity_regularizer:null,kernel_constraint:null,bias_constraint:null,name:"dense_Dense1",trainable:!0}}]},keras_version:"tfjs-layers 4.2.0",backend:"tensor_flow.js"},Pye=[{name:"embedding_Embedding1/embeddings",shape:[34,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/kernel",shape:[16,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/recurrent_kernel",shape:[16,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/bias",shape:[16],dtype:"float32"},{name:"dense_Dense1/kernel",shape:[16,1],dtype:"float32"},{name:"dense_Dense1/bias",shape:[1],dtype:"float32"}],Mye="D3HrvZUs7rxT6Vu+tVsfvPLyB70zbt695ECPvKyKWj7TnUO+JZ9pvs8MkL3/1DQ+kftzvPGZZL4aDpe8KiOnvSvRHz52vQK9mGiSPm50B72RCfM+7hW6PSOuTz7b9zG+M5MOPv/mYL7Q9Rk+aPgRvrfQuT6mQ2Q+eOawPp/PpLyM9yY+zB4APT27n75OVUk+V8y6vetFyD0zPlW+sqPfPER8Ub6J1pI+5QwEvcZktT12HLW+FSFGPU6s2ryQapW9/MNNvoK1t71R5sK8N6Y/vjqBzTtusl2+0Ks8PpZOQ74ua5U9TOIfvkpgHDxho/294hcTPkJaiL1iXTo9o28bPhnMBr69EoG8CAeCvtgxXT5kMKq+KnLfPbScM73jYjw+LTa8vSeQWj49+cU7/FH2PKtOwr5y8K29GMMdvrkIgb0wK4C8Zeq2vXlG+L15O4c+CaFGvpmCjD5guBg+0AAQPv0EjT3CdZ0+vLOBulXEAb7VVpi+WldAPpIP8T0ETFm+NcLIPZix17rKGEW+n8jxPfT8hr43TLC8esPRvX6k4D1lZ0C+WERdPo4Qab4SdWw+uWSevp7+zTjX5Xi8nw+ZvldSb7xUfke7HX01PVOV2zzFqV2+SqcNvvPUTz0nzZi9Zl+ePWj6Wr3PLjY+vbjrvSRr6b1es/w8oaLjPUC0G72spye9rsomPtW/t72QYEy9AtR6PuX44z1dLrk9k6HAPE1+Eb7w1mY+N8MSvuMLsj1qmsO6JrRAvsJowr7iA1E+udZGPDLR57xRSj8+GFSnvYNUujxIvpM8FHmHvkr8QD38Po29LslnvShYOD45FAE7vfaWPbnegruqB2W9MdUkPpskUb3YGTU+L3gwvQhAYD4ed66+qJQUvjydBr7bSam8fYz/PCTisD7GYoQ+HDxJvSaIR77s3u+8sVTkvaDBaL13FBs+Z8T4vT4aKj2d4DC7ft+GPvVXFLxGXGI9RJ9avl7RCD6ujIy+M+/zPQbAtr3B2+c9BpZcPYIBTj7QNsM95bqEPc221T3u7TO+M2PIPU/BQb78/nk+f4TmvV5Elj0VOAK+0Y+DPq0GkL364pI98CGUvjK4IL1CLoK+kohXvTS3I76BpcM9WE0Rva5vkz301Ui+CLe7vWkLnT1sjpM8EYyWPWblIryk+gI+gnQSvu9XKL7jtni9Rc/IvaonHj2sKBc+VzRovpdOpT64szY+OavnvfzjeLuBH62+OqC2OoeMBr0eJVi7ST7CPLK/3jxTOoC9BRUSPjNBaD6OIlm+7ApUPlbsWj5KIKi+J9F1Pfi88L1+JdA9a6F+PsiRub06rh2+HlXnPb5Wj774l+i6nifjvWMCtL2WnqW9pUNdvjQM4L0ZJDy9lZ+LPbJWhj2hUZO+iWF0vhq17zqKwOI9Qq6sPWo8gD3c0co9/5WaPLN6PL6HOLO8fXvUvEF2IL4QJ7S98UzCPZJTlb6VUCM+y7dqvkJXyTyxD+I9N6PXvUxuqr0jiuM9p1OgO/wUFL07zEy+n5rPvSLifbt4N5e+kbdRviF6Db0ZSjo+B+dXvqB+iT7nFI68Z9bUPU9FGT21fz4+fee2vaIHqLzRTtG8aGggPqQlpD1GORk9/FpnPjatAL60OPg8x+qAPdU74zxSk6+9lYwdPikogr6pxao99PmXvH+yEz4zu5U9IeURPXqY9LpuvYk8OGmYvFX7+TtuUaO9qg0GPph0Xr5vdYM+0deHvozgtryfgDC8DaCGPTVxHb6q0fI97pWqPOXMAj7Y9ae+fljRuoumt71vblO+UaetPcadt7yiUYi9R9x8PqXbmb4V9gK+v2jjvVsTU72VAJ29JC1vPcpy1D2uNZM9N5mlvru77rxAZSo9jZWkvv+0HD6CY6k9RvnyvLM8Wr4/Yjo+aEr4vcUQkj3Ef7+7DusLvhf0oLxUt1u+LdOWPndY+Ty5+Dq+QfqQvqgCbj7V0L68swkNviGjaz0SkyQ+h9uuvckW97rM35m+O7ERPQvQ4L2XN3a9XwqPPifY7TynN0i9enwJPWh2Tj27c02+k0bpPWtEGz4p+qs9DzsKPhlEoD7U1qM9v7SAvNgeIr7tPJM9om6CvhmNcz7pBIa9HEvlPRmEGj7SzgE9tdoAO8dkeT2N2Xm9ChofvhVPSj19rZG+A2PfPVrax72zacc9YWsTvjSKAj4inbu9GbJGvSEnt76qFeq8JsAnvZ0cO75Lk7e5G8+WPrc5Cb3RGVg+xwxfvgTMNr18pdU9U49jPaRh5rg8G2Q+iUtrObd+jT0FTYG+XgVgvKwXJr6TWuG9BWosPlr9pT6IF2G+boCIvU0FOb39ivu9aMA5viC1S714C3q+CES6Pt11j76mNqk+/btevCcEVL7z5cK+ALgyPJeTPb0+7O+7lftrPslPZz1EqIY9DWKYvdtgWL5/DwI9Q2NFvJhKcb0MMQo+NtltPWZcmT2FlVA9V5Nnvc9IJr0TXCA+nAIuPoF7xbon0SQ+Kwi8ve0ePb6O3++9k2/GvZoLlrxRDM48DwOkvEiWIz7jsgC+NYZzvTu7Jb7Jcgm8qAoyPg8zkT3o8UI+7Mt/vZsaYj7UZDm+Z4BTPBgkQr7CSTs+PKpvPbkSED3tAaW9LJ9APo74Fz62CFe8xMDCPi83F76ttk++K6FGvQkDDr42fbG+N9cbPvP1Br2CU1c+qukfvu3DJz6Vjfy8jlM9PZNaKL4Ceu29dDVCvoG7fD5qTLu75+YoPXt8GD7ey2U+KpynvemmCL1L1VC9LsfhvcoBND44he273UFiPrLzK72XXPS9ZjZGPtBwh7gwW2i+ccbxvXtoMj4Q/u49AzHBvoTjHD40AuW+OiwYP4x9JD6PGAY/KN7+Pc0xhb6OqxY9AptQvbc7Or39a9e6DJ/zPvd+iz6XX7g6kqsEP5LI1L7ICBk+1k5SP0lR0T43qYI+kbFLvcUh5L7+v90+5mnZveLTxj03yAS+phJLvW7x3b4m3J68GeeBvlrhgj05ac++0Yyfvcrz7L1/Y/i+ZjMKPhEy6j3ImRu+fRRuPkunGL5dMVG+Yd5Fv6ys1z6PXYI+JhzOvaGxDT4p38I+QcDHPtkxbb0XnjM/ogGYviZrLj291se+iNNqvpZuUb7nas8+lj4tvvyQ3D7w+FO9r4ybPs7MJD+WsIG9pGxHPqmQo75RdUG/gFs2vRXbrj7n87w9aGosPm8vDr/oUeO+2pWxPsk1RT7lvPS+YBmZvkDPU745ORi/BxbNPg83pD2KOSq9Nh0tPw6bSj+WVTk97hLcPnMDpT7GgXW8dL46vltPvb11QOu9CeYDPYDxwbx5UQ8+MnesPb+Ajj7Uv7m+qE+TvM+Qt77g88s+7940P8/1zj5p9+g+FugoPgNebT69zXg+IbhFvnHq6LsVozg+iIaBPau6Kr6tTOG+U1bhPS6zFD64rqY/FZebvhOPeL5DGXo+dwgLPjKu6z5+X78+iAsNPrs/Pb+RQoe+6MyqvWutu75ml7G+3Casvq63/b4exKi9+5lMv7V/yb4twI49cbIcv/+5/r5lWxE/78Q+PhjngT4SENI9xZKXPmmQEb9UJGK+eYE3vtOLiDxf4zo+9KX5Pl0APj9PhqA+i/wMv1iRsjzngaK+/ocBv8RUnr0hPdM+YAshv896DL1aukY+kiIJvsKhvD66FTi++84Fv5vWjL4lr6W+OLvyvba/krzwXgm9X8rUvv+XNb7jhSo/zfCAPLRlqD4Fn5S+DeQfP0847T7NIZ4+/gMAPxyfcT6VQOM+UOmWvWDtrD4TLFW9NGQSveJN9T7AuFm+MvUSv/TnFz8uw68+k05IPj26MTwDLsW+hsLFvifDqD7Z6d28z+AOv1DeZL8TnA++mrwBvT0BGL5ireW+PLbOOQjsJjzUmya/CcavOz8kwr70lmK+PHcmPsmi9r5VeAI+yly7PSGkIT6xV1Q/uHsKP4WFir4DBcc+SIJuPlP0Lb5Nufu+dKc3vk/X4L2Qvyo/jJSCPr3+Vr7NNA4/5AqcPoYisjuvO6g9JGKRPgxvQj/bUnG8yqAbP8wDO75rdkO+keIuPvrKxT4VCoQ9fx3XPih9K77kIOg99g2gPcrn4rxDzyy+TDdxPpzmHz//YWM+PIXFvTGs4z5SaaE9NAwkv4Qcub6gS3g+6Wa0vf3qJD8NDC2/q4z6PFVEob5p8yG+uSjhvjAMgD4GQ2Q/+EfRPlrsL79K2PO+FyOrPav1lT6vSzQ+nQOovRiVMD4Yfg4+weDxPv9V8b3ix407T0mFvEXdYT4DaKq+rE4YviLa2r4q/vI7hVWOvWgaV77A7QU/OU2iPp8QQT58RIA+Lbf+vo65Fz1RDRw+mv6WvdOImj4/IyY9a+vPO/pDuj6WiFe94SnbvW0cAb5HUcQ8croTvdeGIT6Q5p89/2EpPyPapj33gSS+q161vhFrSj00b5A9P6g4vssdob5sS5G+r72gvUDqCj+C5+a9lJHFPjtFxz10OYs+qXakvlUu5Trwp749nrcQPbAzwr5pCs8+UhoIvsHVdT7iw+i+UYxzPgTn5T50arg+R/4IP7kH2T2cguW+pQX+vFqQdr3z5yY+SdURProPID4CXhA9crIcP/7a4D6r/549Ly6lvXeFUb9n9xs/CC3oPrOgAj8iPwo/8nPXviKqAr8q6TQ+vrumPrdtHz8prJq+V1/oPUZWGr4Y4cU9nRopvtRCkz2jeTy+pJW0PgwDyz6XfIo+QmZevqCRSj1/pIa+KoufPllZvT5o244+nRIYP3TbM70N+8y+a7d2vcsSWj4Cdrw+AT8hPVoDwL0BxL2+G1pmPo/CZL66zSS+g2rFPvewar7nfGe+YEuevRgFIr7dyRS+KES0Pnu1p754F6s+/inJPXa3tL4Qd5A+OmbLPWvlnb75WsU9rRHMvsgqxD5MQ90+Y38LPnBkZj7fKIs9uJCHvdiuXr6D/Rw9hpVyPu9Vqr4Qzom85dP6vYymmr1yG5w+2gSMPlV5tT1D1ks+EKTZPm4gOb6ZC+w+k8EOPA8oXb6r9z2+h6Tgvm7Dvj7OzJQ+7tkIPvbDjz4TN6u9GneSPTIooD7GdRA/wYQ4vVr7b71F/QI+cRORPrRPWzxVX22+Yu2vPsHriL720za+oBlVPogMe72YNKM8r9aEO5uq1z7RegW+4aX1PqfYRD/wpfI9sVqvPCI99jpAtWC9eXJ2PBb++j6w+809iODsPfwV0b2kL7S9D+FLPQZECD4oYRA+V1Z+vjarEj5ZF/q8KJSAPkjENr7zNd28pKODPj8FPL8mgFY8kJVMvgBfQ75uooK++9TaPg/5Cr5Pzo6+1Yy3viONQL/Fvng+Bmn6vTpQkb0N7Oi94ZVHPYE2Hr7J/Rk+zQzKvL3Chj5d85o+Q/YRPrsjnj7YzJY+01w3PyVgGD6INkM+XtnevbmxiL7Z1NI+jpdgvggkdz0QnJq+35a8PZX0SL4+y78+grnOPYHzlD2VKRA/xRW4PqyCPL4Cowa/Ku+pvZabKz99894+sY/Vva/ezL1zsUw+er4IP8DL/D1qa2a+m6B3PK8Cq76mu2++gsjvvP0kBz8pWqe+SyotvKUdmz4pFXA7bkXCvbwSbj44g7c8mID4viXITL56E/G9zBVuPPD+u7wCmJc9v1nDuyyEX77G7Nq8GUwXvQJRVT3nTYY9/wK9Pct9sT1dCqU9aRsHvlmTFD2/B5M9PclmvNt2Jb8eqR2+bZhIvlmRVT4k0zU/OFSyvnCsHb/BfrK+ZZJGv10pNT8uXQk/AaVXvgbtG76M5kC+b6zpPfBICD8I1Lm8",Bye={format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v4.2.0",convertedBy:null},bl={modelInfo:Lye,modelTopology:Fye,weightSpecs:Pye,weightData:Mye,modelMetadata:Bye};/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Vye=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Uye(t){if(Vye){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}class jye{async load(){const e={};if(e.modelTopology=bl.modelTopology,e.weightSpecs=bl.weightSpecs,e.weightData=Uye(bl.weightData),bl.modelMetadata!=null){const n=bl.modelMetadata;e.format=n.format,e.generatedBy=n.generatedBy,e.convertedBy=n.convertedBy,n.signature!=null&&(e.signature=n.signature),n.userDefinedMetadata!=null&&(e.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(e.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(e.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(e.trainingConfig=n.trainingConfig)}return e}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const zye=/[аоуеиіяюєї]/gi;function Wye(t){const e=t.match(zye);return e==null?0:e.length}function Gye(t){return Wye(t)===1}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class z1{async inflect(e,n,s){const o=[],r=e.split("-");for(let i=0;i<r.length;i+=1){const a=await this.inflectNamePart(r[i],n,s,i===r.length-1);o.push(a)}return o.join("-")}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Hye=/[ая]$/i,Kye=/(ой|ий|ій|их)$/i;class qye extends z1{constructor(e,n){super(),this.wordInflector=e,this.familyNameClassifier=n}async inflectNamePart(e,n,s,o){if(!o&&Gye(e))return e;let r=null;return this.isUncertainFamilyNameClass(e,n)&&(r=await this.familyNameClassifier.classify(e)),this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,wordClass:r==null?void 0:r.wordClass,applicationType:"familyName"})}isUncertainFamilyNameClass(e,n){return n===pf.FEMININE&&Hye.test(e)||n===pf.MASCULINE&&Kye.test(e)}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Xye extends z1{constructor(e){super(),this.wordInflector=e}inflectNamePart(e,n,s){return this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,applicationType:"givenName"})}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Qye extends z1{constructor(e){super(),this.wordInflector=e}inflectNamePart(e,n,s){return this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,applicationType:"patronymicName",customRuleFilter:o=>o.applicationType.includes("patronymicName")})}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Yye=new Xye(Cp),Jye=new Qye(Cp),Zye=new Oye(new jye),e0e=new qye(Cp,Zye),b1e=new lq(Yye,Jye,e0e);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.0
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const W1=[];function t0e(t){const e=t({wordInflector:Cp});W1.push(e)}function y1e(){const t=[];for(const e of W1)t.push(...e.fieldNames);return t}async function x1e(t,e){var n;const s={};for(const o of W1){const r=await((n=o.afterInflect)===null||n===void 0?void 0:n.call(o,t,e));r!=null&&Object.assign(s,r)}return s}/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.0
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */class n0e{constructor(e,n,s){this.wordInflector=e,this.wordHyphenationRules=n,this.wordClassifierRules=s}async inflect(e,n){const s=[];for(const o of e.split(" "))this.wordHyphenationRules.find(i=>i.include.every(a=>new RegExp(a,"i").test(o)))?s.push(await this.inflectHyphenatedWord(o,n)):s.push(await this.inflectWord(o,n));return s.join(" ")}async inflectHyphenatedWord(e,n){const s=[];for(const o of e.split("-"))s.push(await this.inflectWord(o,n));return s.join("-")}async inflectWord(e,n){const{extractedWord:s,startDelimiter:o,endDelimiter:r}=this.extractWordDelimiters(e),i=this.wordClassifierRules.find(c=>c.include.every(l=>new RegExp(l,"i").test(s)));if(i==null)return e;const a=await this.wordInflector.inflect(s,{gender:i.gender,wordClass:i.wordClass,grammaticalCase:n});return o+a+r}extractWordDelimiters(e){let n=e,s="",o="";const r=n.match(/^(["'()])+/);r!=null&&r.index!=null&&(n=n.slice(r.index+1),s=r[0]);const i=n.match(/(["'()])+$/);return i!=null&&i.index!=null&&(n=n.slice(0,i.index),o=i[0]),{extractedWord:n,startDelimiter:s,endDelimiter:o}}}/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.0
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */var s0e=[{gender:"masculine",wordClass:"noun",include:["[аеєиіїоуюя]","(ут|ат|нт|ан|ик|ал|ос|ар|ун|ік|ер|ог|ач|ьт|ст|тр|рг|вт|вод|ль|яр|аф|ор|ен|ир|ина|дій|ець|тав|аз|ес|ур|ус|от|кок)$"]},{gender:"masculine",wordClass:"adjective",include:["[аеєиіїоуюя]","(ий|ній)$","^(?!який)"]},{gender:"feminine",wordClass:"noun",include:["[аеєиіїоуюя]","(тра)$"]},{gender:"feminine",wordClass:"adjective",include:["[аеєиіїоуюя]","(ша|вна|чна|йна)$","^(?!майна)"]}];/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.0
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */var o0e=[{include:["-","^(?!штаб|майстер|генерал)"]}];/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.0
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */const r0e=({wordInflector:t})=>{const e=new n0e(t,o0e,s0e);return{fieldNames:["militaryRank","militaryAppointment"],afterInflect:i0e(e)}};function i0e(t){return async(e,n)=>{const s={};return n.militaryRank!=null&&(s.militaryRank=await t.inflect(n.militaryRank,e)),n.militaryAppointment!=null&&(s.militaryAppointment=await t.inflect(n.militaryAppointment,e)),s}}t0e(r0e);const a0e=Sn({__name:"app",setup(t){return(e,n)=>{const s=Kz,o=L$;return jt(),Eo(o,null,{default:fs(()=>[Je(s)]),_:1})}}}),Hd=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n},c0e={},l0e={class:"flag flag--ukraine"};function u0e(t,e){return jt(),To("div",l0e)}const d0e=Hd(c0e,[["render",u0e],["__scopeId","data-v-06d25804"]]);async function _L(t,e=Ln()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||(e._routePreloaded=new Set),e._routePreloaded.has(n)))return;const o=e._preloadPromises=e._preloadPromises||[];if(o.length>4)return Promise.all(o).then(()=>_L(t,e));e._routePreloaded.add(n);const r=s.map(i=>{var a;return(a=i.components)==null?void 0:a.default}).filter(i=>typeof i=="function");for(const i of r){const a=Promise.resolve(i()).catch(()=>{}).finally(()=>o.splice(o.indexOf(a)));o.push(a)}await Promise.all(o)}const h0e=(...t)=>t.find(e=>e!==void 0);function f0e(t){const e=t.componentName||"NuxtLink";function n(o,r){if(!o||t.trailingSlash!=="append"&&t.trailingSlash!=="remove")return o;if(typeof o=="string")return II(o,t.trailingSlash);const i="path"in o&&o.path!==void 0?o.path:r(o).path;return{...o,name:void 0,path:II(i,t.trailingSlash)}}function s(o){const r=Ln(),i=xu(),a=pt(()=>!!o.target&&o.target!=="_self"),c=pt(()=>{const m=o.to||o.href||"";return typeof m=="string"&&mr(m,{acceptRelative:!0})}),l=tw("RouterLink"),u=l&&typeof l!="string"?l.useLink:void 0,d=pt(()=>{if(o.external)return!0;const m=o.to||o.href||"";return typeof m=="object"?!1:m===""||c.value}),h=pt(()=>{const m=o.to||o.href||"";return d.value?m:n(m,r.resolve)}),f=d.value||u==null?void 0:u({...o,to:h}),p=pt(()=>{var m;if(!h.value||c.value)return h.value;if(d.value){const v=typeof h.value=="object"&&"path"in h.value?Tv(h.value):h.value,g=typeof v=="object"?r.resolve(v).href:v;return n(g,r.resolve)}return typeof h.value=="object"?((m=r.resolve(h.value))==null?void 0:m.href)??null:n(sp(i.app.baseURL,h.value),r.resolve)});return{to:h,hasTarget:a,isAbsoluteUrl:c,isExternal:d,href:p,isActive:(f==null?void 0:f.isActive)??pt(()=>h.value===r.currentRoute.value.path),isExactActive:(f==null?void 0:f.isExactActive)??pt(()=>h.value===r.currentRoute.value.path),route:(f==null?void 0:f.route)??pt(()=>r.resolve(h.value)),async navigate(){await Q3(p.value,{replace:o.replace,external:d.value||a.value})}}}return Sn({name:e,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:s,setup(o,{slots:r}){const i=Ln(),{to:a,href:c,navigate:l,isExternal:u,hasTarget:d,isAbsoluteUrl:h}=s(o),f=is(!1),p=is(null),m=b=>{var x;p.value=o.custom?(x=b==null?void 0:b.$el)==null?void 0:x.nextElementSibling:b==null?void 0:b.$el};function v(b){var x,y;return!f.value&&(typeof o.prefetchOn=="string"?o.prefetchOn===b:((x=o.prefetchOn)==null?void 0:x[b])??((y=t.prefetchOn)==null?void 0:y[b]))&&(o.prefetch??t.prefetch)!==!1&&o.noPrefetch!==!0&&o.target!=="_blank"&&!m0e()}async function g(b=kt()){if(f.value)return;f.value=!0;const x=typeof a.value=="string"?a.value:u.value?Tv(a.value):i.resolve(a.value).fullPath;await Promise.all([b.hooks.callHook("link:prefetch",x).catch(()=>{}),!u.value&&!d.value&&_L(a.value,i).catch(()=>{})])}if(v("visibility")){const b=kt();let x,y=null;bu(()=>{const w=p0e();cp(()=>{x=Bv(()=>{var C;(C=p==null?void 0:p.value)!=null&&C.tagName&&(y=w.observe(p.value,async()=>{y==null||y(),y=null,await g(b)}))})})}),yu(()=>{x&&yV(x),y==null||y(),y=null})}return()=>{var y;if(!u.value&&!d.value){const w={ref:m,to:a.value,activeClass:o.activeClass||t.activeClass,exactActiveClass:o.exactActiveClass||t.exactActiveClass,replace:o.replace,ariaCurrentValue:o.ariaCurrentValue,custom:o.custom};return o.custom||(v("interaction")&&(w.onPointerenter=g.bind(null,void 0),w.onFocus=g.bind(null,void 0)),f.value&&(w.class=o.prefetchedClass||t.prefetchedClass),w.rel=o.rel||void 0),pn(tw("RouterLink"),w,r.default)}const b=o.target||null,x=h0e(o.noRel?"":o.rel,t.externalRelAttribute,h.value||d.value?"noopener noreferrer":"")||null;return o.custom?r.default?r.default({href:c.value,navigate:l,prefetch:g,get route(){if(!c.value)return;const w=new URL(c.value,window.location.href);return{path:w.pathname,fullPath:w.pathname,get query(){return tk(w.search)},hash:w.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:c.value}},rel:x,target:b,isExternal:u.value||d.value,isActive:!1,isExactActive:!1}):null:pn("a",{ref:p,href:c.value||null,rel:x,target:b},(y=r.default)==null?void 0:y.call(r))}}})}const SL=f0e(h3);function II(t,e){const n=e==="append"?Zh:np;return mr(t)&&!t.startsWith("http")?t:n(t,!0)}function p0e(){const t=kt();if(t._observer)return t._observer;let e=null;const n=new Map,s=(r,i)=>(e||(e=new IntersectionObserver(a=>{for(const c of a){const l=n.get(c.target);(c.isIntersecting||c.intersectionRatio>0)&&l&&l()}})),n.set(r,i),e.observe(r),()=>{n.delete(r),e.unobserve(r),n.size===0&&(e.disconnect(),e=null)});return t._observer={observe:s}}function m0e(){const t=navigator.connection;return!!(t&&(t.saveData||/2g/.test(t.effectiveType)))}const g0e="shevchenko",v0e="3.1.0",b0e="JavaScript library for declension of Ukrainian anthroponyms",y0e="./dist/umd/shevchenko.min.js",x0e="./dist/cjs/shevchenko.js",w0e="./dist/es/shevchenko.js",C0e="./dist/es/shevchenko.d.ts",_0e={prebuild:"rm -rf ./dist",build:"rollup -c --bundleConfigAsCjs",lint:"eslint --fix ./src",test:"jest",predocs:"rm -rf ./docs",docs:"typedoc && cp -a ./site/.output/public/. ./docs",preversion:"npm run lint && npm run test",prepublishOnly:"npm run build"},S0e=["ukrainian-language","ukrainian","anthroponym-declension","personal-name-declension","given-name-declension","first-name-declension","patronymic-name-declension","patronymic-declension","family-name-declension","surname-declension","word-declension","declension","word-inflection","linguistics","natural-language-processing","nlp"],I0e={type:"git",url:"git+https://github.com/tooleks/shevchenko-js.git"},E0e="Oleksandr Tolochko <shevchenko-js@tooleks.com>",k0e=["Anna Tolochko","Tetyana Tolochko"],$0e="MIT",T0e={url:"https://github.com/tooleks/shevchenko-js/issues"},N0e="https://tooleks.github.io/shevchenko-js",A0e={"@tensorflow/tfjs":"^4.1.0"},R0e={"@janniks/typedoc-theme-stacks":"^1.2.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@rollup/plugin-typescript":"^12.1.1","@tensorflow/tfjs-node":"^4.2.0","@types/jest":"^29.4.0","@types/lodash":"^4.14.191","@typescript-eslint/eslint-plugin":"^5.48.2","@typescript-eslint/parser":"^5.48.2",axios:"^1.6.0",csv:"^6.2.7",eslint:"^8.32.0","eslint-config-prettier":"^8.6.0","eslint-plugin-import":"^2.27.5","eslint-plugin-prettier":"^4.2.1",jest:"^29.3.1",lodash:"^4.17.21",prettier:"2.8.3",rimraf:"^3.0.2",rollup:"^4.24.3","ts-jest":"^29.0.5","ts-node":"^10.9.1",typedoc:"^0.23.26",typescript:"^4.1.2"},nv={name:g0e,version:v0e,description:b0e,browser:y0e,main:x0e,module:w0e,types:C0e,scripts:_0e,keywords:S0e,repository:I0e,author:E0e,contributors:k0e,license:$0e,bugs:T0e,homepage:N0e,dependencies:A0e,devDependencies:R0e},Ub="https://shevchenko-js.tooleks.com",D0e=new Date().getFullYear(),O0e=new URL(Ub).hostname,IL={website:{url:Ub,email:"shevchenko-js@tooleks.com",copyright:`© 2017-${D0e} ${O0e}`},library:{displayName:`${nv.name}.js`,name:nv.name,version:nv.version,apiSpecificationUrl:`${Ub}/api-spec`,npmUrl:"https://www.npmjs.com/package/shevchenko",gitHubUrl:"https://github.com/tooleks/shevchenko-js",dockerHubUrl:"https://hub.docker.com/r/tooleks/shevchenko",issuesUrl:"https://github.com/tooleks/shevchenko-js/issues",licenseUrl:"https://github.com/tooleks/shevchenko-js/blob/master/LICENSE",cdnUrl:"https://unpkg.com/shevchenko"},militaryExtension:{name:"shevchenko-ext-military",gitHubUrl:"https://github.com/tooleks/shevchenko-ext-military"},content:{gitHubUrl:"https://api.github.com/repos/tooleks/shevchenko-js",howItWorksUrl:"https://raw.githubusercontent.com/wiki/tooleks/shevchenko-js/Принцип-роботи.md"}},L0e=IL,F0e={nuxt:{}},P0e=z3(L0e,F0e);function Zm(){const t=kt();return t._appConfig||(t._appConfig=Wo(P0e)),t._appConfig}const M0e=t=>t==="defer"||t===!1;function B0e(...t){var m;const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);let[n,s,o={}]=t;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const r=kt(),i=s,a=()=>qa.value,c=()=>r.isHydrating?r.payload.data[n]:r.static.data[n];o.server=o.server??!0,o.default=o.default??a,o.getCachedData=o.getCachedData??c,o.lazy=o.lazy??!1,o.immediate=o.immediate??!0,o.deep=o.deep??qa.deep,o.dedupe=o.dedupe??"cancel";const l=o.getCachedData(n,r),u=l!=null;if(!r._asyncData[n]||!o.immediate){(m=r.payload._errors)[n]??(m[n]=qa.errorValue);const v=o.deep?is:qi;r._asyncData[n]={data:v(u?l:o.default()),pending:is(!u),error:tE(r.payload._errors,n),status:is("idle"),_default:o.default}}const d={...r._asyncData[n]};delete d._default,d.refresh=d.execute=(v={})=>{if(r._asyncDataPromises[n]){if(M0e(v.dedupe??o.dedupe))return r._asyncDataPromises[n];r._asyncDataPromises[n].cancelled=!0}if(v._initial||r.isHydrating&&v._initial!==!1){const b=v._initial?l:o.getCachedData(n,r);if(b!=null)return Promise.resolve(b)}d.pending.value=!0,d.status.value="pending";const g=new Promise((b,x)=>{try{b(i(r))}catch(y){x(y)}}).then(async b=>{if(g.cancelled)return r._asyncDataPromises[n];let x=b;o.transform&&(x=await o.transform(b)),o.pick&&(x=U0e(x,o.pick)),r.payload.data[n]=x,d.data.value=x,d.error.value=qa.errorValue,d.status.value="success"}).catch(b=>{if(g.cancelled)return r._asyncDataPromises[n];d.error.value=Cu(b),d.data.value=Ge(o.default()),d.status.value="error"}).finally(()=>{g.cancelled||(d.pending.value=!1,delete r._asyncDataPromises[n])});return r._asyncDataPromises[n]=g,r._asyncDataPromises[n]},d.clear=()=>V0e(r,n);const h=()=>d.refresh({_initial:!0}),f=o.server!==!1&&r.payload.serverRendered;{const v=ao();if(v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const x=v._nuxtOnBeforeMountCbs;vE(()=>{x.forEach(y=>{y()}),x.splice(0,x.length)}),Zf(()=>x.splice(0,x.length))}f&&r.isHydrating&&(d.error.value||l!=null)?(d.pending.value=!1,d.status.value=d.error.value?"error":"success"):v&&(r.payload.serverRendered&&r.isHydrating||o.lazy)&&o.immediate?v._nuxtOnBeforeMountCbs.push(h):o.immediate&&h();const g=Qb();if(o.watch){const x=to(o.watch,()=>d.refresh());g&&q1(x)}const b=r.hook("app:data:refresh",async x=>{(!x||x.includes(n))&&await d.refresh()});g&&q1(b)}const p=Promise.resolve(r._asyncDataPromises[n]).then(()=>d);return Object.assign(p,d),p}function V0e(t,e){e in t.payload.data&&(t.payload.data[e]=void 0),e in t.payload._errors&&(t.payload._errors[e]=qa.errorValue),t._asyncData[e]&&(t._asyncData[e].data.value=void 0,t._asyncData[e].error.value=qa.errorValue,t._asyncData[e].pending.value=!1,t._asyncData[e].status.value="idle"),e in t._asyncDataPromises&&(t._asyncDataPromises[e]&&(t._asyncDataPromises[e].cancelled=!0),t._asyncDataPromises[e]=void 0)}function U0e(t,e){const n={};for(const s of e)n[s]=t[s];return n}function j0e(t,e,n){const[s={},o]=typeof e=="string"?[{},e]:[e,n],r=pt(()=>$i(t)),i=s.key||V3([o,typeof r.value=="string"?r.value:"",...W0e(s)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const a=i===o?"$f"+i:i;if(!s.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:c,lazy:l,default:u,transform:d,pick:h,watch:f,immediate:p,getCachedData:m,deep:v,dedupe:g,...b}=s,x=Wo({...p3,...b,cache:typeof s.cache=="boolean"?void 0:s.cache}),y={server:c,lazy:l,default:u,transform:d,pick:h,immediate:p,getCachedData:m,deep:v,dedupe:g,watch:f===!1?[]:[x,r,...f||[]]};let w;return B0e(a,()=>{var E;(E=w==null?void 0:w.abort)==null||E.call(w,"Request aborted as another request to the same endpoint was initiated."),w=typeof AbortController<"u"?new AbortController:{};const _=$i(s.timeout);let S;return _&&(S=setTimeout(()=>w.abort("Request aborted due to timeout."),_),w.signal.onabort=()=>clearTimeout(S)),(s.$fetch||globalThis.$fetch)(r.value,{signal:w.signal,...x}).finally(()=>{clearTimeout(S)})},y)}function z0e(t,e,n){const[s={},o]=[{},e];return j0e(t,{...s,lazy:!0},o)}function W0e(t){var n;const e=[((n=$i(t.method))==null?void 0:n.toUpperCase())||"GET",$i(t.baseURL)];for(const s of[t.params||t.query]){const o=$i(s);if(!o)continue;const r={};for(const[i,a]of Object.entries(o))r[$i(i)]=$i(a);e.push(r)}return e}const G0e={key:0,class:"badge bg-secondary"},H0e=Sn({__name:"github-issue-count",async setup(t){let e,n;const s=Zm(),{data:o,pending:r}=([e,n]=PF(()=>z0e(s.content.gitHubUrl,"$zXgY1EVtZn")),e=await e,n(),e),i=pt(()=>o.value==null?0:o.value.open_issues_count);return(a,c)=>Ge(r)?bP("",!0):(jt(),To("span",G0e,gt(i.value),1))}}),K0e=["data-bs-target"],EL=Sn({__name:"modal-button",props:{modalId:{type:String,required:!0}},setup(t){return(e,n)=>(jt(),To("a",{href:"#","data-bs-toggle":"modal","data-bs-target":`#${t.modalId}`},[LF(e.$slots,"default")],8,K0e))}}),q0e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAEwATADAREAAhEBAxEB/8QAHAABAAEFAQEAAAAAAAAAAAAAAAQCAwUGBwgB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB6MCoFgFALgPgKAWQY8E4FsF8F8FIPgPgKAVg+gkgqBYBQC4D4CgFkGPBOBbBfBfBSD4D4CgFYPoJILgIoALIKQYsHlsFQN3BrYOiA+A7ICkFQLAPoLgJgLgIoALIKQYsHlsFQN3BrYOiA+A7ICkFQLAPoLgJYLoLILYIIORg1EGvgx4N1BrALIM4CUD00CgAFgF8EgF0FkFsEEHIwaiDXwY8G6g1gFkGcBKB6aBQACwC+C4CQC2D6DgYOag24GPBcBqwNwBWDVQXgetQXAfQUgvAtAkAtg+g4GDmoNuBjwXAasDcAVg1UF4HrUFwH0FILwI4JgLILgPIYMQDaAAYIGNBHBUCYDOA9bAjgpBeBIBDBMBZBcB5DBiAbQADBAxoI4KgTAZwHrYEcFILwJAIwJgPgAPKIMKDKAxYNbBsQMmDVAbYD4D1oCOD6C+CaDFAmA+AA8ogwoMoDFg1sGxAyYNUBtgPgPWgI4PoL4JoIYJwI4JAPI4NXBFBbBmAYEEkH0GSBMB7ABQD6CsEgEQE4EcEgHkcGrgigtgzAMCCSD6DJAmA9gAoB9BWCQCMC8CyDSwckBycGXBiwZ4FIIYKQXwbuD00CyCoEoFwEMF4FkGlg5IDk4MuDFgzwKQQwUgvg3cHpoFkFQJQLgIgJgLYPPYOSAjg9pAqBHBMBZBzEHEgZkHrQFIKgVgughAmAtg89g5ICOD2kCoEcEwFkHMQcSBmQetAUgqBWC6C0CsAGsg8kg9ZAyAMgCGCQDBAwQOBguA9iApABeBcBABWADWQeSQesgZAGQBDBIBggYIHAwXAexAUgAvAuAx4LwAMMDyGD12DzIDCA9Ng8wA2YHdQcgBDB6oBWCMCoF4EMF4AGGB5DB67B5kBhAemweYAbMDuoOQAhg9UArBGBUC8CICSCkFAPoNfBkgYAG1g5qDOAvg0cHVAZMFkF4H0EkGKBJBSCgH0GvgyQMADawc1BnAXwaODqgMmCyC8D6CSDGguAkgjAAwALgNTBs4MCDZAcNBtQONgzYPV4KQXAXAQQXASQRgAYAFwGpg2cGBBsgOGg2oHGwZsHq8FILgLgMWCQCsFALQIYNCBBBw4HpAGABiQawDXgSgVA9YAuAuAxoJAKwUAtAhg0IEEHDgekAYAGJBrANeBKBUD1gC4C4DFgmAuAjgpB5CB3EHCwY4GRB34Gog4sDOArBAB1UHewSwYcEwFwEcFIPIQO4g4WDHAyIO/A1EHFgZwFYIAOqg72CWDDgkguA5eDh4IQOkg1gHTwcwBuwOKAy4NmBzkGeBlgbQD0UCKCSC4Dl4OHghA6SDWAdPBzAG7A4oDLg2YHOQZ4GWBtAPRQIYJQOBg0UGLBrQJ4NpBpAJwLAMwC0CkGOBNBvYM4DGA9GAlA4GDRQYsGtAng2kGkAnAsAzALQKQY4E0G9gzgMYDtQOKAxANZBYBPBHBhAAVgug6YDBA1gGQBjATwbWCgHfwcUBiAayCwCeCODCAArBdB0wGCBrAMgDGAng2sFANnByQFgGKB1AGCBr4MqCICcDaQaQCcCGCKCcC6DZwUg2oHJAWAYoHUAYIGvgyoIgJwNpBpAJwIYIoJwLoNnBSD//EABQQAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQEAAQUCNJ//xAAUEQEAAAAAAAAAAAAAAAAAAACg/9oACAEDAQE/ATSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAoP/aAAgBAgEBPwE0n//EABQQAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQEABj8CNJ//xAAUEAEAAAAAAAAAAAAAAAAAAACg/9oACAEBAAE/ITSf/9oADAMBAAIAAwAAABCQCSSSSQACSSQCSQCQCSQCSSSSQACSSQCSQCQCSSQACQAACSSSQACQCSSSSQACQAACSSSQACQCSSSSQACSQAACSQACQCSSSSSQACSQAACSQACQCSSSSSSSSQCSSSSQCQCSSQCSSSSSQCSSSSQCQCSSQCSSQAACSSQCSQAACSQCSSSQAACSSQCSQAACSQCSSSQACQAAACSSSSSSSSSSSQACQAAACSSSSSSSSSSQAAAACSSQCSQAACSSSSQAAAACSSQCSQAACSSSQCQACSQACQACSQCQCQAACQACSQACQACSQCQCQACSSSSSQCSSQCSSSQCSSSSSSSSQCSSQCSSSQCSSSQACQCSSSSSQAAACSQACQACQCSSSSSQAAACSQAACSSSQCSSSQCSSSSQCQACSSSQCSSSQCSSSSQCQCSQCSSQCQCSSSSQCQCSSSQCSSQCQCSSSSQCQCSQACQACSSQCSQCSSQCSSQACQACSSQCSQCSSQCSSSSSSSSQCSSSQCQCQAAACSSSSSQCSSSQCQCQAAAAAAACSSSSSQCSSQCSSQAAAACSSSSSQCSSQCSSQACSSSQCSSSQCQCQCQACQCSSSQCSSSQCQCQCQACSQACSSQCSQCSQCSSSSSSQACSSQCSQCSQCSSSSSQCSQCQACSQCSQCSSSQCQCSQCQACSQCSQCSSSQCQCSSSQACSQCSQACQCQCQCSSSQACSQCSQACQCQCT//EABQRAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQMBAT8QNJ//xAAUEQEAAAAAAAAAAAAAAAAAAACg/9oACAECAQE/EDSf/8QAFBABAAAAAAAAAAAAAAAAAAAAoP/aAAgBAQABPxA0n//Z",jb=(t="")=>IL.website.url+t,w1e=()=>{const t=op(),e=pt(()=>jb(t.fullPath));return{buildPageUrl:jb,pageUrl:e}},X0e=/^[a-z]{2}$/i,Q0e=127397;function Y0e(t){if(!X0e.test(t)){const n=typeof t;throw new TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${n==="string"?t:n}' instead.`)}const e=[...t.toUpperCase()].map(n=>n.codePointAt()+Q0e);return String.fromCodePoint(...e)}const J0e=()=>({getLocaleEmoji:e=>Y0e(e.split("-")[1])}),Z0e={class:"navbar navbar-expand-xl navbar-light bg-light"},exe={class:"container-fluid"},txe=["alt"],nxe={id:"navbar-supported-content",class:"collapse navbar-collapse"},sxe={class:"navbar-nav mt-2 mt-lg-0 ms-auto",role:"menubar"},oxe={class:"nav-item",role:"presentation"},rxe={class:"badge bg-military"},ixe={class:"nav-item",role:"presentation"},axe={class:"nav-item",role:"presentation"},cxe={class:"nav-item",role:"presentation"},lxe=["href"],uxe={class:"nav-item dropdown",role:"presentation"},dxe={id:"navbar-dropdown-links",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false"},hxe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-links",role:"menu"},fxe=["href"],pxe=["href"],mxe=["href"],gxe=["href"],vxe={class:"badge bg-primary"},bxe={class:"nav-item dropdown",role:"presentation"},yxe={id:"navbar-dropdown-feedback",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false"},xxe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-feedback",role:"menu"},wxe=["href"],Cxe={class:"nav-item dropdown",role:"presentation"},_xe=["title"],Sxe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-locale",role:"menu"},Ixe=["href"],Exe=Sn({__name:"top-nav-bar",setup(t){const e=Zm(),{getLocaleEmoji:n}=J0e();return(s,o)=>{const r=SL,i=H0e,a=EL;return jt(),To("nav",Z0e,[Le("div",exe,[Je(r,{class:"navbar-brand",to:{name:"index"}},{default:fs(()=>[Le("img",{class:"navbar-logo",src:q0e,alt:Ge(e).library.displayName},null,8,txe),Le("span",null,gt(Ge(e).library.displayName),1)]),_:1}),o[4]||(o[4]=Le("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbar-supported-content","aria-controls":"navbar-supported-content","aria-expanded":"false","aria-label":"Toggle navigation"},[Le("span",{class:"navbar-toggler-icon"})],-1)),Le("div",nxe,[Le("ul",sxe,[Le("li",oxe,[Je(r,{class:"nav-link",to:{name:"military"},"exact-active-class":"active",role:"menuitem"},{default:fs(()=>[xn(gt(s.$t("forMilitary"))+" ",1),Le("span",rxe,gt(s.$t("new")),1)]),_:1})]),Le("li",ixe,[Je(r,{class:"nav-link",to:{name:"index",hash:"#demo"},role:"menuitem"},{default:fs(()=>[xn(gt(s.$t("liveDemo")),1)]),_:1})]),Le("li",axe,[Je(r,{class:"nav-link",to:{name:"index",hash:"#documentation"},role:"menuitem"},{default:fs(()=>[xn(gt(s.$t("documentation")),1)]),_:1})]),Le("li",cxe,[Le("a",{class:"nav-link",href:Ge(e).library.licenseUrl,target:"_blank",role:"menuitem"},gt(s.$t("library.license")),9,lxe)]),Le("li",uxe,[Le("a",dxe,gt(s.$t("library.links")),1),Le("div",hxe,[Le("a",{class:"dropdown-item",href:Ge(e).library.apiSpecificationUrl,target:"_blank",role:"menuitem"},gt(s.$t("documentation.apiSpec")),9,fxe),Le("a",{class:"dropdown-item",href:Ge(e).library.gitHubUrl,target:"_blank",role:"menuitem"},o[0]||(o[0]=[Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-github"},null,-1),xn(" GitHub ")]),8,pxe),Le("a",{class:"dropdown-item",href:Ge(e).library.npmUrl,target:"_blank",role:"menuitem"},o[1]||(o[1]=[Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-npm"},null,-1),xn(" NPM ")]),8,mxe),Le("a",{class:"dropdown-item",href:Ge(e).library.dockerHubUrl,target:"_blank",role:"menuitem"},[o[2]||(o[2]=Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-docker"},null,-1)),o[3]||(o[3]=xn(" Docker Hub ")),Le("span",vxe,gt(s.$t("new")),1)],8,gxe)])]),Le("li",bxe,[Le("a",yxe,gt(s.$t("feedback")),1),Le("div",xxe,[Le("a",{class:"dropdown-item",href:Ge(e).library.issuesUrl,target:"_blank",role:"menuitem"},[xn(gt(s.$t("library.issueReport"))+" ",1),Je(i)],8,wxe),Je(a,{class:"dropdown-item",role:"menuitem","modal-id":"contact-us-modal"},{default:fs(()=>[xn(gt(s.$t("contactUs")),1)]),_:1}),Je(a,{class:"dropdown-item",role:"menuitem","modal-id":"about-modal"},{default:fs(()=>[xn(gt(s.$t("aboutUs")),1)]),_:1})])]),Le("li",Cxe,[Le("a",{id:"navbar-dropdown-locale",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false",title:s.$t("website.language")},gt(Ge(n)(s.$i18n.locale))+" "+gt(s.$i18n.locale),9,_xe),Le("div",Sxe,[(jt(!0),To(Ht,null,OF(s.$i18n.availableLocales,c=>(jt(),To("a",{key:c,class:"dropdown-item",href:Ge(jb)(c==="uk-UA"?"/":`/${c}`),role:"menuitem"},gt(Ge(n)(c))+" "+gt(s.$t(`website.locale.${c}`))+" ("+gt(c)+") ",9,Ixe))),128))])])])])])])}}}),kxe=Hd(Exe,[["__scopeId","data-v-348f6491"]]),$xe={};function Txe(t,e){const n=d0e,s=kxe;return jt(),To(Ht,null,[Je(n),Je(s)],64)}const Nxe=Hd($xe,[["render",Txe]]),Axe={},Rxe={class:"px-3 px-lg-4 py-4 my-3 bg-light rounded-3"},Dxe={class:"text-truncate"};function Oxe(t,e){const n=SL;return jt(),To("div",Rxe,[Le("h1",Dxe,gt(t.$t("error.404.title")),1),Le("p",null,gt(t.$t("error.404.message")),1),Je(n,{to:{name:"index"},class:"btn btn-primary"},{default:fs(()=>[xn(gt(t.$t("action.backToHome")),1)]),_:1})])}const Lxe=Hd(Axe,[["render",Oxe]]),Fxe={id:"footer"},Pxe={class:"row mb-1"},Mxe={class:"col-12"},Bxe={class:"list-unstyled mb-0",role:"menubar"},Vxe={class:"d-block mb-1 d-md-inline me-md-3 mb-md-0",role:"presentation"},Uxe={class:"text-muted"},jxe={class:"d-inline align-middle me-2",role:"presentation"},zxe=["href"],Wxe={class:"d-inline align-middle me-2",role:"presentation"},Gxe=["href"],Hxe={class:"d-inline align-middle me-2",role:"presentation"},Kxe=["href"],qxe={class:"badge bg-primary"},Xxe={class:"d-inline me-2",role:"presentation"},Qxe={class:"d-inline",role:"presentation"},Yxe={class:"row mb-3"},Jxe={class:"col-12"},Zxe=Sn({__name:"page-footer",setup(t){const e=Zm();return(n,s)=>{const o=EL;return jt(),To("section",Fxe,[s[4]||(s[4]=Le("hr",null,null,-1)),Le("div",Pxe,[Le("div",Mxe,[Le("ul",Bxe,[Le("li",Vxe,[Le("span",Uxe,gt(`${Ge(e).library.displayName} v${Ge(e).library.version}`),1)]),Le("li",jxe,[Le("a",{href:Ge(e).library.gitHubUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},s[0]||(s[0]=[Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-github"},null,-1),xn(" GitHub ")]),8,zxe)]),Le("li",Wxe,[Le("a",{href:Ge(e).library.npmUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},s[1]||(s[1]=[Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-npm"},null,-1),xn(" NPM ")]),8,Gxe)]),Le("li",Hxe,[Le("a",{href:Ge(e).library.dockerHubUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},[s[2]||(s[2]=Le("span",{"aria-hidden":"true",class:"logo-icon logo-icon-docker"},null,-1)),s[3]||(s[3]=xn(" Docker Hub ")),Le("span",qxe,gt(n.$t("new")),1)],8,Kxe)]),Le("li",Xxe,[Je(o,{class:"btn btn-link text-decoration-none p-0",role:"menuitem","modal-id":"contact-us-modal"},{default:fs(()=>[xn(gt(n.$t("contactUs")),1)]),_:1})]),Le("li",Qxe,[Je(o,{class:"btn btn-link text-decoration-none p-0",role:"menuitem","modal-id":"about-modal"},{default:fs(()=>[xn(gt(n.$t("aboutUs")),1)]),_:1})])])])]),Le("div",Yxe,[Le("div",Jxe,gt(Ge(e).website.copyright),1)])])}}}),e1e=Hd(Zxe,[["__scopeId","data-v-4df8f673"]]),t1e=()=>{const t=Zm();return{buildPageTitle:n=>t.library.displayName+" - "+n}},n1e=Sn({__name:"error",setup(t){const{t:e}=fp(),{buildPageTitle:n}=t1e(),s=pt(()=>{const o=e("error.404.title").toString();return n(o)});return HB({title:s}),(o,r)=>{const i=Nxe,a=Lxe,c=e1e,l=L$;return jt(),Eo(l,{name:"default"},{default:fs(()=>[Je(i),Je(a),Je(c)]),_:1})}}}),s1e={key:0},EI={__name:"nuxt-root",setup(t){const e=()=>null,n=kt(),s=n.deferHydration();if(n.isHydrating){const c=n.hooks.hookOnce("app:error",s);Ln().beforeEach(c)}const o=!1;ji(wu,op()),n.hooks.callHookWith(c=>c.map(l=>l()),"vue:setup");const r=rp(),i=!1;yE((c,l,u)=>{if(n.hooks.callHook("vue:error",c,l,u).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),J3(c)&&(c.fatal||c.unhandled))return n.runWithContext(()=>Qa(c)),!1});const a=!1;return(c,l)=>(jt(),Eo(dy,{onResolve:Ge(s)},{default:fs(()=>[Ge(i)?(jt(),To("div",s1e)):Ge(r)?(jt(),Eo(Ge(n1e),{key:1,error:Ge(r)},null,8,["error"])):Ge(a)?(jt(),Eo(Ge(e),{key:2,context:Ge(a)},null,8,["context"])):Ge(o)?(jt(),Eo(DF(Ge(o)),{key:3})):(jt(),Eo(Ge(a0e),{key:4}))]),_:1},8,["onResolve"]))}};let kI;{let t;kI=async function(){var i,a;if(t)return t;const s=!!(((i=window.__NUXT__)==null?void 0:i.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?rM(EI):oM(EI),o=b3({vueApp:s});async function r(c){await o.callHook("app:error",c),o.payload.error=o.payload.error||Cu(c)}s.config.errorHandler=r;try{await w3(o,Gz)}catch(c){r(c)}try{await o.hooks.callHook("app:created",s),await o.hooks.callHook("app:beforeMount",s),s.mount(m3),await o.hooks.callHook("app:mounted",s),await Uc()}catch(c){r(c)}return s.config.errorHandler===r&&(s.config.errorHandler=void 0),s},t=kI().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{st as $,t$ as A,pt as B,fp as C,j0e as D,o1e as E,Ht as F,pf as G,w1e as H,t1e as I,HB as J,jb as K,Nxe as L,e1e as M,$k as N,y1e as O,b1e as P,x1e as Q,ln as R,is as S,YE as T,to as U,JI as V,Qb as W,q1 as X,qi as Y,ao as Z,Hd as _,To as a,Xb as a0,i1e as a1,LF as a2,cr as a3,pn as a4,d1e as a5,a1e as a6,kt as a7,Hb as a8,Ec as a9,bP as b,Eo as c,Sn as d,Zm as e,Le as f,xn as g,Je as h,SL as i,Ln as j,op as k,bu as l,PF as m,u1e as n,jt as o,OF as p,r1e as q,Wo as r,EL as s,gt as t,Ge as u,c1e as v,fs as w,l1e as x,B_ as y,ma as z};
