const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bon4satk.js","./1Cpq_r-5.js","./KTiVu4Fy.js","./current-locale.MfbF_CoV.css","./index.CNB3WbRx.css","./DWpBI8ub.js","./8_V3H9ng.js","./military.Bv5cnyww.css","./Ko1YpBAy.js","./atgQSiXo.js"])))=>i.map(i=>d[i]);
function FL(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const r=Object.getOwnPropertyDescriptor(s,o);r&&Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Yb(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const wt={},ol=[],No=()=>{},PL=()=>!1,Cu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Jb=t=>t.startsWith("onUpdate:"),tn=Object.assign,Zb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ML=Object.prototype.hasOwnProperty,ht=(t,e)=>ML.call(t,e),Be=Array.isArray,rl=t=>zl(t)==="[object Map]",PI=t=>zl(t)==="[object Set]",ew=t=>zl(t)==="[object Date]",BL=t=>zl(t)==="[object RegExp]",ze=t=>typeof t=="function",Lt=t=>typeof t=="string",ao=t=>typeof t=="symbol",bt=t=>t!==null&&typeof t=="object",Yf=t=>(bt(t)||ze(t))&&ze(t.then)&&ze(t.catch),MI=Object.prototype.toString,zl=t=>MI.call(t),VL=t=>zl(t).slice(8,-1),BI=t=>zl(t)==="[object Object]",ey=t=>Lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,il=Yb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jf=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},UL=/-(\w)/g,Vs=Jf(t=>t.replace(UL,(e,n)=>n?n.toUpperCase():"")),jL=/\B([A-Z])/g,ba=Jf(t=>t.replace(jL,"-$1").toLowerCase()),Zf=Jf(t=>t.charAt(0).toUpperCase()+t.slice(1)),ig=Jf(t=>t?`on${Zf(t)}`:""),Mr=(t,e)=>!Object.is(t,e),al=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},VI=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},hv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},UI=t=>{const e=Lt(t)?Number(t):NaN;return isNaN(e)?t:e};let tw;const ep=()=>tw||(tw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ty(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=Lt(s)?HL(s):ty(s);if(o)for(const r in o)e[r]=o[r]}return e}else if(Lt(t)||bt(t))return t}const zL=/;(?![^(]*\))/g,WL=/:([^]+)/,GL=/\/\*[^]*?\*\//g;function HL(t){const e={};return t.replace(GL,"").split(zL).forEach(n=>{if(n){const s=n.split(WL);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ny(t){let e="";if(Lt(t))e=t;else if(Be(t))for(let n=0;n<t.length;n++){const s=ny(t[n]);s&&(e+=s+" ")}else if(bt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const KL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qL=Yb(KL);function jI(t){return!!t||t===""}function XL(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=zh(t[s],e[s]);return n}function zh(t,e){if(t===e)return!0;let n=ew(t),s=ew(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ao(t),s=ao(e),n||s)return t===e;if(n=Be(t),s=Be(e),n||s)return n&&s?XL(t,e):!1;if(n=bt(t),s=bt(e),n||s){if(!n||!s)return!1;const o=Object.keys(t).length,r=Object.keys(e).length;if(o!==r)return!1;for(const i in t){const a=t.hasOwnProperty(i),l=e.hasOwnProperty(i);if(a&&!l||!a&&l||!zh(t[i],e[i]))return!1}}return String(t)===String(e)}const zI=t=>!!(t&&t.__v_isRef===!0),He=t=>Lt(t)?t:t==null?"":Be(t)||bt(t)&&(t.toString===MI||!ze(t.toString))?zI(t)?He(t.value):JSON.stringify(t,WI,2):String(t),WI=(t,e)=>zI(e)?WI(t,e.value):rl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,o],r)=>(n[ag(s,r)+" =>"]=o,n),{})}:PI(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ag(n))}:ao(e)?ag(e):bt(e)&&!Be(e)&&!BI(e)?String(e):e,ag=(t,e="")=>{var n;return ao(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jn;class GI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jn,!e&&jn&&(this.index=(jn.scopes||(jn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jn;try{return jn=this,e()}finally{jn=n}}}on(){jn=this}off(){jn=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function HI(t){return new GI(t)}function tp(){return jn}function fv(t,e=!1){jn&&jn.cleanups.push(t)}let St;const lg=new WeakSet;class KI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jn&&jn.active&&jn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,lg.has(this)&&(lg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||XI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nw(this),QI(this);const e=St,n=no;St=this,no=!0;try{return this.fn()}finally{YI(this),St=e,no=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ry(e);this.deps=this.depsTail=void 0,nw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?lg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pv(this)&&this.run()}get dirty(){return pv(this)}}let qI=0,Dc,Oc;function XI(t,e=!1){if(t.flags|=8,e){t.next=Oc,Oc=t;return}t.next=Dc,Dc=t}function sy(){qI++}function oy(){if(--qI>0)return;if(Oc){let e=Oc;for(Oc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Dc;){let e=Dc;for(Dc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function QI(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function YI(t){let e,n=t.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),ry(s),QL(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}t.deps=e,t.depsTail=n}function pv(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(JI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function JI(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Kc))return;t.globalVersion=Kc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!pv(t)){t.flags&=-3;return}const n=St,s=no;St=t,no=!0;try{QI(t);const o=t.fn(t._value);(e.version===0||Mr(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{St=n,no=s,YI(t),t.flags&=-3}}function ry(t,e=!1){const{dep:n,prevSub:s,nextSub:o}=t;if(s&&(s.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ry(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function QL(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let no=!0;const ZI=[];function si(){ZI.push(no),no=!1}function oi(){const t=ZI.pop();no=t===void 0?!0:t}function nw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=St;St=void 0;try{e()}finally{St=n}}}let Kc=0;class YL{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class iy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!St||!no||St===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==St)n=this.activeLink=new YL(St,this),St.deps?(n.prevDep=St.depsTail,St.depsTail.nextDep=n,St.depsTail=n):St.deps=St.depsTail=n,eE(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=St.depsTail,n.nextDep=void 0,St.depsTail.nextDep=n,St.depsTail=n,St.deps===n&&(St.deps=s)}return n}trigger(e){this.version++,Kc++,this.notify(e)}notify(e){sy();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{oy()}}}function eE(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)eE(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Wh=new WeakMap,zi=Symbol(""),mv=Symbol(""),qc=Symbol("");function Nn(t,e,n){if(no&&St){let s=Wh.get(t);s||Wh.set(t,s=new Map);let o=s.get(n);o||(s.set(n,o=new iy),o.map=s,o.key=n),o.track()}}function Zo(t,e,n,s,o,r){const i=Wh.get(t);if(!i){Kc++;return}const a=l=>{l&&l.trigger()};if(sy(),e==="clear")i.forEach(a);else{const l=Be(t),c=l&&ey(n);if(l&&n==="length"){const u=Number(s);i.forEach((d,h)=>{(h==="length"||h===qc||!ao(h)&&h>=u)&&a(d)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),c&&a(i.get(qc)),e){case"add":l?c&&a(i.get("length")):(a(i.get(zi)),rl(t)&&a(i.get(mv)));break;case"delete":l||(a(i.get(zi)),rl(t)&&a(i.get(mv)));break;case"set":rl(t)&&a(i.get(zi));break}}oy()}function JL(t,e){const n=Wh.get(t);return n&&n.get(e)}function La(t){const e=rt(t);return e===t?e:(Nn(e,"iterate",qc),Ms(t)?e:e.map(An))}function np(t){return Nn(t=rt(t),"iterate",qc),t}const ZL={__proto__:null,[Symbol.iterator](){return cg(this,Symbol.iterator,An)},concat(...t){return La(this).concat(...t.map(e=>Be(e)?La(e):e))},entries(){return cg(this,"entries",t=>(t[1]=An(t[1]),t))},every(t,e){return qo(this,"every",t,e,void 0,arguments)},filter(t,e){return qo(this,"filter",t,e,n=>n.map(An),arguments)},find(t,e){return qo(this,"find",t,e,An,arguments)},findIndex(t,e){return qo(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qo(this,"findLast",t,e,An,arguments)},findLastIndex(t,e){return qo(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qo(this,"forEach",t,e,void 0,arguments)},includes(...t){return ug(this,"includes",t)},indexOf(...t){return ug(this,"indexOf",t)},join(t){return La(this).join(t)},lastIndexOf(...t){return ug(this,"lastIndexOf",t)},map(t,e){return qo(this,"map",t,e,void 0,arguments)},pop(){return fc(this,"pop")},push(...t){return fc(this,"push",t)},reduce(t,...e){return sw(this,"reduce",t,e)},reduceRight(t,...e){return sw(this,"reduceRight",t,e)},shift(){return fc(this,"shift")},some(t,e){return qo(this,"some",t,e,void 0,arguments)},splice(...t){return fc(this,"splice",t)},toReversed(){return La(this).toReversed()},toSorted(t){return La(this).toSorted(t)},toSpliced(...t){return La(this).toSpliced(...t)},unshift(...t){return fc(this,"unshift",t)},values(){return cg(this,"values",An)}};function cg(t,e,n){const s=np(t),o=s[e]();return s!==t&&!Ms(t)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.value&&(r.value=n(r.value)),r}),o}const eF=Array.prototype;function qo(t,e,n,s,o,r){const i=np(t),a=i!==t&&!Ms(t),l=i[e];if(l!==eF[e]){const d=l.apply(t,r);return a?An(d):d}let c=n;i!==t&&(a?c=function(d,h){return n.call(this,An(d),h,t)}:n.length>2&&(c=function(d,h){return n.call(this,d,h,t)}));const u=l.call(i,c,s);return a&&o?o(u):u}function sw(t,e,n,s){const o=np(t);let r=n;return o!==t&&(Ms(t)?n.length>3&&(r=function(i,a,l){return n.call(this,i,a,l,t)}):r=function(i,a,l){return n.call(this,i,An(a),l,t)}),o[e](r,...s)}function ug(t,e,n){const s=rt(t);Nn(s,"iterate",qc);const o=s[e](...n);return(o===-1||o===!1)&&cy(n[0])?(n[0]=rt(n[0]),s[e](...n)):o}function fc(t,e,n=[]){si(),sy();const s=rt(t)[e].apply(t,n);return oy(),oi(),s}const tF=Yb("__proto__,__v_isRef,__isVue"),tE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ao));function nF(t){ao(t)||(t=String(t));const e=rt(this);return Nn(e,"has",t),e.hasOwnProperty(t)}class nE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?hF:iE:r?rE:oE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const i=Be(e);if(!o){let l;if(i&&(l=ZL[n]))return l;if(n==="hasOwnProperty")return nF}const a=Reflect.get(e,n,Ht(e)?e:s);return(ao(n)?tE.has(n):tF(n))||(o||Nn(e,"get",n),r)?a:Ht(a)?i&&ey(n)?a:a.value:bt(a)?o?sp(a):Go(a):a}}class sE extends nE{constructor(e=!1){super(!1,e)}set(e,n,s,o){let r=e[n];if(!this._isShallow){const l=Hr(r);if(!Ms(s)&&!Hr(s)&&(r=rt(r),s=rt(s)),!Be(e)&&Ht(r)&&!Ht(s))return l?!1:(r.value=s,!0)}const i=Be(e)&&ey(n)?Number(n)<e.length:ht(e,n),a=Reflect.set(e,n,s,Ht(e)?e:o);return e===rt(o)&&(i?Mr(s,r)&&Zo(e,"set",n,s):Zo(e,"add",n,s)),a}deleteProperty(e,n){const s=ht(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&s&&Zo(e,"delete",n,void 0),o}has(e,n){const s=Reflect.has(e,n);return(!ao(n)||!tE.has(n))&&Nn(e,"has",n),s}ownKeys(e){return Nn(e,"iterate",Be(e)?"length":zi),Reflect.ownKeys(e)}}class sF extends nE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const oF=new sE,rF=new sF,iF=new sE(!0);const gv=t=>t,Jd=t=>Reflect.getPrototypeOf(t);function aF(t,e,n){return function(...s){const o=this.__v_raw,r=rt(o),i=rl(r),a=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,c=o[t](...s),u=n?gv:e?vv:An;return!e&&Nn(r,"iterate",l?mv:zi),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Zd(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function lF(t,e){const n={get(o){const r=this.__v_raw,i=rt(r),a=rt(o);t||(Mr(o,a)&&Nn(i,"get",o),Nn(i,"get",a));const{has:l}=Jd(i),c=e?gv:t?vv:An;if(l.call(i,o))return c(r.get(o));if(l.call(i,a))return c(r.get(a));r!==i&&r.get(o)},get size(){const o=this.__v_raw;return!t&&Nn(rt(o),"iterate",zi),Reflect.get(o,"size",o)},has(o){const r=this.__v_raw,i=rt(r),a=rt(o);return t||(Mr(o,a)&&Nn(i,"has",o),Nn(i,"has",a)),o===a?r.has(o):r.has(o)||r.has(a)},forEach(o,r){const i=this,a=i.__v_raw,l=rt(a),c=e?gv:t?vv:An;return!t&&Nn(l,"iterate",zi),a.forEach((u,d)=>o.call(r,c(u),c(d),i))}};return tn(n,t?{add:Zd("add"),set:Zd("set"),delete:Zd("delete"),clear:Zd("clear")}:{add(o){!e&&!Ms(o)&&!Hr(o)&&(o=rt(o));const r=rt(this);return Jd(r).has.call(r,o)||(r.add(o),Zo(r,"add",o,o)),this},set(o,r){!e&&!Ms(r)&&!Hr(r)&&(r=rt(r));const i=rt(this),{has:a,get:l}=Jd(i);let c=a.call(i,o);c||(o=rt(o),c=a.call(i,o));const u=l.call(i,o);return i.set(o,r),c?Mr(r,u)&&Zo(i,"set",o,r):Zo(i,"add",o,r),this},delete(o){const r=rt(this),{has:i,get:a}=Jd(r);let l=i.call(r,o);l||(o=rt(o),l=i.call(r,o)),a&&a.call(r,o);const c=r.delete(o);return l&&Zo(r,"delete",o,void 0),c},clear(){const o=rt(this),r=o.size!==0,i=o.clear();return r&&Zo(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=aF(o,t,e)}),n}function ay(t,e){const n=lF(t,e);return(s,o,r)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?s:Reflect.get(ht(n,o)&&o in s?n:s,o,r)}const cF={get:ay(!1,!1)},uF={get:ay(!1,!0)},dF={get:ay(!0,!1)};const oE=new WeakMap,rE=new WeakMap,iE=new WeakMap,hF=new WeakMap;function fF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pF(t){return t.__v_skip||!Object.isExtensible(t)?0:fF(VL(t))}function Go(t){return Hr(t)?t:ly(t,!1,oF,cF,oE)}function nr(t){return ly(t,!1,iF,uF,rE)}function sp(t){return ly(t,!0,rF,dF,iE)}function ly(t,e,n,s,o){if(!bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=o.get(t);if(r)return r;const i=pF(t);if(i===0)return t;const a=new Proxy(t,i===2?s:n);return o.set(t,a),a}function Wi(t){return Hr(t)?Wi(t.__v_raw):!!(t&&t.__v_isReactive)}function Hr(t){return!!(t&&t.__v_isReadonly)}function Ms(t){return!!(t&&t.__v_isShallow)}function cy(t){return t?!!t.__v_raw:!1}function rt(t){const e=t&&t.__v_raw;return e?rt(e):t}function mF(t){return!ht(t,"__v_skip")&&Object.isExtensible(t)&&VI(t,"__v_skip",!0),t}const An=t=>bt(t)?Go(t):t,vv=t=>bt(t)?sp(t):t;function Ht(t){return t?t.__v_isRef===!0:!1}function Ot(t){return aE(t,!1)}function cr(t){return aE(t,!0)}function aE(t,e){return Ht(t)?t:new gF(t,e)}class gF{constructor(e,n){this.dep=new iy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:rt(e),this._value=n?e:An(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ms(e)||Hr(e);e=s?e:rt(e),Mr(e,n)&&(this._rawValue=e,this._value=s?e:An(e),this.dep.trigger())}}function je(t){return Ht(t)?t.value:t}function Ri(t){return ze(t)?t():je(t)}const vF={get:(t,e,n)=>e==="__v_raw"?t:je(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const o=t[e];return Ht(o)&&!Ht(n)?(o.value=n,!0):Reflect.set(t,e,n,s)}};function lE(t){return Wi(t)?t:new Proxy(t,vF)}function twe(t){const e=Be(t)?new Array(t.length):{};for(const n in t)e[n]=uE(t,n);return e}class bF{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return JL(rt(this._object),this._key)}}class yF{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function cE(t,e,n){return Ht(t)?t:ze(t)?new yF(t):bt(t)&&arguments.length>1?uE(t,e,n):Ot(t)}function uE(t,e,n){const s=t[e];return Ht(s)?s:new bF(t,e,n)}class xF{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new iy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Kc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return XI(this,!0),!0}get value(){const e=this.dep.track();return JI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function wF(t,e,n=!1){let s,o;return ze(t)?s=t:(s=t.get,o=t.set),new xF(s,o,n)}const eh={},Gh=new WeakMap;let Ti;function CF(t,e=!1,n=Ti){if(n){let s=Gh.get(n);s||Gh.set(n,s=[]),s.push(t)}}function _F(t,e,n=wt){const{immediate:s,deep:o,once:r,scheduler:i,augmentJob:a,call:l}=n,c=y=>o?y:Ms(y)||o===!1||o===0?er(y,1):er(y);let u,d,h,f,p=!1,m=!1;if(Ht(t)?(d=()=>t.value,p=Ms(t)):Wi(t)?(d=()=>c(t),p=!0):Be(t)?(m=!0,p=t.some(y=>Wi(y)||Ms(y)),d=()=>t.map(y=>{if(Ht(y))return y.value;if(Wi(y))return c(y);if(ze(y))return l?l(y,2):y()})):ze(t)?e?d=l?()=>l(t,2):t:d=()=>{if(h){si();try{h()}finally{oi()}}const y=Ti;Ti=u;try{return l?l(t,3,[f]):t(f)}finally{Ti=y}}:d=No,e&&o){const y=d,w=o===!0?1/0:o;d=()=>er(y(),w)}const v=tp(),g=()=>{u.stop(),v&&Zb(v.effects,u)};if(r&&e){const y=e;e=(...w)=>{y(...w),g()}}let b=m?new Array(t.length).fill(eh):eh;const x=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(e){const w=u.run();if(o||p||(m?w.some((C,_)=>Mr(C,b[_])):Mr(w,b))){h&&h();const C=Ti;Ti=u;try{const _=[w,b===eh?void 0:m&&b[0]===eh?[]:b,f];l?l(e,3,_):e(..._),b=w}finally{Ti=C}}}else u.run()};return a&&a(x),u=new KI(d),u.scheduler=i?()=>i(x,!1):x,f=y=>CF(y,!1,u),h=u.onStop=()=>{const y=Gh.get(u);if(y){if(l)l(y,4);else for(const w of y)w();Gh.delete(u)}},e?s?x(!0):b=u.run():i?i(x.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function er(t,e=1/0,n){if(e<=0||!bt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ht(t))er(t.value,e,n);else if(Be(t))for(let s=0;s<t.length;s++)er(t[s],e,n);else if(PI(t)||rl(t))t.forEach(s=>{er(s,e,n)});else if(BI(t)){for(const s in t)er(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&er(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _u(t,e,n,s){try{return s?t(...s):t()}catch(o){Su(o,e,n)}}function lo(t,e,n,s){if(ze(t)){const o=_u(t,e,n,s);return o&&Yf(o)&&o.catch(r=>{Su(r,e,n)}),o}if(Be(t)){const o=[];for(let r=0;r<t.length;r++)o.push(lo(t[r],e,n,s));return o}}function Su(t,e,n,s=!0){const o=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||wt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(r){si(),_u(r,null,10,[t,l,c]),oi();return}}SF(t,n,o,s,i)}function SF(t,e,n,s=!0,o=!1){if(o)throw t;console.error(t)}const Wn=[];let wo=-1;const ll=[];let kr=null,za=0;const dE=Promise.resolve();let Hh=null;function Wl(t){const e=Hh||dE;return t?e.then(this?t.bind(this):t):e}function IF(t){let e=wo+1,n=Wn.length;for(;e<n;){const s=e+n>>>1,o=Wn[s],r=Xc(o);r<t||r===t&&o.flags&2?e=s+1:n=s}return e}function uy(t){if(!(t.flags&1)){const e=Xc(t),n=Wn[Wn.length-1];!n||!(t.flags&2)&&e>=Xc(n)?Wn.push(t):Wn.splice(IF(e),0,t),t.flags|=1,hE()}}function hE(){Hh||(Hh=dE.then(fE))}function bv(t){Be(t)?ll.push(...t):kr&&t.id===-1?kr.splice(za+1,0,t):t.flags&1||(ll.push(t),t.flags|=1),hE()}function ow(t,e,n=wo+1){for(;n<Wn.length;n++){const s=Wn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Wn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Kh(t){if(ll.length){const e=[...new Set(ll)].sort((n,s)=>Xc(n)-Xc(s));if(ll.length=0,kr){kr.push(...e);return}for(kr=e,za=0;za<kr.length;za++){const n=kr[za];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}kr=null,za=0}}const Xc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fE(t){try{for(wo=0;wo<Wn.length;wo++){const e=Wn[wo];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),_u(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wo<Wn.length;wo++){const e=Wn[wo];e&&(e.flags&=-2)}wo=-1,Wn.length=0,Kh(),Hh=null,(Wn.length||ll.length)&&fE()}}let un=null,pE=null;function qh(t){const e=un;return un=t,pE=t&&t.type.__scopeId||null,e}function ns(t,e=un,n){if(!e||t._n)return t;const s=(...o)=>{s._d&&vw(-1);const r=qh(e);let i;try{i=t(...o)}finally{qh(r),s._d&&vw(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function nwe(t,e){if(un===null)return t;const n=lp(un),s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[r,i,a,l=wt]=e[o];r&&(ze(r)&&(r={mounted:r,updated:r}),r.deep&&er(i),s.push({dir:r,instance:n,value:i,oldValue:void 0,arg:a,modifiers:l}))}return t}function _o(t,e,n,s){const o=t.dirs,r=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let l=a.dir[s];l&&(si(),lo(l,n,8,[t.el,a,t,e]),oi())}}const EF=Symbol("_vte"),mE=t=>t.__isTeleport,$r=Symbol("_leaveCb"),th=Symbol("_enterCb");function kF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ur(()=>{t.isMounted=!0}),Iu(()=>{t.isUnmounting=!0}),t}const Es=[Function,Array],gE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Es,onEnter:Es,onAfterEnter:Es,onEnterCancelled:Es,onBeforeLeave:Es,onLeave:Es,onAfterLeave:Es,onLeaveCancelled:Es,onBeforeAppear:Es,onAppear:Es,onAfterAppear:Es,onAppearCancelled:Es},vE=t=>{const e=t.subTree;return e.component?vE(e.component):e},$F={name:"BaseTransition",props:gE,setup(t,{slots:e}){const n=ys(),s=kF();return()=>{const o=e.default&&xE(e.default(),!0);if(!o||!o.length)return;const r=bE(o),i=rt(t),{mode:a}=i;if(s.isLeaving)return dg(r);const l=rw(r);if(!l)return dg(r);let c=yv(l,i,s,n,h=>c=h);l.type!==an&&vl(l,c);const u=n.subTree,d=u&&rw(u);if(d&&d.type!==an&&!eo(l,d)&&vE(n).type!==an){const h=yv(d,i,s,n);if(vl(d,h),a==="out-in"&&l.type!==an)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave},dg(r);a==="in-out"&&l.type!==an&&(h.delayLeave=(f,p,m)=>{const v=yE(s,d);v[String(d.key)]=d,f[$r]=()=>{p(),f[$r]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return r}}};function bE(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==an){e=n;break}}return e}const TF=$F;function yE(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function yv(t,e,n,s,o){const{appear:r,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:b,onAppearCancelled:x}=e,y=String(t.key),w=yE(n,t),C=(I,E)=>{I&&lo(I,s,9,E)},_=(I,E)=>{const O=E[1];C(I,E),Be(I)?I.every(A=>A.length<=1)&&O():I.length<=1&&O()},S={mode:i,persisted:a,beforeEnter(I){let E=l;if(!n.isMounted)if(r)E=v||l;else return;I[$r]&&I[$r](!0);const O=w[y];O&&eo(t,O)&&O.el[$r]&&O.el[$r](),C(E,[I])},enter(I){let E=c,O=u,A=d;if(!n.isMounted)if(r)E=g||c,O=b||u,A=x||d;else return;let P=!1;const z=I[th]=G=>{P||(P=!0,G?C(A,[I]):C(O,[I]),S.delayedLeave&&S.delayedLeave(),I[th]=void 0)};E?_(E,[I,z]):z()},leave(I,E){const O=String(t.key);if(I[th]&&I[th](!0),n.isUnmounting)return E();C(h,[I]);let A=!1;const P=I[$r]=z=>{A||(A=!0,E(),z?C(m,[I]):C(p,[I]),I[$r]=void 0,w[O]===t&&delete w[O])};w[O]=t,f?_(f,[I,P]):P()},clone(I){const E=yv(I,e,n,s,o);return o&&o(E),E}};return S}function dg(t){if(op(t))return t=co(t),t.children=null,t}function rw(t){if(!op(t))return mE(t.type)&&t.children?bE(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ze(n.default))return n.default()}}function vl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,vl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xE(t,e=!1,n){let s=[],o=0;for(let r=0;r<t.length;r++){let i=t[r];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:r);i.type===Xt?(i.patchFlag&128&&o++,s=s.concat(xE(i.children,e,a))):(e||i.type!==an)&&s.push(a!=null?co(i,{key:a}):i)}if(o>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function fn(t,e){return ze(t)?tn({name:t.name},e,{setup:t}):t}function wE(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Xh(t,e,n,s,o=!1){if(Be(t)){t.forEach((p,m)=>Xh(p,e&&(Be(e)?e[m]:e),n,s,o));return}if(Br(s)&&!o)return;const r=s.shapeFlag&4?lp(s.component):s.el,i=o?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===wt?a.refs={}:a.refs,d=a.setupState,h=rt(d),f=d===wt?()=>!1:p=>ht(h,p);if(c!=null&&c!==l&&(Lt(c)?(u[c]=null,f(c)&&(d[c]=null)):Ht(c)&&(c.value=null)),ze(l))_u(l,a,12,[i,u]);else{const p=Lt(l),m=Ht(l);if(p||m){const v=()=>{if(t.f){const g=p?f(l)?d[l]:u[l]:l.value;o?Be(g)&&Zb(g,r):Be(g)?g.includes(r)||g.push(r):p?(u[l]=[r],f(l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else p?(u[l]=i,f(l)&&(d[l]=i)):m&&(l.value=i,t.k&&(u[t.k]=i))};i?(v.id=-1,Cn(v,n)):v()}}}let iw=!1;const Fa=()=>{iw||(console.error("Hydration completed but contains mismatches."),iw=!0)},NF=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",AF=t=>t.namespaceURI.includes("MathML"),nh=t=>{if(t.nodeType===1){if(NF(t))return"svg";if(AF(t))return"mathml"}},sh=t=>t.nodeType===8;function RF(t){const{mt:e,p:n,o:{patchProp:s,createText:o,nextSibling:r,parentNode:i,remove:a,insert:l,createComment:c}}=t,u=(x,y)=>{if(!y.hasChildNodes()){n(null,x,y),Kh(),y._vnode=x;return}d(y.firstChild,x,null,null,null),Kh(),y._vnode=x},d=(x,y,w,C,_,S=!1)=>{S=S||!!y.dynamicChildren;const I=sh(x)&&x.data==="[",E=()=>m(x,y,w,C,_,I),{type:O,ref:A,shapeFlag:P,patchFlag:z}=y;let G=x.nodeType;y.el=x,z===-2&&(S=!1,y.dynamicChildren=null);let M=null;switch(O){case Vr:G!==3?y.children===""?(l(y.el=o(""),i(x),x),M=x):M=E():(x.data!==y.children&&(Fa(),x.data=y.children),M=r(x));break;case an:b(x)?(M=r(x),g(y.el=x.content.firstChild,x,w)):G!==8||I?M=E():M=r(x);break;case Fc:if(I&&(x=r(x),G=x.nodeType),G===1||G===3){M=x;const R=!y.children.length;for(let D=0;D<y.staticCount;D++)R&&(y.children+=M.nodeType===1?M.outerHTML:M.data),D===y.staticCount-1&&(y.anchor=M),M=r(M);return I?r(M):M}else E();break;case Xt:I?M=p(x,y,w,C,_,S):M=E();break;default:if(P&1)(G!==1||y.type.toLowerCase()!==x.tagName.toLowerCase())&&!b(x)?M=E():M=h(x,y,w,C,_,S);else if(P&6){y.slotScopeIds=_;const R=i(x);if(I?M=v(x):sh(x)&&x.data==="teleport start"?M=v(x,x.data,"teleport end"):M=r(x),e(y,R,null,w,C,nh(R),S),Br(y)){let D;I?(D=Ze(Xt),D.anchor=M?M.previousSibling:R.lastChild):D=x.nodeType===3?mn(""):Ze("div"),D.el=x,y.component.subTree=D}}else P&64?G!==8?M=E():M=y.type.hydrate(x,y,w,C,_,S,t,f):P&128&&(M=y.type.hydrate(x,y,w,C,nh(i(x)),_,S,t,d))}return A!=null&&Xh(A,null,C,y),M},h=(x,y,w,C,_,S)=>{S=S||!!y.dynamicChildren;const{type:I,props:E,patchFlag:O,shapeFlag:A,dirs:P,transition:z}=y,G=I==="input"||I==="option";if(G||O!==-1){P&&_o(y,null,w,"created");let M=!1;if(b(x)){M=zE(null,z)&&w&&w.vnode.props&&w.vnode.props.appear;const D=x.content.firstChild;M&&z.beforeEnter(D),g(D,x,w),y.el=x=D}if(A&16&&!(E&&(E.innerHTML||E.textContent))){let D=f(x.firstChild,y,x,w,C,_,S);for(;D;){oh(x,1)||Fa();const j=D;D=D.nextSibling,a(j)}}else if(A&8){let D=y.children;D[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(D=D.slice(1)),x.textContent!==D&&(oh(x,0)||Fa(),x.textContent=y.children)}if(E){if(G||!S||O&48){const D=x.tagName.includes("-");for(const j in E)(G&&(j.endsWith("value")||j==="indeterminate")||Cu(j)&&!il(j)||j[0]==="."||D)&&s(x,j,null,E[j],void 0,w)}else if(E.onClick)s(x,"onClick",null,E.onClick,void 0,w);else if(O&4&&Wi(E.style))for(const D in E.style)E.style[D]}let R;(R=E&&E.onVnodeBeforeMount)&&ts(R,w,y),P&&_o(y,null,w,"beforeMount"),((R=E&&E.onVnodeMounted)||P||M)&&XE(()=>{R&&ts(R,w,y),M&&z.enter(x),P&&_o(y,null,w,"mounted")},C)}return x.nextSibling},f=(x,y,w,C,_,S,I)=>{I=I||!!y.dynamicChildren;const E=y.children,O=E.length;for(let A=0;A<O;A++){const P=I?E[A]:E[A]=ms(E[A]),z=P.type===Vr;x?(z&&!I&&A+1<O&&ms(E[A+1]).type===Vr&&(l(o(x.data.slice(P.children.length)),w,r(x)),x.data=P.children),x=d(x,P,C,_,S,I)):z&&!P.children?l(P.el=o(""),w):(oh(w,1)||Fa(),n(null,P,w,null,C,_,nh(w),S))}return x},p=(x,y,w,C,_,S)=>{const{slotScopeIds:I}=y;I&&(_=_?_.concat(I):I);const E=i(x),O=f(r(x),y,E,w,C,_,S);return O&&sh(O)&&O.data==="]"?r(y.anchor=O):(Fa(),l(y.anchor=c("]"),E,O),O)},m=(x,y,w,C,_,S)=>{if(oh(x.parentElement,1)||Fa(),y.el=null,S){const O=v(x);for(;;){const A=r(x);if(A&&A!==O)a(A);else break}}const I=r(x),E=i(x);return a(x),n(null,y,E,I,w,C,nh(E),_),I},v=(x,y="[",w="]")=>{let C=0;for(;x;)if(x=r(x),x&&sh(x)&&(x.data===y&&C++,x.data===w)){if(C===0)return r(x);C--}return x},g=(x,y,w)=>{const C=y.parentNode;C&&C.replaceChild(x,y);let _=w;for(;_;)_.vnode.el===y&&(_.vnode.el=_.subTree.el=x),_=_.parent},b=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[u,d]}const aw="data-allow-mismatch",DF={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function oh(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(aw);)t=t.parentElement;const n=t&&t.getAttribute(aw);if(n==null)return!1;if(n==="")return!0;{const s=n.split(",");return e===0&&s.includes("children")?!0:n.split(",").includes(DF[e])}}ep().requestIdleCallback;ep().cancelIdleCallback;const Br=t=>!!t.type.__asyncLoader,op=t=>t.type.__isKeepAlive,OF={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ys(),s=n.ctx;if(!s.renderer)return()=>{const b=e.default&&e.default();return b&&b.length===1?b[0]:b};const o=new Map,r=new Set;let i=null;const a=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=s,h=d("div");s.activate=(b,x,y,w,C)=>{const _=b.component;c(b,x,y,0,a),l(_.vnode,b,x,y,_,a,w,b.slotScopeIds,C),Cn(()=>{_.isDeactivated=!1,_.a&&al(_.a);const S=b.props&&b.props.onVnodeMounted;S&&ts(S,_.parent,b)},a)},s.deactivate=b=>{const x=b.component;Yh(x.m),Yh(x.a),c(b,h,null,1,a),Cn(()=>{x.da&&al(x.da);const y=b.props&&b.props.onVnodeUnmounted;y&&ts(y,x.parent,b),x.isDeactivated=!0},a)};function f(b){hg(b),u(b,n,a,!0)}function p(b){o.forEach((x,y)=>{const w=$v(x.type);w&&!b(w)&&m(y)})}function m(b){const x=o.get(b);x&&(!i||!eo(x,i))?f(x):i&&hg(i),o.delete(b),r.delete(b)}ls(()=>[t.include,t.exclude],([b,x])=>{b&&p(y=>Sc(b,y)),x&&p(y=>!Sc(x,y))},{flush:"post",deep:!0});let v=null;const g=()=>{v!=null&&(Jh(n.subTree.type)?Cn(()=>{o.set(v,rh(n.subTree))},n.subTree.suspense):o.set(v,rh(n.subTree)))};return ur(g),EE(g),Iu(()=>{o.forEach(b=>{const{subTree:x,suspense:y}=n,w=rh(x);if(b.type===w.type&&b.key===w.key){hg(w);const C=w.component.da;C&&Cn(C,y);return}f(b)})}),()=>{if(v=null,!e.default)return i=null;const b=e.default(),x=b[0];if(b.length>1)return i=null,b;if(!Ji(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return i=null,x;let y=rh(x);if(y.type===an)return i=null,y;const w=y.type,C=$v(Br(y)?y.type.__asyncResolved||{}:w),{include:_,exclude:S,max:I}=t;if(_&&(!C||!Sc(_,C))||S&&C&&Sc(S,C))return y.shapeFlag&=-257,i=y,x;const E=y.key==null?w:y.key,O=o.get(E);return y.el&&(y=co(y),x.shapeFlag&128&&(x.ssContent=y)),v=E,O?(y.el=O.el,y.component=O.component,y.transition&&vl(y,y.transition),y.shapeFlag|=512,r.delete(E),r.add(E)):(r.add(E),I&&r.size>parseInt(I,10)&&m(r.values().next().value)),y.shapeFlag|=256,i=y,Jh(x.type)?x:y}}},LF=OF;function Sc(t,e){return Be(t)?t.some(n=>Sc(n,e)):Lt(t)?t.split(",").includes(e):BL(t)?(t.lastIndex=0,t.test(e)):!1}function CE(t,e){SE(t,"a",e)}function _E(t,e){SE(t,"da",e)}function SE(t,e,n=gn){const s=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(rp(e,s,n),n){let o=n.parent;for(;o&&o.parent;)op(o.parent.vnode)&&FF(s,e,n,o),o=o.parent}}function FF(t,e,n,s){const o=rp(e,t,s,!0);ip(()=>{Zb(s[e],o)},n)}function hg(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function rh(t){return t.shapeFlag&128?t.ssContent:t}function rp(t,e,n=gn,s=!1){if(n){const o=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...i)=>{si();const a=Zi(n),l=lo(e,n,t,i);return a(),oi(),l});return s?o.unshift(r):o.push(r),r}}const gr=t=>(e,n=gn)=>{(!Yc||t==="sp")&&rp(t,(...s)=>e(...s),n)},IE=gr("bm"),ur=gr("m"),PF=gr("bu"),EE=gr("u"),Iu=gr("bum"),ip=gr("um"),MF=gr("sp"),BF=gr("rtg"),VF=gr("rtc");function kE(t,e=gn){rp("ec",t,e)}const dy="components",UF="directives";function lw(t,e){return hy(dy,t,!0,e)||t}const $E=Symbol.for("v-ndc");function jF(t){return Lt(t)?hy(dy,t,!1)||t:t||$E}function swe(t){return hy(UF,t)}function hy(t,e,n=!0,s=!1){const o=un||gn;if(o){const r=o.type;if(t===dy){const a=$v(r,!1);if(a&&(a===e||a===Vs(e)||a===Zf(Vs(e))))return r}const i=cw(o[t]||r[t],e)||cw(o.appContext[t],e);return!i&&s?r:i}}function cw(t,e){return t&&(t[e]||t[Vs(e)]||t[Zf(Vs(e))])}function zF(t,e,n,s){let o;const r=n,i=Be(t);if(i||Lt(t)){const a=i&&Wi(t);let l=!1;a&&(l=!Ms(t),t=np(t)),o=new Array(t.length);for(let c=0,u=t.length;c<u;c++)o[c]=e(l?An(t[c]):t[c],c,void 0,r)}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,r)}else if(bt(t))if(t[Symbol.iterator])o=Array.from(t,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(t);o=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];o[l]=e(t[u],u,l,r)}}else o=[];return o}function WF(t,e,n={},s,o){if(un.ce||un.parent&&Br(un.parent)&&un.parent.ce)return Ft(),$o(Xt,null,[Ze("slot",n,s)],64);let r=t[e];r&&r._c&&(r._d=!1),Ft();const i=r&&TE(r(n)),a=n.key||i&&i.key,l=$o(Xt,{key:(a&&!ao(a)?a:`_${e}`)+(!i&&s?"_fb":"")},i||[],i&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function TE(t){return t.some(e=>Ji(e)?!(e.type===an||e.type===Xt&&!TE(e.children)):!0)?t:null}const xv=t=>t?ek(t)?lp(t):xv(t.parent):null,Lc=tn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xv(t.parent),$root:t=>xv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>fy(t),$forceUpdate:t=>t.f||(t.f=()=>{uy(t.update)}),$nextTick:t=>t.n||(t.n=Wl.bind(t.proxy)),$watch:t=>hP.bind(t)}),fg=(t,e)=>t!==wt&&!t.__isScriptSetup&&ht(t,e),GF={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=i[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return r[e]}else{if(fg(s,e))return i[e]=1,s[e];if(o!==wt&&ht(o,e))return i[e]=2,o[e];if((c=t.propsOptions[0])&&ht(c,e))return i[e]=3,r[e];if(n!==wt&&ht(n,e))return i[e]=4,n[e];wv&&(i[e]=0)}}const u=Lc[e];let d,h;if(u)return e==="$attrs"&&Nn(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==wt&&ht(n,e))return i[e]=4,n[e];if(h=l.config.globalProperties,ht(h,e))return h[e]},set({_:t},e,n){const{data:s,setupState:o,ctx:r}=t;return fg(o,e)?(o[e]=n,!0):s!==wt&&ht(s,e)?(s[e]=n,!0):ht(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||t!==wt&&ht(t,i)||fg(e,i)||(a=r[0])&&ht(a,i)||ht(s,i)||ht(Lc,i)||ht(o.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ht(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function uw(t){return Be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function HF(t){const e=ys();let n=t();return Ev(),Yf(n)&&(n=n.catch(s=>{throw Zi(e),s})),[n,()=>Zi(e)]}let wv=!0;function KF(t){const e=fy(t),n=t.proxy,s=t.ctx;wv=!1,e.beforeCreate&&dw(e.beforeCreate,t,"bc");const{data:o,computed:r,methods:i,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:b,destroyed:x,unmounted:y,render:w,renderTracked:C,renderTriggered:_,errorCaptured:S,serverPrefetch:I,expose:E,inheritAttrs:O,components:A,directives:P,filters:z}=e;if(c&&qF(c,s,null),i)for(const R in i){const D=i[R];ze(D)&&(s[R]=D.bind(n))}if(o){const R=o.call(n,n);bt(R)&&(t.data=Go(R))}if(wv=!0,r)for(const R in r){const D=r[R],j=ze(D)?D.bind(n,n):ze(D.get)?D.get.bind(n,n):No,ne=!ze(D)&&ze(D.set)?D.set.bind(n):No,re=et({get:j,set:ne});Object.defineProperty(s,R,{enumerable:!0,configurable:!0,get:()=>re.value,set:de=>re.value=de})}if(a)for(const R in a)NE(a[R],s,n,R);if(l){const R=ze(l)?l.call(n):l;Reflect.ownKeys(R).forEach(D=>{Hi(D,R[D])})}u&&dw(u,t,"c");function M(R,D){Be(D)?D.forEach(j=>R(j.bind(n))):D&&R(D.bind(n))}if(M(IE,d),M(ur,h),M(PF,f),M(EE,p),M(CE,m),M(_E,v),M(kE,S),M(VF,C),M(BF,_),M(Iu,b),M(ip,y),M(MF,I),Be(E))if(E.length){const R=t.exposed||(t.exposed={});E.forEach(D=>{Object.defineProperty(R,D,{get:()=>n[D],set:j=>n[D]=j})})}else t.exposed||(t.exposed={});w&&t.render===No&&(t.render=w),O!=null&&(t.inheritAttrs=O),A&&(t.components=A),P&&(t.directives=P),I&&wE(t)}function qF(t,e,n=No){Be(t)&&(t=Cv(t));for(const s in t){const o=t[s];let r;bt(o)?"default"in o?r=On(o.from||s,o.default,!0):r=On(o.from||s):r=On(o),Ht(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):e[s]=r}}function dw(t,e,n){lo(Be(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function NE(t,e,n,s){let o=s.includes(".")?HE(n,s):()=>n[s];if(Lt(t)){const r=e[t];ze(r)&&ls(o,r)}else if(ze(t))ls(o,t.bind(n));else if(bt(t))if(Be(t))t.forEach(r=>NE(r,e,n,s));else{const r=ze(t.handler)?t.handler.bind(n):e[t.handler];ze(r)&&ls(o,r,t)}}function fy(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=t.appContext,a=r.get(e);let l;return a?l=a:!o.length&&!n&&!s?l=e:(l={},o.length&&o.forEach(c=>Qh(l,c,i,!0)),Qh(l,e,i)),bt(e)&&r.set(e,l),l}function Qh(t,e,n,s=!1){const{mixins:o,extends:r}=e;r&&Qh(t,r,n,!0),o&&o.forEach(i=>Qh(t,i,n,!0));for(const i in e)if(!(s&&i==="expose")){const a=XF[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const XF={data:hw,props:fw,emits:fw,methods:Ic,computed:Ic,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:Ic,directives:Ic,watch:YF,provide:hw,inject:QF};function hw(t,e){return e?t?function(){return tn(ze(t)?t.call(this,this):t,ze(e)?e.call(this,this):e)}:e:t}function QF(t,e){return Ic(Cv(t),Cv(e))}function Cv(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Vn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ic(t,e){return t?tn(Object.create(null),t,e):e}function fw(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:tn(Object.create(null),uw(t),uw(e??{})):e}function YF(t,e){if(!t)return e;if(!e)return t;const n=tn(Object.create(null),t);for(const s in e)n[s]=Vn(t[s],e[s]);return n}function AE(){return{app:null,config:{isNativeTag:PL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let JF=0;function ZF(t,e){return function(s,o=null){ze(s)||(s=tn({},s)),o!=null&&!bt(o)&&(o=null);const r=AE(),i=new WeakSet,a=[];let l=!1;const c=r.app={_uid:JF++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:nk,get config(){return r.config},set config(u){},use(u,...d){return i.has(u)||(u&&ze(u.install)?(i.add(u),u.install(c,...d)):ze(u)&&(i.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||Ze(s,o);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(f,u):t(f,u,h),l=!0,c._container=u,u.__vue_app__=c,lp(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(lo(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Gi;Gi=c;try{return u()}finally{Gi=d}}};return c}}let Gi=null;function Hi(t,e){if(gn){let n=gn.provides;const s=gn.parent&&gn.parent.provides;s===n&&(n=gn.provides=Object.create(s)),n[t]=e}}function On(t,e,n=!1){const s=gn||un;if(s||Gi){const o=Gi?Gi._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&ze(e)?e.call(s&&s.proxy):e}}function RE(){return!!(gn||un||Gi)}const DE={},OE=()=>Object.create(DE),LE=t=>Object.getPrototypeOf(t)===DE;function eP(t,e,n,s=!1){const o={},r=OE();t.propsDefaults=Object.create(null),FE(t,e,o,r);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=s?o:nr(o):t.type.props?t.props=o:t.props=r,t.attrs=r}function tP(t,e,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=t,a=rt(o),[l]=t.propsOptions;let c=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(ap(t.emitsOptions,h))continue;const f=e[h];if(l)if(ht(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const p=Vs(h);o[p]=_v(l,a,p,f,t,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{FE(t,e,o,r)&&(c=!0);let u;for(const d in a)(!e||!ht(e,d)&&((u=ba(d))===d||!ht(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(o[d]=_v(l,a,d,void 0,t,!0)):delete o[d]);if(r!==a)for(const d in r)(!e||!ht(e,d))&&(delete r[d],c=!0)}c&&Zo(t.attrs,"set","")}function FE(t,e,n,s){const[o,r]=t.propsOptions;let i=!1,a;if(e)for(let l in e){if(il(l))continue;const c=e[l];let u;o&&ht(o,u=Vs(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:ap(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,i=!0)}if(r){const l=rt(n),c=a||wt;for(let u=0;u<r.length;u++){const d=r[u];n[d]=_v(o,l,d,c[d],t,!ht(c,d))}}return i}function _v(t,e,n,s,o,r){const i=t[n];if(i!=null){const a=ht(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&ze(l)){const{propsDefaults:c}=o;if(n in c)s=c[n];else{const u=Zi(o);s=c[n]=l.call(null,e),u()}}else s=l;o.ce&&o.ce._setProp(n,s)}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===ba(n))&&(s=!0))}return s}const nP=new WeakMap;function PE(t,e,n=!1){const s=n?nP:e.propsCache,o=s.get(t);if(o)return o;const r=t.props,i={},a=[];let l=!1;if(!ze(t)){const u=d=>{l=!0;const[h,f]=PE(d,e,!0);tn(i,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return bt(t)&&s.set(t,ol),ol;if(Be(r))for(let u=0;u<r.length;u++){const d=Vs(r[u]);pw(d)&&(i[d]=wt)}else if(r)for(const u in r){const d=Vs(u);if(pw(d)){const h=r[u],f=i[d]=Be(h)||ze(h)?{type:h}:tn({},h),p=f.type;let m=!1,v=!0;if(Be(p))for(let g=0;g<p.length;++g){const b=p[g],x=ze(b)&&b.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(v=!1)}else m=ze(p)&&p.name==="Boolean";f[0]=m,f[1]=v,(m||ht(f,"default"))&&a.push(d)}}const c=[i,a];return bt(t)&&s.set(t,c),c}function pw(t){return t[0]!=="$"&&!il(t)}const ME=t=>t[0]==="_"||t==="$stable",py=t=>Be(t)?t.map(ms):[ms(t)],sP=(t,e,n)=>{if(e._n)return e;const s=ns((...o)=>py(e(...o)),n);return s._c=!1,s},BE=(t,e,n)=>{const s=t._ctx;for(const o in t){if(ME(o))continue;const r=t[o];if(ze(r))e[o]=sP(o,r,s);else if(r!=null){const i=py(r);e[o]=()=>i}}},VE=(t,e)=>{const n=py(e);t.slots.default=()=>n},UE=(t,e,n)=>{for(const s in e)(n||s!=="_")&&(t[s]=e[s])},oP=(t,e,n)=>{const s=t.slots=OE();if(t.vnode.shapeFlag&32){const o=e._;o?(UE(s,e,n),n&&VI(s,"_",o,!0)):BE(e,s)}else e&&VE(t,e)},rP=(t,e,n)=>{const{vnode:s,slots:o}=t;let r=!0,i=wt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:UE(o,e,n):(r=!e.$stable,BE(e,o)),i=e}else e&&(VE(t,e),i={default:1});if(r)for(const a in o)!ME(a)&&i[a]==null&&delete o[a]},Cn=XE;function iP(t){return jE(t)}function aP(t){return jE(t,RF)}function jE(t,e){const n=ep();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=No,insertStaticContent:p}=t,m=(N,L,K,oe=null,se=null,k=null,T=void 0,U=null,Y=!!L.dynamicChildren)=>{if(N===L)return;N&&!eo(N,L)&&(oe=q(N),de(N,se,k,!0),N=null),L.patchFlag===-2&&(Y=!1,L.dynamicChildren=null);const{type:ee,ref:ve,shapeFlag:B}=L;switch(ee){case Vr:v(N,L,K,oe);break;case an:g(N,L,K,oe);break;case Fc:N==null&&b(L,K,oe,T);break;case Xt:A(N,L,K,oe,se,k,T,U,Y);break;default:B&1?w(N,L,K,oe,se,k,T,U,Y):B&6?P(N,L,K,oe,se,k,T,U,Y):(B&64||B&128)&&ee.process(N,L,K,oe,se,k,T,U,Y,pe)}ve!=null&&se&&Xh(ve,N&&N.ref,k,L||N,!L)},v=(N,L,K,oe)=>{if(N==null)s(L.el=a(L.children),K,oe);else{const se=L.el=N.el;L.children!==N.children&&c(se,L.children)}},g=(N,L,K,oe)=>{N==null?s(L.el=l(L.children||""),K,oe):L.el=N.el},b=(N,L,K,oe)=>{[N.el,N.anchor]=p(N.children,L,K,oe,N.el,N.anchor)},x=({el:N,anchor:L},K,oe)=>{let se;for(;N&&N!==L;)se=h(N),s(N,K,oe),N=se;s(L,K,oe)},y=({el:N,anchor:L})=>{let K;for(;N&&N!==L;)K=h(N),o(N),N=K;o(L)},w=(N,L,K,oe,se,k,T,U,Y)=>{L.type==="svg"?T="svg":L.type==="math"&&(T="mathml"),N==null?C(L,K,oe,se,k,T,U,Y):I(N,L,se,k,T,U,Y)},C=(N,L,K,oe,se,k,T,U)=>{let Y,ee;const{props:ve,shapeFlag:B,transition:Z,dirs:Ce}=N;if(Y=N.el=i(N.type,k,ve&&ve.is,ve),B&8?u(Y,N.children):B&16&&S(N.children,Y,null,oe,se,pg(N,k),T,U),Ce&&_o(N,null,oe,"created"),_(Y,N,N.scopeId,T,oe),ve){for(const be in ve)be!=="value"&&!il(be)&&r(Y,be,null,ve[be],k,oe);"value"in ve&&r(Y,"value",null,ve.value,k),(ee=ve.onVnodeBeforeMount)&&ts(ee,oe,N)}Ce&&_o(N,null,oe,"beforeMount");const ie=zE(se,Z);ie&&Z.beforeEnter(Y),s(Y,L,K),((ee=ve&&ve.onVnodeMounted)||ie||Ce)&&Cn(()=>{ee&&ts(ee,oe,N),ie&&Z.enter(Y),Ce&&_o(N,null,oe,"mounted")},se)},_=(N,L,K,oe,se)=>{if(K&&f(N,K),oe)for(let k=0;k<oe.length;k++)f(N,oe[k]);if(se){let k=se.subTree;if(L===k||Jh(k.type)&&(k.ssContent===L||k.ssFallback===L)){const T=se.vnode;_(N,T,T.scopeId,T.slotScopeIds,se.parent)}}},S=(N,L,K,oe,se,k,T,U,Y=0)=>{for(let ee=Y;ee<N.length;ee++){const ve=N[ee]=U?Tr(N[ee]):ms(N[ee]);m(null,ve,L,K,oe,se,k,T,U)}},I=(N,L,K,oe,se,k,T)=>{const U=L.el=N.el;let{patchFlag:Y,dynamicChildren:ee,dirs:ve}=L;Y|=N.patchFlag&16;const B=N.props||wt,Z=L.props||wt;let Ce;if(K&&Ci(K,!1),(Ce=Z.onVnodeBeforeUpdate)&&ts(Ce,K,L,N),ve&&_o(L,N,K,"beforeUpdate"),K&&Ci(K,!0),(B.innerHTML&&Z.innerHTML==null||B.textContent&&Z.textContent==null)&&u(U,""),ee?E(N.dynamicChildren,ee,U,K,oe,pg(L,se),k):T||D(N,L,U,null,K,oe,pg(L,se),k,!1),Y>0){if(Y&16)O(U,B,Z,K,se);else if(Y&2&&B.class!==Z.class&&r(U,"class",null,Z.class,se),Y&4&&r(U,"style",B.style,Z.style,se),Y&8){const ie=L.dynamicProps;for(let be=0;be<ie.length;be++){const Ee=ie[be],Pe=B[Ee],Ye=Z[Ee];(Ye!==Pe||Ee==="value")&&r(U,Ee,Pe,Ye,se,K)}}Y&1&&N.children!==L.children&&u(U,L.children)}else!T&&ee==null&&O(U,B,Z,K,se);((Ce=Z.onVnodeUpdated)||ve)&&Cn(()=>{Ce&&ts(Ce,K,L,N),ve&&_o(L,N,K,"updated")},oe)},E=(N,L,K,oe,se,k,T)=>{for(let U=0;U<L.length;U++){const Y=N[U],ee=L[U],ve=Y.el&&(Y.type===Xt||!eo(Y,ee)||Y.shapeFlag&70)?d(Y.el):K;m(Y,ee,ve,null,oe,se,k,T,!0)}},O=(N,L,K,oe,se)=>{if(L!==K){if(L!==wt)for(const k in L)!il(k)&&!(k in K)&&r(N,k,L[k],null,se,oe);for(const k in K){if(il(k))continue;const T=K[k],U=L[k];T!==U&&k!=="value"&&r(N,k,U,T,se,oe)}"value"in K&&r(N,"value",L.value,K.value,se)}},A=(N,L,K,oe,se,k,T,U,Y)=>{const ee=L.el=N?N.el:a(""),ve=L.anchor=N?N.anchor:a("");let{patchFlag:B,dynamicChildren:Z,slotScopeIds:Ce}=L;Ce&&(U=U?U.concat(Ce):Ce),N==null?(s(ee,K,oe),s(ve,K,oe),S(L.children||[],K,ve,se,k,T,U,Y)):B>0&&B&64&&Z&&N.dynamicChildren?(E(N.dynamicChildren,Z,K,se,k,T,U),(L.key!=null||se&&L===se.subTree)&&WE(N,L,!0)):D(N,L,K,ve,se,k,T,U,Y)},P=(N,L,K,oe,se,k,T,U,Y)=>{L.slotScopeIds=U,N==null?L.shapeFlag&512?se.ctx.activate(L,K,oe,T,Y):z(L,K,oe,se,k,T,Y):G(N,L,Y)},z=(N,L,K,oe,se,k,T)=>{const U=N.component=NP(N,oe,se);if(op(N)&&(U.ctx.renderer=pe),AP(U,!1,T),U.asyncDep){if(se&&se.registerDep(U,M,T),!N.el){const Y=U.subTree=Ze(an);g(null,Y,L,K)}}else M(U,N,L,K,se,k,T)},G=(N,L,K)=>{const oe=L.component=N.component;if(bP(N,L,K))if(oe.asyncDep&&!oe.asyncResolved){R(oe,L,K);return}else oe.next=L,oe.update();else L.el=N.el,oe.vnode=L},M=(N,L,K,oe,se,k,T)=>{const U=()=>{if(N.isMounted){let{next:B,bu:Z,u:Ce,parent:ie,vnode:be}=N;{const qt=GE(N);if(qt){B&&(B.el=be.el,R(N,B,T)),qt.asyncDep.then(()=>{N.isUnmounted||U()});return}}let Ee=B,Pe;Ci(N,!1),B?(B.el=be.el,R(N,B,T)):B=be,Z&&al(Z),(Pe=B.props&&B.props.onVnodeBeforeUpdate)&&ts(Pe,ie,B,be),Ci(N,!0);const Ye=mg(N),At=N.subTree;N.subTree=Ye,m(At,Ye,d(At.el),q(At),N,se,k),B.el=Ye.el,Ee===null&&gy(N,Ye.el),Ce&&Cn(Ce,se),(Pe=B.props&&B.props.onVnodeUpdated)&&Cn(()=>ts(Pe,ie,B,be),se)}else{let B;const{el:Z,props:Ce}=L,{bm:ie,m:be,parent:Ee,root:Pe,type:Ye}=N,At=Br(L);if(Ci(N,!1),ie&&al(ie),!At&&(B=Ce&&Ce.onVnodeBeforeMount)&&ts(B,Ee,L),Ci(N,!0),Z&&De){const qt=()=>{N.subTree=mg(N),De(Z,N.subTree,N,se,null)};At&&Ye.__asyncHydrate?Ye.__asyncHydrate(Z,N,qt):qt()}else{Pe.ce&&Pe.ce._injectChildStyle(Ye);const qt=N.subTree=mg(N);m(null,qt,K,oe,N,se,k),L.el=qt.el}if(be&&Cn(be,se),!At&&(B=Ce&&Ce.onVnodeMounted)){const qt=L;Cn(()=>ts(B,Ee,qt),se)}(L.shapeFlag&256||Ee&&Br(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&N.a&&Cn(N.a,se),N.isMounted=!0,L=K=oe=null}};N.scope.on();const Y=N.effect=new KI(U);N.scope.off();const ee=N.update=Y.run.bind(Y),ve=N.job=Y.runIfDirty.bind(Y);ve.i=N,ve.id=N.uid,Y.scheduler=()=>uy(ve),Ci(N,!0),ee()},R=(N,L,K)=>{L.component=N;const oe=N.vnode.props;N.vnode=L,N.next=null,tP(N,L.props,oe,K),rP(N,L.children,K),si(),ow(N),oi()},D=(N,L,K,oe,se,k,T,U,Y=!1)=>{const ee=N&&N.children,ve=N?N.shapeFlag:0,B=L.children,{patchFlag:Z,shapeFlag:Ce}=L;if(Z>0){if(Z&128){ne(ee,B,K,oe,se,k,T,U,Y);return}else if(Z&256){j(ee,B,K,oe,se,k,T,U,Y);return}}Ce&8?(ve&16&&ge(ee,se,k),B!==ee&&u(K,B)):ve&16?Ce&16?ne(ee,B,K,oe,se,k,T,U,Y):ge(ee,se,k,!0):(ve&8&&u(K,""),Ce&16&&S(B,K,oe,se,k,T,U,Y))},j=(N,L,K,oe,se,k,T,U,Y)=>{N=N||ol,L=L||ol;const ee=N.length,ve=L.length,B=Math.min(ee,ve);let Z;for(Z=0;Z<B;Z++){const Ce=L[Z]=Y?Tr(L[Z]):ms(L[Z]);m(N[Z],Ce,K,null,se,k,T,U,Y)}ee>ve?ge(N,se,k,!0,!1,B):S(L,K,oe,se,k,T,U,Y,B)},ne=(N,L,K,oe,se,k,T,U,Y)=>{let ee=0;const ve=L.length;let B=N.length-1,Z=ve-1;for(;ee<=B&&ee<=Z;){const Ce=N[ee],ie=L[ee]=Y?Tr(L[ee]):ms(L[ee]);if(eo(Ce,ie))m(Ce,ie,K,null,se,k,T,U,Y);else break;ee++}for(;ee<=B&&ee<=Z;){const Ce=N[B],ie=L[Z]=Y?Tr(L[Z]):ms(L[Z]);if(eo(Ce,ie))m(Ce,ie,K,null,se,k,T,U,Y);else break;B--,Z--}if(ee>B){if(ee<=Z){const Ce=Z+1,ie=Ce<ve?L[Ce].el:oe;for(;ee<=Z;)m(null,L[ee]=Y?Tr(L[ee]):ms(L[ee]),K,ie,se,k,T,U,Y),ee++}}else if(ee>Z)for(;ee<=B;)de(N[ee],se,k,!0),ee++;else{const Ce=ee,ie=ee,be=new Map;for(ee=ie;ee<=Z;ee++){const ps=L[ee]=Y?Tr(L[ee]):ms(L[ee]);ps.key!=null&&be.set(ps.key,ee)}let Ee,Pe=0;const Ye=Z-ie+1;let At=!1,qt=0;const Ko=new Array(Ye);for(ee=0;ee<Ye;ee++)Ko[ee]=0;for(ee=Ce;ee<=B;ee++){const ps=N[ee];if(Pe>=Ye){de(ps,se,k,!0);continue}let yo;if(ps.key!=null)yo=be.get(ps.key);else for(Ee=ie;Ee<=Z;Ee++)if(Ko[Ee-ie]===0&&eo(ps,L[Ee])){yo=Ee;break}yo===void 0?de(ps,se,k,!0):(Ko[yo-ie]=ee+1,yo>=qt?qt=yo:At=!0,m(ps,L[yo],K,null,se,k,T,U,Y),Pe++)}const Yd=At?lP(Ko):ol;for(Ee=Yd.length-1,ee=Ye-1;ee>=0;ee--){const ps=ie+ee,yo=L[ps],Z1=ps+1<ve?L[ps+1].el:oe;Ko[ee]===0?m(null,yo,K,Z1,se,k,T,U,Y):At&&(Ee<0||ee!==Yd[Ee]?re(yo,K,Z1,2):Ee--)}}},re=(N,L,K,oe,se=null)=>{const{el:k,type:T,transition:U,children:Y,shapeFlag:ee}=N;if(ee&6){re(N.component.subTree,L,K,oe);return}if(ee&128){N.suspense.move(L,K,oe);return}if(ee&64){T.move(N,L,K,pe);return}if(T===Xt){s(k,L,K);for(let B=0;B<Y.length;B++)re(Y[B],L,K,oe);s(N.anchor,L,K);return}if(T===Fc){x(N,L,K);return}if(oe!==2&&ee&1&&U)if(oe===0)U.beforeEnter(k),s(k,L,K),Cn(()=>U.enter(k),se);else{const{leave:B,delayLeave:Z,afterLeave:Ce}=U,ie=()=>s(k,L,K),be=()=>{B(k,()=>{ie(),Ce&&Ce()})};Z?Z(k,ie,be):be()}else s(k,L,K)},de=(N,L,K,oe=!1,se=!1)=>{const{type:k,props:T,ref:U,children:Y,dynamicChildren:ee,shapeFlag:ve,patchFlag:B,dirs:Z,cacheIndex:Ce}=N;if(B===-2&&(se=!1),U!=null&&Xh(U,null,K,N,!0),Ce!=null&&(L.renderCache[Ce]=void 0),ve&256){L.ctx.deactivate(N);return}const ie=ve&1&&Z,be=!Br(N);let Ee;if(be&&(Ee=T&&T.onVnodeBeforeUnmount)&&ts(Ee,L,N),ve&6)fe(N.component,K,oe);else{if(ve&128){N.suspense.unmount(K,oe);return}ie&&_o(N,null,L,"beforeUnmount"),ve&64?N.type.remove(N,L,K,pe,oe):ee&&!ee.hasOnce&&(k!==Xt||B>0&&B&64)?ge(ee,L,K,!1,!0):(k===Xt&&B&384||!se&&ve&16)&&ge(Y,L,K),oe&&he(N)}(be&&(Ee=T&&T.onVnodeUnmounted)||ie)&&Cn(()=>{Ee&&ts(Ee,L,N),ie&&_o(N,null,L,"unmounted")},K)},he=N=>{const{type:L,el:K,anchor:oe,transition:se}=N;if(L===Xt){ye(K,oe);return}if(L===Fc){y(N);return}const k=()=>{o(K),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(N.shapeFlag&1&&se&&!se.persisted){const{leave:T,delayLeave:U}=se,Y=()=>T(K,k);U?U(N.el,k,Y):Y()}else k()},ye=(N,L)=>{let K;for(;N!==L;)K=h(N),o(N),N=K;o(L)},fe=(N,L,K)=>{const{bum:oe,scope:se,job:k,subTree:T,um:U,m:Y,a:ee}=N;Yh(Y),Yh(ee),oe&&al(oe),se.stop(),k&&(k.flags|=8,de(T,N,L,K)),U&&Cn(U,L),Cn(()=>{N.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},ge=(N,L,K,oe=!1,se=!1,k=0)=>{for(let T=k;T<N.length;T++)de(N[T],L,K,oe,se)},q=N=>{if(N.shapeFlag&6)return q(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const L=h(N.anchor||N.el),K=L&&L[EF];return K?h(K):L};let ue=!1;const ce=(N,L,K)=>{N==null?L._vnode&&de(L._vnode,null,null,!0):m(L._vnode||null,N,L,null,null,null,K),L._vnode=N,ue||(ue=!0,ow(),Kh(),ue=!1)},pe={p:m,um:de,m:re,r:he,mt:z,mc:S,pc:D,pbc:E,n:q,o:t};let Se,De;return e&&([Se,De]=e(pe)),{render:ce,hydrate:Se,createApp:ZF(ce,Se)}}function pg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ci({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function zE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function WE(t,e,n=!1){const s=t.children,o=e.children;if(Be(s)&&Be(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=Tr(o[r]),a.el=i.el),!n&&a.patchFlag!==-2&&WE(i,a)),a.type===Vr&&(a.el=i.el)}}function lP(t){const e=t.slice(),n=[0];let s,o,r,i,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(o=n[n.length-1],t[o]<c){e[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,t[n[a]]<c?r=a+1:i=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=e[i];return n}function GE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:GE(e)}function Yh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const cP=Symbol.for("v-scx"),uP=()=>On(cP);function dP(t,e){return my(t,null,e)}function ls(t,e,n){return my(t,e,n)}function my(t,e,n=wt){const{immediate:s,deep:o,flush:r,once:i}=n,a=tn({},n),l=e&&s||!e&&r!=="post";let c;if(Yc){if(r==="sync"){const f=uP();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=No,f.resume=No,f.pause=No,f}}const u=gn;a.call=(f,p,m)=>lo(f,u,p,m);let d=!1;r==="post"?a.scheduler=f=>{Cn(f,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(f,p)=>{p?f():uy(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=_F(t,e,a);return Yc&&(c?c.push(h):l&&h()),h}function hP(t,e,n){const s=this.proxy,o=Lt(t)?t.includes(".")?HE(s,t):()=>s[t]:t.bind(s,s);let r;ze(e)?r=e:(r=e.handler,n=e);const i=Zi(this),a=my(o,r.bind(s),n);return i(),a}function HE(t,e){const n=e.split(".");return()=>{let s=t;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const fP=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vs(e)}Modifiers`]||t[`${ba(e)}Modifiers`];function pP(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||wt;let o=n;const r=e.startsWith("update:"),i=r&&fP(s,e.slice(7));i&&(i.trim&&(o=n.map(u=>Lt(u)?u.trim():u)),i.number&&(o=n.map(hv)));let a,l=s[a=ig(e)]||s[a=ig(Vs(e))];!l&&r&&(l=s[a=ig(ba(e))]),l&&lo(l,t,6,o);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,lo(c,t,6,o)}}function KE(t,e,n=!1){const s=e.emitsCache,o=s.get(t);if(o!==void 0)return o;const r=t.emits;let i={},a=!1;if(!ze(t)){const l=c=>{const u=KE(c,e,!0);u&&(a=!0,tn(i,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(bt(t)&&s.set(t,null),null):(Be(r)?r.forEach(l=>i[l]=null):tn(i,r),bt(t)&&s.set(t,i),i)}function ap(t,e){return!t||!Cu(e)?!1:(e=e.slice(2).replace(/Once$/,""),ht(t,e[0].toLowerCase()+e.slice(1))||ht(t,ba(e))||ht(t,e))}function mg(t){const{type:e,vnode:n,proxy:s,withProxy:o,propsOptions:[r],slots:i,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=t,v=qh(t);let g,b;try{if(n.shapeFlag&4){const y=o||s,w=y;g=ms(c.call(w,y,u,d,f,h,p)),b=a}else{const y=e;g=ms(y.length>1?y(d,{attrs:a,slots:i,emit:l}):y(d,null)),b=e.props?a:gP(a)}}catch(y){Pc.length=0,Su(y,t,1),g=Ze(an)}let x=g;if(b&&m!==!1){const y=Object.keys(b),{shapeFlag:w}=x;y.length&&w&7&&(r&&y.some(Jb)&&(b=vP(b,r)),x=co(x,b,!1,!0))}return n.dirs&&(x=co(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&vl(x,n.transition),g=x,qh(v),g}function mP(t,e=!0){let n;for(let s=0;s<t.length;s++){const o=t[s];if(Ji(o)){if(o.type!==an||o.children==="v-if"){if(n)return;n=o}}else return}return n}const gP=t=>{let e;for(const n in t)(n==="class"||n==="style"||Cu(n))&&((e||(e={}))[n]=t[n]);return e},vP=(t,e)=>{const n={};for(const s in t)(!Jb(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function bP(t,e,n){const{props:s,children:o,component:r}=t,{props:i,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?mw(s,i,c):!!i;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(i[h]!==s[h]&&!ap(c,h))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?mw(s,i,c):!0:!!i;return!1}function mw(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(e[r]!==t[r]&&!ap(n,r))return!0}return!1}function gy({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Jh=t=>t.__isSuspense;let Sv=0;const yP={name:"Suspense",__isSuspense:!0,process(t,e,n,s,o,r,i,a,l,c){if(t==null)xP(e,n,s,o,r,i,a,l,c);else{if(r&&r.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}wP(t,e,n,s,o,i,a,l,c)}},hydrate:CP,normalize:_P},vy=yP;function Qc(t,e){const n=t.props&&t.props[e];ze(n)&&n()}function xP(t,e,n,s,o,r,i,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=t.suspense=qE(t,o,s,e,d,n,r,i,a,l);c(null,h.pendingBranch=t.ssContent,d,null,s,h,r,i),h.deps>0?(Qc(t,"onPending"),Qc(t,"onFallback"),c(null,t.ssFallback,e,n,s,null,r,i),cl(h,t.ssFallback)):h.resolve(!1,!0)}function wP(t,e,n,s,o,r,i,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:v,isHydrating:g}=d;if(m)d.pendingBranch=h,eo(h,m)?(l(m,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0?d.resolve():v&&(g||(l(p,f,n,s,o,null,r,i,a),cl(d,f)))):(d.pendingId=Sv++,g?(d.isHydrating=!1,d.activeBranch=m):c(m,o,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(l(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0?d.resolve():(l(p,f,n,s,o,null,r,i,a),cl(d,f))):p&&eo(h,p)?(l(p,h,n,s,o,d,r,i,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0&&d.resolve()));else if(p&&eo(h,p))l(p,h,n,s,o,d,r,i,a),cl(d,h);else if(Qc(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=Sv++,l(null,h,d.hiddenContainer,null,o,d,r,i,a),d.deps<=0)d.resolve();else{const{timeout:b,pendingId:x}=d;b>0?setTimeout(()=>{d.pendingId===x&&d.fallback(f)},b):b===0&&d.fallback(f)}}function qE(t,e,n,s,o,r,i,a,l,c,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:v}}=c;let g;const b=SP(t);b&&e&&e.pendingBranch&&(g=e.pendingId,e.deps++);const x=t.props?UI(t.props.timeout):void 0,y=r,w={vnode:t,parent:e,parentComponent:n,namespace:i,container:s,hiddenContainer:o,deps:0,pendingId:Sv++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(C=!1,_=!1){const{vnode:S,activeBranch:I,pendingBranch:E,pendingId:O,effects:A,parentComponent:P,container:z}=w;let G=!1;w.isHydrating?w.isHydrating=!1:C||(G=I&&E.transition&&E.transition.mode==="out-in",G&&(I.transition.afterLeave=()=>{O===w.pendingId&&(h(E,z,r===y?p(I):r,0),bv(A))}),I&&(m(I.el)===z&&(r=p(I)),f(I,P,w,!0)),G||h(E,z,r,0)),cl(w,E),w.pendingBranch=null,w.isInFallback=!1;let M=w.parent,R=!1;for(;M;){if(M.pendingBranch){M.effects.push(...A),R=!0;break}M=M.parent}!R&&!G&&bv(A),w.effects=[],b&&e&&e.pendingBranch&&g===e.pendingId&&(e.deps--,e.deps===0&&!_&&e.resolve()),Qc(S,"onResolve")},fallback(C){if(!w.pendingBranch)return;const{vnode:_,activeBranch:S,parentComponent:I,container:E,namespace:O}=w;Qc(_,"onFallback");const A=p(S),P=()=>{w.isInFallback&&(d(null,C,E,A,I,null,O,a,l),cl(w,C))},z=C.transition&&C.transition.mode==="out-in";z&&(S.transition.afterLeave=P),w.isInFallback=!0,f(S,I,null,!0),z||P()},move(C,_,S){w.activeBranch&&h(w.activeBranch,C,_,S),w.container=C},next(){return w.activeBranch&&p(w.activeBranch)},registerDep(C,_,S){const I=!!w.pendingBranch;I&&w.deps++;const E=C.vnode.el;C.asyncDep.catch(O=>{Su(O,C,0)}).then(O=>{if(C.isUnmounted||w.isUnmounted||w.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:A}=C;kv(C,O,!1),E&&(A.el=E);const P=!E&&C.subTree.el;_(C,A,m(E||C.subTree.el),E?null:p(C.subTree),w,i,S),P&&v(P),gy(C,A.el),I&&--w.deps===0&&w.resolve()})},unmount(C,_){w.isUnmounted=!0,w.activeBranch&&f(w.activeBranch,n,C,_),w.pendingBranch&&f(w.pendingBranch,n,C,_)}};return w}function CP(t,e,n,s,o,r,i,a,l){const c=e.suspense=qE(e,s,n,t.parentNode,document.createElement("div"),null,o,r,i,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,r,i);return c.deps===0&&c.resolve(!1,!0),u}function _P(t){const{shapeFlag:e,children:n}=t,s=e&32;t.ssContent=gw(s?n.default:n),t.ssFallback=s?gw(n.fallback):Ze(an)}function gw(t){let e;if(ze(t)){const n=bl&&t._c;n&&(t._d=!1,Ft()),t=t(),n&&(t._d=!0,e=rs,QE())}return Be(t)&&(t=mP(t)),t=ms(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function XE(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):bv(t)}function cl(t,e){t.activeBranch=e;const{vnode:n,parentComponent:s}=t;let o=e.el;for(;!o&&e.component;)e=e.component.subTree,o=e.el;n.el=o,s&&s.subTree===n&&(s.vnode.el=o,gy(s,o))}function SP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Xt=Symbol.for("v-fgt"),Vr=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),Fc=Symbol.for("v-stc"),Pc=[];let rs=null;function Ft(t=!1){Pc.push(rs=t?null:[])}function QE(){Pc.pop(),rs=Pc[Pc.length-1]||null}let bl=1;function vw(t){bl+=t,t<0&&rs&&(rs.hasOnce=!0)}function YE(t){return t.dynamicChildren=bl>0?rs||ol:null,QE(),bl>0&&rs&&rs.push(t),t}function so(t,e,n,s,o,r){return YE(_e(t,e,n,s,o,r,!0))}function $o(t,e,n,s,o){return YE(Ze(t,e,n,s,o,!0))}function Ji(t){return t?t.__v_isVNode===!0:!1}function eo(t,e){return t.type===e.type&&t.key===e.key}const JE=({key:t})=>t??null,Ah=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Lt(t)||Ht(t)||ze(t)?{i:un,r:t,k:e,f:!!n}:t:null);function _e(t,e=null,n=null,s=0,o=null,r=t===Xt?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&JE(e),ref:e&&Ah(e),scopeId:pE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:un};return a?(by(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Lt(n)?8:16),bl>0&&!i&&rs&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&rs.push(l),l}const Ze=IP;function IP(t,e=null,n=null,s=0,o=null,r=!1){if((!t||t===$E)&&(t=an),Ji(t)){const a=co(t,e,!0);return n&&by(a,n),bl>0&&!r&&rs&&(a.shapeFlag&6?rs[rs.indexOf(t)]=a:rs.push(a)),a.patchFlag=-2,a}if(LP(t)&&(t=t.__vccOpts),e){e=EP(e);let{class:a,style:l}=e;a&&!Lt(a)&&(e.class=ny(a)),bt(l)&&(cy(l)&&!Be(l)&&(l=tn({},l)),e.style=ty(l))}const i=Lt(t)?1:Jh(t)?128:mE(t)?64:bt(t)?4:ze(t)?2:0;return _e(t,e,n,s,o,i,r,!0)}function EP(t){return t?cy(t)||LE(t)?tn({},t):t:null}function co(t,e,n=!1,s=!1){const{props:o,ref:r,patchFlag:i,children:a,transition:l}=t,c=e?ZE(o||{},e):o,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&JE(c),ref:e&&e.ref?n&&r?Be(r)?r.concat(Ah(e)):[r,Ah(e)]:Ah(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Xt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&co(t.ssContent),ssFallback:t.ssFallback&&co(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&vl(u,l.clone(u)),u}function mn(t=" ",e=0){return Ze(Vr,null,t,e)}function gg(t,e){const n=Ze(Fc,null,t);return n.staticCount=e,n}function kP(t="",e=!1){return e?(Ft(),$o(an,null,t)):Ze(an,null,t)}function ms(t){return t==null||typeof t=="boolean"?Ze(an):Be(t)?Ze(Xt,null,t.slice()):Ji(t)?Tr(t):Ze(Vr,null,String(t))}function Tr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:co(t)}function by(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Be(e))n=16;else if(typeof e=="object")if(s&65){const o=e.default;o&&(o._c&&(o._d=!1),by(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!LE(e)?e._ctx=un:o===3&&un&&(un.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ze(e)?(e={default:e,_ctx:un},n=32):(e=String(e),s&64?(n=16,e=[mn(e)]):n=8);t.children=e,t.shapeFlag|=n}function ZE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(o==="class")e.class!==s.class&&(e.class=ny([e.class,s.class]));else if(o==="style")e.style=ty([e.style,s.style]);else if(Cu(o)){const r=e[o],i=s[o];i&&r!==i&&!(Be(r)&&r.includes(i))&&(e[o]=r?[].concat(r,i):i)}else o!==""&&(e[o]=s[o])}return e}function ts(t,e,n,s=null){lo(t,e,7,[n,s])}const $P=AE();let TP=0;function NP(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||$P,r={uid:TP++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new GI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:PE(s,o),emitsOptions:KE(s,o),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:s.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=pP.bind(null,r),t.ce&&t.ce(r),r}let gn=null;const ys=()=>gn||un;let Zh,Iv;{const t=ep(),e=(n,s)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(s),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};Zh=e("__VUE_INSTANCE_SETTERS__",n=>gn=n),Iv=e("__VUE_SSR_SETTERS__",n=>Yc=n)}const Zi=t=>{const e=gn;return Zh(t),t.scope.on(),()=>{t.scope.off(),Zh(e)}},Ev=()=>{gn&&gn.scope.off(),Zh(null)};function ek(t){return t.vnode.shapeFlag&4}let Yc=!1;function AP(t,e=!1,n=!1){e&&Iv(e);const{props:s,children:o}=t.vnode,r=ek(t);eP(t,s,r,e),oP(t,o,n);const i=r?RP(t,e):void 0;return e&&Iv(!1),i}function RP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,GF);const{setup:s}=n;if(s){si();const o=t.setupContext=s.length>1?OP(t):null,r=Zi(t),i=_u(s,t,0,[t.props,o]),a=Yf(i);if(oi(),r(),(a||t.sp)&&!Br(t)&&wE(t),a){if(i.then(Ev,Ev),e)return i.then(l=>{kv(t,l,e)}).catch(l=>{Su(l,t,0)});t.asyncDep=i}else kv(t,i,e)}else tk(t,e)}function kv(t,e,n){ze(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:bt(e)&&(t.setupState=lE(e)),tk(t,n)}let bw;function tk(t,e,n){const s=t.type;if(!t.render){if(!e&&bw&&!s.render){const o=s.template||fy(t).template;if(o){const{isCustomElement:r,compilerOptions:i}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=tn(tn({isCustomElement:r,delimiters:a},i),l);s.render=bw(o,c)}}t.render=s.render||No}{const o=Zi(t);si();try{KF(t)}finally{oi(),o()}}}const DP={get(t,e){return Nn(t,"get",""),t[e]}};function OP(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,DP),slots:t.slots,emit:t.emit,expose:e}}function lp(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(lE(mF(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Lc)return Lc[n](t)},has(e,n){return n in e||n in Lc}})):t.proxy}function $v(t,e=!0){return ze(t)?t.displayName||t.name:t.name||e&&t.__name}function LP(t){return ze(t)&&"__vccOpts"in t}const et=(t,e)=>wF(t,e,Yc);function Gt(t,e,n){const s=arguments.length;return s===2?bt(e)&&!Be(e)?Ji(e)?Ze(t,null,[e]):Ze(t,e):Ze(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ji(n)&&(n=[n]),Ze(t,e,n))}const nk="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tv;const yw=typeof window<"u"&&window.trustedTypes;if(yw)try{Tv=yw.createPolicy("vue",{createHTML:t=>t})}catch{}const sk=Tv?t=>Tv.createHTML(t):t=>t,FP="http://www.w3.org/2000/svg",PP="http://www.w3.org/1998/Math/MathML",Yo=typeof document<"u"?document:null,xw=Yo&&Yo.createElement("template"),MP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const o=e==="svg"?Yo.createElementNS(FP,t):e==="mathml"?Yo.createElementNS(PP,t):n?Yo.createElement(t,{is:n}):Yo.createElement(t);return t==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:t=>Yo.createTextNode(t),createComment:t=>Yo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,o,r){const i=n?n.previousSibling:e.lastChild;if(o&&(o===r||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{xw.innerHTML=sk(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=xw.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_r="transition",pc="animation",Jc=Symbol("_vtc"),ok={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},BP=tn({},gE,ok),VP=t=>(t.displayName="Transition",t.props=BP,t),rk=VP((t,{slots:e})=>Gt(TF,UP(t),e)),_i=(t,e=[])=>{Be(t)?t.forEach(n=>n(...e)):t&&t(...e)},ww=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function UP(t){const e={};for(const A in t)A in ok||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=i,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=jP(o),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:b,onEnterCancelled:x,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=g,onAppear:_=b,onAppearCancelled:S=x}=e,I=(A,P,z)=>{Si(A,P?u:a),Si(A,P?c:i),z&&z()},E=(A,P)=>{A._isLeaving=!1,Si(A,d),Si(A,f),Si(A,h),P&&P()},O=A=>(P,z)=>{const G=A?_:b,M=()=>I(P,A,z);_i(G,[P,M]),Cw(()=>{Si(P,A?l:r),Sr(P,A?u:a),ww(G)||_w(P,s,m,M)})};return tn(e,{onBeforeEnter(A){_i(g,[A]),Sr(A,r),Sr(A,i)},onBeforeAppear(A){_i(C,[A]),Sr(A,l),Sr(A,c)},onEnter:O(!1),onAppear:O(!0),onLeave(A,P){A._isLeaving=!0;const z=()=>E(A,P);Sr(A,d),Sr(A,h),GP(),Cw(()=>{A._isLeaving&&(Si(A,d),Sr(A,f),ww(y)||_w(A,s,v,z))}),_i(y,[A,z])},onEnterCancelled(A){I(A,!1),_i(x,[A])},onAppearCancelled(A){I(A,!0),_i(S,[A])},onLeaveCancelled(A){E(A),_i(w,[A])}})}function jP(t){if(t==null)return null;if(bt(t))return[vg(t.enter),vg(t.leave)];{const e=vg(t);return[e,e]}}function vg(t){return UI(t)}function Sr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Jc]||(t[Jc]=new Set)).add(e)}function Si(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Jc];n&&(n.delete(e),n.size||(t[Jc]=void 0))}function Cw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let zP=0;function _w(t,e,n,s){const o=t._endId=++zP,r=()=>{o===t._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:i,timeout:a,propCount:l}=WP(t,e);if(!i)return s();const c=i+"end";let u=0;const d=()=>{t.removeEventListener(c,h),r()},h=f=>{f.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function WP(t,e){const n=window.getComputedStyle(t),s=p=>(n[p]||"").split(", "),o=s(`${_r}Delay`),r=s(`${_r}Duration`),i=Sw(o,r),a=s(`${pc}Delay`),l=s(`${pc}Duration`),c=Sw(a,l);let u=null,d=0,h=0;e===_r?i>0&&(u=_r,d=i,h=r.length):e===pc?c>0&&(u=pc,d=c,h=l.length):(d=Math.max(i,c),u=d>0?i>c?_r:pc:null,h=u?u===_r?r.length:l.length:0);const f=u===_r&&/\b(transform|all)(,|$)/.test(s(`${_r}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Sw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Iw(n)+Iw(t[s])))}function Iw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function GP(){return document.body.offsetHeight}function HP(t,e,n){const s=t[Jc];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ew=Symbol("_vod"),KP=Symbol("_vsh"),qP=Symbol(""),XP=/(^|;)\s*display\s*:/;function QP(t,e,n){const s=t.style,o=Lt(n);let r=!1;if(n&&!o){if(e)if(Lt(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&Rh(s,a,"")}else for(const i in e)n[i]==null&&Rh(s,i,"");for(const i in n)i==="display"&&(r=!0),Rh(s,i,n[i])}else if(o){if(e!==n){const i=s[qP];i&&(n+=";"+i),s.cssText=n,r=XP.test(n)}}else e&&t.removeAttribute("style");Ew in t&&(t[Ew]=r?s.display:"",t[KP]&&(s.display="none"))}const kw=/\s*!important$/;function Rh(t,e,n){if(Be(n))n.forEach(s=>Rh(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=YP(t,e);kw.test(n)?t.setProperty(ba(s),n.replace(kw,""),"important"):t[s]=n}}const $w=["Webkit","Moz","ms"],bg={};function YP(t,e){const n=bg[e];if(n)return n;let s=Vs(e);if(s!=="filter"&&s in t)return bg[e]=s;s=Zf(s);for(let o=0;o<$w.length;o++){const r=$w[o]+s;if(r in t)return bg[e]=r}return e}const Tw="http://www.w3.org/1999/xlink";function Nw(t,e,n,s,o,r=qL(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Tw,e.slice(6,e.length)):t.setAttributeNS(Tw,e,n):n==null||r&&!jI(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ao(n)?String(n):n)}function Aw(t,e,n,s,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sk(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=jI(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(o||e)}function Di(t,e,n,s){t.addEventListener(e,n,s)}function JP(t,e,n,s){t.removeEventListener(e,n,s)}const Rw=Symbol("_vei");function ZP(t,e,n,s,o=null){const r=t[Rw]||(t[Rw]={}),i=r[e];if(s&&i)i.value=s;else{const[a,l]=eM(e);if(s){const c=r[e]=sM(s,o);Di(t,a,c,l)}else i&&(JP(t,a,i,l),r[e]=void 0)}}const Dw=/(?:Once|Passive|Capture)$/;function eM(t){let e;if(Dw.test(t)){e={};let s;for(;s=t.match(Dw);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ba(t.slice(2)),e]}let yg=0;const tM=Promise.resolve(),nM=()=>yg||(tM.then(()=>yg=0),yg=Date.now());function sM(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;lo(oM(s,n.value),e,5,[s])};return n.value=t,n.attached=nM(),n}function oM(t,e){if(Be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>o=>!o._stopped&&s&&s(o))}else return e}const Ow=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,rM=(t,e,n,s,o,r)=>{const i=o==="svg";e==="class"?HP(t,s,i):e==="style"?QP(t,n,s):Cu(e)?Jb(e)||ZP(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):iM(t,e,s,i))?(Aw(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Nw(t,e,s,i,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Lt(s))?Aw(t,Vs(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Nw(t,e,s,i))};function iM(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ow(e)&&ze(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ow(e)&&Lt(n)?!1:e in t}const ef=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?n=>al(e,n):e};function aM(t){t.target.composing=!0}function Lw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ul=Symbol("_assign"),owe={created(t,{modifiers:{lazy:e,trim:n,number:s}},o){t[ul]=ef(o);const r=s||o.props&&o.props.type==="number";Di(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=hv(a)),t[ul](a)}),n&&Di(t,"change",()=>{t.value=t.value.trim()}),e||(Di(t,"compositionstart",aM),Di(t,"compositionend",Lw),Di(t,"change",Lw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:o,number:r}},i){if(t[ul]=ef(i),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?hv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||o&&t.value.trim()===l)||(t.value=l))}},rwe={created(t,{value:e},n){t.checked=zh(e,n.props.value),t[ul]=ef(n),Di(t,"change",()=>{t[ul](lM(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[ul]=ef(s),e!==n&&(t.checked=zh(e,s.props.value))}};function lM(t){return"_value"in t?t._value:t.value}const cM=["ctrl","shift","alt","meta"],uM={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>cM.some(n=>t[`${n}Key`]&&!e.includes(n))},iwe=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(o,...r)=>{for(let i=0;i<e.length;i++){const a=uM[e[i]];if(a&&a(o,e))return}return t(o,...r)})},ik=tn({patchProp:rM},MP);let Mc,Fw=!1;function dM(){return Mc||(Mc=iP(ik))}function hM(){return Mc=Fw?Mc:aP(ik),Fw=!0,Mc}const fM=(...t)=>{const e=dM().createApp(...t),{mount:n}=e;return e.mount=s=>{const o=lk(s);if(!o)return;const r=e._component;!ze(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=n(o,!1,ak(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},e},pM=(...t)=>{const e=hM().createApp(...t),{mount:n}=e;return e.mount=s=>{const o=lk(s);if(o)return n(o,!0,ak(o))},e};function ak(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lk(t){return Lt(t)?document.querySelector(t):t}const mM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,gM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,vM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function bM(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){yM(t);return}return e}function yM(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function tf(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!vM.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(mM.test(t)||gM.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,bM)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const xM=/#/g,wM=/&/g,CM=/\//g,_M=/=/g,yy=/\+/g,SM=/%5e/gi,IM=/%60/gi,EM=/%7c/gi,kM=/%20/gi;function $M(t){return encodeURI(""+t).replace(EM,"|")}function Nv(t){return $M(typeof t=="string"?t:JSON.stringify(t)).replace(yy,"%2B").replace(kM,"+").replace(xM,"%23").replace(wM,"%26").replace(IM,"`").replace(SM,"^").replace(CM,"%2F")}function xg(t){return Nv(t).replace(_M,"%3D")}function nf(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function TM(t){return nf(t.replace(yy," "))}function NM(t){return nf(t.replace(yy," "))}function ck(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=TM(s[1]);if(o==="__proto__"||o==="constructor")continue;const r=NM(s[2]||"");e[o]===void 0?e[o]=r:Array.isArray(e[o])?e[o].push(r):e[o]=[e[o],r]}return e}function AM(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${xg(t)}=${Nv(n)}`).join("&"):`${xg(t)}=${Nv(e)}`:xg(t)}function RM(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>AM(e,t[e])).filter(Boolean).join("&")}const DM=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,OM=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,LM=/^([/\\]\s*){2,}[^/\\]/,FM=/^[\s\0]*(blob|data|javascript|vbscript):$/i,PM=/\/$|\/\?|\/#/,MM=/^\.?\//;function vr(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?DM.test(t):OM.test(t)||(e.acceptRelative?LM.test(t):!1)}function BM(t){return!!t&&FM.test(t)}function Av(t="",e){return e?PM.test(t):t.endsWith("/")}function cp(t="",e){if(!e)return(Av(t)?t.slice(0,-1):t)||"/";if(!Av(t,!0))return t||"/";let n=t,s="";const o=t.indexOf("#");o>=0&&(n=t.slice(0,o),s=t.slice(o));const[r,...i]=n.split("?");return((r.endsWith("/")?r.slice(0,-1):r)||"/")+(i.length>0?`?${i.join("?")}`:"")+s}function sf(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Av(t,!0))return t||"/";let n=t,s="";const o=t.indexOf("#");if(o>=0&&(n=t.slice(0,o),s=t.slice(o),!n))return s;const[r,...i]=n.split("?");return r+"/"+(i.length>0?`?${i.join("?")}`:"")+s}function VM(t=""){return t.startsWith("/")}function Pw(t=""){return VM(t)?t:"/"+t}function UM(t,e){if(dk(e)||vr(t))return t;const n=cp(e);return t.startsWith(n)?t:up(n,t)}function Mw(t,e){if(dk(e))return t;const n=cp(e);if(!t.startsWith(n))return t;const s=t.slice(n.length);return s[0]==="/"?s:"/"+s}function uk(t,e){const n=WM(t),s={...ck(n.search),...e};return n.search=RM(s),GM(n)}function dk(t){return!t||t==="/"}function jM(t){return t&&t!=="/"}function up(t,...e){let n=t||"";for(const s of e.filter(o=>jM(o)))if(n){const o=s.replace(MM,"");n=sf(n)+o}else n=s;return n}function hk(...t){var i,a,l,c;const e=/\/(?!\/)/,n=t.filter(Boolean),s=[];let o=0;for(const u of n)if(!(!u||u==="/")){for(const[d,h]of u.split(e).entries())if(!(!h||h===".")){if(h===".."){if(s.length===1&&vr(s[0]))continue;s.pop(),o--;continue}if(d===1&&((i=s[s.length-1])!=null&&i.endsWith(":/"))){s[s.length-1]+="/"+h;continue}s.push(h),o++}}let r=s.join("/");return o>=0?(a=n[0])!=null&&a.startsWith("/")&&!r.startsWith("/")?r="/"+r:(l=n[0])!=null&&l.startsWith("./")&&!r.startsWith("./")&&(r="./"+r):r="../".repeat(-1*o)+r,(c=n[n.length-1])!=null&&c.endsWith("/")&&!r.endsWith("/")&&(r+="/"),r}function zM(t,e,n={}){return n.trailingSlash||(t=sf(t),e=sf(e)),n.leadingSlash||(t=Pw(t),e=Pw(e)),n.encoding||(t=nf(t),e=nf(e)),t===e}const fk=Symbol.for("ufo:protocolRelative");function WM(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,h=""]=n;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!vr(t,{acceptRelative:!0}))return Bw(t);const[,s="",o,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",a=""]=r.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:c,hash:u}=Bw(a);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:l,search:c,hash:u,[fk]:!s}}function Bw(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function GM(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol||t[fk]?(t.protocol||"")+"//":"")+o+r+e+n+s}class HM extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function KM(t){var l,c,u,d,h;const e=((l=t.error)==null?void 0:l.message)||((c=t.error)==null?void 0:c.toString())||"",n=((u=t.request)==null?void 0:u.method)||((d=t.options)==null?void 0:d.method)||"GET",s=((h=t.request)==null?void 0:h.url)||String(t.request)||"/",o=`[${n}] ${JSON.stringify(s)}`,r=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",i=`${o}: ${r}${e?` ${e}`:""}`,a=new HM(i,t.error?{cause:t.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(a,f,{get(){return t[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(a,f,{get(){return t.response&&t.response[p]}});return a}const qM=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Vw(t="GET"){return qM.has(t.toUpperCase())}function XM(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const QM=new Set(["image/svg","application/xml","application/xhtml","application/html"]),YM=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function JM(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return YM.test(e)?"json":QM.has(e)||e.startsWith("text/")?"text":"blob"}function ZM(t,e,n=globalThis.Headers){const s={...e,...t};if(e!=null&&e.params&&(t!=null&&t.params)&&(s.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&(t!=null&&t.query)&&(s.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&(t!=null&&t.headers)){s.headers=new n((e==null?void 0:e.headers)||{});for(const[o,r]of new n((t==null?void 0:t.headers)||{}))s.headers.set(o,r)}return s}const e3=new Set([408,409,425,429,500,502,503,504]),t3=new Set([101,204,205,304]);function pk(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function o(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let u;typeof a.options.retry=="number"?u=a.options.retry:u=Vw(a.options.method)?0:1;const d=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(d):e3.has(d))){const h=a.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),r(a.request,{...a.options,retry:u-1})}}const c=KM(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,r),c}const r=async function(l,c={}){var f;const u={request:l,options:ZM(c,t.defaults,n),response:void 0,error:void 0};u.options.method=(f=u.options.method)==null?void 0:f.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=UM(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=uk(u.request,{...u.options.params,...u.options.query}))),u.options.body&&Vw(u.options.method)&&(XM(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new n(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const p=new s;d=setTimeout(()=>p.abort(),u.options.timeout),u.options.signal=p.signal}try{u.response=await e(u.request,u.options)}catch(p){return u.error=p,u.options.onRequestError&&await u.options.onRequestError(u),await o(u)}finally{d&&clearTimeout(d)}if(u.response.body&&!t3.has(u.response.status)&&u.options.method!=="HEAD"){const p=(u.options.parseResponse?"json":u.options.responseType)||JM(u.response.headers.get("content-type")||"");switch(p){case"json":{const m=await u.response.text(),v=u.options.parseResponse||tf;u.response._data=v(m);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[p]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await o(u)):u.response},i=async function(l,c){return(await r(l,c))._data};return i.raw=r,i.native=(...a)=>e(...a),i.create=(a={})=>pk({...t,defaults:{...t.defaults,...a}}),i}const xy=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),n3=xy.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),s3=xy.Headers,o3=xy.AbortController,r3=pk({fetch:n3,Headers:s3,AbortController:o3}),i3=r3,a3=()=>{var t;return((t=window==null?void 0:window.__NUXT__)==null?void 0:t.config)||{}},of=a3().app,l3=()=>of.baseURL,c3=()=>of.buildAssetsDir,wy=(...t)=>hk(mk(),c3(),...t),mk=(...t)=>{const e=of.cdnURL||of.baseURL;return t.length?hk(e,...t):e};globalThis.__buildAssetsURL=wy,globalThis.__publicAssetsURL=mk;globalThis.$fetch||(globalThis.$fetch=i3.create({baseURL:l3()}));function Rv(t,e={},n){for(const s in t){const o=t[s],r=n?`${n}:${s}`:s;typeof o=="object"&&o!==null?Rv(o,e,r):typeof o=="function"&&(e[r]=o)}return e}const u3={run:t=>t()},d3=()=>u3,gk=typeof console.createTask<"u"?console.createTask:d3;function h3(t,e){const n=e.shift(),s=gk(n);return t.reduce((o,r)=>o.then(()=>s.run(()=>r(...e))),Promise.resolve())}function f3(t,e){const n=e.shift(),s=gk(n);return Promise.all(t.map(o=>s.run(()=>o(...e))))}function wg(t,e){for(const n of[...t])n(e)}class p3{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,s={}){if(!e||typeof n!="function")return()=>{};const o=e;let r;for(;this._deprecatedHooks[e];)r=this._deprecatedHooks[e],e=r.to;if(r&&!s.allowDeprecated){let i=r.message;i||(i=`${o} hook has been deprecated`+(r.to?`, please use ${r.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(i)||(console.warn(i),this._deprecatedMessages.add(i))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let s,o=(...r)=>(typeof s=="function"&&s(),s=void 0,o=void 0,n(...r));return s=this.hook(e,o),s}removeHook(e,n){if(this._hooks[e]){const s=this._hooks[e].indexOf(n);s!==-1&&this._hooks[e].splice(s,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const s=this._hooks[e]||[];delete this._hooks[e];for(const o of s)this.hook(e,o)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=Rv(e),s=Object.keys(n).map(o=>this.hook(o,n[o]));return()=>{for(const o of s.splice(0,s.length))o()}}removeHooks(e){const n=Rv(e);for(const s in n)this.removeHook(s,n[s])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(h3,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(f3,e,...n)}callHookWith(e,n,...s){const o=this._before||this._after?{name:n,args:s,context:{}}:void 0;this._before&&wg(this._before,o);const r=e(n in this._hooks?[...this._hooks[n]]:[],s);return r instanceof Promise?r.finally(()=>{this._after&&o&&wg(this._after,o)}):(this._after&&o&&wg(this._after,o),r)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function vk(){return new p3}function m3(t={}){let e,n=!1;const s=i=>{if(e&&e!==i)throw new Error("Context conflict")};let o;if(t.asyncContext){const i=t.AsyncLocalStorage||globalThis.AsyncLocalStorage;i?o=new i:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const r=()=>{if(o&&e===void 0){const i=o.getStore();if(i!==void 0)return i}return e};return{use:()=>{const i=r();if(i===void 0)throw new Error("Context is not available");return i},tryUse:()=>r(),set:(i,a)=>{a||s(i),e=i,n=!0},unset:()=>{e=void 0,n=!1},call:(i,a)=>{s(i),e=i;try{return o?o.run(i,a):a()}finally{n||(e=void 0)}},async callAsync(i,a){e=i;const l=()=>{e=i},c=()=>e===i?l:void 0;Dv.add(c);try{const u=o?o.run(i,a):a();return n||(e=void 0),await u}finally{Dv.delete(c)}}}}function g3(t={}){const e={};return{get(n,s={}){return e[n]||(e[n]=m3({...t,...s})),e[n],e[n]}}}const rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},Uw="__unctx__",v3=rf[Uw]||(rf[Uw]=g3()),b3=(t,e={})=>v3.get(t,e),jw="__unctx_async_handlers__",Dv=rf[jw]||(rf[jw]=new Set);function dl(t){const e=[];for(const o of Dv){const r=o();r&&e.push(r)}const n=()=>{for(const o of e)o()};let s=t();return s&&typeof s=="object"&&"catch"in s&&(s=s.catch(o=>{throw n(),o})),[s,n]}const y3=!1,Ov=!1,x3=!1,w3={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},Ja={value:null,errorValue:null,deep:!0},C3=null,_3={},S3="#__nuxt",bk="nuxt-app",zw=36e5,I3="vite:preloadError";function yk(t=bk){return b3(t,{asyncContext:!1})}const E3="__nuxt_plugin";function k3(t){var o;let e=0;const n={_id:t.id||bk||"nuxt-app",_scope:HI(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.13.2"},get vue(){return n.vueApp.version}},payload:nr({...((o=t.ssrContext)==null?void 0:o.payload)||{},data:nr({}),state:Go({}),once:new Set,_errors:nr({})}),static:{data:{}},runWithContext(r){return n._scope.active&&!tp()?n._scope.run(()=>Ww(n,r)):Ww(n,r)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:nr({}),_payloadRevivers:{},...t};{const r=window.__NUXT__;if(r)for(const i in r)switch(i){case"data":case"state":case"_errors":Object.assign(n.payload[i],r[i]);break;default:n.payload[i]=r[i]}}n.hooks=vk(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(r,i)=>{const a="$"+r;ih(n,a,i),ih(n.vueApp.config.globalProperties,a,i)},ih(n.vueApp,"$nuxt",n),ih(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener(I3,i=>{n.callHook("app:chunkError",{error:i.payload}),(n.isHydrating||i.payload.message.includes("Unable to preload CSS"))&&i.preventDefault()}),window.useNuxtApp=window.useNuxtApp||Ct;const r=n.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});n.hook("app:mounted",r)}const s=n.payload.config;return n.provide("config",s),n}function $3(t,e){e.hooks&&t.hooks.addHooks(e.hooks)}async function T3(t,e){if(typeof e=="function"){const{provide:n}=await t.runWithContext(()=>e(t))||{};if(n&&typeof n=="object")for(const s in n)t.provide(s,n[s])}}async function N3(t,e){const n=[],s=[],o=[],r=[];let i=0;async function a(l){var u;const c=((u=l.dependsOn)==null?void 0:u.filter(d=>e.some(h=>h._name===d)&&!n.includes(d)))??[];if(c.length>0)s.push([new Set(c),l]);else{const d=T3(t,l).then(async()=>{l._name&&(n.push(l._name),await Promise.all(s.map(async([h,f])=>{h.has(l._name)&&(h.delete(l._name),h.size===0&&(i++,await a(f)))})))});l.parallel?o.push(d.catch(h=>r.push(h))):await d}}for(const l of e)$3(t,l);for(const l of e)await a(l);if(await Promise.all(o),i)for(let l=0;l<i;l++)await Promise.all(o);if(r.length)throw r[0]}function mo(t){if(typeof t=="function")return t;const e=t._name||t.name;return delete t.name,Object.assign(t.setup||(()=>{}),t,{[E3]:!0,_name:e})}function Ww(t,e,n){const s=()=>e();return yk(t._id).set(t),t.vueApp.runWithContext(s)}function A3(t){var n;let e;return RE()&&(e=(n=ys())==null?void 0:n.appContext.app.$nuxt),e=e||yk(t).tryUse(),e||null}function Ct(t){const e=A3(t);if(!e)throw new Error("[nuxt] instance unavailable");return e}function ri(t){return Ct().$config}function ih(t,e,n){Object.defineProperty(t,e,{get:()=>n})}const Gw=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function R3(t,e){e?e={...Gw,...e}:e=Gw;const n=xk(e);return n.dispatch(t),n.toString()}const D3=Object.freeze(["prototype","__proto__","constructor"]);function xk(t){let e="",n=new Map;const s=o=>{e+=o};return{toString(){return e},getContext(){return n},dispatch(o){return t.replacer&&(o=t.replacer(o)),this[o===null?"null":typeof o](o)},object(o){if(o&&typeof o.toJSON=="function")return this.object(o.toJSON());const r=Object.prototype.toString.call(o);let i="";const a=r.length;a<10?i="unknown:["+r+"]":i=r.slice(8,a-1),i=i.toLowerCase();let l=null;if((l=n.get(o))===void 0)n.set(o,n.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(o))return s("buffer:"),s(o.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](o):t.ignoreUnknown||this.unkown(o,i);else{let c=Object.keys(o);t.unorderedObjects&&(c=c.sort());let u=[];t.respectType!==!1&&!Hw(o)&&(u=D3),t.excludeKeys&&(c=c.filter(h=>!t.excludeKeys(h)),u=u.filter(h=>!t.excludeKeys(h))),s("object:"+(c.length+u.length)+":");const d=h=>{this.dispatch(h),s(":"),t.excludeValues||this.dispatch(o[h]),s(",")};for(const h of c)d(h);for(const h of u)d(h)}},array(o,r){if(r=r===void 0?t.unorderedArrays!==!1:r,s("array:"+o.length+":"),!r||o.length<=1){for(const l of o)this.dispatch(l);return}const i=new Map,a=o.map(l=>{const c=xk(t);c.dispatch(l);for(const[u,d]of c.getContext())i.set(u,d);return c.toString()});return n=i,a.sort(),this.array(a,!1)},date(o){return s("date:"+o.toJSON())},symbol(o){return s("symbol:"+o.toString())},unkown(o,r){if(s(r),!!o&&(s(":"),o&&typeof o.entries=="function"))return this.array(Array.from(o.entries()),!0)},error(o){return s("error:"+o.toString())},boolean(o){return s("bool:"+o)},string(o){s("string:"+o.length+":"),s(o)},function(o){s("fn:"),Hw(o)?this.dispatch("[native]"):this.dispatch(o.toString()),t.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(o.name)),t.respectFunctionProperties&&this.object(o)},number(o){return s("number:"+o)},xml(o){return s("xml:"+o.toString())},null(){return s("Null")},undefined(){return s("Undefined")},regexp(o){return s("regex:"+o.toString())},uint8array(o){return s("uint8array:"),this.dispatch(Array.prototype.slice.call(o))},uint8clampedarray(o){return s("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(o))},int8array(o){return s("int8array:"),this.dispatch(Array.prototype.slice.call(o))},uint16array(o){return s("uint16array:"),this.dispatch(Array.prototype.slice.call(o))},int16array(o){return s("int16array:"),this.dispatch(Array.prototype.slice.call(o))},uint32array(o){return s("uint32array:"),this.dispatch(Array.prototype.slice.call(o))},int32array(o){return s("int32array:"),this.dispatch(Array.prototype.slice.call(o))},float32array(o){return s("float32array:"),this.dispatch(Array.prototype.slice.call(o))},float64array(o){return s("float64array:"),this.dispatch(Array.prototype.slice.call(o))},arraybuffer(o){return s("arraybuffer:"),this.dispatch(new Uint8Array(o))},url(o){return s("url:"+o.toString())},map(o){s("map:");const r=[...o];return this.array(r,t.unorderedSets!==!1)},set(o){s("set:");const r=[...o];return this.array(r,t.unorderedSets!==!1)},file(o){return s("file:"),this.dispatch([o.name,o.size,o.type,o.lastModfied])},blob(){if(t.ignoreUnknown)return s("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return s("domwindow")},bigint(o){return s("bigint:"+o.toString())},process(){return s("process")},timer(){return s("timer")},pipe(){return s("pipe")},tcp(){return s("tcp")},udp(){return s("udp")},tty(){return s("tty")},statwatcher(){return s("statwatcher")},securecontext(){return s("securecontext")},connection(){return s("connection")},zlib(){return s("zlib")},context(){return s("context")},nodescript(){return s("nodescript")},httpparser(){return s("httpparser")},dataview(){return s("dataview")},signal(){return s("signal")},fsevent(){return s("fsevent")},tlswrap(){return s("tlswrap")}}}const wk="[native code] }",O3=wk.length;function Hw(t){return typeof t!="function"?!1:Function.prototype.toString.call(t).slice(-O3)===wk}var L3=Object.defineProperty,F3=(t,e,n)=>e in t?L3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Za=(t,e,n)=>(F3(t,typeof e!="symbol"?e+"":e,n),n);class Ur{constructor(e,n){Za(this,"words"),Za(this,"sigBytes"),e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}toString(e){return(e||P3).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const s=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=s<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Ur([...this.words])}}const P3={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const s=t.words[n>>>2]>>>24-n%4*8&255;e.push((s>>>4).toString(16),(s&15).toString(16))}return e.join("")}},M3={stringify(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];for(let s=0;s<t.sigBytes;s+=3){const o=t.words[s>>>2]>>>24-s%4*8&255,r=t.words[s+1>>>2]>>>24-(s+1)%4*8&255,i=t.words[s+2>>>2]>>>24-(s+2)%4*8&255,a=o<<16|r<<8|i;for(let l=0;l<4&&s*8+l*6<t.sigBytes*8;l++)n.push(e.charAt(a>>>6*(3-l)&63))}return n.join("")}},B3={parse(t){const e=t.length,n=[];for(let s=0;s<e;s++)n[s>>>2]|=(t.charCodeAt(s)&255)<<24-s%4*8;return new Ur(n,e)}},V3={parse(t){return B3.parse(unescape(encodeURIComponent(t)))}};class U3{constructor(){Za(this,"_data",new Ur),Za(this,"_nDataBytes",0),Za(this,"_minBufferSize",0),Za(this,"blockSize",512/32)}reset(){this._data=new Ur,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=V3.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,n){}_process(e){let n,s=this._data.sigBytes/(this.blockSize*4);e?s=Math.ceil(s):s=Math.max((s|0)-this._minBufferSize,0);const o=s*this.blockSize,r=Math.min(o*4,this._data.sigBytes);if(o){for(let i=0;i<o;i+=this.blockSize)this._doProcessBlock(this._data.words,i);n=this._data.words.splice(0,o),this._data.sigBytes-=r}return new Ur(n,r)}}class j3 extends U3{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}var z3=Object.defineProperty,W3=(t,e,n)=>e in t?z3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G3=(t,e,n)=>(W3(t,e+"",n),n);const Kw=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],H3=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ii=[];class K3 extends j3{constructor(){super(...arguments),G3(this,"_hash",new Ur([...Kw]))}reset(){super.reset(),this._hash=new Ur([...Kw])}_doProcessBlock(e,n){const s=this._hash.words;let o=s[0],r=s[1],i=s[2],a=s[3],l=s[4],c=s[5],u=s[6],d=s[7];for(let h=0;h<64;h++){if(h<16)Ii[h]=e[n+h]|0;else{const x=Ii[h-15],y=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,w=Ii[h-2],C=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;Ii[h]=y+Ii[h-7]+C+Ii[h-16]}const f=l&c^~l&u,p=o&r^o&i^r&i,m=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),v=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),g=d+v+f+H3[h]+Ii[h],b=m+p;d=u,u=c,c=l,l=a+g|0,a=i,i=r,r=o,o=g+b|0}s[0]=s[0]+o|0,s[1]=s[1]+r|0,s[2]=s[2]+i|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0,s[5]=s[5]+c|0,s[6]=s[6]+u|0,s[7]=s[7]+d|0}finalize(e){super.finalize(e);const n=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(s+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function q3(t){return new K3().finalize(t).toString(M3)}function X3(t,e={}){const n=typeof t=="string"?t:R3(t,e);return q3(n).slice(0,10)}function Q3(t,e){return{ctx:{table:t},matchAll:n=>_k(n,t)}}function Ck(t){const e={};for(const n in t)e[n]=n==="dynamic"?new Map(Object.entries(t[n]).map(([s,o])=>[s,Ck(o)])):new Map(Object.entries(t[n]));return e}function Y3(t){return Q3(Ck(t))}function _k(t,e,n){t.endsWith("/")&&(t=t.slice(0,-1)||"/");const s=[];for(const[r,i]of qw(e.wildcard))(t===r||t.startsWith(r+"/"))&&s.push(i);for(const[r,i]of qw(e.dynamic))if(t.startsWith(r+"/")){const a="/"+t.slice(r.length).split("/").splice(2).join("/");s.push(..._k(a,i))}const o=e.static.get(t);return o&&s.push(o),s.filter(Boolean)}function qw(t){return[...t.entries()].sort((e,n)=>e[0].length-n[0].length)}function Cg(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Lv(t,e,n=".",s){if(!Cg(e))return Lv(t,{},n,s);const o=Object.assign({},e);for(const r in t){if(r==="__proto__"||r==="constructor")continue;const i=t[r];i!=null&&(s&&s(o,r,i,n)||(Array.isArray(i)&&Array.isArray(o[r])?o[r]=[...i,...o[r]]:Cg(i)&&Cg(o[r])?o[r]=Lv(i,o[r],(n?`${n}.`:"")+r.toString(),s):o[r]=i))}return o}function Sk(t){return(...e)=>e.reduce((n,s)=>Lv(n,s,"",t),{})}const Ik=Sk(),J3=Sk((t,e,n)=>{if(t[e]!==void 0&&typeof n=="function")return t[e]=n(t[e]),!0});function Z3(t,e){try{return e in t}catch{return!1}}var eB=Object.defineProperty,tB=(t,e,n)=>e in t?eB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ni=(t,e,n)=>(tB(t,typeof e!="symbol"?e+"":e,n),n);class Fv extends Error{constructor(e,n={}){super(e,n),Ni(this,"statusCode",500),Ni(this,"fatal",!1),Ni(this,"unhandled",!1),Ni(this,"statusMessage"),Ni(this,"data"),Ni(this,"cause"),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:Mv(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Ek(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}Ni(Fv,"__h3_error__",!0);function Pv(t){if(typeof t=="string")return new Fv(t);if(nB(t))return t;const e=new Fv(t.message??t.statusMessage??"",{cause:t.cause||t});if(Z3(t,"stack"))try{Object.defineProperty(e,"stack",{get(){return t.stack}})}catch{try{e.stack=t.stack}catch{}}if(t.data&&(e.data=t.data),t.statusCode?e.statusCode=Mv(t.statusCode,e.statusCode):t.status&&(e.statusCode=Mv(t.status,e.statusCode)),t.statusMessage?e.statusMessage=t.statusMessage:t.statusText&&(e.statusMessage=t.statusText),e.statusMessage){const n=e.statusMessage;Ek(e.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return t.fatal!==void 0&&(e.fatal=t.fatal),t.unhandled!==void 0&&(e.unhandled=t.unhandled),e}function nB(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.__h3_error__)===!0}const sB=/[^\u0009\u0020-\u007E]/g;function Ek(t=""){return t.replace(sB,"")}function Mv(t,e=200){return!t||(typeof t=="string"&&(t=Number.parseInt(t,10)),t<100||t>999)?e:t}const kk=Symbol("layout-meta"),Eu=Symbol("route"),Fn=()=>{var t;return(t=Ct())==null?void 0:t.$router},Gl=()=>RE()?On(Eu,Ct()._route):Ct()._route;const oB=()=>{try{if(Ct()._processingMiddleware)return!0}catch{return!1}return!1},rB=(t,e)=>{t||(t="/");const n=typeof t=="string"?t:"path"in t?Bv(t):Fn().resolve(t).href;if(e!=null&&e.open){const{target:l="_blank",windowFeatures:c={}}=e.open,u=Object.entries(c).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d.toLowerCase()}=${h}`).join(", ");return open(n,l,u),Promise.resolve()}const s=vr(n,{acceptRelative:!0}),o=(e==null?void 0:e.external)||s;if(o){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(n,window.location.href);if(l&&BM(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const r=oB();if(!o&&r)return t;const i=Fn(),a=Ct();return o?(a._scope.stop(),e!=null&&e.replace?location.replace(n):location.href=n,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?i.replace(t):i.push(t)};function Bv(t){return uk(t.path||"",t.query||{})+(t.hash||"")}const $k="__nuxt_error",dp=()=>cE(Ct().payload,"error"),el=t=>{const e=ku(t);try{const n=Ct(),s=dp();n.hooks.callHook("app:error",e),s.value=s.value||e}catch{throw e}return e},iB=async(t={})=>{const e=Ct(),n=dp();e.callHook("app:error:cleared",t),t.redirect&&await Fn().replace(t.redirect),n.value=C3},aB=t=>!!t&&typeof t=="object"&&$k in t,ku=t=>{const e=Pv(t);return Object.defineProperty(e,$k,{value:!0,configurable:!1,writable:!1}),e},lB=-1,cB=-2,uB=-3,dB=-4,hB=-5,fB=-6;function pB(t,e){return mB(JSON.parse(t),e)}function mB(t,e){if(typeof t=="number")return o(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const n=t,s=Array(n.length);function o(r,i=!1){if(r===lB)return;if(r===uB)return NaN;if(r===dB)return 1/0;if(r===hB)return-1/0;if(r===fB)return-0;if(i)throw new Error("Invalid input");if(r in s)return s[r];const a=n[r];if(!a||typeof a!="object")s[r]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const l=a[0],c=e==null?void 0:e[l];if(c)return s[r]=c(o(a[1]));switch(l){case"Date":s[r]=new Date(a[1]);break;case"Set":const u=new Set;s[r]=u;for(let f=1;f<a.length;f+=1)u.add(o(a[f]));break;case"Map":const d=new Map;s[r]=d;for(let f=1;f<a.length;f+=2)d.set(o(a[f]),o(a[f+1]));break;case"RegExp":s[r]=new RegExp(a[1],a[2]);break;case"Object":s[r]=Object(a[1]);break;case"BigInt":s[r]=BigInt(a[1]);break;case"null":const h=Object.create(null);s[r]=h;for(let f=1;f<a.length;f+=2)h[a[f]]=o(a[f+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(a.length);s[r]=l;for(let c=0;c<a.length;c+=1){const u=a[c];u!==cB&&(l[c]=o(u))}}else{const l={};s[r]=l;for(const c in a){const u=a[c];l[c]=o(u)}}return s[r]}return o(0)}const gB=new Set(["title","titleTemplate","script","style","noscript"]),Dh=new Set(["base","meta","link","style","script","noscript"]),vB=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),bB=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Tk=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),yB=typeof window<"u";function af(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Vv(t){if(t._h)return t._h;if(t._d)return af(t._d);let e=`${t.tag}:${t.textContent||t.innerHTML||""}:`;for(const n in t.props)e+=`${n}:${String(t.props[n])},`;return af(e)}function Nk(t,e){const n=[],s=e.resolveKeyData||(r=>r.key),o=e.resolveValueData||(r=>r.value);for(const[r,i]of Object.entries(t))n.push(...(Array.isArray(i)?i:[i]).map(a=>{const l={key:r,value:a},c=o(l);return typeof c=="object"?Nk(c,e):Array.isArray(c)?c:{[typeof e.key=="function"?e.key(l):e.key]:s(l),[typeof e.value=="function"?e.value(l):e.value]:c}}).flat());return n}function Ak(t,e){return Object.entries(t).map(([n,s])=>{if(typeof s=="object"&&(s=Ak(s,e)),e.resolve){const o=e.resolve({key:n,value:s});if(typeof o<"u")return o}return typeof s=="number"&&(s=s.toString()),typeof s=="string"&&e.wrapValue&&(s=s.replace(new RegExp(e.wrapValue,"g"),`\\${e.wrapValue}`),s=`${e.wrapValue}${s}${e.wrapValue}`),`${n}${e.keyValueSeparator||""}${s}`}).join(e.entrySeparator||"")}const Bn=t=>({keyValue:t,metaKey:"property"}),_g=t=>({keyValue:t}),Cy={appleItunesApp:{unpack:{entrySeparator:", ",resolve({key:t,value:e}){return`${sr(t)}=${e}`}}},articleExpirationTime:Bn("article:expiration_time"),articleModifiedTime:Bn("article:modified_time"),articlePublishedTime:Bn("article:published_time"),bookReleaseDate:Bn("book:release_date"),charset:{metaKey:"charset"},contentSecurityPolicy:{unpack:{entrySeparator:"; ",resolve({key:t,value:e}){return`${sr(t)} ${e}`}},metaKey:"http-equiv"},contentType:{metaKey:"http-equiv"},defaultStyle:{metaKey:"http-equiv"},fbAppId:Bn("fb:app_id"),msapplicationConfig:_g("msapplication-Config"),msapplicationTileColor:_g("msapplication-TileColor"),msapplicationTileImage:_g("msapplication-TileImage"),ogAudioSecureUrl:Bn("og:audio:secure_url"),ogAudioUrl:Bn("og:audio"),ogImageSecureUrl:Bn("og:image:secure_url"),ogImageUrl:Bn("og:image"),ogSiteName:Bn("og:site_name"),ogVideoSecureUrl:Bn("og:video:secure_url"),ogVideoUrl:Bn("og:video"),profileFirstName:Bn("profile:first_name"),profileLastName:Bn("profile:last_name"),profileUsername:Bn("profile:username"),refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve({key:t,value:e}){if(t==="seconds")return`${e}`}}},robots:{unpack:{entrySeparator:", ",resolve({key:t,value:e}){return typeof e=="boolean"?`${sr(t)}`:`${sr(t)}:${e}`}}},xUaCompatible:{metaKey:"http-equiv"}},Rk=new Set(["og","book","article","profile"]);function Dk(t){var s;const e=sr(t),n=e.indexOf(":");return Rk.has(e.substring(0,n))?"property":((s=Cy[t])==null?void 0:s.metaKey)||"name"}function xB(t){var e;return((e=Cy[t])==null?void 0:e.keyValue)||sr(t)}function sr(t){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=e.indexOf("-"),s=e.substring(0,n);return s==="twitter"||Rk.has(s)?t.replace(/([A-Z])/g,":$1").toLowerCase():e}function Uv(t){if(Array.isArray(t))return t.map(n=>Uv(n));if(typeof t!="object"||Array.isArray(t))return t;const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[sr(n)]=Uv(t[n]));return e}function wB(t,e){const n=Cy[e];return e==="refresh"?`${t.seconds};url=${t.url}`:Ak(Uv(t),{keyValueSeparator:"=",entrySeparator:", ",resolve({value:s,key:o}){if(s===null)return"";if(typeof s=="boolean")return`${o}`},...n==null?void 0:n.unpack})}const Ok=new Set(["og:image","og:video","og:audio","twitter:image"]);function Lk(t){const e={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const s=t[n];String(s)!=="false"&&n&&(e[n]=s)}return e}function Xw(t,e){const n=Lk(e),s=sr(t),o=Dk(s);if(Ok.has(s)){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[`${t}${i==="url"?"":`${i[0].toUpperCase()}${i.slice(1)}`}`]=n[i]);return Fk(r).sort((i,a)=>{var l,c;return(((l=i[o])==null?void 0:l.length)||0)-(((c=a[o])==null?void 0:c.length)||0)})}return[{[o]:s,...n}]}function Fk(t){const e=[],n={};for(const o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;const r=t[o];if(!Array.isArray(r)){if(typeof r=="object"&&r){if(Ok.has(sr(o))){e.push(...Xw(o,r));continue}n[o]=Lk(r)}else n[o]=r;continue}for(const i of r)e.push(...typeof i=="string"?Fk({[o]:i}):Xw(o,i))}const s=Nk(n,{key({key:o}){return Dk(o)},value({key:o}){return o==="charset"?"charset":"content"},resolveKeyData({key:o}){return xB(o)},resolveValueData({value:o,key:r}){return o===null?"_null":typeof o=="object"?wB(o,r):typeof o=="number"?o.toString():o}});return[...e,...s].map(o=>(o.content==="_null"&&(o.content=null),o))}function CB(t,e){return t instanceof Promise?t.then(e):e(t)}function jv(t,e,n,s){const o=s||Mk(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[t==="script"||t==="noscript"||t==="style"?"innerHTML":"textContent"]:e},t==="templateParams"||t==="titleTemplate");if(o instanceof Promise)return o.then(i=>jv(t,e,n,i));const r={tag:t,props:o};for(const i of Tk){const a=r.props[i]!==void 0?r.props[i]:n[i];a!==void 0&&((!(i==="innerHTML"||i==="textContent"||i==="children")||gB.has(r.tag))&&(r[i==="children"?"innerHTML":i]=a),delete r.props[i])}return r.props.body&&(r.tagPosition="bodyClose",delete r.props.body),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(i=>({...r,props:{...r.props,content:i}})):r}function _B(t,e){var s;const n=t==="class"?" ":";";return e&&typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,o])=>o).map(([o,r])=>t==="style"?`${o}:${r}`:o)),(s=String(Array.isArray(e)?e.join(n):e))==null?void 0:s.split(n).filter(o=>!!o.trim()).join(n)}function Pk(t,e,n,s){for(let o=s;o<n.length;o+=1){const r=n[o];if(r==="class"||r==="style"){t[r]=_B(r,t[r]);continue}if(t[r]instanceof Promise)return t[r].then(i=>(t[r]=i,Pk(t,e,n,o)));if(!e&&!Tk.has(r)){const i=String(t[r]),a=r.startsWith("data-");i==="true"||i===""?t[r]=a?"true":!0:t[r]||(a&&i==="false"?t[r]="false":delete t[r])}}}function Mk(t,e=!1){const n=Pk(t,e,Object.keys(t),0);return n instanceof Promise?n.then(()=>t):t}const SB=10;function Bk(t,e,n){for(let s=n;s<e.length;s+=1){const o=e[s];if(o instanceof Promise)return o.then(r=>(e[s]=r,Bk(t,e,s)));Array.isArray(o)?t.push(...o):t.push(o)}}function IB(t){const e=[],n=t.resolvedInput;for(const o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;const r=n[o];if(!(r===void 0||!vB.has(o))){if(Array.isArray(r)){for(const i of r)e.push(jv(o,i,t));continue}e.push(jv(o,r,t))}}if(e.length===0)return[];const s=[];return CB(Bk(s,e,0),()=>s.map((o,r)=>(o._e=t._i,t.mode&&(o._m=t.mode),o._p=(t._i<<SB)+r,o)))}const Qw=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Yw={base:-10,title:10},Jw={critical:-80,high:-10,low:20};function lf(t){const e=t.tagPriority;if(typeof e=="number")return e;let n=100;return t.tag==="meta"?t.props["http-equiv"]==="content-security-policy"?n=-30:t.props.charset?n=-20:t.props.name==="viewport"&&(n=-15):t.tag==="link"&&t.props.rel==="preconnect"?n=20:t.tag in Yw&&(n=Yw[t.tag]),e&&e in Jw?n+Jw[e]:n}const EB=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],kB=["name","property","http-equiv"];function Vk(t){const{props:e,tag:n}=t;if(bB.has(n))return n;if(n==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(e.id)return`${n}:id:${e.id}`;for(const s of kB)if(e[s]!==void 0)return`${n}:${s}:${e[s]}`;return!1}const Nr="%separator";function $B(t,e){var s;let n;if(e==="s"||e==="pageTitle")n=t.pageTitle;else if(e.includes(".")){const o=e.indexOf(".");n=(s=t[e.substring(0,o)])==null?void 0:s[e.substring(o+1)]}else n=t[e];return n!==void 0?(n||"").replace(/"/g,'\\"'):void 0}const TB=new RegExp(`${Nr}(?:\\s*${Nr})*`,"g");function ah(t,e,n){if(typeof t!="string"||!t.includes("%"))return t;let s=t;try{s=decodeURI(t)}catch{}const o=s.match(/%\w+(?:\.\w+)?/g);if(!o)return t;const r=t.includes(Nr);return t=t.replace(/%\w+(?:\.\w+)?/g,i=>{if(i===Nr||!o.includes(i))return i;const a=$B(e,i.slice(1));return a!==void 0?a:i}).trim(),r&&(t.endsWith(Nr)&&(t=t.slice(0,-Nr.length)),t.startsWith(Nr)&&(t=t.slice(Nr.length)),t=t.replace(TB,n).trim()),t}function Zw(t,e){return t==null?e||null:typeof t=="function"?t(e):t}async function Uk(t,e={}){const n=e.document||t.resolvedOptions.document;if(!n||!t.dirty)return;const s={shouldRender:!0,tags:[]};if(await t.hooks.callHook("dom:beforeRender",s),!!s.shouldRender)return t._domUpdatePromise||(t._domUpdatePromise=new Promise(async o=>{var d;const r=(await t.resolveTags()).map(h=>({tag:h,id:Dh.has(h.tag)?Vv(h):h.tag,shouldRender:!0}));let i=t._dom;if(!i){i={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};const h=new Set;for(const f of["body","head"]){const p=(d=n[f])==null?void 0:d.children;for(const m of p){const v=m.tagName.toLowerCase();if(!Dh.has(v))continue;const g={tag:v,props:await Mk(m.getAttributeNames().reduce((w,C)=>({...w,[C]:m.getAttribute(C)}),{})),innerHTML:m.innerHTML},b=Vk(g);let x=b,y=1;for(;x&&h.has(x);)x=`${b}:${y++}`;x&&(g._d=x,h.add(x)),i.elMap[m.getAttribute("data-hid")||Vv(g)]=m}}}i.pendingSideEffects={...i.sideEffects},i.sideEffects={};function a(h,f,p){const m=`${h}:${f}`;i.sideEffects[m]=p,delete i.pendingSideEffects[m]}function l({id:h,$el:f,tag:p}){const m=p.tag.endsWith("Attrs");if(i.elMap[h]=f,m||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),a(h,"el",()=>{var v;(v=i.elMap[h])==null||v.remove(),delete i.elMap[h]})),p._eventHandlers)for(const v in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,v)&&f.getAttribute(`data-${v}`)!==""&&((p.tag==="bodyAttrs"?n.defaultView:f).addEventListener(v.substring(2),p._eventHandlers[v].bind(f)),f.setAttribute(`data-${v}`,""));for(const v in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,v))continue;const g=p.props[v],b=`attr:${v}`;if(v==="class"){if(!g)continue;for(const x of g.split(" "))m&&a(h,`${b}:${x}`,()=>f.classList.remove(x)),!f.classList.contains(x)&&f.classList.add(x)}else if(v==="style"){if(!g)continue;for(const x of g.split(";")){const y=x.indexOf(":"),w=x.substring(0,y).trim(),C=x.substring(y+1).trim();a(h,`${b}:${w}`,()=>{f.style.removeProperty(w)}),f.style.setProperty(w,C)}}else f.getAttribute(v)!==g&&f.setAttribute(v,g===!0?"":String(g)),m&&a(h,b,()=>f.removeAttribute(v))}}const c=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of r){const{tag:f,shouldRender:p,id:m}=h;if(p){if(f.tag==="title"){n.title=f.textContent;continue}h.$el=h.$el||i.elMap[m],h.$el?l(h):Dh.has(f.tag)&&c.push(h)}}for(const h of c){const f=h.tag.tagPosition||"head";h.$el=n.createElement(h.tag.tag),l(h),u[f]=u[f]||n.createDocumentFragment(),u[f].appendChild(h.$el)}for(const h of r)await t.hooks.callHook("dom:renderTag",h,n,a);u.head&&n.head.appendChild(u.head),u.bodyOpen&&n.body.insertBefore(u.bodyOpen,n.body.firstChild),u.bodyClose&&n.body.appendChild(u.bodyClose);for(const h in i.pendingSideEffects)i.pendingSideEffects[h]();t._dom=i,await t.hooks.callHook("dom:rendered",{renders:r}),o()}).finally(()=>{t._domUpdatePromise=void 0,t.dirty=!1})),t._domUpdatePromise}function NB(t,e={}){const n=e.delayFn||(s=>setTimeout(s,10));return t._domDebouncedUpdatePromise=t._domDebouncedUpdatePromise||new Promise(s=>n(()=>Uk(t,e).then(()=>{delete t._domDebouncedUpdatePromise,s()})))}function AB(t){return e=>{var s,o;const n=((o=(s=e.resolvedOptions.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:o.innerHTML)||!1;return n&&e.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":r=>{NB(r,t)}}}}}const RB=new Set(["templateParams","htmlAttrs","bodyAttrs"]),DB={hooks:{"tag:normalise":({tag:t})=>{t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.key&&(t.key=t.props.key,delete t.props.key);const e=Vk(t);e&&!e.startsWith("meta:og:")&&!e.startsWith("meta:twitter:")&&delete t.key;const n=e||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":t=>{const e=Object.create(null);for(const s of t.tags){const o=(s.key?`${s.tag}:${s.key}`:s._d)||Vv(s),r=e[o];if(r){let a=s==null?void 0:s.tagDuplicateStrategy;if(!a&&RB.has(s.tag)&&(a="merge"),a==="merge"){const l=r.props;l.style&&s.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),s.props.style=`${l.style} ${s.props.style}`),l.class&&s.props.class?s.props.class=`${l.class} ${s.props.class}`:l.class&&(s.props.class=l.class),e[o].props={...l,...s.props};continue}else if(s._e===r._e){r._duped=r._duped||[],s._d=`${r._d}:${r._duped.length+1}`,r._duped.push(s);continue}else if(lf(s)>lf(r))continue}if(!(s.innerHTML||s.textContent||Object.keys(s.props).length!==0)&&Dh.has(s.tag)){delete e[o];continue}e[o]=s}const n=[];for(const s in e){const o=e[s],r=o._duped;n.push(o),r&&(delete o._duped,n.push(...r))}t.tags=n,t.tags=t.tags.filter(s=>!(s.tag==="meta"&&(s.props.name||s.props.property)&&!s.props.content))}}},OB=new Set(["script","link","bodyAttrs"]),LB=t=>({hooks:{"tags:resolve":e=>{for(const n of e.tags){if(!OB.has(n.tag))continue;const s=n.props;for(const o in s){if(o[0]!=="o"||o[1]!=="n"||!Object.prototype.hasOwnProperty.call(s,o))continue;const r=s[o];typeof r=="function"&&(t.ssr&&Qw.has(o)?s[o]=`this.dataset.${o}fired = true`:delete s[o],n._eventHandlers=n._eventHandlers||{},n._eventHandlers[o]=r)}t.ssr&&n._eventHandlers&&(n.props.src||n.props.href)&&(n.key=n.key||af(n.props.src||n.props.href))}},"dom:renderTag":({$el:e,tag:n})=>{var o,r;const s=e==null?void 0:e.dataset;if(s)for(const i in s){if(!i.endsWith("fired"))continue;const a=i.slice(0,-5);Qw.has(a)&&((r=(o=n._eventHandlers)==null?void 0:o[a])==null||r.call(e,new Event(a.substring(2))))}}}}),FB=new Set(["link","style","script","noscript"]),PB={hooks:{"tag:normalise":({tag:t})=>{t.key&&FB.has(t.tag)&&(t.props["data-hid"]=t._h=af(t.key))}}},MB={mode:"server",hooks:{"tags:beforeResolve":t=>{const e={};let n=!1;for(const s of t.tags)s._m!=="server"||s.tag!=="titleTemplate"&&s.tag!=="templateParams"&&s.tag!=="title"||(e[s.tag]=s.tag==="title"||s.tag==="titleTemplate"?s.textContent:s.props,n=!0);n&&t.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},BB={hooks:{"tags:resolve":t=>{var e;for(const n of t.tags)if(typeof n.tagPriority=="string")for(const{prefix:s,offset:o}of EB){if(!n.tagPriority.startsWith(s))continue;const r=n.tagPriority.substring(s.length),i=(e=t.tags.find(a=>a._d===r))==null?void 0:e._p;if(i!==void 0){n._p=i+o;break}}t.tags.sort((n,s)=>{const o=lf(n),r=lf(s);return o<r?-1:o>r?1:n._p-s._p})}}},VB={meta:"content",link:"href",htmlAttrs:"lang"},UB=["innerHTML","textContent"],jB=t=>({hooks:{"tags:resolve":e=>{var i;const{tags:n}=e;let s;for(let a=0;a<n.length;a+=1)n[a].tag==="templateParams"&&(s=e.tags.splice(a,1)[0].props,a-=1);const o=s||{},r=o.separator||"|";delete o.separator,o.pageTitle=ah(o.pageTitle||((i=n.find(a=>a.tag==="title"))==null?void 0:i.textContent)||"",o,r);for(const a of n){if(a.processTemplateParams===!1)continue;const l=VB[a.tag];if(l&&typeof a.props[l]=="string")a.props[l]=ah(a.props[l],o,r);else if(a.processTemplateParams||a.tag==="titleTemplate"||a.tag==="title")for(const c of UB)typeof a[c]=="string"&&(a[c]=ah(a[c],o,r))}t._templateParams=o,t._separator=r},"tags:afterResolve":({tags:e})=>{let n;for(let s=0;s<e.length;s+=1){const o=e[s];o.tag==="title"&&o.processTemplateParams!==!1&&(n=o)}n!=null&&n.textContent&&(n.textContent=ah(n.textContent,t._templateParams,t._separator))}}}),zB={hooks:{"tags:resolve":t=>{const{tags:e}=t;let n,s;for(let o=0;o<e.length;o+=1){const r=e[o];r.tag==="title"?n=r:r.tag==="titleTemplate"&&(s=r)}if(s&&n){const o=Zw(s.textContent,n.textContent);o!==null?n.textContent=o||n.textContent:t.tags.splice(t.tags.indexOf(n),1)}else if(s){const o=Zw(s.textContent);o!==null&&(s.textContent=o,s.tag="title",s=void 0)}s&&t.tags.splice(t.tags.indexOf(s),1)}}},WB={hooks:{"tags:afterResolve":t=>{for(const e of t.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&(e.props.type==="application/ld+json"||e.props.type==="application/json")?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let jk;function GB(t={}){const e=HB(t);return e.use(AB()),jk=e}function eC(t,e){return!t||t==="server"&&e||t==="client"&&!e}function HB(t={}){const e=vk();e.addHooks(t.hooks||{}),t.document=t.document||(yB?document:void 0);const n=!t.document,s=()=>{a.dirty=!0,e.callHook("entries:updated",a)};let o=0,r=[];const i=[],a={plugins:i,dirty:!1,resolvedOptions:t,hooks:e,headEntries(){return r},use(l){const c=typeof l=="function"?l(a):l;(!c.key||!i.some(u=>u.key===c.key))&&(i.push(c),eC(c.mode,n)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:o++,input:l,...c};return eC(u.mode,n)&&(r.push(u),s()),{dispose(){r=r.filter(d=>d._i!==u._i),s()},patch(d){for(const h of r)h._i===u._i&&(h.input=u.input=d);s()}}},async resolveTags(){const l={tags:[],entries:[...r]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const d of await IB(c)){const h={tag:d,entry:c,resolvedOptions:a.resolvedOptions};await e.callHook("tag:normalise",h),l.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:n};return[DB,MB,LB,PB,BB,jB,zB,WB,...(t==null?void 0:t.plugins)||[]].forEach(l=>a.use(l)),a.hooks.callHook("init",a),a}function KB(){return jk}const qB=nk[0]==="3";function XB(t){return typeof t=="function"?t():je(t)}function cf(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const e=XB(t);if(!t||!e)return e;if(Array.isArray(e))return e.map(n=>cf(n));if(typeof e=="object"){const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(s==="titleTemplate"||s[0]==="o"&&s[1]==="n"){n[s]=je(e[s]);continue}n[s]=cf(e[s])}return n}return e}const QB={hooks:{"entries:resolve":t=>{for(const e of t.entries)e.resolvedInput=cf(e.input)}}},zk="usehead";function YB(t){return{install(n){qB&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(zk,t))}}.install}function JB(t={}){t.domDelayFn=t.domDelayFn||(n=>Wl(()=>setTimeout(()=>n(),0)));const e=GB(t);return e.use(QB),e.install=YB(e),e}const zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wv="__unhead_injection_handler__";function ZB(t){zv[Wv]=t}function e4(){if(Wv in zv)return zv[Wv]();const t=On(zk);return t||KB()}function t4(t,e={}){const n=e.head||e4();if(n)return n.ssr?n.push(t,e):n4(n,t,e)}function n4(t,e,n={}){const s=Ot(!1),o=Ot({});dP(()=>{o.value=s.value?{}:cf(e)});const r=t.push(o.value,n);return ls(o,a=>{r.patch(a)}),ys()&&(Iu(()=>{r.dispose()}),_E(()=>{s.value=!0}),CE(()=>{s.value=!1})),r}let Oh,Lh;function s4(){return Oh=$fetch(wy(`builds/meta/${ri().app.buildId}.json`),{responseType:"json"}),Oh.then(t=>{Lh=Y3(t.matcher)}).catch(t=>{console.error("[nuxt] Error fetching app manifest.",t)}),Oh}function hp(){return Oh||s4()}async function _y(t){if(await hp(),!Lh)return console.error("[nuxt] Error creating app manifest matcher.",Lh),{};try{return Ik({},...Lh.matchAll(t).reverse())}catch(e){return console.error("[nuxt] Error matching route rules.",e),{}}}async function tC(t,e={}){const n=await r4(t,e),s=Ct(),o=s._payloadCache=s._payloadCache||{};return n in o||(o[n]=Gk(t).then(r=>r?Wk(n).then(i=>i||(delete o[n],null)):(o[n]=null,null))),o[n]}const o4="_payload.json";async function r4(t,e={}){const n=new URL(t,"http://localhost");if(n.host!=="localhost"||vr(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+t);const s=ri(),o=e.hash||(e.fresh?Date.now():s.app.buildId),r=s.app.cdnURL,i=r&&await Gk(t)?r:s.app.baseURL;return up(i,n.pathname,o4+(o?`?${o}`:""))}async function Wk(t){const e=fetch(t).then(n=>n.text().then(Hk));try{return await e}catch(n){console.warn("[nuxt] Cannot load payload ",t,n)}return null}async function Gk(t=Gl().path){if(t=cp(t),(await hp()).prerendered.includes(t))return!0;const n=await _y(t);return!!n.prerender&&!n.redirect}let Ei=null;async function i4(){var s;if(Ei)return Ei;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const e=await Hk(t.textContent||""),n=t.dataset.src?await Wk(t.dataset.src):void 0;return Ei={...e,...n,...window.__NUXT__},(s=Ei.config)!=null&&s.public&&(Ei.config.public=Go(Ei.config.public)),Ei}async function Hk(t){return await pB(t,Ct()._payloadRevivers)}function a4(t,e){Ct()._payloadRevivers[t]=e}const nC={NuxtError:t=>ku(t),EmptyShallowRef:t=>cr(t==="_"?void 0:t==="0n"?BigInt(0):tf(t)),EmptyRef:t=>Ot(t==="_"?void 0:t==="0n"?BigInt(0):tf(t)),ShallowRef:t=>cr(t),ShallowReactive:t=>nr(t),Ref:t=>Ot(t),Reactive:t=>Go(t)},l4=mo({name:"nuxt:revive-payload:client",order:-30,async setup(t){let e,n;for(const s in nC)a4(s,nC[s]);Object.assign(t.payload,([e,n]=dl(()=>t.runWithContext(i4)),e=await e,n(),e)),window.__NUXT__=t.payload}}),c4=[],u4=mo({name:"nuxt:head",enforce:"pre",setup(t){const e=JB({plugins:c4});ZB(()=>Ct().vueApp._context.provides.usehead),t.vueApp.use(e);{let n=!0;const s=async()=>{n=!1,await Uk(e)};e.hooks.hook("dom:beforeRender",o=>{o.shouldRender=!n}),t.hooks.hook("page:start",()=>{n=!0}),t.hooks.hook("page:finish",()=>{t.isHydrating||s()}),t.hooks.hook("app:error",s),t.hooks.hook("app:suspense:resolve",s)}}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Wa=typeof document<"u";function Kk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function d4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Kk(t.default)}const pt=Object.assign;function Sg(t,e){const n={};for(const s in e){const o=e[s];n[s]=uo(o)?o.map(t):t(o)}return n}const Bc=()=>{},uo=Array.isArray,qk=/#/g,h4=/&/g,f4=/\//g,p4=/=/g,m4=/\?/g,Xk=/\+/g,g4=/%5B/g,v4=/%5D/g,Qk=/%5E/g,b4=/%60/g,Yk=/%7B/g,y4=/%7C/g,Jk=/%7D/g,x4=/%20/g;function Sy(t){return encodeURI(""+t).replace(y4,"|").replace(g4,"[").replace(v4,"]")}function w4(t){return Sy(t).replace(Yk,"{").replace(Jk,"}").replace(Qk,"^")}function Gv(t){return Sy(t).replace(Xk,"%2B").replace(x4,"+").replace(qk,"%23").replace(h4,"%26").replace(b4,"`").replace(Yk,"{").replace(Jk,"}").replace(Qk,"^")}function C4(t){return Gv(t).replace(p4,"%3D")}function _4(t){return Sy(t).replace(qk,"%23").replace(m4,"%3F")}function S4(t){return t==null?"":_4(t).replace(f4,"%2F")}function Zc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const I4=/\/$/,E4=t=>t.replace(I4,"");function Ig(t,e,n="/"){let s,o={},r="",i="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),o=t(r)),a>-1&&(s=s||e.slice(0,a),i=e.slice(a,e.length)),s=N4(s??e,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:Zc(i)}}function k4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function sC(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function $4(t,e,n){const s=e.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&yl(e.matched[s],n.matched[o])&&Zk(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function yl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Zk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!T4(t[n],e[n]))return!1;return!0}function T4(t,e){return uo(t)?oC(t,e):uo(e)?oC(e,t):t===e}function oC(t,e){return uo(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function N4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let r=n.length-1,i,a;for(i=0;i<s.length;i++)if(a=s[i],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i).join("/")}const Ys={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var eu;(function(t){t.pop="pop",t.push="push"})(eu||(eu={}));var Vc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Vc||(Vc={}));function A4(t){if(!t)if(Wa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),E4(t)}const R4=/^[^#]+#/;function D4(t,e){return t.replace(R4,"#")+e}function O4(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const fp=()=>({left:window.scrollX,top:window.scrollY});function L4(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=O4(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function rC(t,e){return(history.state?history.state.position-e:-1)+t}const Hv=new Map;function F4(t,e){Hv.set(t,e)}function P4(t){const e=Hv.get(t);return Hv.delete(t),e}let M4=()=>location.protocol+"//"+location.host;function e$(t,e){const{pathname:n,search:s,hash:o}=e,r=t.indexOf("#");if(r>-1){let a=o.includes(t.slice(r))?t.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),sC(l,"")}return sC(n,t)+s+o}function B4(t,e,n,s){let o=[],r=[],i=null;const a=({state:h})=>{const f=e$(t,location),p=n.value,m=e.value;let v=0;if(h){if(n.value=f,e.value=h,i&&i===p){i=null;return}v=m?h.position-m.position:0}else s(f);o.forEach(g=>{g(n.value,p,{delta:v,type:eu.pop,direction:v?v>0?Vc.forward:Vc.back:Vc.unknown})})};function l(){i=n.value}function c(h){o.push(h);const f=()=>{const p=o.indexOf(h);p>-1&&o.splice(p,1)};return r.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(pt({},h.state,{scroll:fp()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function iC(t,e,n,s=!1,o=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:o?fp():null}}function V4(t){const{history:e,location:n}=window,s={value:e$(t,n)},o={value:e.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:M4()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),o.value=c}catch(f){console.error(f),n[u?"replace":"assign"](h)}}function i(l,c){const u=pt({},e.state,iC(o.value.back,l,o.value.forward,!0),c,{position:o.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=pt({},o.value,e.state,{forward:l,scroll:fp()});r(u.current,u,!0);const d=pt({},iC(s.value,l,null),{position:u.position+1},c);r(l,d,!1),s.value=l}return{location:s,state:o,push:a,replace:i}}function t$(t){t=A4(t);const e=V4(t),n=B4(t,e.state,e.location,e.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=pt({location:"",base:t,go:s,createHref:D4.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function U4(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),t$(t)}function j4(t){return typeof t=="string"||t&&typeof t=="object"}function n$(t){return typeof t=="string"||typeof t=="symbol"}const s$=Symbol("");var aC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(aC||(aC={}));function xl(t,e){return pt(new Error,{type:t,[s$]:!0},e)}function Xo(t,e){return t instanceof Error&&s$ in t&&(e==null||!!(t.type&e))}const lC="[^/]+?",z4={sensitive:!1,strict:!1,start:!0,end:!0},W4=/[.+*?^${}()[\]/\\]/g;function G4(t,e){const n=pt({},z4,e),s=[];let o=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(o+="/"),o+=h.value.replace(W4,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:v,regexp:g}=h;r.push({name:p,repeatable:m,optional:v});const b=g||lC;if(b!==lC){f+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let x=m?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(x=v&&c.length<2?`(?:/${x})`:"/"+x),v&&(x+="?"),o+=x,f+=20,v&&(f+=-8),m&&(f+=-20),b===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(c){const u=c.match(i),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=r[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:v}=f,g=p in c?c[p]:"";if(uo(g)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=uo(g)?g.join("/"):g;if(!b)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u||"/"}return{re:i,score:s,keys:r,parse:a,stringify:l}}function H4(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function o$(t,e){let n=0;const s=t.score,o=e.score;for(;n<s.length&&n<o.length;){const r=H4(s[n],o[n]);if(r)return r;n++}if(Math.abs(o.length-s.length)===1){if(cC(s))return 1;if(cC(o))return-1}return o.length-s.length}function cC(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const K4={type:0,value:""},q4=/[a-zA-Z0-9_]/;function X4(t){if(!t)return[[]];if(t==="/")return[[K4]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),i()):l===":"?(d(),n=1):h();break;case 4:h(),n=s;break;case 1:l==="("?n=2:q4.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),i(),o}function Q4(t,e,n){const s=G4(X4(t.path),n),o=pt(s,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function Y4(t,e){const n=[],s=new Map;e=fC({strict:!1,end:!0,sensitive:!1},e);function o(d){return s.get(d)}function r(d,h,f){const p=!f,m=dC(d);m.aliasOf=f&&f.record;const v=fC(e,d),g=[m];if("alias"in d){const y=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of y)g.push(dC(pt({},m,{components:f?f.record.components:m.components,path:w,aliasOf:f?f.record:m})))}let b,x;for(const y of g){const{path:w}=y;if(h&&w[0]!=="/"){const C=h.record.path,_=C[C.length-1]==="/"?"":"/";y.path=h.record.path+(w&&_+w)}if(b=Q4(y,h,v),f?f.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),p&&d.name&&!hC(b)&&i(d.name)),r$(b)&&l(b),m.children){const C=m.children;for(let _=0;_<C.length;_++)r(C[_],b,f&&f.children[_])}f=f||b}return x?()=>{i(x)}:Bc}function i(d){if(n$(d)){const h=s.get(d);h&&(s.delete(d),n.splice(n.indexOf(h),1),h.children.forEach(i),h.alias.forEach(i))}else{const h=n.indexOf(d);h>-1&&(n.splice(h,1),d.record.name&&s.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return n}function l(d){const h=eV(d,n);n.splice(h,0,d),d.record.name&&!hC(d)&&s.set(d.record.name,d)}function c(d,h){let f,p={},m,v;if("name"in d&&d.name){if(f=s.get(d.name),!f)throw xl(1,{location:d});v=f.record.name,p=pt(uC(h.params,f.keys.filter(x=>!x.optional).concat(f.parent?f.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&uC(d.params,f.keys.map(x=>x.name))),m=f.stringify(p)}else if(d.path!=null)m=d.path,f=n.find(x=>x.re.test(m)),f&&(p=f.parse(m),v=f.record.name);else{if(f=h.name?s.get(h.name):n.find(x=>x.re.test(h.path)),!f)throw xl(1,{location:d,currentLocation:h});v=f.record.name,p=pt({},h.params,d.params),m=f.stringify(p)}const g=[];let b=f;for(;b;)g.unshift(b.record),b=b.parent;return{name:v,path:m,params:p,matched:g,meta:Z4(g)}}t.forEach(d=>r(d));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:o}}function uC(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function dC(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:J4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function J4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function hC(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Z4(t){return t.reduce((e,n)=>pt(e,n.meta),{})}function fC(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function eV(t,e){let n=0,s=e.length;for(;n!==s;){const r=n+s>>1;o$(t,e[r])<0?s=r:n=r+1}const o=tV(t);return o&&(s=e.lastIndexOf(o,s-1)),s}function tV(t){let e=t;for(;e=e.parent;)if(r$(e)&&o$(t,e)===0)return e}function r$({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function nV(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(Xk," "),i=r.indexOf("="),a=Zc(i<0?r:r.slice(0,i)),l=i<0?null:Zc(r.slice(i+1));if(a in e){let c=e[a];uo(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function pC(t){let e="";for(let n in t){const s=t[n];if(n=C4(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(uo(s)?s.map(r=>r&&Gv(r)):[s&&Gv(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function sV(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=uo(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return e}const oV=Symbol(""),mC=Symbol(""),Iy=Symbol(""),Ey=Symbol(""),Kv=Symbol("");function mc(){let t=[];function e(s){return t.push(s),()=>{const o=t.indexOf(s);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ar(t,e,n,s,o,r=i=>i()){const i=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(xl(4,{from:n,to:e})):h instanceof Error?l(h):j4(h)?l(xl(2,{from:e,to:h})):(i&&s.enterCallbacks[o]===i&&typeof h=="function"&&i.push(h),a())},u=r(()=>t.call(s&&s.instances[o],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Eg(t,e,n,s,o=r=>r()){const r=[];for(const i of t)for(const a in i.components){let l=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(Kk(l)){const u=(l.__vccOpts||l)[e];u&&r.push(Ar(u,n,s,i,a,o))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const d=d4(u)?u.default:u;i.mods[a]=u,i.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Ar(f,n,s,i,a,o)()}))}}return r}function gC(t){const e=On(Iy),n=On(Ey),s=et(()=>{const l=je(t.to);return e.resolve(l)}),o=et(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const h=d.findIndex(yl.bind(null,u));if(h>-1)return h;const f=vC(l[c-2]);return c>1&&vC(u)===f&&d[d.length-1].path!==f?d.findIndex(yl.bind(null,l[c-2])):h}),r=et(()=>o.value>-1&&lV(n.params,s.value.params)),i=et(()=>o.value>-1&&o.value===n.matched.length-1&&Zk(n.params,s.value.params));function a(l={}){return aV(l)?e[je(t.replace)?"replace":"push"](je(t.to)).catch(Bc):Promise.resolve()}return{route:s,href:et(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const rV=fn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gC,setup(t,{slots:e}){const n=Go(gC(t)),{options:s}=On(Iy),o=et(()=>({[bC(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[bC(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Gt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),iV=rV;function aV(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function lV(t,e){for(const n in e){const s=e[n],o=t[n];if(typeof s=="string"){if(s!==o)return!1}else if(!uo(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function vC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const bC=(t,e,n)=>t??e??n,cV=fn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=On(Kv),o=et(()=>t.route||s.value),r=On(mC,0),i=et(()=>{let c=je(r);const{matched:u}=o.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=et(()=>o.value.matched[i.value]);Hi(mC,et(()=>i.value+1)),Hi(oV,a),Hi(Kv,o);const l=Ot();return ls(()=>[l.value,a.value,t.name],([c,u,d],[h,f,p])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!yl(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=o.value,u=t.name,d=a.value,h=d&&d.components[u];if(!h)return yC(n.default,{Component:h,route:c});const f=d.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,v=Gt(h,pt({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return yC(n.default,{Component:v,route:c})||v}}});function yC(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const i$=cV;function uV(t){const e=Y4(t.routes,t),n=t.parseQuery||nV,s=t.stringifyQuery||pC,o=t.history,r=mc(),i=mc(),a=mc(),l=cr(Ys);let c=Ys;Wa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Sg.bind(null,q=>""+q),d=Sg.bind(null,S4),h=Sg.bind(null,Zc);function f(q,ue){let ce,pe;return n$(q)?(ce=e.getRecordMatcher(q),pe=ue):pe=q,e.addRoute(pe,ce)}function p(q){const ue=e.getRecordMatcher(q);ue&&e.removeRoute(ue)}function m(){return e.getRoutes().map(q=>q.record)}function v(q){return!!e.getRecordMatcher(q)}function g(q,ue){if(ue=pt({},ue||l.value),typeof q=="string"){const L=Ig(n,q,ue.path),K=e.resolve({path:L.path},ue),oe=o.createHref(L.fullPath);return pt(L,K,{params:h(K.params),hash:Zc(L.hash),redirectedFrom:void 0,href:oe})}let ce;if(q.path!=null)ce=pt({},q,{path:Ig(n,q.path,ue.path).path});else{const L=pt({},q.params);for(const K in L)L[K]==null&&delete L[K];ce=pt({},q,{params:d(L)}),ue.params=d(ue.params)}const pe=e.resolve(ce,ue),Se=q.hash||"";pe.params=u(h(pe.params));const De=k4(s,pt({},q,{hash:w4(Se),path:pe.path})),N=o.createHref(De);return pt({fullPath:De,hash:Se,query:s===pC?sV(q.query):q.query||{}},pe,{redirectedFrom:void 0,href:N})}function b(q){return typeof q=="string"?Ig(n,q,l.value.path):pt({},q)}function x(q,ue){if(c!==q)return xl(8,{from:ue,to:q})}function y(q){return _(q)}function w(q){return y(pt(b(q),{replace:!0}))}function C(q){const ue=q.matched[q.matched.length-1];if(ue&&ue.redirect){const{redirect:ce}=ue;let pe=typeof ce=="function"?ce(q):ce;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),pt({query:q.query,hash:q.hash,params:pe.path!=null?{}:q.params},pe)}}function _(q,ue){const ce=c=g(q),pe=l.value,Se=q.state,De=q.force,N=q.replace===!0,L=C(ce);if(L)return _(pt(b(L),{state:typeof L=="object"?pt({},Se,L.state):Se,force:De,replace:N}),ue||ce);const K=ce;K.redirectedFrom=ue;let oe;return!De&&$4(s,pe,ce)&&(oe=xl(16,{to:K,from:pe}),re(pe,pe,!0,!1)),(oe?Promise.resolve(oe):E(K,pe)).catch(se=>Xo(se)?Xo(se,2)?se:ne(se):D(se,K,pe)).then(se=>{if(se){if(Xo(se,2))return _(pt({replace:N},b(se.to),{state:typeof se.to=="object"?pt({},Se,se.to.state):Se,force:De}),ue||K)}else se=A(K,pe,!0,N,Se);return O(K,pe,se),se})}function S(q,ue){const ce=x(q,ue);return ce?Promise.reject(ce):Promise.resolve()}function I(q){const ue=ye.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(q):q()}function E(q,ue){let ce;const[pe,Se,De]=dV(q,ue);ce=Eg(pe.reverse(),"beforeRouteLeave",q,ue);for(const L of pe)L.leaveGuards.forEach(K=>{ce.push(Ar(K,q,ue))});const N=S.bind(null,q,ue);return ce.push(N),ge(ce).then(()=>{ce=[];for(const L of r.list())ce.push(Ar(L,q,ue));return ce.push(N),ge(ce)}).then(()=>{ce=Eg(Se,"beforeRouteUpdate",q,ue);for(const L of Se)L.updateGuards.forEach(K=>{ce.push(Ar(K,q,ue))});return ce.push(N),ge(ce)}).then(()=>{ce=[];for(const L of De)if(L.beforeEnter)if(uo(L.beforeEnter))for(const K of L.beforeEnter)ce.push(Ar(K,q,ue));else ce.push(Ar(L.beforeEnter,q,ue));return ce.push(N),ge(ce)}).then(()=>(q.matched.forEach(L=>L.enterCallbacks={}),ce=Eg(De,"beforeRouteEnter",q,ue,I),ce.push(N),ge(ce))).then(()=>{ce=[];for(const L of i.list())ce.push(Ar(L,q,ue));return ce.push(N),ge(ce)}).catch(L=>Xo(L,8)?L:Promise.reject(L))}function O(q,ue,ce){a.list().forEach(pe=>I(()=>pe(q,ue,ce)))}function A(q,ue,ce,pe,Se){const De=x(q,ue);if(De)return De;const N=ue===Ys,L=Wa?history.state:{};ce&&(pe||N?o.replace(q.fullPath,pt({scroll:N&&L&&L.scroll},Se)):o.push(q.fullPath,Se)),l.value=q,re(q,ue,ce,N),ne()}let P;function z(){P||(P=o.listen((q,ue,ce)=>{if(!fe.listening)return;const pe=g(q),Se=C(pe);if(Se){_(pt(Se,{replace:!0}),pe).catch(Bc);return}c=pe;const De=l.value;Wa&&F4(rC(De.fullPath,ce.delta),fp()),E(pe,De).catch(N=>Xo(N,12)?N:Xo(N,2)?(_(N.to,pe).then(L=>{Xo(L,20)&&!ce.delta&&ce.type===eu.pop&&o.go(-1,!1)}).catch(Bc),Promise.reject()):(ce.delta&&o.go(-ce.delta,!1),D(N,pe,De))).then(N=>{N=N||A(pe,De,!1),N&&(ce.delta&&!Xo(N,8)?o.go(-ce.delta,!1):ce.type===eu.pop&&Xo(N,20)&&o.go(-1,!1)),O(pe,De,N)}).catch(Bc)}))}let G=mc(),M=mc(),R;function D(q,ue,ce){ne(q);const pe=M.list();return pe.length?pe.forEach(Se=>Se(q,ue,ce)):console.error(q),Promise.reject(q)}function j(){return R&&l.value!==Ys?Promise.resolve():new Promise((q,ue)=>{G.add([q,ue])})}function ne(q){return R||(R=!q,z(),G.list().forEach(([ue,ce])=>q?ce(q):ue()),G.reset()),q}function re(q,ue,ce,pe){const{scrollBehavior:Se}=t;if(!Wa||!Se)return Promise.resolve();const De=!ce&&P4(rC(q.fullPath,0))||(pe||!ce)&&history.state&&history.state.scroll||null;return Wl().then(()=>Se(q,ue,De)).then(N=>N&&L4(N)).catch(N=>D(N,q,ue))}const de=q=>o.go(q);let he;const ye=new Set,fe={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:m,resolve:g,options:t,push:y,replace:w,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:M.add,isReady:j,install(q){const ue=this;q.component("RouterLink",iV),q.component("RouterView",i$),q.config.globalProperties.$router=ue,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>je(l)}),Wa&&!he&&l.value===Ys&&(he=!0,y(o.location).catch(Se=>{}));const ce={};for(const Se in Ys)Object.defineProperty(ce,Se,{get:()=>l.value[Se],enumerable:!0});q.provide(Iy,ue),q.provide(Ey,nr(ce)),q.provide(Kv,l);const pe=q.unmount;ye.add(q),q.unmount=function(){ye.delete(q),ye.size<1&&(c=Ys,P&&P(),P=null,l.value=Ys,he=!1,R=!1),pe()}}};function ge(q){return q.reduce((ue,ce)=>ue.then(()=>I(ce)),Promise.resolve())}return fe}function dV(t,e){const n=[],s=[],o=[],r=Math.max(e.matched.length,t.matched.length);for(let i=0;i<r;i++){const a=e.matched[i];a&&(t.matched.find(c=>yl(c,a))?s.push(a):n.push(a));const l=t.matched[i];l&&(e.matched.find(c=>yl(c,l))||o.push(l))}return[n,s,o]}function hV(t){return On(Ey)}const fV=(t,e)=>e.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var s;return((s=t.params[n.slice(1)])==null?void 0:s.toString())||""}),qv=(t,e)=>{const n=t.route.matched.find(o=>{var r;return((r=o.components)==null?void 0:r.default)===t.Component.type}),s=e??(n==null?void 0:n.meta.key)??(n&&fV(t.route,n));return typeof s=="function"?s(t.route):s},pV=(t,e)=>({default:()=>t?Gt(LF,t===!0?{}:t,e):e});function ky(t){return Array.isArray(t)?t:[t]}const mV="modulepreload",gV=function(t,e){return new URL(t,e).href},xC={},Ec=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=gV(c,s),c in xC)return;xC[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!s)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===c&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":mV,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},vV={alias:["/en","/en.html"]},kg=[{name:"en-US",path:"/en-US",meta:vV||{},alias:["/en","/en.html"],component:()=>Ec(()=>import("./Bon4satk.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)},{name:"en-US-military",path:"/en-US/military",component:()=>Ec(()=>import("./DWpBI8ub.js"),__vite__mapDeps([5,6,2,3,7]),import.meta.url)},{name:"index",path:"/",component:()=>Ec(()=>import("./Ko1YpBAy.js"),__vite__mapDeps([8,1,2,3,4]),import.meta.url)},{name:"military",path:"/military",component:()=>Ec(()=>import("./atgQSiXo.js"),__vite__mapDeps([9,6,2,3,7]),import.meta.url)}],a$=(t,e,n)=>(e=e===!0?{}:e,{default:()=>{var s;return e?Gt(t,e,n):(s=n.default)==null?void 0:s.call(n)}});function wC(t){const e=(t==null?void 0:t.meta.key)??t.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,n=>{var s;return((s=t.params[n.slice(1)])==null?void 0:s.toString())||""});return typeof e=="function"?e(t):e}function bV(t,e){return t===e||e===Ys?!1:wC(t)!==wC(e)?!0:!t.matched.every((s,o)=>{var r,i;return s.components&&s.components.default===((i=(r=e.matched[o])==null?void 0:r.components)==null?void 0:i.default)})}function $g(t,e=!1){if(t){if(t.nodeName==="#comment"&&t.nodeValue==="[")return l$(t,[],e);if(e){const n=t.cloneNode(!0);return n.querySelectorAll("[data-island-slot]").forEach(s=>{s.innerHTML=""}),[n.outerHTML]}return[t.outerHTML]}return null}function l$(t,e=[],n=!1){if(t&&t.nodeName){if(xV(t))return e;if(!yV(t)){const s=t.cloneNode(!0);n&&s.querySelectorAll("[data-island-slot]").forEach(o=>{o.innerHTML=""}),e.push(s.outerHTML)}l$(t.nextSibling,e,n)}return e}function yV(t){return t.nodeName==="#comment"&&t.nodeValue==="["}function xV(t){return t.nodeName==="#comment"&&t.nodeValue==="]"}const wV={scrollBehavior(t,e,n){var c;const s=Ct(),o=((c=Fn().options)==null?void 0:c.scrollBehaviorType)??"auto";let r=n||void 0;const i=typeof t.meta.scrollToTop=="function"?t.meta.scrollToTop(t,e):t.meta.scrollToTop;if(!r&&e&&t&&i!==!1&&bV(t,e)&&(r={left:0,top:0}),t.path===e.path)return e.hash&&!t.hash?{left:0,top:0}:t.hash?{el:t.hash,top:CC(t.hash),behavior:o}:!1;const a=u=>!!(u.meta.pageTransition??Ov),l=a(e)&&a(t)?"page:transition:finish":"page:finish";return new Promise(u=>{s.hooks.hookOnce(l,async()=>{await new Promise(d=>setTimeout(d,0)),t.hash&&(r={el:t.hash,top:CC(t.hash),behavior:o}),u(r)})})}};function CC(t){try{const e=document.querySelector(t);if(e)return(Number.parseFloat(getComputedStyle(e).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const CV={hashMode:!1,scrollBehaviorType:"auto"},ks={...CV,...wV},_V=async t=>{var l;let e,n;if(!((l=t.meta)!=null&&l.validate))return;const s=Ct(),o=Fn(),r=([e,n]=dl(()=>Promise.resolve(t.meta.validate(t))),e=await e,n(),e);if(r===!0)return;const i=ku({statusCode:r&&r.statusCode||404,statusMessage:r&&r.statusMessage||`Page Not Found: ${t.fullPath}`,data:{path:t.fullPath}}),a=o.beforeResolve(c=>{if(a(),c===t){const u=o.afterEach(async()=>{u(),await s.runWithContext(()=>el(i)),window==null||window.history.pushState({},"",t.fullPath)});return!1}})},SV=async t=>{let e,n;const s=([e,n]=dl(()=>_y(t.path)),e=await e,n(),e);if(s.redirect)return vr(s.redirect,{acceptRelative:!0})?(window.location.href=s.redirect,!1):s.redirect},IV=[_V,SV],Uc={};function EV(t,e,n){const{pathname:s,search:o,hash:r}=e,i=t.indexOf("#");if(i>-1){const c=r.includes(t.slice(i))?t.slice(i).length:1;let u=r.slice(c);return u[0]!=="/"&&(u="/"+u),Mw(u,"")}const a=Mw(s,t),l=!n||zM(a,n,{trailingSlash:!0})?a:n;return l+(l.includes("?")?"":o)+r}const kV=mo({name:"nuxt:router",enforce:"pre",async setup(t){var v;let e,n,s=ri().app.baseURL;ks.hashMode&&!s.includes("#")&&(s+="#");const o=((v=ks.history)==null?void 0:v.call(ks,s))??(ks.hashMode?U4(s):t$(s)),r=ks.routes?([e,n]=dl(()=>ks.routes(kg)),e=await e,n(),e??kg):kg;let i;const a=uV({...ks,scrollBehavior:(g,b,x)=>{if(b===Ys){i=x;return}if(ks.scrollBehavior){if(a.options.scrollBehavior=ks.scrollBehavior,"scrollRestoration"in window.history){const y=a.beforeEach(()=>{y(),window.history.scrollRestoration="manual"})}return ks.scrollBehavior(g,Ys,i||x)}},history:o,routes:r});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),t.vueApp.use(a);const l=cr(a.currentRoute.value);a.afterEach((g,b)=>{l.value=b}),Object.defineProperty(t.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const c=EV(s,window.location,t.payload.path),u=cr(a.currentRoute.value),d=()=>{u.value=a.currentRoute.value};t.hook("page:finish",d),a.afterEach((g,b)=>{var x,y,w,C;((y=(x=g.matched[0])==null?void 0:x.components)==null?void 0:y.default)===((C=(w=b.matched[0])==null?void 0:w.components)==null?void 0:C.default)&&d()});const h={};for(const g in u.value)Object.defineProperty(h,g,{get:()=>u.value[g],enumerable:!0});t._route=nr(h),t._middleware=t._middleware||{global:[],named:{}};const f=dp();a.afterEach(async(g,b,x)=>{delete t._processingMiddleware,!t.isHydrating&&f.value&&await t.runWithContext(iB),x&&await t.callHook("page:loading:end"),g.matched.length===0&&await t.runWithContext(()=>el(Pv({statusCode:404,fatal:!1,statusMessage:`Page not found: ${g.fullPath}`,data:{path:g.fullPath}})))});try{[e,n]=dl(()=>a.isReady()),await e,n()}catch(g){[e,n]=dl(()=>t.runWithContext(()=>el(g))),await e,n()}const p=c!==a.currentRoute.value.fullPath?a.resolve(c):a.currentRoute.value;d();const m=t.payload.state._layout;return a.beforeEach(async(g,b)=>{var x;await t.callHook("page:loading:start"),g.meta=Go(g.meta),t.isHydrating&&m&&!Hr(g.meta.layout)&&(g.meta.layout=m),t._processingMiddleware=!0;{const y=new Set([...IV,...t._middleware.global]);for(const w of g.matched){const C=w.meta.middleware;if(C)for(const _ of ky(C))y.add(_)}{const w=await t.runWithContext(()=>_y(g.path));if(w.appMiddleware)for(const C in w.appMiddleware)w.appMiddleware[C]?y.add(C):y.delete(C)}for(const w of y){const C=typeof w=="string"?t._middleware.named[w]||await((x=Uc[w])==null?void 0:x.call(Uc).then(S=>S.default||S)):w;if(!C)throw new Error(`Unknown route middleware: '${w}'.`);const _=await t.runWithContext(()=>C(g,b));if(!t.payload.serverRendered&&t.isHydrating&&(_===!1||_ instanceof Error)){const S=_||Pv({statusCode:404,statusMessage:`Page Not Found: ${c}`});return await t.runWithContext(()=>el(S)),!1}if(_!==!0&&(_||_===!1))return _}}}),a.onError(async()=>{delete t._processingMiddleware,await t.callHook("page:loading:end")}),t.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await a.replace({...p,force:!0}),a.options.scrollBehavior=ks.scrollBehavior}catch(g){await t.runWithContext(()=>el(g))}}),{provide:{router:a}}}}),Xv=globalThis.requestIdleCallback||(t=>{const e=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{t(n)},1)}),$V=globalThis.cancelIdleCallback||(t=>{clearTimeout(t)}),pp=t=>{const e=Ct();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Xv(()=>t())}):Xv(()=>t())},TV=mo({name:"nuxt:payload",setup(t){Fn().beforeResolve(async(e,n)=>{if(e.path===n.path)return;const s=await tC(e.path);s&&Object.assign(t.static.data,s.data)}),pp(()=>{var e;t.hooks.hook("link:prefetch",async n=>{const{hostname:s}=new URL(n,window.location.href);s===window.location.hostname&&await tC(n)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(hp,1e3)})}}),NV=mo(()=>{const t=Fn();pp(()=>{t.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),AV=mo(t=>{let e;async function n(){const s=await hp();e&&clearTimeout(e),e=setTimeout(n,zw);try{const o=await $fetch(wy("builds/latest.json")+`?${Date.now()}`);o.id!==s.id&&t.hooks.callHook("app:manifest:update",o)}catch{}}pp(()=>{e=setTimeout(n,zw)})});function RV(t={}){const e=t.path||window.location.pathname;let n={};try{n=tf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(t.force||(n==null?void 0:n.path)!==e||(n==null?void 0:n.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(t.ttl??1e4)}))}catch{}if(t.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Ct().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const DV=mo({name:"nuxt:chunk-reload",setup(t){const e=Fn(),n=ri(),s=new Set;e.beforeEach(()=>{s.clear()}),t.hook("app:chunkError",({error:r})=>{s.add(r)});function o(r){const a="href"in r&&r.href[0]==="#"?n.app.baseURL+r.href:up(n.app.baseURL,r.fullPath);RV({path:a,persistState:!0})}t.hook("app:manifest:update",()=>{e.beforeResolve(o)}),e.onError((r,i)=>{s.has(r)&&o(i)})}}),OV=mo({name:"nuxt:global-components"}),Dr={default:()=>Ec(()=>import("./DNdfntrP.js"),[],import.meta.url)},LV=mo({name:"nuxt:prefetch",setup(t){const e=Fn();t.hooks.hook("app:mounted",()=>{e.beforeEach(async n=>{var o;const s=(o=n==null?void 0:n.meta)==null?void 0:o.layout;s&&typeof Dr[s]=="function"&&await Dr[s]()})}),t.hooks.hook("link:prefetch",n=>{if(vr(n))return;const s=e.resolve(n);if(!s)return;const o=s.meta.layout;let r=ky(s.meta.middleware);r=r.filter(i=>typeof i=="string");for(const i of r)typeof Uc[i]=="function"&&Uc[i]();o&&typeof Dr[o]=="function"&&Dr[o]()})}});var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}function u$(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&u$(n)}),t}class _C{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function d$(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Or(t,...e){const n=Object.create(null);for(const s in t)n[s]=t[s];return e.forEach(function(s){for(const o in s)n[o]=s[o]}),n}const PV="</span>",SC=t=>!!t.scope,MV=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((s,o)=>`${s}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class BV{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=d$(e)}openNode(e){if(!SC(e))return;const n=MV(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){SC(e)&&(this.buffer+=PV)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const IC=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class $y{constructor(){this.rootNode=IC(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=IC({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(s=>this._walk(e,s)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{$y._collapse(n)}))}}class VV extends $y{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const s=e.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new BV(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function tu(t){return t?typeof t=="string"?t:t.source:null}function h$(t){return xa("(?=",t,")")}function UV(t){return xa("(?:",t,")*")}function jV(t){return xa("(?:",t,")?")}function xa(...t){return t.map(n=>tu(n)).join("")}function zV(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Ty(...t){return"("+(zV(t).capture?"":"?:")+t.map(s=>tu(s)).join("|")+")"}function f$(t){return new RegExp(t.toString()+"|").exec("").length-1}function WV(t,e){const n=t&&t.exec(e);return n&&n.index===0}const GV=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Ny(t,{joinWith:e}){let n=0;return t.map(s=>{n+=1;const o=n;let r=tu(s),i="";for(;r.length>0;){const a=GV.exec(r);if(!a){i+=r;break}i+=r.substring(0,a.index),r=r.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?i+="\\"+String(Number(a[1])+o):(i+=a[0],a[0]==="("&&n++)}return i}).map(s=>`(${s})`).join(e)}const HV=/\b\B/,p$="[a-zA-Z]\\w*",Ay="[a-zA-Z_]\\w*",m$="\\b\\d+(\\.\\d+)?",g$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",v$="\\b(0b[01]+)",KV="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",qV=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=xa(e,/.*\b/,t.binary,/\b.*/)),Or({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},t)},nu={begin:"\\\\[\\s\\S]",relevance:0},XV={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[nu]},QV={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[nu]},YV={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},mp=function(t,e,n={}){const s=Or({scope:"comment",begin:t,end:e,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Ty("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:xa(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},JV=mp("//","$"),ZV=mp("/\\*","\\*/"),eU=mp("#","$"),tU={scope:"number",begin:m$,relevance:0},nU={scope:"number",begin:g$,relevance:0},sU={scope:"number",begin:v$,relevance:0},oU={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[nu,{begin:/\[/,end:/\]/,relevance:0,contains:[nu]}]},rU={scope:"title",begin:p$,relevance:0},iU={scope:"title",begin:Ay,relevance:0},aU={begin:"\\.\\s*"+Ay,relevance:0},lU=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var lh=Object.freeze({__proto__:null,APOS_STRING_MODE:XV,BACKSLASH_ESCAPE:nu,BINARY_NUMBER_MODE:sU,BINARY_NUMBER_RE:v$,COMMENT:mp,C_BLOCK_COMMENT_MODE:ZV,C_LINE_COMMENT_MODE:JV,C_NUMBER_MODE:nU,C_NUMBER_RE:g$,END_SAME_AS_BEGIN:lU,HASH_COMMENT_MODE:eU,IDENT_RE:p$,MATCH_NOTHING_RE:HV,METHOD_GUARD:aU,NUMBER_MODE:tU,NUMBER_RE:m$,PHRASAL_WORDS_MODE:YV,QUOTE_STRING_MODE:QV,REGEXP_MODE:oU,RE_STARTERS_RE:KV,SHEBANG:qV,TITLE_MODE:rU,UNDERSCORE_IDENT_RE:Ay,UNDERSCORE_TITLE_MODE:iU});function cU(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function uU(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function dU(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=cU,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function hU(t,e){Array.isArray(t.illegal)&&(t.illegal=Ty(...t.illegal))}function fU(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function pU(t,e){t.relevance===void 0&&(t.relevance=1)}const mU=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(s=>{delete t[s]}),t.keywords=n.keywords,t.begin=xa(n.beforeMatch,h$(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},gU=["of","and","for","in","not","or","if","then","parent","list","value"],vU="keyword";function b$(t,e,n=vU){const s=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(s,b$(t[r],e,r))}),s;function o(r,i){e&&(i=i.map(a=>a.toLowerCase())),i.forEach(function(a){const l=a.split("|");s[l[0]]=[r,bU(l[0],l[1])]})}}function bU(t,e){return e?Number(e):yU(t)?0:1}function yU(t){return gU.includes(t.toLowerCase())}const EC={},Ki=t=>{console.error(t)},kC=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Pa=(t,e)=>{EC[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),EC[`${t}/${e}`]=!0)},uf=new Error;function y$(t,e,{key:n}){let s=0;const o=t[n],r={},i={};for(let a=1;a<=e.length;a++)i[a+s]=o[a],r[a+s]=!0,s+=f$(e[a-1]);t[n]=i,t[n]._emit=r,t[n]._multi=!0}function xU(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Ki("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),uf;if(typeof t.beginScope!="object"||t.beginScope===null)throw Ki("beginScope must be object"),uf;y$(t,t.begin,{key:"beginScope"}),t.begin=Ny(t.begin,{joinWith:""})}}function wU(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Ki("skip, excludeEnd, returnEnd not compatible with endScope: {}"),uf;if(typeof t.endScope!="object"||t.endScope===null)throw Ki("endScope must be object"),uf;y$(t,t.end,{key:"endScope"}),t.end=Ny(t.end,{joinWith:""})}}function CU(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function _U(t){CU(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),xU(t),wU(t)}function SU(t){function e(i,a){return new RegExp(tu(i),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=f$(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=e(Ny(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const c=l.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(a);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(a)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function o(i){const a=new s;return i.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),i.terminatorEnd&&a.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&a.addRule(i.illegal,{type:"illegal"}),a}function r(i,a){const l=i;if(i.isCompiled)return l;[uU,fU,_U,mU].forEach(u=>u(i,a)),t.compilerExtensions.forEach(u=>u(i,a)),i.__beforeBegin=null,[dU,hU,pU].forEach(u=>u(i,a)),i.isCompiled=!0;let c=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),c=i.keywords.$pattern,delete i.keywords.$pattern),c=c||/\w+/,i.keywords&&(i.keywords=b$(i.keywords,t.case_insensitive)),l.keywordPatternRe=e(c,!0),a&&(i.begin||(i.begin=/\B|\b/),l.beginRe=e(l.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(l.endRe=e(l.end)),l.terminatorEnd=tu(l.end)||"",i.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(i.end?"|":"")+a.terminatorEnd)),i.illegal&&(l.illegalRe=e(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return IU(u==="self"?i:u)})),i.contains.forEach(function(u){r(u,l)}),i.starts&&r(i.starts,a),l.matcher=o(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Or(t.classNameAliases||{}),r(t)}function x$(t){return t?t.endsWithParent||x$(t.starts):!1}function IU(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Or(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:x$(t)?Or(t,{starts:t.starts?Or(t.starts):null}):Object.isFrozen(t)?Or(t):t}var EU="11.10.0";class kU extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const Tg=d$,$C=Or,TC=Symbol("nomatch"),$U=7,w$=function(t){const e=Object.create(null),n=Object.create(null),s=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:VV};function l(R){return a.noHighlightRe.test(R)}function c(R){let D=R.className+" ";D+=R.parentNode?R.parentNode.className:"";const j=a.languageDetectRe.exec(D);if(j){const ne=I(j[1]);return ne||(kC(r.replace("{}",j[1])),kC("Falling back to no-highlight mode for this block.",R)),ne?j[1]:"no-highlight"}return D.split(/\s+/).find(ne=>l(ne)||I(ne))}function u(R,D,j){let ne="",re="";typeof D=="object"?(ne=R,j=D.ignoreIllegals,re=D.language):(Pa("10.7.0","highlight(lang, code, ...args) has been deprecated."),Pa("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),re=R,ne=D),j===void 0&&(j=!0);const de={code:ne,language:re};G("before:highlight",de);const he=de.result?de.result:d(de.language,de.code,j);return he.code=de.code,G("after:highlight",he),he}function d(R,D,j,ne){const re=Object.create(null);function de(ie,be){return ie.keywords[be]}function he(){if(!T.keywords){Y.addText(ee);return}let ie=0;T.keywordPatternRe.lastIndex=0;let be=T.keywordPatternRe.exec(ee),Ee="";for(;be;){Ee+=ee.substring(ie,be.index);const Pe=oe.case_insensitive?be[0].toLowerCase():be[0],Ye=de(T,Pe);if(Ye){const[At,qt]=Ye;if(Y.addText(Ee),Ee="",re[Pe]=(re[Pe]||0)+1,re[Pe]<=$U&&(ve+=qt),At.startsWith("_"))Ee+=be[0];else{const Ko=oe.classNameAliases[At]||At;ge(be[0],Ko)}}else Ee+=be[0];ie=T.keywordPatternRe.lastIndex,be=T.keywordPatternRe.exec(ee)}Ee+=ee.substring(ie),Y.addText(Ee)}function ye(){if(ee==="")return;let ie=null;if(typeof T.subLanguage=="string"){if(!e[T.subLanguage]){Y.addText(ee);return}ie=d(T.subLanguage,ee,!0,U[T.subLanguage]),U[T.subLanguage]=ie._top}else ie=f(ee,T.subLanguage.length?T.subLanguage:null);T.relevance>0&&(ve+=ie.relevance),Y.__addSublanguage(ie._emitter,ie.language)}function fe(){T.subLanguage!=null?ye():he(),ee=""}function ge(ie,be){ie!==""&&(Y.startScope(be),Y.addText(ie),Y.endScope())}function q(ie,be){let Ee=1;const Pe=be.length-1;for(;Ee<=Pe;){if(!ie._emit[Ee]){Ee++;continue}const Ye=oe.classNameAliases[ie[Ee]]||ie[Ee],At=be[Ee];Ye?ge(At,Ye):(ee=At,he(),ee=""),Ee++}}function ue(ie,be){return ie.scope&&typeof ie.scope=="string"&&Y.openNode(oe.classNameAliases[ie.scope]||ie.scope),ie.beginScope&&(ie.beginScope._wrap?(ge(ee,oe.classNameAliases[ie.beginScope._wrap]||ie.beginScope._wrap),ee=""):ie.beginScope._multi&&(q(ie.beginScope,be),ee="")),T=Object.create(ie,{parent:{value:T}}),T}function ce(ie,be,Ee){let Pe=WV(ie.endRe,Ee);if(Pe){if(ie["on:end"]){const Ye=new _C(ie);ie["on:end"](be,Ye),Ye.isMatchIgnored&&(Pe=!1)}if(Pe){for(;ie.endsParent&&ie.parent;)ie=ie.parent;return ie}}if(ie.endsWithParent)return ce(ie.parent,be,Ee)}function pe(ie){return T.matcher.regexIndex===0?(ee+=ie[0],1):(Ce=!0,0)}function Se(ie){const be=ie[0],Ee=ie.rule,Pe=new _C(Ee),Ye=[Ee.__beforeBegin,Ee["on:begin"]];for(const At of Ye)if(At&&(At(ie,Pe),Pe.isMatchIgnored))return pe(be);return Ee.skip?ee+=be:(Ee.excludeBegin&&(ee+=be),fe(),!Ee.returnBegin&&!Ee.excludeBegin&&(ee=be)),ue(Ee,ie),Ee.returnBegin?0:be.length}function De(ie){const be=ie[0],Ee=D.substring(ie.index),Pe=ce(T,ie,Ee);if(!Pe)return TC;const Ye=T;T.endScope&&T.endScope._wrap?(fe(),ge(be,T.endScope._wrap)):T.endScope&&T.endScope._multi?(fe(),q(T.endScope,ie)):Ye.skip?ee+=be:(Ye.returnEnd||Ye.excludeEnd||(ee+=be),fe(),Ye.excludeEnd&&(ee=be));do T.scope&&Y.closeNode(),!T.skip&&!T.subLanguage&&(ve+=T.relevance),T=T.parent;while(T!==Pe.parent);return Pe.starts&&ue(Pe.starts,ie),Ye.returnEnd?0:be.length}function N(){const ie=[];for(let be=T;be!==oe;be=be.parent)be.scope&&ie.unshift(be.scope);ie.forEach(be=>Y.openNode(be))}let L={};function K(ie,be){const Ee=be&&be[0];if(ee+=ie,Ee==null)return fe(),0;if(L.type==="begin"&&be.type==="end"&&L.index===be.index&&Ee===""){if(ee+=D.slice(be.index,be.index+1),!o){const Pe=new Error(`0 width match regex (${R})`);throw Pe.languageName=R,Pe.badRule=L.rule,Pe}return 1}if(L=be,be.type==="begin")return Se(be);if(be.type==="illegal"&&!j){const Pe=new Error('Illegal lexeme "'+Ee+'" for mode "'+(T.scope||"<unnamed>")+'"');throw Pe.mode=T,Pe}else if(be.type==="end"){const Pe=De(be);if(Pe!==TC)return Pe}if(be.type==="illegal"&&Ee==="")return 1;if(Z>1e5&&Z>be.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ee+=Ee,Ee.length}const oe=I(R);if(!oe)throw Ki(r.replace("{}",R)),new Error('Unknown language: "'+R+'"');const se=SU(oe);let k="",T=ne||se;const U={},Y=new a.__emitter(a);N();let ee="",ve=0,B=0,Z=0,Ce=!1;try{if(oe.__emitTokens)oe.__emitTokens(D,Y);else{for(T.matcher.considerAll();;){Z++,Ce?Ce=!1:T.matcher.considerAll(),T.matcher.lastIndex=B;const ie=T.matcher.exec(D);if(!ie)break;const be=D.substring(B,ie.index),Ee=K(be,ie);B=ie.index+Ee}K(D.substring(B))}return Y.finalize(),k=Y.toHTML(),{language:R,value:k,relevance:ve,illegal:!1,_emitter:Y,_top:T}}catch(ie){if(ie.message&&ie.message.includes("Illegal"))return{language:R,value:Tg(D),illegal:!0,relevance:0,_illegalBy:{message:ie.message,index:B,context:D.slice(B-100,B+100),mode:ie.mode,resultSoFar:k},_emitter:Y};if(o)return{language:R,value:Tg(D),illegal:!1,relevance:0,errorRaised:ie,_emitter:Y,_top:T};throw ie}}function h(R){const D={value:Tg(R),illegal:!1,relevance:0,_top:i,_emitter:new a.__emitter(a)};return D._emitter.addText(R),D}function f(R,D){D=D||a.languages||Object.keys(e);const j=h(R),ne=D.filter(I).filter(O).map(fe=>d(fe,R,!1));ne.unshift(j);const re=ne.sort((fe,ge)=>{if(fe.relevance!==ge.relevance)return ge.relevance-fe.relevance;if(fe.language&&ge.language){if(I(fe.language).supersetOf===ge.language)return 1;if(I(ge.language).supersetOf===fe.language)return-1}return 0}),[de,he]=re,ye=de;return ye.secondBest=he,ye}function p(R,D,j){const ne=D&&n[D]||j;R.classList.add("hljs"),R.classList.add(`language-${ne}`)}function m(R){let D=null;const j=c(R);if(l(j))return;if(G("before:highlightElement",{el:R,language:j}),R.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",R);return}if(R.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(R)),a.throwUnescapedHTML))throw new kU("One of your code blocks includes unescaped HTML.",R.innerHTML);D=R;const ne=D.textContent,re=j?u(ne,{language:j,ignoreIllegals:!0}):f(ne);R.innerHTML=re.value,R.dataset.highlighted="yes",p(R,j,re.language),R.result={language:re.language,re:re.relevance,relevance:re.relevance},re.secondBest&&(R.secondBest={language:re.secondBest.language,relevance:re.secondBest.relevance}),G("after:highlightElement",{el:R,result:re,text:ne})}function v(R){a=$C(a,R)}const g=()=>{y(),Pa("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function b(){y(),Pa("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let x=!1;function y(){if(document.readyState==="loading"){x=!0;return}document.querySelectorAll(a.cssSelector).forEach(m)}function w(){x&&y()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",w,!1);function C(R,D){let j=null;try{j=D(t)}catch(ne){if(Ki("Language definition for '{}' could not be registered.".replace("{}",R)),o)Ki(ne);else throw ne;j=i}j.name||(j.name=R),e[R]=j,j.rawDefinition=D.bind(null,t),j.aliases&&E(j.aliases,{languageName:R})}function _(R){delete e[R];for(const D of Object.keys(n))n[D]===R&&delete n[D]}function S(){return Object.keys(e)}function I(R){return R=(R||"").toLowerCase(),e[R]||e[n[R]]}function E(R,{languageName:D}){typeof R=="string"&&(R=[R]),R.forEach(j=>{n[j.toLowerCase()]=D})}function O(R){const D=I(R);return D&&!D.disableAutodetect}function A(R){R["before:highlightBlock"]&&!R["before:highlightElement"]&&(R["before:highlightElement"]=D=>{R["before:highlightBlock"](Object.assign({block:D.el},D))}),R["after:highlightBlock"]&&!R["after:highlightElement"]&&(R["after:highlightElement"]=D=>{R["after:highlightBlock"](Object.assign({block:D.el},D))})}function P(R){A(R),s.push(R)}function z(R){const D=s.indexOf(R);D!==-1&&s.splice(D,1)}function G(R,D){const j=R;s.forEach(function(ne){ne[j]&&ne[j](D)})}function M(R){return Pa("10.7.0","highlightBlock will be removed entirely in v12.0"),Pa("10.7.0","Please use highlightElement now."),m(R)}Object.assign(t,{highlight:u,highlightAuto:f,highlightAll:y,highlightElement:m,highlightBlock:M,configure:v,initHighlighting:g,initHighlightingOnLoad:b,registerLanguage:C,unregisterLanguage:_,listLanguages:S,getLanguage:I,registerAliases:E,autoDetection:O,inherit:$C,addPlugin:P,removePlugin:z}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=EU,t.regex={concat:xa,lookahead:h$,either:Ty,optional:jV,anyNumberOfTimes:UV};for(const R in lh)typeof lh[R]=="object"&&u$(lh[R]);return Object.assign(t,lh),t},wl=w$({});wl.newInstance=()=>w$({});var TU=wl;wl.HighlightJS=wl;wl.default=wl;const Qv=c$(TU),NC="[A-Za-z$_][0-9A-Za-z$_]*",NU=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],AU=["true","false","null","undefined","NaN","Infinity"],C$=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_$=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],S$=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],RU=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],DU=[].concat(S$,C$,_$);function OU(t){const e=t.regex,n=(D,{after:j})=>{const ne="</"+D[0].slice(1);return D.input.indexOf(ne,j)!==-1},s=NC,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(D,j)=>{const ne=D[0].length+D.index,re=D.input[ne];if(re==="<"||re===","){j.ignoreMatch();return}re===">"&&(n(D,{after:ne})||j.ignoreMatch());let de;const he=D.input.substring(ne);if(de=he.match(/^\s*=/)){j.ignoreMatch();return}if((de=he.match(/^\s+extends\s+/))&&de.index===0){j.ignoreMatch();return}}},a={$pattern:NC,keyword:NU,literal:AU,built_in:DU,"variable.language":RU},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},f={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},x=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,m,v,{match:/\$\d+/},d];h.contains=x.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(x)});const y=[].concat(b,h.contains),w=y.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(y)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w},_={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},S={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...C$,..._$]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},E={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},O={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function A(D){return e.concat("(?!",D.join("|"),")")}const P={match:e.concat(/\b/,A([...S$,"super","import"].map(D=>`${D}\\s*\\(`)),s,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},G={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},M="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(M)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:w,CLASS_REFERENCE:S},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,f,p,m,v,b,{match:/\$\d+/},d,S,{className:"attr",begin:s+e.lookahead(":"),relevance:0},R,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:M,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:w}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},E,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},P,O,_,G,{match:/\$[(.]/}]}}Qv.registerLanguage("javascript",OU);const LU=mo(({vueApp:t})=>{t.directive("highlight-js",{deep:!0,beforeMount(e,n){e.querySelectorAll("code").forEach(o=>{n.value&&(o.textContent=n.value),Qv.highlightElement(o)})},updated(e,n){e.querySelectorAll("code").forEach(o=>{n.value&&(o.textContent=n.value,Qv.highlightElement(o))})}})});/*!
  * shared v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const df=typeof window<"u",ii=(t,e=!1)=>e?Symbol.for(t):Symbol(t),FU=(t,e,n)=>PU({l:t,k:e,s:n}),PU=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ln=t=>typeof t=="number"&&isFinite(t),MU=t=>Ry(t)==="[object Date]",Cl=t=>Ry(t)==="[object RegExp]",gp=t=>Je(t)&&Object.keys(t).length===0,hn=Object.assign;let AC;const Pi=()=>AC||(AC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function RC(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const BU=Object.prototype.hasOwnProperty;function hf(t,e){return BU.call(t,e)}const Pt=Array.isArray,$t=t=>typeof t=="function",Ne=t=>typeof t=="string",at=t=>typeof t=="boolean",ut=t=>t!==null&&typeof t=="object",VU=t=>ut(t)&&$t(t.then)&&$t(t.catch),I$=Object.prototype.toString,Ry=t=>I$.call(t),Je=t=>Ry(t)==="[object Object]",UU=t=>t==null?"":Pt(t)||Je(t)&&t.toString===I$?JSON.stringify(t,null,2):String(t);function Dy(t,e=""){return t.reduce((n,s,o)=>o===0?n+s:n+e+s,"")}function jU(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const ch=t=>!ut(t)||Pt(t);function Fh(t,e){if(ch(t)||ch(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:s,des:o}=n.pop();Object.keys(s).forEach(r=>{ut(s[r])&&!ut(o[r])&&(o[r]=Array.isArray(s[r])?[]:{}),ch(o[r])||ch(s[r])?o[r]=s[r]:n.push({src:s[r],des:o[r]})})}}/*!
  * message-compiler v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function zU(t,e,n){return{line:t,column:e,offset:n}}function Yv(t,e,n){return{start:t,end:e}}const mt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},WU=17;function vp(t,e,n={}){const{domain:s,messages:o,args:r}=n,i=t,a=new SyntaxError(String(i));return a.code=t,e&&(a.location=e),a.domain=s,a}function GU(t){throw t}const Qo=" ",HU="\r",Un=`
`,KU="\u2028",qU="\u2029";function XU(t){const e=t;let n=0,s=1,o=1,r=0;const i=_=>e[_]===HU&&e[_+1]===Un,a=_=>e[_]===Un,l=_=>e[_]===qU,c=_=>e[_]===KU,u=_=>i(_)||a(_)||l(_)||c(_),d=()=>n,h=()=>s,f=()=>o,p=()=>r,m=_=>i(_)||l(_)||c(_)?Un:e[_],v=()=>m(n),g=()=>m(n+r);function b(){return r=0,u(n)&&(s++,o=0),i(n)&&n++,n++,o++,e[n]}function x(){return i(n+r)&&r++,r++,e[n+r]}function y(){n=0,s=1,o=1,r=0}function w(_=0){r=_}function C(){const _=n+r;for(;_!==n;)b();r=0}return{index:d,line:h,column:f,peekOffset:p,charAt:m,currentChar:v,currentPeek:g,next:b,peek:x,reset:y,resetPeek:w,skipToPeek:C}}const Ir=void 0,QU=".",DC="'",YU="tokenizer";function JU(t,e={}){const n=e.location!==!1,s=XU(t),o=()=>s.index(),r=()=>zU(s.line(),s.column(),s.index()),i=r(),a=o(),l={currentType:13,offset:a,startLoc:i,endLoc:i,lastType:13,lastOffset:a,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(k,T,U,...Y){const ee=c();if(T.column+=U,T.offset+=U,u){const ve=n?Yv(ee.startLoc,T):null,B=vp(k,ve,{domain:YU,args:Y});u(B)}}function h(k,T,U){k.endLoc=r(),k.currentType=T;const Y={type:T};return n&&(Y.loc=Yv(k.startLoc,k.endLoc)),U!=null&&(Y.value=U),Y}const f=k=>h(k,13);function p(k,T){return k.currentChar()===T?(k.next(),T):(d(mt.EXPECTED_TOKEN,r(),0,T),"")}function m(k){let T="";for(;k.currentPeek()===Qo||k.currentPeek()===Un;)T+=k.currentPeek(),k.peek();return T}function v(k){const T=m(k);return k.skipToPeek(),T}function g(k){if(k===Ir)return!1;const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T===95}function b(k){if(k===Ir)return!1;const T=k.charCodeAt(0);return T>=48&&T<=57}function x(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=g(k.currentPeek());return k.resetPeek(),Y}function y(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=k.currentPeek()==="-"?k.peek():k.currentPeek(),ee=b(Y);return k.resetPeek(),ee}function w(k,T){const{currentType:U}=T;if(U!==2)return!1;m(k);const Y=k.currentPeek()===DC;return k.resetPeek(),Y}function C(k,T){const{currentType:U}=T;if(U!==7)return!1;m(k);const Y=k.currentPeek()===".";return k.resetPeek(),Y}function _(k,T){const{currentType:U}=T;if(U!==8)return!1;m(k);const Y=g(k.currentPeek());return k.resetPeek(),Y}function S(k,T){const{currentType:U}=T;if(!(U===7||U===11))return!1;m(k);const Y=k.currentPeek()===":";return k.resetPeek(),Y}function I(k,T){const{currentType:U}=T;if(U!==9)return!1;const Y=()=>{const ve=k.currentPeek();return ve==="{"?g(k.peek()):ve==="@"||ve==="|"||ve===":"||ve==="."||ve===Qo||!ve?!1:ve===Un?(k.peek(),Y()):O(k,!1)},ee=Y();return k.resetPeek(),ee}function E(k){m(k);const T=k.currentPeek()==="|";return k.resetPeek(),T}function O(k,T=!0){const U=(ee=!1,ve="")=>{const B=k.currentPeek();return B==="{"||B==="@"||!B?ee:B==="|"?!(ve===Qo||ve===Un):B===Qo?(k.peek(),U(!0,Qo)):B===Un?(k.peek(),U(!0,Un)):!0},Y=U();return T&&k.resetPeek(),Y}function A(k,T){const U=k.currentChar();return U===Ir?Ir:T(U)?(k.next(),U):null}function P(k){const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36}function z(k){return A(k,P)}function G(k){const T=k.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36||T===45}function M(k){return A(k,G)}function R(k){const T=k.charCodeAt(0);return T>=48&&T<=57}function D(k){return A(k,R)}function j(k){const T=k.charCodeAt(0);return T>=48&&T<=57||T>=65&&T<=70||T>=97&&T<=102}function ne(k){return A(k,j)}function re(k){let T="",U="";for(;T=D(k);)U+=T;return U}function de(k){let T="";for(;;){const U=k.currentChar();if(U==="{"||U==="}"||U==="@"||U==="|"||!U)break;if(U===Qo||U===Un)if(O(k))T+=U,k.next();else{if(E(k))break;T+=U,k.next()}else T+=U,k.next()}return T}function he(k){v(k);let T="",U="";for(;T=M(k);)U+=T;return k.currentChar()===Ir&&d(mt.UNTERMINATED_CLOSING_BRACE,r(),0),U}function ye(k){v(k);let T="";return k.currentChar()==="-"?(k.next(),T+=`-${re(k)}`):T+=re(k),k.currentChar()===Ir&&d(mt.UNTERMINATED_CLOSING_BRACE,r(),0),T}function fe(k){return k!==DC&&k!==Un}function ge(k){v(k),p(k,"'");let T="",U="";for(;T=A(k,fe);)T==="\\"?U+=q(k):U+=T;const Y=k.currentChar();return Y===Un||Y===Ir?(d(mt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),Y===Un&&(k.next(),p(k,"'")),U):(p(k,"'"),U)}function q(k){const T=k.currentChar();switch(T){case"\\":case"'":return k.next(),`\\${T}`;case"u":return ue(k,T,4);case"U":return ue(k,T,6);default:return d(mt.UNKNOWN_ESCAPE_SEQUENCE,r(),0,T),""}}function ue(k,T,U){p(k,T);let Y="";for(let ee=0;ee<U;ee++){const ve=ne(k);if(!ve){d(mt.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${T}${Y}${k.currentChar()}`);break}Y+=ve}return`\\${T}${Y}`}function ce(k){return k!=="{"&&k!=="}"&&k!==Qo&&k!==Un}function pe(k){v(k);let T="",U="";for(;T=A(k,ce);)U+=T;return U}function Se(k){let T="",U="";for(;T=z(k);)U+=T;return U}function De(k){const T=U=>{const Y=k.currentChar();return Y==="{"||Y==="@"||Y==="|"||Y==="("||Y===")"||!Y||Y===Qo?U:(U+=Y,k.next(),T(U))};return T("")}function N(k){v(k);const T=p(k,"|");return v(k),T}function L(k,T){let U=null;switch(k.currentChar()){case"{":return T.braceNest>=1&&d(mt.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),k.next(),U=h(T,2,"{"),v(k),T.braceNest++,U;case"}":return T.braceNest>0&&T.currentType===2&&d(mt.EMPTY_PLACEHOLDER,r(),0),k.next(),U=h(T,3,"}"),T.braceNest--,T.braceNest>0&&v(k),T.inLinked&&T.braceNest===0&&(T.inLinked=!1),U;case"@":return T.braceNest>0&&d(mt.UNTERMINATED_CLOSING_BRACE,r(),0),U=K(k,T)||f(T),T.braceNest=0,U;default:{let ee=!0,ve=!0,B=!0;if(E(k))return T.braceNest>0&&d(mt.UNTERMINATED_CLOSING_BRACE,r(),0),U=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,U;if(T.braceNest>0&&(T.currentType===4||T.currentType===5||T.currentType===6))return d(mt.UNTERMINATED_CLOSING_BRACE,r(),0),T.braceNest=0,oe(k,T);if(ee=x(k,T))return U=h(T,4,he(k)),v(k),U;if(ve=y(k,T))return U=h(T,5,ye(k)),v(k),U;if(B=w(k,T))return U=h(T,6,ge(k)),v(k),U;if(!ee&&!ve&&!B)return U=h(T,12,pe(k)),d(mt.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,U.value),v(k),U;break}}return U}function K(k,T){const{currentType:U}=T;let Y=null;const ee=k.currentChar();switch((U===7||U===8||U===11||U===9)&&(ee===Un||ee===Qo)&&d(mt.INVALID_LINKED_FORMAT,r(),0),ee){case"@":return k.next(),Y=h(T,7,"@"),T.inLinked=!0,Y;case".":return v(k),k.next(),h(T,8,".");case":":return v(k),k.next(),h(T,9,":");default:return E(k)?(Y=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,Y):C(k,T)||S(k,T)?(v(k),K(k,T)):_(k,T)?(v(k),h(T,11,Se(k))):I(k,T)?(v(k),ee==="{"?L(k,T)||Y:h(T,10,De(k))):(U===7&&d(mt.INVALID_LINKED_FORMAT,r(),0),T.braceNest=0,T.inLinked=!1,oe(k,T))}}function oe(k,T){let U={type:13};if(T.braceNest>0)return L(k,T)||f(T);if(T.inLinked)return K(k,T)||f(T);switch(k.currentChar()){case"{":return L(k,T)||f(T);case"}":return d(mt.UNBALANCED_CLOSING_BRACE,r(),0),k.next(),h(T,3,"}");case"@":return K(k,T)||f(T);default:{if(E(k))return U=h(T,1,N(k)),T.braceNest=0,T.inLinked=!1,U;if(O(k))return h(T,0,de(k));break}}return U}function se(){const{currentType:k,offset:T,startLoc:U,endLoc:Y}=l;return l.lastType=k,l.lastOffset=T,l.lastStartLoc=U,l.lastEndLoc=Y,l.offset=o(),l.startLoc=r(),s.currentChar()===Ir?h(l,13):oe(s,l)}return{nextToken:se,currentOffset:o,currentPosition:r,context:c}}const ZU="parser",ej=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function tj(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const s=parseInt(e||n,16);return s<=55295||s>=57344?String.fromCodePoint(s):"�"}}}function nj(t={}){const e=t.location!==!1,{onError:n}=t;function s(g,b,x,y,...w){const C=g.currentPosition();if(C.offset+=y,C.column+=y,n){const _=e?Yv(x,C):null,S=vp(b,_,{domain:ZU,args:w});n(S)}}function o(g,b,x){const y={type:g};return e&&(y.start=b,y.end=b,y.loc={start:x,end:x}),y}function r(g,b,x,y){e&&(g.end=b,g.loc&&(g.loc.end=x))}function i(g,b){const x=g.context(),y=o(3,x.offset,x.startLoc);return y.value=b,r(y,g.currentOffset(),g.currentPosition()),y}function a(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(5,y,w);return C.index=parseInt(b,10),g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function l(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(4,y,w);return C.key=b,g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function c(g,b){const x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(9,y,w);return C.value=b.replace(ej,tj),g.nextToken(),r(C,g.currentOffset(),g.currentPosition()),C}function u(g){const b=g.nextToken(),x=g.context(),{lastOffset:y,lastStartLoc:w}=x,C=o(8,y,w);return b.type!==11?(s(g,mt.UNEXPECTED_EMPTY_LINKED_MODIFIER,x.lastStartLoc,0),C.value="",r(C,y,w),{nextConsumeToken:b,node:C}):(b.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,xo(b)),C.value=b.value||"",r(C,g.currentOffset(),g.currentPosition()),{node:C})}function d(g,b){const x=g.context(),y=o(7,x.offset,x.startLoc);return y.value=b,r(y,g.currentOffset(),g.currentPosition()),y}function h(g){const b=g.context(),x=o(6,b.offset,b.startLoc);let y=g.nextToken();if(y.type===8){const w=u(g);x.modifier=w.node,y=w.nextConsumeToken||g.nextToken()}switch(y.type!==9&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(y)),y=g.nextToken(),y.type===2&&(y=g.nextToken()),y.type){case 10:y.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(y)),x.key=d(g,y.value||"");break;case 4:y.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(y)),x.key=l(g,y.value||"");break;case 5:y.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(y)),x.key=a(g,y.value||"");break;case 6:y.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(y)),x.key=c(g,y.value||"");break;default:{s(g,mt.UNEXPECTED_EMPTY_LINKED_KEY,b.lastStartLoc,0);const w=g.context(),C=o(7,w.offset,w.startLoc);return C.value="",r(C,w.offset,w.startLoc),x.key=C,r(x,w.offset,w.startLoc),{nextConsumeToken:y,node:x}}}return r(x,g.currentOffset(),g.currentPosition()),{node:x}}function f(g){const b=g.context(),x=b.currentType===1?g.currentOffset():b.offset,y=b.currentType===1?b.endLoc:b.startLoc,w=o(2,x,y);w.items=[];let C=null;do{const I=C||g.nextToken();switch(C=null,I.type){case 0:I.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(I)),w.items.push(i(g,I.value||""));break;case 5:I.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(I)),w.items.push(a(g,I.value||""));break;case 4:I.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(I)),w.items.push(l(g,I.value||""));break;case 6:I.value==null&&s(g,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,xo(I)),w.items.push(c(g,I.value||""));break;case 7:{const E=h(g);w.items.push(E.node),C=E.nextConsumeToken||null;break}}}while(b.currentType!==13&&b.currentType!==1);const _=b.currentType===1?b.lastOffset:g.currentOffset(),S=b.currentType===1?b.lastEndLoc:g.currentPosition();return r(w,_,S),w}function p(g,b,x,y){const w=g.context();let C=y.items.length===0;const _=o(1,b,x);_.cases=[],_.cases.push(y);do{const S=f(g);C||(C=S.items.length===0),_.cases.push(S)}while(w.currentType!==13);return C&&s(g,mt.MUST_HAVE_MESSAGES_IN_PLURAL,x,0),r(_,g.currentOffset(),g.currentPosition()),_}function m(g){const b=g.context(),{offset:x,startLoc:y}=b,w=f(g);return b.currentType===13?w:p(g,x,y,w)}function v(g){const b=JU(g,hn({},t)),x=b.context(),y=o(0,x.offset,x.startLoc);return e&&y.loc&&(y.loc.source=g),y.body=m(b),t.onCacheKey&&(y.cacheKey=t.onCacheKey(g)),x.currentType!==13&&s(b,mt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,g[x.offset]||""),r(y,b.currentOffset(),b.currentPosition()),y}return{parse:v}}function xo(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function sj(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function OC(t,e){for(let n=0;n<t.length;n++)Oy(t[n],e)}function Oy(t,e){switch(t.type){case 1:OC(t.cases,e),e.helper("plural");break;case 2:OC(t.items,e);break;case 6:{Oy(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function oj(t,e={}){const n=sj(t);n.helper("normalize"),t.body&&Oy(t.body,n);const s=n.context();t.helpers=Array.from(s.helpers)}function rj(t){const e=t.body;return e.type===2?LC(e):e.cases.forEach(n=>LC(n)),t}function LC(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const s=t.items[n];if(!(s.type===3||s.type===9)||s.value==null)break;e.push(s.value)}if(e.length===t.items.length){t.static=Dy(e);for(let n=0;n<t.items.length;n++){const s=t.items[n];(s.type===3||s.type===9)&&delete s.value}}}}function Ga(t){switch(t.t=t.type,t.type){case 0:{const e=t;Ga(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let s=0;s<n.length;s++)Ga(n[s]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let s=0;s<n.length;s++)Ga(n[s]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Ga(e.key),e.k=e.key,delete e.key,e.modifier&&(Ga(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function ij(t,e){const{sourceMap:n,filename:s,breakLineCode:o,needIndent:r}=e,i=e.location!==!1,a={filename:s,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:r,indentLevel:0};i&&t.loc&&(a.source=t.loc.source);const l=()=>a;function c(v,g){a.code+=v}function u(v,g=!0){const b=g?o:"";c(r?b+"  ".repeat(v):b)}function d(v=!0){const g=++a.indentLevel;v&&u(g)}function h(v=!0){const g=--a.indentLevel;v&&u(g)}function f(){u(a.indentLevel)}return{context:l,push:c,indent:d,deindent:h,newline:f,helper:v=>`_${v}`,needIndent:()=>a.needIndent}}function aj(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),_l(t,e.key),e.modifier?(t.push(", "),_l(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function lj(t,e){const{helper:n,needIndent:s}=t;t.push(`${n("normalize")}([`),t.indent(s());const o=e.items.length;for(let r=0;r<o&&(_l(t,e.items[r]),r!==o-1);r++)t.push(", ");t.deindent(s()),t.push("])")}function cj(t,e){const{helper:n,needIndent:s}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(s());const o=e.cases.length;for(let r=0;r<o&&(_l(t,e.cases[r]),r!==o-1);r++)t.push(", ");t.deindent(s()),t.push("])")}}function uj(t,e){e.body?_l(t,e.body):t.push("null")}function _l(t,e){const{helper:n}=t;switch(e.type){case 0:uj(t,e);break;case 1:cj(t,e);break;case 2:lj(t,e);break;case 6:aj(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const dj=(t,e={})=>{const n=Ne(e.mode)?e.mode:"normal",s=Ne(e.filename)?e.filename:"message.intl",o=!!e.sourceMap,r=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=ij(t,{mode:n,filename:s,sourceMap:o,breakLineCode:r,needIndent:i});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(i),a.length>0&&(l.push(`const { ${Dy(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),_l(l,t),l.deindent(i),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function hj(t,e={}){const n=hn({},e),s=!!n.jit,o=!!n.minify,r=n.optimize==null?!0:n.optimize,a=nj(n).parse(t);return s?(r&&rj(a),o&&Ga(a),{ast:a,code:""}):(oj(a,n),dj(a,n))}/*!
  * core-base v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function fj(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Pi().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Pi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Ng(t){return n=>pj(n,t)}function pj(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const s=n,o=s.c||s.cases;return t.plural(o.reduce((r,i)=>[...r,FC(t,i)],[]))}else return FC(t,n)}function FC(t,e){const n=e.s||e.static;if(n!=null)return t.type==="text"?n:t.normalize([n]);{const s=(e.i||e.items).reduce((o,r)=>[...o,Jv(t,r)],[]);return t.normalize(s)}}function Jv(t,e){const n=e.t||e.type;switch(n){case 3:{const s=e;return s.v||s.value}case 9:{const s=e;return s.v||s.value}case 4:{const s=e;return t.interpolate(t.named(s.k||s.key))}case 5:{const s=e;return t.interpolate(t.list(s.i!=null?s.i:s.index))}case 6:{const s=e,o=s.m||s.modifier;return t.linked(Jv(t,s.k||s.key),o?Jv(t,o):void 0,t.type)}case 7:{const s=e;return s.v||s.value}case 8:{const s=e;return s.v||s.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const mj=t=>t;let uh=Object.create(null);const Sl=t=>ut(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function gj(t,e={}){let n=!1;const s=e.onError||GU;return e.onError=o=>{n=!0,s(o)},{...hj(t,e),detectError:n}}function vj(t,e){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Ne(t)){at(e.warnHtmlMessage)&&e.warnHtmlMessage;const s=(e.onCacheKey||mj)(t),o=uh[s];if(o)return o;const{ast:r,detectError:i}=gj(t,{...e,location:!1,jit:!0}),a=Ng(r);return i?a:uh[s]=a}else{const n=t.cacheKey;if(n){const s=uh[n];return s||(uh[n]=Ng(t))}else return Ng(t)}}let su=null;function bj(t){su=t}function yj(t,e,n){su&&su.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const xj=wj("function:translate");function wj(t){return e=>su&&su.emit(t,e)}const or={INVALID_ARGUMENT:WU,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},Cj=24;function rr(t){return vp(t,null,void 0)}function Ly(t,e){return e.locale!=null?PC(e.locale):PC(t.locale)}let Ag;function PC(t){if(Ne(t))return t;if($t(t)){if(t.resolvedOnce&&Ag!=null)return Ag;if(t.constructor.name==="Function"){const e=t();if(VU(e))throw rr(or.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ag=e}else throw rr(or.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw rr(or.NOT_SUPPORT_LOCALE_TYPE)}function _j(t,e,n){return[...new Set([n,...Pt(e)?e:ut(e)?Object.keys(e):Ne(e)?[e]:[n]])]}function E$(t,e,n){const s=Ne(n)?n:ou,o=t;o.__localeChainCache||(o.__localeChainCache=new Map);let r=o.__localeChainCache.get(s);if(!r){r=[];let i=[n];for(;Pt(i);)i=MC(r,i,e);const a=Pt(e)||!Je(e)?e:e.default?e.default:null;i=Ne(a)?[a]:a,Pt(i)&&MC(r,i,!1),o.__localeChainCache.set(s,r)}return r}function MC(t,e,n){let s=!0;for(let o=0;o<e.length&&at(s);o++){const r=e[o];Ne(r)&&(s=Sj(t,e[o],n))}return s}function Sj(t,e,n){let s;const o=e.split("-");do{const r=o.join("-");s=Ij(t,r,n),o.splice(-1,1)}while(o.length&&s===!0);return s}function Ij(t,e,n){let s=!1;if(!t.includes(e)&&(s=!0,e)){s=e[e.length-1]!=="!";const o=e.replace(/!/g,"");t.push(o),(Pt(n)||Je(n))&&n[o]&&(s=n[o])}return s}const ai=[];ai[0]={w:[0],i:[3,0],"[":[4],o:[7]};ai[1]={w:[1],".":[2],"[":[4],o:[7]};ai[2]={w:[2],i:[3,0],0:[3,0]};ai[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ai[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ai[5]={"'":[4,0],o:8,l:[5,0]};ai[6]={'"':[4,0],o:8,l:[6,0]};const Ej=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function kj(t){return Ej.test(t)}function $j(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function Tj(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Nj(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:kj(e)?$j(e):"*"+e}function Aj(t){const e=[];let n=-1,s=0,o=0,r,i,a,l,c,u,d;const h=[];h[0]=()=>{i===void 0?i=a:i+=a},h[1]=()=>{i!==void 0&&(e.push(i),i=void 0)},h[2]=()=>{h[0](),o++},h[3]=()=>{if(o>0)o--,s=4,h[0]();else{if(o=0,i===void 0||(i=Nj(i),i===!1))return!1;h[1]()}};function f(){const p=t[n+1];if(s===5&&p==="'"||s===6&&p==='"')return n++,a="\\"+p,h[0](),!0}for(;s!==null;)if(n++,r=t[n],!(r==="\\"&&f())){if(l=Tj(r),d=ai[s],c=d[l]||d.l||8,c===8||(s=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=r,u()===!1))))return;if(s===7)return e}}const BC=new Map;function Rj(t,e){return ut(t)?t[e]:null}function Dj(t,e){if(!ut(t))return null;let n=BC.get(e);if(n||(n=Aj(e),n&&BC.set(e,n)),!n)return null;const s=n.length;let o=t,r=0;for(;r<s;){const i=o[n[r]];if(i===void 0||$t(o))return null;o=i,r++}return o}const Oj="10.0.4",bp=-1,ou="en-US",VC="",UC=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Lj(){return{upper:(t,e)=>e==="text"&&Ne(t)?t.toUpperCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Ne(t)?t.toLowerCase():e==="vnode"&&ut(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Ne(t)?UC(t):e==="vnode"&&ut(t)&&"__v_isVNode"in t?UC(t.children):t}}let k$;function Fj(t){k$=t}let $$;function Pj(t){$$=t}let T$;function Mj(t){T$=t}let N$=null;const Bj=t=>{N$=t},Vj=()=>N$;let A$=null;const jC=t=>{A$=t},Uj=()=>A$;let zC=0;function jj(t={}){const e=$t(t.onWarn)?t.onWarn:jU,n=Ne(t.version)?t.version:Oj,s=Ne(t.locale)||$t(t.locale)?t.locale:ou,o=$t(s)?ou:s,r=Pt(t.fallbackLocale)||Je(t.fallbackLocale)||Ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:o,i=Je(t.messages)?t.messages:{[o]:{}},a=Je(t.datetimeFormats)?t.datetimeFormats:{[o]:{}},l=Je(t.numberFormats)?t.numberFormats:{[o]:{}},c=hn({},t.modifiers||{},Lj()),u=t.pluralRules||{},d=$t(t.missing)?t.missing:null,h=at(t.missingWarn)||Cl(t.missingWarn)?t.missingWarn:!0,f=at(t.fallbackWarn)||Cl(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,m=!!t.unresolving,v=$t(t.postTranslation)?t.postTranslation:null,g=Je(t.processor)?t.processor:null,b=at(t.warnHtmlMessage)?t.warnHtmlMessage:!0,x=!!t.escapeParameter,y=$t(t.messageCompiler)?t.messageCompiler:k$,w=$t(t.messageResolver)?t.messageResolver:$$||Rj,C=$t(t.localeFallbacker)?t.localeFallbacker:T$||_j,_=ut(t.fallbackContext)?t.fallbackContext:void 0,S=t,I=ut(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,E=ut(S.__numberFormatters)?S.__numberFormatters:new Map,O=ut(S.__meta)?S.__meta:{};zC++;const A={version:n,cid:zC,locale:s,fallbackLocale:r,messages:i,modifiers:c,pluralRules:u,missing:d,missingWarn:h,fallbackWarn:f,fallbackFormat:p,unresolving:m,postTranslation:v,processor:g,warnHtmlMessage:b,escapeParameter:x,messageCompiler:y,messageResolver:w,localeFallbacker:C,fallbackContext:_,onWarn:e,__meta:O};return A.datetimeFormats=a,A.numberFormats=l,A.__datetimeFormatters=I,A.__numberFormatters=E,__INTLIFY_PROD_DEVTOOLS__&&yj(A,n,O),A}function Fy(t,e,n,s,o){const{missing:r,onWarn:i}=t;if(r!==null){const a=r(t,n,e,o);return Ne(a)?a:e}else return e}function gc(t,e,n){const s=t;s.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function zj(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function Wj(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let s=n+1;s<e.length;s++)if(zj(t,e[s]))return!0;return!1}function WC(t,...e){const{datetimeFormats:n,unresolving:s,fallbackLocale:o,onWarn:r,localeFallbacker:i}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=Zv(...e),h=at(u.missingWarn)?u.missingWarn:t.missingWarn;at(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,p=Ly(t,u),m=i(t,o,p);if(!Ne(l)||l==="")return new Intl.DateTimeFormat(p,d).format(c);let v={},g,b=null;const x="datetime format";for(let C=0;C<m.length&&(g=m[C],v=n[g]||{},b=v[l],!Je(b));C++)Fy(t,l,g,h,x);if(!Je(b)||!Ne(g))return s?bp:l;let y=`${g}__${l}`;gp(d)||(y=`${y}__${JSON.stringify(d)}`);let w=a.get(y);return w||(w=new Intl.DateTimeFormat(g,hn({},b,d)),a.set(y,w)),f?w.formatToParts(c):w.format(c)}const R$=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Zv(...t){const[e,n,s,o]=t,r={};let i={},a;if(Ne(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw rr(or.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw rr(or.INVALID_ISO_DATE_ARGUMENT)}}else if(MU(e)){if(isNaN(e.getTime()))throw rr(or.INVALID_DATE_ARGUMENT);a=e}else if(ln(e))a=e;else throw rr(or.INVALID_ARGUMENT);return Ne(n)?r.key=n:Je(n)&&Object.keys(n).forEach(l=>{R$.includes(l)?i[l]=n[l]:r[l]=n[l]}),Ne(s)?r.locale=s:Je(s)&&(i=s),Je(o)&&(i=o),[r.key||"",a,r,i]}function GC(t,e,n){const s=t;for(const o in n){const r=`${e}__${o}`;s.__datetimeFormatters.has(r)&&s.__datetimeFormatters.delete(r)}}function HC(t,...e){const{numberFormats:n,unresolving:s,fallbackLocale:o,onWarn:r,localeFallbacker:i}=t,{__numberFormatters:a}=t,[l,c,u,d]=eb(...e),h=at(u.missingWarn)?u.missingWarn:t.missingWarn;at(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const f=!!u.part,p=Ly(t,u),m=i(t,o,p);if(!Ne(l)||l==="")return new Intl.NumberFormat(p,d).format(c);let v={},g,b=null;const x="number format";for(let C=0;C<m.length&&(g=m[C],v=n[g]||{},b=v[l],!Je(b));C++)Fy(t,l,g,h,x);if(!Je(b)||!Ne(g))return s?bp:l;let y=`${g}__${l}`;gp(d)||(y=`${y}__${JSON.stringify(d)}`);let w=a.get(y);return w||(w=new Intl.NumberFormat(g,hn({},b,d)),a.set(y,w)),f?w.formatToParts(c):w.format(c)}const D$=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function eb(...t){const[e,n,s,o]=t,r={};let i={};if(!ln(e))throw rr(or.INVALID_ARGUMENT);const a=e;return Ne(n)?r.key=n:Je(n)&&Object.keys(n).forEach(l=>{D$.includes(l)?i[l]=n[l]:r[l]=n[l]}),Ne(s)?r.locale=s:Je(s)&&(i=s),Je(o)&&(i=o),[r.key||"",a,r,i]}function KC(t,e,n){const s=t;for(const o in n){const r=`${e}__${o}`;s.__numberFormatters.has(r)&&s.__numberFormatters.delete(r)}}const Gj=t=>t,Hj=t=>"",Kj="text",qj=t=>t.length===0?"":Dy(t),Xj=UU;function qC(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Qj(t){const e=ln(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(ln(t.named.count)||ln(t.named.n))?ln(t.named.count)?t.named.count:ln(t.named.n)?t.named.n:e:e}function Yj(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Jj(t={}){const e=t.locale,n=Qj(t),s=ut(t.pluralRules)&&Ne(e)&&$t(t.pluralRules[e])?t.pluralRules[e]:qC,o=ut(t.pluralRules)&&Ne(e)&&$t(t.pluralRules[e])?qC:void 0,r=g=>g[s(n,g.length,o)],i=t.list||[],a=g=>i[g],l=t.named||{};ln(t.pluralIndex)&&Yj(n,l);const c=g=>l[g];function u(g,b){const x=$t(t.messages)?t.messages(g,!!b):ut(t.messages)?t.messages[g]:!1;return x||(t.parent?t.parent.message(g):Hj)}const d=g=>t.modifiers?t.modifiers[g]:Gj,h=Je(t.processor)&&$t(t.processor.normalize)?t.processor.normalize:qj,f=Je(t.processor)&&$t(t.processor.interpolate)?t.processor.interpolate:Xj,p=Je(t.processor)&&Ne(t.processor.type)?t.processor.type:Kj,v={list:a,named:c,plural:r,linked:(g,...b)=>{const[x,y]=b;let w="text",C="";b.length===1?ut(x)?(C=x.modifier||C,w=x.type||w):Ne(x)&&(C=x||C):b.length===2&&(Ne(x)&&(C=x||C),Ne(y)&&(w=y||w));const _=u(g,!0)(v),S=w==="vnode"&&Pt(_)&&C?_[0]:_;return C?d(C)(S,w):S},message:u,type:p,interpolate:f,normalize:h,values:hn({},i,l)};return v}const XC=()=>"",As=t=>$t(t);function QC(t,...e){const{fallbackFormat:n,postTranslation:s,unresolving:o,messageCompiler:r,fallbackLocale:i,messages:a}=t,[l,c]=tb(...e),u=at(c.missingWarn)?c.missingWarn:t.missingWarn,d=at(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,h=at(c.escapeParameter)?c.escapeParameter:t.escapeParameter,f=!!c.resolvedMessage,p=Ne(c.default)||at(c.default)?at(c.default)?r?l:()=>l:c.default:n?r?l:()=>l:null,m=n||p!=null&&(Ne(p)||$t(p)),v=Ly(t,c);h&&Zj(c);let[g,b,x]=f?[l,v,a[v]||{}]:O$(t,l,v,i,d,u),y=g,w=l;if(!f&&!(Ne(y)||Sl(y)||As(y))&&m&&(y=p,w=y),!f&&(!(Ne(y)||Sl(y)||As(y))||!Ne(b)))return o?bp:l;let C=!1;const _=()=>{C=!0},S=As(y)?y:L$(t,l,b,y,w,_);if(C)return y;const I=nz(t,b,x,c),E=Jj(I),O=ez(t,S,E),A=s?s(O,l):O;if(__INTLIFY_PROD_DEVTOOLS__){const P={timestamp:Date.now(),key:Ne(l)?l:As(y)?y.key:"",locale:b||(As(y)?y.locale:""),format:Ne(y)?y:As(y)?y.source:"",message:A};P.meta=hn({},t.__meta,Vj()||{}),xj(P)}return A}function Zj(t){Pt(t.list)?t.list=t.list.map(e=>Ne(e)?RC(e):e):ut(t.named)&&Object.keys(t.named).forEach(e=>{Ne(t.named[e])&&(t.named[e]=RC(t.named[e]))})}function O$(t,e,n,s,o,r){const{messages:i,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,s,n);let d={},h,f=null;const p="translate";for(let m=0;m<u.length&&(h=u[m],d=i[h]||{},(f=l(d,e))===null&&(f=d[e]),!(Ne(f)||Sl(f)||As(f)));m++)if(!Wj(h,u)){const v=Fy(t,e,h,r,p);v!==e&&(f=v)}return[f,h,d]}function L$(t,e,n,s,o,r){const{messageCompiler:i,warnHtmlMessage:a}=t;if(As(s)){const c=s;return c.locale=c.locale||n,c.key=c.key||e,c}if(i==null){const c=()=>s;return c.locale=n,c.key=e,c}const l=i(s,tz(t,n,o,s,a,r));return l.locale=n,l.key=e,l.source=s,l}function ez(t,e,n){return e(n)}function tb(...t){const[e,n,s]=t,o={};if(!Ne(e)&&!ln(e)&&!As(e)&&!Sl(e))throw rr(or.INVALID_ARGUMENT);const r=ln(e)?String(e):(As(e),e);return ln(n)?o.plural=n:Ne(n)?o.default=n:Je(n)&&!gp(n)?o.named=n:Pt(n)&&(o.list=n),ln(s)?o.plural=s:Ne(s)?o.default=s:Je(s)&&hn(o,s),[r,o]}function tz(t,e,n,s,o,r){return{locale:e,key:n,warnHtmlMessage:o,onError:i=>{throw r&&r(i),i},onCacheKey:i=>FU(e,n,i)}}function nz(t,e,n,s){const{modifiers:o,pluralRules:r,messageResolver:i,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,h={locale:e,modifiers:o,pluralRules:r,messages:(f,p)=>{let m=i(n,f);if(m==null&&(u||p)){const[,,v]=O$(u||t,f,e,a,l,c);m=i(v,f)}if(Ne(m)||Sl(m)){let v=!1;const b=L$(t,f,e,m,f,()=>{v=!0});return v?XC:b}else return As(m)?m:XC}};return t.processor&&(h.processor=t.processor),s.list&&(h.list=s.list),s.named&&(h.named=s.named),ln(s.plural)&&(h.pluralIndex=s.plural),h}fj();/*!
  * vue-i18n v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const sz="10.0.4";function oz(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Pi().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Pi().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Pi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Pi().__INTLIFY_PROD_DEVTOOLS__=!1)}const Qn={UNEXPECTED_RETURN_TYPE:Cj,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function cs(t,...e){return vp(t,null,void 0)}const nb=ii("__translateVNode"),sb=ii("__datetimeParts"),ob=ii("__numberParts"),F$=ii("__setPluralRules"),P$=ii("__injectWithOption"),rb=ii("__dispose");function ru(t){if(!ut(t))return t;for(const e in t)if(hf(t,e))if(!e.includes("."))ut(t[e])&&ru(t[e]);else{const n=e.split("."),s=n.length-1;let o=t,r=!1;for(let i=0;i<s;i++){if(n[i]in o||(o[n[i]]={}),!ut(o[n[i]])){r=!0;break}o=o[n[i]]}r||(o[n[s]]=t[e],delete t[e]),ut(o[n[s]])&&ru(o[n[s]])}return t}function Py(t,e){const{messages:n,__i18n:s,messageResolver:o,flatJson:r}=e,i=Je(n)?n:Pt(s)?{}:{[t]:{}};if(Pt(s)&&s.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(i[l]=i[l]||{},Fh(c,i[l])):Fh(c,i)}else Ne(a)&&Fh(JSON.parse(a),i)}),o==null&&r)for(const a in i)hf(i,a)&&ru(i[a]);return i}function M$(t){return t.type}function B$(t,e,n){let s=ut(e.messages)?e.messages:{};"__i18nGlobal"in n&&(s=Py(t.locale.value,{messages:s,__i18n:n.__i18nGlobal}));const o=Object.keys(s);o.length&&o.forEach(r=>{t.mergeLocaleMessage(r,s[r])});{if(ut(e.datetimeFormats)){const r=Object.keys(e.datetimeFormats);r.length&&r.forEach(i=>{t.mergeDateTimeFormat(i,e.datetimeFormats[i])})}if(ut(e.numberFormats)){const r=Object.keys(e.numberFormats);r.length&&r.forEach(i=>{t.mergeNumberFormat(i,e.numberFormats[i])})}}}function YC(t){return Ze(Vr,null,t,0)}const JC="__INTLIFY_META__",ZC=()=>[],rz=()=>!1;let e_=0;function t_(t){return(e,n,s,o)=>t(n,s,ys()||void 0,o)}const iz=()=>{const t=ys();let e=null;return t&&(e=M$(t)[JC])?{[JC]:e}:null};function My(t={}){const{__root:e,__injectWithOption:n}=t,s=e===void 0,o=t.flatJson,r=df?Ot:cr;let i=at(t.inheritLocale)?t.inheritLocale:!0;const a=r(e&&i?e.locale.value:Ne(t.locale)?t.locale:ou),l=r(e&&i?e.fallbackLocale.value:Ne(t.fallbackLocale)||Pt(t.fallbackLocale)||Je(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),c=r(Py(a.value,t)),u=r(Je(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=r(Je(t.numberFormats)?t.numberFormats:{[a.value]:{}});let h=e?e.missingWarn:at(t.missingWarn)||Cl(t.missingWarn)?t.missingWarn:!0,f=e?e.fallbackWarn:at(t.fallbackWarn)||Cl(t.fallbackWarn)?t.fallbackWarn:!0,p=e?e.fallbackRoot:at(t.fallbackRoot)?t.fallbackRoot:!0,m=!!t.fallbackFormat,v=$t(t.missing)?t.missing:null,g=$t(t.missing)?t_(t.missing):null,b=$t(t.postTranslation)?t.postTranslation:null,x=e?e.warnHtmlMessage:at(t.warnHtmlMessage)?t.warnHtmlMessage:!0,y=!!t.escapeParameter;const w=e?e.modifiers:Je(t.modifiers)?t.modifiers:{};let C=t.pluralRules||e&&e.pluralRules,_;_=(()=>{s&&jC(null);const B={version:sz,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:w,pluralRules:C,missing:g===null?void 0:g,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:x,escapeParameter:y,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};B.datetimeFormats=u.value,B.numberFormats=d.value,B.__datetimeFormatters=Je(_)?_.__datetimeFormatters:void 0,B.__numberFormatters=Je(_)?_.__numberFormatters:void 0;const Z=jj(B);return s&&jC(Z),Z})(),gc(_,a.value,l.value);function I(){return[a.value,l.value,c.value,u.value,d.value]}const E=et({get:()=>a.value,set:B=>{a.value=B,_.locale=a.value}}),O=et({get:()=>l.value,set:B=>{l.value=B,_.fallbackLocale=l.value,gc(_,a.value,B)}}),A=et(()=>c.value),P=et(()=>u.value),z=et(()=>d.value);function G(){return $t(b)?b:null}function M(B){b=B,_.postTranslation=B}function R(){return v}function D(B){B!==null&&(g=t_(B)),v=B,_.missing=g}const j=(B,Z,Ce,ie,be,Ee)=>{I();let Pe;try{__INTLIFY_PROD_DEVTOOLS__,s||(_.fallbackContext=e?Uj():void 0),Pe=B(_)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(_.fallbackContext=void 0)}if(Ce!=="translate exists"&&ln(Pe)&&Pe===bp||Ce==="translate exists"&&!Pe){const[Ye,At]=Z();return e&&p?ie(e):be(Ye)}else{if(Ee(Pe))return Pe;throw cs(Qn.UNEXPECTED_RETURN_TYPE)}};function ne(...B){return j(Z=>Reflect.apply(QC,null,[Z,...B]),()=>tb(...B),"translate",Z=>Reflect.apply(Z.t,Z,[...B]),Z=>Z,Z=>Ne(Z))}function re(...B){const[Z,Ce,ie]=B;if(ie&&!ut(ie))throw cs(Qn.INVALID_ARGUMENT);return ne(Z,Ce,hn({resolvedMessage:!0},ie||{}))}function de(...B){return j(Z=>Reflect.apply(WC,null,[Z,...B]),()=>Zv(...B),"datetime format",Z=>Reflect.apply(Z.d,Z,[...B]),()=>VC,Z=>Ne(Z))}function he(...B){return j(Z=>Reflect.apply(HC,null,[Z,...B]),()=>eb(...B),"number format",Z=>Reflect.apply(Z.n,Z,[...B]),()=>VC,Z=>Ne(Z))}function ye(B){return B.map(Z=>Ne(Z)||ln(Z)||at(Z)?YC(String(Z)):Z)}const ge={normalize:ye,interpolate:B=>B,type:"vnode"};function q(...B){return j(Z=>{let Ce;const ie=Z;try{ie.processor=ge,Ce=Reflect.apply(QC,null,[ie,...B])}finally{ie.processor=null}return Ce},()=>tb(...B),"translate",Z=>Z[nb](...B),Z=>[YC(Z)],Z=>Pt(Z))}function ue(...B){return j(Z=>Reflect.apply(HC,null,[Z,...B]),()=>eb(...B),"number format",Z=>Z[ob](...B),ZC,Z=>Ne(Z)||Pt(Z))}function ce(...B){return j(Z=>Reflect.apply(WC,null,[Z,...B]),()=>Zv(...B),"datetime format",Z=>Z[sb](...B),ZC,Z=>Ne(Z)||Pt(Z))}function pe(B){C=B,_.pluralRules=C}function Se(B,Z){return j(()=>{if(!B)return!1;const Ce=Ne(Z)?Z:a.value,ie=L(Ce),be=_.messageResolver(ie,B);return Sl(be)||As(be)||Ne(be)},()=>[B],"translate exists",Ce=>Reflect.apply(Ce.te,Ce,[B,Z]),rz,Ce=>at(Ce))}function De(B){let Z=null;const Ce=E$(_,l.value,a.value);for(let ie=0;ie<Ce.length;ie++){const be=c.value[Ce[ie]]||{},Ee=_.messageResolver(be,B);if(Ee!=null){Z=Ee;break}}return Z}function N(B){const Z=De(B);return Z??(e?e.tm(B)||{}:{})}function L(B){return c.value[B]||{}}function K(B,Z){if(o){const Ce={[B]:Z};for(const ie in Ce)hf(Ce,ie)&&ru(Ce[ie]);Z=Ce[B]}c.value[B]=Z,_.messages=c.value}function oe(B,Z){c.value[B]=c.value[B]||{};const Ce={[B]:Z};if(o)for(const ie in Ce)hf(Ce,ie)&&ru(Ce[ie]);Z=Ce[B],Fh(Z,c.value[B]),_.messages=c.value}function se(B){return u.value[B]||{}}function k(B,Z){u.value[B]=Z,_.datetimeFormats=u.value,GC(_,B,Z)}function T(B,Z){u.value[B]=hn(u.value[B]||{},Z),_.datetimeFormats=u.value,GC(_,B,Z)}function U(B){return d.value[B]||{}}function Y(B,Z){d.value[B]=Z,_.numberFormats=d.value,KC(_,B,Z)}function ee(B,Z){d.value[B]=hn(d.value[B]||{},Z),_.numberFormats=d.value,KC(_,B,Z)}e_++,e&&df&&(ls(e.locale,B=>{i&&(a.value=B,_.locale=B,gc(_,a.value,l.value))}),ls(e.fallbackLocale,B=>{i&&(l.value=B,_.fallbackLocale=B,gc(_,a.value,l.value))}));const ve={id:e_,locale:E,fallbackLocale:O,get inheritLocale(){return i},set inheritLocale(B){i=B,B&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,gc(_,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:A,get modifiers(){return w},get pluralRules(){return C||{}},get isGlobal(){return s},get missingWarn(){return h},set missingWarn(B){h=B,_.missingWarn=h},get fallbackWarn(){return f},set fallbackWarn(B){f=B,_.fallbackWarn=f},get fallbackRoot(){return p},set fallbackRoot(B){p=B},get fallbackFormat(){return m},set fallbackFormat(B){m=B,_.fallbackFormat=m},get warnHtmlMessage(){return x},set warnHtmlMessage(B){x=B,_.warnHtmlMessage=B},get escapeParameter(){return y},set escapeParameter(B){y=B,_.escapeParameter=B},t:ne,getLocaleMessage:L,setLocaleMessage:K,mergeLocaleMessage:oe,getPostTranslationHandler:G,setPostTranslationHandler:M,getMissingHandler:R,setMissingHandler:D,[F$]:pe};return ve.datetimeFormats=P,ve.numberFormats=z,ve.rt=re,ve.te=Se,ve.tm=N,ve.d=de,ve.n=he,ve.getDateTimeFormat=se,ve.setDateTimeFormat=k,ve.mergeDateTimeFormat=T,ve.getNumberFormat=U,ve.setNumberFormat=Y,ve.mergeNumberFormat=ee,ve[P$]=n,ve[nb]=q,ve[sb]=ce,ve[ob]=ue,ve}function az(t){const e=Ne(t.locale)?t.locale:ou,n=Ne(t.fallbackLocale)||Pt(t.fallbackLocale)||Je(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,s=$t(t.missing)?t.missing:void 0,o=at(t.silentTranslationWarn)||Cl(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,r=at(t.silentFallbackWarn)||Cl(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,i=at(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Je(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,u=$t(t.postTranslation)?t.postTranslation:void 0,d=Ne(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,f=at(t.sync)?t.sync:!0;let p=t.messages;if(Je(t.sharedMessages)){const w=t.sharedMessages;p=Object.keys(w).reduce((_,S)=>{const I=_[S]||(_[S]={});return hn(I,w[S]),_},p||{})}const{__i18n:m,__root:v,__injectWithOption:g}=t,b=t.datetimeFormats,x=t.numberFormats,y=t.flatJson;return{locale:e,fallbackLocale:n,messages:p,flatJson:y,datetimeFormats:b,numberFormats:x,missing:s,missingWarn:o,fallbackWarn:r,fallbackRoot:i,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:f,__i18n:m,__root:v,__injectWithOption:g}}function ib(t={}){const e=My(az(t)),{__extender:n}=t,s={id:e.id,get locale(){return e.locale.value},set locale(o){e.locale.value=o},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(o){e.fallbackLocale.value=o},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get missing(){return e.getMissingHandler()},set missing(o){e.setMissingHandler(o)},get silentTranslationWarn(){return at(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(o){e.missingWarn=at(o)?!o:o},get silentFallbackWarn(){return at(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(o){e.fallbackWarn=at(o)?!o:o},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(o){e.fallbackFormat=o},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(o){e.setPostTranslationHandler(o)},get sync(){return e.inheritLocale},set sync(o){e.inheritLocale=o},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){e.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(o){e.escapeParameter=o},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...o){return Reflect.apply(e.t,e,[...o])},rt(...o){return Reflect.apply(e.rt,e,[...o])},tc(...o){const[r,i,a]=o,l={plural:1};let c=null,u=null;if(!Ne(r))throw cs(Qn.INVALID_ARGUMENT);const d=r;return Ne(i)?l.locale=i:ln(i)?l.plural=i:Pt(i)?c=i:Je(i)&&(u=i),Ne(a)?l.locale=a:Pt(a)?c=a:Je(a)&&(u=a),Reflect.apply(e.t,e,[d,c||u||{},l])},te(o,r){return e.te(o,r)},tm(o){return e.tm(o)},getLocaleMessage(o){return e.getLocaleMessage(o)},setLocaleMessage(o,r){e.setLocaleMessage(o,r)},mergeLocaleMessage(o,r){e.mergeLocaleMessage(o,r)},d(...o){return Reflect.apply(e.d,e,[...o])},getDateTimeFormat(o){return e.getDateTimeFormat(o)},setDateTimeFormat(o,r){e.setDateTimeFormat(o,r)},mergeDateTimeFormat(o,r){e.mergeDateTimeFormat(o,r)},n(...o){return Reflect.apply(e.n,e,[...o])},getNumberFormat(o){return e.getNumberFormat(o)},setNumberFormat(o,r){e.setNumberFormat(o,r)},mergeNumberFormat(o,r){e.mergeNumberFormat(o,r)}};return s.__extender=n,s}function lz(t,e,n){return{beforeCreate(){const s=ys();if(!s)throw cs(Qn.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const r=o.i18n;if(o.__i18n&&(r.__i18n=o.__i18n),r.__root=e,this===this.$root)this.$i18n=n_(t,r);else{r.__injectWithOption=!0,r.__extender=n.__vueI18nExtend,this.$i18n=ib(r);const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}}else if(o.__i18n)if(this===this.$root)this.$i18n=n_(t,o);else{this.$i18n=ib({__i18n:o.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=t;o.__i18nGlobal&&B$(e,o,o),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,i)=>this.$i18n.te(r,i),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),n.__setInstance(s,this.$i18n)},mounted(){},unmounted(){const s=ys();if(!s)throw cs(Qn.UNEXPECTED_ERROR);const o=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,o.__disposer&&(o.__disposer(),delete o.__disposer,delete o.__extender),n.__deleteInstance(s),delete this.$i18n}}}function n_(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[F$](e.pluralizationRules||t.pluralizationRules);const n=Py(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(s=>t.mergeLocaleMessage(s,n[s])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(s=>t.mergeDateTimeFormat(s,e.datetimeFormats[s])),e.numberFormats&&Object.keys(e.numberFormats).forEach(s=>t.mergeNumberFormat(s,e.numberFormats[s])),t}const By={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function cz({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((s,o)=>[...s,...o.type===Xt?o.children:[o]],[]):e.reduce((n,s)=>{const o=t[s];return o&&(n[s]=o()),n},{})}function V$(){return Xt}const uz=fn({name:"i18n-t",props:hn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>ln(t)||!isNaN(t)}},By),setup(t,e){const{slots:n,attrs:s}=e,o=t.i18n||Hl({useScope:t.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter(d=>d!=="_"),i={};t.locale&&(i.locale=t.locale),t.plural!==void 0&&(i.plural=Ne(t.plural)?+t.plural:t.plural);const a=cz(e,r),l=o[nb](t.keypath,a,i),c=hn({},s),u=Ne(t.tag)||ut(t.tag)?t.tag:V$();return Gt(u,c,l)}}}),s_=uz;function dz(t){return Pt(t)&&!Ne(t[0])}function U$(t,e,n,s){const{slots:o,attrs:r}=e;return()=>{const i={part:!0};let a={};t.locale&&(i.locale=t.locale),Ne(t.format)?i.key=t.format:ut(t.format)&&(Ne(t.format.key)&&(i.key=t.format.key),a=Object.keys(t.format).reduce((h,f)=>n.includes(f)?hn({},h,{[f]:t.format[f]}):h,{}));const l=s(t.value,i,a);let c=[i.key];Pt(l)?c=l.map((h,f)=>{const p=o[h.type],m=p?p({[h.type]:h.value,index:f,parts:l}):[h.value];return dz(m)&&(m[0].key=`${h.type}-${f}`),m}):Ne(l)&&(c=[l]);const u=hn({},r),d=Ne(t.tag)||ut(t.tag)?t.tag:V$();return Gt(d,u,c)}}const hz=fn({name:"i18n-n",props:hn({value:{type:Number,required:!0},format:{type:[String,Object]}},By),setup(t,e){const n=t.i18n||Hl({useScope:t.scope,__useComponent:!0});return U$(t,e,D$,(...s)=>n[ob](...s))}}),o_=hz,fz=fn({name:"i18n-d",props:hn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},By),setup(t,e){const n=t.i18n||Hl({useScope:t.scope,__useComponent:!0});return U$(t,e,R$,(...s)=>n[sb](...s))}}),r_=fz;function pz(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const s=n.__getInstance(e);return s!=null?s.__composer:t.global.__composer}}function mz(t){const e=i=>{const{instance:a,value:l}=i;if(!a||!a.$)throw cs(Qn.UNEXPECTED_ERROR);const c=pz(t,a.$),u=i_(l);return[Reflect.apply(c.t,c,[...a_(u)]),c]};return{created:(i,a)=>{const[l,c]=e(a);df&&t.global===c&&(i.__i18nWatcher=ls(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),i.__composer=c,i.textContent=l},unmounted:i=>{df&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:a})=>{if(i.__composer){const l=i.__composer,c=i_(a);i.textContent=Reflect.apply(l.t,l,[...a_(c)])}},getSSRProps:i=>{const[a]=e(i);return{textContent:a}}}}function i_(t){if(Ne(t))return{path:t};if(Je(t)){if(!("path"in t))throw cs(Qn.REQUIRED_VALUE,"path");return t}else throw cs(Qn.INVALID_VALUE)}function a_(t){const{path:e,locale:n,args:s,choice:o,plural:r}=t,i={},a=s||{};return Ne(n)&&(i.locale=n),ln(o)&&(i.plural=o),ln(r)&&(i.plural=r),[e,a,i]}function gz(t,e,...n){const s=Je(n[0])?n[0]:{};(at(s.globalInstall)?s.globalInstall:!0)&&([s_.name,"I18nT"].forEach(r=>t.component(r,s_)),[o_.name,"I18nN"].forEach(r=>t.component(r,o_)),[r_.name,"I18nD"].forEach(r=>t.component(r,r_))),t.directive("t",mz(e))}const vz=ii("global-vue-i18n");function bz(t={},e){const n=__VUE_I18N_LEGACY_API__&&at(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,s=at(t.globalInjection)?t.globalInjection:!0,o=new Map,[r,i]=yz(t,n),a=ii("");function l(h){return o.get(h)||null}function c(h,f){o.set(h,f)}function u(h){o.delete(h)}const d={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},async install(h,...f){if(h.__VUE_I18N_SYMBOL__=a,h.provide(h.__VUE_I18N_SYMBOL__,d),Je(f[0])){const v=f[0];d.__composerExtend=v.__composerExtend,d.__vueI18nExtend=v.__vueI18nExtend}let p=null;!n&&s&&(p=kz(h,d.global)),__VUE_I18N_FULL_INSTALL__&&gz(h,d,...f),__VUE_I18N_LEGACY_API__&&n&&h.mixin(lz(i,i.__composer,d));const m=h.unmount;h.unmount=()=>{p&&p(),d.dispose(),m()}},get global(){return i},dispose(){r.stop()},__instances:o,__getInstance:l,__setInstance:c,__deleteInstance:u};return d}function Hl(t={}){const e=ys();if(e==null)throw cs(Qn.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw cs(Qn.NOT_INSTALLED);const n=xz(e),s=Cz(n),o=M$(e),r=wz(t,o);if(r==="global")return B$(s,t,o),s;if(r==="parent"){let l=_z(n,e,t.__useComponent);return l==null&&(l=s),l}const i=n;let a=i.__getInstance(e);if(a==null){const l=hn({},t);"__i18n"in o&&(l.__i18n=o.__i18n),s&&(l.__root=s),a=My(l),i.__composerExtend&&(a[rb]=i.__composerExtend(a)),Iz(i,e,a),i.__setInstance(e,a)}return a}function yz(t,e,n){const s=HI(),o=__VUE_I18N_LEGACY_API__&&e?s.run(()=>ib(t)):s.run(()=>My(t));if(o==null)throw cs(Qn.UNEXPECTED_ERROR);return[s,o]}function xz(t){const e=On(t.isCE?vz:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw cs(t.isCE?Qn.NOT_INSTALLED_WITH_PROVIDE:Qn.UNEXPECTED_ERROR);return e}function wz(t,e){return gp(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Cz(t){return t.mode==="composition"?t.global:t.global.__composer}function _z(t,e,n=!1){let s=null;const o=e.root;let r=Sz(e,n);for(;r!=null;){const i=t;if(t.mode==="composition")s=i.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const a=i.__getInstance(r);a!=null&&(s=a.__composer,n&&s&&!s[P$]&&(s=null))}if(s!=null||o===r)break;r=r.parent}return s}function Sz(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Iz(t,e,n){ur(()=>{},e),ip(()=>{const s=n;t.__deleteInstance(e);const o=s[rb];o&&(o(),delete s[rb])},e)}const Ez=["locale","fallbackLocale","availableLocales"],l_=["t","rt","d","n","tm","te"];function kz(t,e){const n=Object.create(null);return Ez.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r)throw cs(Qn.UNEXPECTED_ERROR);const i=Ht(r.value)?{get(){return r.value.value},set(a){r.value.value=a}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,o,i)}),t.config.globalProperties.$i18n=n,l_.forEach(o=>{const r=Object.getOwnPropertyDescriptor(e,o);if(!r||!r.value)throw cs(Qn.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${o}`,r)}),()=>{delete t.config.globalProperties.$i18n,l_.forEach(o=>{delete t.config.globalProperties[`$${o}`]})}}oz();Fj(vj);Pj(Dj);Mj(E$);if(__INTLIFY_PROD_DEVTOOLS__){const t=Pi();t.__INTLIFY__=!0,bj(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const $z="About us",Tz="Browser",Nz="Contact us",Az="Documentation",Rz="Feedback",Dz="Found a bug?",Oz="Grammatical Case",Lz="Gender",Fz="Live demo",Pz="Military",Mz="бета-тестування",Bz={aboutUs:$z,"aboutUs.author1":"Tetyana Tolochko","aboutUs.author1.responsibility":"Linguistics and philology","aboutUs.author2":"Oleksandr Tolochko","aboutUs.author2.responsibility":"Original idea and development","aboutUs.author3":"Anna Tolochko","aboutUs.author3.responsibility":"Machine learning and data analysis","aboutUs.tribute":"This work is dedicated to the memory of Tetyana Tolochko, whose legacy we strive to continue.","action.backToHome":"Navigate to homepage","action.close":"Close","action.copy":"Copy","action.copyLink":"Copy link address","action.send":"Send","action.tryItOut":"Try it out","action.write":"Write","anthroponym.militaryRank":"Military Rank","anthroponym.militaryAppointment":"Military Appointment","anthroponym.familyName":"Family Name","anthroponym.givenName":"Given Name","anthroponym.patronymicName":"Patronymic Name",browser:Tz,contactUs:Nz,"contactUs.message":"Please feel free to contact us via email if you have any questions or suggestions.","contactUs.messageSubject":"{appName} - Contact us","contactUs.recipientEmail":"Email address","declension.confirmCorrection":"Yes, fix it!","declension.copyResult":"Use the buttons below to copy the declension results.","declension.correctionMessage":"Do you want to replace {incorrectSpelling} with {correctSpelling} according to the latest spelling rules?","declension.inflect":"Inflect","declension.instruction":"Select a grammatical gender and fill in a personal name in a nominative case.","declension.shareResult":"Share the result of declension","declension.results":"Declension Result",documentation:Az,"documentation.apiSpec":"API Specification","documentation.howItWorks":"How It Works?","documentation.installation":"Installation","documentation.navigateToFullVersion":"Navigate to full version","documentation.navigateToExtensionPage":"Navigate to the extension page","documentation.usageExample":"Usage Example","error.404.message":"The requested page was not found","error.404.title":"404 Error",feedback:Rz,foundBug:Dz,grammaticalCase:Oz,"grammaticalCase.ablative":"Ablative","grammaticalCase.accusative":"Accusative","grammaticalCase.dative":"Dative","grammaticalCase.genitive":"Genitive","grammaticalCase.locative":"Locative","grammaticalCase.nominative":"Nominative","grammaticalCase.vocative":"Vocative",grammaticalGender:Lz,"grammaticalGender.autoDetection":"Automatic grammatical gender detection by first name or patronymic name.","grammaticalGender.detectionFailed":"Failed to detect grammatical gender by first name or patronymic name. Select grammatical gender manually.","grammaticalGender.feminine":"Feminine","grammaticalGender.masculine":"Masculine","grammaticalGender.undefined":"Auto","library.issueReport":"Issue Report","library.license":"License","library.links":"Links",liveDemo:Fz,"liveDemo.message":"declension of Ukrainian family names, given names, patronymic names",new:"New","socialShare.facebook":"Share on Facebook","socialShare.linkedIn":"Share on LinkedIn","socialShare.twitter":"Share on Twitter","website.description":"Online declension of Ukrainian family names (last names), given names (first names), and patronymic names.","website.keywords":"ukrainian language, anthroponym declension, personal name declension, given name declension, first name declension, patronymic name declension, patronymic declension, family name declension, surname declension, word declension, declension, word inflection, nominative case, genitive case, dative case, accusative case, ablative case, locative case, vocative case","website.language":"Language","website.locale.en-US":"English","website.locale.uk-UA":"Українська","website.longTitle":"Open-source JavaScript library for declension of Ukrainian personal names","website.title":"Declension of Ukrainian anthroponyms","website.longTitle.military":"The extension for declension of Ukrainian military ranks and appointments","website.title.military":"Declension of of Ukrainian military ranks and appointments","website.description.military":"Online declension of military ranks and appointments.","website.keywords.military":"declension of military ranks, declension of military appointments, nominative case, genitive case, dative case, accusative case, ablative case, locative case, vocative case","liveDemo.message.military":"declension of Ukrainian military ranks and appointments",forMilitary:Pz,beta:Mz},Vz="Про авторів",Uz="Браузер",jz="Зворотний зв'язок",zz="Документація",Wz="Зворотний зв'язок",Gz="Знайшли помилку?",Hz="Граматичний відмінок",Kz="Граматичний рід",qz="Демонстрація",Xz="Військовим",Qz="бета-тестування",Yz={aboutUs:Vz,"aboutUs.author1":"Вчитель-методист Толочко Тетяна Григорівна","aboutUs.author1.responsibility":"Мовознавство та філологія","aboutUs.author2":"Толочко Олександр","aboutUs.author2.responsibility":"Ідея та розробка","aboutUs.author3":"Толочко Анна","aboutUs.author3.responsibility":"Машинне навчання та аналіз даних","aboutUs.tribute":"Ця робота присвячена пам'яті Толочко Тетяни Григорівни, чиє спадкове надбання ми прагнемо продовжити.","action.backToHome":"Повернутися на головну сторінку","action.close":"Закрити","action.copy":"Скопіювати","action.copyLink":"Скопіювати адресу посилання","action.send":"Надіслати","action.tryItOut":"Спробувати","action.write":"Написати","anthroponym.militaryRank":"Військове звання","anthroponym.militaryAppointment":"Військова посада","anthroponym.familyName":"Прізвище","anthroponym.givenName":"Ім'я","anthroponym.patronymicName":"По батькові",browser:Uz,contactUs:jz,"contactUs.message":"Надішліть email на адресу нижче, якщо у вас виникли будь-які питання чи пропозиції.","contactUs.messageSubject":"{appName} - Зворотний зв'язок","contactUs.recipientEmail":"Електронна пошта","declension.confirmCorrection":"Так, виправити!","declension.copyResult":"Використовуйте кнопки нижче, щоб скопіювати результати відмінювання.","declension.correctionMessage":"Бажаєте виправити {incorrectSpelling} на {correctSpelling} згідно з правилами правопису 2019 року?","declension.inflect":"Провідміняти","declension.instruction":"Виберіть граматичний рід та введіть прізвище, ім'я по батькові в називному відмінку однини.","declension.shareResult":"Поділитися результатом відмінювання","declension.results":"Результат відмінювання",documentation:zz,"documentation.apiSpec":"Специфікація API","documentation.howItWorks":"Принцип роботи","documentation.installation":"Встановлення","documentation.navigateToFullVersion":"Перейти до повної версії","documentation.navigateToExtensionPage":"Перейти до сторінки розширення","documentation.usageExample":"Приклад використання","error.404.message":"Сторінки за заданою адресою не існує","error.404.title":"Помилка 404",feedback:Wz,foundBug:Gz,grammaticalCase:Hz,"grammaticalCase.ablative":"Орудний (ким?)","grammaticalCase.accusative":"Знахідний (кого?)","grammaticalCase.dative":"Давальний (кому?)","grammaticalCase.genitive":"Родовий (кого?)","grammaticalCase.locative":"Місцевий (при кому?)","grammaticalCase.nominative":"Називний (хто?)","grammaticalCase.vocative":"Кличний",grammaticalGender:Kz,"grammaticalGender.autoDetection":"Автоматичне визначення граматичного роду відбувається за ім'ям по батькові.","grammaticalGender.detectionFailed":"Не вдалося визначити граматичний рід за ім'ям по батькові. Виберіть граматичний рід вручну.","grammaticalGender.feminine":"Жіночий","grammaticalGender.masculine":"Чоловічий","grammaticalGender.undefined":"Авто","library.issueReport":"Звіт про помилку","library.license":"Ліцензія","library.links":"Посилання",liveDemo:qz,"liveDemo.message":"відмінювання українських прізвищ, імен по батькові",new:"Новинка","socialShare.facebook":"Поділитися через Facebook","socialShare.linkedIn":"Поділитися через LinkedIn","socialShare.twitter":"Поділитися через Twitter","website.description":"Відмінювання прізвищ, імен по батькові онлайн. Провідміняти прізвище, ім'я по батькові за відмінками.","website.keywords":"відмінювання ПІБ, відмінювання імен, відмінювання по батькові, відмінювання прізвищ, відмінювання чоловічих прізвищ, відмінювання жіночих прізвищ, називний відмінок, родовий відмінок, давальний відмінок, знахідний відмінок, орудний відмінок, місцевий відмінок, кличний відмінок","website.language":"Мова","website.locale.en-US":"English","website.locale.uk-UA":"Українська","website.longTitle":"JavaScript бібліотека з відкритим кодом для відмінювання українських антропонімів","website.title":"Відмінювання українських антропонімів","website.longTitle.military":"Розширення до бібліотеки для відмінювання українських військових звань та посад","website.title.military":"Відмінювання українських військових звань та посад","website.description.military":"Відмінювання українських військових звань та посад онлайн. Провідміняти військове звання та посаду за відмінками.","website.keywords.military":"відмінювання військових звань, відмінювання військових посад, називний відмінок, родовий відмінок, давальний відмінок, знахідний відмінок, орудний відмінок, місцевий відмінок, кличний відмінок","liveDemo.message.military":"відмінювання українських військових звань та посад",forMilitary:Xz,beta:Qz},Vy="uk-UA",Jz="en-US",Zz=mo(({vueApp:t})=>{const e=bz({legacy:!1,globalInjection:!0,messageResolver:(o,r)=>{const i=o[r];return i??null},locale:Vy,fallbackLocale:Jz,messages:{"en-US":Bz,"uk-UA":Yz}});t.use(e);const n=Fn(),s=n.resolve.bind(n);n.resolve=function(o,r,i){const a=s(o,r,i);return a.href=c_(e.global.locale.value,a.href),a},n.beforeEach((o,r,i)=>{if(r==null){i();return}const a=c_(e.global.locale.value,o.fullPath);if(a!==o.fullPath){i(a);return}i()})});function c_(t,e){if(t===Vy)return e;const n=`/${t}`;return e.startsWith(n)?e:`${n}${e}`}const eW=[l4,u4,kV,TV,NV,AV,DV,OV,LV,LU,Zz],tW=fn({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const e=t.renderKey,n=t.route,s={};for(const o in t.route)Object.defineProperty(s,o,{get:()=>e===t.renderKey?t.route[o]:n[o],enumerable:!0});return Hi(Eu,nr(s)),()=>Gt(t.vnode,{ref:t.vnodeRef})}}),nW=fn({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:e,slots:n,expose:s}){const o=Ct(),r=Ot(),i=On(Eu,null);let a;s({pageRef:r});const l=On(kk,null);let c;const u=o.deferHydration();if(o.isHydrating){const d=o.hooks.hookOnce("app:error",u);Fn().beforeEach(d)}return t.pageKey&&ls(()=>t.pageKey,(d,h)=>{d!==h&&o.callHook("page:loading:start")}),()=>Gt(i$,{name:t.name,route:t.route,...e},{default:d=>{const h=oW(i,d.route,d.Component),f=i&&i.matched.length===d.route.matched.length;if(!d.Component){if(c&&!f)return c;u();return}if(c&&l&&!l.isCurrent(d.route))return c;if(h&&i&&(!l||l!=null&&l.isCurrent(i)))return f?c:null;const p=qv(d,t.pageKey);!o.isHydrating&&!rW(i,d.route,d.Component)&&a===p&&o.callHook("page:loading:end"),a=p;const m=!!(t.transition??d.route.meta.pageTransition??Ov),v=m&&sW([t.transition,d.route.meta.pageTransition,Ov,{onAfterLeave:()=>{o.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),g=t.keepalive??d.route.meta.keepalive??x3;return c=a$(rk,m&&v,pV(g,Gt(vy,{suspensible:!0,onPending:()=>o.callHook("page:start",d.Component),onResolve:()=>{Wl(()=>o.callHook("page:finish",d.Component).then(()=>o.callHook("page:loading:end")).finally(u))}},{default:()=>{const b=Gt(tW,{key:p||void 0,vnode:n.default?Gt(Xt,void 0,n.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:m,vnodeRef:r});return g&&(b.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),b}}))).default(),c}})}});function sW(t){const e=t.map(n=>({...n,onAfterLeave:n.onAfterLeave?ky(n.onAfterLeave):void 0}));return Ik(...e)}function oW(t,e,n){if(!t)return!1;const s=e.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(n==null?void 0:n.type)});return!s||s===-1?!1:e.matched.slice(0,s).some((o,r)=>{var i,a,l;return((i=o.components)==null?void 0:i.default)!==((l=(a=t.matched[r])==null?void 0:a.components)==null?void 0:l.default)})||n&&qv({route:e,Component:n})!==qv({route:t,Component:n})}function rW(t,e,n){return t?e.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(n==null?void 0:n.type)})<e.matched.length-1:!1}const iW=fn({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup(t,e){const n=await Dr[t.name]().then(s=>s.default||s);return()=>Gt(n,t.layoutProps,e.slots)}}),j$=fn({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(t,e){const n=Ct(),s=On(Eu),o=s===Gl()?hV():s,r=et(()=>{let l=je(t.name)??o.meta.layout??"default";return l&&!(l in Dr)&&t.fallback&&(l=je(t.fallback)),l}),i=Ot();e.expose({layoutRef:i});const a=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",a);Fn().beforeEach(l)}return()=>{const l=r.value&&r.value in Dr,c=o.meta.layoutTransition??y3;return a$(rk,l&&c,{default:()=>Gt(vy,{suspensible:!0,onResolve:()=>{Wl(a)}},{default:()=>Gt(aW,{layoutProps:ZE(e.attrs,{ref:i}),key:r.value||void 0,name:r.value,shouldProvide:!t.name,hasTransition:!!c},e.slots)})}).default()}}}),aW=fn({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup(t,e){const n=t.name;return t.shouldProvide&&Hi(kk,{isCurrent:s=>n===(s.meta.layout??"default")}),()=>{var s,o;return!n||typeof n=="string"&&!(n in Dr)?(o=(s=e.slots).default)==null?void 0:o.call(s):Gt(iW,{key:n,layoutProps:t.layoutProps,name:n},e.slots)}}});var Kn="top",xs="bottom",ws="right",qn="left",yp="auto",Kl=[Kn,xs,ws,qn],ea="start",Il="end",z$="clippingParents",Uy="viewport",Ha="popper",W$="reference",ab=Kl.reduce(function(t,e){return t.concat([e+"-"+ea,e+"-"+Il])},[]),jy=[].concat(Kl,[yp]).reduce(function(t,e){return t.concat([e,e+"-"+ea,e+"-"+Il])},[]),G$="beforeRead",H$="read",K$="afterRead",q$="beforeMain",X$="main",Q$="afterMain",Y$="beforeWrite",J$="write",Z$="afterWrite",eT=[G$,H$,K$,q$,X$,Q$,Y$,J$,Z$];function Bo(t){return t?(t.nodeName||"").toLowerCase():null}function Cs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ta(t){var e=Cs(t).Element;return t instanceof e||t instanceof Element}function Bs(t){var e=Cs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function zy(t){if(typeof ShadowRoot>"u")return!1;var e=Cs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function lW(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},o=e.attributes[n]||{},r=e.elements[n];!Bs(r)||!Bo(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(i){var a=o[i];a===!1?r.removeAttribute(i):r.setAttribute(i,a===!0?"":a)}))})}function cW(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var o=e.elements[s],r=e.attributes[s]||{},i=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),a=i.reduce(function(l,c){return l[c]="",l},{});!Bs(o)||!Bo(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}const Wy={name:"applyStyles",enabled:!0,phase:"write",fn:lW,effect:cW,requires:["computeStyles"]};function Ao(t){return t.split("-")[0]}var qi=Math.max,ff=Math.min,El=Math.round;function lb(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function tT(){return!/^((?!chrome|android).)*safari/i.test(lb())}function kl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),o=1,r=1;e&&Bs(t)&&(o=t.offsetWidth>0&&El(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&El(s.height)/t.offsetHeight||1);var i=ta(t)?Cs(t):window,a=i.visualViewport,l=!tT()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/o,u=(s.top+(l&&a?a.offsetTop:0))/r,d=s.width/o,h=s.height/r;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Gy(t){var e=kl(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function nT(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zy(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function dr(t){return Cs(t).getComputedStyle(t)}function uW(t){return["table","td","th"].indexOf(Bo(t))>=0}function li(t){return((ta(t)?t.ownerDocument:t.document)||window.document).documentElement}function xp(t){return Bo(t)==="html"?t:t.assignedSlot||t.parentNode||(zy(t)?t.host:null)||li(t)}function u_(t){return!Bs(t)||dr(t).position==="fixed"?null:t.offsetParent}function dW(t){var e=/firefox/i.test(lb()),n=/Trident/i.test(lb());if(n&&Bs(t)){var s=dr(t);if(s.position==="fixed")return null}var o=xp(t);for(zy(o)&&(o=o.host);Bs(o)&&["html","body"].indexOf(Bo(o))<0;){var r=dr(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function $u(t){for(var e=Cs(t),n=u_(t);n&&uW(n)&&dr(n).position==="static";)n=u_(n);return n&&(Bo(n)==="html"||Bo(n)==="body"&&dr(n).position==="static")?e:n||dW(t)||e}function Hy(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function jc(t,e,n){return qi(t,ff(e,n))}function hW(t,e,n){var s=jc(t,e,n);return s>n?n:s}function sT(){return{top:0,right:0,bottom:0,left:0}}function oT(t){return Object.assign({},sT(),t)}function rT(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var fW=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,oT(typeof e!="number"?e:rT(e,Kl))};function pW(t){var e,n=t.state,s=t.name,o=t.options,r=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Ao(n.placement),l=Hy(a),c=[qn,ws].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!i)){var d=fW(o.padding,n),h=Gy(r),f=l==="y"?Kn:qn,p=l==="y"?xs:ws,m=n.rects.reference[u]+n.rects.reference[l]-i[l]-n.rects.popper[u],v=i[l]-n.rects.reference[l],g=$u(r),b=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,x=m/2-v/2,y=d[f],w=b-h[u]-d[p],C=b/2-h[u]/2+x,_=jc(y,C,w),S=l;n.modifiersData[s]=(e={},e[S]=_,e.centerOffset=_-C,e)}}function mW(t){var e=t.state,n=t.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||nT(e.elements.popper,o)&&(e.elements.arrow=o))}const iT={name:"arrow",enabled:!0,phase:"main",fn:pW,effect:mW,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $l(t){return t.split("-")[1]}var gW={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vW(t,e){var n=t.x,s=t.y,o=e.devicePixelRatio||1;return{x:El(n*o)/o||0,y:El(s*o)/o||0}}function d_(t){var e,n=t.popper,s=t.popperRect,o=t.placement,r=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=i.x,f=h===void 0?0:h,p=i.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var g=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),x=qn,y=Kn,w=window;if(c){var C=$u(n),_="clientHeight",S="clientWidth";if(C===Cs(n)&&(C=li(n),dr(C).position!=="static"&&a==="absolute"&&(_="scrollHeight",S="scrollWidth")),C=C,o===Kn||(o===qn||o===ws)&&r===Il){y=xs;var I=d&&C===w&&w.visualViewport?w.visualViewport.height:C[_];m-=I-s.height,m*=l?1:-1}if(o===qn||(o===Kn||o===xs)&&r===Il){x=ws;var E=d&&C===w&&w.visualViewport?w.visualViewport.width:C[S];f-=E-s.width,f*=l?1:-1}}var O=Object.assign({position:a},c&&gW),A=u===!0?vW({x:f,y:m},Cs(n)):{x:f,y:m};if(f=A.x,m=A.y,l){var P;return Object.assign({},O,(P={},P[y]=b?"0":"",P[x]=g?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",P))}return Object.assign({},O,(e={},e[y]=b?m+"px":"",e[x]=g?f+"px":"",e.transform="",e))}function bW(t){var e=t.state,n=t.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,i=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ao(e.placement),variation:$l(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,d_(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,d_(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ky={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bW,data:{}};var dh={passive:!0};function yW(t){var e=t.state,n=t.instance,s=t.options,o=s.scroll,r=o===void 0?!0:o,i=s.resize,a=i===void 0?!0:i,l=Cs(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,dh)}),a&&l.addEventListener("resize",n.update,dh),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,dh)}),a&&l.removeEventListener("resize",n.update,dh)}}const qy={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yW,data:{}};var xW={left:"right",right:"left",bottom:"top",top:"bottom"};function Ph(t){return t.replace(/left|right|bottom|top/g,function(e){return xW[e]})}var wW={start:"end",end:"start"};function h_(t){return t.replace(/start|end/g,function(e){return wW[e]})}function Xy(t){var e=Cs(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Qy(t){return kl(li(t)).left+Xy(t).scrollLeft}function CW(t,e){var n=Cs(t),s=li(t),o=n.visualViewport,r=s.clientWidth,i=s.clientHeight,a=0,l=0;if(o){r=o.width,i=o.height;var c=tT();(c||!c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:i,x:a+Qy(t),y:l}}function _W(t){var e,n=li(t),s=Xy(t),o=(e=t.ownerDocument)==null?void 0:e.body,r=qi(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=qi(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-s.scrollLeft+Qy(t),l=-s.scrollTop;return dr(o||n).direction==="rtl"&&(a+=qi(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:i,x:a,y:l}}function Yy(t){var e=dr(t),n=e.overflow,s=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function aT(t){return["html","body","#document"].indexOf(Bo(t))>=0?t.ownerDocument.body:Bs(t)&&Yy(t)?t:aT(xp(t))}function zc(t,e){var n;e===void 0&&(e=[]);var s=aT(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),r=Cs(s),i=o?[r].concat(r.visualViewport||[],Yy(s)?s:[]):s,a=e.concat(i);return o?a:a.concat(zc(xp(i)))}function cb(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function SW(t,e){var n=kl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function f_(t,e,n){return e===Uy?cb(CW(t,n)):ta(e)?SW(e,n):cb(_W(li(t)))}function IW(t){var e=zc(xp(t)),n=["absolute","fixed"].indexOf(dr(t).position)>=0,s=n&&Bs(t)?$u(t):t;return ta(s)?e.filter(function(o){return ta(o)&&nT(o,s)&&Bo(o)!=="body"}):[]}function EW(t,e,n,s){var o=e==="clippingParents"?IW(t):[].concat(e),r=[].concat(o,[n]),i=r[0],a=r.reduce(function(l,c){var u=f_(t,c,s);return l.top=qi(u.top,l.top),l.right=ff(u.right,l.right),l.bottom=ff(u.bottom,l.bottom),l.left=qi(u.left,l.left),l},f_(t,i,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lT(t){var e=t.reference,n=t.element,s=t.placement,o=s?Ao(s):null,r=s?$l(s):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(o){case Kn:l={x:i,y:e.y-n.height};break;case xs:l={x:i,y:e.y+e.height};break;case ws:l={x:e.x+e.width,y:a};break;case qn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?Hy(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case ea:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Il:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Tl(t,e){e===void 0&&(e={});var n=e,s=n.placement,o=s===void 0?t.placement:s,r=n.strategy,i=r===void 0?t.strategy:r,a=n.boundary,l=a===void 0?z$:a,c=n.rootBoundary,u=c===void 0?Uy:c,d=n.elementContext,h=d===void 0?Ha:d,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,v=m===void 0?0:m,g=oT(typeof v!="number"?v:rT(v,Kl)),b=h===Ha?W$:Ha,x=t.rects.popper,y=t.elements[p?b:h],w=EW(ta(y)?y:y.contextElement||li(t.elements.popper),l,u,i),C=kl(t.elements.reference),_=lT({reference:C,element:x,strategy:"absolute",placement:o}),S=cb(Object.assign({},x,_)),I=h===Ha?S:C,E={top:w.top-I.top+g.top,bottom:I.bottom-w.bottom+g.bottom,left:w.left-I.left+g.left,right:I.right-w.right+g.right},O=t.modifiersData.offset;if(h===Ha&&O){var A=O[o];Object.keys(E).forEach(function(P){var z=[ws,xs].indexOf(P)>=0?1:-1,G=[Kn,xs].indexOf(P)>=0?"y":"x";E[P]+=A[G]*z})}return E}function kW(t,e){e===void 0&&(e={});var n=e,s=n.placement,o=n.boundary,r=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?jy:l,u=$l(s),d=u?a?ab:ab.filter(function(p){return $l(p)===u}):Kl,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=Tl(t,{placement:m,boundary:o,rootBoundary:r,padding:i})[Ao(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function $W(t){if(Ao(t)===yp)return[];var e=Ph(t);return[h_(t),e,h_(e)]}function TW(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,v=e.options.placement,g=Ao(v),b=g===v,x=l||(b||!p?[Ph(v)]:$W(v)),y=[v].concat(x).reduce(function(ye,fe){return ye.concat(Ao(fe)===yp?kW(e,{placement:fe,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),w=e.rects.reference,C=e.rects.popper,_=new Map,S=!0,I=y[0],E=0;E<y.length;E++){var O=y[E],A=Ao(O),P=$l(O)===ea,z=[Kn,xs].indexOf(A)>=0,G=z?"width":"height",M=Tl(e,{placement:O,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=z?P?ws:qn:P?xs:Kn;w[G]>C[G]&&(R=Ph(R));var D=Ph(R),j=[];if(r&&j.push(M[A]<=0),a&&j.push(M[R]<=0,M[D]<=0),j.every(function(ye){return ye})){I=O,S=!1;break}_.set(O,j)}if(S)for(var ne=p?3:1,re=function(fe){var ge=y.find(function(q){var ue=_.get(q);if(ue)return ue.slice(0,fe).every(function(ce){return ce})});if(ge)return I=ge,"break"},de=ne;de>0;de--){var he=re(de);if(he==="break")break}e.placement!==I&&(e.modifiersData[s]._skip=!0,e.placement=I,e.reset=!0)}}const cT={name:"flip",enabled:!0,phase:"main",fn:TW,requiresIfExists:["offset"],data:{_skip:!1}};function p_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function m_(t){return[Kn,ws,xs,qn].some(function(e){return t[e]>=0})}function NW(t){var e=t.state,n=t.name,s=e.rects.reference,o=e.rects.popper,r=e.modifiersData.preventOverflow,i=Tl(e,{elementContext:"reference"}),a=Tl(e,{altBoundary:!0}),l=p_(i,s),c=p_(a,o,r),u=m_(l),d=m_(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const uT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:NW};function AW(t,e,n){var s=Ao(t),o=[qn,Kn].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=r[0],a=r[1];return i=i||0,a=(a||0)*o,[qn,ws].indexOf(s)>=0?{x:a,y:i}:{x:i,y:a}}function RW(t){var e=t.state,n=t.options,s=t.name,o=n.offset,r=o===void 0?[0,0]:o,i=jy.reduce(function(u,d){return u[d]=AW(d,e.rects,r),u},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[s]=i}const dT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:RW};function DW(t){var e=t.state,n=t.name;e.modifiersData[n]=lT({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Jy={name:"popperOffsets",enabled:!0,phase:"read",fn:DW,data:{}};function OW(t){return t==="x"?"y":"x"}function LW(t){var e=t.state,n=t.options,s=t.name,o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,v=Tl(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=Ao(e.placement),b=$l(e.placement),x=!b,y=Hy(g),w=OW(y),C=e.modifiersData.popperOffsets,_=e.rects.reference,S=e.rects.popper,I=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,E=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(C){if(r){var P,z=y==="y"?Kn:qn,G=y==="y"?xs:ws,M=y==="y"?"height":"width",R=C[y],D=R+v[z],j=R-v[G],ne=f?-S[M]/2:0,re=b===ea?_[M]:S[M],de=b===ea?-S[M]:-_[M],he=e.elements.arrow,ye=f&&he?Gy(he):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:sT(),ge=fe[z],q=fe[G],ue=jc(0,_[M],ye[M]),ce=x?_[M]/2-ne-ue-ge-E.mainAxis:re-ue-ge-E.mainAxis,pe=x?-_[M]/2+ne+ue+q+E.mainAxis:de+ue+q+E.mainAxis,Se=e.elements.arrow&&$u(e.elements.arrow),De=Se?y==="y"?Se.clientTop||0:Se.clientLeft||0:0,N=(P=O==null?void 0:O[y])!=null?P:0,L=R+ce-N-De,K=R+pe-N,oe=jc(f?ff(D,L):D,R,f?qi(j,K):j);C[y]=oe,A[y]=oe-R}if(a){var se,k=y==="x"?Kn:qn,T=y==="x"?xs:ws,U=C[w],Y=w==="y"?"height":"width",ee=U+v[k],ve=U-v[T],B=[Kn,qn].indexOf(g)!==-1,Z=(se=O==null?void 0:O[w])!=null?se:0,Ce=B?ee:U-_[Y]-S[Y]-Z+E.altAxis,ie=B?U+_[Y]+S[Y]-Z-E.altAxis:ve,be=f&&B?hW(Ce,U,ie):jc(f?Ce:ee,U,f?ie:ve);C[w]=be,A[w]=be-U}e.modifiersData[s]=A}}const hT={name:"preventOverflow",enabled:!0,phase:"main",fn:LW,requiresIfExists:["offset"]};function FW(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function PW(t){return t===Cs(t)||!Bs(t)?Xy(t):FW(t)}function MW(t){var e=t.getBoundingClientRect(),n=El(e.width)/t.offsetWidth||1,s=El(e.height)/t.offsetHeight||1;return n!==1||s!==1}function BW(t,e,n){n===void 0&&(n=!1);var s=Bs(e),o=Bs(e)&&MW(e),r=li(e),i=kl(t,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Bo(e)!=="body"||Yy(r))&&(a=PW(e)),Bs(e)?(l=kl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Qy(r))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function VW(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function o(r){n.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&o(l)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||o(r)}),s}function UW(t){var e=VW(t);return eT.reduce(function(n,s){return n.concat(e.filter(function(o){return o.phase===s}))},[])}function jW(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function zW(t){var e=t.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var g_={placement:"bottom",modifiers:[],strategy:"absolute"};function v_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function wp(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,o=e.defaultOptions,r=o===void 0?g_:o;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},g_,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(g){var b=typeof g=="function"?g(u.options):g;m(),u.options=Object.assign({},r,u.options,b),u.scrollParents={reference:ta(a)?zc(a):a.contextElement?zc(a.contextElement):[],popper:zc(l)};var x=UW(zW([].concat(s,u.options.modifiers)));return u.orderedModifiers=x.filter(function(y){return y.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var g=u.elements,b=g.reference,x=g.popper;if(v_(b,x)){u.rects={reference:BW(b,$u(x),u.options.strategy==="fixed"),popper:Gy(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var w=u.orderedModifiers[y],C=w.fn,_=w.options,S=_===void 0?{}:_,I=w.name;typeof C=="function"&&(u=C({state:u,options:S,name:I,instance:f})||u)}}}},update:jW(function(){return new Promise(function(v){f.forceUpdate(),v(u)})}),destroy:function(){m(),h=!0}};if(!v_(a,l))return f;f.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function p(){u.orderedModifiers.forEach(function(v){var g=v.name,b=v.options,x=b===void 0?{}:b,y=v.effect;if(typeof y=="function"){var w=y({state:u,name:g,instance:f,options:x}),C=function(){};d.push(w||C)}})}function m(){d.forEach(function(v){return v()}),d=[]}return f}}var WW=wp(),GW=[qy,Jy,Ky,Wy],HW=wp({defaultModifiers:GW}),KW=[qy,Jy,Ky,Wy,dT,cT,hT,iT,uT],Zy=wp({defaultModifiers:KW});const fT=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Q$,afterRead:K$,afterWrite:Z$,applyStyles:Wy,arrow:iT,auto:yp,basePlacements:Kl,beforeMain:q$,beforeRead:G$,beforeWrite:Y$,bottom:xs,clippingParents:z$,computeStyles:Ky,createPopper:Zy,createPopperBase:WW,createPopperLite:HW,detectOverflow:Tl,end:Il,eventListeners:qy,flip:cT,hide:uT,left:qn,main:X$,modifierPhases:eT,offset:dT,placements:jy,popper:Ha,popperGenerator:wp,popperOffsets:Jy,preventOverflow:hT,read:H$,reference:W$,right:ws,start:ea,top:Kn,variationPlacements:ab,viewport:Uy,write:J$},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Er=new Map,Rg={set(t,e,n){Er.has(t)||Er.set(t,new Map);const s=Er.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,n)},get(t,e){return Er.has(t)&&Er.get(t).get(e)||null},remove(t,e){if(!Er.has(t))return;const n=Er.get(t);n.delete(e),n.size===0&&Er.delete(t)}},qW=1e6,XW=1e3,ub="transitionend",pT=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),QW=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),YW=t=>{do t+=Math.floor(Math.random()*qW);while(document.getElementById(t));return t},JW=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),o=Number.parseFloat(n);return!s&&!o?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*XW)},mT=t=>{t.dispatchEvent(new Event(ub))},ar=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Kr=t=>ar(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(pT(t)):null,ql=t=>{if(!ar(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const s=t.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return e},qr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",gT=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?gT(t.parentNode):null},pf=()=>{},Tu=t=>{t.offsetHeight},vT=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Dg=[],ZW=t=>{document.readyState==="loading"?(Dg.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Dg)e()}),Dg.push(t)):t()},Us=()=>document.documentElement.dir==="rtl",Gs=t=>{ZW(()=>{const e=vT();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}})},ss=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,bT=(t,e,n=!0)=>{if(!n){ss(t);return}const o=JW(e)+5;let r=!1;const i=({target:a})=>{a===e&&(r=!0,e.removeEventListener(ub,i),ss(t))};e.addEventListener(ub,i),setTimeout(()=>{r||mT(e)},o)},e0=(t,e,n,s)=>{const o=t.length;let r=t.indexOf(e);return r===-1?!n&&s?t[o-1]:t[0]:(r+=n?1:-1,s&&(r=(r+o)%o),t[Math.max(0,Math.min(r,o-1))])},eG=/[^.]*(?=\..*)\.|.*/,tG=/\..*/,nG=/::\d+$/,Og={};let b_=1;const yT={mouseenter:"mouseover",mouseleave:"mouseout"},sG=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function xT(t,e){return e&&`${e}::${b_++}`||t.uidEvent||b_++}function wT(t){const e=xT(t);return t.uidEvent=e,Og[e]=Og[e]||{},Og[e]}function oG(t,e){return function n(s){return t0(s,{delegateTarget:t}),n.oneOff&&xe.off(t,s.type,e),e.apply(t,[s])}}function rG(t,e,n){return function s(o){const r=t.querySelectorAll(e);for(let{target:i}=o;i&&i!==this;i=i.parentNode)for(const a of r)if(a===i)return t0(o,{delegateTarget:i}),s.oneOff&&xe.off(t,o.type,e,n),n.apply(i,[o])}}function CT(t,e,n=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===n)}function _T(t,e,n){const s=typeof e=="string",o=s?n:e||n;let r=ST(t);return sG.has(r)||(r=t),[s,o,r]}function y_(t,e,n,s,o){if(typeof e!="string"||!t)return;let[r,i,a]=_T(e,n,s);e in yT&&(i=(p=>function(m){if(!m.relatedTarget||m.relatedTarget!==m.delegateTarget&&!m.delegateTarget.contains(m.relatedTarget))return p.call(this,m)})(i));const l=wT(t),c=l[a]||(l[a]={}),u=CT(c,i,r?n:null);if(u){u.oneOff=u.oneOff&&o;return}const d=xT(i,e.replace(eG,"")),h=r?rG(t,n,i):oG(t,i);h.delegationSelector=r?n:null,h.callable=i,h.oneOff=o,h.uidEvent=d,c[d]=h,t.addEventListener(a,h,r)}function db(t,e,n,s,o){const r=CT(e[n],s,o);r&&(t.removeEventListener(n,r,!!o),delete e[n][r.uidEvent])}function iG(t,e,n,s){const o=e[n]||{};for(const[r,i]of Object.entries(o))r.includes(s)&&db(t,e,n,i.callable,i.delegationSelector)}function ST(t){return t=t.replace(tG,""),yT[t]||t}const xe={on(t,e,n,s){y_(t,e,n,s,!1)},one(t,e,n,s){y_(t,e,n,s,!0)},off(t,e,n,s){if(typeof e!="string"||!t)return;const[o,r,i]=_T(e,n,s),a=i!==e,l=wT(t),c=l[i]||{},u=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;db(t,l,i,r,o?n:null);return}if(u)for(const d of Object.keys(l))iG(t,l,d,e.slice(1));for(const[d,h]of Object.entries(c)){const f=d.replace(nG,"");(!a||e.includes(f))&&db(t,l,i,h.callable,h.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const s=vT(),o=ST(e),r=e!==o;let i=null,a=!0,l=!0,c=!1;r&&s&&(i=s.Event(e,n),s(t).trigger(i),a=!i.isPropagationStopped(),l=!i.isImmediatePropagationStopped(),c=i.isDefaultPrevented());const u=t0(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&i&&i.preventDefault(),u}};function t0(t,e={}){for(const[n,s]of Object.entries(e))try{t[n]=s}catch{Object.defineProperty(t,n,{configurable:!0,get(){return s}})}return t}function x_(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Lg(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const lr={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Lg(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Lg(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let o=s.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=x_(t.dataset[s])}return e},getDataAttribute(t,e){return x_(t.getAttribute(`data-bs-${Lg(e)}`))}};class Nu{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const s=ar(n)?lr.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...ar(n)?lr.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[s,o]of Object.entries(n)){const r=e[s],i=ar(r)?"element":QW(r);if(!new RegExp(o).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${i}" but expected type "${o}".`)}}}const aG="5.3.3";class go extends Nu{constructor(e,n){super(),e=Kr(e),e&&(this._element=e,this._config=this._getConfig(n),Rg.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Rg.remove(this._element,this.constructor.DATA_KEY),xe.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,s=!0){bT(e,n,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Rg.get(Kr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return aG}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Fg=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>pT(n)).join(","):null},Me={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let s=t.parentNode.closest(e);for(;s;)n.push(s),s=s.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!qr(n)&&ql(n))},getSelectorFromElement(t){const e=Fg(t);return e&&Me.findOne(e)?e:null},getElementFromSelector(t){const e=Fg(t);return e?Me.findOne(e):null},getMultipleElementsFromSelector(t){const e=Fg(t);return e?Me.find(e):[]}},Cp=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;xe.on(document,n,`[data-bs-dismiss="${s}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),qr(this))return;const r=Me.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(r)[e]()})},lG="alert",cG="bs.alert",IT=`.${cG}`,uG=`close${IT}`,dG=`closed${IT}`,hG="fade",fG="show";class _p extends go{static get NAME(){return lG}close(){if(xe.trigger(this._element,uG).defaultPrevented)return;this._element.classList.remove(fG);const n=this._element.classList.contains(hG);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),xe.trigger(this._element,dG),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=_p.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Cp(_p,"close");Gs(_p);const pG="button",mG="bs.button",gG=`.${mG}`,vG=".data-api",bG="active",w_='[data-bs-toggle="button"]',yG=`click${gG}${vG}`;class Sp extends go{static get NAME(){return pG}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bG))}static jQueryInterface(e){return this.each(function(){const n=Sp.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}xe.on(document,yG,w_,t=>{t.preventDefault();const e=t.target.closest(w_);Sp.getOrCreateInstance(e).toggle()});Gs(Sp);const xG="swipe",Xl=".bs.swipe",wG=`touchstart${Xl}`,CG=`touchmove${Xl}`,_G=`touchend${Xl}`,SG=`pointerdown${Xl}`,IG=`pointerup${Xl}`,EG="touch",kG="pen",$G="pointer-event",TG=40,NG={endCallback:null,leftCallback:null,rightCallback:null},AG={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class mf extends Nu{constructor(e,n){super(),this._element=e,!(!e||!mf.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return NG}static get DefaultType(){return AG}static get NAME(){return xG}dispose(){xe.off(this._element,Xl)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),ss(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=TG)return;const n=e/this._deltaX;this._deltaX=0,n&&ss(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(xe.on(this._element,SG,e=>this._start(e)),xe.on(this._element,IG,e=>this._end(e)),this._element.classList.add($G)):(xe.on(this._element,wG,e=>this._start(e)),xe.on(this._element,CG,e=>this._move(e)),xe.on(this._element,_G,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===kG||e.pointerType===EG)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const RG="carousel",DG="bs.carousel",ci=`.${DG}`,ET=".data-api",OG="ArrowLeft",LG="ArrowRight",FG=500,vc="next",Ma="prev",Ka="left",Mh="right",PG=`slide${ci}`,Pg=`slid${ci}`,MG=`keydown${ci}`,BG=`mouseenter${ci}`,VG=`mouseleave${ci}`,UG=`dragstart${ci}`,jG=`load${ci}${ET}`,zG=`click${ci}${ET}`,kT="carousel",hh="active",WG="slide",GG="carousel-item-end",HG="carousel-item-start",KG="carousel-item-next",qG="carousel-item-prev",$T=".active",TT=".carousel-item",XG=$T+TT,QG=".carousel-item img",YG=".carousel-indicators",JG="[data-bs-slide], [data-bs-slide-to]",ZG='[data-bs-ride="carousel"]',eH={[OG]:Mh,[LG]:Ka},tH={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},nH={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Au extends go{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Me.findOne(YG,this._element),this._addEventListeners(),this._config.ride===kT&&this.cycle()}static get Default(){return tH}static get DefaultType(){return nH}static get NAME(){return RG}next(){this._slide(vc)}nextWhenVisible(){!document.hidden&&ql(this._element)&&this.next()}prev(){this._slide(Ma)}pause(){this._isSliding&&mT(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){xe.one(this._element,Pg,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){xe.one(this._element,Pg,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const o=e>s?vc:Ma;this._slide(o,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&xe.on(this._element,MG,e=>this._keydown(e)),this._config.pause==="hover"&&(xe.on(this._element,BG,()=>this.pause()),xe.on(this._element,VG,()=>this._maybeEnableCycle())),this._config.touch&&mf.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Me.find(QG,this._element))xe.on(s,UG,o=>o.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Ka)),rightCallback:()=>this._slide(this._directionToOrder(Mh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),FG+this._config.interval))}};this._swipeHelper=new mf(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=eH[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=Me.findOne($T,this._indicatorsElement);n.classList.remove(hh),n.removeAttribute("aria-current");const s=Me.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(hh),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const s=this._getActive(),o=e===vc,r=n||e0(this._getItems(),s,o,this._config.wrap);if(r===s)return;const i=this._getItemIndex(r),a=f=>xe.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:i});if(a(PG).defaultPrevented||!s||!r)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=r;const u=o?HG:GG,d=o?KG:qG;r.classList.add(d),Tu(r),s.classList.add(u),r.classList.add(u);const h=()=>{r.classList.remove(u,d),r.classList.add(hh),s.classList.remove(hh,d,u),this._isSliding=!1,a(Pg)};this._queueCallback(h,s,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(WG)}_getActive(){return Me.findOne(XG,this._element)}_getItems(){return Me.find(TT,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Us()?e===Ka?Ma:vc:e===Ka?vc:Ma}_orderToDirection(e){return Us()?e===Ma?Ka:Mh:e===Ma?Mh:Ka}static jQueryInterface(e){return this.each(function(){const n=Au.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(document,zG,JG,function(t){const e=Me.getElementFromSelector(this);if(!e||!e.classList.contains(kT))return;t.preventDefault();const n=Au.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(lr.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});xe.on(window,jG,()=>{const t=Me.find(ZG);for(const e of t)Au.getOrCreateInstance(e)});Gs(Au);const sH="collapse",oH="bs.collapse",Ru=`.${oH}`,rH=".data-api",iH=`show${Ru}`,aH=`shown${Ru}`,lH=`hide${Ru}`,cH=`hidden${Ru}`,uH=`click${Ru}${rH}`,Mg="show",tl="collapse",fh="collapsing",dH="collapsed",hH=`:scope .${tl} .${tl}`,fH="collapse-horizontal",pH="width",mH="height",gH=".collapse.show, .collapse.collapsing",hb='[data-bs-toggle="collapse"]',vH={parent:null,toggle:!0},bH={parent:"(null|element)",toggle:"boolean"};class iu extends go{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=Me.find(hb);for(const o of s){const r=Me.getSelectorFromElement(o),i=Me.find(r).filter(a=>a===this._element);r!==null&&i.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return vH}static get DefaultType(){return bH}static get NAME(){return sH}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(gH).filter(a=>a!==this._element).map(a=>iu.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||xe.trigger(this._element,iH).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(tl),this._element.classList.add(fh),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(fh),this._element.classList.add(tl,Mg),this._element.style[s]="",xe.trigger(this._element,aH)},i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||xe.trigger(this._element,lH).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Tu(this._element),this._element.classList.add(fh),this._element.classList.remove(tl,Mg);for(const o of this._triggerArray){const r=Me.getElementFromSelector(o);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(fh),this._element.classList.add(tl),xe.trigger(this._element,cH)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Mg)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Kr(e.parent),e}_getDimension(){return this._element.classList.contains(fH)?pH:mH}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(hb);for(const n of e){const s=Me.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=Me.find(hH,this._config.parent);return Me.find(e,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const s of e)s.classList.toggle(dH,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const s=iu.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}xe.on(document,uH,hb,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of Me.getMultipleElementsFromSelector(this))iu.getOrCreateInstance(e,{toggle:!1}).toggle()});Gs(iu);const C_="dropdown",yH="bs.dropdown",wa=`.${yH}`,n0=".data-api",xH="Escape",__="Tab",wH="ArrowUp",S_="ArrowDown",CH=2,_H=`hide${wa}`,SH=`hidden${wa}`,IH=`show${wa}`,EH=`shown${wa}`,NT=`click${wa}${n0}`,AT=`keydown${wa}${n0}`,kH=`keyup${wa}${n0}`,qa="show",$H="dropup",TH="dropend",NH="dropstart",AH="dropup-center",RH="dropdown-center",Mi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',DH=`${Mi}.${qa}`,Bh=".dropdown-menu",OH=".navbar",LH=".navbar-nav",FH=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PH=Us()?"top-end":"top-start",MH=Us()?"top-start":"top-end",BH=Us()?"bottom-end":"bottom-start",VH=Us()?"bottom-start":"bottom-end",UH=Us()?"left-start":"right-start",jH=Us()?"right-start":"left-start",zH="top",WH="bottom",GH={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},HH={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ro extends go{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=Me.next(this._element,Bh)[0]||Me.prev(this._element,Bh)[0]||Me.findOne(Bh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return GH}static get DefaultType(){return HH}static get NAME(){return C_}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!xe.trigger(this._element,IH,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(LH))for(const s of[].concat(...document.body.children))xe.on(s,"mouseover",pf);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(qa),this._element.classList.add(qa),xe.trigger(this._element,EH,e)}}hide(){if(qr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!xe.trigger(this._element,_H,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))xe.off(s,"mouseover",pf);this._popper&&this._popper.destroy(),this._menu.classList.remove(qa),this._element.classList.remove(qa),this._element.setAttribute("aria-expanded","false"),lr.removeDataAttribute(this._menu,"popper"),xe.trigger(this._element,SH,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!ar(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${C_.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof fT>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:ar(this._config.reference)?e=Kr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Zy(e,this._menu,n)}_isShown(){return this._menu.classList.contains(qa)}_getPlacement(){const e=this._parent;if(e.classList.contains(TH))return UH;if(e.classList.contains(NH))return jH;if(e.classList.contains(AH))return zH;if(e.classList.contains(RH))return WH;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains($H)?n?MH:PH:n?VH:BH}_detectNavbar(){return this._element.closest(OH)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(lr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...ss(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const s=Me.find(FH,this._menu).filter(o=>ql(o));s.length&&e0(s,n,e===S_,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Ro.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===CH||e.type==="keyup"&&e.key!==__)return;const n=Me.find(DH);for(const s of n){const o=Ro.getInstance(s);if(!o||o._config.autoClose===!1)continue;const r=e.composedPath(),i=r.includes(o._menu);if(r.includes(o._element)||o._config.autoClose==="inside"&&!i||o._config.autoClose==="outside"&&i||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===__||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:o._element};e.type==="click"&&(a.clickEvent=e),o._completeHide(a)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),s=e.key===xH,o=[wH,S_].includes(e.key);if(!o&&!s||n&&!s)return;e.preventDefault();const r=this.matches(Mi)?this:Me.prev(this,Mi)[0]||Me.next(this,Mi)[0]||Me.findOne(Mi,e.delegateTarget.parentNode),i=Ro.getOrCreateInstance(r);if(o){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),r.focus())}}xe.on(document,AT,Mi,Ro.dataApiKeydownHandler);xe.on(document,AT,Bh,Ro.dataApiKeydownHandler);xe.on(document,NT,Ro.clearMenus);xe.on(document,kH,Ro.clearMenus);xe.on(document,NT,Mi,function(t){t.preventDefault(),Ro.getOrCreateInstance(this).toggle()});Gs(Ro);const RT="backdrop",KH="fade",I_="show",E_=`mousedown.bs.${RT}`,qH={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},XH={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class DT extends Nu{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return qH}static get DefaultType(){return XH}static get NAME(){return RT}show(e){if(!this._config.isVisible){ss(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Tu(n),n.classList.add(I_),this._emulateAnimation(()=>{ss(e)})}hide(e){if(!this._config.isVisible){ss(e);return}this._getElement().classList.remove(I_),this._emulateAnimation(()=>{this.dispose(),ss(e)})}dispose(){this._isAppended&&(xe.off(this._element,E_),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(KH),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Kr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),xe.on(e,E_,()=>{ss(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){bT(e,this._getElement(),this._config.isAnimated)}}const QH="focustrap",YH="bs.focustrap",gf=`.${YH}`,JH=`focusin${gf}`,ZH=`keydown.tab${gf}`,e6="Tab",t6="forward",k_="backward",n6={autofocus:!0,trapElement:null},s6={autofocus:"boolean",trapElement:"element"};class OT extends Nu{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return n6}static get DefaultType(){return s6}static get NAME(){return QH}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),xe.off(document,gf),xe.on(document,JH,e=>this._handleFocusin(e)),xe.on(document,ZH,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,xe.off(document,gf))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=Me.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===k_?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===e6&&(this._lastTabNavDirection=e.shiftKey?k_:t6)}}const $_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",T_=".sticky-top",ph="padding-right",N_="margin-right";class fb{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ph,n=>n+e),this._setElementAttributes($_,ph,n=>n+e),this._setElementAttributes(T_,N_,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ph),this._resetElementAttributes($_,ph),this._resetElementAttributes(T_,N_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,s){const o=this.getWidth(),r=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+o)return;this._saveInitialAttribute(i,n);const a=window.getComputedStyle(i).getPropertyValue(n);i.style.setProperty(n,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,n){const s=e.style.getPropertyValue(n);s&&lr.setDataAttribute(e,n,s)}_resetElementAttributes(e,n){const s=o=>{const r=lr.getDataAttribute(o,n);if(r===null){o.style.removeProperty(n);return}lr.removeDataAttribute(o,n),o.style.setProperty(n,r)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,n){if(ar(e)){n(e);return}for(const s of Me.find(e,this._element))n(s)}}const o6="modal",r6="bs.modal",js=`.${r6}`,i6=".data-api",a6="Escape",l6=`hide${js}`,c6=`hidePrevented${js}`,LT=`hidden${js}`,FT=`show${js}`,u6=`shown${js}`,d6=`resize${js}`,h6=`click.dismiss${js}`,f6=`mousedown.dismiss${js}`,p6=`keydown.dismiss${js}`,m6=`click${js}${i6}`,A_="modal-open",g6="fade",R_="show",Bg="modal-static",v6=".modal.show",b6=".modal-dialog",y6=".modal-body",x6='[data-bs-toggle="modal"]',w6={backdrop:!0,focus:!0,keyboard:!0},C6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Xr extends go{constructor(e,n){super(e,n),this._dialog=Me.findOne(b6,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new fb,this._addEventListeners()}static get Default(){return w6}static get DefaultType(){return C6}static get NAME(){return o6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||xe.trigger(this._element,FT,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(A_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||xe.trigger(this._element,l6).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(R_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){xe.off(window,js),xe.off(this._dialog,js),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new DT({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new OT({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=Me.findOne(y6,this._dialog);n&&(n.scrollTop=0),Tu(this._element),this._element.classList.add(R_);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,xe.trigger(this._element,u6,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){xe.on(this._element,p6,e=>{if(e.key===a6){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),xe.on(window,d6,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),xe.on(this._element,f6,e=>{xe.one(this._element,h6,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(A_),this._resetAdjustments(),this._scrollBar.reset(),xe.trigger(this._element,LT)})}_isAnimated(){return this._element.classList.contains(g6)}_triggerBackdropTransition(){if(xe.trigger(this._element,c6).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Bg)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Bg),this._queueCallback(()=>{this._element.classList.remove(Bg),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!e){const o=Us()?"paddingLeft":"paddingRight";this._element.style[o]=`${n}px`}if(!s&&e){const o=Us()?"paddingRight":"paddingLeft";this._element.style[o]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const s=Xr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](n)}})}}xe.on(document,m6,x6,function(t){const e=Me.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),xe.one(e,FT,o=>{o.defaultPrevented||xe.one(e,LT,()=>{ql(this)&&this.focus()})});const n=Me.findOne(v6);n&&Xr.getInstance(n).hide(),Xr.getOrCreateInstance(e).toggle(this)});Cp(Xr);Gs(Xr);const _6="offcanvas",S6="bs.offcanvas",br=`.${S6}`,PT=".data-api",I6=`load${br}${PT}`,E6="Escape",D_="show",O_="showing",L_="hiding",k6="offcanvas-backdrop",MT=".offcanvas.show",$6=`show${br}`,T6=`shown${br}`,N6=`hide${br}`,F_=`hidePrevented${br}`,BT=`hidden${br}`,A6=`resize${br}`,R6=`click${br}${PT}`,D6=`keydown.dismiss${br}`,O6='[data-bs-toggle="offcanvas"]',L6={backdrop:!0,keyboard:!0,scroll:!1},F6={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Qr extends go{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return L6}static get DefaultType(){return F6}static get NAME(){return _6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||xe.trigger(this._element,$6,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new fb().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(O_);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(D_),this._element.classList.remove(O_),xe.trigger(this._element,T6,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||xe.trigger(this._element,N6).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(L_),this._backdrop.hide();const n=()=>{this._element.classList.remove(D_,L_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new fb().reset(),xe.trigger(this._element,BT)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){xe.trigger(this._element,F_);return}this.hide()},n=!!this._config.backdrop;return new DT({className:k6,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new OT({trapElement:this._element})}_addEventListeners(){xe.on(this._element,D6,e=>{if(e.key===E6){if(this._config.keyboard){this.hide();return}xe.trigger(this._element,F_)}})}static jQueryInterface(e){return this.each(function(){const n=Qr.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}xe.on(document,R6,O6,function(t){const e=Me.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),qr(this))return;xe.one(e,BT,()=>{ql(this)&&this.focus()});const n=Me.findOne(MT);n&&n!==e&&Qr.getInstance(n).hide(),Qr.getOrCreateInstance(e).toggle(this)});xe.on(window,I6,()=>{for(const t of Me.find(MT))Qr.getOrCreateInstance(t).show()});xe.on(window,A6,()=>{for(const t of Me.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Qr.getOrCreateInstance(t).hide()});Cp(Qr);Gs(Qr);const P6=/^aria-[\w-]*$/i,VT={"*":["class","dir","id","lang","role",P6],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},M6=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),B6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,V6=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?M6.has(n)?!!B6.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function U6(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const o=new window.DOMParser().parseFromString(t,"text/html"),r=[].concat(...o.body.querySelectorAll("*"));for(const i of r){const a=i.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){i.remove();continue}const l=[].concat(...i.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const u of l)V6(u,c)||i.removeAttribute(u.nodeName)}return o.body.innerHTML}const j6="TemplateFactory",z6={allowList:VT,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},W6={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},G6={entry:"(string|element|function|null)",selector:"(string|element)"};class H6 extends Nu{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return z6}static get DefaultType(){return W6}static get NAME(){return j6}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,r]of Object.entries(this._config.content))this._setContent(e,r,o);const n=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,s]of Object.entries(e))super._typeCheckConfig({selector:n,entry:s},G6)}_setContent(e,n,s){const o=Me.findOne(s,e);if(o){if(n=this._resolvePossibleFunction(n),!n){o.remove();return}if(ar(n)){this._putElementInTemplate(Kr(n),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(n);return}o.textContent=n}}_maybeSanitize(e){return this._config.sanitize?U6(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return ss(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const K6="tooltip",q6=new Set(["sanitize","allowList","sanitizeFn"]),Vg="fade",X6="modal",mh="show",Q6=".tooltip-inner",P_=`.${X6}`,M_="hide.bs.modal",bc="hover",Ug="focus",Y6="click",J6="manual",Z6="hide",eK="hidden",tK="show",nK="shown",sK="inserted",oK="click",rK="focusin",iK="focusout",aK="mouseenter",lK="mouseleave",cK={AUTO:"auto",TOP:"top",RIGHT:Us()?"left":"right",BOTTOM:"bottom",LEFT:Us()?"right":"left"},uK={allowList:VT,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},dK={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ql extends go{constructor(e,n){if(typeof fT>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return uK}static get DefaultType(){return dK}static get NAME(){return K6}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),xe.off(this._element.closest(P_),M_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=xe.trigger(this._element,this.constructor.eventName(tK)),s=(gT(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(o),xe.trigger(this._element,this.constructor.eventName(sK))),this._popper=this._createPopper(o),o.classList.add(mh),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))xe.on(a,"mouseover",pf);const i=()=>{xe.trigger(this._element,this.constructor.eventName(nK)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||xe.trigger(this._element,this.constructor.eventName(Z6)).defaultPrevented)return;if(this._getTipElement().classList.remove(mh),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))xe.off(o,"mouseover",pf);this._activeTrigger[Y6]=!1,this._activeTrigger[Ug]=!1,this._activeTrigger[bc]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),xe.trigger(this._element,this.constructor.eventName(eK)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Vg,mh),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=YW(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Vg),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new H6({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Q6]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vg)}_isShown(){return this.tip&&this.tip.classList.contains(mh)}_createPopper(e){const n=ss(this._config.placement,[this,e,this._element]),s=cK[n.toUpperCase()];return Zy(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return ss(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...ss(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")xe.on(this._element,this.constructor.eventName(oK),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==J6){const s=n===bc?this.constructor.eventName(aK):this.constructor.eventName(rK),o=n===bc?this.constructor.eventName(lK):this.constructor.eventName(iK);xe.on(this._element,s,this._config.selector,r=>{const i=this._initializeOnDelegatedTarget(r);i._activeTrigger[r.type==="focusin"?Ug:bc]=!0,i._enter()}),xe.on(this._element,o,this._config.selector,r=>{const i=this._initializeOnDelegatedTarget(r);i._activeTrigger[r.type==="focusout"?Ug:bc]=i._element.contains(r.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},xe.on(this._element.closest(P_),M_,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=lr.getDataAttributes(this._element);for(const s of Object.keys(n))q6.has(s)&&delete n[s];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Kr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(e[n]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Ql.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Gs(Ql);const hK="popover",fK=".popover-header",pK=".popover-body",mK={...Ql.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},gK={...Ql.DefaultType,content:"(null|string|element|function)"};class s0 extends Ql{static get Default(){return mK}static get DefaultType(){return gK}static get NAME(){return hK}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fK]:this._getTitle(),[pK]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=s0.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Gs(s0);const vK="scrollspy",bK="bs.scrollspy",o0=`.${bK}`,yK=".data-api",xK=`activate${o0}`,B_=`click${o0}`,wK=`load${o0}${yK}`,CK="dropdown-item",Ba="active",_K='[data-bs-spy="scroll"]',jg="[href]",SK=".nav, .list-group",V_=".nav-link",IK=".nav-item",EK=".list-group-item",kK=`${V_}, ${IK} > ${V_}, ${EK}`,$K=".dropdown",TK=".dropdown-toggle",NK={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},AK={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ip extends go{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return NK}static get DefaultType(){return AK}static get NAME(){return vK}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Kr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(xe.off(this._config.target,B_),xe.on(this._config.target,B_,jg,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const s=this._rootElement||window,o=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:o,behavior:"smooth"});return}s.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=i=>this._targetLinks.get(`#${i.target.id}`),s=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(n(i))},o=(this._rootElement||document.documentElement).scrollTop,r=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(i));continue}const a=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(i),!o)return;continue}!r&&!a&&s(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Me.find(jg,this._config.target);for(const n of e){if(!n.hash||qr(n))continue;const s=Me.findOne(decodeURI(n.hash),this._element);ql(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ba),this._activateParents(e),xe.trigger(this._element,xK,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CK)){Me.findOne(TK,e.closest($K)).classList.add(Ba);return}for(const n of Me.parents(e,SK))for(const s of Me.prev(n,kK))s.classList.add(Ba)}_clearActiveClass(e){e.classList.remove(Ba);const n=Me.find(`${jg}.${Ba}`,e);for(const s of n)s.classList.remove(Ba)}static jQueryInterface(e){return this.each(function(){const n=Ip.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(window,wK,()=>{for(const t of Me.find(_K))Ip.getOrCreateInstance(t)});Gs(Ip);const RK="tab",DK="bs.tab",Ca=`.${DK}`,OK=`hide${Ca}`,LK=`hidden${Ca}`,FK=`show${Ca}`,PK=`shown${Ca}`,MK=`click${Ca}`,BK=`keydown${Ca}`,VK=`load${Ca}`,UK="ArrowLeft",U_="ArrowRight",jK="ArrowUp",j_="ArrowDown",zg="Home",z_="End",Bi="active",W_="fade",Wg="show",zK="dropdown",UT=".dropdown-toggle",WK=".dropdown-menu",Gg=`:not(${UT})`,GK='.list-group, .nav, [role="tablist"]',HK=".nav-item, .list-group-item",KK=`.nav-link${Gg}, .list-group-item${Gg}, [role="tab"]${Gg}`,jT='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Hg=`${KK}, ${jT}`,qK=`.${Bi}[data-bs-toggle="tab"], .${Bi}[data-bs-toggle="pill"], .${Bi}[data-bs-toggle="list"]`;class Nl extends go{constructor(e){super(e),this._parent=this._element.closest(GK),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),xe.on(this._element,BK,n=>this._keydown(n)))}static get NAME(){return RK}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),s=n?xe.trigger(n,OK,{relatedTarget:e}):null;xe.trigger(e,FK,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Bi),this._activate(Me.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Wg);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),xe.trigger(e,PK,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(W_))}_deactivate(e,n){if(!e)return;e.classList.remove(Bi),e.blur(),this._deactivate(Me.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Wg);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),xe.trigger(e,LK,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(W_))}_keydown(e){if(![UK,U_,jK,j_,zg,z_].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(o=>!qr(o));let s;if([zg,z_].includes(e.key))s=n[e.key===zg?0:n.length-1];else{const o=[U_,j_].includes(e.key);s=e0(n,e.target,o,!0)}s&&(s.focus({preventScroll:!0}),Nl.getOrCreateInstance(s).show())}_getChildren(){return Me.find(Hg,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",n),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=Me.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(zK))return;const o=(r,i)=>{const a=Me.findOne(r,s);a&&a.classList.toggle(i,n)};o(UT,Bi),o(WK,Wg),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,s){e.hasAttribute(n)||e.setAttribute(n,s)}_elemIsActive(e){return e.classList.contains(Bi)}_getInnerElement(e){return e.matches(Hg)?e:Me.findOne(Hg,e)}_getOuterElement(e){return e.closest(HK)||e}static jQueryInterface(e){return this.each(function(){const n=Nl.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}xe.on(document,MK,jT,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!qr(this)&&Nl.getOrCreateInstance(this).show()});xe.on(window,VK,()=>{for(const t of Me.find(qK))Nl.getOrCreateInstance(t)});Gs(Nl);const XK="toast",QK="bs.toast",ui=`.${QK}`,YK=`mouseover${ui}`,JK=`mouseout${ui}`,ZK=`focusin${ui}`,eq=`focusout${ui}`,tq=`hide${ui}`,nq=`hidden${ui}`,sq=`show${ui}`,oq=`shown${ui}`,rq="fade",G_="hide",gh="show",vh="showing",iq={animation:"boolean",autohide:"boolean",delay:"number"},aq={animation:!0,autohide:!0,delay:5e3};class Ep extends go{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return aq}static get DefaultType(){return iq}static get NAME(){return XK}show(){if(xe.trigger(this._element,sq).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(rq);const n=()=>{this._element.classList.remove(vh),xe.trigger(this._element,oq),this._maybeScheduleHide()};this._element.classList.remove(G_),Tu(this._element),this._element.classList.add(gh,vh),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||xe.trigger(this._element,tq).defaultPrevented)return;const n=()=>{this._element.classList.add(G_),this._element.classList.remove(vh,gh),xe.trigger(this._element,nq)};this._element.classList.add(vh),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gh),super.dispose()}isShown(){return this._element.classList.contains(gh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){xe.on(this._element,YK,e=>this._onInteraction(e,!0)),xe.on(this._element,JK,e=>this._onInteraction(e,!1)),xe.on(this._element,ZK,e=>this._onInteraction(e,!0)),xe.on(this._element,eq,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Ep.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Cp(Ep);Gs(Ep);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var lq=[{description:"жіноче ім'я любов",examples:["любов"],wordClass:"noun",gender:["feminine"],priority:6,applicationType:["givenName"],pattern:{find:"^любов$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"і"}}],dative:[{0:{action:"append",value:"і"}}],accusative:[],ablative:[{0:{action:"append",value:"'ю"}}],locative:[{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічі імена федір, сидір",examples:["федір","сидір"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:["givenName"],pattern:{find:"^(федір|сидір)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"слово суддя",examples:["суддя"],wordClass:"noun",gender:["masculine","feminine"],priority:6,applicationType:["familyName"],pattern:{find:"^суддя$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"слово рілля",examples:["рілля"],wordClass:"noun",gender:["masculine","feminine"],priority:6,applicationType:["familyName"],pattern:{find:"^рілля$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)вень",examples:["півень"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)вень$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}},{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}],vocative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)лець",examples:["стрілець","білець"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)лець$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ь"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ь"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ь"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(к|п|кр|пл|др|жив)іт",examples:["кіт","кріт"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(к|п|кр|пл|др|жив)іт$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -грім",examples:["грім"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"грім$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(дзвін|хрін)",examples:["дзвін"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"(дзвін|хрін)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -батіг",examples:["батіг"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"батіг$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"зі"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"гу"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -сокіл",examples:["сокіл"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"сокіл$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -кріль",examples:["кріль"],wordClass:"noun",gender:["masculine"],priority:6,applicationType:[],pattern:{find:"кріль$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}}]}},{description:"чоловічі імена ігор, лазар",examples:["ігор","лазар"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"^(ігор|лазар)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"слово сіль",examples:["сіль"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:["familyName"],pattern:{find:"^сіль$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],accusative:[],ablative:[{2:{action:"replace",value:"лю"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)(твердий приголосний)е(ц|н)ь",examples:["половець"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)е(ц|н)ь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:""},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:""},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:""},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(твердий приголосний)(твердий приголосний)е(ц|н)ь",examples:["жнець"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)е(ц|н)ь$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(рід|плід)",examples:["рід","плід"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(рід|плід)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / чоловічі прізвища на -ніс, без чергування",examples:["ханіс","деніс","маніс"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"^(б|в|г|ґ|д|дз|дж|ж|з|й|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)(а|е|є|и|і|ї|о|у|ю|я)ніс$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(з|яв)ір",examples:["дивозір","явір"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"(з|яв|г)ір$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -орел",examples:["орел"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"орел$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ові"}},{0:{action:"replace",value:"л"},1:{action:"replace",value:"у"}}],accusative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"ові"}}],vocative:[{0:{action:"replace",value:"л"},1:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -якір",examples:["якір"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"якір$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"я"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -бідь",examples:["лебідь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:".бідь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -мінь",examples:["кремінь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:".мінь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"е"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"е"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -сіль",examples:["кисіль"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"сіль$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -кінь",examples:["кінь"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"кінь$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"і"}},{0:{action:"replace",value:"о"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -куліш",examples:["куліш"],wordClass:"noun",gender:["masculine"],priority:5,applicationType:[],pattern:{find:"куліш$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"жіночий рід / на -(твердий приголосний)ька",examples:["ільницька","сумська"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)ька$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -ова",examples:["іванова"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"ова$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -іна",examples:["зеленкіна"],wordClass:"adjective",gender:["feminine"],priority:4,applicationType:["familyName"],pattern:{find:"іна$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(голосний)єць",examples:["заєць"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)єць$",modify:"(.{1})(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"й"},2:{action:"replace",value:"еві"}}],accusative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}},{0:{action:"replace",value:"й"},2:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"й"},2:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -віз",examples:["узвіз"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"віз$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ків",examples:["яків"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:["givenName"],pattern:{find:".ків$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(к|р)іп",examples:["прокіп"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:".(к|р)іп$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -піп",examples:["прокіп"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"піп$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ніс",examples:["кривоніс"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ніс$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -віл",examples:["рябовіл"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"віл$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ріг",examples:["пиріг"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ріг$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"replace",value:"зі"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -хід",examples:["прихід"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"хід$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"у"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"і"}},{0:{action:"replace",value:"о"},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / жіночий рід / м'яка група / на -(голосний)ль",examples:["мішель","ніколь","cесіль"],wordClass:"noun",gender:["feminine"],priority:4,applicationType:["givenName"],pattern:{find:"(а|е|є|и|і|ї|о|у|ю|я)ль$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"і"}}],dative:[{1:{action:"replace",value:"і"}}],accusative:[],ablative:[{0:{action:"replace",value:"лл"},1:{action:"replace",value:"ю"}}],locative:[{1:{action:"replace",value:"і"}}],vocative:[]}},{description:"друга відміна / жіночий рід / м'яка група / на (губний_приголосний)",examples:["зейнаб","руф"],wordClass:"noun",gender:["feminine"],priority:4,applicationType:["givenName"],pattern:{find:"(б|п|в|м|ф)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"і"}}],dative:[{0:{action:"append",value:"і"}}],accusative:[{0:{action:"append",value:"і"}}],ablative:[{0:{action:"append",value:"і"}}],locative:[{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"і"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ишин",examples:["ковалишин"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"ишин$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(аго|ово)",examples:["живаго"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(аго|ово)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -тер",examples:["вітер","буймистер"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"[іс]тер$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -єгер",examples:["єгер"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"єгер$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -світ",examples:["світ"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"світ$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічі імена / на -(в|д)ір",examples:["дір","вір"],wordClass:"noun",gender:["masculine"],priority:4,applicationType:[],pattern:{find:"(в|д)ір$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"чоловічий рід / на -кій (помилкова транслітерація)",examples:["дідківській"],wordClass:"adjective",gender:["masculine"],priority:3,applicationType:["familyName"],pattern:{find:"кій$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ого"}}],dative:[{0:{action:"replace",value:"ому"}}],accusative:[{0:{action:"replace",value:"ого"}}],ablative:[{0:{action:"replace",value:"им"}}],locative:[{0:{action:"replace",value:"ому"}}],vocative:[]}},{description:"множина / на -их",examples:["седих"],wordClass:"adjective",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"их$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -га",examples:["нога"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"га$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -екар, -етар, -зар, -ухар",examples:["пекар","решетар","кожухар","кобзар"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"(екар|етар|зар|ухар)(?<!гузар)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"ю"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -кіш",examples:["розкіш"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"кіш$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],accusative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"ем"}}],locative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"еві"}}],vocative:[{0:{action:"replace",value:"о"},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ьо",examples:["іваньо","кузьо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ьо$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"append",value:"м"}}],locative:[{0:{action:"replace",value:"ю"}}],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -ред",examples:["альфред"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ред$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / бусел",examples:["бусел"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"бусел$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"і"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -е[вмн]",examples:["артем","семен","лев"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"е[вмн]$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ер",examples:["ріхтер"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ер$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -пес",examples:["пес"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"пес$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ко",examples:["марко"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ко$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"у"}},{0:{action:"replace",value:"ові"}}],accusative:[{0:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"ові"}},{0:{action:"replace",value:"у"}}],vocative:[{0:{action:"replace",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ий",examples:["батий"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"ий$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"єм"}}],locative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -йо",examples:["йойо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"йо$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"append",value:"ві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"append",value:"м"}}],locative:[{0:{action:"append",value:"ві"}}],vocative:[]}},{description:"перша відміна / чоловічий рід / тверда група / на -бо",examples:["голембо"],wordClass:"noun",gender:["masculine"],priority:3,applicationType:[],pattern:{find:"бо$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[]}},{description:"чоловічий рід / на -ой, -ий",examples:["толстой","сухомлинський"],wordClass:"adjective",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"(ой|ий)$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ого"}}],dative:[{0:{action:"replace",value:"ому"}}],accusative:[{0:{action:"replace",value:"ого"}}],ablative:[{0:{action:"replace",value:"им"}}],locative:[{0:{action:"replace",value:"ому"}}],vocative:[]}},{description:"чоловічий рід / на -ій",examples:["заболотній"],wordClass:"adjective",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"ій$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ього"}}],dative:[{0:{action:"replace",value:"ьому"}}],accusative:[{0:{action:"replace",value:"ього"}}],ablative:[{0:{action:"replace",value:"ім"}}],locative:[{0:{action:"replace",value:"ьому"}}],vocative:[]}},{description:"жіночий рід / на -(твердий приголосний)а",examples:["зелена"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -(твердий приголосний)я",examples:["задорожня"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ьої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ьою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -ая",examples:["толстая"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"ая$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ую"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"жіночий рід / на -яя",examples:["заболотняя"],wordClass:"adjective",gender:["feminine"],priority:2,applicationType:["familyName"],pattern:{find:"яя$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ьої"}}],dative:[{0:{action:"replace",value:"ій"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ьою"}}],locative:[{0:{action:"replace",value:"ій"}}],vocative:[]}},{description:"чоловічі по батькові та прізвища / на -ич",examples:["валерійович","риндич"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["patronymicName","familyName"],pattern:{find:"ич$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"чоловічі по батькові та прізвища / на -іч",examples:["ілліч"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["patronymicName","familyName"],pattern:{find:"іч$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"жіночі по батькові / на -на",examples:["юріївна"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:["patronymicName"],pattern:{find:"на$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"жіночі імена / на -(твердий приголосний)я",examples:["неля"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:["givenName"],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"чоловічі імена / на -ня",examples:["женя"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["givenName"],pattern:{find:"ня$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ов, -ев (-єв), -ів (-їв), -ін (-їн)",examples:["павлов","нікітін"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"([оеє]в|[ії]в|[ії]н)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -ин",examples:["гаршин"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:["familyName"],pattern:{find:"(?<!ус|н)ин$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"им"}}],locative:[{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -яр",examples:["скляр"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"яр$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / жіночий рід / тверда, м'яка група / на -(о|ь|твердий приголосний)",examples:["шевченко"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:[],pattern:{find:"(о|ь|(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ))$",modify:"(.{2})$"},grammaticalCases:{nominative:[],genitive:[],dative:[],accusative:[],ablative:[],locative:[],vocative:[]}},{description:"друга відміна / чоловічий рід / тверда група / на -ок",examples:["бурячок"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"((?<=(а|е|є|и|і|ї|о|у|ю|я).*(а|е|є|и|і|ї|о|у|ю|я).*л)|(?<=(а|е|є|и|і|ї|о|у|ю|я).*[^л]))ок$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}},{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -е(тверда_прилосона)",examples:["марек"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"е(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -(твердий приголосний)я",examples:["гмиря"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"друга відміна / чоловічий, жіночий роди / м'яка група / на -(голосний|ь|й)я",examples:["юлія","майя"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"((а|е|є|и|і|ї|о|у|ю|я)|ь|й)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ї"}}],dative:[{0:{action:"replace",value:"ї"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"єю"}}],locative:[{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"є"}}]}},{description:"друга відміна / чоловічий рід / мішана група / на -(дж|ж|ч|ш)",examples:["януш","джордж"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(дж|ж|ч|ш)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"еві"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"і"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -н",examples:["міщанин"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"н$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"і"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / (свекор|цукор)",examples:["свекор","цукор"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(свекор|цукор)$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],dative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],accusative:[{0:{action:"replace",value:""},1:{action:"append",value:"а"}}],ablative:[{0:{action:"replace",value:""},1:{action:"append",value:"ом"}}],locative:[{0:{action:"replace",value:""},1:{action:"append",value:"ові"}},{0:{action:"replace",value:""},1:{action:"append",value:"у"}}],vocative:[{0:{action:"replace",value:""},1:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / снігир",examples:["снігир"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"снігир$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"я"}}],dative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"ю"}}],accusative:[{0:{action:"append",value:"я"}}],ablative:[{0:{action:"append",value:"ем"}}],locative:[{0:{action:"append",value:"еві"}},{0:{action:"append",value:"ю"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -к",examples:["кузик","мисяк"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"к$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -х",examples:["кожух"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"х$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}}],vocative:[{0:{action:"append",value:"у"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / соловей",examples:["соловей"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"соловей$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:""},1:{action:"replace",value:"'я"}}],dative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'єві"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}}],accusative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'я"}}],ablative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'єм"}}],locative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'ї"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}},{0:{action:"replace",value:""},1:{action:"replace",value:"'єві"}}],vocative:[{0:{action:"replace",value:""},1:{action:"replace",value:"'ю"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -ха",examples:["старуха"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ха$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"с"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"с"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}},{1:{action:"replace",value:"а"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -ка",examples:["прилука"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ка$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"ц"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"ц"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}},{1:{action:"replace",value:"а"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / журавель",examples:["журавель"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"журавель$",modify:"(.{3})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ля"}}],dative:[{0:{action:"replace",value:"леві"}},{0:{action:"replace",value:"лю"}}],accusative:[{0:{action:"replace",value:"ля"}}],ablative:[{0:{action:"replace",value:"лем"}}],locative:[{0:{action:"replace",value:"лю"}},{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"лю"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -(твердий приголосний)о",examples:["петро","павло"],wordClass:"noun",gender:["masculine"],priority:2,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)о$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"а"}}],dative:[{0:{action:"replace",value:"у"}}],accusative:[{0:{action:"replace",value:"а"}}],ablative:[{0:{action:"replace",value:"ом"}}],locative:[{0:{action:"replace",value:"ові"}}],vocative:[{0:{action:"replace",value:"е"}}]}},{description:"перша відміна / жіночий рід / тверда група / на -(г|ґ)а",examples:["ольга"],wordClass:"noun",gender:["feminine"],priority:2,applicationType:[],pattern:{find:"(г|ґ)а$",modify:"(.{1})(.{1})$"},grammaticalCases:{nominative:[],genitive:[{1:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],accusative:[{1:{action:"replace",value:"у"}}],ablative:[{1:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"з"},1:{action:"replace",value:"і"}}],vocative:[{1:{action:"replace",value:"о"}}]}},{description:"перша відміна / чоловічий рід / тверда група / на -ле",examples:["поле"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"ле$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"е"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[]}},{description:"перша відміна / чоловічий, жіночий роди / мішана група / на -а",examples:["мойша"],wordClass:"noun",gender:["masculine","feminine"],priority:2,applicationType:[],pattern:{find:"(дж|ж|ч|ш|щ)а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"і"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ею"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / тверда група / на -(твердий приголосний)",examples:["олександр"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"(б|в|г|ґ|д|дз|дж|ж|з|к|л|м|н|п|р|с|т|ф|х|ц|ч|ш|щ)$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"append",value:"а"}}],dative:[{0:{action:"append",value:"у"}},{0:{action:"append",value:"ові"}}],accusative:[{0:{action:"append",value:"а"}}],ablative:[{0:{action:"append",value:"ом"}}],locative:[{0:{action:"append",value:"ові"}},{0:{action:"append",value:"у"}}],vocative:[{0:{action:"append",value:"е"}}]}},{description:"перша відміна / чоловічий, жіночий роди / тверда група / на -а",examples:["анна"],wordClass:"noun",gender:["masculine","feminine"],priority:1,applicationType:[],pattern:{find:"а$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"и"}}],dative:[{0:{action:"replace",value:"і"}}],accusative:[{0:{action:"replace",value:"у"}}],ablative:[{0:{action:"replace",value:"ою"}}],locative:[{0:{action:"replace",value:"і"}}],vocative:[{0:{action:"replace",value:"о"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -й",examples:["валерій"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"й$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"єві"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"єм"}}],locative:[{0:{action:"replace",value:"єві"}},{0:{action:"replace",value:"ю"}},{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"друга відміна / чоловічий рід / м'яка група / на -ь",examples:["петрунь"],wordClass:"noun",gender:["masculine"],priority:1,applicationType:[],pattern:{find:"ь$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"я"}}],dative:[{0:{action:"replace",value:"ю"}}],accusative:[{0:{action:"replace",value:"я"}}],ablative:[{0:{action:"replace",value:"ем"}}],locative:[{0:{action:"replace",value:"еві"}}],vocative:[{0:{action:"replace",value:"ю"}}]}},{description:"жіночі імена / на -('|`)я",examples:["дар'я","мар'я"],wordClass:"noun",gender:["feminine"],priority:1,applicationType:["givenName"],pattern:{find:"('|`)я$",modify:"(.{1})$"},grammaticalCases:{nominative:[],genitive:[{0:{action:"replace",value:"ї"}}],dative:[{0:{action:"replace",value:"ї"}}],accusative:[{0:{action:"replace",value:"ю"}}],ablative:[{0:{action:"replace",value:"єю"}}],locative:[{0:{action:"replace",value:"ї"}}],vocative:[{0:{action:"replace",value:"є"}}]}}];/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var vf;(function(t){t[t.а=1]="а",t[t.б=2]="б",t[t.в=3]="в",t[t.г=4]="г",t[t.ґ=5]="ґ",t[t.д=6]="д",t[t.е=7]="е",t[t.є=8]="є",t[t.ж=9]="ж",t[t.з=10]="з",t[t.и=11]="и",t[t.і=12]="і",t[t.ї=13]="ї",t[t.й=14]="й",t[t.к=15]="к",t[t.л=16]="л",t[t.м=17]="м",t[t.н=18]="н",t[t.о=19]="о",t[t.п=20]="п",t[t.р=21]="р",t[t.с=22]="с",t[t.т=23]="т",t[t.у=24]="у",t[t.ф=25]="ф",t[t.х=26]="х",t[t.ц=27]="ц",t[t.ч=28]="ч",t[t.ш=29]="ш",t[t.щ=30]="щ",t[t.ь=31]="ь",t[t.ю=32]="ю",t[t.я=33]="я"})(vf||(vf={}));Object.keys(vf).length/2;/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var nl;(function(t){t.NOUN="noun",t.ADJECTIVE="adjective"})(nl||(nl={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var H_;(function(t){t.NOMINATIVE="nominative",t.GENITIVE="genitive",t.DATIVE="dative",t.ACCUSATIVE="accusative",t.ABLATIVE="ablative",t.LOCATIVE="locative",t.VOCATIVE="vocative"})(H_||(H_={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var bf;(function(t){t.MASCULINE="masculine",t.FEMININE="feminine"})(bf||(bf={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */function cq(t,e){let n="";for(let s=0;s<e.length;s+=1){const o=t[s]||t[t.length-1],r=e[s];dq(o)?n+=r.toLowerCase():uq(o)?n+=r.toUpperCase():n+=r}return n}function uq(t,e=0){const n=t.charAt(e);return n===n.toUpperCase()}function dq(t,e=0){const n=t.charAt(e);return n===n.toLowerCase()}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class hq{constructor(e){this.command=e}exec(e){return e+this.command.value}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var yf;(function(t){t.REPLACE="replace",t.APPEND="append"})(yf||(yf={}));/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class fq{constructor(e){this.command=e}exec(){return this.command.value}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class pq{make(e){switch(e.action){case yf.APPEND:return new hq(e);case yf.REPLACE:return new fq(e);default:throw new TypeError(`Invalid command action: ${e.action}.`)}}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */function mq(t){const n=new RegExp(`${t.toString()}|`).exec("");return n==null?0:n.length-1}class gq{constructor(e){this.rule=e,this.commandRunnerFactory=new pq}inflect(e,n){const[s]=this.rule.grammaticalCases[n];if(s){const o=new RegExp(this.rule.pattern.modify,"gi"),r=e.replace(o,(i,...a)=>{let l="";const c=mq(this.rule.pattern.modify);for(let u=0;u<c;u+=1){let d=a[u];const h=s[u];h!=null&&(d=this.commandRunnerFactory.make(h).exec(d)),l+=d}return l});return cq(e,r)}return e}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class vq{constructor(e){this.declensionRules=[...e].sort((n,s)=>s.priority-n.priority)}async inflect(e,n){const[s]=await this.findMatchingRules(e,n);return s==null?e:new gq(s).inflect(e,n.grammaticalCase)}async findMatchingRules(e,n){return this.declensionRules.filter(o=>o.gender.includes(n.gender)).filter(o=>!n.applicationType||o.applicationType.length===0||o.applicationType.includes(n.applicationType)).filter(o=>new RegExp(o.pattern.find,"gi").test(e)).filter(o=>!n.wordClass||o.wordClass===n.wordClass).filter((o,r,i)=>!n.customRuleFilter||n.customRuleFilter(o,r,i))}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const kp=new vq(lq);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class bq{constructor(e,n,s){this.givenNameInflector=e,this.patronymicNameInflector=n,this.familyNameInflector=s}async inflect(e,n,s){const o={};return e.givenName!=null&&(o.givenName=await this.givenNameInflector.inflect(e.givenName,n,s)),e.patronymicName!=null&&(o.patronymicName=await this.patronymicNameInflector.inflect(e.patronymicName,n,s)),e.familyName!=null&&(o.familyName=await this.familyNameInflector.inflect(e.familyName,n,s)),o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yq=1e-7,xq=1e-4;class zT{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class r0{refCount(e){return es("refCount")}incRef(e){return es("incRef")}timerAvailable(){return!0}time(e){return es("time")}read(e){return es("read")}readSync(e){return es("readSync")}readToGPU(e,n){return es("readToGPU")}numDataIds(){return es("numDataIds")}disposeData(e,n){return es("disposeData")}write(e,n,s){return es("write")}move(e,n,s,o,r){return es("move")}createTensorFromGPUData(e,n,s){return es("createTensorFromGPUData")}memory(){return es("memory")}floatPrecision(){return es("floatPrecision")}epsilon(){return this.floatPrecision()===32?yq:xq}dispose(){return es("dispose")}}function es(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wq(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Xa(t,e,n)}function na(t,e,n){return Math.max(t,Math.min(e,n))}function i0(t){return t%2===0?t:t+1}function Xa(t,e,n){const s=t[e];t[e]=t[n],t[n]=s}function Cq(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function $(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function a0(t,e,n=""){$(ct(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function WT(t){$(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function le(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function ct(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Al(t){return t%1===0}function pb(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function hl(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function K_(t,e=o=>0,n,s){return new Promise((o,r)=>{let i=0;const a=()=>{if(t()){o();return}i++;const l=e(i);if(n!=null&&i>=n){r();return}s!=null?s(a,l):setTimeout(a,l)};a()})}function GT(t,e){let n=1,s=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)n*=t[r];else if(t[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(t[r]<0)throw Error(`Shapes can not be < 0. Found ${t[r]} at dim ${r}`);if(s===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[s]=e/n,o}function Xe(t,e){const n=e.length;return t=t==null?e.map((s,o)=>o):[].concat(t),$(t.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),$(t.every(s=>Al(s)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(s=>s<0?n+s:s)}function di(t,e){const n=[],s=[],o=e!=null&&Array.isArray(e)&&e.length===0,r=e==null||o?null:Xe(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(r!=null){if(r[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(r[i]==null||r[i]>a)&&t[a]===1&&(n.push(t[a]),s.push(a)),r[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),s.push(a))}return{newShape:n,keptDims:s}}function _n(t,e){return Mt(t,e)}function Mt(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function _q(t,e){for(let n=0;n<t.length;n++){const s=t[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${e} being uploaded contains ${s}.`)}}function Sq(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function HT(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function xf(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Iq(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Du(t){return typeof t=="string"||t instanceof String}function Eq(t){return typeof t=="boolean"}function mb(t){return typeof t=="number"}function Yl(t){return Array.isArray(t)?Yl(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":mb(t)?"float32":Du(t)?"string":Eq(t)?"bool":"float32"}function gb(t){return!!(t&&t.constructor&&t.call&&t.apply)}function vb(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Oe(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let s=e-3;s>=0;--s)n[s]=n[s+1]*t[s+1];return n}function KT(t,e,n,s=!1){const o=new Array;if(e.length===1){const r=e[0]*(s?2:1);for(let i=0;i<r;i++)o[i]=n[t+i]}else{const r=e[0],i=e.slice(1),a=i.reduce((l,c)=>l*c)*(s?2:1);for(let l=0;l<r;l++)o[l]=KT(t+l*a,i,n,s)}return o}function oo(t,e,n=!1){if(t.length===0)return e[0];const s=t.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return KT(0,t,e,n)}function kq(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function l0(t,e){const n=Sn(t,e);for(let s=0;s<n.length;s++)n[s]=1;return n}function Sn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function qT(t,e){const n=t.reduce((s,o)=>s*o,1);if(e==null||e==="float32")return oo(t,new Float32Array(n));if(e==="int32")return oo(t,new Int32Array(n));if(e==="bool")return oo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function yr(t){t.forEach(e=>{$(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Do(t,e,n){if(e===0)return 0;if(e===1)return t[0];let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=n[o]*t[o];return s}function Jl(t,e,n){if(e===0)return[];if(e===1)return[t];const s=new Array(e);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(t/n[o]),t-=s[o]*n[o];return s[s.length-1]=t,s}function c0(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_="tfjsflags";class $q{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Tq,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,s){if(this.flagRegistry[e]={evaluationFn:n,setHook:s},this.urlFlags[e]!=null){const o=this.urlFlags[e];te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(c0(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);q_ in e&&e[q_].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=Aq(o,r)})}}function Tq(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(Nq(e,s[0],s[1]),s.join("="))),e}function Nq(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Aq(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function te(){return XT}let XT=null;function Rq(t){XT=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Kg;function QT(){if(Kg==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Kg=t}return Kg}function Dq(){const t=QT();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function u0(t,e){const n=Dq();if(n.has(t))return n.get(t);{const s=e();return n.set(t,s),n.get(t)}}const $p="Abs",Ou="Acos",Lu="Acosh",Zl="Add",d0="AddN",h0="All",f0="Any",Tp="ArgMax",Np="ArgMin",Fu="Asin",Pu="Asinh",Mu="Atan",Bu="Atanh",Vu="Atan2",Ap="AvgPool",p0="AvgPoolGrad",Rp="AvgPool3D",m0="AvgPool3DGrad",Dp="BatchMatMul",Op="BatchToSpaceND",g0="Bincount",v0="BitwiseAnd",Oq="BroadcastTo",YT="BroadcastArgs",Uu="Cast",ju="Ceil",zu="ClipByValue",b0="Complex",Lp="ComplexAbs",Fp="Concat",Pp="Conv2D",y0="Conv2DBackpropFilter",Mp="Conv2DBackpropInput",Bp="Conv3D",x0="Conv3DBackpropFilterV2",w0="Conv3DBackpropInputV2",Wu="Cos",Gu="Cosh",C0="Cumprod",Vp="Cumsum",_0="CropAndResize",S0="DenseBincount",I0="DepthToSpace",Up="DepthwiseConv2dNative",E0="DepthwiseConv2dNativeBackpropFilter",k0="DepthwiseConv2dNativeBackpropInput",JT="Diag",jp="Dilation2D",bb="Dilation2DBackpropInput",yb="Dilation2DBackpropFilter",Lq="Draw",Hu="RealDiv",$0="Einsum",Ku="Elu",T0="EluGrad",qu="Erf",zp="Equal",Xu="Exp",Wp="ExpandDims",Qu="Expm1",N0="FFT",A0="Fill",R0="FlipLeftRight",Yu="Floor",Ju="FloorDiv",Gp="FusedBatchNorm",Hp="GatherV2",ZT="GatherNd",Kp="Greater",Zu="GreaterEqual",ed="Identity",D0="IFFT",O0="Imag",td="IsFinite",nd="IsInf",sd="IsNan",qp="LeakyRelu",Xp="Less",Qp="LessEqual",eN="LinSpace",od="Log",rd="Log1p",Yp="LogicalAnd",Jp="LogicalNot",Zp="LogicalOr",Fq="LogSoftmax",em="LRN",L0="LRNGrad",tm="Max",id="Maximum",nm="MaxPool",F0="MaxPoolGrad",sm="MaxPool3D",P0="MaxPool3DGrad",tN="MaxPoolWithArgmax",om="Mean",rm="Min",ad="Minimum",im="MirrorPad",ld="Mod",nN="Multinomial",cd="Multiply",am="Neg",lm="NotEqual",M0="NonMaxSuppressionV3",B0="NonMaxSuppressionV4",V0="NonMaxSuppressionV5",cm="OnesLike",um="OneHot",dm="Pack",hm="PadV2",ud="Pow",fm="Prelu",pm="Prod",sN="RaggedGather",oN="RaggedRange",rN="RaggedTensorToTensor",U0="Range",j0="Real",dd="Reciprocal",hd="Relu",mm="Reshape",gm="ResizeNearestNeighbor",z0="ResizeNearestNeighborGrad",vm="ResizeBilinear",W0="ResizeBilinearGrad",fd="Relu6",bm="Reverse",pd="Round",md="Rsqrt",iN="ScatterNd",aN="TensorScatterUpdate",lN="SearchSorted",ym="Select",gd="Selu",xm="Slice",vd="Sin",bd="Sinh",yd="Sign",xd="Sigmoid",wd="Softplus",Cd="Sqrt",wm="Sum",Cm="SpaceToBatchND",_m="SplitV",Sm="Softmax",cN="SparseFillEmptyRows",uN="SparseReshape",dN="SparseSegmentMean",hN="SparseSegmentSum",fN="SparseToDense",_d="SquaredDifference",G0="Square",H0="StaticRegexReplace",K0="StridedSlice",pN="StringNGrams",mN="StringSplit",gN="StringToHashBucketFast",Sd="Sub",Id="Tan",Ed="Tanh",kd="Tile",q0="TopK",X0="Transform",fl="Transpose",Q0="Unique",Im="Unpack",Em="UnsortedSegmentSum",km="ZerosLike",$d="Step",Pq="FromPixels",Y0="RotateWithOffset",wf="_FusedMatMul",Cf="FusedConv2D",vN="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gs(...t){te().getBool("IS_TEST")||te().getBool("PROD")||console.warn(...t)}function Mq(...t){te().getBool("IS_TEST")||te().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _f=u0("kernelRegistry",()=>new Map),xb=u0("gradRegistry",()=>new Map);function X_(t,e){const n=yN(t,e);return _f.get(n)}function Q_(t){return xb.get(t)}function Y_(t){const e=_f.entries(),n=[];for(;;){const{done:s,value:o}=e.next();if(s)break;const[r,i]=o,[a]=r.split("_");a===t&&n.push(i)}return n}function bN(t){const{kernelName:e,backendName:n}=t,s=yN(e,n);_f.has(s)&&gs(`The kernel '${e}' for backend '${n}' is already registered`),_f.set(s,t)}function Bq(t){const{kernelName:e}=t;xb.has(e)&&te().getBool("DEBUG")&&gs(`Overriding the gradient for '${e}'`),xb.set(e,t)}function yN(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xN(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var wN=Et,Ds=null;try{Ds=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Et(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Et.prototype.__isLong__;Object.defineProperty(Et.prototype,"__isLong__",{value:!0});function fs(t){return(t&&t.__isLong__)===!0}Et.isLong=fs;var J_={},Z_={};function _a(t,e){var n,s,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(s=Z_[t],s)?s:(n=kt(t,(t|0)<0?-1:0,!0),o&&(Z_[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(s=J_[t],s)?s:(n=kt(t,t<0?-1:0,!1),o&&(J_[t]=n),n))}Et.fromInt=_a;function Os(t,e){if(isNaN(t))return e?Vi:Ls;if(e){if(t<0)return Vi;if(t>=CN)return IN}else{if(t<=-tS)return is;if(t+1>=tS)return SN}return t<0?Os(-t,e).neg():kt(t%Rl|0,t/Rl|0,e)}Et.fromNumber=Os;function kt(t,e,n){return new Et(t,e,n)}Et.fromBits=kt;var Sf=Math.pow;function J0(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ls;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return J0(t.substring(1),e,n).neg();for(var o=Os(Sf(n,8)),r=Ls,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var c=Os(Sf(n,a));r=r.mul(c).add(Os(l))}else r=r.mul(o),r=r.add(Os(l))}return r.unsigned=e,r}Et.fromString=J0;function vo(t,e){return typeof t=="number"?Os(t,e):typeof t=="string"?J0(t,e):kt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Et.fromValue=vo;var eS=65536,Vq=1<<24,Rl=eS*eS,CN=Rl*Rl,tS=CN/2,nS=_a(Vq),Ls=_a(0);Et.ZERO=Ls;var Vi=_a(0,!0);Et.UZERO=Vi;var sl=_a(1);Et.ONE=sl;var _N=_a(1,!0);Et.UONE=_N;var wb=_a(-1);Et.NEG_ONE=wb;var SN=kt(-1,2147483647,!1);Et.MAX_VALUE=SN;var IN=kt(-1,-1,!0);Et.MAX_UNSIGNED_VALUE=IN;var is=kt(0,-2147483648,!1);Et.MIN_VALUE=is;var ke=Et.prototype;ke.toInt=function(){return this.unsigned?this.low>>>0:this.low};ke.toNumber=function(){return this.unsigned?(this.high>>>0)*Rl+(this.low>>>0):this.high*Rl+(this.low>>>0)};ke.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(is)){var n=Os(e),s=this.div(n),o=s.mul(n).sub(this);return s.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var r=Os(Sf(e,6),this.unsigned),i=this,a="";;){var l=i.div(r),c=i.sub(l.mul(r)).toInt()>>>0,u=c.toString(e);if(i=l,i.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};ke.getHighBits=function(){return this.high};ke.getHighBitsUnsigned=function(){return this.high>>>0};ke.getLowBits=function(){return this.low};ke.getLowBitsUnsigned=function(){return this.low>>>0};ke.getNumBitsAbs=function(){if(this.isNegative())return this.eq(is)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ke.isZero=function(){return this.high===0&&this.low===0};ke.eqz=ke.isZero;ke.isNegative=function(){return!this.unsigned&&this.high<0};ke.isPositive=function(){return this.unsigned||this.high>=0};ke.isOdd=function(){return(this.low&1)===1};ke.isEven=function(){return(this.low&1)===0};ke.equals=function(e){return fs(e)||(e=vo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ke.eq=ke.equals;ke.notEquals=function(e){return!this.eq(e)};ke.neq=ke.notEquals;ke.ne=ke.notEquals;ke.lessThan=function(e){return this.comp(e)<0};ke.lt=ke.lessThan;ke.lessThanOrEqual=function(e){return this.comp(e)<=0};ke.lte=ke.lessThanOrEqual;ke.le=ke.lessThanOrEqual;ke.greaterThan=function(e){return this.comp(e)>0};ke.gt=ke.greaterThan;ke.greaterThanOrEqual=function(e){return this.comp(e)>=0};ke.gte=ke.greaterThanOrEqual;ke.ge=ke.greaterThanOrEqual;ke.compare=function(e){if(fs(e)||(e=vo(e)),this.eq(e))return 0;var n=this.isNegative(),s=e.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ke.comp=ke.compare;ke.negate=function(){return!this.unsigned&&this.eq(is)?is:this.not().add(sl)};ke.neg=ke.negate;ke.add=function(e){fs(e)||(e=vo(e));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,f=0;return f+=r+c,h+=f>>>16,f&=65535,h+=o+l,d+=h>>>16,h&=65535,d+=s+a,u+=d>>>16,d&=65535,u+=n+i,u&=65535,kt(h<<16|f,u<<16|d,this.unsigned)};ke.subtract=function(e){return fs(e)||(e=vo(e)),this.add(e.neg())};ke.sub=ke.subtract;ke.multiply=function(e){if(this.isZero())return Ls;if(fs(e)||(e=vo(e)),Ds){var n=Ds.mul(this.low,this.high,e.low,e.high);return kt(n,Ds.get_high(),this.unsigned)}if(e.isZero())return Ls;if(this.eq(is))return e.isOdd()?is:Ls;if(e.eq(is))return this.isOdd()?is:Ls;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(nS)&&e.lt(nS))return Os(this.toNumber()*e.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,p=0;return p+=i*u,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*c,h+=f>>>16,f&=65535,h+=o*u,d+=h>>>16,h&=65535,h+=r*c,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,d+=s*u+o*c+r*l+i*a,d&=65535,kt(f<<16|p,d<<16|h,this.unsigned)};ke.mul=ke.multiply;ke.divide=function(e){if(fs(e)||(e=vo(e)),e.isZero())throw Error("division by zero");if(Ds){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Ds.div_u:Ds.div_s)(this.low,this.high,e.low,e.high);return kt(n,Ds.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Vi:Ls;var s,o,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Vi;if(e.gt(this.shru(1)))return _N;r=Vi}else{if(this.eq(is)){if(e.eq(sl)||e.eq(wb))return is;if(e.eq(is))return sl;var i=this.shr(1);return s=i.div(e).shl(1),s.eq(Ls)?e.isNegative()?sl:wb:(o=this.sub(e.mul(s)),r=s.add(o.div(e)),r)}else if(e.eq(is))return this.unsigned?Vi:Ls;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=Ls}for(o=this;o.gte(e);){s=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:Sf(2,a-48),c=Os(s),u=c.mul(e);u.isNegative()||u.gt(o);)s-=l,c=Os(s,this.unsigned),u=c.mul(e);c.isZero()&&(c=sl),r=r.add(c),o=o.sub(u)}return r};ke.div=ke.divide;ke.modulo=function(e){if(fs(e)||(e=vo(e)),Ds){var n=(this.unsigned?Ds.rem_u:Ds.rem_s)(this.low,this.high,e.low,e.high);return kt(n,Ds.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ke.mod=ke.modulo;ke.rem=ke.modulo;ke.not=function(){return kt(~this.low,~this.high,this.unsigned)};ke.and=function(e){return fs(e)||(e=vo(e)),kt(this.low&e.low,this.high&e.high,this.unsigned)};ke.or=function(e){return fs(e)||(e=vo(e)),kt(this.low|e.low,this.high|e.high,this.unsigned)};ke.xor=function(e){return fs(e)||(e=vo(e)),kt(this.low^e.low,this.high^e.high,this.unsigned)};ke.shiftLeft=function(e){return fs(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?kt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):kt(0,this.low<<e-32,this.unsigned)};ke.shl=ke.shiftLeft;ke.shiftRight=function(e){return fs(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?kt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):kt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ke.shr=ke.shiftRight;ke.shiftRightUnsigned=function(e){if(fs(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var s=this.low;return kt(s>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?kt(n,0,this.unsigned):kt(n>>>e-32,0,this.unsigned)};ke.shru=ke.shiftRightUnsigned;ke.shr_u=ke.shiftRightUnsigned;ke.toSigned=function(){return this.unsigned?kt(this.low,this.high,!1):this};ke.toUnsigned=function(){return this.unsigned?this:kt(this.low,this.high,!0)};ke.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ke.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ke.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Et.fromBytes=function(e,n,s){return s?Et.fromBytesLE(e,n):Et.fromBytesBE(e,n)};Et.fromBytesLE=function(e,n){return new Et(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Et.fromBytesBE=function(e,n){return new Et(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const EN=c$(wN),Uq=FL({__proto__:null,default:EN},[wN]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oi=EN||Uq;function $m(t){return Oi.fromString(t,!0,16)}const kN=$m("c3a5c85c97cb3127"),Ai=$m("b492b66fbe98f273"),Rn=$m("9ae16a3b2f90404f");function Cb(t){return t.xor(t.shru(47))}function $N(t,e,n){const s=t.slice(e,e+n);return Oi.fromBytes(Array.from(s),!0,!0)}function yt(t,e){return $N(t,e,8)}function sS(t,e){return $N(t,e,4)}function rn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function jr(t,e,n=$m("9ddfea08eb382d69")){let s=t.xor(e).mul(n);s=s.xor(s.shru(47));let o=e.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function jq(t,e,n,s,o,r){o=o.add(t),r=rn(r.add(o).add(s),21);const i=o;return o=o.add(e),o=o.add(n),r=r.add(rn(o,44)),[o.add(s),r.add(i)]}function bh(t,e,n,s){return jq(yt(t,e),yt(t,e+8),yt(t,e+16),yt(t,e+24),n,s)}function zq(t,e=t.length){if(e>=8){const n=Rn.add(e*2),s=yt(t,0).add(Rn),o=yt(t,e-8),r=rn(o,37).mul(n).add(s),i=rn(s,25).add(o).mul(n);return jr(r,i,n)}if(e>=4){const n=Rn.add(e*2),s=sS(t,0);return jr(s.shl(3).add(e),sS(t,e-4),n)}if(e>0){const n=t[0],s=t[e>>1],o=t[e-1],r=n+(s<<8),i=e+(o<<2);return Cb(Rn.mul(r).xor(kN.mul(i))).mul(Rn)}return Rn}function Wq(t,e=t.length){const n=Rn.add(e*2),s=yt(t,0).mul(Ai),o=yt(t,8),r=yt(t,e-8).mul(n),i=yt(t,e-16).mul(Rn);return jr(rn(s.add(o),43).add(rn(r,30)).add(i),s.add(rn(o.add(Rn),18)).add(r),n)}function Gq(t,e=t.length){const n=Rn.add(e*2),s=yt(t,0).mul(Rn),o=yt(t,8),r=yt(t,e-8).mul(n),i=yt(t,e-16).mul(Rn),a=rn(s.add(o),43).add(rn(r,30)).add(i),l=jr(a,s.add(rn(o.add(Rn),18)).add(r),n),c=yt(t,16).mul(n),u=yt(t,24),d=a.add(yt(t,e-32)).mul(n),h=l.add(yt(t,e-24)).mul(n);return jr(rn(c.add(u),43).add(rn(d,30)).add(h),c.add(rn(u.add(s),18)).add(d),n)}function Hq(t,e=t.length){const n=Oi.fromNumber(81,!0);if(e<=32)return e<=16?zq(t,e):Wq(t,e);if(e<=64)return Gq(t,e);let s=n,o=n.mul(Ai).add(113),r=Cb(o.mul(Rn).add(113)).mul(Rn),i=[Oi.UZERO,Oi.UZERO],a=[Oi.UZERO,Oi.UZERO];s=s.mul(Rn).add(yt(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do s=rn(s.add(o).add(i[0]).add(yt(t,l+8)),37).mul(Ai),o=rn(o.add(i[1]).add(yt(t,l+48)),42).mul(Ai),s=s.xor(a[1]),o=o.add(i[0]).add(yt(t,l+40)),r=rn(r.add(a[0]),33).mul(Ai),i=bh(t,l,i[1].mul(Ai),s.add(a[0])),a=bh(t,l+32,r.add(a[1]),o.add(yt(t,l+16))),[r,s]=[s,r],l+=64;while(l!==c);const d=Ai.add(r.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=rn(s.add(o).add(i[0]).add(yt(t,l+8)),37).mul(d),o=rn(o.add(i[1]).add(yt(t,l+48)),42).mul(d),s=s.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(yt(t,l+40))),r=rn(r.add(a[0]),33).mul(d),i=bh(t,l,i[1].mul(d),s.add(a[0])),a=bh(t,l+32,r.add(a[1]),o.add(yt(t,l+16))),[r,s]=[s,r],jr(jr(i[0],a[0],d).add(Cb(o).mul(kN)).add(r),jr(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(t,e){return e==="string"?zr(t):Sa([t],e)}function Kq(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Sa(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=sa(t)),te().getBool("DEBUG")&&_q(t,e),Kq(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let s=0;s<n.length;++s)Math.round(t[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${e}`)}function zn(){return te().platform.now()}function zr(t,e="utf-8"){return e=e||"utf-8",te().platform.encode(t,e)}function Yr(t,e="utf-8"){return e=e||"utf-8",te().platform.decode(t,e)}function zs(t){return te().platform.isTypedArray!=null?te().platform.isTypedArray(t):xN(t)}function sa(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||c0(t)||t==null||zs(t)&&n)e.push(t);else if(Array.isArray(t)||zs(t))for(let s=0;s<t.length;++s)sa(t[s],e,n);else{let s=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(s=Math.max(s,Number(o)));for(let o=0;o<=s;o++)sa(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qq{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Qq)}profileKernel(e,n,s){let o;const r=()=>{o=s()};let i;const a=zn();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const c of o)c.dataSync();i=Promise.resolve({kernelMs:zn()-a})}if(te().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){const u=o[c];u.data().then(d=>{Xq(d,u.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:i}=e;s.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function Xq(t,e,n){if(e!=="float32")return!1;for(let s=0;s<t.length;s++){const o=t[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class Qq{logKernelProfile(e,n,s,o,r,i){const a=typeof o=="number"?hl(`${o}ms`,9):o.error,l=hl(e,25),c=n.rank,u=n.size,d=hl(n.shape.toString(),14);let h="";for(const f in r){const p=r[f];if(p!=null){const m=p.shape||n.shape,v=m.length;h+=`${f}: ${v}D ${v>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${h}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yq(t,e,n){const s={},o={};for(let l=0;l<e.length;l++)s[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<e.length;p++)if(s[h.id]){c.outputs.forEach(m=>s[m.id]=!0),f=!0,o[c.id]=!0;break}if(f)break}}const r={};r[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(r[c.outputs[d].id]){for(const h in u)r[u[h].id]=!0,i[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(o[c.id]&&i[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];s[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function Jq(t,e,n,s){for(let o=e.length-1;o>=0;o--){const r=e[o],i=[];if(r.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(i);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=r.inputs[l];if(!ct(c.shape,u.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=s(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oS=20,yc=3,qg=7;function Zq(t,e,n,s){const o=Oe(e),r=e8(t,e,n,o),i=e.length,a=Vh(t,e,n,o,r),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function e8(t,e,n,s){const o=le(e),r=s[s.length-1],i=new Array(r).fill(0),a=e.length,l=n==="complex64"?$c(t):t;if(a>1)for(let c=0;c<o/r;c++){const u=c*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],kc(l[u+d],0,n).length)}return i}function kc(t,e,n){let s;return Array.isArray(t)?s=`${parseFloat(t[0].toFixed(qg))} + ${parseFloat(t[1].toFixed(qg))}j`:Du(t)?s=`'${t}'`:n==="bool"?s=TN(t):s=parseFloat(t.toFixed(qg)).toString(),hl(s,e)}function TN(t){return t===0?"false":"true"}function Vh(t,e,n,s,o,r=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=$c(t);return[kc(m[0],0,n)]}return n==="bool"?[TN(t[0])]:[t[0].toString()]}if(l===1){if(a>oS){const v=yc*i;let g=Array.from(t.slice(0,v)),b=Array.from(t.slice((a-yc)*i,a*i));return n==="complex64"&&(g=$c(g),b=$c(b)),["["+g.map((x,y)=>kc(x,o[y],n)).join(", ")+", ..., "+b.map((x,y)=>kc(x,o[a-yc+y],n)).join(", ")+"]"]}return["["+(n==="complex64"?$c(t):Array.from(t)).map((v,g)=>kc(v,o[g],n)).join(", ")+"]"]}const c=e.slice(1),u=s.slice(1),d=s[0]*i,h=[];if(a>oS){for(let m=0;m<yc;m++){const v=m*d,g=v+d;h.push(...Vh(t.slice(v,g),c,n,u,o,!1))}h.push("...");for(let m=a-yc;m<a;m++){const v=m*d,g=v+d;h.push(...Vh(t.slice(v,g),c,n,u,o,m===a-1))}}else for(let m=0;m<a;m++){const v=m*d,g=v+d;h.push(...Vh(t.slice(v,g),c,n,u,o,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(r?"":p),h}function $c(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bn{constructor(e,n,s){if(this.dtype=n,this.shape=e.slice(),this.size=le(e),s!=null){const o=s.length;$(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Mt(n,this.size),this.strides=Oe(e)}set(e,...n){n.length===0&&(n=[0]),$(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=this.strides[o]*e[o];return this.values[s]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let s=0;s<e.length-1;++s)n+=this.strides[s]*e[s];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(e/this.strides[s]),e-=n[s]*this.strides[s];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Js().makeTensor(this.values,this.shape,this.dtype)}}let Js=null,Qa=null;function t8(t){Js=t}function n8(t){Qa=t}class Qt{constructor(e,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=le(e),this.strides=Oe(e),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Qa.buffer(this.shape,this.dtype,e)}bufferSync(){return Qa.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return oo(this.shape,e,this.dtype==="complex64")}arraySync(){return oo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Js().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(s=>Yr(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Js().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Js().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Yr(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Js().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Js().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Qa.print(this,e)}clone(){return this.throwIfDisposed(),Qa.clone(this)}toString(e=!1){const n=this.dataSync();return Zq(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Qa.cast(this,e)}variable(e=!0,n,s){return this.throwIfDisposed(),Js().makeVariable(this,e,n,s)}}Object.defineProperty(Qt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ae(){return u0("Tensor",()=>Qt)}ae();class If extends Qt{constructor(e,n,s,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=s}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ct(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Js().disposeTensor(this),this.dataId=e.dataId,Js().incRef(this,null)}dispose(){Js().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(If,Symbol.hasInstance,{value:t=>t instanceof Qt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var rS;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(rS||(rS={}));var _b;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(_b||(_b={}));var Sb;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Sb||(Sb={}));var Ib;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Ib||(Ib={}));var Eb;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Eb||(Eb={}));const s8={float32:Ib,int32:_b,bool:Sb,complex64:Eb};function us(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return s8[t][e]}function Z0(t){return us(t,"int32")}function NN(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function AN(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(t,e){if(t.dtype===e.dtype)return[t,e];const n=us(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function RN(t){const e=[];return DN(t,e,new Set),e}function DN(t,e,n){if(t==null)return;if(t instanceof Qt){e.push(t);return}if(!o8(t))return;const s=t;for(const o in s){const r=s[o];n.has(r)||(n.add(r),DN(r,e,n))}}function o8(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xg(t){return t.kernelName!=null}class iS{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Dl{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iS}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,s=1){return e in this.registryFactory?(gs(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:s},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(e);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new qq(this.backendInstance),!0}setupRegisteredKernels(){Y_(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Y_(e).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof r0)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,gs(`Initialization of backend ${e} failed`),gs(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[e]=s,{success:!0,asyncInit:!1}}catch(s){return gs(`Initialization of backend ${e} failed`),gs(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const s=e[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),s.backend=e,e.move(n,r,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let s=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,s){e();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Dl.nextTensorId++}nextVariableId(){return Dl.nextVariableId++}clone(e){const n=H.runKernel(ed,{x:e}),s={x:e},o=i=>({x:()=>{const a="float32",l={x:i},c={dtype:a};return H.runKernel(Uu,l,c)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(e,n,s){if(this.backendName==null&&this.backend,!(X_(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-r-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=Xg(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Xg(e)){const{kernelName:p,inputs:m,attrs:v}=e;this.backendName==null&&this.backend;const g=X_(p,this.backendName);$(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=g.kernelFunc({inputs:m,attrs:v,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,x);const y=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(p,m,y);s=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=e,m=v=>{o&&(s=v.map(g=>this.keep(this.clone(g))))};a=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,v,g),g}}const{inputs:u,attrs:d}=e,h=Xg(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),o&&this.addTapeNode(c,u,n,h,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,n,s){const o=Q_(e);if(o!=null){const r=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?($(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=r.map(c=>n[c]);const l=s.filter((c,u)=>i[u]);return a.concat(l)}return[]}makeTensor(e,n,s,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=e;s==="string"&&Du(e[0])&&(r=e.map(l=>zr(l)));const i=o.write(r,n,s),a=new Qt(n,s,i,this.nextTensorId());if(this.trackTensor(a,o),s==="string"){const l=this.state.tensorInfo.get(i),c=Iq(r);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,s,o){s=s||"float32";const r={dataId:e,shape:n,dtype:s};return this.makeTensorFromTensorInfo(r,o)}makeTensorFromTensorInfo(e,n){const{dataId:s,shape:o,dtype:r}=e,i=new Qt(o,r,s,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const r=new If(e,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let s=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(s=e.size*xf(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof If||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const s=e.size*xf(e.dtype);this.state.numBytes-=s}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,s,o,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:s,saved:r},l=Q_(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=s[d],f=Sn(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),o(c.length>1?c:c[0],r,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=RN(e),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(e,n,s,o=!1){if($(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));$(r instanceof Qt,()=>"The result y returned by f() must be a tensor.");const i=Yq(this.state.activeTape,n,r);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s??r8(r.shape),Jq(a,i,c=>this.tidy(c),i8);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(e){return $(gb(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{$(n.every(a=>a instanceof Qt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((a,l)=>{o[l]=a});const r=(a,l)=>(s=e(...n,l),$(s.value instanceof Qt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),$(gb(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,l)=>{const c=s.gradFunc(a,l),u=Array.isArray(c)?c:[c];$(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),$(u.every(h=>h instanceof Qt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=zn(),s=await this.backend.time(e);return s.wallMs=zn()-n,s}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iS;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Dl.nextTensorId=0;Dl.nextVariableId=0;function r8(t){const e=l0(le(t),"float32");return H.makeTensor(e,t,"float32")}function ON(){const t=QT();if(t._tfengine==null){const e=new $q(t);t._tfengine=new Dl(e)}return Rq(t._tfengine.ENV),t8(()=>t._tfengine),t._tfengine}const H=ON();function i8(t,e){const n={a:t,b:e};return H.runKernel(Zl,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8(){return typeof navigator<"u"&&navigator!=null}function LN(t){if(t||a8()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function FN(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yn=te();Yn.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Yn.registerFlag("IS_BROWSER",()=>FN());Yn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Yn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Yn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Yn.registerFlag("PROD",()=>!1);Yn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Yn.getBool("DEBUG"));Yn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Yn.registerFlag("IS_TEST",()=>!1);Yn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Yn.getBool("DEBUG"));Yn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Yn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Yn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tm(t,e){let n=t;if(zs(t))return e==="string"?[]:[t.length];if(NN(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(AN(t))return[t.buffer.size/(e==null?4:xf(e))];if(!Array.isArray(t))return[];const s=[];for(;Array.isArray(n)||zs(n)&&e!=="string";)s.push(n.length),n=n[0];return Array.isArray(t)&&te().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&PN(t,s,[]),s}function PN(t,e,n){if(n=n||[],!Array.isArray(t)&&!zs(t)){$(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}$(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),$(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const s=e.slice(1);for(let o=0;o<t.length;++o)PN(t[o],s,n.concat(o))}function aS(t,e,n,s){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${t} tensor, but got ${e} tensor`)}}function F(t,e,n,s="numeric"){if(t instanceof ae())return aS(s,t.dtype,e,n),t;let o=Yl(t);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),aS(s,o,e,n),t==null||!zs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=Tm(t,o);!zs(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?Sa(t,o):sa(t,[],!0);return H.makeTensor(a,r,o)}function MN(t,e,n,s="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((r,i)=>F(r,`${e}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8="__op";function Q(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const s=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+l8;const o=(...r)=>{H.startScope(n);try{const i=s(...r);return c0(i)&&console.error("Cannot return a Promise inside of tidy."),H.endScope(i),i}catch(i){throw H.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(t,e){const n=F(t,"real","complex"),s=F(e,"imag","complex");a0(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return H.runKernel(b0,o)}const oa=Q({complex_:c8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(t,e,n,s){if(s==null)s=Yl(t);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(AN(t)||NN(t)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return H.backend.createTensorFromGPUData(t,e||n,s)}if(!zs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){yr(e);const o=le(e),r=le(n);$(o===r,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${r}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==le(e.slice(i)):!0;$(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!zs(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=s!=="string"?Sa(t,s):sa(t,[],!0),H.makeTensor(t,e,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wc(t,e,n){const s=Tm(t,n);return Nm(t,e,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ef={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class fi{static join(e){return new fi(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(s=>zs(s)?s.buffer:s),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let s=0;s<e.length;s++){const o=e[s];s!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=n+o.byteLength;this.shards.push({buffer:o,start:n,end:r}),n=r}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const s=this.findShardForByte(e);if(s===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,r=new ArrayBuffer(o),i=new Uint8Array(r);let a=0;for(let l=s;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,h=a,p=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,p-d);if(i.set(m,h),a+=m.length,n<c.end)break}return r}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=u8(this.shards,n);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function u8(t,e){let n=0,s=t.length;for(;n<=s;){const o=Math.floor((s-n)/2)+n,r=e(t[o]);if(r===0)return o;r<0?s=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Co(){return H}function lS(){return H.memory()}function J(t,e){return H.tidy(t,e)}function Ke(t){RN(t).forEach(n=>n.dispose())}function Oo(t){return H.keep(t)}function BN(t,e,n=1){return H.registerBackend(t,e,n)}function d8(){return H.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ol=4;async function cS(t,e){const n=[],s=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((v,g)=>v+g.length,0)+Ol*h.length,p=new Uint8Array(f);let m=0;for(let v=0;v<h.length;v++){const g=h[v],b=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(b,m),m+=Ol,p.set(g,m),m+=g.length}d(p)});s.push(u)}else s.push(l.data());e!=null&&(c.group=e),n.push(c)}const r=await Promise.all(s);return{data:m8(r),specs:n}}function h8(t,e){const n=new fi(t),s={};let o=0;for(const r of e){const i=f8(r,(a,l)=>n.slice(o+a,o+l));s[r.name]=p8(r,n.slice(o,o+i)),o+=i}return s}function f8(t,e){const n=le(t.shape);let s;if("quantization"in t){const o=t.quantization;s=Ef[o.dtype]}else if(t.dtype==="string"){let o=0;for(let r=0;r<n;r++)o+=Ol+new Uint32Array(e(o,o+Ol))[0];return o}else s=Ef[t.dtype];return n*s}function p8(t,e){const n=t.name,s=t.dtype,o=t.shape,r=le(o);let i,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=Ef[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(s==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];i[d]=h*l.scale+l.min}}else if(l.dtype==="float16")i=I8()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(s==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];i[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=r*c}else if(s==="string"){const l=le(t.shape);i=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+Ol))[0];a+=Ol;const d=new Uint8Array(e.slice(a,a+u));i.push(d),a+=u}}else{const l=Ef[s];if(s==="float32")i=new Float32Array(e);else if(s==="int32")i=new Int32Array(e);else if(s==="bool")i=new Uint8Array(e);else if(s==="complex64"){i=new Float32Array(e);const c=new Float32Array(i.length/2),u=new Float32Array(i.length/2);for(let p=0;p<c.length;p++)c[p]=i[p*2],u[p]=i[p*2+1];const d=Wc(c,o,"float32"),h=Wc(u,o,"float32"),f=oa(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${s}`);a+=r*l}return Wc(i,o,s)}function m8(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(r=>{if(e+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(e);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const ex=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function uS(t){return ex?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function g8(t){if(ex)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let s=0,o=e.length;s<o;s++)n+=String.fromCharCode(e[s]);return btoa(n)}function v8(t){if(ex){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}function b8(t){return fi.join(t)}function y8(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function x8(t,e,n){const s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(s.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");s.weightSpecs=e,s.weightData=n}return t.signature!=null&&(s.signature=t.signature),t.userDefinedMetadata!=null&&(s.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(s.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(s.initializerSignature=t.initializerSignature),s}async function w8(t,e){let n,s;return t.weightsManifest!=null&&([n,s]=await e(t.weightsManifest)),x8(t,n,s)}function tx(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:uS(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:uS(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new fi(t.weightData).byteLength}}function dS(t){const e=[];for(const n of t)e.push(...n.weights);return e}function C8(){const t=n=>{let s=n<<13,o=0;for(;!(s&8388608);)o-=8388608,s<<=1;return s&=-8388609,o+=947912704,s|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function _8(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function S8(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function I8(){const t=C8(),e=_8(),n=S8();return s=>{const o=new ArrayBuffer(4*s.length),r=new Uint32Array(o);for(let i=0;i<s.length;i++){const a=s[i],l=t[n[a>>10]+(a&1023)]+e[a>>10];r[i]=l}return new Float32Array(o)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class on{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return on.instance==null&&(on.instance=new on),on.instance}static registerSaveRouter(e){on.getInstance().saveRouters.push(e)}static registerLoadRouter(e){on.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return on.getHandlers(e,"save")}static getLoadHandlers(e,n){return on.getHandlers(e,"load",n)}static getHandlers(e,n,s){const o=[];return(n==="load"?on.getInstance().loadRouters:on.getInstance().saveRouters).forEach(i=>{const a=i(e,s);a!==null&&o.push(a)}),o}}const E8=t=>on.getSaveHandlers(t),k8=(t,e)=>on.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kb="tensorflowjs",$b=1,Ui="models_store",Lr="model_info_store";function VN(){if(!te().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Tb(t){const e=t.result;e.createObjectStore(Ui,{keyPath:"modelPath"}),e.createObjectStore(Lr,{keyPath:"modelPath"})}class ra{constructor(e){if(this.indexedDB=VN(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((s,o)=>{const r=this.indexedDB.open(kb,$b);r.onupgradeneeded=()=>Tb(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(Ui,"readonly"),c=a.objectStore(Ui).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(c.result.modelArtifacts)},c.onerror=u=>(i.close(),o(c.error)),a.oncomplete=()=>i.close()}else{n.weightData=fi.join(n.weightData);const a=tx(n),l=i.transaction(Lr,"readwrite");let c=l.objectStore(Lr),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return o(h)}let d;u.onsuccess=()=>{d=i.transaction(Ui,"readwrite");const h=d.objectStore(Ui);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}f.onsuccess=()=>s({modelArtifactsInfo:a}),f.onerror=p=>{c=l.objectStore(Lr);const m=c.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(f.error)),m.onerror=v=>(i.close(),o(f.error))}},u.onerror=h=>(i.close(),o(u.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>o(r.error)})}}ra.URL_SCHEME="indexeddb://";const UN=t=>te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ra.URL_SCHEME)?$8(t.slice(ra.URL_SCHEME.length)):null;on.registerSaveRouter(UN);on.registerLoadRouter(UN);function $8(t){return new ra(t)}function T8(t){return t.startsWith(ra.URL_SCHEME)?t.slice(ra.URL_SCHEME.length):t}class N8{constructor(){this.indexedDB=VN()}async listModels(){return new Promise((e,n)=>{const s=this.indexedDB.open(kb,$b);s.onupgradeneeded=()=>Tb(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(Lr,"readonly"),a=r.objectStore(Lr).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(e){return e=T8(e),new Promise((n,s)=>{const o=this.indexedDB.open(kb,$b);o.onupgradeneeded=()=>Tb(o),o.onsuccess=()=>{const r=o.result,i=r.transaction(Lr,"readwrite"),a=i.objectStore(Lr),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=r.transaction(Ui,"readwrite");const f=c.objectStore(Ui).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>s(l.error)};u.onsuccess=d,u.onerror=h=>(d(),r.close(),s(l.error))}},l.onerror=u=>(r.close(),s(l.error)),i.oncomplete=()=>{c==null?r.close():c.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tr="/",Ya="tensorflowjs_models",jN="info",A8="model_topology",R8="weight_specs",D8="weight_data",O8="model_metadata";function zN(t){return{info:[Ya,t,jN].join(tr),topology:[Ya,t,A8].join(tr),weightSpecs:[Ya,t,R8].join(tr),weightData:[Ya,t,D8].join(tr),modelMetadata:[Ya,t,O8].join(tr)}}function WN(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function L8(t){const e=t.split(tr);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(tr)}function F8(t){return t.startsWith(ia.URL_SCHEME)?t.slice(ia.URL_SCHEME.length):t}class ia{constructor(e){if(!te().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=zN(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),o=tx(e),r=fi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,g8(r));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw WN(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=v8(i),n}}ia.URL_SCHEME="localstorage://";const GN=t=>te().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ia.URL_SCHEME)?P8(t.slice(ia.URL_SCHEME.length)):null;on.registerSaveRouter(GN);on.registerLoadRouter(GN);function P8(t){return new ia(t)}class M8{constructor(){$(te().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),$(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Ya+tr,s=tr+jN;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const i=L8(r);e[i]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){e=F8(e);const n=zN(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const s=JSON.parse(this.LS.getItem(n.info));return WN(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hS="://";class So{constructor(){this.managers={}}static getInstance(){return So.instance==null&&(So.instance=new So),So.instance}static registerManager(e,n){$(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(hS)&&(e=e.slice(0,e.indexOf(hS))),$(e.length>0,()=>"scheme must not be an empty string.");const s=So.getInstance();$(s.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),s.managers[e]=n}static getManager(e){const n=So.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(So.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B8{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!te().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const o=this.functionRefs[s.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return xN(e)}}if(te().get("IS_BROWSER")){te().setPlatform("browser",new B8);try{So.registerManager(ia.URL_SCHEME,new M8)}catch{}try{So.registerManager(ra.URL_SCHEME,new N8)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V8={importFetch:()=>require("node-fetch")};let Qg;class U8{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return te().global.fetch!=null?te().global.fetch(e,n):(Qg==null&&(Qg=V8.importFetch()),Qg(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}te().get("IS_NODE")&&!te().get("IS_BROWSER")&&te().setPlatform("node",new U8);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e="float32",n){return e=e||"float32",yr(t),new bn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8(t,e){const n=F(t,"x","cast");if(!Sq(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:e};return H.runKernel(Uu,s,o)}const Te=Q({cast_:j8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(t){const n={x:F(t,"x","clone","string_or_numeric")};return H.runKernel(ed,n)}const Xi=Q({clone_:z8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ON();const G8={buffer:qe,cast:Te,clone:Xi,print:W8};n8(G8);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(t,e){let n=F(t,"a","add"),s=F(e,"b","add");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(Zl,o)}const we=Q({add_:H8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t,e){let n=F(t,"a","floorDiv"),s=F(e,"b","floorDiv");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(Ju,o)}const HN=Q({floorDiv_:K8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(t,e){let n=F(t,"a","div"),s=F(e,"b","div");if([n,s]=Vt(n,s),n.dtype==="int32"&&s.dtype==="int32")return HN(n,s);const o={a:n,b:s},r={};return H.runKernel(Hu,o,r)}const Fe=Q({div_:q8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(t,e){let n=F(t,"a","mul"),s=F(e,"b","mul");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(cd,o)}const W=Q({mul_:X8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8(t){const e=F(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return H.runKernel(Lp,n)}else{const n={x:e};return H.runKernel($p,n)}}const Tn=Q({abs_:Q8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(t){const n={x:F(t,"x","acos")};return H.runKernel(Ou,n)}const J8=Q({acos_:Y8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(t){const n={x:F(t,"x","acosh")};return H.runKernel(Lu,n)}const e5=Q({acosh_:Z8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(t,e=null,n=!1){const o={x:F(t,"x","all","bool")},r={axis:e,keepDims:n};return H.runKernel(h0,o,r)}const KN=Q({all_:t5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5(t,e=null,n=!1){const o={x:F(t,"x","any","bool")},r={axis:e,keepDims:n};return H.runKernel(f0,o,r)}const Nb=Q({any_:n5});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(t,e=0){const s={x:F(t,"x","argMax")},o={axis:e};return H.runKernel(Tp,s,o)}const au=Q({argMax_:s5});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5(t,e=0){const s={x:F(t,"x","argMin")},o={axis:e};return H.runKernel(Np,s,o)}const r5=Q({argMin_:o5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5(t){const n={x:F(t,"x","asin")};return H.runKernel(Fu,n)}const a5=Q({asin_:i5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5(t){const n={x:F(t,"x","asinh")};return H.runKernel(Pu,n)}const c5=Q({asinh_:l5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5(t){const n={x:F(t,"x","atan")};return H.runKernel(Mu,n)}const d5=Q({atan_:u5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5(t,e){let n=F(t,"a","atan2"),s=F(e,"b","atan2");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(Vu,o)}const f5=Q({atan2_:h5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5(t){const n={x:F(t,"x","atanh")};return H.runKernel(Bu,n)}const m5=Q({atanh_:p5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Td(t,e,n,s,o="NHWC",r){const i=t[3],a=[...e,i],l=wr(o);return yn(t,a,n,r,s,null,null,l)}function Hs(t,e,n,s,o,r,i="channelsLast"){const[a,l]=lu(e);let c;if(i==="channelsLast")c=[a,l,t[3],t[3]];else if(i==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return yn(t,c,n,s,o,r,!1,i)}function xr(t,e,n,s,o,r,i="NDHWC"){const[a,l,c]=Ab(e);let u,d;if(i==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return pi(t,u,n,s,o,!1,d,r)}function yn(t,e,n,s,o,r,i=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,v]=lu(n),[g,b]=lu(s),x=pl(h,g),y=pl(f,b),{padInfo:w,outHeight:C,outWidth:_}=b5(o,c,u,m,v,x,y,r,a),S=i?p*d:p;let I;return a==="channelsFirst"?I=[l,S,C,_]:a==="channelsLast"&&(I=[l,C,_,S]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:_,outChannels:S,padInfo:w,strideHeight:m,strideWidth:v,filterHeight:h,filterWidth:f,effectiveFilterHeight:x,effectiveFilterWidth:y,dilationHeight:g,dilationWidth:b,inShape:t,outShape:I,filterShape:e}}function pi(t,e,n,s,o,r=!1,i="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,u,d,h]=t;else if(i==="channelsFirst")[l,h,c,u,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,m,,v]=e,[g,b,x]=Ab(n),[y,w,C]=Ab(s),_=pl(f,y),S=pl(p,w),I=pl(m,C),{padInfo:E,outDepth:O,outHeight:A,outWidth:P}=y5(o,c,u,d,g,b,x,_,S,I,a),z=r?v*h:v;let G;return i==="channelsFirst"?G=[l,z,O,A,P]:i==="channelsLast"&&(G=[l,O,A,P,z]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:O,outHeight:A,outWidth:P,outChannels:z,padInfo:E,strideDepth:g,strideHeight:b,strideWidth:x,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:_,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationDepth:y,dilationHeight:w,dilationWidth:C,inShape:t,outShape:G,filterShape:e}}function g5(t,e,n,s,o){s==null&&(s=nx(t,e,n));const r=t[0],i=t[1],a=cu((r-e+2*s)/n+1,o),l=cu((i-e+2*s)/n+1,o);return[a,l]}function v5(t,e,n,s,o,r){o==null&&(o=nx(t,e[0],s[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=cu((t[a]-e[a]+2*o)/s[a]+1,r));return i}function nx(t,e,n,s=1){const o=pl(e,s);return Math.floor((t[0]*(n-1)-n+o)/2)}function lu(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Ab(t){return typeof t=="number"?[t,t,t]:t}function pl(t,e){return e<=1?t:t+(t-1)*(e-1)}function b5(t,e,n,s,o,r,i,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=g5([e,n],r,s,t,a);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/s),d=Math.ceil(n/o);const h=Math.max(0,(u-1)*s+r-e),f=Math.max(0,(d-1)*o+i-n),p=Math.floor(h/2),m=h-p,v=Math.floor(f/2),g=f-v;c={top:p,bottom:m,left:v,right:g,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-r+1)/s),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=cu((e-r+h+f)/s+1,a),d=cu((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function y5(t,e,n,s,o,r,i,a,l,c,u){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=v5([e,n,s,1],[a,l,c],1,[o,r,i],t,u);h=v[0],f=v[1],p=v[2]}else if(t==="same"){h=Math.ceil(e/o),f=Math.ceil(n/r),p=Math.ceil(s/i);const m=(h-1)*o+a-e,v=(f-1)*r+l-n,g=(p-1)*i+c-s,b=Math.floor(m/2),x=m-b,y=Math.floor(v/2),w=v-y,C=Math.floor(g/2),_=g-C;d={top:y,bottom:w,left:C,right:_,front:b,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function cu(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function aa(t){const[e,n,s]=lu(t);return e===1&&n===1&&s===1}function En(t,e){return aa(t)||aa(e)}function la(t){return lu(t).every(e=>e>0)}function wr(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Zn(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")$(Al(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(s=>{s.forEach(o=>{$(Al(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(t,e){const s={x:F(t,"x","reshape","string_or_numeric")},o={shape:e};return H.runKernel(mm,s,o)}const X=Q({reshape_:x5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(t,e,n,s,o){const r=F(t,"x","avgPool","float32"),i=1;$(En(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Zn("avgPool",s,o);const c={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o};let d=H.runKernel(Ap,c,u);return d=Te(d,r.dtype),l?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const sx=Q({avgPool_:w5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5(t,e,n,s,o,r="NDHWC"){const i=F(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),$(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),$(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Zn("avgPool3d",s,o);const c={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=H.runKernel(Rp,c,u);return d=Te(d,a.dtype),l?X(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const _5=Q({avgPool3d_:C5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5(t,e=0){$(t.length>=1,()=>"Pass at least one tensor to concat");const n=MN(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Xi(n[0]);const s=n,o={axis:e};return H.runKernel(Fp,s,o)}const Xn=Q({concat_:S5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(t,e,n=!1,s=!1){let o=F(t,"a","matMul"),r=F(e,"b","matMul");[o,r]=Vt(o,r);const i={a:o,b:r},a={transposeA:n,transposeB:s};return H.runKernel(Dp,i,a)}const it=Q({matMul_:I5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5(t){const n={x:F(t,"x","sigmoid","float32")};return H.runKernel(xd,n)}const ec=Q({sigmoid_:E5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n){const s=F(t,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:e,size:n};return H.runKernel(xm,o,r)}const xt=Q({slice_:k5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $5(t){const n={x:F(t,"x","tanh","float32")};return H.runKernel(Ed,n)}const Am=Q({tanh_:$5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(t,e,n){const s=F(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);$(s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),$(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),$(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const r={x:s},i={blockShape:e,crops:n};return H.runKernel(Op,r,i)}const ox=Q({batchToSpaceND_:T5});function N5(t){let e;return t.rank===0||t.rank===1?e=X(t,[1,1,1,t.size]):t.rank===2?e=X(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5(t,e,n,s,o,r){r==null&&(r=.001);const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;o!=null&&(c=F(o,"scale","batchNorm"));let u;s!=null&&(u=F(s,"offset","batchNorm")),$(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:N5(i),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:r},p=H.runKernel(Gp,h,f);return X(p,i.shape)}const Rm=Q({batchNorm_:A5});function R5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;o!=null&&(c=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),$(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),$(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&$(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&$(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Rm(i,a,l,u,c,r)}const D5=Q({batchNorm2d_:R5});function O5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;o!=null&&(c=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),$(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),$(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&$(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&$(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Rm(i,a,l,u,c,r)}const L5=Q({batchNorm3d_:O5});function F5(t,e,n,s,o,r){const i=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;o!=null&&(c=F(o,"scale","batchNorm"));let u;return s!=null&&(u=F(s,"offset","batchNorm")),$(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),$(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),$(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&$(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&$(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Rm(i,a,l,u,c,r)}const P5=Q({batchNorm4d_:F5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5(t,e,n){const s=F(t,"x","bincount"),o=F(e,"weights","bincount");$(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),$(n>=0,()=>`size must be non-negative, but got ${n}.`),$(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},i={size:n};return H.runKernel(g0,r,i)}const B5=Q({bincount_:M5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5(t,e){let n=F(t,"broadcastTo","x");const s=n.shape;if(yr(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=X(n,c)}const o=n.shape,r=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])r[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);if(r.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Xi(n);const a={x:n},l={reps:r};return H.runKernel(kd,a,l)}const Gc=Q({broadcastTo_:V5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5(t){const n={x:F(t,"x","ceil","float32")};return H.runKernel(ju,n)}const j5=Q({ceil_:U5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dm(t,e,n){yr(t),n=n||Yl(e);const s={shape:t,value:e,dtype:n};return H.runKernel(A0,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(t,e,n){const s=F(t,"x","clipByValue");if($(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Dm(s.shape,e,s.dtype);const o={x:s},r={clipValueMin:e,clipValueMax:n};return H.runKernel(zu,o,r)}const _s=Q({clipByValue_:z5});function W5(t){return Xn(t,0)}const G5=Q({concat1d_:W5});function H5(t,e){return Xn(t,e)}const K5=Q({concat2d_:H5});function q5(t,e){return Xn(t,e)}const X5=Q({concat3d_:q5});function Q5(t,e){return Xn(t,e)}const Y5=Q({concat4d_:Q5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5(t,e,n,s,o="NHWC",r=[1,1],i){const a=F(t,"x","conv2d","float32"),l=F(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),$(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Zn("conv2d",s,i);const d=o==="NHWC"?c.shape[3]:c.shape[1];$(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),$(En(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),$(la(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),$(la(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=H.runKernel(Pp,h,f);return u?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ca=Q({conv2d_:J5});function Z5(t,e,n,s,o="NWC",r=1,i){const a=F(t,"x","conv1d"),l=F(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=X(a,[1,a.shape[0],a.shape[1]])),$(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),$(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Zn("conv1d",s,i),$(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),$(En(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),$(la(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),$(la(n),()=>"Error in conv1D: Stride should be larger than 0."),$(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=X(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=X(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=ca(h,d,[1,n],s,"NHWC",[1,r],i);return u?X(v,[v.shape[2],v.shape[3]]):X(v,[v.shape[0],v.shape[2],v.shape[3]])}const qN=Q({conv1d_:Z5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(t,e,n,s,o,r="NHWC",i){$(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),$(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),$(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),$(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?l.shape[3]:l.shape[1];$(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),$(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Zn("conv2dDerInput",o,i);const h={dy:l,filter:n},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,inputShape:a},p=H.runKernel(Mp,h,f);return c?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const rx=Q({conv2DBackpropInput_:eX});function tX(t,e,n,s,o,r){const i=F(t,"x","conv2dTranspose"),a=F(e,"filter","conv2dTranspose");return rx(n,i,a,s,o,"NHWC",r)}const XN=Q({conv2dTranspose_:tX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(t,e,n,s,o="NDHWC",r=[1,1,1]){const i=F(t,"x","conv3d"),a=F(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),$(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),$(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),$(En(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),$(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),$(la(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),$(la(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:s,dataFormat:o,dilations:r},h=H.runKernel(Bp,u,d);return c?X(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const sX=Q({conv3d_:nX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oX(t,e,n,s,o){$(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let r=t,i=e,a=!1;e.rank===4&&(a=!0,i=X(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const l=r[4],c=i.shape[4];$(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),$(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),$(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),$(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),$(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:i,filter:n},d={pad:o,strides:s,inputShape:r},h=H.runKernel(w0,u,d);return a?X(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const QN=Q({conv3DBackpropInput_:oX});function rX(t,e,n,s,o){const r=F(t,"x","conv3dTranspose"),i=F(e,"filter","conv3dTranspose");return QN(n,r,i,s,o)}const iX=Q({conv3dTranspose_:rX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(t){const n={x:F(t,"x","cos","float32")};return H.runKernel(Wu,n)}const ix=Q({cos_:aX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lX(t){const n={x:F(t,"x","cosh","float32")};return H.runKernel(Gu,n)}const YN=Q({cosh_:lX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(t,e=0,n=!1,s=!1){const r={x:F(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:s};return H.runKernel(C0,r,i)}const Rb=Q({cumprod_:cX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(t,e=0,n=!1,s=!1){const r={x:F(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:s};return H.runKernel(Vp,r,i)}const JN=Q({cumsum_:uX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t,e,n,s=!1){const o=F(t,"x","denseBincount"),r=F(e,"weights","denseBincount");$(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),$(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),$(n>=0,()=>`size must be non-negative, but got ${n}.`),$(r.size===o.size||r.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${r.shape}.`);const i={x:o,weights:r},a={size:n,binaryOutput:s};return H.runKernel(S0,i,a)}const fS=Q({denseBincount_:dX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hX(t,e,n="NHWC"){const s=F(t,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];$(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),$(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${s.shape}`),$(r*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${e} for depthToSpace with input shape
        ${s.shape}`),$(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:e,dataFormat:n};return H.runKernel(I0,a,l)}const fX=Q({depthToSpace_:hX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(t,e,n,s,o="NHWC",r=[1,1],i){const a=F(t,"x","depthwiseConv2d","float32"),l=F(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),$(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=o==="NHWC"?c.shape[3]:c.shape[1];$(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Zn("depthwiseConv2d",s,i);const h={x:c,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=H.runKernel(Up,h,f);return u?X(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ax=Q({depthwiseConv2d_:pX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(t,e,n,s,o=[1,1],r="NHWC"){const i=F(t,"x","dilation2d"),a=F(e,"filter","dilation2d");$(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),$(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),$(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=i,c=!1;i.rank===3&&(l=X(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),$(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:s,dilations:o},h=H.runKernel(jp,u,d);return c?X(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const gX=Q({dilation2d_:mX});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ll(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,i=t[r]||1;(e[e.length-1-o]||1)>1&&i===1&&s.unshift(r)}return s}function nn(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,i=e[r];(o==null||o===1&&i>1)&&n.unshift(r)}return n}function We(t,e){const n=Math.max(t.length,e.length),s=new Array(n);for(let o=0;o<n;o++){let r=t[t.length-o-1];r==null&&(r=1);let i=e[e.length-o-1];if(i==null&&(i=1),r===1)s[n-o-1]=i;else if(i===1)s[n-o-1]=r;else if(r!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else s[n-o-1]=r}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vX(t,e){let n=F(t,"a","equal","string_or_numeric"),s=F(e,"b","equal","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(zp,o)}const Vo=Q({equal_:vX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(t,e,n){const s=F(e,"a","where"),o=F(n,"b","where"),r=F(t,"condition","where","bool"),i=We(We(r.shape,s.shape),o.shape),a=Gc(r,i),l=Gc(s,i),c=Gc(o,i),u={condition:a,t:l,e:c};return H.runKernel(ym,u)}const Ln=Q({where_:bX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(t){const n={x:F(t,"x","zerosLike")};return H.runKernel(km,n)}const nt=Q({zerosLike_:yX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(t,e){let n=F(t,"a","div"),s=F(e,"b","div");[n,s]=Vt(n,s);const o=Fe(n,s),r=nt(o),i=Vo(s,r);return Ln(i,r,o)}const wX=Q({divNoNan_:xX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(t,e){const n=F(t,"t1","dot"),s=F(e,"t2","dot");$((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if($(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const i=X(n,[1,-1]),a=X(s,[-1,1]),l=it(i,a);return X(l,[])}else if(n.rank===1&&s.rank===2){const i=X(n,[1,-1]),a=X(s,[s.shape[0],s.shape[1]]),l=it(i,a);return X(l,[l.size])}else if(n.rank===2&&s.rank===1){const i=X(s,[-1,1]),a=it(n,i);return X(a,[a.size])}else{const i=X(s,[s.shape[0],s.shape[1]]);return it(n,i)}}const _X=Q({dot_:CX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(t,...e){const n=e.map((o,r)=>F(o,`tensors${r}`,"einsum")),s={equation:t};return H.runKernel($0,n,s)}const xc=Q({einsum_:SX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(t){const n={x:F(t,"x","elu","float32")};return H.runKernel(Ku,n)}const Om=Q({elu_:IX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(t){let e=F(t,"x","erf");$(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Te(e,"float32"));const n={x:e};return H.runKernel(qu,n)}const ZN=Q({erf_:EX});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function eA(t,e,n){const s=t.length+e.length,o=[];let r=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?o.push(t[r++]):o.push(e[i++]);return o}function pn(t,e){const n=[],s=t.length;for(let r=0;r<s;r++)e.indexOf(r)===-1&&n.push(t[r]);const o=e.map(r=>t[r]);return[n,o]}function Kt(t,e){const n=e.map(s=>1);return eA(t,n,e)}function xn(t,e,n){$(lx(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Dt(t,e){if(lx(t,e))return null;const n=[];for(let s=0;s<e;++s)t.indexOf(s)===-1&&n.push(s);return t.forEach(s=>n.push(s)),n}function mi(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Ut(t,e){const n=[];for(let s=e-t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(t,e=null,n=!1){const o={x:F(t,"x","max")},r={reductionIndices:e,keepDims:n};return H.runKernel(tm,o,r)}const ro=Q({max_:kX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(t,e=null,n=!1){const o={x:F(t,"x","min")},r={axis:e,keepDims:n};return H.runKernel(rm,o,r)}const kf=Q({min_:$X});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(t,e){let n=F(t,"base","pow"),s=F(e,"exp","pow");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(ud,o)}const ua=Q({pow_:TX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e){if((zs(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&zs(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Nm(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(t){const n={x:F(t,"x","sqrt","float32")};return H.runKernel(Cd,n)}const In=Q({sqrt_:NX});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(t){const e=F(t,"x","square"),n={};return H.runKernel("Square",{x:e},n)}const It=Q({square_:AX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(t,e=null,n=!1){let s=F(t,"x","sum");s.dtype==="bool"&&(s=Te(s,"int32"));const o={x:s},r={axis:e,keepDims:n};return H.runKernel(wm,o,r)}const Le=Q({sum_:RX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t,e="euclidean",n=null,s=!1){t=F(t,"x","norm");const o=tA(t,e,n);let r=o.shape;if(s){const i=Xe(n,t.shape);r=Kt(o.shape,i)}return X(o,r)}function tA(t,e,n=null){if(t.rank===0)return Tn(t);if(t.rank!==1&&n===null)return tA(X(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Le(Tn(t),n);if(e===1/0)return ro(Tn(t),n);if(e===-1/0)return kf(Tn(t),n);if(e==="euclidean"||e===2)return In(Le(ua(Tn(t),lt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ro(Le(Tn(t),n[0]),n[1]-1);if(e===1/0)return ro(Le(Tn(t),n[1]),n[0]);if(e===-1/0)return kf(Le(Tn(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return In(Le(It(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Lm=Q({norm_:DX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(t,e=null,n=!1){return Lm(t,"euclidean",e,n)}const LX=Q({euclideanNorm_:OX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FX(t){const n={x:F(t,"x","exp")};return H.runKernel(Xu,n)}const Uo=Q({exp_:FX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PX(t,e=0){const n=F(t,"x","expandDims","string_or_numeric");$(e<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:e};return H.runKernel(Wp,s,o)}const Gn=Q({expandDims_:PX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(t){const n={x:F(t,"x","expm1")};return H.runKernel(Qu,n)}const BX=Q({expm1_:MX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t,e){const n=F(t,"x","tile","string_or_numeric");$(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const s={x:n},o={reps:e};return H.runKernel(kd,s,o)}const to=Q({tile_:VX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(t,e,n,s="float32"){e==null&&(e=t);const o=qe([t,e],s),r=t<=e?t:e;for(let a=0;a<r;++a)o.set(1,a,a);const i=X(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return to(Gn(i,0),[n[0],1,1]);if(n.length===2)return to(Gn(Gn(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return to(Gn(Gn(Gn(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const nA=Q({eye_:UX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(t){const n={x:F(t,"x","floor","float32")};return H.runKernel(Yu,n)}const Fm=Q({floor_:jX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(t,e,n=0,s=0){const o=F(t,"x","gather"),r=F(e,"indices","gather","int32"),i={x:o,indices:r},a={axis:n,batchDims:s};return H.runKernel(Hp,i,a)}const cx=Q({gather_:zX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(t,e){let n=F(t,"a","greater","string_or_numeric"),s=F(e,"b","greater","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Kp,o)}const Ss=Q({greater_:WX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(t,e){let n=F(t,"a","greaterEqual","string_or_numeric"),s=F(e,"b","greaterEqual","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Zu,o)}const Ia=Q({greaterEqual_:GX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(t){const n={input:F(t,"input","imag")};return H.runKernel(O0,n)}const ux=Q({imag_:HX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(t){const n={x:F(t,"x","isFinite")};return H.runKernel(td,n)}const qX=Q({isFinite_:KX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XX(t){const n={x:F(t,"x","isInf")};return H.runKernel(nd,n)}const QX=Q({isInf_:XX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(t){const n={x:F(t,"x","isNaN")};return H.runKernel(sd,n)}const JX=Q({isNaN_:YX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t,e=.2){const s={x:F(t,"x","leakyRelu")},o={alpha:e};return H.runKernel(qp,s,o)}const dx=Q({leakyRelu_:ZX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(t,e){let n=F(t,"a","less","string_or_numeric"),s=F(e,"b","less","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Xp,o)}const $f=Q({less_:eQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQ(t,e){let n=F(t,"a","lessEqual","string_or_numeric"),s=F(e,"b","lessEqual","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Qp,o)}const tc=Q({lessEqual_:tQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t,e=5,n=1,s=1,o=.5){const r=F(t,"x","localResponseNormalization");$(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),$(Al(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=r,a=!1;r.rank===3&&(a=!0,i=X(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:s,beta:o},u=H.runKernel(em,l,c);return a?X(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const sQ=Q({localResponseNormalization_:nQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(t){const n={x:F(t,"x","log","float32")};return H.runKernel(od,n)}const jo=Q({log_:oQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(t){const n={x:F(t,"x","log1p")};return H.runKernel(rd,n)}const sA=Q({log1p_:rQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQ(t,e){$(gb(t),()=>"The f passed in variableGrads(f) must be a function"),$(e==null||Array.isArray(e)&&e.every(c=>c instanceof If),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in H.registeredVariables)e.push(H.registeredVariables[c])}const s=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),$(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:i,grads:a}=H.gradients(t,e,null,r);$(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),$(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),s!=null&&s.forEach(c=>l[c.name]=null),{value:i,grads:l}}function Fl(t){return H.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(t){const n={x:F(t,"x","neg")};return H.runKernel(am,n)}const Bt=Q({neg_:aQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(t){const n={x:F(t,"x","softplus")};return H.runKernel(wd,n)}const Nd=Q({softplus_:lQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(t){const e=F(t,"x","logSigmoid");return Fl(s=>({value:Bt(Nd(Bt(s))),gradFunc:i=>W(i,ec(Bt(s)))}))(e)}const uQ=Q({logSigmoid_:cQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(t,e){let n=F(t,"a","sub"),s=F(e,"b","sub");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(Sd,o)}const Ve=Q({sub_:dQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(t,e=-1){const n=F(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Fl((o,r)=>{const a=ro(o,e,!0),l=Ve(o,a),c=Ve(Te(l,"float32"),jo(Le(Uo(l),e,!0)));return r([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,p=!0,m=Uo(f);return Ve(d,W(Le(d,e,p),m))}}})(n)}const oA=Q({logSoftmax_:hQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(t,e=null,n=!1){const s=F(t,"x","logSumExp"),o=Xe(e,s.shape),r=ro(s,o,!0),i=Ve(s,r),a=Uo(i),l=Le(a,o),c=jo(l),u=we(X(r,c.shape),c);if(n){const d=Kt(u.shape,o);return X(u,d)}return u}const rA=Q({logSumExp_:fQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pQ(t,e){const n=F(t,"a","logicalAnd","bool"),s=F(e,"b","logicalAnd","bool");We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Yp,o)}const hr=Q({logicalAnd_:pQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQ(t){const n={x:F(t,"x","logicalNot","bool")};return H.runKernel(Jp,n)}const hx=Q({logicalNot_:mQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(t,e){const n=F(t,"a","logicalOr","bool"),s=F(e,"b","logicalOr","bool");We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(Zp,o)}const iA=Q({logicalOr_:gQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(t,e){const n=F(t,"a","logicalXor","bool"),s=F(e,"b","logicalXor","bool");return We(n.shape,s.shape),hr(iA(t,e),hx(hr(t,e)))}const bQ=Q({logicalXor_:vQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yQ(t,e,n,s,o){const r=F(t,"x","maxPool"),i=1;let a=r,l=!1;r.rank===3&&(l=!0,a=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),$(En(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Zn("maxPool",s,o);const c={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o},d=H.runKernel(nm,c,u);return l?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const fx=Q({maxPool_:yQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e=[1,1,1],n,s,o,r="NDHWC"){const i=F(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),$(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),$(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Zn("maxPool3d",s,o);const c={x:a},u={filterSize:e,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=H.runKernel(sm,c,u);return l?X(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const wQ=Q({maxPool3d_:xQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e){let n=F(t,"a","maximum"),s=F(e,"b","maximum");[n,s]=Vt(n,s),n.dtype==="bool"&&(n=Te(n,"int32"),s=Te(s,"int32")),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(id,o)}const gi=Q({maximum_:CQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t,e=null,n=!1){const o={x:F(t,"x","mean")},r={axis:e,keepDims:n};return H.runKernel(om,o,r)}const Wt=Q({mean_:_Q});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(t,e="float32"){if(yr(t),e==="complex64"){const s=cn(t,"float32"),o=cn(t,"float32");return oa(s,o)}const n=Sn(le(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t,e="float32"){if(yr(t),e==="complex64"){const s=vi(t,"float32"),o=cn(t,"float32");return oa(s,o)}const n=l0(le(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQ(t,e){let n=F(t,"a","minimum"),s=F(e,"b","minimum");[n,s]=Vt(n,s),n.dtype==="bool"&&(n=Te(n,"int32"),s=Te(s,"int32")),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(ad,o)}const uu=Q({minimum_:SQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t,e,n){$(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=F(t,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");$(e.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)$(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),$(e[a][0]>=0&&e[a][0]<=s.shape[a]-o&&e[a][1]>=0&&e[a][1]<=s.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:e,mode:n},i={x:s};return H.runKernel(im,i,r)}const EQ=Q({mirrorPad_:IQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(t,e){let n=F(t,"a","mod"),s=F(e,"b","mod");[n,s]=Vt(n,s);const o={a:n,b:s};return H.runKernel(ld,o)}const $Q=Q({mod_:kQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(t,e=null,n=!1){t=F(t,"x","moments");const s=Xe(e,t.shape),o=Wt(t,s,n);let r=o.shape;n||(r=Kt(o.shape,s));const i=It(Ve(Te(t,"float32"),X(o,r))),a=Wt(i,s,n);return{mean:o,variance:a}}const px=Q({moments_:TQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(t,e){let n=F(t,"a","notEqual","string_or_numeric"),s=F(e,"b","notEqual","string_or_numeric");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s};return H.runKernel(lm,o)}const Tf=Q({notEqual_:NQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t,e,n=1,s=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:F(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:s};return H.runKernel(um,i,a)}const aA=Q({oneHot_:AQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(t){const n={x:F(t,"x","onesLike")};return H.runKernel(cm,n)}const Ws=Q({onesLike_:RQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQ(t,e,n=0){const s=F(t,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},r={x:s};return H.runKernel(hm,r,o)}const mx=Q({pad_:DQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t,e,n){const s=F(t,"x","spaceToBatchND");$(s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),$(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),$(s.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:s},r={blockShape:e,paddings:n};return H.runKernel(Cm,o,r)}const gx=Q({spaceToBatchND_:OQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t,e,n,s,o,r,i){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=F(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),$(En(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const u=Hs(l.shape,e,r,o,s),d=[u.dilationHeight,u.dilationWidth];let h;s==="same"?h=PQ([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=FQ([u.inHeight,u.inWidth],d,h),v=f?s:"valid",g=f?l:gx(l,d,p),x=(n==="avg"?()=>sx(g,e,r,v,i):()=>fx(g,e,r,v,i))(),y=f?x:ox(x,d,m);return c?X(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function FQ(t,e,n){const s=n.map(u=>u[0]),o=n.map(u=>u[1]),r=t.concat(s,o),i=e.map((u,d)=>(u-r[d]%u)%u),a=o.map((u,d)=>u+i[d]),l=e.map((u,d)=>[s[d],a[d]]),c=e.map((u,d)=>[0,i[d]]);return[l,c]}function PQ(t,e){const s=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),r=s.map((i,a)=>i-o[a]);return s.map((i,a)=>[o[a],r[a]])}const MQ=Q({pool_:LQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(t,e){const n=F(t,"x","prelu"),s=F(e,"alpha","prelu"),o={x:n,alpha:s};return H.runKernel(fm,o)}const vx=Q({prelu_:BQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(t,e=null,n=!1){let s=F(t,"x","prod");s.dtype==="bool"&&(s=Te(s,"int32"));const o={x:s},r={axis:e,keepDims:n};return H.runKernel(pm,o,r)}const UQ=Q({prod_:VQ});var bx={exports:{}};bx.exports;(function(t){(function(e,n,s){function o(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function r(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var u=new o(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&r(d,u),h.state=function(){return r(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(ya,t)})(bx);var jQ=bx.exports,yx={exports:{}};yx.exports;(function(t){(function(e,n,s){function o(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(ya,t)})(yx);var zQ=yx.exports,xx={exports:{}};xx.exports;(function(t){(function(e,n,s){function o(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(ya,t)})(xx);var WQ=xx.exports,wx={exports:{}};wx.exports;(function(t){(function(e,n,s){function o(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(ya,t)})(wx);var GQ=wx.exports,Cx={exports:{}};Cx.exports;(function(t){(function(e,n,s){function o(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,v,g=[],b=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,h=g[m&127]^=f+v,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;u.w=v,u.X=g,u.i=p}c(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(ya,t)})(Cx);var HQ=Cx.exports,_x={exports:{}};_x.exports;(function(t){(function(e,n,s){function o(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(ya,t)})(_x);var KQ=_x.exports,lA={exports:{}};const qQ={},XQ=Object.freeze(Object.defineProperty({__proto__:null,default:qQ},Symbol.toStringTag,{value:"Module"})),QQ=FV(XQ);(function(t){(function(e,n,s){var o=256,r=6,i=52,a="random",l=s.pow(o,r),c=s.pow(2,i),u=c*2,d=o-1,h;function f(y,w,C){var _=[];w=w==!0?{entropy:!0}:w||{};var S=g(v(w.entropy?[y,x(n)]:y??b(),3),_),I=new p(_),E=function(){for(var O=I.g(r),A=l,P=0;O<c;)O=(O+P)*o,A*=o,P=I.g(1);for(;O>=u;)O/=2,A/=2,P>>>=1;return(O+P)/A};return E.int32=function(){return I.g(4)|0},E.quick=function(){return I.g(4)/4294967296},E.double=E,g(x(I.S),n),(w.pass||C||function(O,A,P,z){return z&&(z.S&&m(z,I),O.state=function(){return m(I,{})}),P?(s[a]=O,A):O})(E,S,"global"in w?w.global:this==s,w.state)}function p(y){var w,C=y.length,_=this,S=0,I=_.i=_.j=0,E=_.S=[];for(C||(y=[C++]);S<o;)E[S]=S++;for(S=0;S<o;S++)E[S]=E[I=d&I+y[S%C]+(w=E[S])],E[I]=w;(_.g=function(O){for(var A,P=0,z=_.i,G=_.j,M=_.S;O--;)A=M[z=d&z+1],P=P*o+M[d&(M[z]=M[G=d&G+A])+(M[G]=A)];return _.i=z,_.j=G,P})(o)}function m(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function v(y,w){var C=[],_=typeof y,S;if(w&&_=="object")for(S in y)try{C.push(v(y[S],w-1))}catch{}return C.length?C:_=="string"?y:y+"\0"}function g(y,w){for(var C=y+"",_,S=0;S<C.length;)w[d&S]=d&(_^=w[d&S]*19)+C.charCodeAt(S++);return x(w)}function b(){try{var y;return h&&(y=h.randomBytes)?y=y(o):(y=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(y)),x(y)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(y){return String.fromCharCode.apply(0,y)}if(g(s.random(),n),t.exports){t.exports=f;try{h=QQ}catch{}}else s["seed"+a]=f})(typeof self<"u"?self:ya,[],Math)})(lA);var YQ=lA.exports,JQ=jQ,ZQ=zQ,eY=WQ,tY=GQ,nY=HQ,sY=KQ,Ea=YQ;Ea.alea=JQ;Ea.xor128=ZQ;Ea.xorwow=eY;Ea.xorshift7=tY;Ea.xor4096=nY;Ea.tychei=sY;var Sx=Ea;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cA{constructor(e,n,s,o,r){this.mean=e,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=Sx.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,s=!1;for(;!s;){let o,r,i;do o=2*this.random()-1,r=2*this.random()-1,i=o*o+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(e))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class oY{constructor(e=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=Sx.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(t,e=0,n=1,s,o){if(yr(t),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new cA(e,n,s,!1,o),i=qe(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const iY=Q({randomNormal_:rY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(t,e=0,n=1,s="float32",o){yr(t);const r=qe(t,s),i=new oY(e,n,null,o);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const Ad=Q({randomUniform_:aY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function du(t,e,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:s};return H.runKernel(U0,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lY(t){const n={input:F(t,"input","real")};return H.runKernel(j0,n)}const Nf=Q({real_:lY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cY(t){const n={x:F(t,"x","reciprocal")};return H.runKernel(dd,n)}const uY=Q({reciprocal_:cY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(t){const n={x:F(t,"x","relu")};return H.runKernel(hd,n)}const ka=Q({relu_:dY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t){const n={x:F(t,"x","relu6")};return H.runKernel(fd,n)}const uA=Q({relu6_:hY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(t,e){const s={x:F(t,"x","reverse")},o={dims:e};return H.runKernel(bm,s,o)}const da=Q({reverse_:fY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(t){const n={x:F(t,"x","round")};return H.runKernel(pd,n)}const dA=Q({round_:pY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t){const n={x:F(t,"x","rsqrt","float32")};return H.runKernel(md,n)}const hA=Q({rsqrt_:mY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(t){const n={x:F(t,"x","selu")};return H.runKernel(gd,n)}const fA=Q({selu_:gY});function vY(t,e,n,s,o,r=[1,1],i="NHWC"){const a=F(t,"x","separableConv2d"),l=F(e,"depthwiseFilter","separableConv2d"),c=F(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=X(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");$(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),$(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),$(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),$(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),$(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],f=l.shape[3];$(c.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${c.shape[2]}.`);const p=ax(u,l,s,o,i,r),v=ca(p,c,1,"valid",i);return d?X(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const pA=Q({separableConv2d_:vY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(t){const n={x:F(t,"x","sign")};return H.runKernel(yd,n)}const yY=Q({sign_:bY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(t){const n={x:F(t,"x","sin","float32")};return H.runKernel(vd,n)}const mA=Q({sin_:xY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(t){const n={x:F(t,"x","sinh")};return H.runKernel(bd,n)}const gA=Q({sinh_:wY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(t,e,n){const s=F(t,"x","slice1d");return $(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),xt(s,[e],[n])}const Ix=Q({slice1d_:CY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(t,e,n){const s=F(t,"x","slice2d");return $(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const vA=Q({slice2d_:_Y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(t,e,n){const s=F(t,"x","slice3d");return $(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const Ex=Q({slice3d_:SY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(t,e,n){const s=F(t,"x","slice4d");return $(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),xt(s,e,n)}const Af=Q({slice4d_:IY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(t,e=-1){const n=F(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const s={logits:n},o={dim:e};return H.runKernel(Sm,s,o)}const kx=Q({softmax_:EY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(t){$(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(N0,e)}const bA=Q({fft_:kY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t){$(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(D0,e)}const Db=Q({ifft_:$Y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(t){const e=t.shape[t.shape.length-1],n=t.size/e;let s;if(e<=2){const o=X(t,[n,e]);s=Db(o)}else{const o=[n,2*(e-1)],r=X(Nf(t),[n,e]),i=X(ux(t),[n,e]),a=da(xt(r,[0,1],[n,e-2]),1),l=W(da(xt(i,[0,1],[n,e-2]),1),lt(-1)),c=Xn([r,a],1),u=Xn([i,l],1),d=X(oa(c,u),[o[0],o[1]]);s=Db(d)}if(s=Nf(s),t.rank===3&&t.shape[0]!==0){const o=s,r=t.shape[0];s=X(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const NY=Q({irfft_:TY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AY(t,e,n=0){const o={x:F(t,"x","split")},r={numOrSizeSplits:e,axis:n};return H.runKernel(_m,o,r)}const bs=Q({split_:AY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(t,e){$(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const s=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(v=>0),m=t.shape.map(v=>v);m[t.shape.length-1]=e,o=xt(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=Xn([t,cn(p)],t.shape.length-1),n=e}else o=t;const r=nt(o),i=X(oa(o,r),[s,n]),a=bA(i),l=Math.floor(n/2)+1,c=Nf(a),u=ux(a),d=bs(c,[l,n-l],c.shape.length-1),h=bs(u,[l,n-l],u.shape.length-1),f=o.shape.slice();return f[o.shape.length-1]=l,X(oa(d[0],h[0]),f)}const DY=Q({rfft_:RY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OY(t,e){let n=F(t,"a","squaredDifference"),s=F(e,"b","squaredDifference");[n,s]=Vt(n,s),We(n.shape,s.shape);const o={a:n,b:s},r={};return H.runKernel(_d,o,r)}const LY=Q({squaredDifference_:OY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(t,e){const n=F(t,"x","squeeze","string_or_numeric");return X(n,di(n.shape,e).newShape)}const Rd=Q({squeeze_:FY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(t,e=0){const n=MN(t,"tensors","stack","string_or_numeric");$(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&$(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:e};return H.runKernel(dm,s,o)}const fr=Q({stack_:PY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(t,e=0){const s={x:F(t,"x","step")},o={alpha:e};return H.runKernel($d,s,o)}const Dd=Q({step_:MY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(t,e,n,s,o=0,r=0,i=0,a=0,l=0){const u={x:F(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return H.runKernel(K0,u,d)}const VY=Q({stridedSlice_:BY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(t){const n={x:F(t,"x","tan","float32")};return H.runKernel(Id,n)}const jY=Q({tan_:UY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function as(t,e){WT(t);const n=Tm(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Nm(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uh(t,e,n){if(WT(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=Tm(t,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nm(t,e,s,n)}function yA(t,e,n){const s=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(t.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+t.length-s)throw new Error(r+` update.rank != ${o+t.length-s}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(r+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+s])throw new Error(r+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function zY(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}yA(n,e,t)}function $a(t,e,n){const s=e.shape.length,o=s>1?e.shape[s-1]:1,r=n.length;let i=1;for(let d=o;d<r;++d)i*=n[d];const a=o<1?1:o,l=le(e.shape)/a,c=[...Oe(n.slice(0,o)),1],u=le(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WY(t,e=1,n=!0){const s=F(t,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const r={x:s},i={k:e,sorted:n},[a,l]=H.runKernel(q0,r,i);return{values:a,indices:l}}const GY=Q({topk_:WY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(t,e=0,n=1,s,o){if(yr(t),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new cA(e,n,s,!0,o),i=qe(t,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const xA=Q({truncatedNormal_:HY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(t,e=0){const n=F(t,"x","unique","string_or_numeric");$(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:e},[r,i]=H.runKernel(Q0,s,o);return{values:r,indices:i}}const qY=Q({unique_:KY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XY(t,e,n){const s=F(t,"x","unsortedSegmentSum"),o=F(e,"segmentIds","unsortedSegmentSum","int32");$(Al(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},i={numSegments:n};return H.runKernel(Em,r,i)}const wA=Q({unsortedSegmentSum_:XY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(t,e=0){const n=F(t,"x","unstack","string_or_numeric");$(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:e};return H.runKernel(Im,s,o)}const ha=Q({unstack_:QY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YY(t,e=!0,n,s){return H.makeVariable(t,e,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CA(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const s=qe(t,"int32"),o=qe([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const i=s.indexToLoc(n[r]),a=r*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(t,e,n){const s=F(t,"x","transpose");if(e==null&&(e=s.shape.map((i,a)=>a).reverse()),$(s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${e}.`),e.forEach(i=>{$(i>=0&&i<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${e}`)}),s.rank<=1)return s.clone();const o={x:s},r={perm:e};return s.dtype==="complex64"?J(()=>{let i=Nf(s),a=ux(s);return i=H.runKernel(fl,{x:i},r),a=H.runKernel(fl,{x:a},r),n&&(a=Bt(a)),oa(i,a)}):H.runKernel(fl,o,r)}const tt=Q({transpose_:JY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZY(t,e){if(e==null)return t.shape.slice();if(ct(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let s=0;s<t.shape.length;s++)e[s]==null&&t.shape[s]!=null?n.push(t.shape[s]):n.push(e[s]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7(t,e,n,s){const o=F(t,"x","dropout");if($(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),$(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Qt?o.clone():o;const r=ZY(o,n),i=1-e,a=Fe(Fm(we(Ad(r,0,1,"float32",s),i)),i);return W(o,a)}const t7=Q({dropout_:e7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(t,e,n,s,o,r="NHWC",i){let a=t;t.rank===3&&(a=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=X(e,[1,e.shape[0],e.shape[1],e.shape[2]])),$(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),$(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),$(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=r==="NHWC"?a.shape[3]:a.shape[1],u=r==="NHWC"?l.shape[3]:l.shape[1];$(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),$(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Zn("conv2dDerFilter",o,i);const d={x:a,dy:l},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,filterShape:n};return H.runKernel(y0,d,h)}const $x=Q({conv2DBackpropFilter_:n7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tx(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return W(t,Dd(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Nx(t,e){let n=e;const s=nn(t.shape,e.shape);return s.length>0&&(n=Le(n,s)),X(n,t.shape)}function Ax(t,e,n,s){if(e==="linear")return t;if(e==="relu")return ka(t);if(e==="elu")return Om(t);if(e==="relu6")return uA(t);if(e==="prelu")return vx(t,n);if(e==="leakyrelu")return dx(t,s);if(e==="sigmoid")return ec(t);throw new Error(`Unknown fused activation ${e}.`)}const Rx=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7({x:t,filter:e,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",Rx(H.state.gradientDepth,l)===!1){$(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=ca(t,e,n,s,o,r,i);return a!=null&&(C=we(C,a)),Ax(C,l,c,u)}const d=F(t,"x","conv2d","float32"),h=F(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=X(d,[1,d.shape[0],d.shape[1],d.shape[2]])),$(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),$(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Zn("fused conv2d",s,i);const m=o==="NHWC"?f.shape[3]:f.shape[1];$(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),$(En(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const v=yn(f.shape,h.shape,n,r,s,i);let g;a!=null&&(g=F(a,"bias","fused conv2d"),[g]=Vt(g,d),o==="NHWC"?We(v.outShape,g.shape):($(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),$(g.shape.length===0||g.shape[0]===v.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let b;if(c!=null){const C=c.shape;if($(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)$(C[0]===1||C[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${v.outChannels}).`);else if(C.length===3)try{We(C,v.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(S)}b=F(c,"prelu weights","fused conv2d")}const x=(C,_)=>{$(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[S,I,E,O]=_,A=Tx(C,E,l);$(aa(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const P=rx(I.shape,A,S,n,s),z=$x(I,A,S.shape,n,s),G=[P,z];if(O!=null){const M=Nx(O,A);G.push(M)}return G},y={x:f,filter:h,bias:g,preluActivationWeights:b},w={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?Fl((_,S,I)=>{let E=H.runKernel(Cf,y,w);return I([S,_,E]),p&&(E=X(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(f,h):Fl((_,S,I,E)=>{let O=H.runKernel(Cf,y,w);return E([S,_,O,I]),p&&(O=X(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:x}})(f,h,g)}const o7=Q({fusedConv2d_:s7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(t,e,n,s,o,r=[1,1],i){let a=t;t.rank===3&&(a=X(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:s,pad:o,dimRoundingMode:i,dilations:r,filterShape:n};return H.runKernel(E0,c,u)}const i7=Q({depthwiseConv2dNativeBackpropFilter_:r7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(t,e,n,s,o,r=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=X(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:s,pad:o,dimRoundingMode:i,dilations:r,inputShape:t},d=H.runKernel(k0,c,u);return l?X(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const l7=Q({depthwiseConv2dNativeBackpropInput_:a7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7({a:t,b:e,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(Rx(H.state.gradientDepth,r)===!1){let O=it(t,e,n,s);return o!=null&&(O=we(O,o)),Ax(O,r,i,a)}let l=F(t,"a","fused matMul"),c=F(e,"b","fused matMul");[l,c]=Vt(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=s?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),v=le(p),g=le(m);$(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${s} must match.`);const x=We(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),y=n?X(l,[v,u,h]):X(l,[v,h,u]),w=s?X(c,[g,f,d]):X(c,[g,d,f]);let C;o!=null&&(C=F(o,"bias","fused matMul"),[C]=Vt(C,l),We(x,C.shape));let _;i!=null&&(_=F(i,"prelu weights","fused matMul"));const S=(O,A)=>{const[P,z,G,M]=A,R=Tx(X(O,G.shape),G,r);let D,j;if(!n&&!s?(D=it(R,z,!1,!0),j=it(P,R,!0,!1)):!n&&s?(D=it(R,z,!1,!1),j=it(R,P,!0,!1)):n&&!s?(D=it(z,R,!1,!0),j=it(P,R,!1,!1)):(D=it(z,R,!0,!0),j=it(R,P,!0,!0)),o!=null){const ne=Nx(M,R);return[D,j,ne]}else return[D,j]},I={a:y,b:w,bias:C,preluActivationWeights:_},E={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:a};return o==null?Fl((A,P,z)=>{const G=H.runKernel(wf,I,E);return z([A,P,G]),{value:X(G,x),gradFunc:S}})(y,w):Fl((A,P,z,G)=>{const M=H.runKernel(wf,I,E);return G([A,P,M,z]),{value:X(M,x),gradFunc:S}})(y,w,C)}const pS=Q({fusedMatMul_:c7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u7(t,e,n,s,o="bilinear",r=0){const i=F(t,"image","cropAndResize"),a=F(e,"boxes","cropAndResize","float32"),l=F(n,"boxInd","cropAndResize","int32"),c=a.shape[0];$(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),$(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),$(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),$(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),$(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),$(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const u={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:r,cropSize:s};return H.runKernel(_0,u,d)}const d7=Q({cropAndResize_:u7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(t){const e=F(t,"image","flipLeftRight","float32");$(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return H.runKernel(R0,n,{})}const f7=Q({flipLeftRight_:h7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(t){const e=F(t,"image","grayscaleToRGB"),n=e.rank-1,s=e.shape[n];$(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),$(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,to(e,o)}const m7=Q({grayscaleToRGB_:p7});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7(t){const e=F(t,"image","RGBToGrayscale"),n=e.rank-1,s=e.shape[n];$(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),$(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const o=e.dtype,r=Te(e,"float32"),i=as([.2989,.587,.114]);let a;switch(e.rank){case 2:a=xc("ij,j->i",r,i);break;case 3:a=xc("ijk,k->ij",r,i);break;case 4:a=xc("ijkl,l->ijk",r,i);break;case 5:a=xc("ijklm,m->ijkl",r,i);break;case 6:a=xc("ijklmn,n->ijklm",r,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Gn(a,-1),Te(a,o)}const v7=Q({rgbToGrayscale_:g7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b7(t,e,n=0,s=.5){const o=F(t,"image","rotateWithOffset","float32");$(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},i={radians:e,fillValue:n,center:s};return H.runKernel(Y0,r,i)}const y7=Q({rotateWithOffset_:b7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(t,e,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=t.shape[0];return n=Math.min(n,i),$(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),$(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),$(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),$(e.rank===1,()=>"scores must be a 1D tensor"),$(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),$(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=F(t,"boxes","nonMaxSuppression","float32"),i=F(e,"scores","nonMaxSuppression","float32"),a=nc(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return H.runKernel(M0,{boxes:r,scores:i},l)}const w7=Q({nonMaxSuppression_:x7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C7(t,e,n){const s=_7(t,e,n),o=s<0?-(s+1):s;t.splice(o,0,e)}function _7(t,e,n){return I7(t,e,n||S7)}function S7(t,e){return t>e?1:t<e?-1:0}function I7(t,e,n){let s=0,o=t.length,r=0,i=!1;for(;s<o;){r=s+(o-s>>>1);const a=n(e,t[r]);a>0?s=r+1:(o=r,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dx(t,e,n,s,o){return Fx(t,e,n,s,o,0)}function Ox(t,e,n,s,o,r){return Fx(t,e,n,s,o,0,!1,r,!0)}function Lx(t,e,n,s,o,r){return Fx(t,e,n,s,o,r,!0)}function Fx(t,e,n,s,o,r,i=!1,a=!1,l=!1){const c=[];for(let v=0;v<e.length;v++)e[v]>o&&c.push({score:e[v],boxIndex:v,suppressBeginIndex:0});c.sort(mS);const u=r>0?-.5/r:0,d=[],h=[];for(;d.length<n&&c.length>0;){const v=c.pop(),{score:g,boxIndex:b,suppressBeginIndex:x}=v;if(g<o)break;let y=!1;for(let w=d.length-1;w>=x;--w){const C=E7(t,b,d[w]);if(C>=s){y=!0;break}if(v.score=v.score*k7(s,u,C),v.score<=o)break}v.suppressBeginIndex=d.length,y||(v.score===g?(d.push(b),h.push(v.score)):v.score>o&&C7(c,v,mS))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function E7(t,e,n){const s=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),f=(a-r)*(l-i),p=(d-c)*(h-u);if(f<=0||p<=0)return 0;const m=Math.max(r,c),v=Math.max(i,u),g=Math.min(a,d),b=Math.min(l,h),x=Math.max(g-m,0)*Math.max(b-v,0);return x/(f+p-x)}function k7(t,e,n){const s=Math.exp(e*n*n);return n<=t?s:0}function mS(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=F(t,"boxes","nonMaxSuppressionAsync"),i=F(e,"scores","nonMaxSuppressionAsync"),a=nc(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([r.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:d}=Dx(c,u,n,s,o);return r!==t&&r.dispose(),i!==e&&i.dispose(),as(d,"int32")}const T7=$7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=nc(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const c={boxes:i,scores:a},u={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=H.runKernel(V0,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const A7=Q({nonMaxSuppressionWithScore_:N7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function R7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=nc(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const c=await Promise.all([i.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=Lx(u,d,n,s,o,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:as(h,"int32"),selectedScores:as(f)}}const D7=R7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=nc(i,a,n,s,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:i,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:r},p=H.runKernel(B0,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const L7=Q({nonMaxSuppressionPadded_:O7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function F7(t,e,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=nc(i,a,n,s,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=Ox(h,f,c,u,d,r);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:as(p,"int32"),validOutputs:lt(m,"int32")}}const P7=F7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7(t,e,n=!1,s=!1){const o=F(t,"images","resizeBilinear");$(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),$(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),$(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=X(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:e},c=H.runKernel(vm,a,l);return i?X(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const _A=Q({resizeBilinear_:M7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B7(t,e,n=!1,s=!1){const o=F(t,"images","resizeNearestNeighbor");$(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),$(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),$(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),$(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=X(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:e},c=H.runKernel(gm,a,l);return i?X(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const SA=Q({resizeNearestNeighbor_:B7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(t,e="binary",n=!1,s=.5){const o=F(t,"image","threshold"),r=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let c=W(as([s]),255),u,d,h,f;if($(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),$(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),$(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),$(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[u,d,h]=bs(o,[1,1,1],-1);const v=W(u,r),g=W(d,i),b=W(h,a);f=we(we(v,g),b)}else f=t;if(e==="otsu"){const v=B5(Te(dA(f),"int32"),Wc([]),256);c=U7(v,l)}const p=n?tc(f,c):Ss(f,c);return Te(W(p,255),"int32")}function U7(t,e){let n=as([-1]),s=as([0]),o=as([0]),r,i,a,l,c,u;for(let d=0;d<t.size-1;d++){r=xt(t,0,d+1),i=xt(t,d+1),c=Fe(Le(r),e),u=Fe(Le(i),e);const h=Le(W(r,du(0,r.size)));a=Fe(h,Le(r));const f=Dm(i.shape,r.size),p=we(du(0,i.size),f),m=W(i,p);l=Fe(Le(m),Le(i));const v=Ve(a,l),g=Ve(a,l),b=W(c,u);o=W(W(b,v),g);const x=Ss(o,s);s=Ln(x,o,s),n=Ln(x,as([d]),n)}return n}const j7=Q({threshold_:V7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7(t,e,n="nearest",s="constant",o=0,r){const i=F(t,"image","transform","float32"),a=F(e,"transforms","transform","float32");$(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),$(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),$(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:i,transforms:a},c={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return H.runKernel(X0,l,c)}const W7=Q({transform_:z7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7(t,e,n){const s=F(t,"a","bandPart");$(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,i]=s.shape.slice(-2);let a,l;typeof e=="number"?($(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),$(e<=r,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${r}).`),a=F(e<0?r:e,"numLower","bandPart")):($(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Ln($f(e,0),r,uu(e,r))),typeof n=="number"?($(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),$(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=F(n<0?i:n,"numUpper","bandPart")):($(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ln($f(n,0),i,uu(n,i)));const c=X(du(0,r,1,"int32"),[-1,1]),u=du(0,i,1,"int32"),d=Ve(c,u),h=hr(tc(d,a),Ia(d,Bt(l))),f=cn([r,i],s.dtype);return X(fr(ha(X(s,[-1,r,i])).map(p=>Ln(h,p,f))),o)}const H7=Q({bandPart_:G7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7(t){let e;if(Array.isArray(t)){e=!1,$(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let r=1;r<t.length;++r)$(t[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[r].shape[0]} vs. ${o})`)}else e=!0,t=bs(t,t.shape[0],0).map(o=>Rd(o,[0]));$(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],s=t;for(let o=0;o<t.length;++o)n.push(H.tidy(()=>{let r=s[o];if(o>0)for(let i=0;i<o;++i){const a=W(Le(W(n[i],r)),n[i]);r=Ve(r,a)}return Fe(r,Lm(r,"euclidean"))}));return e?fr(n,0):n}const q7=Q({gramSchmidt_:K7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(t,e=!1){if($(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return gS(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),s=ha(X(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],r=[];s.forEach(l=>{const[c,u]=gS(l,e);o.push(c),r.push(u)});const i=X(fr(o,0),t.shape),a=X(fr(r,0),t.shape);return[i,a]}}function gS(t,e=!1){return H.tidy(()=>{$(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],s=t.shape[1];let o=nA(n),r=Xi(t);const i=Uh([[1]],[1,1]);let a=Xi(i);const l=n>=s?s:n;for(let c=0;c<l;++c){const u=r,d=a,h=o;[a,r,o]=H.tidy(()=>{const f=xt(r,[c,c],[n-c,1]),p=Lm(f),m=xt(r,[c,c],[1,1]),v=Ln(Ss(m,0),Uh([[-1]]),Uh([[1]])),g=Ve(m,W(v,p)),b=Fe(f,g);b.shape[0]===1?a=Xi(i):a=Xn([i,xt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const x=Bt(Fe(it(v,g),p)),y=xt(r,[c,0],[n-c,s]),w=W(x,a),C=tt(a);if(c===0)r=Ve(y,it(w,it(C,y)));else{const I=Ve(y,it(w,it(C,y)));r=Xn([xt(r,[0,0],[c,s]),I],0)}const _=tt(w),S=xt(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=Ve(S,it(it(S,a),_));else{const I=Ve(S,it(it(S,a),_));o=Xn([xt(o,[0,0],[n,c]),I],1)}return[a,r,o]}),Ke([u,d,h])}return!e&&n>s&&(o=xt(o,[0,0],[n,s]),r=xt(r,[0,0],[s,s])),[o,r]})}const Q7=Q({qr_:X7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ir={flipLeftRight:f7,grayscaleToRGB:m7,resizeNearestNeighbor:SA,resizeBilinear:_A,rgbToGrayscale:v7,rotateWithOffset:y7,cropAndResize:d7,nonMaxSuppression:w7,nonMaxSuppressionAsync:T7,nonMaxSuppressionWithScore:A7,nonMaxSuppressionWithScoreAsync:D7,nonMaxSuppressionPadded:L7,nonMaxSuppressionPaddedAsync:P7,threshold:j7,transform:W7},Y7={bandPart:H7,gramSchmidt:q7,qr:Q7};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7=new Map,Z7=new Map;class sc{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Rs{constructor(){this.classNameMap={}}static getMap(){return Rs.instance==null&&(Rs.instance=new Rs),Rs.instance}static register(e){Rs.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function me(t,e,n){$(t.className!=null,()=>"Class being registered does not have the static className property defined."),$(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),$(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const s=n,o=e+">"+s;return Rs.register(t),J7.set(o,t),Z7.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bi extends sc{minimize(e,n=!1,s){const{value:o,grads:r}=this.computeGradients(e,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return Ke(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return iQ(e,n)}dispose(){this.iterations_!=null&&Ke(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:lt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(bi,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IA extends bi{static get className(){return"Adadelta"}constructor(e,n,s=null){super(),this.learningRate=e,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:J(()=>nt(r).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:J(()=>nt(r).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[s];if(a==null)return;const l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;J(()=>{const u=we(W(l,this.rho),W(It(a),1-this.rho)),d=W(Fe(In(we(c,this.epsilon)),In(we(l,this.epsilon))),a),h=we(W(c,this.rho),W(It(d),1-this.rho));l.assign(u),c.assign(h);const f=we(W(d,-this.learningRate),r);r.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ke(this.accumulatedGrads.map(e=>e.variable)),Ke(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,s=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EA extends bi{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:J(()=>Dm(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[s];if(i==null)return;const a=this.accumulatedGrads[o].variable;J(()=>{const l=we(a,It(i));a.assign(l);const c=we(W(Fe(i,In(we(l,H.backend.epsilon()))),-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ke(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kA extends bi{static get className(){return"Adam"}constructor(e,n,s,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],J(()=>{this.accBeta1=lt(n).variable(),this.accBeta2=lt(s).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);J(()=>{const s=Ve(1,this.accBeta1),o=Ve(1,this.accBeta2);n.forEach((r,i)=>{const a=H.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:J(()=>nt(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${r}/v`,variable:J(()=>nt(a).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=we(W(u,this.beta1),W(c,1-this.beta1)),f=we(W(d,this.beta2),W(It(c),1-this.beta2)),p=Fe(h,s),m=Fe(f,o);u.assign(h),d.assign(f);const v=we(W(Fe(p,we(In(m),this.epsilon)),-this.learningRate),a);a.assign(v)}),this.accBeta1.assign(W(this.accBeta1,this.beta1)),this.accBeta2.assign(W(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ke(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),J(()=>{this.accBeta1.assign(ua(this.beta1,this.iterations_+1)),this.accBeta2.assign(ua(this.beta2,this.iterations_+1))});const n=e.length/2,s=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $A extends bi{static get className(){return"Adamax"}constructor(e,n,s,o=null,r=0){super(),this.learningRate=e,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],J(()=>{this.iteration=lt(0).variable(),this.accBeta1=lt(n).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);J(()=>{const s=Ve(1,this.accBeta1),o=Fe(-this.learningRate,we(W(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=H.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:nt(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${r}/v`,variable:nt(a).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[r];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=we(W(u,this.beta1),W(c,1-this.beta1)),f=W(d,this.beta2),p=Tn(c),m=gi(f,p);u.assign(h),d.assign(m);const v=we(W(Fe(o,s),Fe(h,we(m,this.epsilon))),a);a.assign(v)}),this.iteration.assign(we(this.iteration,1)),this.accBeta1.assign(W(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ke(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Px extends bi{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=Array.isArray(e)?e[o].tensor:e[s];if(r==null)return;const i=H.registeredVariables[s];J(()=>{const a=we(W(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Oo(lt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TA extends Px{static get className(){return"Momentum"}constructor(e,n,s=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=lt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:J(()=>nt(r).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[s];a!=null&&J(()=>{let l;const c=we(W(this.m,i),a);this.useNesterov?l=we(W(this.c,we(a,W(c,this.m))),r):l=we(W(this.c,c),r),i.assign(c),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ke(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NA extends bi{static get className(){return"RMSProp"}constructor(e,n=.9,s=0,o=null,r=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=H.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(s=>s.name):Object.keys(e)).forEach((s,o)=>{const r=H.registeredVariables[s],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:J(()=>nt(r).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:J(()=>nt(r).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:J(()=>nt(r).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[s];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;J(()=>{const u=we(W(l,this.decay),W(It(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,h=we(W(d,this.decay),W(a,1-this.decay)),f=Fe(W(a,this.learningRate),In(Ve(u,we(It(h),this.epsilon)))),p=we(W(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(p);const m=Ve(r,p);r.assign(m)}else{const d=we(W(l,this.decay),W(It(a),1-this.decay)),h=we(W(c,this.momentum),Fe(W(a,this.learningRate),In(we(d,this.epsilon))));l.assign(d),c.assign(h);const f=Ve(r,h);r.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ke(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ke(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ke(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,s=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9=[IA,EA,kA,$A,TA,NA,Px];function t9(){for(const t of e9)me(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vS(t,e,n,s){i(t),n=n??0,s=s??1,a(n,s);let o=0;const r=l=>(l.then(c=>{const u=n+ ++o/t.length*(s-n);return e(u),c}),l);function i(l){$(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){$(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),$(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),$(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function n9(t,e){e==null&&(e={});const n=e.fetchFunc==null?te().platform.fetch:e.fetchFunc,s=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(s):await vS(s,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await vS(a,e.onProgress,.5,1)}function s9(t,e){var n;const s=e.fetchFunc==null?te().platform.fetch:e.fetchFunc;let o=0,r;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;o<t.length;){r||(r=(await s(t[o],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await r.read();if(l){o++,r=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}i.enqueue(c);return}i.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9="application/octet-stream",r9="application/json";class Mx{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?($(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=te().platform.fetch,$(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&$(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=y8(e,s);if(n.body.append("model.json",new Blob([JSON.stringify(o)],{type:r9}),"model.json"),e.weightData!=null){const i=fi.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:o9}),"model.weights.bin")}const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:tx(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return w8(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),s=dS(e.weightsManifest),o=()=>s9(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:s,getWeightStream:o})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=i9(n),r=this.weightPathPrefix||s,i=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):i.push(r+c+o);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),s=dS(e),o=await n9(n,this.loadOptions);return[s,o]}}Mx.URL_SCHEME_REGEX=/^https?:\/\//;function i9(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),s=t.substring(0,e),o=n>e?t.substring(n):"";return[s+"/",o]}function bS(t){return t.match(Mx.URL_SCHEME_REGEX)!=null}const AA=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(s=>bS(s)):n=bS(t),n)return RA(t,e)}return null};on.registerSaveRouter(AA);on.registerLoadRouter(AA);function RA(t,e){return new Mx(t,e)}function a9(t,e){return RA(t,e)}function Bx(t,e){const n=t.shape.length,s=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[s-1]} vs. ${n}`);if(le(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,r=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,l=o.slice();l.pop();let c=1;for(let d=r;d<n;++d)c*=a[d],l.push(a[d]);const u=[...Oe(t.shape).map(d=>d/c),1].slice(0,r);return[l,i,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ob=-2,l9=-1;function Vx(t,e,n){const s=t.shape.length;$(s===e.length,()=>`Error in slice${s}D: Length of begin ${e} must match the rank of the array (${s}).`),$(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)$(e[o]+n[o]<=t.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function c9(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Ux(t,e,n){const s=[];for(let o=0;o<t.length;o++)s[o]=Math.ceil((e[o]-t[o])/n[o]);return s}function DA(t,e,n,s){const o=[...t];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function OA(t,e,n){return n<=t?n:n-(e-1)}function LA(t,e){const n=[];for(let s=0;s<t;s++)n.push(e+s);return n}function u9(t,e,n,s,o,r,i,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&n>0){const f=e[0],p=n+1;u=FA(i,f,p,s,t),d=PA(a,f,p,o,t),h=DA(r,f,p,t)}else for(let f=0;f<c;f++)u[f]=BA(i,s,r,t,f,l),d[f]=VA(a,o,r,t,f,l),h[f]=MA(r,f,l);return{begin:u,end:d,strides:h}}function FA(t,e,n,s,o){const r=[...o],i=LA(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const l=OA(e,n,a);let c=s[l];t&1<<l&&(c=0),r[a]=c}return r}function PA(t,e,n,s,o){const r=[...o],i=LA(n,e);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=OA(e,n,a);let c=s[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),r[a]=c}for(let a=0;a<r.length;a++){const l=o[a];r[a]<0&&(r[a]+=l),r[a]=na(0,r[a],o[a])}return r}function MA(t,e,n){let s=t[e];return(n&1<<e||s==null)&&(s=1),s}function BA(t,e,n,s,o,r){let i=e[o];const a=n[o]||1;(t&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),i=na(0,i,l-1),i}function VA(t,e,n,s,o,r){let i=e[o];const a=n[o]||1;(t&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),a>0?i=na(0,i,l):i=na(-1,i,l-1),i}function jx(t,e,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function zx(t,e){let n=t.length>0?t[t.length-1]:1;for(let s=0;s<t.length-1;s++)n+=t[s]*e[s];return n}function Pm(t,e,n){let s;const o=t.shape.length;typeof e=="number"?s=[e,...new Array(o-1).fill(0)]:e.length<o?s=e.concat(new Array(o-e.length).fill(0)):s=e.slice(),s.forEach(i=>{$(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:($(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-s[a])),[s,r]}function Wx(t,e,n,s,o,r,i,a,l){let c;if(s==null?(c=new Array(e.length),c.fill(1)):c=s,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};d9(d,h);let f=!0,p=!0,m=!0;const v=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const y=!!(h.shrinkAxisMask&1<<x),w=t[x];if(w===-1){v.push(y?1:-1);continue}const C=[h.beginMask&1<<x,h.endMask&1<<x],_=[h.strides[x]>0?0:-1,h.strides[x]>0?w:w-1];if(y&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[x]===1;const S=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(y){const A=h.begin[x]<0?w+h.begin[x]:h.begin[x];if(h.begin[x]=A,h.end[x]=h.begin[x]+1,A<0||A>=w)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=yS(h.begin[x],0,h.strides[x],w,C,_),h.end[x]=yS(h.end[x],1,h.strides[x],w,C,_);const O=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===w;f=f&&O,p=p&&(x===0&&h.strides[x]===1||O)}else f=f&&h.strides[x]===1&&S,p=p&&(x===0&&h.strides[x]===1||S);let I,E=!1;if(h.beginValid&&h.endValid?(I=h.end[x]-h.begin[x],E=!0):y?(I=1,E=!0):S&&w>=0&&(h.strides[x]<0?I=-w:I=w,E=!0),E){let O;I===0||I<0!=h.strides[x]<0?O=0:O=Math.trunc(I/h.strides[x])+(I%h.strides[x]!==0?1:0),v.push(O)}else v.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const y=h.finalShapeGatherIndices[x];y>=0?g.push(v[y]):y===Ob&&g.push(1)}return{finalShapeSparse:g.filter((x,y)=>h.finalShapeGatherIndices[y]!==Ob),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function d9(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let s=0;s<t.dims;s++)if(1<<s&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-s)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&t.newAxisMask)e.finalShapeGatherIndices.push(Ob),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[s]),t.end!=null&&(e.end[n]=t.end[s]),e.strides[n]=t.strides[s],t.beginMask&1<<s&&(e.beginMask|=1<<n),t.endMask&1<<s&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<s?(e.finalShapeGatherIndices.push(l9),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(s)),e.inputShapeGatherIndicesSparse[n]=s,n++}}function yS(t,e,n,s,o,r){if(o[e])return n>0?r[e]:r[e+1&1];{const i=t<0?s+t:t;return i<r[0]?r[0]:i>r[1]?r[1]:i}}const h9=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Vx,computeFlatOffset:zx,computeOutShape:Ux,getNormalizedAxes:u9,isSliceContinous:jx,maskToAxes:c9,parseSliceParams:Pm,sliceInfo:Wx,startForAxis:BA,startIndicesWithElidedDims:FA,stopForAxis:VA,stopIndicesWithElidedDims:PA,stridesForAxis:MA,stridesWithElidedDims:DA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f9{static sgd(e){return new Px(e)}static momentum(e,n,s=!1){return new TA(e,n,s)}static rmsprop(e,n=.9,s=0,o=null,r=!1){return new NA(e,n,s,o,r)}static adam(e=.001,n=.9,s=.999,o=null){return new kA(e,n,s,o)}static adadelta(e=.001,n=.95,s=null){return new IA(e,n,s)}static adamax(e=.002,n=.9,s=.999,o=null,r=0){return new $A(e,n,s,o,r)}static adagrad(e,n=.1){return new EA(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Va=f9;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function UA(){return new Promise(t=>p9(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gx(t,e){const n=t[0].length;t.forEach((o,r)=>{$(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),$(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=t[0];t.forEach((o,r)=>{for(let i=0;i<n;i++)$(i===e||o[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function Lo(t,e){const n=t[0].slice();for(let s=1;s<t.length;s++)n[e]+=t[s][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zs;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Zs||(Zs={}));function jA(t,e,n){let s=new Array;if(n==null&&e==null)return s;if(e==null)for(;s.length<t+n.length;)s.push(-1);else s=e.slice();if(n==null)return s;if(t+n.length!==s.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${s.length}`);for(let o=1;o<n.length;++o){const r=n[o],i=s[s.length-n.length+o],a=s[i];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${r} but shape[${o+t}] = ${a}`)}else s[i]=r}return s}function zA(t){const e={FIRST_DIM_SIZE:Zs.FIRST_DIM_SIZE,VALUE_ROWIDS:Zs.VALUE_ROWIDS,ROW_LENGTHS:Zs.ROW_LENGTHS,ROW_SPLITS:Zs.ROW_SPLITS,ROW_LIMITS:Zs.ROW_LIMITS,ROW_STARTS:Zs.ROW_STARTS},n=[];for(const s of t)if(s in e)n.push(e[s]);else break;return n}function WA(t){return t.length===0?0:t[0]===Zs.FIRST_DIM_SIZE?t.length-1:t.length}function GA(t,e){if(t==null||e==null)return;const n=t.length,s=e.length;if(n>=s)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${s})`);for(let o=0;o<Math.min(n,s-1);++o){const r=t[o],i=e[o+1];if(r>=0&&i>=0&&r!==1&&r!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${r} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hx=30;function Mm(t){return t<=Hx?t:vb(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kx(t,e,n){const s=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Od(t,e,n,s=!0){let o=[];if(s)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const r=e.length;for(let i=0;i<r;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(r+1))}return o}function Ld(t,e,n=!0){const s=[];if(n){s.push(e);for(let o=e+1;o<t;++o)o<=2*e?(s.push(o),s.push(o-(e+1))):s.push(o)}else{const o=[],r=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?r.push(i):o.push(i);s.push(...o),s.push(0),s.push(...r)}return s}function Fd(t,e,n,s=!0){const o=[];s?o.push(t[0]/n):o.push(t[0]*n);for(let r=1;r<t.length;++r)r<=e.length?s?o.push(e[r-1]*t[r]):o.push(t[r]/e[r-1]):o.push(t[r]);return o}function qx(t,e){const n=[0];for(let s=0;s<e;++s)n.push(t[s][0]);return n}function Xx(t,e,n){const s=t.slice(0,1);for(let o=0;o<n;++o)s.push(t[o+1]-e[o][0]-e[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bm=1.7580993408473768,Vm=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qx=.3275911,Yx=.254829592,Jx=-.284496736,Zx=1.421413741,e1=-1.453152027,t1=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let s=0;s<n.length;s+=2)n[s]=t[s/2],n[s+1]=e[s/2];return n}function HA(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=t[s],n[s/2]=t[s+1];return{real:e,imag:n}}function KA(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],s[Math.floor(o/4)]=t[o+1];return{real:n,imag:s}}function qA(t){const e=Math.floor(t.length/4),n=new Float32Array(e),s=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],s[Math.floor(o/4)]=t[o+1];return{real:n,imag:s}}function n1(t,e){const n=t[e*2],s=t[e*2+1];return{real:n,imag:s}}function XA(t,e,n,s){t[s*2]=e,t[s*2+1]=n}function QA(t,e){const n=new Float32Array(t/2),s=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const r=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function YA(t,e,n){const s=(n?2:-2)*Math.PI*(t/e),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yg="->",m9=/->/g,xS=",",wS="...";function s1(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(m9,"").length)/Yg.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Yg}").`);const[s,o]=t.split(Yg);$(s.indexOf(wS)===-1,()=>`The ellipsis notation ("${wS}") is not supported yet.`);const r=s.split(xS),i=r.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<o.length;++h){const f=o[h];if(!r.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<s.length;++h){const f=s[h];a.indexOf(f)===-1&&f!==xS&&a.push(f)}const l=new Array(r.length);for(let h=0;h<i;++h){if(new Set(r[h].split("")).size!==r[h].length)throw new Error(`Found duplicate axes in input component ${r[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<r[h].length;++f)l[h].push(a.indexOf(r[h][f]))}const c=a.length,u=o.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function o1(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const s=[];for(let o=0;o<t;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function r1(t,e,n){const s=new Array(t);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let i=0;i<e[o].length;++i)s[e[o][i]]===void 0?s[e[o][i]]=r[i]:$(s[e[o][i]]===r[i],()=>`Expected dimension ${s[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(r)}, but got dimension ${r[i]}`)}}function i1(t,e){const n=t,s=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)s.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],l=g9(e,a);for(const c of l)r.indexOf(c)===-1&&(s[i].push(c),r.push(c))}return{path:n,steps:s}}function a1(t){return t.every((e,n)=>e===n)}function g9(t,e){const n=[];for(let s=0;s<t.length;++s)(t[s].length===0||t[s].indexOf(e)!==-1||e===-1)&&n.push(s);return n}function l1(t,e,n=0){let s=[];if(typeof e=="number")$(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);$(o<=1,()=>"There should be only one negative value in split array.");const r=e.indexOf(-1);if(r!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[r]=t.shape[n]-i}$(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=e}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JA(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function ZA(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function eR(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tR(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function nR(t,e){return`size ${t} must be non-negative, not ${e}`}function sR(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function oR(t,e){const n=le(t),s=le(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${t} outputShape= ${e}`}function rR(t,e){const n=le(t),s=le(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lb(){return"segment ids must be >= 0"}function iR(){return"segment ids are not increasing"}function aR(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function lR(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cR(t,e){let n=!1,s;for(t<=Hx?(s=t,n=!0):s=vb(t,Math.floor(Math.sqrt(t)));!n;)s>e||s===t?n=!0:s=vb(t,s+1);return s}function uR(t,e,n){const s=[],o=t.length;for(let r=0;r<o;r++)r!==e?s.push(t[r]):s.push(n);return s}function c1(t,e,n,s){const o=e.shape.length,r=t.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<s;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=s;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=s;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<r;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:a}}const v9=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:c1,computeOutShape:uR,segOpComputeOptimalWindowSize:cR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t){try{return t.map(e=>Yr(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function dR(t){return t.map(e=>zr(e))}const b9=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Yx,ERF_A2:Jx,ERF_A3:Zx,ERF_A4:e1,ERF_A5:t1,ERF_P:Qx,PARALLELIZE_THRESHOLD:Hx,get RowPartitionType(){return Zs},SELU_SCALE:Vm,SELU_SCALEALPHA:Bm,applyActivation:Ax,assertAndGetBroadcastShape:We,assertAxesAreInnerMostDims:xn,assertParamsConsistent:Gx,assignToTypedArray:XA,axesAreInnerMostDims:lx,calculateShapes:$a,checkEinsumDimSizes:r1,checkPadOnDimRoundingMode:Zn,combineLocations:eA,combineRaggedTensorToTensorShapes:jA,complexWithEvenIndex:KA,complexWithOddIndex:qA,computeConv2DInfo:yn,computeConv3DInfo:pi,computeDefaultPad:nx,computeDilation2DInfo:Td,computeOptimalWindowSize:Mm,computeOutAndReduceShapes:pn,computeOutShape:Lo,computePool2DInfo:Hs,computePool3DInfo:xr,convertConv2DDataFormat:wr,decodeEinsumEquation:s1,eitherStridesOrDilationsAreOne:En,expandShapeToKeepDim:Kt,exponent:YA,exponents:QA,fromStringArrayToUint8:dR,fromUint8ToStringArray:mr,getAxesPermutation:Dt,getBroadcastDims:Ll,getComplexWithIndex:n1,getEinsumComputePath:i1,getEinsumPermutation:o1,getFusedBiasGradient:Nx,getFusedDyActivation:Tx,getImageCenter:Kx,getInnerMostAxes:Ut,getPermuted:Ld,getRaggedRank:WA,getReductionAxes:nn,getReshaped:Od,getReshapedPermuted:Fd,getRowPartitionTypesHelper:zA,getSliceBeginCoords:qx,getSliceSize:Xx,getSparseFillEmptyRowsIndicesDenseShapeMismatch:JA,getSparseFillEmptyRowsNegativeIndexErrorMessage:ZA,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:eR,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:sR,getSparseReshapeInputOutputMismatchErrorMessage:rR,getSparseReshapeInputOutputMultipleErrorMessage:oR,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:tR,getSparseReshapeNegativeOutputDimErrorMessage:nR,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:lR,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Lb,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:iR,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:aR,getUndoAxesPermutation:mi,isIdentityPermutation:a1,log:Mq,mergeRealAndImagArrays:pr,prepareAndValidate:Bx,prepareSplitSize:l1,segment_util:v9,shouldFuse:Rx,slice_util:h9,splitRealAndImagArrays:HA,stridesOrDilationsArePositive:la,tupleValuesAreOne:aa,upcastType:us,validateDefaultValueShape:GA,validateInput:zY,validateUpdateShape:yA,warn:gs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */t9();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hR={kernelName:$p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Dd(Te(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9={kernelName:Ou,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=It(Te(n,"float32")),o=In(Ve(lt(1),s));return Bt(Fe(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9={kernelName:Lu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=In(Ve(It(Te(n,"float32")),1));return Fe(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w9={kernelName:Zl,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{let a=t;const l=nn(n.shape,o);return l.length>0&&(a=Le(a,l)),X(a,n.shape)},b:()=>{let a=t;const l=nn(s.shape,o);return l.length>0&&(a=Le(a,l)),X(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C9={kernelName:d0,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((s,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _9={kernelName:Tp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S9={kernelName:Np,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I9={kernelName:Fu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,In(Ve(lt(1),It(Te(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E9={kernelName:Pu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=In(we(lt(1),It(Te(n,"float32"))));return Fe(t,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k9={kernelName:Vu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{const a=we(It(n),It(s));let l=W(t,Fe(s,a));const c=nn(n.shape,o);return c.length>0&&(l=Le(l,c)),X(l,n.shape)},b:()=>{const a=we(It(n),It(s));let l=Bt(W(t,Fe(n,a)));const c=nn(s.shape,o);return c.length>0&&(l=Le(l,c)),X(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $9={kernelName:Mu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,we(It(Te(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T9={kernelName:Bu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,Ve(lt(1),It(Te(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(t,e,n,s,o,r){const i=F(t,"dy","avgPool3dGrad"),a=F(e,"input","avgPool3dGrad");let l=i,c=a,u=!1;a.rank===4&&(u=!0,l=X(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=X(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),$(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),$(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Zn("avgPool3dGrad",o,r);const d={dy:l,input:c},h={filterSize:n,strides:s,pad:o,dimRoundingMode:r},f=H.runKernel(m0,d,h);return u?X(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const A9=Q({avgPool3dGrad_:N9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R9={kernelName:Rp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:o,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>A9(t,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(t,e,n,s,o){const r=F(t,"dy","avgPoolGrad"),i=F(e,"input","avgPoolGrad");$(i.rank===r.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${r.rank})`);let a=i,l=r,c=!1;i.rank===3&&(c=!0,a=X(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=X(r,[1,r.shape[0],r.shape[1],r.shape[2]])),$(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),$(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:s,pad:o},h=H.runKernel(p0,u,d);return c?X(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const O9=Q({avgPoolGrad_:D9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L9={kernelName:Ap,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{filterSize:o,strides:r,pad:i}=n;return{x:()=>O9(t,s,o,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F9={kernelName:Dp,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[s,o]=e,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>it(t,o,!1,!0),b:()=>it(s,t,!0,!1)}:!r&&i?{a:()=>it(t,o,!1,!1),b:()=>it(t,s,!0,!1)}:r&&!i?{a:()=>it(o,t,!1,!0),b:()=>it(s,t,!1,!1)}:{a:()=>it(o,t,!0,!0),b:()=>it(t,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P9={kernelName:Op,gradFunc:(t,e,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>gx(t,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M9={kernelName:Oq,gradFunc:(t,e,n)=>{const s=n,o=s.inputShape,r=s.shape,i=Array.from(r);for(let l=o.length-1;l>=0;l--)if(o[l]===r[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Le(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B9={kernelName:Uu,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V9={kernelName:ju,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9={kernelName:zu,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>Ln(hr(Ia(s,o),tc(s,r)),t,nt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9={kernelName:Lp,inputsToSave:["x"],gradFunc:hR.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9={kernelName:Fp,saveAllInputs:!0,gradFunc:(t,e,n)=>{const s=e.map(l=>l.shape),{axis:o}=n,r=Xe(o,e[0].shape)[0],i=s.map(l=>l[r]);return bs(t,i,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9={kernelName:Pp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,{dilations:r,strides:i,pad:a,dataFormat:l}=n;return $(aa(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>rx(s.shape,t,o,i,a,l),filter:()=>$x(s,t,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G9={kernelName:Mp,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,{strides:r,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>ca(t,o,r,i,a,1,l),filter:()=>$x(t,s,o.shape,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9(t,e,n,s,o){let r=t;t.rank===4&&(r=X(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=X(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),$(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),$(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),$(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),$(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),$(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:i},l={strides:s,pad:o,filterShape:n};return H.runKernel(x0,a,l)}const K9=Q({conv3DBackpropFilter_:H9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q9={kernelName:Bp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:o,pad:r}=n;$(aa(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=e;return{x:()=>QN(i.shape,t,a,o,r),filter:()=>K9(i,t,a.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9={kernelName:Wu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(Bt(mA(Te(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q9={kernelName:Gu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(gA(Te(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y9={kernelName:Vp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o,exclusive:r,reverse:i}=n;return{x:()=>{const a=Dt([o],s.rank);let l=JN(t,o,r,!i);return a!=null&&(l=tt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J9={kernelName:Up,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:i}=n,a=s??[1,1];$(aa(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return $(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),$(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),$(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),$(En(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Zn("depthwiseConv2d",r,i),{x:()=>l7(l.shape,t,c,o,r,a,i),filter:()=>i7(l,t,c.shape,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z9={kernelName:jp,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[s,o]=e,r={x:s,filter:o,dy:t},i={x:s,filter:o,dy:t};return{x:()=>H.runKernel(bb,r,n),filter:()=>H.runKernel(yb,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ={kernelName:Ku,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,s={dy:t,y:n};return{x:()=>H.runKernel(T0,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJ={kernelName:qu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=W(Uo(Bt(It(n))),2/Math.sqrt(Math.PI));return{x:()=>W(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJ={kernelName:Xu,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sJ={kernelName:Wp,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>X(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ={kernelName:Qu,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Uo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJ={kernelName:Yu,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ={kernelName:Ju,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{const a=Fe(t,Te(s,"float32")),l=nn(n.shape,o);return l.length>0?X(Le(a,l),n.shape):a},b:()=>{let a=W(t,Te(n,"float32"));const l=nn(s.shape,o);l.length>0&&(a=X(Le(a,l),s.shape));const c=It(s);return Bt(Fe(a,Te(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJ={kernelName:Gp,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:s}=n,[o,r,i,a]=e,l=a??lt(1),c=nn(r.shape,o.shape),u=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)u.push(o.shape[y]);u.push(1)}const d=Ve(o,r),h=W(t,l),f=hA(we(i,lt(s))),p=W(W(W(f,f),f),lt(-.5));return{x:()=>r.rank===1?X(W(W(t,to(X(f,[1,1,1,r.shape[0]]),u)),l),o.shape):X(W(W(t,f),l),o.shape),mean:()=>{let y=W(W(f,lt(-1)),h);return r.rank===1&&(y=Le(y,c)),X(y,r.shape)},variance:()=>{let y=W(W(p,d),h);return r.rank===1&&(y=Le(y,c)),X(y,r.shape)},scale:()=>{const y=W(d,f);let w=W(t,y);return r.rank===1&&(w=Le(w,c)),X(w,r.shape)},offset:()=>{let y=t;return r.rank===1&&(y=Le(y,c)),X(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lJ={kernelName:Hp,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[s,o]=e,{axis:r,batchDims:i}=n,a=Xe(r,s.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,f=u.size,p=h.slice(0,a),m=p.length,v=h.slice(r,h.length).slice(1),g=v.length,b=CS(0,m),x=CS(m+1,m+1+g),y=_S([p,[f],v]),w=X(d,y),C=X(u,[f]),_=_S([[m],b,x]),S=tt(w,_);let I=wA(S,C,c.shape[a]);const E=mi(_);return I=tt(I,E),I};if(i===1){const c=s.shape[0],u=s.split(c,0);return{x:()=>fr(u.map((f,p)=>l(f,o.slice(p,1),t.slice(p,1))())).reshape(s.shape),indices:()=>o}}else return{x:l(s,o,t),indices:()=>o}}};function CS(t,e){const n=[];for(let s=t;s<e;++s)n.push(s);return n}function _S(t){const e=[];for(let n=0;n<t.length;++n)for(let s=0;s<t[n].length;++s)e.push(t[n][s]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ={kernelName:Zu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>nt(n),b:()=>nt(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uJ={kernelName:ed,gradFunc:t=>({x:()=>Te(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJ={kernelName:td,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJ={kernelName:nd,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJ={kernelName:sd,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pJ={kernelName:qp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{alpha:o}=n,r=Ss(s,0);return{x:()=>Ln(r,t,W(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJ={kernelName:rd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,we(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gJ={kernelName:od,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,Te(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vJ={kernelName:Fq,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n;return{logits:()=>{const i=Uo(s);return Ve(t,W(Le(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bJ(t,e,n,s=5,o=1,r=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:s,bias:o,alpha:r,beta:i};return H.runKernel(L0,a,l)}const yJ=Q({localResponseNormalizationBackprop_:bJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ={kernelName:em,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{depthRadius:r,bias:i,alpha:a,beta:l}=n;return{x:()=>yJ(s,o,t,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fR(t,e,n,s){return e.rank<n.rank&&(e=X(e,Kt(e.shape,s))),t.rank<n.rank&&(t=X(t,Kt(t.shape,s))),{x:()=>W(t,Te(Vo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SS={kernelName:tm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{reductionIndices:o}=s,r=e[0],i=e[1],a=Xe(o,r.shape),l=fR(t,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJ={kernelName:id,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>W(t,Te(Ia(n,s),"float32")),b:()=>W(t,Te($f(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CJ(t,e,n,s,o,r,i){const a=F(t,"dy","maxPool3dGrad"),l=F(e,"input","maxPool3dGrad"),c=F(n,"output","maxPool3dGrad");let u=a,d=l,h=c,f=!1;l.rank===4&&(f=!0,u=X(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=X(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=X(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),$(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),$(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),$(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Zn("maxPool3dGrad",r,i);const p={dy:u,input:d,output:h},m={filterSize:s,strides:o,pad:r,dimRoundingMode:i},v=H.runKernel(P0,p,m);return f?X(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const _J=Q({maxPool3dGrad_:CJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SJ={kernelName:sm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>_J(t,s,o,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(t,e,n,s,o,r,i){const a=F(t,"dy","maxPoolGrad"),l=F(e,"input","maxPoolGrad"),c=F(n,"output","maxPoolGrad");$(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),$(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),$(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Zn("maxPoolGrad",r,i);const u={dy:a,input:l,output:c},d={filterSize:s,strides:o,pad:r,dimRoundingMode:i};return H.runKernel(F0,u,d)}const EJ=Q({maxPoolGrad_:IJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kJ={kernelName:nm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s,o]=e,{filterSize:r,strides:i,pad:a}=n;return{x:()=>EJ(t,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $J={kernelName:om,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n,r=Xe(o,s.shape),a=pn(s.shape,r)[1],l=le(a);return{x:()=>{const u=s.shape.slice();r.forEach(f=>{u[f]=1});const d=X(t,u);return Fe(W(d,vi(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJ={kernelName:rm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const s=n,{axis:o}=s,[r,i]=e,a=Xe(o,r.shape),l=fR(t,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NJ={kernelName:ad,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e;return{a:()=>W(t,Te(tc(n,s),"float32")),b:()=>W(t,Te(Ss(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AJ={kernelName:im,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>xt(t,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJ={kernelName:ld,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{const a=nn(n.shape,o);return a.length>0?X(Le(t,a),n.shape):t},b:()=>{const a=W(t,Bt(Fm(Fe(n,s)))),l=nn(s.shape,o);return l.length>0?X(Le(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ={kernelName:cd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{const a=W(t,Te(s,"float32")),l=nn(n.shape,o);return l.length>0?X(Le(a,l),n.shape):a},b:()=>{const a=W(t,Te(n,"float32")),l=nn(s.shape,o);return l.length>0?X(Le(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OJ={kernelName:am,gradFunc:t=>({x:()=>Bt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ={kernelName:um,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>cn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ={kernelName:cm,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PJ={kernelName:dm,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:s}=n;return ha(t,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const s=e[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>xt(t,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJ={kernelName:ud,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,s,o]=e,r=n,i=s,a=We(r.shape,i.shape);return{a:()=>{const u=Te(i,"float32");let d=W(t,W(u,ua(r,Ve(u,lt(1)))));const h=nn(r.shape,a);return h.length>0&&(d=Le(d,h)),X(d,r.shape)},b:()=>{const u=Ss(r,0),d=Ln(u,jo(r),nt(r));let h=W(t,W(o,d));const f=nn(i.shape,a);return f.length>0&&(h=Le(h,f)),X(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BJ={kernelName:fm,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,s]=e,o=Ss(n,0);return{x:()=>Ln(o,t,W(t,s)),alpha:()=>{let r=Ln(o,nt(t),W(t,n));const i=nn(s.shape,t.shape);return i.length>0&&(r=Le(r,i)),X(r,s.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(t,e,n){const s=t.shape.slice();s[n]=1;const o=X(e,s),r=Rb(t,n,!0,!1),i=Rb(t,n,!0,!0),a=W(r,i);return W(o,a)}function UJ(t,e,n){const s=t.shape.length,o=s-n.length,r=Dt(n,s);let i=t;r!=null&&(i=tt(t,r));const a=i.shape.slice(),c=a.splice(s-n.length,n.length).reduce((h,f)=>h*f,1);a.push(c);const u=i.reshape(a);let d=VJ(u,e,o);if(d=d.reshape(i.shape),r!=null){const h=mi(r);d=tt(d,h)}return d}const jJ={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{axis:o}=n;let r=[];return o==null?r=s.shape.map((i,a)=>a):typeof o=="number"?r=[o]:r=o,{x:()=>UJ(s,t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJ={kernelName:Hu,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{const a=Fe(t,Te(s,"float32")),l=nn(n.shape,o);return l.length>0?X(Le(a,l),n.shape):a},b:()=>{let a=W(t,Te(n,"float32"));const l=nn(s.shape,o);l.length>0&&(a=X(Le(a,l),s.shape));const c=It(s);return Bt(Fe(a,Te(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJ={kernelName:dd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,Bt(It(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJ={kernelName:fd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,s=W(tc(n,6),Dd(n));return{x:()=>W(t,Te(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJ={kernelName:hd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,Te(Dd(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJ={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>X(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJ={kernelName:vm,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,o={dy:t,images:s};return{images:()=>H.runKernel(W0,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XJ={kernelName:gm,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[s]=e,o={dy:t,images:s};return{images:()=>H.runKernel(z0,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QJ={kernelName:bm,gradFunc:(t,e,n)=>{const{dims:s}=n,o=Xe(s,t.shape);return{x:()=>da(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YJ={kernelName:pd,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJ={kernelName:md,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Bt(Fe(t,W(ua(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZJ={kernelName:ym,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Te(nt(n),"float32"),t:()=>W(t,Te(n,t.dtype)),e:()=>W(t,Te(hx(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZ={kernelName:gd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const s=Ss(n,lt(0)),o=lt(Bm),r=lt(Vm),i=W(t,r),a=W(W(t,o),Uo(Te(n,"float32")));return Ln(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZ={kernelName:xd,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(n,Ve(lt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ={kernelName:yd,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZ={kernelName:vd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(ix(Te(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oZ={kernelName:bd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(YN(Te(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZ={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{begin:o,size:r}=n,i=s.shape,[a,l]=Pm(s,o,r),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],i[u]-a[u]-l[u]]);return{x:()=>mx(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iZ={kernelName:Sm,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[s]=e,{dim:o}=n,r=!0,i=W(t,s);return{logits:()=>Ve(i,W(Le(i,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aZ={kernelName:wd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,ec(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ES={kernelName:Cm,gradFunc:(t,e,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>ox(t,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kS={kernelName:_m,gradFunc:(t,e,n)=>{const{axis:s}=n;return{x:()=>Xn(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZ={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,W(In(Te(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cZ={kernelName:G0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,W(Te(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZ={kernelName:_d,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=lt(2);return{a:()=>W(t,W(o,Ve(n,s))),b:()=>W(t,W(o,Ve(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dZ={kernelName:$d,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ={kernelName:Sd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,s]=e,o=We(n.shape,s.shape);return{a:()=>{let a=t;const l=nn(n.shape,o);return l.length>0&&(a=Le(a,l)),X(a,n.shape)},b:()=>{let a=t;const l=nn(s.shape,o);return l.length>0&&(a=Le(a,l)),X(Bt(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fZ={kernelName:wm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,o=s.shape.slice(),{axis:r}=n;Xe(r,s.shape).forEach(c=>{o[c]=1});const a=X(t,o),l=W(a,vi(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZ={kernelName:Id,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Fe(t,It(ix(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZ={kernelName:Ed,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(Ve(lt(1),It(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ={kernelName:kd,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[s]=e,{reps:o}=n;return{x:()=>{let i=nt(s);if(s.rank===1)for(let a=0;a<o[0];++a)i=we(i,xt(t,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=we(i,xt(t,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)i=we(i,xt(t,[a*s.shape[0],l*s.shape[1],c*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)i=we(i,xt(t,[a*s.shape[0],l*s.shape[1],c*s.shape[2],u*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vZ={kernelName:fl,gradFunc:(t,e,n)=>{const s=n,{perm:o}=s,r=mi(o);return{x:()=>tt(t,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bZ={kernelName:Im,gradFunc:(t,e,n)=>{const s=n,{axis:o}=s;return{value:()=>fr(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yZ={kernelName:Em,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>xZ(t,n)}}};function xZ(t,e){const n=gi(e,nt(e)),s=cx(t,n);let o=Ia(e,lt(0,"int32"));const r=s.rank-o.rank;for(let a=0;a<r;++a)o=Gn(o,a+1);o=hr(o,vi(s.shape,"bool"));const i=nt(s);return Ln(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZ={kernelName:km,gradFunc:t=>({x:()=>nt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CZ=[hR,y9,x9,w9,C9,_9,S9,I9,E9,k9,$9,T9,R9,L9,F9,P9,M9,B9,V9,U9,j9,z9,G9,W9,q9,X9,Q9,Y9,J9,Z9,zJ,eJ,tJ,nJ,sJ,oJ,iJ,rJ,aJ,lJ,cJ,uJ,dJ,hJ,fJ,pJ,mJ,gJ,vJ,xJ,SS,SS,wJ,SJ,kJ,$J,TJ,NJ,AJ,RJ,DJ,OJ,LJ,FJ,PJ,IS,IS,MJ,BJ,jJ,WJ,GJ,HJ,KJ,qJ,XJ,QJ,YJ,JJ,ZJ,eZ,tZ,nZ,sZ,oZ,rZ,iZ,aZ,ES,ES,kS,kS,lZ,uZ,cZ,dZ,hZ,fZ,pZ,mZ,gZ,vZ,bZ,yZ,wZ];for(const t of CZ)Bq(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.abs=function(){return this.throwIfDisposed(),Tn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acos=function(){return this.throwIfDisposed(),J8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.acosh=function(){return this.throwIfDisposed(),e5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.add=function(t){return this.throwIfDisposed(),we(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.all=function(t,e){return this.throwIfDisposed(),KN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.any=function(t,e){return this.throwIfDisposed(),Nb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMax=function(t){return this.throwIfDisposed(),au(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.argMin=function(t){return this.throwIfDisposed(),r5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asScalar=function(){return this.throwIfDisposed(),$(this.size===1,()=>"The array must have only 1 element."),X(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asType=function(t){return this.throwIfDisposed(),Te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as1D=function(){return this.throwIfDisposed(),X(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as2D=function(t,e){return this.throwIfDisposed(),X(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),X(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as4D=function(t,e,n,s){return this.throwIfDisposed(),X(this,[t,e,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.as5D=function(t,e,n,s,o){return this.throwIfDisposed(),X(this,[t,e,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asin=function(){return this.throwIfDisposed(),a5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.asinh=function(){return this.throwIfDisposed(),c5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan=function(){return this.throwIfDisposed(),d5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atan2=function(t){return this.throwIfDisposed(),f5(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.atanh=function(){return this.throwIfDisposed(),m5(this)};ae().prototype.avgPool=function(t,e,n,s){return this.throwIfDisposed(),sx(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),ox(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.batchNorm=function(t,e,n,s,o){return this.throwIfDisposed(),Rm(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Gc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cast=function(t){return this.throwIfDisposed(),Te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ceil=function(){return this.throwIfDisposed(),j5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),_s(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Qt&&(t=[t]),Xn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv1d=function(t,e,n,s,o,r){return this.throwIfDisposed(),qN(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2dTranspose=function(t,e,n,s,o){return this.throwIfDisposed(),XN(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.conv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),ca(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cos=function(){return this.throwIfDisposed(),ix(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cosh=function(){return this.throwIfDisposed(),YN(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Rb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),JN(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),fX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.depthwiseConv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),ax(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dilation2d=function(t,e,n,s,o){return this.throwIfDisposed(),gX(this,t,e,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.divNoNan=function(t){return this.throwIfDisposed(),wX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.div=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.dot=function(t){return this.throwIfDisposed(),_X(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.elu=function(){return this.throwIfDisposed(),Om(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.equal=function(t){return this.throwIfDisposed(),Vo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.erf=function(){return this.throwIfDisposed(),ZN(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),LX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.exp=function(){return this.throwIfDisposed(),Uo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expandDims=function(t){return this.throwIfDisposed(),Gn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.expm1=function(){return this.throwIfDisposed(),BX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.fft=function(){return this.throwIfDisposed(),bA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.flatten=function(){return this.throwIfDisposed(),X(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floor=function(){return this.throwIfDisposed(),Fm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.floorDiv=function(t){return this.throwIfDisposed(),HN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.gather=function(t,e,n){return this.throwIfDisposed(),cx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ia(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.greater=function(t){return this.throwIfDisposed(),Ss(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.ifft=function(){return this.throwIfDisposed(),Db(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.irfft=function(){return this.throwIfDisposed(),NY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isFinite=function(){return this.throwIfDisposed(),qX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isInf=function(){return this.throwIfDisposed(),QX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.isNaN=function(){return this.throwIfDisposed(),JX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.leakyRelu=function(t){return this.throwIfDisposed(),dx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.lessEqual=function(t){return this.throwIfDisposed(),tc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.less=function(t){return this.throwIfDisposed(),$f(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.localResponseNormalization=function(t,e,n,s){return this.throwIfDisposed(),sQ(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSigmoid=function(){return this.throwIfDisposed(),uQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSoftmax=function(t){return this.throwIfDisposed(),oA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),rA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log=function(){return this.throwIfDisposed(),jo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.log1p=function(){return this.throwIfDisposed(),sA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalAnd=function(t){return this.throwIfDisposed(),hr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalNot=function(){return this.throwIfDisposed(),hx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalOr=function(t){return this.throwIfDisposed(),iA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.logicalXor=function(t){return this.throwIfDisposed(),bQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),it(this,t,e,n)};ae().prototype.maxPool=function(t,e,n,s){return this.throwIfDisposed(),fx(this,t,e,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.max=function(t,e){return this.throwIfDisposed(),ro(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.maximum=function(t){return this.throwIfDisposed(),gi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mean=function(t,e){return this.throwIfDisposed(),Wt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.min=function(t,e){return this.throwIfDisposed(),kf(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.minimum=function(t){return this.throwIfDisposed(),uu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),EQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mod=function(t){return this.throwIfDisposed(),$Q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.mul=function(t){return this.throwIfDisposed(),W(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.neg=function(){return this.throwIfDisposed(),Bt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Lm(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.notEqual=function(t){return this.throwIfDisposed(),Tf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),aA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.onesLike=function(){return this.throwIfDisposed(),Ws(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pad=function(t,e){return this.throwIfDisposed(),mx(this,t,e)};ae().prototype.pool=function(t,e,n,s,o,r){return this.throwIfDisposed(),MQ(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.pow=function(t){return this.throwIfDisposed(),ua(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prelu=function(t){return this.throwIfDisposed(),vx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.prod=function(t,e){return this.throwIfDisposed(),UQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reciprocal=function(){return this.throwIfDisposed(),uY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu=function(){return this.throwIfDisposed(),ka(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.relu6=function(){return this.throwIfDisposed(),uA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshapeAs=function(t){return this.throwIfDisposed(),X(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reshape=function(t){return this.throwIfDisposed(),X(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),_A(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),SA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.reverse=function(t){return this.throwIfDisposed(),da(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rfft=function(){return this.throwIfDisposed(),DY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.round=function(){return this.throwIfDisposed(),dA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.rsqrt=function(){return this.throwIfDisposed(),hA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.selu=function(){return this.throwIfDisposed(),fA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.separableConv2d=function(t,e,n,s,o,r){return this.throwIfDisposed(),pA(this,t,e,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sigmoid=function(){return this.throwIfDisposed(),ec(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sign=function(){return this.throwIfDisposed(),yY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sin=function(){return this.throwIfDisposed(),mA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sinh=function(){return this.throwIfDisposed(),gA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.slice=function(t,e){return this.throwIfDisposed(),xt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softmax=function(t){return this.throwIfDisposed(),kx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.softplus=function(){return this.throwIfDisposed(),Nd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),gx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.split=function(t,e){return this.throwIfDisposed(),bs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sqrt=function(){return this.throwIfDisposed(),In(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.square=function(){return this.throwIfDisposed(),It(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squaredDifference=function(t){return this.throwIfDisposed(),LY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.squeeze=function(t){return this.throwIfDisposed(),Rd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Qt?[this,t]:[this,...t];return fr(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.step=function(t){return this.throwIfDisposed(),Dd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.stridedSlice=function(t,e,n,s,o,r,i,a){return this.throwIfDisposed(),VY(this,t,e,n,s,o,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sub=function(t){return this.throwIfDisposed(),Ve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.sum=function(t,e){return this.throwIfDisposed(),Le(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tan=function(){return this.throwIfDisposed(),jY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tanh=function(){return this.throwIfDisposed(),Am(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.tile=function(t){return this.throwIfDisposed(),to(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toBool=function(){return this.throwIfDisposed(),Te(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toFloat=function(){return this.throwIfDisposed(),Te(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.toInt=function(){return this.throwIfDisposed(),Te(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.topk=function(t,e){return this.throwIfDisposed(),GY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.transpose=function(t){return this.throwIfDisposed(),tt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unique=function(t){return this.throwIfDisposed(),qY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),wA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.unstack=function(t){return this.throwIfDisposed(),ha(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.where=function(t,e){return this.throwIfDisposed(),Ln(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ae().prototype.zerosLike=function(){return this.throwIfDisposed(),nt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Io extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Io.prototype)}}class Fs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fs.prototype)}}class V extends Error{constructor(e){super(e),Object.setPrototypeOf(this,V.prototype)}}class Ge extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ge.prototype)}}class u1 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,u1.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pR{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fa(t,e){if(Array.isArray(t)){let n=[];for(let s=0;s<e;s++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Eo(t,e){if(!t)throw new u1(e)}function $S(t,e){let n=0;for(const s of t)s===e&&n++;return n}function Hn(t){return t.length===1?t[0]:t}function dt(t){return Array.isArray(t)?t:[t]}function Jo(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Li(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let $s={};function d1(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Fb(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Fb(e));else{const e=Object.keys(t);for(const n of e){const s=t[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?t[n]=s.value:Fb(s))}}}function Pd(t,e={},n={},s="object",o=!1){if(typeof t=="string"){const r=t;let i;if(r in n)i=n[r];else if(r in $s)i=$s[r];else if(i=e[r],i==null)throw new V(`Unknown ${s}: ${t}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const r=t;if(r.className==null||r.config==null)throw new V(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const i=r.className;let a,l;if(i in n?[a,l]=n[i]:i in $s?[a,l]=$s.className:i in e&&([a,l]=e[i]),a==null)throw new V(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys($s))c[f]=$s[f];for(const f of Object.keys(n))c[f]=n[f];const u=r.config;u.customObjects=c;const d=Object.assign({},$s);for(const f of Object.keys(n))$s[f]=n[f];Fb(r.config);const h=l(a,r.config,n,o);return $s=Object.assign({},d),h}else{const c=Object.assign({},$s);for(const d of Object.keys(n))$s[d]=n[d];const u=new a(r.config);return $s=Object.assign({},c),u}}}function _Z(t,e){return t<e?-1:t>e?1:0}function yh(t,e){return-1*_Z(t,e)}function Wr(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function SZ(t){if(t==null)throw new V(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Ta(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new V(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function h1(t,e,n=0,s=1/0){return Eo(n>=0),Eo(s>=n),Array.isArray(t)&&t.length>=n&&t.length<=s&&t.every(o=>typeof o===e)}function dn(t,e){Array.isArray(t)?($(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,s)=>dn(n,`element ${s+1} of ${e}`))):$(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${mR(t)}.`)}function mR(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>mR(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function IZ(t,e,n){let s=n!=null?n():zn(),o;return(...i)=>{const a=n!=null?n():zn();return a-s<e||(s=a,o=t(...i)),o}}function gR(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let EZ=0;function vR(){return EZ++}const xh={};function Um(t=""){return t in xh||(xh[t]=0),xh[t]+=1,t+xh[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kZ=["channelsFirst","channelsLast"],$Z=["nearest","bilinear"],TZ=["valid","same","causal"],NZ=["max","avg"],AZ=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ua=new Map;function jt(t){Ta(kZ,"DataFormat",t)}function RZ(t){Ta($Z,"InterpolationFormat",t)}function Is(t){Ta(TZ,"PaddingMode",t)}function bR(t){Ta(NZ,"PoolMode",t)}const Hc=[],TS="/";function Qi(t,e){Hc.push(t);try{const n=e();return Hc.pop(),n}catch(n){throw Hc.pop(),n}}function DZ(){return Hc.length===0?"":Hc.join(TS)+TS}function yR(t){if(!wR(t))throw new Error("Not a valid tensor name: '"+t+"'");return DZ()+t}function xR(t){if(!wR(t))throw new Error("Not a valid tensor name: '"+t+"'");Ua.has(t)||Ua.set(t,0);const e=Ua.get(t);if(Ua.set(t,Ua.get(t)+1),e>0){const n=`${t}_${e}`;return Ua.set(n,1),n}else return t}const OZ=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function wR(t){return!!t.match(OZ)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LZ(t){return t===parseInt(t.toString(),10)}function Gr(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let s=1;for(let o=e;o<n;++o)s*=t[o];return s}function Pl(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s<e&&(e=s)}return e}function Jr(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const s=t[n];s>e&&(e=s)}return e}function ho(t,e){if(e<t)throw new V(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let s=t;s<e;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Jg;function Yt(){return Jg==null&&(Jg=d8().epsilon()),Jg}function fo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fo(t,e){return Te(t,e)}function Md(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),X(t,n)}function FZ(t,e){return J(()=>{if(t.shape.length!==2)throw new V(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Md(t,1);return Pb(n,[1,e,1])})}function PZ(t){const e=[Gr(t.shape)];return X(t,e)}function MZ(t){if(t.rank<=1)throw new V(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Gr(t.shape,1)];return X(t,e)}function Yi(t,e,n){return J(()=>{switch(t.rank){case 1:return Ix(t,e,n);case 2:return vA(t,[e,0],[n,t.shape[1]]);case 3:return Ex(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Af(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return xt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return xt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new V(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Zg(t,e,n){return J(()=>{switch(t.rank){case 1:return Ix(t,e,n);case 2:return vA(t,[0,e],[t.shape[0],n]);case 3:return Ex(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Af(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new V(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function wh(t,e,n,s){return J(()=>{switch(t.rank){case 1:return Ix(t,e,n);case 2:switch(s){case 1:return Yi(t,e,n);case 2:return Zg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Yi(t,e,n);case 2:return Ex(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Zg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Yi(t,e,n);case 2:return Af(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Af(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Zg(t,e,n);default:throw new V(`The axis is not within the rank of the tensor ${s}`)}default:throw new V(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function f1(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Xn(t,e)}function NS(t,e){switch(t.rank){case 1:return G5([t,e]);case 2:return K5([t,e],0);case 3:return X5([t,e],0);case 4:return Y5([t,e],0);default:throw new V(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function Pb(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new V(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return to(t,e)}function jm(t,e=0,n=1,s,o){return iY(t,e,n,s,o)}function Po(t,e,n,s){if(t.rank<2||e.rank<2)throw new Ge(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(o!==r)throw new Ge(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return pS({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?Mb(t.rank,s,fo()):null,activation:n});{const o=t.shape.slice(),r=o.pop();t=X(t,[-1,r]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=X(tt(e,u),[l,-1]);const d=[...o,...c];return X(pS({a:t,b:e,transposeA:!1,transposeB:!1,bias:s?Mb(t.rank,s,fo()):null,activation:n}),d)}}function CR(t,e,n){return J(()=>(Array.isArray(e)?e=as(e,"int32"):e=Te(e,"int32"),cx(t,e,n)))}function Bd(t){return W(t,t)}function Mb(t,e,n){const s=e.shape;if(e.rank!==1&&e.rank!==t)throw new V(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1,1,1]):X(e,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,1,1,s[0]]):X(e,[1].concat(s))}else if(t===4){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1,1]):X(e,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,1,s[0]]):X(e,[1].concat(s))}else if(t===3){if(n==="channelsFirst")return s.length===1?X(e,[1,s[0],1]):X(e,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?X(e,[1,1,s[0]]):X(e,[1].concat(s))}else if(t<3)return e;throw new V(`Unsupported input rank by biasAdd: ${e.rank}`)}function bo(t,e,n){return J(()=>(n==null&&(n=fo()),jt(n),we(t,Mb(t.rank,e,n))))}function BZ(t,e=1){if(e!==1)throw new Ge(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Om(t)}function VZ(t){return J(()=>Fe(t,we(Tn(t),1)))}function _R(t,e,n,s){return J(()=>t7(t,e,n,s))}function UZ(t){return J(()=>{const e=we(.5,W(.2,t));return _s(e,0,1)})}function Vd(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jZ=["fanIn","fanOut","fanAvg"],zZ=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WZ(t){Ta(jZ,"FanMode",t)}function GZ(t){Ta(zZ,"Distribution",t)}class Ks extends sc{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class SR extends Ks{apply(e,n){return cn(e,n)}}SR.className="Zeros";me(SR);class p1 extends Ks{apply(e,n){return vi(e,n)}}p1.className="Ones";me(p1);class IR extends Ks{constructor(e){if(super(),typeof e!="object")throw new V(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new V(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return J(()=>W(lt(this.value),vi(e,n)))}getConfig(){return{value:this.value}}}IR.className="Constant";me(IR);class ER extends Ks{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Ad(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}ER.className="RandomUniform";me(ER);class kR extends Ks{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ge(`randomNormal does not support dType ${n}.`);return jm(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}kR.className="RandomNormal";me(kR);class $R extends Ks{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ge(`truncatedNormal does not support dType ${n}.`);return xA(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}$R.className="TruncatedNormal";me($R);class TR extends Ks{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return J(()=>{if(e.length!==2||e[0]!==e[1])throw new V("Identity matrix initializer can only be used for 2D square matrices.");return W(this.gain,nA(e[0]))})}getConfig(){return{gain:this.gain}}}TR.className="Identity";me(TR);function HZ(t,e="channelsLast"){let n,s;if(jt(e),t.length===2)n=t[0],s=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=Gr(t,2);n=t[1]*o,s=t[0]*o}else if(e==="channelsLast"){const o=Gr(t,0,t.length-2);n=t[t.length-2]*o,s=t[t.length-1]*o}}else{const o=Gr(t);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class ds extends Ks{constructor(e){if(super(),e.scale<0)throw new V(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,WZ(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,GZ(this.distribution),this.seed=e.seed}apply(e,n){const s=HZ(e),o=s[0],r=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(o+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ge(`${this.getClassName()} does not support dType ${n}.`);return xA(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Ad(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ds.className="VarianceScaling";me(ds);class m1 extends ds{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}m1.className="GlorotUniform";me(m1);class g1 extends ds{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}g1.className="GlorotNormal";me(g1);class v1 extends ds{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}v1.className="HeNormal";me(v1);class b1 extends ds{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}b1.className="HeUniform";me(b1);class y1 extends ds{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ds.className}}y1.className="LeCunNormal";me(y1);class x1 extends ds{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ds.className}}x1.className="LeCunUniform";me(x1);class NR extends Ks{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return J(()=>{if(e.length<2)throw new Ge("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const s=le(e.slice(0,-1)),o=e[e.length-1],r=s*o;r>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${r}) elements: Slowness may result.`);const i=[Math.max(o,s),Math.min(o,s)],a=jm(i,0,1,n,this.seed),l=Y7.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(o,s)*Math.min(o,s)],[Math.min(o,s)+1]);return c=W(c,d.sign()),s<o&&(c=c.transpose()),W(lt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}NR.className="Orthogonal";me(NR);const AS={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function RS(t,e={}){return Pd(t,Rs.getMap().classNameMap,e,"initializer")}function Rt(t){return d1(t)}function Tt(t){if(typeof t=="string"){const e=t in AS?AS[t]:t;if(e==="GlorotNormal")return new g1;if(e==="GlorotUniform")return new m1;if(e==="HeNormal")return new v1;if(e==="HeUniform")return new b1;if(e==="LeCunNormal")return new y1;if(e==="LeCunUniform")return new x1;{const n={};return n.className=e,n.config={},RS(n)}}else return t instanceof Ks?t:RS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bb(t){return Array.isArray(t)&&Array.isArray(t[0])}function Rf(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ue(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new V(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function ot(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new V(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Df(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((s,o)=>s*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DS="Variable";class KZ{constructor(e,n="float32",s=DS,o=!0,r=null){this.dtype=n??"float32",this.shape=e.shape,this.id=vR(),s=s??DS,this.originalName=yR(s),this.name=xR(this.originalName),this.trainable_=o,this.constraint=r,this.val=YY(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),qZ(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function qZ(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Vb(t){return t.map(e=>e.read())}function w1(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Jt{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class zo{constructor(e,n,s,o,r,i,a){this.dtype=e,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=a,this.id=vR(),i!=null&&(this.originalName=yR(i),this.name=xR(this.originalName)),this.rank=n.length}}let XZ=0,zm=class{constructor(e,n){this.callArgs=n,this.id=XZ++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const s of e.inboundLayers)s!=null&&s.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},QZ=0;class Qe extends sc{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=QZ++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const s=this.getClassName();n=Jo(s)+"_"+Um(s)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let s;if(e.batchInputShape!=null)s=e.batchInputShape;else if(e.inputShape!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),s=[r].concat(e.inputShape)}this.batchInputShape=s;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Fs(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new V(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Hn(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Hn(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Io(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Io(`Layer ${this.name} is not connected, no input to return.`);return Hn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Io(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Io(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Hn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=dt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=dt(this.inputSpec);if(n.length!==s.length)throw new V(`Layer ${this.name} expects ${s.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const r=n[o],i=s[o];if(i==null)continue;const a=r.rank;if(i.ndim!=null&&a!==i.ndim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&r.dtype!==i.dtype)throw new V(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const l=r.shape;for(const c in i.axes){const u=Number(c),d=i.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],u=r.shape[l];if(c!=null&&u!=null&&c!==u)throw new V(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const s=dt(e),o=ZZ(e),r=eee(e);if(o===r)throw new V("Arguments to apply() must be all SymbolicTensors or all Tensors");return Qi(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of dt(e))i.push(a.shape);this.build(Hn(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=dt(i),l=[];for(let c of a)s.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=Hn(l),this.activityRegularizer!=null)throw new Ge("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=YZ(e),a=this.computeOutputShape(i);let l;const c=JZ(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new zo(c,u,this,dt(e),n,this.name,d)):l=new zo(c,a,this,dt(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ge("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&e[o]!=null&&e[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Io(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);e.indexOf(s)===-1&&e.push(s)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Io(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Fs(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Df(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Vb(e?this.trainableWeights:this.weights)}setWeights(e){J(()=>{const n=this.weights;if(n.length!==e.length)throw new V(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const s=[],o=Vb(n);for(let r=0;r<o.length;++r){const i=o[r],a=n[r],l=e[r];if(!ct(i.shape,l.shape))throw new V(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}w1(s)})}addWeight(e,n,s,o,r,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new V(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Tt("zeros"));const c=o.apply(n,s),u=new KZ(c,s,e,i,a);return c.dispose(),r!=null&&this.addLoss(()=>r.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=dt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,s){if(!this.supportsMasking)return;const o=this.computeMask(e,s),r=dt(n),i=dt(o);if(r.length!==i.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=i[a]}addInboundNode(e,n,s,o,r,i,a=null){const l=dt(e);n=dt(n),s=dt(s),o=dt(o),r=Rf(r),i=Rf(i);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new zm({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:i},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function YZ(t){t=dt(t);const e=[];for(const n of t)e.push(n.shape);return Hn(e)}function JZ(t){return"float32"}function AR(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const s=e.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const i=s.inputTensors[r],a=s.inboundLayers[r],l=s.nodeIndices[r],c=AR(i,a,l);for(const u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function ZZ(t){let e=!0;for(const n of dt(t))if(!(n instanceof zo)){e=!1;break}return e}function eee(t){let e=!0;for(const n of dt(t))if(n instanceof zo){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ud extends Qe{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Um("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new V("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new V("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new V("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new zo(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new V(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Ud.className="InputLayer";me(Ud);function tee(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new V("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Ud({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nee(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Te(e,t.dtype)}catch{throw new V(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Fr{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Fr)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,s){if(this.id2Value[e.id]==null)this.id2Value[e.id]=nee(e,n),this.name2Id[e.name]=e.id,s!=null&&(this.id2Mask[e.id]=s);else throw new V(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof zo){if(this.id2Value[e.id]==null)throw new V(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new V(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof zo){if(this.id2Value[e.id]==null)throw new V(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new V(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Ke(this.id2Mask)}}const Of=new pR,Lf=new pR;function see(t){Of!=null&&Of.setMaxEntries(t),Lf!=null&&Lf.setMaxEntries(t)}function Tc(t,e,n,s){const o=n==null?!1:n.training,r=Array.isArray(t),i=r?t:[t],a=i.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=Of.get(u),h;if(d==null){const p=oee(i,e);d=p.sorted,h=p.recipientCounts,Of.put(u,d),Lf.put(u,h)}h={},o||Object.assign(h,Lf.get(u));const f=new Fr(e);for(let p=0;p<d.length;++p){const m=d[p],v=m.sourceLayer;if(v instanceof Ud)continue;const g=[],b=[],x=[];let y=!1;for(const I of m.inputs){const E=f.getValue(I),O=f.getMask(I);g.push(E),b.push(O),O!=null&&(y=!0),o||(h[I.name]--,h[I.name]===0&&!e.hasKey(I)&&a.indexOf(I.name)===-1&&!E.isDisposed&&I.sourceLayer.stateful!==!0&&x.push(E))}y&&(n=n||{},n.mask=b[0]);const w=dt(v.apply(g,n));let C=null;v.supportsMasking&&(C=v.computeMask(g,b));const _=iee(m),S=Array.isArray(_)?_:[_];for(let I=0;I<S.length;++I){f.hasKey(S[I])||f.add(S[I],w[I],Array.isArray(C)?C[0]:C);const E=a.indexOf(S[I].name);E!==-1&&(l[E]=w[I])}o||Ke(x)}return f.disposeMasks(),r?l:l[0]}function oee(t,e){$(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(t.length===1){const o=OS(t[0],e);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of t){const{sorted:i,recipientMap:a}=OS(r,e);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(c=>s[l].add(c))}}return{sorted:n,recipientCounts:ree(s)}}function ree(t){const e={};for(const n in t)e[n]=t[n].size;return e}function OS(t,e){const n=new Set,s=[],o={};for(const a of e.names())n.add(a);const r=[],i=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=i[i.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),s.push(a),n.add(a.name),l&&i.pop();else{i.push(r.length-1);for(const c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!n.has(c.name)&&r.push(c)}}return{sorted:s,recipientMap:o}}function iee(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let s=0;s<t.sourceLayer.inboundNodes.length;++s)for(const o of t.sourceLayer.inboundNodes[s].outputTensors)if(o.id===t.id){n=s;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aee=te();aee.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,see);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C1(t,e){return J(()=>In(Le(W(t,t),e,!0)))}class jd extends sc{getConfig(){return{}}}class RR extends jd{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=C1(e,this.axis),s=_s(n,0,this.maxValue);return W(e,Fe(s,we(Yt(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}RR.className="MaxNorm";me(RR);class DR extends jd{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>Fe(e,we(Yt(),C1(e,this.axis))))}getConfig(){return{axis:this.axis}}}DR.className="UnitNorm";me(DR);class OR extends jd{apply(e){return ka(e)}}OR.className="NonNeg";me(OR);class LR extends jd{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=C1(e,this.axis),s=we(W(this.rate,_s(n,this.minValue,this.maxValue)),W(1-this.rate,n));return W(e,Fe(s,we(Yt(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}LR.className="MinMaxNorm";me(LR);const LS={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Zt(t){return d1(t)}function FS(t,e={}){return Pd(t,Rs.getMap().classNameMap,e,"constraint")}function en(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in LS?LS[t]:t,config:{}};return FS(n)}else return t instanceof jd?t:FS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ki(t){if(t==null)return;const e=[],n=[],s=[];for(const o in t){const r=t[o];if(typeof r!="number"){const i=r;e.push(i.data()),n.push(o),s.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let r=0;r<o.length;++r)t[n[r]]=o[r][0];Ke(s)}}function FR(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var PS;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(PS||(PS={}));const lee=125;class hu{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class cee{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class uee extends hu{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=J(()=>we(this.totals[o],W(r,s)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:J(()=>{const o=W(Fe(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),Oo(n[s])}))}}class dee extends hu{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const e=[],n=[],s=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(r),s.push(a)}}const o=await Promise.all(e);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class hee extends hu{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||UA,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=lee),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");mb(this.yieldEvery)&&(this.maybeWait=IZ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,s){const o=[];this.yield!=null&&(await ki(s),o.push(this.yield(e,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ki(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const s=[];this.epochEnd!=null&&(await ki(n),s.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ki(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const s=[];this.batchEnd!=null&&(await ki(n),s.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):mb(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(s)}async onTrainBegin(e){this.trainBegin!=null&&(await ki(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ki(e),await this.trainEnd(e))}}function PR(t,e){return t==null&&(t={}),t instanceof hu?[t]:Array.isArray(t)&&t[0]instanceof hu?t:dt(t).map(s=>new hee(s,e))}class Ns{constructor(){}static registerCallbackConstructor(e,n){$(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ns.checkForDuplicate(n),Ns.constructors[e]==null&&(Ns.constructors[e]=[]),Ns.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ns.constructors)Ns.constructors[+n].forEach(o=>{if(o===e)throw new V("Duplicate callback constructor.")})}static clear(){Ns.constructors={}}static createCallbacks(e){const n=[];for(const s in Ns.constructors){const o=+s;e>=o&&n.push(...Ns.constructors[o])}return n.map(s=>new s)}}Ns.constructors={};function MR(t,e,n,s,o,r,i,a,l){const c=new dee,u=[new uee,...Ns.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new cee(u);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mo(t,e={},n=!1){return Pd(t,Rs.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ff(t,e){return J(()=>{t.dtype!=="float32"&&(t=Te(t,"float32"));const n=Le(Bd(t),e,!0),s=Dm(n.shape,Yt()),o=In(gi(n,s));return Fe(t,o)})}function Wm(t,e){return J(()=>Wt(Bd(Ve(e,t)),-1))}function _1(t,e){return J(()=>Wt(Tn(Ve(e,t)),-1))}function S1(t,e){return J(()=>{const n=Ve(t,e),s=_s(Tn(t),Yt(),Number.MAX_VALUE),o=Tn(Fe(n,s));return W(100,Wt(o,-1))})}function fee(t,e){return J(()=>{const n=_s(e,Yt(),Number.MAX_VALUE),s=jo(we(1,n)),o=_s(t,Yt(),Number.MAX_VALUE),r=jo(we(1,o));return Wt(Bd(Ve(s,r)),-1)})}function pee(t,e){return J(()=>{const n=gi(0,Ve(1,W(t,e)));return Wt(Bd(n),-1)})}function mee(t,e){return J(()=>{const n=gi(0,Ve(1,W(t,e)));return Wt(n,-1)})}function gee(t,e){return J(()=>{const n=Le(W(t,e),-1),s=ro(W(Ve(1,t),e),-1);return gi(0,we(1,Ve(s,n)))})}function vee(t,e){return J(()=>{const n=Math.log(2),s=Ve(e,t),o=Ve(we(s,Nd(W(-2,s))),n);return Wt(o,-1)})}function fu(t,e,n=!1){return J(()=>{if(n)e=kx(e);else{const s=Le(e,e.shape.length-1,!0);e=Fe(e,s)}return e=_s(e,Yt(),1-Yt()),Bt(Le(W(Te(t,"float32"),jo(e)),e.shape.length-1))})}function Pf(t,e,n=!1){return J(()=>{const s=Te(Fm(PZ(t)),"int32");e=_s(e,Yt(),1-Yt());const o=e.shape,r=X(aA(s,o[o.length-1]),o);return fu(r,e,n)})}function bee(t,e){if(!ct(t.shape,e.shape))throw new V(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return J(()=>{const n=ka(e),s=Bt(Tn(e));return we(Ve(n,W(e,t)),sA(Uo(s)))})}function Gm(t,e){return J(()=>{let n;return n=_s(e,Yt(),1-Yt()),n=jo(Fe(n,Ve(1,n))),Wt(bee(t,n),-1)})}function yee(t,e){return J(()=>{const n=_s(t,Yt(),1),s=_s(e,Yt(),1);return Le(W(t,jo(Fe(n,s))),-1)})}function xee(t,e){return J(()=>{const n=jo(we(Yt(),e));return Wt(Ve(e,W(t,n)),-1)})}function BR(t,e){return J(()=>{const n=Ff(t,-1),s=Ff(e,-1),o=W(n,s);return Bt(Le(o,-1))})}const Mf={meanSquaredError:Wm,meanAbsoluteError:_1,meanAbsolutePercentageError:S1,meanSquaredLogarithmicError:fee,squaredHinge:pee,hinge:mee,categoricalHinge:gee,logcosh:vee,categoricalCrossentropy:fu,sparseCategoricalCrossentropy:Pf,binaryCrossentropy:Gm,kullbackLeiblerDivergence:yee,poisson:xee,cosineProximity:BR};function ev(t){if(typeof t=="string"){if(t in Mf)return Mf[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new V(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VR(t,e){return J(()=>{const n=W(.5,Ws(e)),s=Fo(Ss(e,n),t.dtype);return Wt(Vo(t,s),-1)})}function UR(t,e){return J(()=>Fo(Vo(au(t,-1),au(e,-1)),"float32"))}function wee(t,e){return J(()=>Te(Le(hr(Vo(t,1),Vo(e,1))),"float32"))}function Cee(t,e){return J(()=>Te(Le(hr(Vo(t,0),Vo(e,1))),"float32"))}function _ee(t,e){return J(()=>{const n=wee(t,e),s=Cee(t,e),o=we(n,s);return Te(Ln(Ss(o,0),Fe(n,o),0),"float32")})}function See(t,e){return Gm(t,e)}function Iee(t,e){return t.rank===e.rank&&(t=Rd(t,[t.rank-1])),e=au(e,-1),e.dtype!==t.dtype&&(e=Te(e,t.dtype)),Te(Vo(t,e),"float32")}const Eee=Wm,kee=Wm,$ee=_1,Tee=_1,Nee=S1,Aee=S1,jR=fu,Ree=BR,zR=Pf,Bf={binaryAccuracy:VR,categoricalAccuracy:UR,precision:_ee,categoricalCrossentropy:jR,sparseCategoricalCrossentropy:zR,mse:Eee,MSE:kee,mae:$ee,MAE:Tee,mape:Nee,MAPE:Aee,cosine:Ree};function Dee(t){if(typeof t=="string"&&t in Bf)return Bf[t];if(typeof t!="string"&&t!=null)return t;throw new V(`Unknown metric ${t}`)}function Ch(t){if(Eo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Mf))if(Mf[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Bf))if(Bf[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oee(t){const e={Adagrad:()=>Va.adagrad(.01),Adadelta:()=>Va.adadelta(1,.95,Yt()),Adam:()=>Va.adam(.001,.9,.999,Yt()),Adamax:()=>Va.adamax(.002,.9,.999,Yt(),0),RMSProp:()=>Va.rmsprop(.001,.9,0,Yt()),SGD:()=>Va.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new V(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MS=1*1024*1024;function BS(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Ub(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(t);s.length>MS&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${MS}.`)}}function Ub(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Ub(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Ub(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lee(t,e,n,s=console.log){const o=Pee(t),r=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let i;if(!o){r.push("Receives inputs"),i=[];for(const u in t.nodesByDepth)i.push(...t.nodesByDepth[u])}s("_".repeat(e)),Vf(r,n,s),s("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)o?Mee(a[u],n,s):Bee(a[u],n,i,s),s((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=Fee(t),c=Df(t.nonTrainableWeights);s(`Total params: ${l+c}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${c}`),s("_".repeat(e))}function Fee(t){let e;return t.collectedTrainableWeights!=null?e=Df(t.collectedTrainableWeights):e=Df(t.trainableWeights),e}function Pee(t){let e=!0;const n=[],s=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}s.push(...o)}if(e)for(const o of t.layers){let r=!1;for(const i of o.inboundNodes)if(s.indexOf(i)!==-1)if(r){e=!1;break}else r=!0;if(!e)break}return e}function Vf(t,e,n=console.log){let s="";for(let o=0;o<t.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=t[o],s=s.slice(0,e[o]),s+=" ".repeat(e[o]-s.length);n(s)}function Mee(t,e,n){let s,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const r=t.name,i=t.getClassName(),a=[`${r} (${i})`,o,s,t.countParams().toString()];Vf(a,e,n)}function Bee(t,e,n,s){let o,r;try{r=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{r="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];i.push(`${f}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),c=i.length===0?"":i[0],u=[`${a} (${l})`,r,o,t.countParams().toString(),c];Vf(u,e,s);for(let d=1;d<i.length;++d)Vf(["","","","",i[d]],e,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WR(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Uf(t,e){if(t===null)return null;if(typeof t=="string")return Li(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let o=0;o<s;++o){const r=t[o];WR(e,o,r)?n.push(r):n.push(Uf(r,e))}return n}else{const n={};for(const s of Object.keys(t)){const o=t[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=Li(s);n[r]=Uf(o,r)}}return n}}function jb(t,e){if(t==null)return null;if(typeof t=="string")return Jo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],s=t.length;for(let o=0;o<s;++o){const r=t[o];WR(e,o,r)?n.push(r):n.push(jb(r,e))}return n}else{const n={};for(const s of Object.keys(t)){const o=t[s],r=Jo(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=jb(o,s)}return n}}/** @license See the LICENSE file. */const GR="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vee=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Qs extends Qe{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=Um(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Wr(this.inputs).length!==this.inputs.length)throw new V(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Wr(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const x=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const x=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;Eo(y===0,"input layer has >1 nodes"),Eo(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const x=this.inputLayers[b];if(!(x instanceof Ud))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},i={},a=[],l=(b,x,y,w,C,_)=>{(w==null||C==null||_==null)&&(w=b.sourceLayer,C=b.nodeIndex,_=b.tensorIndex);const S=w.inboundNodes[C];if(y.indexOf(S)!==-1)throw new Fs(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf(S)!==-1)return;this.containerNodes.add(Qs.nodeKey(w,C)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(S)===-1&&y.push(S);const I=S.inboundLayers.length;for(let E=0;E<I;E++){const O=S.inputTensors[E],A=S.inboundLayers[E],P=S.nodeIndices[E],z=S.tensorIndices[E];l(O,x,y,A,P,z)}for(x.push(S);y.indexOf(S)>=0;)y.splice(y.indexOf(S),1);a.push(S)},c=[],u=[];for(const b of this.outputs)l(b,c,u);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let x=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];x=Math.max(x,y),o[b.outboundLayer.id]=x,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=x;for(let w=0;w<b.inboundLayers.length;w++){const C=b.inboundLayers[w],_=b.nodeIndices[w],S=C.inboundNodes[_],I=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(x+1,I),s[S.id]=S}}const h={};for(const b in n){const x=n[b];x in h||(h[x]=[]),h[x].push(s[b])}const f={};for(const b in o){const x=o[b];x in f||(f[x]=[]),f[x].push(r[b])}let p=Object.keys(f).map(b=>parseInt(b,10)).sort(yh);this.layers=[];for(const b of p){const x=f[b];x.sort((y,w)=>{const C=i[y.id],_=i[w.id];return C<_?-1:C>_?1:0});for(const y of x)y instanceof Qs&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=f,p=Object.keys(h).map(b=>parseInt(b,10)).sort(yh);const m=this.inputs.slice(),v=[];for(const b of p)for(const x of h[b]){const y=x.outboundLayer;if(y!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new Fs(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${v}`);for(const w of x.outputTensors)m.push(w);v.push(y.name)}}this.nodesByDepth=h;const g=this.layers.map(b=>b.name);for(const b of g){const x=g.filter(y=>y===b).length;if(x!==1)throw new Fs(`The name "${b}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new V("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const s={};let o=0;const r=Vee(e);r&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=r?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(s[u]!=null)throw new V(`Duplicate weight name: ${u}`);s[u]=c,o++}const i=[];for(const a in e){let l=a;if(s[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(s[l]!=null)i.push([s[l],e[a]]);else if(n)throw new V(`Provided weight data has no target variable: ${a}`);delete s[l]}if(n){const a=[];for(const l in s)a.push(l);if(a.length>0)throw new V(`${a.length} of ${o} weights are not set: ${a}`)}w1(i)}parseWeights(e){for(const n in Object.keys(e)){const s=n.split("/"),o=["vars","layer_checkpoint_dependencies"],r=s.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");r!==n&&(e[r]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${GR}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const s=jb(this.updatedConfig());return n?JSON.stringify(s):s}call(e,n){return J(()=>{e=dt(e);const s=new Fr;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],e[o]);return Tc(this.outputs,s,n)})}computeMask(e,n){return J(()=>{e=dt(e);let s;return n==null?s=fa(null,e.length):s=dt(n),this.runInternalGraph(e,s)[1]})}computeOutputShape(e){const n=Rf(e);if(n.length!==this.inputLayers.length)throw new V(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";s[u]=c}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(yh);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<c.inboundLayers.length;m++){const v=c.inboundLayers[m],g=c.nodeIndices[m],b=c.tensorIndices[m],x=`${v.name}_${g}_${b}`,y=s[x];d.push(y)}const h=u.computeOutputShape(Hn(d)),f=Rf(h),p=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const v=`${u.name}_${p}_${m}`;s[v]=f[m]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Eo(l in s),r.push(s[l])}return Hn(r)}runInternalGraph(e,n){n==null&&(n=fa(null,e.length));const s={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];s[c.id]=[u,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(yh);for(const l of o){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of h)m.id in s&&p.push(s[m.id]);if(p.length===h.length){let m={},v,g,b,x;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[y,w]=p[0];m.mask==null&&(m.mask=w),b=dt(d.call(y,m)),x=dt(d.computeMask(y,w)),v=[y],g=[w]}else v=p.map(y=>y[0]),g=p.map(y=>y[1]),m.mask==null&&(m.mask=g),b=dt(d.call(v,m)),x=dt(d.computeMask(v,g));if(d.activityRegularizer)throw new Ge("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<f.length;++y){const w=f[y],C=b[y],_=x[y];s[w.id]=[C,_]}}}}const r=[],i=[],a=[];for(const l of this.outputs){Eo(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=s[l.id];a.push(c.shape),r.push(c),i.push(u)}return[r,i,a]}buildNodeConversionMap(e){const n={};let s;for(const o of this.layers){s=o instanceof Qs?1:0;for(let r=0;r<o.inboundNodes.length;r++){const i=Qs.nodeKey(o,r);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new V("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const s of this.layers)if(s.name===e)return s;throw new V(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new V(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return J(()=>{const e=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=Qs.nodeKey(n,s);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),c=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],f=Qs.nodeKey(i,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let v=0;v<h.inboundLayers.length;v++){const g=h.inboundLayers[v],b=h.nodeIndices[v],x=h.tensorIndices[v],y=Qs.nodeKey(g,b);let w=n[y];w==null&&(w=0),m.push([g.name,w,x,p])}c.push(m)}}}const u={};u.name=i.name,u.className=a,u.config=l,u.inboundNodes=c,s.push(u)}e.layers=s;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=Qs.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,u,d])}e.inputLayers=o;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=Qs.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,u,d])}return e.outputLayers=r,e}static fromConfig(e,n,s={},o=!1){const r={},i={};function a(v,g){v.name in i?i[v.name].push(g):i[v.name]=[g]}function l(v,g){const b=[];let x;for(const y of g){const w=y[0],C=y[1],_=y[2];if(x=y[3]==null?{}:y[3],!(w in r)){a(v,g);return}const S=r[w];if(S.inboundNodes.length<=C){a(v,g);return}const I=S.inboundNodes[C];b.push(I.outputTensors[_])}b.length>0&&v.apply(Hn(b),x)}function c(v){const g=v.name,b=Mo(v,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[g]=b,v.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new V(`Corrupted configuration, expected array for nodeData: ${y}`);a(b,y)})}const u=n.name,d=n.layers;for(const v of d)c(v);for(;!SZ(i);)for(const v of d){const g=r[v.name];if(g.name in i){const b=i[g.name];delete i[g.name];for(const x of b)l(g,x)}}const h=[],f=[],p=n.inputLayers;for(const v of p){const g=v[0],b=v[1],x=v[2];Eo(g in r);const w=r[g].inboundNodes[b].outputTensors;h.push(w[x])}const m=n.outputLayers;for(const v of m){const g=v[0],b=v[1],x=v[2];Eo(g in r);const w=r[g].inboundNodes[b].outputTensors;f.push(w[x])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new V("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){J(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uee(t,e,n){const s=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(s===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==s)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(r=>{r in t?o.push(t[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function HR(t,e){return Uee(t,e,"classWeight")}async function KR(t,e,n,s){if(n!=null){const o=J(()=>{if(t.shape.length===1)return Xi(t);if(t.shape.length===2){if(t.shape[1]>1)return au(t,1);if(t.shape[1]===1)return X(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());Ke(o);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),as(i,"float32")}else return null}function jee(t,e){return W(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zee=32;function qR(t,e){let n,s;const o=e;n=o.xs,s=o.ys,$(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const r=VS("input",t.inputNames,n),i=VS("output",t.outputNames,s),a=r[0].shape[0];$(r.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),$(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<r.length;l++)$(r[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)$(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:r,ys:i}}function VS(t,e,n){if(n instanceof Qt)return[n];if(Array.isArray(n))return $(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const s=[];for(const o of e){if(n[o]==null)throw new V(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);s.push(n[o])}return s}}function Wee(t){if(t.length===3)throw new Ge("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Gee(t,e,n){const s=n.batchesPerEpoch!=null;if($(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),$(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),$(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),$(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),$(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let r,i;if(o)if(US(n.validationData))$(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=Wee(n.validationData);r=v.xs,i=v.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;o?c=l.slice().concat(l.map(v=>"val_"+v)):c=l.slice();const u=PR(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=MR(u,d,n.epochs,null,null,Hee(e,n),null,o,c);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const v={};await h.onEpochBegin(p);let g=0,b=0;for(s||(m=await e.iterator());!s||g<n.batchesPerEpoch;){const x=await m.next();if(s&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:y,ys:w}=qR(t,x.value),C={};C.batch=b,C.size=y[0].shape[0],await h.onBatchBegin(b,C);const _=[];if(n.classWeight!=null){const E=HR(n.classWeight,t.outputNames);for(let O=0;O<E.length;++O)_.push(await KR(w[O],null,E[O]))}const S=y.concat(w).concat(_),I=a(S);Ke(S);for(let E=0;E<l.length;++E){const O=l[E],A=I[E];C[O]=A,Oo(A)}await h.onBatchEnd(b,C),FR(C),b++,g++}if(s?g>=n.batchesPerEpoch:x.done){if(o){let y;US(n.validationData)?y=dt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=dt(t.evaluate(r,i,{batchSize:n.validationBatchSize==null?zee:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)v[`val_${t.metricsNames[w]}`]=y[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,v),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Hee(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function US(t){return typeof t.iterator=="function"}function Kee(t){return typeof t.next=="function"}async function qee(t,e,n){n=n||{};const s=n.batches!=null,o=t.testFunction;let r=[];if(n.verbose>0)throw new Ge("Verbose mode is not implemented yet.");$(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Kee(e)?e:await e.iterator();let a=0,l=0;for(;!s||l<n.batches;){const c=await i.next();if(r=J(()=>{if(c.value){const{xs:u,ys:d}=qR(t,c.value),h=u.concat(d),f=J(()=>o(h));if(Ke(h),l===0)for(let m=0;m<f.length;++m)r.push(lt(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const v=f[m],g=r[m];r[m]=J(()=>we(r[m],W(p,v))),l>0&&Ke(g)}Ke(f),a+=p,++l}return r}),c.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<r.length;++c){const u=r[c];r[c]=Fe(r[c],a),Ke(u)}return Hn(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tv(t){$(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function wc(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(s=>Yi(s,e,n-e)):Yi(t,e,n-e)}function zb(t,e){return J(()=>t==null?null:Array.isArray(t)?t.map(n=>zb(n,e)):CR(t,e.dtype==="int32"?e:Te(e,"int32")))}function nv(t,e){const n=[];let s=0,o=null;for(;s<t;)o=s+e,o>=t&&(o=t),n.push([s,o]),s=o;return n}function XR(t){const e=[];t instanceof Qt&&(t=[t]);for(let n=0;n<t.length;++n){const s=t[n];if(s.rank===1)e.push(Md(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(s)}}return e}function Xs(t,e){if(t==null)return;const n=[];if(e instanceof Qt)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const r=e[o];n.push(r.id)}const s=[];if(t instanceof Qt)n.indexOf(t.id)===-1&&s.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(t!=null)for(const o in t){const r=t[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xee(t){return t instanceof Qt}function Wb(t){return Array.isArray(t)}function jS(t){return!Xee(t)&&!Wb(t)}function zS(t,e,n,s=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(Wb(t)&&t.length>0)i=!0;else if(jS(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new V(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let r;if(jS(t)){t=t,r=[];for(const i of e){if(t[i]==null)throw new V(`No data provided for "${i}". Need data for each key in: ${e}`);r.push(t[i])}}else if(Wb(t)){if(t=t,t.length!==e.length)throw new V(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);r=t}else{if(t=t,e.length>1)throw new V(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);r=[t]}if(r=XR(r),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new V(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u>=0&&c!==u)throw new V(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function Qee(t,e,n){const s=Wr(t.map(r=>r.shape[0]));s.sort();const o=Wr(e.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new V(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(o.length>1)throw new V(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!ct(s,o))throw new V(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function Yee(t,e,n){const s=[Wm,Gm,fu];for(let o=0;o<t.length;++o){const r=t[o],i=e[o],a=n[o];if(i!=null){if(i===fu&&r.shape[r.shape.length-1]===1)throw new V(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=r.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new V(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function WS(t,e,n,s=!0,o=""){let r;if(Array.isArray(t)){if(t.length!==e.length)throw new V(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);r=t}else{if(e.length>1)throw new V(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);r=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new V(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u!==c)throw new V(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Jee(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(s=>n);{const s=[];for(const o of e){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const Zee="layers-model";class ml extends Qs{constructor(e){super(e),this.isTraining=!1}summary(e,n,s=console.log){if(!this.built)throw new V("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Lee(this,e,n,s)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Oee(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof bi))throw new V("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new V(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(ev(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new V(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>ev(a))}else{const i=ev(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Qi("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=Jee(e.metrics,this.outputNames),r=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Qi("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=o[i];(c=>{const u="";let d,h,f;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const v=this.internalOutputShapes[i];v[v.length-1]===1||this.lossFunctions[i]===Gm?["accuracy","acc"].indexOf(p)!==-1?h=VR:["crossentropy","ce"].indexOf(p)!==-1&&(h=See):this.lossFunctions[i]===Pf?["accuracy","acc"].indexOf(p)!==-1?h=Iee:["crossentropy","ce"].indexOf(p)!==-1&&(h=zR):["accuracy","acc"].indexOf(p)!==-1?h=UR:["crossentropy","ce"].indexOf(p)!==-1&&(h=jR);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=u+g}else f=Dee(p),d=u+Ch(p);let m;Qi(d,()=>{m=f}),r(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,s={}){const o=s.batchSize==null?32:s.batchSize;tv(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,o,s.verbose,s.steps);return Hn(c)}finally{Xs(i[0],e),Xs(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),qee(this,e,n)}checkNumSamples(e,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new V(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?r=e[0].shape[0]:r=e.shape[0];else throw new V(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new V("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),i=new Fr;if(e instanceof Qt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new V(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new V(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const a=Tc(r,i);return s?a:a[0]}retrieveSymbolicTensors(e){const n=fa(null,e.length);let s=e.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],i=r.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,i)=>{r==null&&o.push(e[i])}),new V(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,s=!1){return J(()=>{const o=this.checkNumSamples(e);if(s)throw new Ge("Verbose predictLoop() is not implemented yet.");const r=nv(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)J(()=>{const c=r[a][0],u=r[a][1],d=wc(e,c,u),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Fr(h);return Tc(this.outputs,f)}).forEach((c,u)=>i[u].push(c));return Hn(i.map(a=>Xn(a,0)))})}predict(e,n={}){const s=XR(e);WS(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return tv(o),this.predictLoop(s,o)}finally{Xs(s,e)}}predictOnBatch(e){WS(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,s=!0,o){if(this.optimizer_==null)throw new Fs("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Pf?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(e=zS(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=zS(n,this.feedOutputNames,r,!1,"target"),Qee(e,n),Yee(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new V(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,s,o,r=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,r,i);if(s!=null)throw new Error("sample weight is not supported yet.");let c=null;if(o!=null){const u=HR(o,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await KR(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,s,o=0,r){return J(()=>{const i=this.checkNumSamples(n,s,r,"steps"),a=[];if(o>0)throw new Ge("Verbose mode is not implemented yet.");if(r!=null)throw new Ge("steps mode in testLoop() is not implemented yet");{const l=nv(i,s),c=as(ho(0,i));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],f=Yi(c,d,h-d),p=zb(n,f),m=e(p);if(u===0)for(let v=0;v<m.length;++v)a.push(lt(0));for(let v=0;v<m.length;++v){const g=m[v];a[v]=we(a[v],W(h-d,g))}}for(let u=0;u<a.length;++u)a[u]=Fe(a[u],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let s=0;s<e.length;++s){const o=e[s];let r=o;if($S(e,o)>1){const i=$S(e.slice(0,s),o);r+=`_${i}`}n.push(r)}return n}makeTrainFunction(){return e=>{const n=[],s=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:s[m]});const h=new Fr(d),f=Tc(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const v=this.lossFunctions[m];let g=v(o[m],f[m]);r[m]!=null&&(g=jee(g,r[m]));const b=Wt(g);n.push(b),m===0?p=g:p=we(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let v;if(this.outputs.length>1&&m<this.outputs.length)v=n[m];else{const g=this.metricsTensors[m][0],b=this.metricsTensors[m][1];v=Wt(g(o[b],f[b]))}Oo(v),i.push(v)}return p=Wt(p),this.calculateLosses().forEach(m=>{p=we(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>J(()=>{const n=[];let s;const o=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:o[c]});const a=new Fr(i),l=Tc(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Wt(u(r[c],l[c]));c===0?s=d:s=we(s,d),n.push(s)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Wt(u(r[d],l[d]));n.push(h)}return n})}async fit(e,n,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,r,i,a,l,c,u,d,h;try{const f=s.batchSize==null?32:s.batchSize;tv(f);const m=await this.standardizeUserData(e,n,s.sampleWeight,s.classWeight,!1,f);o=m[0],r=m[1],h=m[2];let v=!1,g;if(s.validationData!=null&&s.validationData.length>0){if(v=!0,s.validationData.length===2)l=s.validationData[0],c=s.validationData[1];else throw s.validationData.length===3?new Ge("validationData including sample weights is not supported yet."):new V(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const E=await this.standardizeUserData(l,c,null,null,!0,f);u=E[0],d=E[1],g=u.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){v=!0;const I=Math.floor(o[0].shape[0]*(1-s.validationSplit)),E=o[0].shape[0];u=wc(o,I,E),i=o,o=wc(o,0,I),d=wc(r,I,E),a=r,r=wc(r,0,I),g=u.concat(d)}else s.validationSteps!=null&&(v=!0);const b=o.concat(r).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),y=this.getDedupedMetricsNames();let w,C;v?(this.makeTestFunction(),w=this.testFunction,C=y.slice().concat(y.map(I=>"val_"+I))):(w=null,g=[],C=y.slice());const _=PR(s.callbacks,s.yieldEvery);return await this.fitLoop(x,b,y,f,s.epochs,s.verbose,_,w,g,s.shuffle,C,s.initialEpoch,null,null)}finally{this.isTraining=!1,Xs(o,e),Xs(r,n),Xs(i,e),Xs(a,n),Xs(u,l),Xs(d,c),h!=null&&Ke(h)}}async fitLoop(e,n,s,o,r,i,a,l,c,u,d,h,f,p){o==null&&(o=32),r==null&&(r=1),u==null&&(u=!0),h==null&&(h=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new V("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,o,f,"steps_per_epoch");let g;v!=null&&(g=ho(0,v)),i==null&&(i=1);const{callbackList:b,history:x}=MR(a,i,r,h,v,f,o,m,d);b.setModel(this),this.history=x,await b.onTrainBegin(),this.stopTraining_=!1;for(let y=h;y<r;++y){await b.onEpochBegin(y);const w={};if(f!=null)throw new Ge("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Ge("batch shuffling is not implemneted yet");u&&wq(g);const C=as(g),_=nv(v,o);for(let S=0;S<_.length;++S){const I={};if(await b.onBatchBegin(S,I),J(()=>{const E=_[S][0],O=_[S][1],A=Yi(C,E,O-E);I.batch=S,I.size=O-E;const P=zb(n,A),z=e(P);for(let G=0;G<s.length;++G){const M=s[G],R=z[G];I[M]=R,Oo(R)}if(S===_.length-1&&m){const G=this.testLoop(l,c,o);for(let M=0;M<s.length;++M){const R=s[M],D=G[M];Oo(D),w["val_"+R]=D}}}),await b.onBatchEnd(S,I),FR(I),this.stopTraining_)break}C.dispose()}if(await b.onEpochEnd(y,w),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Gee(this,e,n)}async trainOnBatch(e,n){const s=await this.standardizeUserData(e,n),o=s[0],r=s[1],a=this.makeTrainFunction()(o.concat(r)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return Ke(a),Xs(s[0],e),Xs(s[1],n),Hn(l)}getNamedWeights(e){const n=[],s=e!=null&&e.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let i=0;i<o.length;++i)s&&!o[i].trainable||n.push({name:o[i].originalName,tensor:r[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=lS().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-lS().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Jo(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Jo(n))}else{const n=Object.keys(this.loss);e={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")e[o]=Jo(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Jo(Ch(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Jo(Ch(e)));{const e={};for(const n in this.metrics)e[n]=Jo(Ch(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Uf(e.optimizer_config),s=Mo(n);let o;if(typeof e.loss=="string")o=Li(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>Li(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=Li(e.loss[i])}let r;if(Array.isArray(e.metrics))r=e.metrics.map(i=>Li(i));else if(e.metrics!=null){r={};for(const i in e.metrics)r[i]=Li(e.metrics[i])}this.compile({loss:o,metrics:r,optimizer:s})}async save(e,n){if(typeof e=="string"){const c=E8(e);if(c.length===0)throw new V(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new V(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new V("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await cS(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Zee,generatedBy:`TensorFlow.js tfjs-layers v${GR}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await cS(await this.optimizer.getWeights(),c);s.specs.push(...d),s.data=b8([s.data,u])}return this.userDefinedMetadata!=null&&(BS(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,e.save(a)}setUserDefinedMetadata(e){BS(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}ml.className="Model";me(ml);class QR extends ml{}QR.className="Functional";me(QR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ete(t,e){if(e==null&&(e={}),typeof t=="string"){const n=k8(t,e);if(n.length===0)n.push(a9(t,e));else if(n.length>1)throw new V(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return tte(t,void 0,e)}async function tte(t,e,n){if(n==null&&(n={}),t.load==null)throw new V("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const s=await t.load();let o=s.modelTopology;o.model_config!=null&&(o=o.model_config);const r=n.strict==null?!0:n.strict,i=s.weightData!=null&&s.weightSpecs!=null&&r,a=Mo(Uf(o),e,i),l=s.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),s.userDefinedMetadata!=null&&a.setUserDefinedMetadata(s.userDefinedMetadata),s.weightData!=null){if(s.weightSpecs==null)throw new V("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:c,optimizerWeights:u}=nte(s.weightData,s.weightSpecs);a.loadWeights(c,r),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),Ke(c),Ke(u.map(d=>d.tensor))}return a}function nte(t,e){const n=h8(t,e),s={},o=[];return e.forEach(r=>{r.group==="optimizer"?o.push({name:r.name,tensor:n[r.name]}):s[r.name]=n[r.name]}),{modelWeights:s,optimizerWeights:o}}class pu extends ml{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Um("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new V(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof pu||e instanceof ml;let s;if(n){if(s=e,s.outputs.length!==1)throw new V("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new V("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new V("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=tee({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(e.inboundNodes.length!==1)throw new V(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new V("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=AR(this.outputs[0])}this.inboundNodes=[],new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:fa(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(ot(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ml({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,s=console.log){this.built||this.build(),super.summary(e,n,s)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,s={}){if(!this.built)throw new Fs("The model needs to be compiled before being used.");return this.model.evaluate(e,n,s)}async evaluateDataset(e,n){if(!this.built)throw new Fs("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,s={}){if(!this.built)throw new Fs("The model needs to be compiled before being used.");return this.model.fit(e,n,s)}async fitDataset(e,n){if(!this.built)throw new Fs("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,s={},o=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new V("Legacy serialization format not supported yet.");r=n}else $(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof pu))throw new Ge(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const u=Mo(l,void 0,o);o&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new V("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new V("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),e.push(s)}return{name:this.name,layers:e}}}pu.className="Sequential";me(pu);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let kn=class extends sc{getConfig(){return{}}};class YR extends kn{apply(e,n=1){return BZ(e,n)}}YR.className="elu";me(YR);class JR extends kn{apply(e){return fA(e)}}JR.className="selu";me(JR);class ZR extends kn{apply(e){return ka(e)}}ZR.className="relu";me(ZR);class e2 extends kn{apply(e){return J(()=>uu(6,ka(e)))}}e2.className="relu6";me(e2);class t2 extends kn{apply(e){return e}}t2.className="linear";me(t2);class n2 extends kn{apply(e){return ec(e)}}n2.className="sigmoid";me(n2);class s2 extends kn{apply(e){return UZ(e)}}s2.className="hardSigmoid";me(s2);class o2 extends kn{apply(e){return Nd(e)}}o2.className="softplus";me(o2);class r2 extends kn{apply(e){return VZ(e)}}r2.className="softsign";me(r2);class i2 extends kn{apply(e){return Am(e)}}i2.className="tanh";me(i2);let I1=class extends kn{apply(e,n=-1){return kx(e,n)}};I1.className="softmax";me(I1);class a2 extends kn{apply(e,n=-1){return oA(e,n)}}a2.className="logSoftmax";me(a2);class l2 extends kn{apply(e){return J(()=>J(()=>{const n=Math.sqrt(2),s=W(.5,we(1,ZN(Fe(e,n))));return W(e,s)}))}}l2.className="gelu";me(l2);class c2 extends kn{apply(e){return J(()=>W(.5,W(e,we(1,Am(W(In(Fe(2,Math.PI)),we(e,W(.044715,ua(e,3)))))))))}}c2.className="gelu_new";me(c2);class u2 extends kn{apply(e){return J(()=>W(e,Am(Nd(e))))}}u2.className="mish";me(u2);class d2 extends kn{apply(e,n=1){return J(()=>W(ec(W(e,n)),e))}}d2.className="swish";me(d2);function Zr(t){return t.getClassName()}function sv(t,e={}){return Pd(t,Rs.getMap().classNameMap,e,"activation")}function ei(t){if(t==null){const e={};return e.className="linear",e.config={},sv(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},sv(e)}else return t instanceof kn?t:sv(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ste(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class h2 extends sc{}class f2 extends h2{constructor(e){super(),ste(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return J(()=>{let n=cn([1]);return this.hasL1&&(n=we(n,Le(W(this.l1,Tn(e))))),this.hasL2&&(n=we(n,Le(W(this.l2,Bd(e))))),X(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}f2.className="L1L2";me(f2);const GS={l1l2:"L1L2"};function vt(t){return d1(t)}function HS(t,e={}){return Pd(t,Rs.getMap().classNameMap,e,"regularizer")}function Nt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in GS?GS[t]:t,config:{}};return HS(n)}else return t instanceof h2?t:HS(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class p2 extends Qe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ue(e);let s=ka(e);return this.maxValue!=null&&(s=_s(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}p2.className="ReLU";me(p2);class m2 extends Qe{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Ue(e);return dx(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}m2.className="LeakyReLU";me(m2);class g2 extends Qe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Tt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Nt(e.alphaRegularizer),this.alphaConstraint=en(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new V(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=ot(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)s[o]=e[o];this.inputSpec=[new Jt({ndim:e.length,axes:s})],this.built=!0}call(e,n){return e=Ue(e),vx(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Rt(this.alphaInitializer),alphaRegularizer:vt(this.alphaRegularizer),alphaConstraint:Zt(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}g2.className="PReLU";me(g2);let v2=class extends Qe{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ge(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const s=Ue(e);return Om(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};v2.className="ELU";me(v2);class b2 extends Qe{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const s=Ue(e);return W(s,Te(Ss(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}b2.className="ThresholdedReLU";me(b2);class y2 extends Qe{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new I1().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return J(()=>{let s=Ue(e);const o=n.mask;if(o!=null){const r=W(Ve(vi(s.shape),Te(o,s.dtype)),lt(-1e9));s=we(s,r)}return this.axis instanceof Array?this.axis.length>1?Uo(Ve(s,rA(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}y2.className="Softmax";me(y2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gl(t,e,n){if(typeof t=="number")return fa(t,e);if(t.length!==e)throw new V(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let s=0;s<e;++s){const o=t[s];if(!LZ(o))throw new V(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function io(t,e,n,s,o=1){if(t==null)return t;const r=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-r+1,Math.floor((i+s-1)/s)}function ko(t,e,n,s){if(t==null)return null;if(s==="valid")t=t*e+Jr([n-e,0]);else if(s==="same")t=t*e;else throw new V(`Unsupport padding mode: ${s}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E1(t,e){return J(()=>(jt(e),e==="channelsFirst"?tt(t,[0,2,3,1]):t))}function x2(t,e){return J(()=>(jt(e),e==="channelsFirst"?tt(t,[0,2,3,4,1]):t))}function ote(t,e,n,s=1,o="valid",r,i=1){return J(()=>{if(r==null&&(r=fo()),jt(r),t.shape.length!==3)throw new V(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new V(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new V(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(r==="channelsFirst"&&(t=tt(t,[0,2,1])),o==="causal")throw new Ge("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=qN(t,e,s,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=bo(a,n)),a})}function KS(t,e,n,s=[1,1],o="valid",r,i,a=null){return J(()=>{if(r==null&&(r=fo()),jt(r),t.rank!==3&&t.rank!==4)throw new V(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new V(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=E1(t,r);if(o==="causal")throw new Ge("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=o7({x:l,filter:e,strides:s,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=tt(l,[0,3,1,2])),l})}function rte(t,e,n,s=[1,1,1],o="valid",r,i){return J(()=>{if(r==null&&(r=fo()),jt(r),t.rank!==4&&t.rank!==5)throw new V(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new V(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=x2(t,r);if(o==="causal")throw new Ge("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=sX(a,e,s,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=bo(a,n)),r==="channelsFirst"&&(a=tt(a,[0,4,1,2,3])),a})}class Hm extends Qe{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Hm.verifyArgs(n),this.rank=e,dn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ge(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=gl(n.kernelSize,e,"kernelSize"),this.strides=gl(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Is(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,jt(this.dataFormat),this.activation=ei(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Tt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=en(n.biasConstraint),this.biasRegularizer=Nt(n.biasRegularizer),this.activityRegularizer=Nt(n.activityRegularizer),this.dilationRate=gl(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new V(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new V(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new V(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Eo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!h1(e.kernelSize,"number",1,3))throw new V(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Zr(this.activation),useBias:this.useBias,biasInitializer:Rt(this.biasInitializer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),biasConstraint:Zt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class oc extends Hm{constructor(e,n){super(e,n),this.kernel=null,oc.verifyArgs(n),this.filters=n.filters,dn(this.filters,"filters"),this.kernelInitializer=Tt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=en(n.kernelConstraint),this.kernelRegularizer=Nt(n.kernelRegularizer)}build(e){e=ot(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V(`The channel dimension of the input should be defined. Found ${e[n]}`);const s=e[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s;const o=this.bias==null?null:this.bias.read(),r=gR(this.activation.getClassName());if(r!=null&&this.rank===2)s=KS(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=ote(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=KS(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=rte(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ge("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(e){e=ot(e);const n=[],s=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let r=0;r<s.length;++r){const i=io(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:Rt(this.kernelInitializer),kernelRegularizer:vt(this.kernelRegularizer),kernelConstraint:Zt(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new V(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class zd extends oc{constructor(e){super(2,e),zd.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!h1(e.kernelSize,"number",1,2))throw new V(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}zd.className="Conv2D";me(zd);class Wd extends oc{constructor(e){super(3,e),Wd.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new V(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Wd.className="Conv3D";me(Wd);class w2 extends zd{constructor(e){if(super(e),this.inputSpec=[new Jt({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new V(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ot(e),e.length!==4)throw new V("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jt({ndim:4,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{let s=Ue(e);if(s.shape.length!==4)throw new V(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],c=o[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=ko(l,h,u,this.padding),m=ko(c,f,d,this.padding),v=[r,p,m,this.filters];this.dataFormat!=="channelsLast"&&(s=tt(s,[0,2,3,1]));let g=XN(s,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=tt(g,[0,3,1,2])),this.bias!=null&&(g=bo(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=ot(e);const n=e.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[s]=this.filters,n[o]=ko(n[o],l,i,this.padding),n[r]=ko(n[r],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}w2.className="Conv2DTranspose";me(w2);class C2 extends Wd{constructor(e){if(super(e),this.inputSpec=[new Jt({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new V(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ot(e),e.length!==5)throw new V("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new V("The channel dimension of the inputs should be defined. Found `None`.");const s=e[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jt({ndim:5,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{let s=Ue(e);if(s.shape.length!==5)throw new V(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const c=o[l],u=o[i],d=o[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],v=this.strides[1],g=this.strides[2],b=ko(c,m,h,this.padding),x=ko(u,v,f,this.padding),y=ko(d,g,p,this.padding),w=[r,b,x,y,this.filters];this.dataFormat!=="channelsLast"&&(s=tt(s,[0,2,3,4,1]));let C=iX(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=tt(C,[0,4,1,2,3])),this.bias!==null&&(C=bo(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=ot(e);const n=e.slice();let s,o,r,i;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,i=4):(s=4,o=1,r=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[s]=this.filters,n[o]=ko(n[o],u,a,this.padding),n[r]=ko(n[r],d,l,this.padding),n[i]=ko(n[i],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}C2.className="Conv3DTranspose";me(C2);class _2 extends oc{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new V("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new V("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new V(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Tt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Nt(n.depthwiseRegularizer),this.depthwiseConstraint=en(n.depthwiseConstraint),this.pointwiseInitializer=Tt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Nt(n.pointwiseRegularizer),this.pointwiseConstraint=en(n.pointwiseConstraint)}build(e){if(e=ot(e),e.length<this.rank+2)throw new V(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new V(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const s=e[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Jt({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s;if(this.rank===1)throw new Ge("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=tt(e,[0,2,3,1])),s=pA(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=bo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=tt(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Rt(this.depthwiseInitializer),e.pointwiseInitializer=Rt(this.pointwiseInitializer),e.depthwiseRegularizer=vt(this.depthwiseRegularizer),e.pointwiseRegularizer=vt(this.pointwiseRegularizer),e.depthwiseConstraint=Zt(this.depthwiseConstraint),e.pointwiseConstraint=Zt(this.pointwiseConstraint),e}}_2.className="SeparableConv";class S2 extends _2{constructor(e){super(2,e)}}S2.className="SeparableConv2D";me(S2);class Km extends oc{constructor(e){super(1,e),Km.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!h1(e.kernelSize,"number",1,1))throw new V(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Km.className="Conv1D";me(Km);class I2 extends Qe{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return J(()=>{if(e=Ue(e),this.dataFormat==="channelsLast"){const s=wh(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return wh(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=wh(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return wh(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}I2.className="Cropping2D";me(I2);class E2 extends Qe{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jt(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,RZ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],s=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,s]}else{const n=e[1]==null?null:this.size[0]*e[1],s=e[2]==null?null:this.size[1]*e[2];return[e[0],n,s,e[3]]}}call(e,n){return J(()=>{let s=Ue(e);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=tt(s,[0,2,3,1]);const r=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?ir.resizeNearestNeighbor(s,[r,i]):ir.resizeBilinear(s,[r,i]);return tt(a,[0,3,1,2])}else{const r=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?ir.resizeNearestNeighbor(s,[r,i]):ir.resizeBilinear(s,[r,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}E2.className="UpSampling2D";me(E2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ite(t,e,n=[1,1],s="valid",o,r){return J(()=>{o==null&&(o=fo()),jt(o);let i=E1(t,o);if(t.rank!==4)throw new V(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new V(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=ax(i,e,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(i=tt(i,[0,3,1,2])),i})}class k2 extends Hm{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Tt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=en(e.depthwiseConstraint),this.depthwiseRegularizer=Nt(e.depthwiseRegularizer)}build(e){if(e=ot(e),e.length<4)throw new V(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new V(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const s=e[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{e=Ue(e);let s=ite(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=bo(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=ot(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=io(n,this.kernelSize[0],this.padding,this.strides[0]),i=io(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,r,i]:[e[0],r,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Rt(this.depthwiseInitializer),e.depthwiseRegularizer=vt(this.depthwiseRegularizer),e.depthwiseConstraint=Zt(this.depthwiseRegularizer),e}}k2.className="DepthwiseConv2D";me(k2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $2(t,e,n,s){if(Array.isArray(t)){if(e!=null||n!=null)throw new V("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=t.slice(t.length-s,t.length),t=t.slice(0,t.length-s)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function T2(t,e,n,s=!1,o,r,i=!1,a=!1){return J(()=>{const l=e.shape.length;if(l<3)throw new V(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(ho(2,l));e=tt(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Te(Te(o,"bool"),"float32"),o.rank===l-1&&(o=Gn(o,-1)),o=tt(o,c)),s&&(e=da(e,0),o!=null&&(o=da(o,0)));const u=[];let d,h=n;const f=e.shape[0],p=ha(e);let m;o!=null&&(m=ha(o));for(let g=0;g<f;++g){const b=p[g],x=J(()=>t(b,h));if(o==null)d=x[0],h=x[1];else{const y=J(()=>{const w=m[g],C=Ve(Ws(w),w),_=we(W(x[0],w),W(h[0],C)),S=h.map((I,E)=>we(W(x[1][E],w),W(I,C)));return{output:_,newStates:S}});d=y.output,h=y.newStates}a&&u.push(d)}let v;return a&&(v=fr(u,1)),[d,v,h]})}class yi extends Qe{constructor(e){super(e);let n;if(e.cell==null)throw new V("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new T1({cells:e.cell}):n=e.cell,n.stateSize==null)throw new V("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Jt({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ho(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Bb(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[e[0],e[1],s]:o=[e[0],s],this.returnState){const r=[];for(const i of n)r.push([e[0],i]);return[o].concat(r)}else return o}computeMask(e,n){return J(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<e;++s)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ge("Constants support is not implemented in RNN yet.");Bb(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,s=e.slice(2);this.inputSpec[0]=new Jt({shape:[n,null,...s]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!ct(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new V(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(i=>new Jt({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new Io("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new V("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>cn([s,o])):this.states_=[cn([s,this.cell.stateSize])];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>cn([s,o])):this.states_[0]=cn([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new V(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let o=0;o<this.states_.length;++o){const r=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[s,i];if(!ct(r.shape,a))throw new V(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>Oo(o.clone()))})}apply(e,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=$2(e,s,o,this.numConstants);e=r.inputs,s=r.initialState,o=r.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const c of s)this.stateSpec.push(new Jt({shape:c.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof zo){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;e=Ue(e),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new V(`RNN Layer has ${i} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},c=T2((p,m)=>{const v=this.cell.call([p].concat(m),a);return[v[0],v.slice(1)]},e,r,this.goBackwards,s,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,o);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return J(()=>{let n=cn(e.shape);return n=Le(n,[1,2]),n=Md(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?Pb(n,[1,s]):n):this.cell.stateSize>1?[Pb(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===yi.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),n)}static fromConfig(e,n,s={}){const o=n.cell,r=Mo(o,s);return new e(Object.assign(n,{cell:r}))}}yi.className="RNN";me(yi);class qm extends Qe{}class k1 extends qm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,dn(this.units,"units"),this.activation=ei(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=en(e.kernelConstraint),this.recurrentConstraint=en(e.recurrentConstraint),this.biasConstraint=en(e.biasConstraint),this.dropout=Pl([1,Jr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pl([1,Jr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ot(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new V(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ti({ones:()=>Ws(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ti({ones:()=>Ws(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=Po(W(e,i),this.kernel.read()):r=Po(e,this.kernel.read()),this.bias!=null&&(r=bo(r,this.bias.read())),a!=null&&(s=W(s,a));let l=we(r,Po(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zr(this.activation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Zt(this.kernelConstraint),recurrentConstraint:Zt(this.recurrentConstraint),biasConstraint:Zt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}k1.className="SimpleRNNCell";me(k1);class N2 extends yi{constructor(e){e.cell=new k1(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return new e(n)}}N2.className="SimpleRNN";me(N2);class $1 extends qm{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new V("GRUCell does not support reset_after parameter set to true.");this.units=e.units,dn(this.units,"units"),this.activation=ei(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ei(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=en(e.kernelConstraint),this.recurrentConstraint=en(e.recurrentConstraint),this.biasConstraint=en(e.biasConstraint),this.dropout=Pl([1,Jr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pl([1,Jr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ot(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new V(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ti({ones:()=>Ws(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ti({ones:()=>Ws(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=W(e,r[0]));let u=Po(e,this.kernel.read());this.useBias&&(u=bo(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,i[0]));const d=this.recurrentKernel.read(),[h,f]=bs(d,[2*this.units,this.units],d.rank-1),p=Po(o,h),[m,v,g]=bs(u,3,u.rank-1),[b,x]=bs(p,2,p.rank-1);a=this.recurrentActivation.apply(we(m,b)),l=this.recurrentActivation.apply(we(v,x));const y=Po(W(l,o),f);c=this.activation.apply(we(g,y));const w=we(W(a,o),W(we(1,Bt(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zr(this.activation),recurrentActivation:Zr(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Zt(this.kernelConstraint),recurrentConstraint:Zt(this.recurrentConstraint),biasConstraint:Zt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}$1.className="GRUCell";me($1);class A2 extends yi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new $1(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}A2.className="GRU";me(A2);class Xm extends qm{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,dn(this.units,"units"),this.activation=ei(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ei(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Tt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Nt(e.kernelRegularizer),this.recurrentRegularizer=Nt(e.recurrentRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.kernelConstraint=en(e.kernelConstraint),this.recurrentConstraint=en(e.recurrentConstraint),this.biasConstraint=en(e.biasConstraint),this.dropout=Pl([1,Jr([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Pl([1,Jr([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=ot(e);const s=e[e.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;o=new(n=class extends Ks{apply(l,c){const u=r.apply([i]),d=new p1().apply([i]),h=r.apply([i*2]);return NS(NS(u,d),h)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return J(()=>{const s=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new V(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ti({ones:()=>Ws(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ti({ones:()=>Ws(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=W(e,i[0]));let h=Po(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=W(o,a[0])),h=we(h,Po(o,this.recurrentKernel.read())),this.useBias&&(h=bo(h,this.bias.read()));const[f,p,m,v]=bs(h,4,h.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(p),u=we(W(c,r),W(l,this.activation.apply(m))),d=this.recurrentActivation.apply(v);const g=W(d,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Zr(this.activation),recurrentActivation:Zr(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),recurrentInitializer:Rt(this.recurrentInitializer),biasInitializer:Rt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:vt(this.kernelRegularizer),recurrentRegularizer:vt(this.recurrentRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Zt(this.kernelConstraint),recurrentConstraint:Zt(this.recurrentConstraint),biasConstraint:Zt(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Xm.className="LSTMCell";me(Xm);class R2 extends yi{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Xm(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}R2.className="LSTM";me(R2);class T1 extends qm{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return J(()=>{e=e;let s=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(s.splice(0,a.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=o[a],a===0?i=[e[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,n),r.push(i.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(e){Bb(e)&&(e=e[0]),e=e;let n;this.cells.forEach((s,o)=>{Qi(`RNNCell_${o}`,()=>{s.build(e),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,s={}){const o=[];for(const r of n.cells)o.push(Mo(r,s));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Vb(e)}setWeights(e){const n=[];for(const s of this.cells){const o=s.weights.length,r=e.splice(o);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],r[i]])}w1(n)}}T1.className="StackedRNNCells";me(T1);function ti(t){const{ones:e,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=t,i=()=>r!=null?r(e(),n):_R(e(),n),a=()=>Vd(i,e,s);return!o||o<=1?Oo(a().clone()):Array(o).fill(void 0).map(a).map(c=>Oo(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ate=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n};class D2 extends yi{constructor(e){if(e.unroll)throw new Ge("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ge("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Jt({ndim:5})]}call(e,n){return J(()=>{if(this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new V("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(e,{mask:s,training:o,initialState:r})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return J(()=>{const{stateSize:n}=this.cell,s=e.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],i=cn(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new Io("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new V("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>cn(r)):this.states_=[cn(r)];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>cn(r)):this.states_[0]=cn(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new V(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=r;if(!ct(l.shape,c))throw new V(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Oo(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=io(c,o[0],r,i[0],a[0]),h=io(u,o[1],r,i[1],a[1]);return[...e.slice(0,2),...l?[s,d,h]:[d,h,s]]}}D2.className="ConvRNN2D";class N1 extends Xm{constructor(e){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,dn(this.filters,"filters"),this.kernelSize=gl(s,2,"kernelSize"),this.kernelSize.forEach(l=>dn(l,"kernelSize")),this.strides=gl(o||1,2,"strides"),this.strides.forEach(l=>dn(l,"strides")),this.padding=r||"valid",Is(this.padding),this.dataFormat=i||"channelsLast",jt(this.dataFormat),this.dilationRate=gl(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>dn(l,"dilationRate"))}build(e){var n;e=ot(e);const s=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[s]==null)throw new V(`The channel dimension of the input should be defined. Found ${e[s]}`);const o=e[s],r=4,i=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Ks{apply(h,f){const p=c.apply([u]),m=vi([u]),v=c.apply([u*2]);return f1([p,m,v])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return J(()=>{if(e.length!==3)throw new V(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=n.training||!1,o=e[0],r=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ti({ones:()=>Ws(o),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ne,re,de)=>!re||!re[de]?ne:W(re[de],ne);let u=c(o,l,0),d=c(o,l,1),h=c(o,l,2),f=c(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ti({ones:()=>Ws(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(r,p,0),v=c(r,p,1),g=c(r,p,2),b=c(r,p,3);const x=3,[y,w,C,_]=bs(this.kernel.read(),a,x),[S,I,E,O]=this.useBias?bs(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,y,S,this.padding),d=this.inputConv(d,w,I,this.padding),h=this.inputConv(h,C,E,this.padding),f=this.inputConv(f,_,O,this.padding);const[A,P,z,G]=bs(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,A),v=this.recurrentConv(v,P),g=this.recurrentConv(g,z),b=this.recurrentConv(b,G);const M=this.recurrentActivation.apply(we(u,m)),R=this.recurrentActivation.apply(we(d,v)),D=we(W(R,i),W(M,this.activation.apply(we(h,g)))),j=W(this.recurrentActivation.apply(we(f,b)),this.activation.apply(D));return[j,j,D]})}getConfig(){const e=super.getConfig(),n=ate(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),s)}inputConv(e,n,s,o){const r=ca(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?bo(r,s,this.dataFormat):r}recurrentConv(e,n){return ca(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}N1.className="ConvLSTM2DCell";me(N1);class O2 extends D2{constructor(e){const n=new N1(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}O2.className="ConvLSTM2D";me(O2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class A1 extends Qe{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return Vd(()=>_R(s,this.rate,r,this.seed),()=>s,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}A1.className="Dropout";me(A1);class L2 extends A1{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}L2.className="SpatialDropout1D";me(L2);class F2 extends Qe{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,dn(this.units,"units"),this.activation=ei(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Tt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Tt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=en(e.kernelConstraint),this.biasConstraint=en(e.biasConstraint),this.kernelRegularizer=Nt(e.kernelRegularizer),this.biasRegularizer=Nt(e.biasRegularizer),this.activityRegularizer=Nt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=ot(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=ot(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),o=gR(this.activation.getClassName());let r;return o!=null?r=Po(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=Po(s,this.kernel.read()),this.bias!=null&&(r=bo(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const e={units:this.units,activation:Zr(this.activation),useBias:this.useBias,kernelInitializer:Rt(this.kernelInitializer),biasInitializer:Rt(this.biasInitializer),kernelRegularizer:vt(this.kernelRegularizer),biasRegularizer:vt(this.biasRegularizer),activityRegularizer:vt(this.activityRegularizer),kernelConstraint:Zt(this.kernelConstraint),biasConstraint:Zt(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}F2.className="Dense";me(F2);class P2 extends Qe{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ot(e);for(const n of e.slice(1))if(n==null)throw new V(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Gr(e,1)]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let s=Ue(e);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=tt(s,o)}return MZ(s)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}P2.className="Flatten";me(P2);class M2 extends Qe{constructor(e){super(e),this.supportsMasking=!0,this.activation=ei(e.activation)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return this.activation.apply(s)})}getConfig(){const e={activation:Zr(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}M2.className="Activation";me(M2);class B2 extends Qe{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return J(()=>(e=Ue(e),FZ(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}B2.className="RepeatVector";me(B2);class V2 extends Qe{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,i=null;for(let l=0;l<o.length;++l){const c=o[l];if(this.isUnknown(c))if(i===null)i=l;else throw new V("Can only specifiy one unknown dimension.");else r*=c}const a=Gr(e);if(i!==null){if(r===0||a%r!==0)throw new V(s);o[i]=a/r}else if(a!==r)throw new V(s);return o}computeOutputShape(e){let n=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return X(s,r)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}V2.className="Reshape";me(V2);class U2 extends Qe{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ho(1,e.dims.length+1);if(!ct(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Jt({ndim:this.dims.length+1})]}computeOutputShape(e){e=ot(e);const n=e.slice();return this.dims.forEach((s,o)=>{n[o+1]=e[s]}),n}call(e,n){return tt(Ue(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}U2.className="Permute";me(U2);class j2 extends Qe{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const s=Ue(e);return Nb(Tf(s,this.maskValue),-1)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e),i=Nb(Tf(s,this.maskValue),-1,!0);return W(s,Te(i,s.dtype))})}}j2.className="Masking";me(j2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z2 extends Qe{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(dt(e.inputLength))}this.inputDim=e.inputDim,dn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,dn(this.outputDim,"outputDim"),this.embeddingsInitializer=Tt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Nt(e.embeddingsRegularizer),this.activityRegularizer=Nt(e.activityRegularizer),this.embeddingsConstraint=en(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return J(()=>this.maskZero?(e=Ue(e),Tf(e,nt(e))):null)}computeOutputShape(e){if(e=ot(e),this.inputLength==null)return[...e,this.outputDim];const n=dt(this.inputLength);if(n.length!==e.length-1)throw new V(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],i=e[o+1];if(r!=null&&i!=null&&r!==i)throw new V(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);r==null&&(n[s]=i),s++}}return[e[0],...n,this.outputDim]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let s=Ue(e);s.dtype!=="int32"&&(s=Fo(s,"int32"));const o=CR(this.embeddings.read(),X(s,[s.size]));return X(o,ot(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Rt(this.embeddingsInitializer),embeddingsRegularizer:vt(this.embeddingsRegularizer),activityRegularizer:vt(this.activityRegularizer),embeddingsConstraint:Zt(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}z2.className="Embedding";me(z2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Na extends Qe{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ge}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const s=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const r=e[e.length-n.length+o],i=n[o];if(r==null||i==null||r<0||i<0)s.push(null);else if(r===1)s.push(i);else if(i===1)s.push(r);else{if(r!==i)throw new V("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));s.push(r)}}return s}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[ot(e)]),e=e,e.length<2)throw new V(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const r of e)r!=null&&r[0]!==null&&n.push(r[0]);if(n=Wr(n),n.length>1)throw new V(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let s=e[0]==null?null:e[0].slice(1);for(let r=1;r<e.length;++r){const i=e[r]==null?null:e[r].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const o=e.map(r=>r.length);e.indexOf(null)===-1&&Wr(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return J(()=>{if(e=e,this.reshapeRequired){const s=[],o=e.map(r=>r.rank);if(o.indexOf(null)===-1){const r=Jr(o);for(let i of e){const a=i.rank;for(let l=0;l<r-a;++l)i=Md(i,1);s.push(i)}return this.mergeFunction(s)}else{let r=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=X(l,[d].concat(Gr(u.slice(1))));f=tt(f,[1,0]),f=X(f,h),s.push(f),r=!0}else if(c>1){const u=ho(1,c).concat([0]);s.push(tt(l,u)),r=!0}else s.push(l)}let i=this.mergeFunction(s);const a=i.rank;if(r){if(a==null){const l=i.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));i=X(tt(X(i,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(ho(0,a-1));i=tt(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const r=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of e)o!=null&&o[0]!==null&&s.push(o[0]);return s=Wr(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(e,n){return J(()=>{if(n==null)return null;if(!Array.isArray(n))throw new V("`mask` should be an Array");if(!Array.isArray(e))throw new V("`inputs` should be an Array");if(n.length!==e.length)throw new V(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Gn(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=hr(s,n[o]);return s})}}class W2 extends Na{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=we(n,e[s]);return n})}}W2.className="Add";me(W2);class G2 extends Na{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=W(n,e[s]);return n})}}G2.className="Multiply";me(G2);class H2 extends Na{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let s=1;s<e.length;++s)n=we(n,e[s]);return W(1/e.length,n)})}}H2.className="Average";me(H2);class K2 extends Na{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=gi(n,e[s]);return n})}}K2.className="Maximum";me(K2);class q2 extends Na{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let s=1;s<e.length;++s)n=uu(n,e[s]);return n})}}q2.className="Minimum";me(q2);class X2 extends Na{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new V("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<e.length;++o){const r=e[o].slice();r.splice(this.axis,1);let i=!1;for(const a of s)if(ct(a,r)){i=!0;break}i||s.push(r)}if(s.length>1)throw new V("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return J(()=>f1(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new V("A `Concatenate` layer should be called on a list of inputs.");const n=e,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new V("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new V("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new V(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return J(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push(Te(Ws(e[i]),"bool")):n[i].rank<e[i].rank?o.push(Gn(n[i],-1)):o.push(n[i]);const r=Xn(o,this.axis);return KN(r,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}X2.className="Concatenate";me(X2);function Cc(t,e){for(;t<0;)t+=e;return t}function lte(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ge("batchDot is not implemented for tensors of 4D or higher rank yet");if($(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),$(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ge("batchDot is not implemented for complex64-type Tensors yet.");const s=t.shape.length,o=e.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return J(()=>{let i;if(s>o){i=s-o;const l=[];for(let c=0;c<i;++c)l.push(1);e=X(e,e.shape.concat(l))}else if(o>s){i=o-s;const l=[];for(let c=0;c<i;++c)l.push(1);t=X(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)r[0]===r[1]?a=Le(W(t,e),r[0]):a=Le(W(tt(t,[1,0]),e),r[1]);else{const l=r[0]!==t.shape.length-1,c=r[1]===e.shape.length-1;a=it(t,e,l,c)}if(i>0){let l;s>o?l=s+o-3:l=s-1;const c=[];for(let u=l;u<l+i;++u)c.push(u);a=Rd(a,c)}return a.shape.length===1&&(a=Gn(a,1)),a})}class Q2 extends Na{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){$(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],s=e[1];if(n.length>3||s.length>3)throw new Ge("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new V(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new V(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],s=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,i)=>Cc(r,e[i].shape.length)):o=[Cc(this.axes,n.shape.length),Cc(this.axes,s.shape.length)],this.normalize&&(n=Ff(n,o[0]),s=Ff(s,o[1])),lte(n,s,o)}interpretAxes(e,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[Cc(this.axes,e.length),Cc(this.axes,n.length)],s}computeOutputShape(e){$(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),s=e[1].slice();if(n.length>3||s.length>3)throw new Ge("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}Q2.className="Dot";me(Q2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Y2 extends Qe{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return Vd(()=>we(jm(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}Y2.className="GaussianNoise";me(Y2);class J2 extends Qe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const s=Ue(e);return this.rate>0&&this.rate<1?Vd(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return W(s,jm(s.shape,1,r))},()=>s,n.training||!1):s})}}J2.className="GaussianDropout";me(J2);class Z2 extends Qe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ue(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return Vd(()=>{const r=Ue(e),l=-1.6732632423543772*1.0507009873554805;let c=Ia(Ad(s),this.rate);c=Fo(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=we(W(r,c),W(we(c,-1),l));return we(W(h,u),d)},()=>Ue(e),n.training||!1)}return e})}}Z2.className="AlphaDropout";me(Z2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mu(t,e,n,s,o,r=.001){let i;if(t.rank===2)i=D5(t,e,n,s,o,r);else if(t.rank===3)i=L5(t,e,n,s,o,r);else if(t.rank===4)i=P5(t,e,n,s,o,r);else throw new Ge(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function cte(t,e,n,s,o=.001){return J(()=>{const r=px(t,s),i=r.mean,a=r.variance;return[mu(t,i,a,n,e,o),i,a]})}function ute(t,e,n,s,o=.001){return J(()=>{const r=px(t,s),i=r.mean,a=r.variance,l=[];for(const p of ho(0,t.rank))s.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=X(i,l),u=X(a,l),d=e==null?null:X(e,l),h=n==null?null:X(n,l);return[mu(t,c,u,h,d,o),i,a]})}function dte(t,e,n,s,o=.001){return ct(s.slice().sort(),ho(0,t.rank-1))?cte(t,e,n,s,o):ute(t,e,n,s,o)}class eD extends Qe{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Tt(e.betaInitializer||"zeros"),this.gammaInitializer=Tt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Tt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Tt(e.movingVarianceInitializer||"ones"),this.betaConstraint=en(e.betaConstraint),this.gammaConstraint=en(e.gammaConstraint),this.betaRegularizer=Nt(e.betaRegularizer),this.gammaRegularizer=Nt(e.gammaRegularizer)}build(e){e=ot(e);const n=this.axis>=0?this.axis:this.axis+e.length,s=e[n];if(s==null)throw new V(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Jt({ndim:e.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return J(()=>{const s=n.training==null?!1:n.training,o=Ue(e),r=o.shape,i=r.length,a=ho(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const c=fa(1,i);c[l]=r[l];const u=a.slice();u.sort();const d=!ct(u,ho(0,i).slice(0,i-1)),h=()=>{if(d){const b=X(this.movingMean.read(),c),x=X(this.movingVariance.read(),c),y=this.center?X(this.beta.read(),c):null,w=this.scale?X(this.gamma.read(),c):null;return mu(o,b,x,y,w,this.epsilon)}else return mu(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return h();const[f,p,m]=dte(o,this.gamma.read(),this.beta.read(),a,this.epsilon),v=(b,x,y)=>{J(()=>{const w=1-y,C=b.read(),_=W(Ve(C,x),w);b.write(Ve(C,_))})};return(()=>{v(this.movingMean,p,this.momentum),v(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rt(this.betaInitializer),gammaInitializer:Rt(this.gammaInitializer),movingMeanInitializer:Rt(this.movingMeanInitializer),movingVarianceInitializer:Rt(this.movingVarianceInitializer),betaRegularizer:vt(this.betaRegularizer),gammaRegularizer:vt(this.gammaRegularizer),betaConstraint:Zt(this.betaConstraint),gammaConstraint:Zt(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}eD.className="BatchNormalization";me(eD);class tD extends Qe{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Tt(e.betaInitializer||"zeros"),this.gammaInitializer=Tt(e.gammaInitializer||"ones"),this.betaRegularizer=Nt(e.betaRegularizer),this.gammaRegularizer=Nt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=ot(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==Wr(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>e[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const s=Ue(e),o=s.shape,r=o.length;return J(()=>{let{mean:a,variance:l}=px(s,this.axis,!0);const c=fa(1,r);for(const m of this.axis)c[m]=o[m];const u=m=>m!=null&&m.shape.length!==r?X(m,c):m;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<r;++m)this.axis.indexOf(m)!==-1?(f.push(o[m]),p.push(1)):(f.push(1),p.push(o[m]));return a=to(a,f),l=to(l,f),d!=null&&(d=to(d,p)),h!=null&&(h=to(h,p)),mu(s,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rt(this.betaInitializer),gammaInitializer:Rt(this.gammaInitializer),betaRegularizer:vt(this.betaRegularizer),gammaRegularizer:vt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}tD.className="LayerNormalization";me(tD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hte(t,e,n){return J(()=>{if(t.rank!==4)throw new V(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new V("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=fo()),n!=="channelsLast"&&n!=="channelsFirst")throw new V(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],e[0],e[1]]:s=[[0,0],e[0],e[1],[0,0]],mx(t,s)})}class nD extends Qe{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?fo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new V(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,s;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new V(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new V(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[n,s]}this.inputSpec=[new Jt({ndim:4})]}computeOutputShape(e){e=ot(e);let n,s;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?s=e[3]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],e[1],n,s]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?s=e[2]+this.padding[1][0]+this.padding[1][1]:s=null,[e[0],n,s,e[3]])}call(e,n){return J(()=>hte(Ue(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}nD.className="ZeroPadding2D";me(nD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qm(t,e,n,s,o,r){return J(()=>{jt(o),bR(r),Is(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=fo()),r==null&&(r="max"),t=E1(t,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=fx(t,e,n,a):i=sx(t,e,n,a),o==="channelsFirst"&&(i=tt(i,[0,3,1,2])),i})}function sD(t,e,n,s,o,r){return J(()=>{jt(o),bR(r),Is(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=fo()),r==null&&(r="max"),t=x2(t,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=wQ(t,e,n,a):i=_5(t,e,n,a),o==="channelsFirst"&&(i=tt(i,[0,4,1,2,3])),i})}class oD extends Qe{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new V(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(dn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new V(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);dn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Is(this.padding),this.inputSpec=[new Jt({ndim:3})]}computeOutputShape(e){e=ot(e);const n=io(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return J(()=>{this.invokeCallHook(e,n),e=Md(Ue(e),2);const s=this.poolingFunction(Ue(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Rd(s,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class rD extends oD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),Qm(e,n,s,o,r,"max")}}rD.className="MaxPooling1D";me(rD);class iD extends oD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),Qm(e,n,s,o,r,"avg")}}iD.className="AveragePooling1D";me(iD);class aD extends Qe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new V(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];dn(this.poolSize,"poolSize"),dn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jt(this.dataFormat),Is(this.padding),this.inputSpec=[new Jt({ndim:4})]}computeOutputShape(e){e=ot(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=io(n,this.poolSize[0],this.padding,this.strides[0]),s=io(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s]:[e[0],n,s,e[3]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class lD extends aD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),Qm(e,n,s,o,r,"max")}}lD.className="MaxPooling2D";me(lD);class cD extends aD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),Qm(e,n,s,o,r,"avg")}}cD.className="AveragePooling2D";me(cD);class uD extends Qe{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new V(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];dn(this.poolSize,"poolSize"),dn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jt(this.dataFormat),Is(this.padding),this.inputSpec=[new Jt({ndim:5})]}computeOutputShape(e){e=ot(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],s=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=io(n,this.poolSize[0],this.padding,this.strides[0]),s=io(s,this.poolSize[1],this.padding,this.strides[1]),o=io(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,s,o]:[e[0],n,s,o,e[4]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class dD extends uD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),sD(e,n,s,o,r,"max")}}dD.className="MaxPooling3D";me(dD);class hD extends uD{constructor(e){super(e)}poolingFunction(e,n,s,o,r){return jt(r),Is(o),sD(e,n,s,o,r,"avg")}}hD.className="AveragePooling3D";me(hD);class fD extends Qe{constructor(e){super(e),this.inputSpec=[new Jt({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ge}}class pD extends fD{constructor(e){super(e||{})}call(e,n){return J(()=>{const s=Ue(e);return Wt(s,1)})}}pD.className="GlobalAveragePooling1D";me(pD);class mD extends fD{constructor(e){super(e||{})}call(e,n){return J(()=>{const s=Ue(e);return ro(s,1)})}}mD.className="GlobalMaxPooling1D";me(mD);class gD extends Qe{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jt(this.dataFormat),this.inputSpec=[new Jt({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ge}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class vD extends gD{call(e,n){return J(()=>{const s=Ue(e);return this.dataFormat==="channelsLast"?Wt(s,[1,2]):Wt(s,[2,3])})}}vD.className="GlobalAveragePooling2D";me(vD);class bD extends gD{call(e,n){return J(()=>{const s=Ue(e);return this.dataFormat==="channelsLast"?ro(s,[1,2]):ro(s,[2,3])})}}bD.className="GlobalMaxPooling2D";me(bD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yD extends Qe{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,s={}){const o=n.layer,r=Mo(o,s);delete n.layer;const i={layer:r};return Object.assign(i,n),new e(i)}}class xD extends yD{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=ot(e),e.length<3)throw new V(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=ot(e);const n=[e[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(n),o=e[1];return[s[0],o].concat(s.slice(1))}call(e,n){return J(()=>(e=Ue(e),T2((i,a)=>[Ue(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}xD.className="TimeDistributed";me(xD);function fte(t){Ta(AZ,"BidirectionalMergeMode",t)}const pte="concat";class wD extends yD{constructor(e){super(e);const n=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=n,this.forwardLayer=Mo(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Mo(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?pte:e.mergeMode,fte(this.mergeMode),e.weights)throw new Ge("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,s=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):Hn(o)}apply(e,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=$2(e,s,o,this.numConstants);if(e=r.inputs,s=r.initialState,o=r.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(s==null||s.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(s!=null){const c=s.length;if(c%2>0)throw new V("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const u=s.map(d=>new Jt({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(o!=null)throw new Ge("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof zo;for(const c of i)if(c instanceof zo!==l)throw new V("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(e,n),r=this.backwardLayer.call(e,n);else{const l=s.slice(0,s.length/2),c=s.slice(s.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=da(r,1));let a;return this.mergeMode==="concat"?a=f1([o,r]):this.mergeMode==="sum"?a=we(o,r):this.mergeMode==="ave"?a=W(.5,we(o,r)):this.mergeMode==="mul"?a=W(o,r):this.mergeMode==null&&(a=[o,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Qi(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Qi(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const s=Mo(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ge("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new e(o)}}wD.className="Bidirectional";me(wD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class CD extends Qe{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>(e=Ue(e),e.dtype!=="float32"&&(e=Fo(e,"float32")),we(W(e,this.scale),this.offset)))}}CD.className="Rescaling";me(CD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:mte,cropAndResize:gte}=ir;class _D extends Qe{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,s,o,r,i,a,l){return J(()=>{let c,u=!1;const d=n/i,h=s/a,f=(o+n)/i,p=(r+s)/a,m=[d,h,f,p],v=[];e.rank===3?(u=!0,c=fr([e])):c=e;for(let w=0;w<c.shape[0];w++)v.push(m);const g=Wc(v,[v.length,4]),b=du(0,v.length,1,"int32"),y=gte(c,g,b,[o,r],"nearest");return Fo(u?Ue(ha(y)):y,l)})}upsize(e,n,s,o){return J(()=>{const r=mte(e,[n,s]);return Fo(r,o)})}call(e,n){return J(()=>{const s=Ue(e),o=s.dtype,r=s.shape,i=r[r.length-3],a=r[r.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(s,l,c,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=ot(e);const n=e.length-3,s=e.length-2;return e[n]=this.height,e[s]=this.width,e}}_D.className="CenterCrop";me(_D);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vte(t,e,n,s){let o=Ue(t);if(o.dtype!=="int32"&&(o=Fo(o,"int32")),e==="int")return o;const r=o.shape;if(o.rank===0&&(o=Gn(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Gn(o,-1)),o.rank>2)throw new V(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${r} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let l;if(typeof s<"u"&&e==="count"?l=fS(a,s,n,i):l=fS(a,[],n,i),e!=="tfIdf")return l;if(s)return W(l,s);throw new V("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class SD extends Qe{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=ot(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return J(()=>{e=Ue(e),e.dtype!=="int32"&&(e=Fo(e,"int32"));let s;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new V(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);s=Ue(n.countWeights)}const o=ro(e),r=kf(e),i=Ss(this.numTokens,o).bufferSync().get(0),a=Ia(r,0).bufferSync().get(0);if(!(i&&a))throw new V(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return vte(e,this.outputMode,this.numTokens,s)})}}SD.className="CategoryEncoding";me(SD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bte=["bilinear","nearest"],qS=new Set(bte);class ID extends Qe{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(qS.has(e.interpolation))this.interpolation=e.interpolation;else throw new V(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=ot(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return ir.resizeBilinear(e,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ir.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...qS]} are supported`)})}}ID.className="Resizing";me(ID);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ED{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}ED.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kD extends Qe{constructor(e){super(e),this.randomGenerator=new ED(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}kD.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yte=["bilinear","nearest"],XS=new Set(yte);class $D extends kD{constructor(e){super(e);const{factor:n,interpolation:s="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new V(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new V(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new V(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(XS.has(s))this.interpolation=s;else throw new V(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=ot(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return J(()=>{const s=Ue(e);this.imgHeight=s.shape[s.shape.length-3];const o=s.shape[s.shape.length-2];this.widthFactor=Ad([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*o;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return ir.resizeBilinear(e,i);case"nearest":return ir.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...XS]} are supported`)}})}}$D.className="RandomWidth";me($D);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xte=te();xte.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var QS;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(QS||(QS={}));var YS;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(YS||(YS={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var JS;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(JS||(JS={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&$(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wte=CA;class Ym extends r0{nextDataId(){return Ym.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new zT(this,Co())}write(e,n,s){this.firstUse&&(this.firstUse=!1,te().get("IS_NODE")&&gs(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:s,refCount:1}),o}makeTensorInfo(e,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Du(s[0])){const r=s.map(i=>zr(i));o=this.write(r,e,n)}else o=this.write(s,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,s,o,r){this.data.set(e,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:s}=this.data.get(e);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return pr(o,r)}return kq(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(o=>Yr(o));return qe(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(e.shape,e.dtype,n)}makeOutput(e,n,s){return Co().makeTensorFromTensorInfo(this.makeTensorInfo(n,s,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=zn();return e(),{kernelMs:zn()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ae([e],"where");const n=this.readSync(e.dataId);return wte(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Ym.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TD(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const Cte=t=>{const{x:e}=t.inputs,n=t.backend;Ae(e,"abs");let s=new Float32Array(le(e.shape));const o=n.data.get(e.dataId).values;return s=TD(o),n.makeOutput(s,e.shape,e.dtype)},_te={kernelName:$p,backendName:"cpu",kernelFunc:Cte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zt(t){return(e,n,s,o,r)=>{const i=We(e,n),a=i.length,l=Oe(i),c=le(i),u=_n(r,c),d=e.length,h=n.length,f=Oe(e),p=Oe(n),m=Ll(e,i),v=Ll(n,i);if(m.length+v.length===0)for(let g=0;g<u.length;++g)u[g]=t(s[g%s.length],o[g%o.length]);else for(let g=0;g<u.length;++g){const b=Jl(g,a,l),x=b.slice(-d);m.forEach(_=>x[_]=0);const y=Do(x,d,f),w=b.slice(-h);v.forEach(_=>w[_]=0);const C=Do(w,h,p);u[g]=t(s[y],o[C])}return[u,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function os(t){const{inputs:e,backend:n}=t,{real:s,imag:o}=e,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const Ste={kernelName:b0,backendName:"cpu",kernelFunc:os};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e,n="float32"){if(n==="complex64"){const o=jf(t,e,"float32"),r=jf(t,e,"float32");return os({inputs:{real:o,imag:r},backend:t})}const s=Sn(le(e),n);return t.makeTensorInfo(e,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wo(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Ite={kernelName:ed,backendName:"cpu",kernelFunc:Wo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const Ete={kernelName:j0,backendName:"cpu",kernelFunc:pa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ND(t,e,n,s){if(s==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(s==="bool"){const o=Sa([0],n),[r,i]=zt((a,l)=>a!==l?1:0)(e,[],t,o,"bool");return[i,"bool",r]}throw new Error(`Error in Cast: failed to cast ${n} to ${s}`)}function ni(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return Wo({inputs:{x:o},backend:n});const u=jf(n,o.shape,o.dtype),d=ni({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),h=os({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(o.dtype==="complex64"){const u=pa({inputs:{input:o},backend:n}),d=ni({inputs:{x:u},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(u),d}if(!HT(o.dtype,r)){const u=Wo({inputs:{x:o},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:r}}const i=n.data.get(o.dataId).values,[a,l,c]=ND(i,o.shape,o.dtype,r);return n.makeTensorInfo(a,l,c)}const kte={kernelName:Uu,backendName:"cpu",kernelFunc:ni};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sn(t,e,n,s){return n==null?({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;Ae([i,a],t);const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=i.dtype==="string"?mr(c):c,h=i.dtype==="string"?mr(u):u,f=s||i.dtype,[p,m]=e(i.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const c=ni({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=ni({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(m.dataId),g=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,x=l.data.get(g.dataId).values,y=l.data.get(b.dataId).values,[w,C,_]=n(i.shape,a.shape,f,p,x,y),S=l.makeTensorInfo(_,"float32",w),I=l.makeTensorInfo(_,"float32",C),E=os({inputs:{real:S,imag:I},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(I),E}else{const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=s||i.dtype,[h,f]=e(i.shape,a.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function R1(t){return(e,n,s,o,r,i)=>{const a=We(e,n),l=le(a),c=a.length,u=Oe(a),d=_n("float32",l),h=_n("float32",l),f=Ll(e,a),p=Ll(n,a),m=pr(s,o),v=pr(r,i),g=e.length,b=Oe(e),x=n.length,y=Oe(n);if(f.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%m.length,_=w%v.length,S=t(m[C*2],m[C*2+1],v[_*2],v[_*2+1]);d[w]=S.real,h[w]=S.imag}else for(let w=0;w<d.length;w++){const C=Jl(w,c,u),_=C.slice(-g);f.forEach(A=>_[A]=0);const S=Do(_,g,b),I=C.slice(-x);p.forEach(A=>I[A]=0);const E=Do(I,x,y),O=t(m[S*2],m[S*2+1],v[E*2],v[E*2+1]);d[w]=O.real,h[w]=O.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AD=zt((t,e)=>t+e),$te=R1((t,e,n,s)=>({real:t+n,imag:e+s})),Ml=sn(Zl,AD,$te),Tte={kernelName:Zl,backendName:"cpu",kernelFunc:Ml};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D1(t,e,n,s,o){const r=le(s),i=Sn(o,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(r>0?i[l]+=e[a]:i[l]+=1)}return i}function RD(t,e,n,s=!1){const o=t.shape[0],r=t.shape[1],i=qe([o,n],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<r;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(s?i.set(1,a,c):e.size>0?i.set(i.get(a,c)+e.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DD=zt((t,e)=>t&e),Nte=sn(v0,DD),Ate={kernelName:v0,backendName:"cpu",kernelFunc:Nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ho(t){return(e,n,s)=>{const o=Mt(n,e.length);for(let r=0;r<e.length;++r)o[r]=t(e[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ft(t,e,n){const s=Ho(e);return xi(t,s,n)}function xi(t,e,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;Ae(i,t);const a=r,l=a.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=mr(l)}else c=l;const u=n||i.dtype,d=e(c,u,o);return a.makeTensorInfo(i.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=Ho(t=>Math.ceil(t)),Rte=xi(ju,OD),Dte={kernelName:ju,backendName:"cpu",kernelFunc:Rte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LD(t,e,n,s){const o=Mt(n,le(e));if(s&&n!=="string"){let r=0;t.forEach(i=>{const a=le(i.shape);o.set(i.vals,r),r+=a})}else{let r=0;t.forEach(i=>{const a=n==="string"?mr(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const u=c*e[1]+r;for(let d=0;d<i.shape[1];++d)o[u+d]=a[l++]}r+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FD=zt((t,e)=>t===e?1:0),PD=sn(zp,FD,null,"bool"),Ote={kernelName:zp,backendName:"cpu",kernelFunc:PD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MD=Ho(t=>Math.exp(t)),BD=xi(Xu,MD,"float32"),Lte={kernelName:Xu,backendName:"cpu",kernelFunc:BD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD=Ho(t=>Math.expm1(t)),Fte=xi(Qu,VD),Pte={kernelName:Qu,backendName:"cpu",kernelFunc:Fte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD=Ho(t=>Math.floor(t)),Mte=xi(Yu,UD),Bte={kernelName:Yu,backendName:"cpu",kernelFunc:Mte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jD=zt((t,e)=>Math.floor(t/e)),Vte=sn(Ju,jD,null,"int32"),Ute={kernelName:Ju,backendName:"cpu",kernelFunc:Vte};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zD(t,e,n,s,o,r,i,a,l){const c=qe([s,r],n);for(let u=0;u<s;u++){const d=[];let h=0;for(let f=0;f<o;f++){const p=t[u*o+f];h+=p*i[f],d.push(p)}if(h<0||h>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<r;f++)c.values[u*r+f]=e.get(...e.indexToLoc(h*r+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WD(t,e,n){const s=qe(n,t.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),a=i[0],l=i[2],c=e.locToIndex([a,l]);i[2]=e.values[c];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(s.values[o]=t.values[u])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GD=zt((t,e)=>t>e?1:0),jte=sn(Kp,GD,null,"bool"),zte={kernelName:Kp,backendName:"cpu",kernelFunc:jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HD=zt((t,e)=>t>=e?1:0),Wte=sn(Zu,HD,null,"bool"),Gte={kernelName:Zu,backendName:"cpu",kernelFunc:Wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KD=zt((t,e)=>t<e?1:0),Hte=sn(Xp,KD,null,"bool"),Kte={kernelName:Xp,backendName:"cpu",kernelFunc:Hte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qD=zt((t,e)=>t<=e?1:0),qte=sn(Qp,qD,null,"bool"),Xte={kernelName:Qp,backendName:"cpu",kernelFunc:qte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XD(t,e,n){const s=(e-t)/(n-1),o=Sn(n,"float32");o[0]=t;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QD=Ho(t=>Math.log(t)),Qte=xi(od,QD),Yte={kernelName:od,backendName:"cpu",kernelFunc:Qte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YD(t,e,n,s){const o=_n(s,le(n));for(let r=0;r<o.length;++r){const i=r*e;let a=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>a)&&(a=c)}o[r]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JD=zt((t,e)=>Math.max(t,e)),Jte=sn(id,JD),Zte={kernelName:id,backendName:"cpu",kernelFunc:Jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZD=zt((t,e)=>Math.min(t,e)),ene=sn(ad,ZD),tne={kernelName:ad,backendName:"cpu",kernelFunc:ene};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1=zt((t,e)=>t*e),nne=R1((t,e,n,s)=>({real:t*n-e*s,imag:t*s+e*n})),Jm=sn(cd,O1,nne),sne={kernelName:cd,backendName:"cpu",kernelFunc:Jm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eO(t,e,n){const s=hi(-1,n);return O1([],e,s,t,n)}function one(t){const{inputs:e,backend:n}=t,{x:s}=e;Ae(s,"neg");const o=n.data.get(s.dataId).values,[r,i]=eO(o,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,r)}const rne={kernelName:am,backendName:"cpu",kernelFunc:one};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tO=zt((t,e)=>t!==e?1:0),ine=sn(lm,tO,null,"bool"),ane={kernelName:lm,backendName:"cpu",kernelFunc:ine};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1(t,e,n,s,o){const r=e.length,i=le(e),a=Oe(e),l=Oe(o),c=_n(n,le(o));for(let u=0;u<i;++u){const d=Jl(u,r,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[s[p]];const f=Do(h,r,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t){const{inputs:e,attrs:n,backend:s}=t,{x:o}=e,{perm:r}=n;Ae(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[r[d]];const l=s.data.get(o.dataId).values,c=L1(l,o.shape,o.dtype,r,a);return{dataId:s.write(c,a,o.dtype),shape:a,dtype:o.dtype}}const lne={kernelName:fl,backendName:"cpu",kernelFunc:Jn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nO(t,e,n,s){const[o,r]=pn(t,s),i=us(e,"int32"),a=Sn(le(o),i),l=le(r);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];a[c]=d}return{outVals:a,outShape:o,outDtype:i}}function cne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ae(o,"prod");const a=o.shape.length,l=Xe(r,o.shape),c=Dt(l,a);let u=l,d=o;const h=[];c!=null&&(d=Jn({inputs:{x:o},backend:n,attrs:{perm:c}}),h.push(d),u=Ut(u.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:v}=nO(d.shape,d.dtype,f,u);let g=m;return i&&(g=Kt(m,l)),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(g,v,p)}const une={kernelName:pm,backendName:"cpu",kernelFunc:cne};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(t,e,n){t.forEach((s,o)=>{if(s<0||s>=n){const r=Jl(o,e.length,Oe(e)).join(",");throw new Error(`indices[${r}] = ${s} is not in [0, ${n})`)}})}function hne(t,e){for(let n=0;n<t.length;++n){const s=t[n],o=n===t.length-1?e:t[n+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>o)throw new Error("Ragged splits must not point past values");for(let r=1;r<s.length;++r)if(s[r-1]>s[r])throw new Error("Ragged splits must be sorted in ascending order")}}function fne(t,e,n,s){const o=[];let r=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);hne(n,s);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],v=m[m.length-1]-f[u];for(let g=u;g<d;++g)a[p].push(f[g+1]+v)}u=f[u],d=f[d]}d!==u&&(o.push([u,d]),r+=d-u)}return{outSplits:a,valueSlices:o,numValues:r}}function pne(t){const e=[];for(let n=0;n<t.length;++n){const s=t[n].length,o=Mt("int32",s);e.push(o),t[n].forEach((r,i)=>o[i]=r)}return e}function ZS(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let s=e;s<t.length;s++)n[e-1]*=t[s];return n}function mne(t,e,n,s,o,r){const i=ZS(e,2)[1],a=ZS(r,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<s;++d)o[l*a+d]=t[u*i+d];++l}}function gne(t,e,n,s,o){const r=e.slice();r[0]=o;const i=Mt(n,le(r)),a=t.length,l=a===0?0:a/e[0];return mne(t,e,s,l,i,r),[i,r]}function sO(t,e,n,s,o,r,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(dne(r,i,l),s.length===0)throw new Error("params.rank must be nonzero");const c=s[0],{outSplits:u,valueSlices:d,numValues:h}=fne(r,i,t,c),f=pne(u),p=gne(n,s,o,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eI=2147483647;function oO(t,e,n,s,o,r,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=o.length===0,c=i.length===0,u=[];a||u.push(e[0]),l||u.push(o[0]),c||u.push(i[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=Mt("int32",d+1);h[0]=0;for(let v=0;v<d;++v){const g=a?t[0]:t[v],b=l?s[0]:s[v],x=c?r[0]:r[v];if(x===0)throw new Error("Requires delta != 0");let y;if(x>0&&b<g||x<0&&b>g)y=0;else if(y=Math.ceil(Math.abs((b-g)/x)),y>eI)throw new Error(`Requires ((limit - start) / delta) <= ${eI}`);h[v+1]=h[v]+y}const f=h[d],p=Mt(n,f);let m=0;for(let v=0;v<d;++v){const g=h[v+1]-h[v];let b=a?t[0]:t[v];const x=c?r[0]:r[v];for(let y=0;y<g;++y)p[m++]=b,b+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ts=Zs;class zf{constructor(e,n,s,o,r,i,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=s,this.valuesShape=o,this.valuesDType=r,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=zA(u),this.raggedRank=WA(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ts.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ts.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ts.VALUE_ROWIDS:return zf.getMaxWidthValueRowID(n);case Ts.ROW_SPLITS:return zf.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ts[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let s=0;for(let o=0;o<n-1;++o){const r=e[o+1]-e[o];r>s&&(s=r)}return s}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let s=0,o=e[0],r=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,r=Math.max(i-s,r),s=i)}return Math.max(n-s,r)}tensorShapeFromTensor(e,n,s=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return nI(e,s)}calculateOutputSize(e){const n=this.valuesShape,s=this.defaultValueShape;GA(s,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=jA(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,s){const o=Math.min(e,s),r=[];let i=0;for(let a=0;a<o;++a,i+=n)r.push(i);for(let a=o;a<e;++a)r.push(-1);return $(r.length===e,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(e,n,s,o){const r=e.length,i=[];for(let a=0;a<r-1;++a){const l=e[a+1]-e[a];let c=Math.min(o,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)i.push(u),u+=s;for(let d=0;d<l-c;++d)i.push(-1)}if(r>0&&i.length!==e[r-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,s,o){const r=e.length,i=[];if(r===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];i.push(c);for(let u=1;u<r;++u){const d=e[u];if(d===l)c>=0&&(++a,a<o?c+=s:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,s,o){const r=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Ts.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,n,s,o);case Ts.ROW_SPLITS:if(r.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(r,n,s,o);default:throw new Error(`Unsupported partition type: ${Ts[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ts.FIRST_DIM_SIZE:return e[0];case Ts.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ts.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ts[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),s=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*s[l+1];const r=nI(s,!1),i=Mt(this.valuesDType,le(r));if(o[0]*s[0]>0){let l=this.calculateFirstParentOutputIndex(n,o[0],s[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],s[c]);this.setOutput(this.raggedRank,l,i,r)}return[r,i]}setOutput(e,n,s,o){if(s.length===0)return;const r=this.values,i=s;let a=o.slice();a=a.slice(e+1);const l=le(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;J(()=>{const m=X(u,p);u=Gc(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=c;++p){let m=p<c?n[p]:-1;if(m===f){++f;continue}if(h<f){const v=r.subarray(d*l),g=i.subarray(h*l),b=(f-h)*l;tI(g,v,b)}if(p>=c){const v=s.length;m=Math.floor(v/l)}if(m>f)if(this.defaultValue.length===1)i.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const v=i.slice(f*l);tI(v,u,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function tI(t,e,n){for(let s=0;s<n;s++)t[s]=e[s]}function nI(t,e){const n=[];for(let s of t){if(s<0){if(!e)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}n.push(s)}return n}function rO(t,e,n,s,o,r,i,a,l,c){return new zf(t,e,n,s,o,r,i,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iO(t,e,n,s){const o=t===e,r=t<e&&n<0,i=e<t&&n>1;if(o||r||i)return Sn(0,s);const a=Math.abs(Math.ceil((e-t)/n)),l=Sn(a,s);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aO=Ho(t=>1/Math.sqrt(t)),vne=xi(md,aO),bne={kernelName:md,backendName:"cpu",kernelFunc:vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ji(t,e,n,s,o,r,i,a,l,c){const u=[s/o,o],d=t.values,h=e.values;if(s===0)return qe(n,e.dtype);const f=l instanceof bn?l:qe(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<r;p++){const m=[];let v=0;for(let g=0;g<i;g++){const b=d[p*i+g];m.push(b),v+=b*a[g]}if(v<0||v>=s/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<o;g++)c?f.values[v*o+g]+=h[p*o+g]:f.values[v*o+g]=e.rank===0?h[0]:h[p*o+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yne=Ho(t=>1/(1+Math.exp(-t))),lO=ft(xd,t=>1/(1+Math.exp(-t))),xne={kernelName:xd,backendName:"cpu",kernelFunc:lO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(t,e,n,s,o){const r=jx(s,e,n),i=le(n),a=Oe(s);if(r){const d=zx(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=o==="string"?mr(t):t,c=qe(s,o,l),u=qe(n,o);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,m)=>p+e[m]);u.set(c.get(...f),...h)}return o==="string"?dR(u.values):u.values}function ma(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,size:i}=s;Ae(o,"slice");const[a,l]=Pm(o,r,i);Vx(o,a,l);const c=n.data.get(o.dataId).values,u=cO(c,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,u)}const wne={kernelName:xm,backendName:"cpu",kernelFunc:ma};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uO(t,e,n,s,o,r,i){const a=e[0],l=r[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(JA(a));const v=Mt(n,0),g=Mt(o,0);return[v,[0,d],g,c,u]}let h=!0,f=0;const p=new Array(l).fill(0);for(let v=0;v<a;++v){const g=t[v*d];if(g<0)throw new Error(ZA(v,g));if(g>=l)throw new Error(eR(v,g,l));++p[g],h=h&&g>=f,f=g}let m=!0;for(let v=0;v<l;++v){const g=p[v]===0;c[v]=g,m=m&&!g,p[v]=Math.max(p[v],1),v>0&&(p[v]+=p[v-1])}if(m&&h){const v=t,g=s;for(let b=0;b<a;++b)u[b]=b;return[v,[a,d],g,c,u]}else{const v=p[l-1],g=Mt(n,v*d),b=Mt(o,v),x=new Array(l).fill(0);for(let y=0;y<a;++y){const w=t[y*d],C=x[w],_=(w===0?0:p[w-1])+C;x[w]++;for(let S=0;S<d;++S)g[_*d+S]=t[y*d+S];b[_]=s[y],u[y]=_}for(let y=0;y<l;++y)if(x[y]===0){const C=y===0?0:p[y-1];g[C*d+0]=y;for(let _=1;_<d;++_)g[C*d+_]=0;b[C]=i}return[g,[v,d],b,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dO(t,e,n,s,o){const r=le(s),i=e[0],a=o.length,l=[];let c=1,u=-1;for(let v=0;v<a;++v){const g=o[v];if(g===-1){if(u!==-1)throw new Error(tR(u,v));u=v,l.push(1)}else{if(g<0)throw new Error(nR(v,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(sR());const v=Math.trunc(r/c);if(c*v!==r)throw new Error(oR(s,l));l[u]=v}if(le(l)!==r)throw new Error(rR(s,l));const h=s.length,f=[];if(h>0){f[h-1]=1;for(let v=h-2;v>=0;--v)f[v]=f[v+1]*s[v+1]}const p=[];if(a>0){p[a-1]=1;for(let v=a-2;v>=0;--v)p[v]=p[v+1]*l[v+1]}const m=Mt(n,i*a);for(let v=0;v<i;++v){let g=0;for(let b=0;b<h;++b)g+=t[v*h+b]*f[b];for(let b=0;b<a;++b)m[v*a+b]=Math.trunc(g/p[b]),g%=p[b]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(t,e,n,s,o,r=!1,i=0){const a=s.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(Lb());const h=e.slice();h[0]=d;const f=h.reduce((x,y)=>x*y,1),p=Mt(n,f);if(a===0)return d>0&&p.fill(i),[p,h];if(d<=0)throw new Error(Lb());let m=0,v=1,g=0,b=o[m];for(;;){let x=0;if(v<a){if(x=o[v],b===x){++v;continue}if(b>=x)throw new Error(iR())}if(b<0||b>=d)throw new Error(aR(b,d));b>g&&p.fill(i,g*c,b*c);for(let y=m;y<v;++y){const w=s[y];if(w<0||w>=l[0])throw new Error(lR(y,s[y],l[0]));for(let C=0;C<c;C++)p[b*c+C]+=t[w*c+C]}if(r)for(let y=0;y<c;y++)p[b*c+y]/=v-m;if(m=v,++v,g=b+1,b=x,v>a)break}return g<d&&p.fill(i,g*c,d*c),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cne=Ho(t=>Math.sqrt(t)),_ne=ft(Cd,t=>Math.sqrt(t)),Sne={kernelName:Cd,backendName:"cpu",kernelFunc:_ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hO=zt((t,e)=>{const n=t-e;return n*n}),Ine=sn(_d,hO),Ene={kernelName:_d,backendName:"cpu",kernelFunc:Ine};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fO=Ho((t,e)=>{const{pattern:n,replaceGlobal:s,rewrite:o}=e;return t.replace(new RegExp(n,s?"g":""),o)}),kne=xi(H0,fO),$ne={kernelName:H0,backendName:"cpu",kernelFunc:kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(t,e,n,s){const o=qe(t,e.dtype);for(let r=0;r<o.size;r++){const i=o.indexToLoc(r),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+s[l];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tne{constructor(e,n,s,o,r,i){this.separator=zr(e),this.nGramWidths=n,this.leftPad=zr(s),this.rightPad=zr(o),this.padWidth=r,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const s=this.getPadWidth(n);return Math.max(0,e+2*s-n+1)}createNGrams(e,n,s,o,r,i){for(let a=0;a<r;++a){const l=this.getPadWidth(i),c=Math.max(0,l-a),u=Math.max(0,l-(r-(a+1))),d=i-(c+u),h=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let b=0;b<d;++b)f+=e[h+b].length;f+=u*this.rightPad.length;const p=c+u+d-1;f+=p*this.separator.length,s[o+a]=new Uint8Array(f);const m=s[o+a];let v=0;const g=b=>b.forEach(x=>m[v++]=x);for(let b=0;b<c;++b)g(this.leftPad),g(this.separator);for(let b=0;b<d-1;++b)g(e[h+b]),g(this.separator);if(d>0){g(e[h+d-1]);for(let b=0;b<u;++b)g(this.separator),g(this.rightPad)}else{for(let b=0;b<u-1;++b)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const s=e.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=n[c]>=l;if(u=u&&n[c]<=s,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${s}]`);l=n[c]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=o-1,i=Mt("int32",o);if(s===0||o===0){const l=new Array(s);for(let c=0;c<=r;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=r;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),i[l]=i[l-1]+u}const a=new Array(i[r]);for(let l=0;l<r;++l){const c=n[l];let u=i[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,c,a,u,f,d),u+=f}),this.preserveShort&&u===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,h)}}return[a,i]}}function mO(t,e,n,s,o,r,i,a){return new Tne(n,s,o,r,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t,e,n,s){if(!t.length)return;if(e.length===0){for(let r=0;r<t.length;++r)s.push(t.subarray(r,r+1));return}if(e.length===1){const r=e[0];let i=t.indexOf(r);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&s.push(a),t=t.subarray(i+1),i=t.indexOf(r)}(!n||t.length!==0)&&s.push(t);return}let o=0;for(let r=0;r<t.length+1;r++)if(r===t.length||e.indexOf(t[r])!==-1){const i=t.subarray(o,r);(!n||i.length!==0)&&s.push(i),o=r+1}}function gO(t,e,n){const s=t.length,o=[];let r=0,i=0;const a=new Array(s);for(let h=0;h<s;++h){const f=o.length;Nne(t[h],e,n,o);const p=o.length-f;a[h]=p,r+=p,i=Math.max(i,p)}const l=Mt("int32",r*2),c=new Array(r),u=[s,i];let d=0;for(let h=0;h<s;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,c[d]=o[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vO(t,e){const n=Mt("int32",t.length);for(let s=0;s<t.length;++s)n[s]=Hq(t[s]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bO=zt((t,e)=>t-e),Ane=R1((t,e,n,s)=>({real:t-n,imag:e-s})),P1=sn(Sd,bO,Ane),Rne={kernelName:Sd,backendName:"cpu",kernelFunc:P1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yO(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const s=qe(n,t.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=r[l]%t.shape[l];const a=t.locToIndex(i);s.values[o]=t.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nc=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function xO(t,e,n=0,s=t.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*u/a+d)),f=Math.min(s,Math.floor(e+(a-l)*u/a+d));xO(t,e,h,f)}const o=t[e];let r=n,i=s;for(Xa(t,n,e),Nc(t[s],o)>0&&Xa(t,n,s);r<i;){for(Xa(t,r,i),r++,i--;Nc(t[r],o)<0;)r=r+1;for(;Nc(t[i],o)>0;)i=i-1}Nc(t[n],o)===0?Xa(t,n,i):(i=i+1,Xa(t,i,s)),i<=e&&(n=i+1),e<=i&&(s=i-1)}}function wO(t,e,n,s,o){const r=e[e.length-1],[i,a]=[t.length/r,r],l=_n(n,i*s),c=_n("int32",i*s);for(let d=0;d<i;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((b,x)=>p[x]={value:b,index:x}),s<p.length&&(xO(p,s),p=p.slice(0,s)),o&&p.sort(Nc);const m=d*s,v=l.subarray(m,m+s),g=c.subarray(m,m+s);for(let b=0;b<s;b++)v[b]=p[b].value,g[b]=p[b].index}const u=e.slice();return u[u.length-1]=s,[qe(u,n,l),qe(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CO(t,e,n,s){const o=Xe(e,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const i=new Map,a=new Int32Array(n[o]),l=new bn(r,s,t),c=[],u=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let m;if(u)m=t[p].toString();else{const g=[];for(let b=0;b<r[0];b++)for(let x=0;x<r[2];x++)g.push(l.get(b,p,x));m=g.join(",")}const v=i.get(m);if(v!=null)a[p]=v;else{const g=i.size;i.set(m,g),a[p]=g,c.push(p)}}const d=r.slice();d[1]=i.size;const h=new bn(d,s);c.forEach((p,m)=>{for(let v=0;v<r[0];v++)for(let g=0;g<r[2];g++)h.set(l.get(v,p,g),v,m,g)});const f=n.slice();return f[o]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dne=Object.freeze(Object.defineProperty({__proto__:null,addImpl:AD,bincountImpl:D1,bincountReduceImpl:RD,bitwiseAndImpl:DD,castImpl:ND,ceilImpl:OD,concatImpl:LD,equalImpl:FD,expImpl:MD,expm1Impl:VD,floorDivImpl:jD,floorImpl:UD,gatherNdImpl:zD,gatherV2Impl:WD,greaterEqualImpl:HD,greaterImpl:GD,lessEqualImpl:qD,lessImpl:KD,linSpaceImpl:XD,logImpl:QD,maxImpl:YD,maximumImpl:JD,minimumImpl:ZD,multiplyImpl:O1,negImpl:eO,notEqualImpl:tO,prodImpl:nO,raggedGatherImpl:sO,raggedRangeImpl:oO,raggedTensorToTensorImpl:rO,rangeImpl:iO,rsqrtImpl:aO,scatterImpl:ji,sigmoidImpl:yne,simpleAbsImpl:TD,sliceImpl:cO,sparseFillEmptyRowsImpl:uO,sparseReshapeImpl:dO,sparseSegmentReductionImpl:F1,sqrtImpl:Cne,squaredDifferenceImpl:hO,staticRegexReplaceImpl:fO,stridedSliceImpl:pO,stringNGramsImpl:mO,stringSplitImpl:gO,stringToHashBucketFastImpl:vO,subImpl:bO,tileImpl:yO,topKImpl:wO,transposeImpl:L1,uniqueImpl:CO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */BN("cpu",()=>new Ym,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _O=ft(Ku,t=>t>=0?t:Math.exp(t)-1),One={kernelName:Ku,backendName:"cpu",kernelFunc:_O};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{alpha:r}=s;Ae([o],"leakyRelu");const i=le(o.shape),a=n.data.get(o.dataId).values,l=_n("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?r*a[c]:a[c];return n.makeTensorInfo(o.shape,"float32",l)}const Lne={kernelName:qp,backendName:"cpu",kernelFunc:SO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fne=zt((t,e)=>t<0?e*t:t);function IO(t){const{inputs:e,backend:n}=t,{x:s,alpha:o}=e;Ae([s,o],"prelu");const r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,[a,l]=Fne(s.shape,o.shape,r,i,"float32");return n.makeTensorInfo(l,"float32",a)}const Pne={kernelName:fm,backendName:"cpu",kernelFunc:IO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EO=ft(hd,t=>Math.max(0,t)),Mne={kernelName:hd,backendName:"cpu",kernelFunc:EO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kO=ft(fd,t=>Math.min(Math.max(0,t),6)),Bne={kernelName:fd,backendName:"cpu",kernelFunc:kO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wf(t,e,n,s,o){if(n==="linear")return Wo({inputs:{x:e},backend:t});if(n==="relu")return EO({inputs:{x:e},backend:t});if(n==="elu")return _O({inputs:{x:e},backend:t});if(n==="relu6")return kO({inputs:{x:e},backend:t});if(n==="prelu")return IO({inputs:{x:e,alpha:s},backend:t});if(n==="leakyrelu")return SO({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return lO({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _t(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{shape:r}=s,i=le(o.shape),a=GT(r,i),l=le(a);$(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const c=n.data.get(o.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const Vne={kernelName:mm,backendName:"cpu",kernelFunc:_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $O(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r}=e,{transposeA:i,transposeB:a}=s;Ae([o,r],"matMul");const l=o.shape.length,c=r.shape.length,u=i?o.shape[l-2]:o.shape[l-1],d=a?r.shape[c-1]:r.shape[c-2],h=i?o.shape[l-1]:o.shape[l-2],f=a?r.shape[c-2]:r.shape[c-1],p=o.shape.slice(0,-2),m=r.shape.slice(0,-2),v=le(p),g=le(m),x=We(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,f]);$(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${i} and transposeB=${a} must match.`);const y=i?[v,u,h]:[v,h,u],w=a?[g,f,d]:[g,d,f],C=_t({inputs:{x:o},backend:n,attrs:{shape:y}}),_=_t({inputs:{x:r},backend:n,attrs:{shape:w}}),S=i?C.shape[1]:C.shape[2],I=i?C.shape[2]:C.shape[1],E=a?_.shape[1]:_.shape[2],O=Math.max(v,g),A=n.data.get(C.dataId).values,P=n.data.get(_.dataId).values,z=Oe(C.shape),G=Oe(_.shape),[M,R,D]=i?[z[0],1,z[1]]:[z[0],z[1],1],[j,ne,re]=a?[1,G[1],G[0]]:[G[1],1,G[0]],de=I*E,he=qe([O,I,E],C.dtype),ye=he.values,fe=n.blockSize;for(let ge=0;ge<O;ge++){const q=ge%v,ue=ge%g;for(let ce=0;ce<I;ce+=fe){const pe=Math.min(ce+fe,I);for(let Se=0;Se<E;Se+=fe){const De=Math.min(Se+fe,E);for(let N=0;N<S;N+=fe){const L=Math.min(N+fe,S);for(let K=ce;K<pe;K++)for(let oe=Se;oe<De;oe++){let se=0;for(let k=N;k<L;k++){const T=A[q*M+K*R+k*D],U=P[k*j+oe*ne+ue*re];se+=T*U}ye[ge*de+(K*E+oe)]+=se}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(_),n.makeTensorInfo(x,he.dtype,he.values)}const Une={kernelName:Dp,backendName:"cpu",kernelFunc:$O};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=s;let h,f,p;const m=[];h=$O({inputs:{a:o,b:r},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(f=Ml({inputs:{a:h,b:i},backend:n}),m.push(h),h=f),u&&(p=Wf(n,h,u,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const zne={kernelName:wf,backendName:"cpu",kernelFunc:jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wne=ft(Ou,t=>Math.acos(t)),Gne={kernelName:Ou,backendName:"cpu",kernelFunc:Wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hne=ft(Lu,t=>Math.acosh(t)),Kne={kernelName:Lu,backendName:"cpu",kernelFunc:Hne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t){const{inputs:e,backend:n}=t,s=e;Ae(e,"addN");const o=s.map(a=>n.data.get(a.dataId).values),r=qe(s[0].shape,s[0].dtype),i=r.values;for(let a=0;a<s.length;a++){const l=o[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const Xne={kernelName:d0,backendName:"cpu",kernelFunc:qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ae(o,"all");const a=Xe(r,o.shape);let l=a;const c=Dt(l,o.shape.length);let u=o;c!=null&&(u=Jn({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Ut(l.length,o.shape.length)),xn("all",l,u.shape.length);const[d,h]=pn(u.shape,l),f=le(h),p=Sn(le(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];x=x&&w}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Kt(d,a),b=_t({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const Yne={kernelName:h0,backendName:"cpu",kernelFunc:Qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ae(o,"any");const a=Xe(r,o.shape);let l=a;const c=Dt(l,o.shape.length);let u=o;c!=null&&(u=Jn({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Ut(l.length,o.shape.length)),xn("any",l,u.shape.length);const[d,h]=pn(u.shape,l),f=le(h),p=Sn(le(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];x=x||w}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Kt(d,a),b=_t({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const Zne={kernelName:f0,backendName:"cpu",kernelFunc:Jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ese(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;Ae(o,"argMax");let i=Xe(r,o.shape);const a=Dt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Jn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=Ut(i.length,l.shape.length)),i=[i[0]],xn("argMax",i,l.shape.length);const[u,d]=pn(l.shape,i),h=le(u),f=Sn(h,"int32"),p=le(d),m=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const g=v*p;let b=m[g],x=0;for(let y=0;y<p;++y){const w=m[g+y];w>b&&(b=w,x=y)}f[v]=x}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const tse={kernelName:Tp,backendName:"cpu",kernelFunc:ese};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;Ae(o,"argMin");let i=Xe(r,o.shape);const a=Dt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Jn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=Ut(i.length,l.shape.length)),i=[i[0]],xn("argMin",i,l.shape.length);const[u,d]=pn(l.shape,i),h=le(u),f=Sn(h,"int32"),p=le(d),m=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const g=v*p;let b=m[g],x=0;for(let y=0;y<p;++y){const w=m[g+y];w<b&&(b=w,x=y)}f[v]=x}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const sse={kernelName:Np,backendName:"cpu",kernelFunc:nse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose=ft(Fu,t=>Math.asin(t)),rse={kernelName:Fu,backendName:"cpu",kernelFunc:ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ise=ft(Pu,t=>Math.asinh(t)),ase={kernelName:Pu,backendName:"cpu",kernelFunc:ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lse=ft(Mu,t=>Math.atan(t)),cse={kernelName:Mu,backendName:"cpu",kernelFunc:lse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use=zt((t,e)=>Math.atan2(t,e)),dse=sn(Vu,use),hse={kernelName:Vu,backendName:"cpu",kernelFunc:dse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fse=ft(Bu,t=>Math.atanh(t)),pse={kernelName:Bu,backendName:"cpu",kernelFunc:fse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1(t,e,n,s,o,r){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=o.padInfo.top,f=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=qe(o.outShape,n),v=m.values,g=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],x=o.outShape[3];for(let y=0;y<o.batchSize;++y){const w=y*g,C=y*s[0];for(let _=0;_<o.inChannels;++_)for(let S=0;S<o.outHeight;++S){const I=S*i-h,E=Math.max(0,I),O=Math.min(o.inHeight,u+I),A=w+S*b;for(let P=0;P<o.outWidth;++P){const z=P*a-f,G=Math.max(0,z),M=Math.min(o.inWidth,d+z);let R=p,D=0,j=0;for(let re=E;re<O;re+=l){const de=C+re*s[1];for(let he=G;he<M;he+=c){const ye=de+he*s[2],fe=t[ye+_];r==="max"&&fe>R?R=fe:r==="avg"&&(D+=fe,j++)}if(isNaN(R))break}const ne=A+P*x+_;v[ne]=r==="avg"?D/j:R}}}return m}function TO(t,e,n,s,o=!1,r=!1){const i=qe(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,c=s.dilationHeight,u=s.dilationWidth,d=s.effectiveFilterHeight,h=s.effectiveFilterWidth,f=s.padInfo.top,p=s.padInfo.left,m=qe(e,n,t);for(let v=0;v<s.batchSize;++v)for(let g=0;g<s.inChannels;++g)for(let b=0;b<s.outHeight;++b){const x=b*a-f;let y=x;for(;y<0;)y+=c;const w=Math.min(s.inHeight,d+x);for(let C=0;C<s.outWidth;++C){const _=C*l-p;let S=_;for(;S<0;)S+=u;const I=Math.min(s.inWidth,h+_);let E=Number.NEGATIVE_INFINITY,O=-1;for(let A=y;A<w;A+=c){const P=A-x;for(let z=S;z<I;z+=u){const G=z-_,M=m.get(v,A,z,g);M>E&&(E=M,o?O=r?((v*s.inHeight+A)*s.inWidth+z)*s.inChannels+g:(A*s.inWidth+z)*s.inChannels+g:O=P*h+G)}}i.set(O,v,b,C,g)}}return i}function NO(t,e,n,s,o,r){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,h=o.effectiveFilterDepth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,v=o.padInfo.top,g=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=qe(o.outShape,n),y=x.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],_=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let I=0;I<o.batchSize;++I){const E=I*w,O=I*s[0];for(let A=0;A<o.inChannels;++A)for(let P=0;P<o.outDepth;++P){const z=P*i-m;let G=z;for(;G<0;)G+=c;const M=Math.min(o.inDepth,h+z),R=E+P*C;for(let D=0;D<o.outHeight;++D){const j=D*a-v;let ne=j;for(;ne<0;)ne+=u;const re=Math.min(o.inHeight,f+j),de=R+D*_;for(let he=0;he<o.outWidth;++he){const ye=he*l-g;let fe=ye;for(;fe<0;)fe+=d;const ge=Math.min(o.inWidth,p+ye),q=de+he*S;let ue=b,ce=0,pe=0;for(let De=G;De<M;De+=c){const N=O+De*s[1];for(let L=ne;L<re;L+=u){const K=N+L*s[2];for(let oe=fe;oe<ge;oe+=d){const se=K+oe*s[3],k=t[se+A];if(r==="max"&&k>ue?ue=k:r==="avg"&&(ce+=k,pe++),isNaN(ue))break}if(isNaN(ue))break}if(isNaN(ue))break}const Se=q+A;y[Se]=r==="avg"?ce/Math.max(pe,1):ue}}}}return x}function mse(t,e){const n=qe(e.outShape,"int32"),s=e.strideDepth,o=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let v=0;v<e.inChannels;++v)for(let g=0;g<e.outDepth;++g){const b=g*s-h;let x=b;for(;x<0;)x+=i;const y=Math.min(e.inDepth,c+b);for(let w=0;w<e.outHeight;++w){const C=w*o-f;let _=C;for(;_<0;)_+=a;const S=Math.min(e.inHeight,u+C);for(let I=0;I<e.outWidth;++I){const E=I*r-p;let O=E;for(;O<0;)O+=l;const A=Math.min(e.inWidth,d+E);let P=Number.NEGATIVE_INFINITY,z=-1;for(let G=x;G<y;G+=i){const M=G-b;for(let R=_;R<S;R+=a){const D=R-C;for(let j=O;j<A;j+=l){const ne=j-E,re=t.get(m,G,R,j,v);re>=P&&(P=re,z=M*u*d+D*u+ne)}}}n.set(z,m,g,w,I,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Ae(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,c=1;$(En(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Hs(o.shape,r,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&ct(u.inShape,u.outShape))d=Wo({inputs:{x:o},backend:n});else{const h=n.data.get(o.dataId).values,f=Oe(o.shape),p=M1(h,o.shape,o.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const vse={kernelName:Ap,backendName:"cpu",kernelFunc:gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=s;Ae(o,"avgPool3d");const u=xr(o.shape,r,i,1,a,l,c),d=n.data.get(o.dataId).values,h=NO(d,o.shape,o.dtype,Oe(o.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const yse={kernelName:Rp,backendName:"cpu",kernelFunc:bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s;Ae([o,r],"avgPool3DGrad");const u=xr(r.shape,i,a,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,v=u.filterWidth,g=u.dilationDepth,b=u.dilationHeight,x=u.dilationWidth,y=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,_=y-1-u.padInfo.front,S=C-1-u.padInfo.left,I=w-1-u.padInfo.top,E=qe(r.shape,"float32"),O=1/(p*m*v),A=n.bufferSync(o);for(let P=0;P<u.batchSize;++P)for(let z=0;z<u.inChannels;++z)for(let G=0;G<u.inDepth;++G)for(let M=0;M<u.inHeight;++M)for(let R=0;R<u.inWidth;++R){const D=G-_,j=M-I,ne=R-S;let re=0;for(let de=0;de<y;de+=g){const he=(D+de)/d;if(!(he<0||he>=u.outDepth||Math.floor(he)!==he))for(let ye=0;ye<w;ye+=b){const fe=(j+ye)/h;if(!(fe<0||fe>=u.outHeight||Math.floor(fe)!==fe))for(let ge=0;ge<C;ge+=x){const q=(ne+ge)/f;if(q<0||q>=u.outWidth||Math.floor(q)!==q)continue;const ue=A.get(P,he,fe,q,z);re+=ue}}}E.set(re*O,P,G,M,R,z)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const wse={kernelName:m0,backendName:"cpu",kernelFunc:xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r;Ae([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=s,u=Hs(i.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,v=u.dilationWidth,g=u.effectiveFilterHeight,b=u.effectiveFilterWidth,x=b-1-u.padInfo.left,y=g-1-u.padInfo.top,w=qe(i.shape,"float32"),C=1/(f*p),_=n.data.get(o.dataId).values,S=qe(o.shape,"float32",_);for(let I=0;I<u.batchSize;++I)for(let E=0;E<u.inChannels;++E)for(let O=0;O<u.inHeight;++O)for(let A=0;A<u.inWidth;++A){const P=O-y,z=A-x;let G=0;for(let M=0;M<g;M+=m){const R=(P+M)/d;if(!(R<0||R>=u.outHeight||Math.floor(R)!==R))for(let D=0;D<b;D+=v){const j=(z+D)/h;if(j<0||j>=u.outWidth||Math.floor(j)!==j)continue;const ne=S.get(I,R,j,E);G+=ne}}w.set(G*C,I,O,A,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const _se={kernelName:p0,backendName:"cpu",kernelFunc:Cse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,scale:r,offset:i,mean:a,variance:l}=e;$(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ae([o,a,l,r,i],"batchNorm");let{varianceEpsilon:c}=s;c==null&&(c=.001);const u=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),v=p.length,g=f.length,b=h.length,x=d.length;let y=0,w=0,C=0,_=0;for(let S=0;S<u.length;++S)m[S]=p[y++]+(u[S]-d[w++])*f[C++]/Math.sqrt(h[_++]+c),y>=v&&(y=0),w>=x&&(w=0),C>=g&&(C=0),_>=b&&(_=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const Ise={kernelName:Gp,backendName:"cpu",kernelFunc:Sse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,crops:i}=s;Ae([o],"batchToSpaceND");const a=r.reduce((g,b)=>g*b),l=Od(o.shape,r,a),c=Ld(l.length,r.length),u=Fd(o.shape,r,a),d=qx(i,r.length),h=Xx(u,i,r.length),f=_t({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Jn({inputs:{x:f},backend:n,attrs:{perm:c}}),m=_t({inputs:{x:p},backend:n,attrs:{shape:u}}),v=ma({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}const kse={kernelName:Op,backendName:"cpu",kernelFunc:Ese};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $se(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i}=s,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,c=D1(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}const Tse={kernelName:g0,backendName:"cpu",kernelFunc:$se};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t){const{inputs:e,backend:n}=t,{s0:s,s1:o}=e,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=We(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Ase={kernelName:YT,backendName:"cpu",kernelFunc:Nse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rse=ft(zu,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Dse={kernelName:zu,backendName:"cpu",kernelFunc:Rse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ose=t=>{const{x:e}=t.inputs,n=t.backend,s=new Float32Array(le(e.shape)),o=n.data.get(e.dataId),r=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];s[c]=Math.hypot(u,d)}return n.makeOutput(s,e.shape,"float32")},Lse={kernelName:Lp,backendName:"cpu",kernelFunc:Ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bl(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const Fse={kernelName:O0,backendName:"cpu",kernelFunc:Bl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vl(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s,r=Xe(o,e[0].shape)[0],i=e.map(m=>m.shape);Gx(i,r);let a=Lo(e.map(m=>m.shape),r);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>le(m.shape)>0);if(l.length===1)return Wo({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(y=>pa({inputs:{input:y},backend:n})),v=l.map(y=>Bl({inputs:{input:y},backend:n})),g=Vl({inputs:m,backend:n,attrs:{axis:r}}),b=Vl({inputs:v,backend:n,attrs:{axis:r}}),x=os({inputs:{real:g,imag:b},backend:n});return m.forEach(y=>n.disposeIntermediateTensorInfo(y)),v.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}const c=l.map(m=>{const g=[-1,le(m.shape.slice(r))];return _t({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Lo(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,h=LD(u,a,e[0].dtype,d),f=Lo(l.map(m=>m.shape),r),p=n.makeTensorInfo(f,e[0].dtype,h);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Pse={kernelName:Fp,backendName:"cpu",kernelFunc:Vl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=s;Ae([o,r],"conv2d");const d=wr(l),h=yn(o.shape,r.shape,i,c,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,v=h.dilationWidth,g=h.padInfo.left,b=h.padInfo.top,x=h.dataFormat==="channelsLast",y=new bn(h.outShape,o.dtype),w=Oe(o.shape),C=Oe(r.shape),_=w[0],S=x?w[1]:w[2],I=x?w[2]:1,E=x?1:w[1],O=y.strides[0],A=x?y.strides[1]:y.strides[2],P=x?y.strides[2]:1,z=x?1:y.strides[1],G=n.data.get(o.dataId).values,M=n.data.get(r.dataId).values,R=y.values;for(let D=0;D<h.batchSize;++D){const j=D*_,ne=D*O;for(let re=0;re<h.outHeight;++re){const de=ne+re*A,he=re*h.strideHeight-b;for(let ye=0;ye<f;++ye){const fe=he+ye*m;if(fe<0||fe>=h.inHeight)continue;const ge=ye*C[0],q=j+fe*S;for(let ue=0;ue<h.outWidth;++ue){const ce=de+ue*P,pe=ue*h.strideWidth-g;for(let Se=0;Se<p;++Se){const De=pe+Se*v;if(De<0||De>=h.inWidth)continue;const N=ge+Se*C[1],L=q+De*I;let K=N;for(let oe=0;oe<h.inChannels;++oe){const se=G[L+oe*E];for(let k=0;k<h.outChannels;++k)R[ce+k*z]+=se*M[K+k];K+=h.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,R)}const Mse={kernelName:Pp,backendName:"cpu",kernelFunc:AO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=s;Ae([o,r],"conv2dBackpropFilter");const d=wr(l),h=yn(o.shape,u,i,1,a,c,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:v}=h,g=h.dataFormat==="channelsLast",b=new bn(h.filterShape,"float32"),x=h.padInfo.left,y=h.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,_=new bn(o.shape,o.dtype,w),S=new bn(r.shape,r.dtype,C);for(let I=0;I<m;++I){const E=Math.max(0,Math.ceil((y-I)/f)),O=Math.min(h.outHeight,(h.inHeight+y-I)/f);for(let A=0;A<v;++A){const P=Math.max(0,Math.ceil((x-A)/p)),z=Math.min(h.outWidth,(h.inWidth+x-A)/p);for(let G=0;G<h.inChannels;++G)for(let M=0;M<h.outChannels;++M){let R=0;for(let D=0;D<h.batchSize;++D)for(let j=E;j<O;++j){const ne=I+j*f-y;for(let re=P;re<z;++re){const de=A+re*p-x;g?R+=_.get(D,ne,de,G)*S.get(D,j,re,M):R+=_.get(D,G,ne,de)*S.get(D,M,j,re)}}b.set(R,I,A,G,M)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Vse={kernelName:y0,backendName:"cpu",kernelFunc:Bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=s;Ae([o,r],"conv2dBackpropInput");const d=Oe(r.shape),h=Oe(o.shape);let f=wr(c);const p=yn(i,r.shape,a,1,l,u,!1,f),m=new bn(p.inShape,"float32"),v=m.values,g=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[x,y,w]=d,{batchSize:C,filterHeight:_,filterWidth:S,inChannels:I,inHeight:E,inWidth:O,outChannels:A,outHeight:P,outWidth:z,strideHeight:G,strideWidth:M}=p;f=p.dataFormat;const R=_-1-p.padInfo.top,D=S-1-p.padInfo.left,j=f==="channelsLast",ne=m.strides[0],re=j?m.strides[1]:m.strides[2],de=j?m.strides[2]:1,he=j?1:m.strides[1],ye=h[0],fe=j?h[1]:h[2],ge=j?h[2]:1,q=j?1:h[1];for(let ue=0;ue<C;++ue)for(let ce=0;ce<I;++ce)for(let pe=0;pe<E;++pe){const Se=pe-R,De=Math.max(0,Math.ceil(Se/G)),N=Math.min(P,(_+Se)/G);for(let L=0;L<O;++L){const K=L-D,oe=Math.max(0,Math.ceil(K/M)),se=Math.min(z,(S+K)/M);let k=0;for(let U=De;U<N;++U){const Y=U*G-Se;for(let ee=oe;ee<se;++ee){const ve=ee*M-K,B=ye*ue+fe*U+ge*ee,Z=x*(_-1-Y)+y*(S-1-ve)+w*ce;for(let Ce=0;Ce<A;++Ce){const ie=g[B+q*Ce],be=b[Z+Ce];k+=ie*be}}}const T=ne*ue+re*pe+de*L+he*ce;v[T]=k}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const jse={kernelName:Mp,backendName:"cpu",kernelFunc:Use};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:l}=s;Ae([o,r],"conv3d");const c=pi(o.shape,r.shape,i,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:v}=c,g=v.front,b=v.left,x=v.top,y=new bn(c.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,_=y.values,S=Oe(o.shape),I=Oe(r.shape);for(let E=0;E<c.batchSize;++E){const O=E*S[0],A=E*y.strides[0];for(let P=0;P<c.outDepth;++P){const z=A+P*y.strides[1],G=P*c.strideDepth-g;for(let M=0;M<u;++M){const R=G+M*f;if(R<0||R>=c.inDepth)continue;const D=M*I[0],j=O+R*S[1];for(let ne=0;ne<c.outHeight;++ne){const re=z+ne*y.strides[2],de=ne*c.strideHeight-x;for(let he=0;he<d;++he){const ye=de+he*p;if(ye<0||ye>=c.inHeight)continue;const fe=D+he*I[1],ge=j+ye*S[2];for(let q=0;q<c.outWidth;++q){const ue=re+q*c.outChannels,ce=q*c.strideWidth-b;for(let pe=0;pe<h;++pe){const Se=ce+pe*m;if(Se<0||Se>=c.inWidth)continue;const De=fe+pe*I[2],N=ge+Se*c.inChannels;let L=De;for(let K=0;K<c.inChannels;++K){const oe=w[N+K];for(let se=0;se<c.outChannels;++se)_[ue+se]+=oe*C[L+se];L+=c.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Wse={kernelName:Bp,backendName:"cpu",kernelFunc:zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gse(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,filterShape:l}=s;Ae([o,r],"conv3dBackpropFilterV2");const c=Oe(o.shape),u=Oe(r.shape),d=pi(o.shape,l,i,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,v=d.filterHeight,g=d.filterWidth,b=new bn(d.filterShape,"float32"),x=b.values,[y,w,C,_]=b.strides,S=n.data.get(r.dataId).values,[I,E,O,A]=u,P=n.data.get(o.dataId).values,[z,G,M,R]=c,D=d.padInfo.front,j=d.padInfo.left,ne=d.padInfo.top;for(let re=0;re<m;++re){const de=Math.max(0,Math.ceil((D-re)/h)),he=Math.min(d.outDepth,(d.inDepth+D-re)/h),ye=re*y;for(let fe=0;fe<v;++fe){const ge=Math.max(0,Math.ceil((ne-fe)/f)),q=Math.min(d.outHeight,(d.inHeight+ne-fe)/f),ue=fe*w+ye;for(let ce=0;ce<g;++ce){const pe=Math.max(0,Math.ceil((j-ce)/p)),Se=Math.min(d.outWidth,(d.inWidth+j-ce)/p),De=ce*C+ue;for(let N=0;N<d.inChannels;++N){const L=N*_+De;for(let K=0;K<d.outChannels;++K){let oe=0;for(let se=0;se<d.batchSize;++se){const k=se*z,T=se*I;for(let U=de;U<he;++U){const ee=(re+U*h-D)*G+k,ve=U*E+T;for(let B=ge;B<q;++B){const Ce=(fe+B*f-ne)*M+ee,ie=B*O+ve;for(let be=pe;be<Se;++be){const Pe=(ce+be*p-j)*R+Ce,Ye=be*A+ie;oe+=P[Pe+N]*S[Ye+K]}}}}x[L+K]=oe}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Hse={kernelName:x0,backendName:"cpu",kernelFunc:Gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kse(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{pad:i,strides:a,inputShape:l}=s;Ae([o],"conv3dBackpropInputV2");const c=Oe(o.shape),u=Oe(r.shape),d=pi(l,r.shape,a,1,i),h=new bn(d.inShape,"float32"),f=h.values,[p,m,v,g]=h.strides,b=n.data.get(o.dataId).values,[x,y,w,C]=c,_=n.data.get(r.dataId).values,[S,I,E,O]=u,{batchSize:A,filterDepth:P,filterHeight:z,filterWidth:G,inChannels:M,inDepth:R,inHeight:D,inWidth:j,outChannels:ne,outDepth:re,outHeight:de,outWidth:he,strideDepth:ye,strideHeight:fe,strideWidth:ge}=d,q=P-1-d.padInfo.front,ue=z-1-d.padInfo.top,ce=G-1-d.padInfo.left;for(let pe=0;pe<A;++pe)for(let Se=0;Se<M;++Se)for(let De=0;De<R;++De){const N=De-q,L=Math.max(0,Math.ceil(N/ye)),K=Math.min(re,(P+N)/ye);for(let oe=0;oe<D;++oe){const se=oe-ue,k=Math.max(0,Math.ceil(se/fe)),T=Math.min(de,(z+se)/fe);for(let U=0;U<j;++U){const Y=U-ce,ee=Math.max(0,Math.ceil(Y/ge)),ve=Math.min(he,(G+Y)/ge);let B=0;for(let Z=L;Z<K;++Z){const Ce=Z*ye-N;for(let ie=k;ie<T;++ie){const be=ie*fe-se;for(let Ee=ee;Ee<ve;++Ee){const Pe=Ee*ge-Y,Ye=x*pe+y*Z+w*ie+C*Ee,At=S*(P-1-Ce)+I*(z-1-be)+E*(G-1-Pe)+O*Se;for(let qt=0;qt<ne;++qt){const Ko=b[Ye+qt],Yd=_[At+qt];B+=Ko*Yd}}}}f[p*pe+m*De+v*oe+g*U+Se]=B}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const qse={kernelName:w0,backendName:"cpu",kernelFunc:Kse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xse=ft(Wu,t=>Math.cos(t)),Qse={kernelName:Wu,backendName:"cpu",kernelFunc:Xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yse=ft(Gu,t=>Math.cosh(t)),Jse={kernelName:Gu,backendName:"cpu",kernelFunc:Yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zse(t){const{inputs:e,backend:n,attrs:s}=t,{image:o,boxes:r,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=s,[u,d,h,f]=o.shape,p=r.shape[0],[m,v]=a,g=qe([p,m,v,f],"float32"),b=n.data.get(r.dataId).values,x=n.data.get(i.dataId).values,y=n.data.get(o.dataId).values,w=Oe(o.shape),C=Oe(g.shape);for(let _=0;_<p;_++){const S=_*4,I=b[S],E=b[S+1],O=b[S+2],A=b[S+3],P=x[_];if(P>=u)continue;const z=m>1?(O-I)*(d-1)/(m-1):0,G=v>1?(A-E)*(h-1)/(v-1):0;for(let M=0;M<m;M++){const R=m>1?I*(d-1)+M*z:.5*(I+O)*(d-1);if(R<0||R>d-1){for(let D=0;D<v;D++)for(let j=0;j<f;j++){const ne=j+D*C[2]+M*C[1]+_*C[0];g.values[ne]=c}continue}if(l==="bilinear"){const D=Math.floor(R),j=Math.ceil(R),ne=R-D;for(let re=0;re<v;re++){const de=v>1?E*(h-1)+re*G:.5*(E+A)*(h-1);if(de<0||de>h-1){for(let ge=0;ge<f;ge++){const q=ge+re*C[2]+M*C[1]+_*C[0];g.values[q]=c}continue}const he=Math.floor(de),ye=Math.ceil(de),fe=de-he;for(let ge=0;ge<f;ge++){let q=ge+he*w[2]+D*w[1]+P*w[0];const ue=y[q];q=ge+ye*w[2]+D*w[1]+P*w[0];const ce=y[q];q=ge+he*w[2]+j*w[1]+P*w[0];const pe=y[q];q=ge+ye*w[2]+j*w[1]+P*w[0];const Se=y[q],De=ue+(ce-ue)*fe,N=pe+(Se-pe)*fe;q=ge+re*C[2]+M*C[1]+_*C[0],g.values[q]=De+(N-De)*ne}}}else for(let D=0;D<v;++D){const j=v>1?E*(h-1)+D*G:.5*(E+A)*(h-1);if(j<0||j>h-1){for(let de=0;de<f;de++){const he=de+D*C[2]+M*C[1]+_*C[0];g.values[he]=c}continue}const ne=Math.round(j),re=Math.round(R);for(let de=0;de<f;de++){const he=de+ne*w[2]+re*w[1]+P*w[0],ye=de+D*C[2]+M*C[1]+_*C[0];g.values[ye]=y[he]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const eoe={kernelName:_0,backendName:"cpu",kernelFunc:Zse};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;Ae(o,"cumprod");const l=Dt([r],o.shape.length);let c=o;l!=null&&(c=Jn({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=Ut(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=us(c.dtype,"int32"),h=l0(le(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,b)=>g+p-b-1:(g,b)=>g+b;for(let g=0;g<f.length;g+=p)for(let b=0;b<p;b++){const x=m(g,b);if(b===0)h[x]=i?1:f[x];else{const y=m(g,b-1);h[x]=i?f[y]*h[y]:f[x]*h[y]}}const v=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=mi(l),b=Jn({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),b}return v}const noe={kernelName:C0,backendName:"cpu",kernelFunc:toe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function soe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;Ae(o,"cumsum");const l=Dt([r],o.shape.length);let c=o;l!=null&&(c=Jn({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=Ut(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=us(c.dtype,"int32"),h=Sn(le(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(g,b)=>g+p-b-1:(g,b)=>g+b;for(let g=0;g<f.length;g+=p)for(let b=0;b<p;b++){const x=m(g,b);if(b===0)h[x]=i?0:f[x];else{const y=m(g,b-1);h[x]=i?f[y]+h[y]:f[x]+h[y]}}const v=n.makeTensorInfo(c.shape,d,h);if(l!=null){const g=mi(l),b=Jn({inputs:{x:v},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),b}return v}const ooe={kernelName:Vp,backendName:"cpu",kernelFunc:soe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function roe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,u=D1(l,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(o.shape.length===2){const l=n.bufferSync(o),c=n.bufferSync(r),u=RD(l,c,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const ioe={kernelName:S0,backendName:"cpu",kernelFunc:roe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aoe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockSize:r,dataFormat:i}=s;$(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*r,h=c*r,f=u/(r*r),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*h*f);let v=0;for(let g=0;g<a;++g)for(let b=0;b<d;++b){const x=Math.floor(b/r),y=b%r;for(let w=0;w<h;++w){const C=Math.floor(w/r),_=w%r,S=(y*r+_)*f;for(let I=0;I<f;++I){const O=I+S+u*(C+c*(x+l*g));m[v++]=p[O]}}}return n.makeTensorInfo([a,d,h,f],o.dtype,m)}const loe={kernelName:I0,backendName:"cpu",kernelFunc:aoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=s;Ae([o,r],"depthwiseConv2DNative");const u=Oe(o.shape),d=Oe(r.shape);let h=l;h==null&&(h=[1,1]),$(En(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const f=yn(o.shape,r.shape,i,h,a,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:v,dilationWidth:g,padInfo:b}=f,x=b.left,y=b.top,w=f.outChannels/f.inChannels,C=new bn(f.outShape,o.dtype),_=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,I=C.values;for(let E=0;E<f.batchSize;++E){const O=E*u[0],A=E*C.strides[0];for(let P=0;P<f.outHeight;++P){const z=A+P*C.strides[1],G=P*f.strideHeight-y;for(let M=0;M<p;++M){const R=G+M*v;if(R<0||R>=f.inHeight)continue;const D=M*d[0],j=O+R*u[1];for(let ne=0;ne<f.outWidth;++ne){const re=z+ne*C.strides[2],de=ne*f.strideWidth-x;for(let he=0;he<m;++he){const ye=de+he*g;if(ye<0||ye>=f.inWidth)continue;const fe=D+he*d[1],ge=j+ye*f.inChannels;let q=re,ue=fe;for(let ce=0;ce<f.inChannels;++ce){const pe=_[ge+ce];for(let Se=0;Se<w;++Se)I[q+Se]+=pe*S[ue+Se];q+=w,ue+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const coe={kernelName:Up,backendName:"cpu",kernelFunc:RO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uoe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=s;Ae([o,r],"depthwiseConv2dNativeBackpropFilter");const d=yn(o.shape,u,i,a,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,v=new bn(d.filterShape,"float32"),g=d.padInfo.left,b=d.padInfo.top,x=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,w=new bn(o.shape,o.dtype,y),C=n.data.get(r.dataId).values,_=new bn(r.shape,r.dtype,C);for(let S=0;S<p;++S){const I=Math.max(0,Math.ceil((b-S)/h)),E=Math.min(d.outHeight,(d.inHeight+b-S)/h);for(let O=0;O<m;++O){const A=Math.max(0,Math.ceil((g-O)/f)),P=Math.min(d.outWidth,(d.inWidth+g-O)/f);for(let z=0;z<d.outChannels;++z){const G=Math.trunc(z/x),M=z%x;let R=0;for(let D=0;D<d.batchSize;++D)for(let j=I;j<E;++j){const ne=S+j*h-b;for(let re=A;re<P;++re){const de=O+re*f-g;R+=w.get(D,ne,de,G)*_.get(D,j,re,z)}}v.set(R,S,O,G,M)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const doe={kernelName:E0,backendName:"cpu",kernelFunc:uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hoe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=s;Ae([o,r],"depthwiseConv2DNativeBackpropInput");const d=Oe(o.shape),h=Oe(r.shape),f=yn(u,r.shape,i,a,l,c,!0),p=new bn(f.inShape,"float32"),m=p.values,[v,g,b]=p.strides,x=n.data.get(o.dataId).values,[y,w,C]=d,_=n.data.get(r.dataId).values,[S,I,E]=h,{batchSize:O,filterHeight:A,filterWidth:P,inChannels:z,inHeight:G,inWidth:M,outChannels:R,outHeight:D,outWidth:j,strideHeight:ne,strideWidth:re}=f,de=A-1-f.padInfo.top,he=P-1-f.padInfo.left,ye=R/z;for(let fe=0;fe<O;++fe)for(let ge=0;ge<z;++ge)for(let q=0;q<G;++q){const ue=q-de,ce=Math.max(0,Math.ceil(ue/ne)),pe=Math.min(D,(A+ue)/ne);for(let Se=0;Se<M;++Se){const De=Se-he,N=Math.max(0,Math.ceil(De/re)),L=Math.min(j,(P+De)/re);let K=0;for(let oe=ce;oe<pe;++oe){const se=oe*ne-ue;for(let k=N;k<L;++k){const T=k*re-De,U=y*fe+w*oe+C*k,Y=S*(A-1-se)+I*(P-1-T)+E*ge;for(let ee=0;ee<ye;++ee){const ve=ge*ye+ee,B=x[U+ve],Z=_[Y+ee];K+=B*Z}}}m[v*fe+g*q+b*Se+ge]=K}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const foe={kernelName:k0,backendName:"cpu",kernelFunc:hoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function poe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=le(s.shape),r=n.data.get(s.dataId).values,i=qe([o,o],s.dtype),a=i.values;for(let c=0;c<r.length;c++)a[c*o+c]=r[c];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const moe={kernelName:JT,backendName:"cpu",kernelFunc:poe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const goe={kernelName:jp,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o}=t,{strides:r,pad:i,dilations:a}=n,l=e,c=l.data.get(s.dataId).values,u=s.shape.length,d=l.data.get(o.dataId).values,h=o.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:v,outHeight:g,outWidth:b,padInfo:x,strideHeight:y,strideWidth:w,filterHeight:C,filterWidth:_,dilationHeight:S,dilationWidth:I,outShape:E}=Td(s.shape,o.shape,r,i,"NHWC",a),O=le(E),A=E.length,P=Mt(s.dtype,O);for(let G=0;G<f;++G)for(let M=0;M<g;++M){const R=M*y-x.top;for(let D=0;D<b;++D){const j=D*w-x.left;for(let ne=0;ne<v;++ne){let re=Number.MIN_SAFE_INTEGER;for(let he=0;he<C;++he){const ye=R+he*S;if(ye>=0&&ye<p)for(let fe=0;fe<_;++fe){const ge=j+fe*I;if(ge>=0&&ge<m){const q=Do([G,ye,ge,ne],u,Oe(s.shape)),ue=Do([he,fe,ne],h,Oe(o.shape)),ce=c[q]+d[ue];ce>re&&(re=ce)}}}const de=Do([G,M,D,ne],A,Oe(E));P[de]=re}}}return{dataId:l.write(Sa(P,s.dtype),E,s.dtype),shape:E,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const voe={kernelName:yb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o,dy:r}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=oo(s.shape,c.data.get(s.dataId).values),d=oo(o.shape,c.data.get(o.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:v,outWidth:g,padInfo:b,strideHeight:x,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:S,outShape:I}=Td(s.shape,o.shape,i,a,"NHWC",l);$(r.rank===I.length,()=>`Error in ${yb}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const E=oo(I,c.data.get(r.dataId).values),O=qT(o.shape,o.dtype);for(let P=0;P<h;++P)for(let z=0;z<v;++z){const G=z*x-b.top;for(let M=0;M<g;++M){const R=M*y-b.left;for(let D=0;D<m;++D){let j=Number.MIN_SAFE_INTEGER,ne=0,re=0;for(let de=0;de<w;++de){const he=G+de*_;if(he>=0&&he<f)for(let ye=0;ye<C;++ye){const fe=R+ye*S;if(fe>=0&&fe<p){const ge=u[P][he][fe][D]+d[de][ye][D];ge>j&&(j=ge,ne=de,re=ye)}}}O[ne][re][D]+=E[P][z][M][D]}}}return{dataId:c.write(Sa(O,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const boe={kernelName:bb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:s,filter:o,dy:r}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=oo(s.shape,c.data.get(s.dataId).values),d=oo(o.shape,c.data.get(o.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:v,outWidth:g,padInfo:b,strideHeight:x,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:_,dilationWidth:S,outShape:I}=Td(s.shape,o.shape,i,a,"NHWC",l);$(r.rank===I.length,()=>`Error in ${bb}, dy must have the same rank as output ${I.length}, but got ${r.rank}`);const E=oo(I,c.data.get(r.dataId).values),O=qT(s.shape,s.dtype);for(let P=0;P<h;++P)for(let z=0;z<v;++z){const G=z*x-b.top;for(let M=0;M<g;++M){const R=M*y-b.left;for(let D=0;D<m;++D){let j=Number.MIN_SAFE_INTEGER,ne=G<0?0:G,re=R<0?0:R;for(let de=0;de<w;++de){const he=G+de*_;if(he>=0&&he<f)for(let ye=0;ye<C;++ye){const fe=R+ye*S;if(fe>=0&&fe<p){const ge=u[P][he][fe][D]+d[de][ye][D];ge>j&&(j=ge,ne=he,re=fe)}}}O[P][ne][re][D]+=E[P][z][M][D]}}}return{dataId:c.write(Sa(O,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yoe(t){const{inputs:e,backend:n,attrs:s}=t,{image:o}=e,{canvas:r,options:i}=s,{contextOptions:a,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=r.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,v=o.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let x=0;x<h*f;++x){const y=[0,0,0,255*c];for(let C=0;C<p;C++){const _=m[x*p+C];if(o.dtype==="float32"){if(_<0||_>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${_}.`)}else if(o.dtype==="int32"&&(_<0||_>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${_}.`);p===1?(y[0]=_*v,y[1]=_*v,y[2]=_*v):y[C]=_*v}const w=x*4;g[w+0]=Math.round(y[0]),g[w+1]=Math.round(y[1]),g[w+2]=Math.round(y[2]),g[w+3]=Math.round(y[3])}r.width=f,r.height=h;const b=new ImageData(g,f,h);return d.putImageData(b,0,0),o}const xoe={kernelName:Lq,backendName:"cpu",kernelFunc:yoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gd(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ae(o,"sum");let a;o.dtype==="bool"?a=ni({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=Wo({inputs:{x:o},backend:n});const l=a.shape.length,c=Xe(r,a.shape),u=Dt(c,l);let d=c,h=a;u!=null&&(h=Jn({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Ut(d.length,l)),xn("sum",d,h.shape.length);const[f,p]=pn(h.shape,d),m=us(h.dtype,"int32");let v=jf(n,f,m);const g=le(p),b=n.data.get(v.dataId).values,x=n.data.get(h.dataId).values;for(let y=0;y<b.length;++y){const w=y*g;let C=0;for(let _=0;_<g;++_)C+=x[w+_];b[y]=C}if(i){const y=Kt(v.shape,c),w=v;v=_t({inputs:{x:v},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),v}const woe={kernelName:wm,backendName:"cpu",kernelFunc:Gd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Coe(t){const{inputs:e,backend:n,attrs:s}=t,{equation:o}=s,r=e,{allDims:i,summedDims:a,idDims:l}=s1(o,r.length);r1(i.length,l,r);const{path:c,steps:u}=i1(a,l),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const v of u[m]){const{permutationIndices:g,expandDims:b}=o1(f,l[v]);let x;a1(g)?x=r[v]:(x=Jn({inputs:{x:r[v]},backend:n,attrs:{perm:g}}),p.push(x));const y=x.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);ct(x.shape,y)||(x=_t({inputs:{x},backend:n,attrs:{shape:y}}),p.push(x)),h===null?h=x:(h=Jm({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=Gd({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const _oe={kernelName:$0,backendName:"cpu",kernelFunc:Coe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Soe(t){const{inputs:e,backend:n}=t,{dy:s,y:o}=e;Ae([s,o],"eluGrad");const r=new Float32Array(le(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?r[l]=a[l]:r[l]=a[l]*(c+1)}return n.makeTensorInfo(o.shape,"float32",r)}const Ioe={kernelName:T0,backendName:"cpu",kernelFunc:Soe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe=Qx,koe=Yx,$oe=Jx,Toe=Zx,Noe=e1,Aoe=t1,Roe=ft(qu,t=>{const e=Math.sign(t),n=Math.abs(t),s=1/(1+Eoe*n);return e*(1-((((Aoe*s+Noe)*s+Toe)*s+$oe)*s+koe)*s*Math.exp(-n*n))}),Doe={kernelName:qu,backendName:"cpu",kernelFunc:Roe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(t){const{inputs:e,backend:n,attrs:s}=t,{input:o}=e,{dim:r}=s,i=o.shape.length,a=o.shape.slice();let l=r;return r<0&&($(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),a.splice(l,0,1),_t({inputs:{x:o},backend:n,attrs:{shape:a}})}const Ooe={kernelName:Wp,backendName:"cpu",kernelFunc:Gf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Loe=zt((t,e)=>t/e),B1=sn(Hu,Loe),Gb={kernelName:Hu,backendName:"cpu",kernelFunc:B1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DO(t,e,n){const s=t.shape,o=s[0],r=s[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[o,r],u=le(c),d=_n("float32",u),h=_n("float32",u);for(let v=0;v<o;v++){const g=ma({inputs:{x:a},backend:n,attrs:{begin:[v,0],size:[1,r]}}),b=ma({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,r]}}),x=os({inputs:{real:g,imag:b},backend:n}),{real:y,imag:w}=Foe(x,e,n),C=pr(y,w);for(let _=0;_<r;_++){const S=n1(C,_);d[v*r+_]=S.real,h[v*r+_]=S.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x)}const f=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",h),m=os({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function Foe(t,e,n){const s=le(t.shape),o=n.data.get(t.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(Poe(s)){const a=Hb(r,i,s,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",hi(s,"float32")),h=Wo({inputs:{x:d},backend:n}),f=Gb.kernelFunc({inputs:{a:c,b:d},backend:n}),p=Gb.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(f.dataId).values,v=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:v}}return a}else{const a=pr(r,i),l=Moe(a,s,e);return HA(l)}}function Poe(t){return(t&t-1)===0}function Hb(t,e,n,s,o){if(n===1)return{real:t,imag:e};const r=pr(t,e),i=n/2,a=KA(r),l=a.real,c=a.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),h=o.makeTensorInfo(u,"float32",c),f=os({inputs:{real:d,imag:h},backend:o}),p=qA(r),m=p.real,v=p.imag,g=[m.length],b=o.makeTensorInfo(g,"float32",m),x=o.makeTensorInfo(g,"float32",v),y=os({inputs:{real:b,imag:x},backend:o}),w=Hb(l,c,i,s,o),C=w.real,_=w.imag,S=[C.length],I=o.makeTensorInfo(S,"float32",C),E=o.makeTensorInfo(S,"float32",_),O=os({inputs:{real:I,imag:E},backend:o}),A=Hb(m,v,i,s,o),P=A.real,z=A.imag,G=[P.length],M=o.makeTensorInfo(G,"float32",P),R=o.makeTensorInfo(G,"float32",z),D=os({inputs:{real:M,imag:R},backend:o}),j=QA(n,s),ne=[j.real.length],re=o.makeTensorInfo(ne,"float32",j.real),de=o.makeTensorInfo(ne,"float32",j.imag),he=os({inputs:{real:re,imag:de},backend:o}),ye=Jm({inputs:{a:he,b:D},backend:o}),fe=Ml({inputs:{a:O,b:ye},backend:o}),ge=P1({inputs:{a:O,b:ye},backend:o}),q=pa({inputs:{input:fe},backend:o}),ue=pa({inputs:{input:ge},backend:o}),ce=Bl({inputs:{input:fe},backend:o}),pe=Bl({inputs:{input:ge},backend:o}),Se=Vl({inputs:[q,ue],backend:o,attrs:{axis:0}}),De=Vl({inputs:[ce,pe],backend:o,attrs:{axis:0}}),N=o.data.get(Se.dataId).values,L=o.data.get(De.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(R),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(re),o.disposeIntermediateTensorInfo(de),o.disposeIntermediateTensorInfo(he),o.disposeIntermediateTensorInfo(ye),o.disposeIntermediateTensorInfo(fe),o.disposeIntermediateTensorInfo(ge),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(Se),o.disposeIntermediateTensorInfo(De),{real:N,imag:L}}function Moe(t,e,n){const s=new Float32Array(e*2);for(let o=0;o<e;o++){let r=0,i=0;for(let a=0;a<e;a++){const l=YA(o*a,e,n),c=n1(t,a);r+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(r/=e,i/=e),XA(s,r,i,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Boe(t){const{inputs:e,backend:n}=t,{input:s}=e,o=le(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=_t({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=DO(a,!1,n),c=_t({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Voe={kernelName:N0,backendName:"cpu",kernelFunc:Boe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1(t){const{backend:e,attrs:n}=t,{shape:s,value:o,dtype:r}=n,i=r||Yl(o),a=Mt(i,le(s));return joe(a,o,i),e.makeTensorInfo(s,i,a)}const Uoe={kernelName:A0,backendName:"cpu",kernelFunc:V1};function joe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zoe={kernelName:R0,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,o=n,r=_n(s.dtype,le(s.shape)),[i,a,l,c]=s.shape,u=o.data.get(s.dataId).values;for(let h=0;h<i;h++){const f=h*l*a*c;for(let p=0;p<a;p++){const m=p*(l*c);for(let v=0;v<l;v++){const g=v*c;for(let b=0;b<c;b++){const x=Math.round(l-v-1),y=f+m+g+b;let w=u[y];if(x>=0&&x<l){const C=x*c,_=f+m+C+b;w=u[_]}r[y]=w}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Woe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=AO({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const v=m;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const g=_t({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Ml({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Ml({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=_t({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=Wf(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=Wf(n,m,f,a,p);n.disposeIntermediateTensorInfo(v)}return m}const Goe={kernelName:Cf,backendName:"cpu",kernelFunc:Woe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hoe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s;let m=RO({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(i){const v=m;m=Ml({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=m;m=Wf(n,m,f,a,p),n.disposeIntermediateTensorInfo(v)}return m}const Koe={kernelName:vN,backendName:"cpu",kernelFunc:Hoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qoe(t){const{inputs:e,backend:n}=t,{params:s,indices:o}=e,r=le(s.shape),i=o.shape,a=i[i.length-1],[l,c,u,d]=Bx(s,o);if(c===0)return n.makeTensorInfo(l,s.dtype,[]);const h=n.data.get(o.dataId).values,f=n.bufferSync(s),p=zD(h,f,s.dtype,c,a,u,d,s.shape,r);return n.makeTensorInfo(l,s.dtype,p.values)}const Xoe={kernelName:ZT,backendName:"cpu",kernelFunc:qoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qoe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,indices:r}=e,{axis:i,batchDims:a}=s;Ae([o,r],"gatherV2");const l=Xe(i,o.shape)[0],c=n.data.get(r.dataId).values,u=o.shape[l];for(let y=0;y<c.length;++y){const w=c[y];$(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const h=le(r.shape),f=c1(o,r,l,d),p=_t({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=_t({inputs:{x:r},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),v=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),b=n.bufferSync(p),x=WD(b,g,v);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,x.dtype,x.values)}const Yoe={kernelName:Hp,backendName:"cpu",kernelFunc:Qoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Joe(t){const{inputs:e,backend:n}=t,{input:s}=e,o=le(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=_t({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=DO(a,!0,n),c=_t({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Zoe={kernelName:D0,backendName:"cpu",kernelFunc:Joe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ere=ft(td,t=>Number.isFinite(t)?1:0,"bool"),tre={kernelName:td,backendName:"cpu",kernelFunc:ere};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nre=ft(nd,t=>Math.abs(t)===1/0?1:0,"bool"),sre={kernelName:nd,backendName:"cpu",kernelFunc:nre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ore=ft(sd,t=>Number.isNaN(t)?1:0,"bool"),rre={kernelName:sd,backendName:"cpu",kernelFunc:ore};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ire(t){const{backend:e,attrs:n}=t,{start:s,stop:o,num:r}=n,i=XD(s,o,r);return e.makeTensorInfo([i.length],"float32",i)}const are={kernelName:eN,backendName:"cpu",kernelFunc:ire};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lre=ft(rd,t=>Math.log1p(t)),cre={kernelName:rd,backendName:"cpu",kernelFunc:lre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ure=zt((t,e)=>t&&e),dre=sn(Yp,ure,null,"bool"),hre={kernelName:Yp,backendName:"cpu",kernelFunc:dre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fre=ft(Jp,t=>t?0:1,"bool"),pre={kernelName:Jp,backendName:"cpu",kernelFunc:fre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mre=zt((t,e)=>t||e),gre=sn(Zp,mre,null,"bool"),vre={kernelName:Zp,backendName:"cpu",kernelFunc:gre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{depthRadius:r,bias:i,alpha:a,beta:l}=s;Ae(o,"LRN");const c=o.shape[3],u=c-1,d=n.data.get(o.dataId).values,h=le(o.shape),f=new Float32Array(h);function p(m){const v=m%c;let g=m-v+Math.max(0,v-r);const b=m-v+Math.min(v+r,u);let x=0;for(;g<=b;g++){const y=d[g];x+=y*y}return x}for(let m=0;m<h;m++){const v=p(m),g=d[m]*Math.pow(i+a*v,-l);f[m]=g}return n.makeTensorInfo(o.shape,o.dtype,f)}const yre={kernelName:em,backendName:"cpu",kernelFunc:bre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,y:r,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=s;Ae(i,"LRNGrad");const d=le(i.shape),h=i.shape[3],f=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(r.dataId).values,v=new Float32Array(d),g=d;for(let b=0;b<g;b++){const x=b%h,y=b-x+Math.max(0,x-a),w=b-x+Math.min(h,x+a+1);let C=0;for(let _=y;_<w;_++)C+=Math.pow(p[_],2);C=c*C+l;for(let _=y;_<w;_++){let S=-2*c*u*p[_]*m[b]/C;b===_&&(S+=Math.pow(C,-u)),S*=f[b],v[_]+=S}}return n.makeTensorInfo(i.shape,o.dtype,v)}const wre={kernelName:L0,backendName:"cpu",kernelFunc:xre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OO(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reductionIndices:r,keepDims:i}=s,a=n;let l=o.shape;const c=l.length,u=Xe(r,l);let d=u;const h=Dt(d,c);let f=a.data.get(o.dataId).values;if(h!=null){const y=new Array(c);for(let w=0;w<y.length;w++)y[w]=l[h[w]];f=L1(f,l,o.dtype,h,y),d=Ut(d.length,c),l=y}Ae(o,"max"),xn("max",d,c);const[p,m]=pn(l,d),v=le(m),g=YD(f,v,p,o.dtype),b=a.write(g,p,o.dtype);let x=p;return i&&(x=Kt(p,u)),{dataId:b,shape:x,dtype:o.dtype}}const Cre={kernelName:tm,backendName:"cpu",kernelFunc:OO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Ae(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,c=1;$(En(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Hs(o.shape,r,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&ct(u.inShape,u.outShape))d=Wo({inputs:{x:o},backend:n});else{const h=n.data.get(o.dataId).values,f=Oe(o.shape),p=M1(h,o.shape,o.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const Sre={kernelName:nm,backendName:"cpu",kernelFunc:_re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ire(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=s;Ae(o,"maxPool3d");const u=xr(o.shape,r,i,1,a,l,c),d=n.data.get(o.dataId).values,h=NO(d,o.shape,o.dtype,Oe(o.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const Ere={kernelName:sm,backendName:"cpu",kernelFunc:Ire};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kre(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=s;Ae([o,r],"maxPool3DGrad");const u=xr(r.shape,i,a,1,l,c),d=n.bufferSync(r),h=mse(d,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,v=u.dilationDepth,g=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterDepth,y=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=x-1-u.padInfo.front,_=w-1-u.padInfo.left,S=y-1-u.padInfo.top,I=qe(r.shape,"float32"),E=n.bufferSync(o);for(let O=0;O<u.batchSize;++O)for(let A=0;A<u.inChannels;++A)for(let P=0;P<u.inDepth;++P)for(let z=0;z<u.inHeight;++z)for(let G=0;G<u.inWidth;++G){const M=P-C,R=z-S,D=G-_;let j=0;for(let ne=0;ne<x;ne+=v){const re=(M+ne)/f;if(!(re<0||re>=u.outDepth||Math.floor(re)!==re))for(let de=0;de<y;de+=g){const he=(R+de)/p;if(!(he<0||he>=u.outHeight||Math.floor(he)!==he))for(let ye=0;ye<w;ye+=b){const fe=(D+ye)/m;if(fe<0||fe>=u.outWidth||Math.floor(fe)!==fe)continue;const ge=x*y*w-1-h.get(O,re,he,fe,A),q=ne*y*w+de*w+ye,ue=ge===q?1:0;if(ue===0)continue;const ce=E.get(O,re,he,fe,A);j+=ce*ue}}}I.set(j,O,P,z,G,A)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const $re={kernelName:P0,backendName:"cpu",kernelFunc:kre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r,output:i}=e,a=r;Ae([r,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=s,h=Hs(a.shape,l,c,1,u,d),f=n.data.get(a.dataId).values,p=qe(h.outShape,a.dtype,TO(f,a.shape,a.dtype,h).values),m=h.strideHeight,v=h.strideWidth,g=h.dilationHeight,b=h.dilationWidth,x=h.effectiveFilterHeight,y=h.effectiveFilterWidth,w=y-1-h.padInfo.left,C=x-1-h.padInfo.top,_=qe(a.shape,"float32"),S=n.data.get(o.dataId).values,I=qe(o.shape,"float32",S);for(let E=0;E<h.batchSize;++E)for(let O=0;O<h.inChannels;++O)for(let A=0;A<h.inHeight;++A)for(let P=0;P<h.inWidth;++P){const z=A-C,G=P-w;let M=0;for(let R=0;R<x;R+=g){const D=(z+R)/m;if(!(D<0||D>=h.outHeight||Math.floor(D)!==D))for(let j=0;j<y;j+=b){const ne=(G+j)/v;if(ne<0||ne>=h.outWidth||Math.floor(ne)!==ne)continue;const re=x*y-1-p.get(E,D,ne,O),de=R*y+j,he=re===de?1:0;if(he===0)continue;const ye=I.get(E,D,ne,O);M+=ye*he}}_.set(M,E,A,P,O)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Nre={kernelName:F0,backendName:"cpu",kernelFunc:Tre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Are(t,e,n,s,o){const r=Oe(e),i=M1(t,e,n,r,o,"max"),a=TO(t,e,n,o,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rre={kernelName:tN,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=e,l=n;Ae(s,"MaxPoolWithArgmax");const c=l.data.get(s.dataId).values,u=Hs(s.shape,o,r,[1,1],i),[d,h]=Are(c,s.shape,s.dtype,a,u),f=l.write(d,u.outShape,s.dtype),p=l.write(h,u.outShape,s.dtype);return[{dataId:f,shape:u.outShape,dtype:s.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=Xe(r,o.shape),c=pn(o.shape,a)[1],u=le(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=ni({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=B1({inputs:{a:f,b:h},backend:n});d.push(p);const m=Gd({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const Ore={kernelName:om,backendName:"cpu",kernelFunc:Dre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;Ae(o,"min");const a=Xe(r,o.shape);let l=a;const c=Dt(l,o.shape.length);let u=o;c!=null&&(u=Jn({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Ut(l.length,o.shape.length)),xn("min",l,u.shape.length);const[d,h]=pn(u.shape,l),f=le(h),p=Sn(le(d),u.dtype),m=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const b=g*f;let x=m[b];for(let y=0;y<f;++y){const w=m[b+y];(Number.isNaN(w)||w<x)&&(x=w)}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,p);if(i){const g=Kt(d,a),b=_t({inputs:{x:v},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(v),b}return v}const Fre={kernelName:rm,backendName:"cpu",kernelFunc:Lre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,mode:i}=s;Ae(o,"mirrorPad");const a=r.map((x,y)=>x[0]+o.shape[y]+x[1]),l=r.map(x=>x[0]),c=r.map((x,y)=>x[0]+o.shape[y]),u=i==="reflect"?0:1,d=n.data.get(o.dataId).values,h=o.shape.length,f=Oe(o.shape),p=le(a),m=a.length,v=Oe(a),g=_n(o.dtype,p);for(let x=0;x<p;x++){let y=Jl(x,m,v);for(let C=0;C<m;C++)y[C]<l[C]?y[C]=l[C]*2-y[C]-u:y[C]>=c[C]&&(y[C]=(c[C]-1)*2-y[C]+u);y=y.map((C,_)=>C-l[_]);const w=Do(y,h,f);g[x]=d[w]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const Mre={kernelName:im,backendName:"cpu",kernelFunc:Pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=zt((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Vre=sn(ld,Bre),Ure={kernelName:ld,backendName:"cpu",kernelFunc:Vre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{dim:r}=s,i=o.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=Xe([a],o.shape),c=OO({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Kt(c.shape,l),d=_t({inputs:{x:c},backend:n,attrs:{shape:u}}),h=P1({inputs:{a:o,b:d},backend:n}),f=BD({inputs:{x:h},backend:n}),p=Gd({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=_t({inputs:{x:p},backend:n,attrs:{shape:u}}),v=B1({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}const jre={kernelName:Sm,backendName:"cpu",kernelFunc:LO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{numSamples:r,seed:i,normalized:a}=s;Ae(o,"multinomial");const l=a?o:LO({inputs:{logits:o},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,r],f=Sn(le(h),"int32");for(let p=0;p<c;++p){const m=p*u,v=new Float32Array(u-1);v[0]=d[m];for(let x=1;x<v.length;++x)v[x]=v[x-1]+d[m+x];const g=Sx.alea(i.toString()),b=p*r;for(let x=0;x<r;++x){const y=g();f[b+x]=v.length;for(let w=0;w<v.length;w++)if(y<v[w]){f[b+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const Wre={kernelName:nN,backendName:"cpu",kernelFunc:zre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gre=Dx;function Hre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s;Ae(o,"NonMaxSuppression");const c=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,{selectedIndices:d}=Gre(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Kre={kernelName:M0,backendName:"cpu",kernelFunc:Hre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qre=Ox;function Xre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=s;Ae(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:h,validOutputs:f}=qre(u,d,i,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Qre={kernelName:B0,backendName:"cpu",kernelFunc:Xre};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yre=Lx;function Jre(t){const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=s;Ae(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,h=i,f=a,p=l,m=c,{selectedIndices:v,selectedScores:g}=Yre(u,d,h,f,p,m);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Zre={kernelName:V0,backendName:"cpu",kernelFunc:Jre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o}=e,{dtype:r,depth:i,onValue:a,offValue:l}=s;Ae(o,"oneHot");const c=le(o.shape),u=new Float32Array(c*i);u.fill(l);const d=n.data.get(o.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<i&&(u[h*i+d[h]]=a);return n.makeTensorInfo([...o.shape,i],r,u)}const tie={kernelName:um,backendName:"cpu",kernelFunc:eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=pa({inputs:{input:s},backend:n}),r=Hf({inputs:{x:o},backend:n}),i=Bl({inputs:{input:s},backend:n}),a=Hf({inputs:{x:i},backend:n}),l=os({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return V1({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const nie={kernelName:km,backendName:"cpu",kernelFunc:Hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FO(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=pa({inputs:{input:s},backend:n}),r=FO({inputs:{x:o},backend:n}),i=Bl({inputs:{input:s},backend:n}),a=Hf({inputs:{x:i},backend:n}),l=os({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return V1({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const sie={kernelName:cm,backendName:"cpu",kernelFunc:FO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PO(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s;if(e.length===1)return Gf({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{a0(r,u.shape,"All tensors passed to stack must have matching shapes"),$(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=Gf({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),c=Vl({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const oie={kernelName:dm,backendName:"cpu",kernelFunc:PO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,constantValue:i}=s;Ae(o,"pad");const a=r.map((b,x)=>b[0]+o.shape[x]+b[1]),l=r.map(b=>b[0]),c=n.data.get(o.dataId).values,u=le(o.shape),d=o.shape.length,h=Oe(o.shape),f=le(a),p=a.length,m=Oe(a),v=_n(o.dtype,f);i!==0&&v.fill(i);for(let b=0;b<u;b++){const y=Jl(b,d,h).map((C,_)=>C+l[_]),w=Do(y,p,m);v[w]=c[b]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const MO={kernelName:hm,backendName:"cpu",kernelFunc:rie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iie=zt((t,e)=>Math.pow(t,e)),aie=sn(ud,iie),lie={kernelName:ud,backendName:"cpu",kernelFunc:aie};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cie(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:o,paramsDenseValues:r,indices:i}=e,a=o.map(v=>n.data.get(v.dataId).values),l=o.map(v=>v.shape),c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values,[d,h,f]=sO(a,l,c,r.shape,r.dtype,u,i.shape),p=d.map(v=>n.makeTensorInfo([v.length],"int32",v)),m=n.makeTensorInfo(f,r.dtype,h);return p.concat([m])}const uie={kernelName:sN,backendName:"cpu",kernelFunc:cie};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function die(t){const{inputs:e,backend:n}=t,{starts:s,limits:o,deltas:r}=e,i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[c,u]=oO(i,s.shape,s.dtype,a,o.shape,l,r.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],s.dtype,u);return[d,h]}const hie={kernelName:oN,backendName:"cpu",kernelFunc:die};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(t){const{inputs:e,backend:n,attrs:s}=t,{shape:o,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=s,c=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,d=n.data.get(i.dataId).values,h=a.map(v=>n.data.get(v.dataId).values),f=a.map(v=>v.shape),[p,m]=rO(c,o.shape,u,r.shape,r.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,r.dtype,m)}const pie={kernelName:rN,backendName:"cpu",kernelFunc:fie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t){const{backend:e,attrs:n}=t,{start:s,stop:o,dtype:r,step:i}=n,a=iO(s,o,i,r);return e.makeTensorInfo([a.length],r,a)}const gie={kernelName:U0,backendName:"cpu",kernelFunc:mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vie=ft(dd,t=>1/t),bie={kernelName:dd,backendName:"cpu",kernelFunc:vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s;Ae(o,"resizeBilinear");const l=Oe(o.shape),[c,u]=a,[d,h,f,p]=o.shape,m=n.data.get(o.dataId).values,v=new Float32Array(le([d,c,u,p])),g=[r&&c>1?h-1:h,r&&u>1?f-1:f],b=[r&&c>1?c-1:c,r&&u>1?u-1:u];let x=0;const y=g[0]/b[0],w=g[1]/b[1];for(let C=0;C<d;C++)for(let _=0;_<c;_++){let S;i?S=y*(_+.5)-.5:S=y*_;const I=Math.max(0,Math.floor(S)),E=S-I,O=Math.min(h-1,Math.ceil(S)),A=C*l[0]+I*l[1],P=C*l[0]+O*l[1];for(let z=0;z<u;z++){let G;i?G=w*(z+.5)-.5:G=w*z;const M=Math.max(0,Math.floor(G)),R=G-M,D=Math.min(f-1,Math.ceil(G)),j=A+M*l[2],ne=P+M*l[2],re=A+D*l[2],de=P+D*l[2];for(let he=0;he<p;he++){const ye=m[j+he],fe=m[ne+he],ge=m[re+he],q=m[de+he],ue=ye+(ge-ye)*R,ce=fe+(q-fe)*R,pe=ue+(ce-ue)*E;v[x++]=pe}}}return n.makeTensorInfo([d,c,u,p],"float32",v)}const xie={kernelName:vm,backendName:"cpu",kernelFunc:yie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s;Ae([r,o],"resizeBilinearGrad");const a=Oe(o.shape),[l,c,u,d]=o.shape,[,h,f]=r.shape,p=new Float32Array(l*c*u*d),m=[i&&h>1?c-1:c,i&&f>1?u-1:u],v=[i&&h>1?h-1:h,i&&f>1?f-1:f],g=m[0]/v[0],b=m[1]/v[1],x=n.data.get(r.dataId).values;let y=0;for(let w=0;w<l;w++){const C=w*a[0];for(let _=0;_<h;_++){const S=_*g,I=Math.floor(S),E=Math.min(Math.ceil(S),c-1),O=C+I*a[1],A=C+E*a[1],P=S-I,z=1-P;for(let G=0;G<f;G++){const M=G*b,R=Math.floor(M),D=Math.min(Math.ceil(M),u-1),j=M-R,ne=1-j,re=O+R*a[2],de=O+D*a[2],he=A+R*a[2],ye=A+D*a[2],fe=z*ne,ge=z*j,q=P*ne,ue=P*j;for(let ce=0;ce<d;ce++){const pe=x[y++];p[re+ce]+=pe*fe,p[de+ce]+=pe*ge,p[he+ce]+=pe*q,p[ye+ce]+=pe*ue}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const Cie={kernelName:W0,backendName:"cpu",kernelFunc:wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s;Ae(o,"resizeNearestNeighbor");const l=Oe(o.shape),[c,u]=a,[d,h,f,p]=o.shape,m=n.data.get(o.dataId).values,v=new Float32Array(d*c*u*p),g=[r&&c>1?h-1:h,r&&u>1?f-1:f],b=[r&&c>1?c-1:c,r&&u>1?u-1:u],x=g[0]/b[0],y=g[1]/b[1];let w=0;for(let C=0;C<d;C++){const _=C*l[0];for(let S=0;S<c;S++){const I=i?x*(S+.5):x*S;let E=Math.min(h-1,r?Math.round(I):Math.floor(I));i&&(E=Math.max(0,E));const O=_+E*l[1];for(let A=0;A<u;A++){const P=i?y*(A+.5):y*A;let z=Math.min(f-1,r?Math.round(P):Math.floor(P));i&&(z=Math.max(0,z));const G=O+z*l[2];for(let M=0;M<p;M++){const R=m[G+M];v[w++]=R}}}}return n.makeTensorInfo([d,c,u,p],o.dtype,v)}const Sie={kernelName:gm,backendName:"cpu",kernelFunc:_ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s;Ae([r,o],"resizeNearestNeighborGrad");const a=Oe(o.shape),l=Oe(r.shape),[c,u,d,h]=o.shape,[,f,p]=r.shape,m=new Float32Array(c*u*d*h),v=n.data.get(r.dataId).values,g=[i&&f>1?u-1:u,i&&p>1?d-1:d],b=[i&&f>1?f-1:f,i&&p>1?p-1:p],x=g[0]/b[0],y=g[1]/b[1],w=1/x,C=1/y,_=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let I=0;I<c;I++){const E=I*a[0];for(let O=0;O<u;O++){const A=E+O*a[1],P=Math.floor(O*w),z=Math.floor(P-_/2);for(let G=0;G<d;G++){const M=A+G*a[2],R=Math.floor(G*C),D=Math.floor(R-S/2);for(let j=0;j<h;j++){let ne=0;for(let re=0;re<_;re++){const de=re+z;if(de<0||de>=f)continue;const he=E+de*l[1],ye=de*x,fe=Math.min(u-1,i?Math.round(ye):Math.floor(ye));if(O===fe)for(let ge=0;ge<S;ge++){const q=ge+D;if(q<0||q>=p)continue;const ue=he+q*l[2],ce=q*y,pe=Math.min(d-1,i?Math.round(ce):Math.floor(ce));G===pe&&(ne+=v[ue+j])}}m[M+j]=ne}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const Eie={kernelName:z0,backendName:"cpu",kernelFunc:Iie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dims:r}=s;Ae(o,"reverse");const i=o.shape.length,a=Xe(r,o.shape);if(i===0)return Wo({inputs:{x:o},backend:n});const l=new bn(o.shape,o.dtype),c=n.bufferSync(o);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=o.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const $ie={kernelName:bm,backendName:"cpu",kernelFunc:kie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tie={kernelName:Y0,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:o,fillValue:r,center:i}=e,a=n,l=_n(s.dtype,le(s.shape)),[c,u,d,h]=s.shape,[f,p]=Kx(i,u,d),m=255,v=Math.sin(o),g=Math.cos(o),b=a.data.get(s.dataId).values;for(let y=0;y<c;y++){const w=y*d*u*h;for(let C=0;C<u;C++){const _=C*(d*h);for(let S=0;S<d;S++){const I=S*h;for(let E=0;E<h;E++){const O=[c,C,S,E],A=O[2],P=O[1];let z=(A-f)*g-(P-p)*v,G=(A-f)*v+(P-p)*g;z=Math.round(z+f),G=Math.round(G+p);let M=r;if(typeof r!="number"&&(E===3?M=m:M=r[E]),z>=0&&z<d&&G>=0&&G<u){const D=G*(d*h),j=z*h,ne=w+D+j+E;M=b[ne]}const R=w+_+I+E;l[R]=M}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nie=ft(pd,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Aie={kernelName:pd,backendName:"cpu",kernelFunc:Nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o,updates:r}=e,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$a(r,o,i),h=!0,f=n.bufferSync(o),p=n.bufferSync(r),m=ji(f,p,i,d,c,l,a,u,0,h);return n.makeTensorInfo(i,m.dtype,m.values)}const Die={kernelName:iN,backendName:"cpu",kernelFunc:Rie};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oie(t,e){let n=0,s=t.length,o=0;for(;n<s;)o=Math.floor((n+s)/2),t[o]<e?n=o+1:s=o;return s}function Lie(t,e){let n=0,s=t.length,o=0;for(;n<s;)o=Math.floor((n+s)/2),t[o]<=e?n=o+1:s=o;return s}function Fie(t,e,n,s,o,r){const i=Mt("int32",n*o);for(let a=0;a<n;++a){const l=t.slice(a*s,(a+1)*s),c=a*o;for(let u=0;u<o;++u)i[c+u]=r==="left"?Oie(l,e[u+c]):Lie(l,e[u+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pie(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:o,values:r}=e,{side:i}=s,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,c=Fie(a,l,o.shape[0],o.shape[1],r.shape[1],i);return n.makeTensorInfo(r.shape,"int32",c)}const Mie={kernelName:lN,backendName:"cpu",kernelFunc:Pie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(t){const{inputs:e,backend:n}=t,{condition:s,t:o,e:r}=e;Ae([s,o,r],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,u=us(o.dtype,r.dtype),d=Sn(le(o.shape),u);let h=0;const f=i===0||i>1||o.shape.length===1?1:le(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=c[p];return n.makeTensorInfo(o.shape,u,d)}const Vie={kernelName:ym,backendName:"cpu",kernelFunc:Bie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uie=Bm,jie=Vm,zie=ft(gd,t=>t>=0?jie*t:Uie*(Math.exp(t)-1)),Wie={kernelName:gd,backendName:"cpu",kernelFunc:zie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gie=ft(yd,t=>t<0?-1:t>0?1:0),Hie={kernelName:yd,backendName:"cpu",kernelFunc:Gie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kie=ft(vd,t=>Math.sin(t)),qie={kernelName:vd,backendName:"cpu",kernelFunc:Kie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xie=ft(bd,t=>Math.sinh(t)),Qie={kernelName:bd,backendName:"cpu",kernelFunc:Xie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=11920928955078125e-23,sI=Math.log(Yie)+2,Jie=ft(wd,t=>{const e=t>-sI,n=t<sI,s=Math.exp(t);let o;return n?o=s:e?o=t:o=Math.log(1+s),o}),Zie={kernelName:wd,backendName:"cpu",kernelFunc:Jie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,paddings:i}=s;Ae([o],"spaceToBatchND");const a=le(r),l=[[0,0]];l.push(...i);for(let C=1+r.length;C<o.shape.length;++C)l.push([0,0]);const c=MO.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),u=Od(c.shape,r,a,!1),d=Ld(u.length,r.length,!1),h=Fd(c.shape,r,a,!1),m=_t({inputs:{x:c},backend:n,attrs:{shape:u}}),b=Jn({inputs:{x:m},backend:n,attrs:{perm:d}}),w=_t({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),w}const tae={kernelName:Cm,backendName:"cpu",kernelFunc:eae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nae(t){const{inputs:e,backend:n}=t,{indices:s,values:o,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,u=n.data.get(i.dataId).values[0],[d,h,f,p,m]=uO(a,s.shape,s.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],o.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const sae={kernelName:cN,backendName:"cpu",kernelFunc:nae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:o,newShape:r}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(s.dataId).values,l=Array.from(n.data.get(r.dataId).values),[c,u,d]=dO(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(u,s.dtype,c),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const rae={kernelName:uN,backendName:"cpu",kernelFunc:oae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[c,u]=F1(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(u,s.dtype,c)}const aae={kernelName:dN,backendName:"cpu",kernelFunc:iae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[c,u]=F1(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(u,s.dtype,c)}const cae={kernelName:hN,backendName:"cpu",kernelFunc:lae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:o,sparseValues:r,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=$a(r,o,a),f=!1,p=n.bufferSync(o);let m;switch(r.dtype){case"bool":{const v=n.bufferSync(r),g=!!n.data.get(i.dataId).values[0];m=ji(p,v,a,h,u,c,l,d,g,f);break}case"float32":{const v=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=ji(p,v,a,h,u,c,l,d,g,f);break}case"int32":{const v=n.bufferSync(r),g=n.data.get(i.dataId).values[0];m=ji(p,v,a,h,u,c,l,d,g,f);break}case"string":{const v=n.bufferSync(r),g=Yr(n.data.get(i.dataId).values[0]);m=ji(p,v,a,h,u,c,l,d,g,f);break}default:throw new Error(`Unsupported type ${r.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const dae={kernelName:fN,backendName:"cpu",kernelFunc:uae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{numOrSizeSplits:r,axis:i}=s,a=Xe(i,o.shape)[0],l=l1(o,r,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const f=ma({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,f})}const fae={kernelName:_m,backendName:"cpu",kernelFunc:hae};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pae={kernelName:G0,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,s=e;Ae(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];r[a]=l*l}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mae=ft($d,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),gae={kernelName:$d,backendName:"cpu",kernelFunc:mae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=s;Ae(o,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:v,isSimpleSlice:g,begin:b,end:x,strides:y}=Wx(o.shape,r,i,a,l,c,u,d,h);let w;if(m)w=_t({inputs:{x:o},backend:n,attrs:{shape:p}});else if(v||g){$(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=Ux(b,x,y),_=ma({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});w=_t({inputs:{x:_},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(_)}else{const C=n.bufferSync(o),_=pO(f,C,y,b);w=n.makeTensorInfo(p,_.dtype,_.values)}return w}const bae={kernelName:K0,backendName:"cpu",kernelFunc:vae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t){const{inputs:e,backend:n,attrs:s}=t,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=s,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[p,m]=mO(h,f,o,r,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const xae={kernelName:pN,backendName:"cpu",kernelFunc:yae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:o}=s,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,d]=gO(a,l,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Cae={kernelName:mN,backendName:"cpu",kernelFunc:wae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:o}=s,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=vO(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const Sae={kernelName:gN,backendName:"cpu",kernelFunc:_ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iae=ft(Id,t=>Math.tan(t)),Eae={kernelName:Id,backendName:"cpu",kernelFunc:Iae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kae=ft(Ed,t=>Math.tanh(t)),$ae={kernelName:Ed,backendName:"cpu",kernelFunc:kae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tae(t){const{inputs:e,backend:n}=t,{tensor:s,indices:o,updates:r}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=$a(r,o,s.shape),d=!1,h=n.bufferSync(o),f=n.bufferSync(r),p=n.bufferSync(s),m=ji(h,f,s.shape,u,l,a,i,c,p,d);return n.makeTensorInfo(s.shape,m.dtype,m.values)}const Nae={kernelName:aN,backendName:"cpu",kernelFunc:Tae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reps:r}=s;Ae(o,"tile");const i=yO(n.bufferSync(o),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Rae={kernelName:kd,backendName:"cpu",kernelFunc:Aae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{k:r,sorted:i}=s;Ae(o,"topk");const a=n.data.get(o.dataId).values,[l,c]=wO(a,o.shape,o.dtype,r,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const Oae={kernelName:q0,backendName:"cpu",kernelFunc:Dae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t){const{inputs:e,attrs:n,backend:s}=t,{image:o,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,h,f]=o.shape,[p,m]=c??[d,h],v=[u,p,m,f],g=Oe(o.shape),b=g[0],x=g[1],y=g[2],w=Oe(v),C=w[0],_=w[1],S=w[2],I=_n(o.dtype,le(v));I.fill(l);const E=s.data.get(o.dataId).values,O=s.data.get(r.dataId).values;for(let P=0;P<u;++P){const z=r.shape[0]===1?O:O.subarray(P*8,P*8+8);for(let G=0;G<p;++G)for(let M=0;M<m;++M)for(let R=0;R<f;++R){let D;const j=z[6]*M+z[7]*G+1;if(j===0)continue;const ne=(z[0]*M+z[1]*G+z[2])/j,re=(z[3]*M+z[4]*G+z[5])/j,de=oI(ne,h,a),he=oI(re,d,a);switch(i){case"nearest":D=Uae(E,d,h,b,x,y,P,he,de,R,l);break;case"bilinear":D=jae(E,d,h,b,x,y,P,he,de,R,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ye=P*C+G*_+M*S+R;I[ye]=D}return s.makeTensorInfo(v,o.dtype,I)}return{dataId:s.write(I,v,o.dtype),shape:o.shape,dtype:o.dtype}}const Fae={kernelName:X0,backendName:"cpu",kernelFunc:Lae};function oI(t,e,n){switch(n){case"reflect":return Pae(t,e);case"wrap":return Mae(t,e);case"nearest":return Vae(t,e);case"constant":default:return Bae(t)}}function Pae(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=2*e;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-e?n+s:-n-1}else if(n>e-1)if(e<=1)n=0;else{const s=2*e;n-=s*Math.trunc(n/s),n>=e&&(n=s-n-1)}return na(0,n,e-1)}function Mae(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const s=e-1;n+=e*(Math.trunc(-n/s)+1)}else if(n>e-1)if(e<=1)n=0;else{const s=e-1;n-=e*Math.trunc(n/s)}return na(0,n,e-1)}function Bae(t,e){return t}function Vae(t,e){return na(0,t,e-1)}function Ac(t,e,n,s,o,r,i,a,l,c,u){const d=i*s+a*o+l*r+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function Uae(t,e,n,s,o,r,i,a,l,c,u){const d=Math.round(a),h=Math.round(l);return Ac(t,e,n,s,o,r,i,d,h,c,u)}function jae(t,e,n,s,o,r,i,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*Ac(t,e,n,s,o,r,i,d,h,c,u)+(l-h)*Ac(t,e,n,s,o,r,i,d,p,c,u),v=(p-l)*Ac(t,e,n,s,o,r,i,f,h,c,u)+(l-h)*Ac(t,e,n,s,o,r,i,f,p,c,u);return(f-a)*m+(a-d)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zae(t){const{inputs:e,attrs:n,backend:s}=t,{axis:o}=n,{x:r}=e;Ae(r,"unique");const i=s.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:c}=CO(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([c.length],"int32",c)]}const Wae={kernelName:Q0,backendName:"cpu",kernelFunc:zae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(t){const{inputs:e,backend:n,attrs:s}=t,{value:o}=e;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o.shape.length,a=o.shape[r],l=new Array(i-1);let c=0;for(let f=0;f<i;f++)f!==r&&(l[c++]=o.shape[f]);const u=new Array(i).fill(0),d=o.shape.slice();d[r]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[r]=f;const p=ma({inputs:{x:o},backend:n,attrs:{begin:u,size:d}});h[f]=_t({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const Hae={kernelName:Im,backendName:"cpu",kernelFunc:Gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kae(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,segmentIds:r}=e,{numSegments:i}=s;Ae(o,"unsortedSegmentSum");const a=o.shape.length,l=r.shape.length,c=[],u=[],d=a-l;let h=r;for(let p=0;p<d;++p){const m=Gf({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,u.push(m)}for(let p=0;p<i;++p){const m=hi(p,"int32"),v=n.makeTensorInfo([],"int32",m),g=PD({inputs:{a:v,b:h},backend:n}),b=ni({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=Jm({inputs:{a:b,b:o},backend:n}),y=Gd({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});c.push(y),u.push(v),u.push(g),u.push(b),u.push(x),u.push(y)}const f=PO({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const qae={kernelName:Em,backendName:"cpu",kernelFunc:Kae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xae=[zne,_te,Gne,Kne,Tte,Xne,Yne,Zne,tse,sse,rse,ase,cse,hse,pse,vse,yse,wse,_se,Une,Ise,kse,Tse,Ate,Ase,kte,Dte,Dse,Ste,Lse,Pse,Mse,Vse,jse,Wse,Hse,qse,Qse,Jse,eoe,noe,ooe,ioe,loe,coe,doe,foe,moe,goe,voe,boe,xoe,_oe,One,Ioe,Ote,Doe,Lte,Ooe,Pte,Voe,Uoe,zoe,Bte,Ute,Goe,Koe,Xoe,Yoe,zte,Gte,Ite,Zoe,Fse,tre,sre,rre,Lne,Kte,Xte,are,Yte,cre,hre,pre,vre,yre,wre,Cre,Zte,Sre,Ere,$re,Nre,Rre,Ore,Fre,tne,Mre,Ure,Wre,sne,rne,Kre,Qre,Zre,ane,tie,sie,oie,MO,lie,Pne,une,uie,hie,pie,gie,Ete,Gb,bie,Mne,Bne,Vne,xie,Cie,Sie,Eie,$ie,Tie,Aie,bne,Die,Mie,Vie,Wie,xne,Hie,qie,Qie,wne,jre,Zie,tae,sae,rae,aae,cae,dae,fae,Sne,pae,Ene,$ne,gae,bae,xae,Cae,Sae,Rne,woe,Eae,$ae,Nae,Rae,Oae,Fae,lne,Wae,Hae,qae,nie];for(const t of Xae)bN(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fi={},_h={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Qae(t,e){Fi[t]=e}function po(t,e){if(!(t in Fi)||e!=null){const s=Jae(t,e);if(s!==null)Fi[t]=s;else return console.log("Could not get context for WebGL version",t),null}const n=Fi[t];return n==null||n.isContextLost()?(delete Fi[t],po(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Fi[t])}function Yae(t){if(!te().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Jae(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Yae(t);return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete Fi[t]},!1),te().getBool("SOFTWARE_WEBGL_ENABLED")&&(_h.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",_h)||n.getContext("experimental-webgl",_h):n.getContext("webgl2",_h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gu;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(gu||(gu={}));var vs;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(vs||(vs={}));var vn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(vn||(vn={}));function Hd(t,e){return[e,t]}function Zae(t,e){return t*e}function Sh(t){const e=le(t),n=Math.ceil(e/4);return pb(n)}function rc(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function ele(t,e){const[n,s]=rc(t,e);return n*s*4}function U1(t,e){const n=t;let s,o,r,i,a,l,c,u,d,h;return te().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(s=t.RGBA,o=t.RGBA,r=t.RGBA,i=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $e(t,e){const n=e();return te().getBool("DEBUG")&&tle(t),n}function tle(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+rle(t,e))}const nle=596e-10,sle=65504;function ole(t){return!!(te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||nle<Math.abs(t)&&Math.abs(t)<sle)}function rle(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Ih(t,e){return Cr(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function ile(t,e){const n=Cr(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function ale(t,e){const n=Cr(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if($e(t,()=>t.shaderSource(n,e)),$e(t,()=>t.compileShader(n)),te().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw BO(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const lle=/ERROR: [0-9]+:([0-9]+):/g;function BO(t,e){const n=lle.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const s=+n[1],o=t.split(`
`),r=o.length.toString().length+2,i=o.map((d,h)=>hl((h+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,s-1),c=i.slice(s-1,s),u=i.slice(s);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${hl(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function cle(t){return Cr(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ule(t,e){if($e(t,()=>t.linkProgram(e)),!te().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function ov(t,e){if($e(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function dle(t,e){const n=Cr(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function hle(t,e){const n=Cr(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return $e(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),$e(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function fle(t){return Cr(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ple(t,e){const n=te().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const s=`[${t}x${e}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(t>n||e>n){const s=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function mle(t){return Cr(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function rI(t,e,n,s,o,r,i){const a=t.getAttribLocation(e,n);return a===-1?!1:($e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,s)),$e(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,r,i)),$e(t,()=>t.enableVertexAttribArray(a)),!0)}function gle(t,e,n){wle(t,n),$e(t,()=>t.activeTexture(t.TEXTURE0+n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function vle(t,e,n){return Cr(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ble(t,e,n){return t.getUniformLocation(e,n)}function yle(t,e,n,s){$e(t,()=>gle(t,e,s)),$e(t,()=>t.uniform1i(n,s))}function rv(t,e,n){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function iI(t,e){$e(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),$e(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Eh(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+xle(t,e))}function xle(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Cr(t,e,n){const s=$e(t,()=>e());if(s==null)throw new Error(n);return s}function wle(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=e+t.TEXTURE0;if(s<t.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Ul(t,e=2){return le(t.slice(0,t.length-e))}function jl(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function kh(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Ul(t),...jl(t)]),e}function Cle(t,e=!1){let n=te().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=te().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&te().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=n/2),e&&(n=n*2,s=s*2,t=t.map((a,l)=>l>=t.length-2?i0(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=di(t).newShape);let o=le(t),r=null;t.length<=1&&o<=n?r=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?r=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?r=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?r=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?r=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(r=[t[0],t[1]*t[2]*t[3]]);const i=r!=null&&Math.max(...r)>s&&Math.min(...r)<=(e?2:1)&&Math.min(...r)>0;if(r==null||i)if(e){const a=Ul(t);let l=2,c=2;t.length&&([l,c]=jl(t)),o=a*(l/2)*(c/2),r=pb(o).map(u=>u*2)}else r=pb(o);return r}function $h(t){return t%2===0}function Kf(t,e){if(t=t.slice(-2),e=e.slice(-2),ct(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],s=e[e.length-1];if(n===s||$h(n)&&$h(s)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&$h(t[0])&&$h(e[0])}let iv,av;function _le(t){if(iv==null){const e=po(t);iv=e.getParameter(e.MAX_TEXTURE_SIZE)}return iv}function Sle(t){if(av==null){const e=po(t);av=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,av)}function Ile(t){if(t===0)return 0;let e;const n=po(t);return Ps(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ps(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ps(t,e){return t.getExtension(e)!=null}function aI(t){try{if(po(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Ele(t){if(t===0)return!1;const e=po(t);if(t===1){if(!Ps(e,"OES_texture_float"))return!1}else if(!Ps(e,"EXT_color_buffer_float"))return!1;return Kb(e)}function kle(t){if(t===0)return!1;const e=po(t);if(t===1){if(!Ps(e,"OES_texture_float")||!Ps(e,"WEBGL_color_buffer_float"))return!1}else{if(Ps(e,"EXT_color_buffer_float"))return Kb(e);const s="EXT_color_buffer_half_float";if(Ps(e,s)){const o=e.getExtension(s);return $le(e,o)}return!1}return Kb(e)}function Kb(t){const e=U1(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function $le(t,e){const n=U1(t,e),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(s),t.deleteFramebuffer(i),a}function Tle(t){return t!==2?!1:po(t).fenceSync!=null}function Kd(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&$(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Re=te();Re.registerFlag("HAS_WEBGL",()=>Re.getNumber("WEBGL_VERSION")>0);Re.registerFlag("WEBGL_VERSION",()=>aI(2)?2:aI(1)?1:0);Re.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Re.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Re.get("WEBGL_VERSION")===2);Re.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Re.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Re.registerFlag("WEBGL_PACK",()=>Re.getBool("HAS_WEBGL"));Re.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_CLIP",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_REDUCE",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_LAZILY_UNPACK",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_CONV_IM2COL",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>_le(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Sle(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Re.getNumber("WEBGL_VERSION");return t===0?0:Ile(t)});Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Re.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!LN());Re.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Ele(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Re.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Re.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Re.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>kle(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Tle(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Re.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Re.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Re.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>LN()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Re.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Re.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Re.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Re.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Re.registerFlag("WEBGL_EXP_CONV",()=>!1);Re.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Re.getBool("IS_TEST"));Re.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Re.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Re.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Re.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mn(){let t,e,n,s,o,r,i,a,l,c;return te().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",s="in",o="texture",r="outputColor",i="out vec4 outputColor;",a=te().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aa(t,e,n="index"){const s=Oe(e);return s.map((o,r)=>{const i=`int ${t[r]} = ${n} / ${o}`,a=r===s.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${o}`:`index -= ${t[r]} * ${o}`;return`${i}; ${a};`}).join("")}function Zm(t,e,n="index"){const s=Oe(e);return s.map((o,r)=>{const i=`int ${t[r]} = ${n} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * outShapeStrides[${r}]`:`index -= ${t[r]} * outShapeStrides[${r}]`;return`${i}; ${a};`}).join("")}function Nle(t,e){const n=t.length,s=t.map(r=>`${e}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function Ale(t,e,n="index"){const s=t.map((r,i)=>i),o=Nle(s,e);return o.map((r,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function j1(t){const e=Oe(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function z1(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const VO=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:UO}=b9;function Rle(t,e,n){const s=[];if(t.forEach(f=>{const p=le(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?s.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${f.name};`),s.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=W1(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:s.push(`uniform int ${f.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${f.name}Shape;`);break}s.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{s.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const o=s.join(`
`),r=t.map(f=>Dle(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=Mn(),l=Fle(a);let c,u,d=Ble(a);return e.isPacked?(c=Ole(e.logicalShape,i,n.enableShapeUniforms),u=Mle(a)):(c=Lle(e.logicalShape,i,n.enableShapeUniforms),u=Ple(a)),n.packedInputs&&(d+=zle),[d,l,u,o,c,r,n.userCode].join(`
`)}function ic(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return tce(t,e);case 1:return sce(t,e);case 2:return rce(t,e);case 3:return ace(t,e);case 4:return cce(t,e);case 5:return uce(t);case 6:return dce(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function jO(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return ece(t);case 1:return nce(t,e);case 2:return oce(t,e);case 3:return ice(t,e);default:return lce(t,e)}}function Dle(t,e,n=!1,s){let o="";n?o+=jO(t,s):o+=ic(t,s);const r=t.shapeInfo.logicalShape,i=e.logicalShape;return r.length<=i.length&&(n?o+=hce(t,e):o+=fce(t,e)),o}function Ole(t,e,n){switch(t.length){case 0:return zO();case 1:return Wle(t,e,n);case 2:return Jle(t,e,n);case 3:return Hle(t,e,n);default:return qle(t,e,n)}}function Lle(t,e,n){switch(t.length){case 0:return zO();case 1:return Gle(t,e,n);case 2:return Zle(t,e,n);case 3:return Kle(t,e,n);case 4:return Xle(t,e,n);case 5:return Qle(t,e);case 6:return Yle(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function Fle(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Ple(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Mle(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Ble(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Vle}
    ${Ule}
    ${jle}
  `}const Vle=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ule=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jle=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zle=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function zO(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Wle(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function Gle(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Hle(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),r=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function Kle(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Zm(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const s=Aa(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function qle(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),r=o*Math.ceil(t[t.length-2]/2);let i=r,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],a=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Xle(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Zm(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const s=Aa(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function Qle(t,e){const n=Aa(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Yle(t,e){const n=Aa(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Jle(t,e,n){const s=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(ct(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function Zle(t,e,n){return ct(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Ra(t){return`offset${t}`}function ece(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),s=Mn();return`
    vec4 ${n}() {
      return ${s.texture2D}(${e}, halfCR);
    }
  `}function tce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=t.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Ra(n);if(e)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function nce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,r=Mn();if(e)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function sce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${ac(t)}
      }
    `;const o=t.shapeInfo.texShape,r=o[0],i=o[1];if(i===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Ra(n);return i===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?e?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function oce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape,i=r[0],a=r[1],l=Mn();if(r!=null&&ct(n,r))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const c=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function rce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape;if(r!=null&&ct(n,r)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const h=r[0],f=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=di(n),l=i;if(l.length<n.length){const h=lc(t,l),f=["row","col"];return`
      ${ic(h,e)}
      float ${o}(int row, int col) {
        return ${o}(${cc(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ac(t)}
      }
    `;const c=r[0],u=r[1],d=Ra(s);return u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${s}, uv);
    }
  `:c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${s}, uv);
  }
`}function ice(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=lc(t,h),m=["b","row","col"];return`
        ${jO(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${cc(m,f)});
        }
      `}const a=Mn();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=i[0],c=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function ace(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=di(n),c=a;if(c.length<n.length){const m=lc(t,c),v=["row","col","depth"];return`
        ${ic(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${cc(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${i}, 1)));
        ${ac(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===r&&f==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(h===i&&f==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=Ra(s);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${s}, uv);
      }
  `}function lce(t,e){const n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Mn();if(e)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=t.shapeInfo.logicalShape,i=r.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(r[i-1]/2);let h=d*Math.ceil(r[i-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)f=`int b${m}, `+f,h*=r[i-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${s}(${f}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${n}, uv);
    }
  `}function cce(t,e){const n=t.shapeInfo.logicalShape,s=t.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:l,keptDims:c}=di(n);if(l.length<n.length){const b=lc(t,l),x=["row","col","depth","depth2"];return`
      ${ic(b,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${cc(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${r}, 1)));
        ${ac(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${s}Shape[3];`,m=`int stride1 = ${s}Shape[2] * stride2;`,v=`int stride0 = ${s}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(f===r&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${s}, uv);
      }
    `;const g=Ra(s);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${g});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${g});
      return sampleTexture(${s}, uv);
    }
  `}function uce(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],r=e[3]*o,i=e[2]*r,a=e[1]*i,{newShape:l,keptDims:c}=di(e);if(l.length<e.length){const m=lc(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${ic(m)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${cc(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${r}, ${o})) +
          depth3;
        ${ac(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&u==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===o&&u==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Ra(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function dce(t){const e=t.shapeInfo.logicalShape,n=t.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=di(e);if(o.length<e.length){const v=lc(t,o),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${ic(v)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${cc(g,r)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${ac(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Ra(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ac(t){const e=t.name,n=le(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function hce(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=UO(t.shapeInfo.logicalShape,e.logicalShape),l=gt(i),c=i-r;let u;const d=["x","y","z","w","u","v"];r===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let h="";i<2&&r>0?h="coords":h=t.shapeInfo.logicalShape.map((b,x)=>`coords.${d[x+c]}`).join(", ");let f="return outputValue;";const m=le(t.shapeInfo.logicalShape)===1,g=le(e.logicalShape)===1;if(r===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)i===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,x=r-1;a.indexOf(b)>-1&&a.indexOf(x)>-1?f="return vec4(outputValue.x);":a.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${s}(${h});
      ${f}
    }
  `}function fce(t,e){const n=t.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&ct(i,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=gt(l),u=UO(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${s}(${p});
    }
  `}function gt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function W1(t,e,n){const{newShape:s,keptDims:o}=di(e),r=e.length,i=t&&r===3&&e[0]===1,a=i?e.slice(1):s,l=!t&&r>1&&!ct(e,n)&&s.length<r||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:o}}function lc(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function cc(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pce(t,e,n,s){const o=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),r=o.map(u=>u.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=Rle(o,i,e),l=ale(t.gl,a),c=t.createProgram(l);return te().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:i},WO(t,e,c)))}function WO(t,e,n){const s=[],o=[];let r,i,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),te().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),s.push(h)}if(e.enableShapeUniforms&&(r=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),i=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:s,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:i}}function lI(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,s)=>{const o=n.logicalShape,r=e[s],i=r.shape;if(!ct(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!ct(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function mce(t,e,n,s,o){e.program.enableShapeUniforms||(lI(e.inShapeInfos,n),lI([e.outShapeInfo],[s]));const r=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):t.setOutputMatrixTexture(r.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),te().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=W1(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(le(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(s.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(s.shape));break}if(e.outShapeStridesLocation){const l=Oe(s.shape);switch(s.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),e.program.customUniforms&&o)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=o[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function gce(t,e,n){let s="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=W1(t.packedInputs,i.shape,l);let h="",f="",p="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=Oe(u);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=i.shape.length,v=u.length===2&&ct(i.shape,l),g=le(i.shape)===1,b=Ll(i.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&ct(l,n.texData.texShape),y=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${m}_${x}_${c?d:""}_${u.length}_${g}_${b}_${v}_${h}_${f}_${p}_${y}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${a}`}});const o=t.userCode;let r=t.constructor.name;return r+="_"+s+"_"+o+`${te().getNumber("WEBGL_VERSION")}`,r}function $n(t){return te().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vce{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=gu.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Mn();this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Zm(["r","c","d"],e):Aa(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=gu.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Mn();this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Zm(["r","c","d"],e):Aa(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yce{constructor(e){this.variableNames=["A"],this.outTexUsage=vs.DOWNLOAD;const n=Mn();this.outputShape=e,this.userCode=`
      ${VO}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xce{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=vs.DOWNLOAD;const n=Mn();this.outputShape=e,this.userCode=`
      ${VO}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wce={R:0,G:1,B:2,A:3};class cI{constructor(e,n=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=Mn();this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length);let r="result";n&&(r="floor(result * 255. + 0.5)");let i="";for(let a=0;a<s.length;a++){const l=s[a];i+=`
          if(offset == ${a}) {
            result = values[${wce[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?z1():j1(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${r}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cce{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Mn();this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?z1():j1(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ce(t){const e=Mn(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return ile(t,n)}function Sce(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return dle(t,e)}function Ice(t){const e=new Uint16Array([0,1,2,2,1,3]);return hle(t,e)}function qd(t,e,n,s,o,r){ple(e,n);const i=fle(t),a=t.TEXTURE_2D;return $e(t,()=>t.bindTexture(a,i)),$e(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),$e(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),$e(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),te().getNumber("WEBGL_VERSION")===1?$e(t,()=>t.texImage2D(a,0,s,e,n,0,o,r,null)):$e(t,()=>t.texStorage2D(a,1,s,e,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function GO(t){return t.internalFormatFloat}function Ece(t,e,n,s){const[o,r]=Hd(e,n);return qd(t,o,r,GO(s),s.textureFormatFloat,t.FLOAT)}function HO(t){return t.internalFormatHalfFloat}function kce(t,e,n,s){const[o,r]=Hd(e,n);return qd(t,o,r,HO(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function KO(t){return t.downloadTextureFormat}function $ce(t,e,n,s){const[o,r]=Hd(e,n);return qd(t,o,r,KO(s),t.RGBA,t.UNSIGNED_BYTE)}function qO(t){return t.internalFormatPackedFloat}function Tce(t,e,n,s){const[o,r]=rc(e,n);return qd(t,o,r,qO(s),t.RGBA,t.FLOAT)}function XO(t){return t.internalFormatPackedHalfFloat}function Nce(t,e,n,s){const[o,r]=rc(e,n);return qd(t,o,r,XO(s),t.RGBA,s.textureTypeHalfFloat)}function Ace(t,e,n){return $e(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),rI(t,e,"clipSpacePos",n,3,20,0)&&rI(t,e,"uv",n,2,20,12)}function Rce(t,e,n,s,o,r){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*s*4),a=t.FLOAT,l=r.internalFormatPackedFloat),i.set(o),te().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,s,t.RGBA,a,i)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,s,0,t.RGBA,a,i)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Dce(t,e,n){$e(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?te().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):te().getNumber("WEBGL_VERSION")===2?$e(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):$e(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),$e(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Oce(t,e,n,s){const o=t.createBuffer();$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return $e(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),$e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),$e(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function Lce(t,e,n){const s=t,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,e),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function Fce(t,e,n,s){const[o,r]=Hd(e,n),i=4,a=new Uint8Array(Zae(e*n,i));return $e(t,()=>t.readPixels(0,0,o,r,s.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Pce(t,e,n,s,o,r,i,a){const l=t,c=new Float32Array(ele(r,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Mce(t,e,n){const s=new Float32Array(e*n*4);return $e(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lv{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=te().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Qae(n,e)):this.gl=po(n),e=this.gl,te().getNumber("WEBGL_VERSION")===2){const r=e;this.createVertexArray=()=>$e(r,()=>r.createVertexArray()),this.bindVertexArray=i=>$e(r,()=>r.bindVertexArray(i)),this.deleteVertexArray=i=>$e(r,()=>r.deleteVertexArray(i)),this.getVertexArray=()=>$e(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(e!=null){const r=e.getExtension("OES_vertex_array_object");if(r==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>$e(e,()=>r.createVertexArrayOES()),this.bindVertexArray=i=>$e(e,()=>r.bindVertexArrayOES(i)),this.deleteVertexArray=i=>$e(e,()=>r.deleteVertexArrayOES(i)),this.getVertexArray=()=>$e(e,()=>e.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),te().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Ih(this.gl,r),Ps(this.gl,i))this.textureHalfFloatExtension=Ih(this.gl,i);else if(te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),Ps(this.gl,o))this.colorBufferHalfFloatExtension=Ih(this.gl,o);else if(te().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",Ps(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(Ps(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Sce(this.gl),this.indexBuffer=Ice(this.gl),this.framebuffer=mle(this.gl),this.textureConfig=U1(this.gl,this.textureHalfFloatExtension)}get debug(){return te().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;$e(e,()=>e.finish()),$e(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),$e(e,()=>e.deleteFramebuffer(this.framebuffer)),$e(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),$e(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),$e(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Ece(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),kce(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),$ce(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),Dce(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,s,o){this.throwIfDisposed(),Rce(this.gl,e,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),Nce(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Tce(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(iI(this.gl,this.framebuffer),this.outputTexture=null),$e(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,s){return this.downloadMatrixDriver(e,()=>Fce(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,s,o,r,i){return Pce(this.gl,e,n,s,o,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Lce(this.gl,e,n)}createBufferFromTexture(e,n,s){this.bindTextureToFrameBuffer(e);const o=Oce(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,s;if(te().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),s=()=>{const i=o.clientWaitSync(r,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=r}else te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(e,n,s){return this.downloadMatrixDriver(e,()=>Mce(this.gl,n,s))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=_ce(n));const s=cle(n);$e(n,()=>n.attachShader(s,this.vertexShader)),$e(n,()=>n.attachShader(s,e)),ule(n,s);const o=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&ov(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;$e(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Ace(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&($e(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&ov(this.gl,this.program),$e(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,s=!0){return this.throwIfDisposed(),s?vle(this.gl,e,n):ble(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),$e(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),yle(this.gl,e,n,s)}setOutputMatrixTexture(e,n,s){this.setOutputMatrixTextureDriver(e,s,n)}setOutputPackedMatrixTexture(e,n,s){this.throwIfDisposed();const[o,r]=rc(n,s);this.setOutputMatrixTextureDriver(e,o,r)}setOutputMatrixWriteRegion(e,n,s,o){this.setOutputMatrixWriteRegionDriver(s,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&ov(this.gl,this.program),Eh(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}$e(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),$e(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Ih(this.gl,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await K_(()=>this.disposed||this.isQueryAvailable(e,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(e,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(e,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Bce(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in te().platform&&(s=te().platform.setTimeoutCustom.bind(te().platform)),K_(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),rv(this.gl,e,this.framebuffer),this.debug&&Eh(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(rv(this.gl,this.outputTexture,this.framebuffer),this.debug&&Eh(this.gl)):iI(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(e,n,s){this.throwIfDisposed();const o=this.gl;rv(o,e,this.framebuffer),this.debug&&Eh(o),this.outputTexture=e,$e(o,()=>o.viewport(0,0,n,s)),$e(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(e,n,s,o){this.throwIfDisposed(),$e(this.gl,()=>this.gl.scissor(e,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Bce(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Vce,bincountImpl:QO,bincountReduceImpl:Uce,bitwiseAndImpl:jce,castImpl:zce,ceilImpl:Wce,concatImpl:Gce,equalImpl:Hce,expImpl:Kce,expm1Impl:qce,floorImpl:Xce,gatherNdImpl:Qce,gatherV2Impl:Yce,greaterImpl:Jce,greaterEqualImpl:Zce,lessImpl:eue,lessEqualImpl:tue,linSpaceImpl:nue,logImpl:sue,maxImpl:oue,maximumImpl:rue,minimumImpl:iue,multiplyImpl:aue,negImpl:lue,notEqualImpl:cue,prodImpl:uue,raggedGatherImpl:due,raggedRangeImpl:hue,raggedTensorToTensorImpl:fue,rangeImpl:pue,rsqrtImpl:mue,scatterImpl:gue,sigmoidImpl:vue,simpleAbsImpl:YO,sliceImpl:bue,sparseFillEmptyRowsImpl:yue,sparseReshapeImpl:xue,sparseSegmentReductionImpl:JO,sqrtImpl:wue,staticRegexReplaceImpl:Cue,stridedSliceImpl:_ue,stringNGramsImpl:Sue,stringSplitImpl:Iue,stringToHashBucketFastImpl:Eue,subImpl:kue,tileImpl:$ue,topKImpl:Tue,transposeImpl:G1,uniqueImpl:Nue}=Dne;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZO(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Dn(t,e){return e===1?[t]:ZO(t,e)}function Aue(t,e){if(t===1)return"rc";let n="";for(let s=0;s<t;s++)n+=e[s],s<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rue{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=$n(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Dn("rc",this.rank),s=gt(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)r=`${e[e.length-1-i]},`+r;n.push(r)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${e[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eL{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Due(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?z1():j1(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${s}

        setOutput(result);
      }
    `}}function Due(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Ale(["r","c","d"],"inputShape"):Aa(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oue{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,s){const o=dI(n,s),r=hI(e,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=uI(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return o===vn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===vn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===vn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===vn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===vn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,s,o){if(this.freeTextures==null)return;const r=dI(s,o),i=hI(n,r,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=uI(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=te().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[i],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Lue(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function uI(t,e,n,s,o){const r=Fue(e,s);let i;if(o){const[l,c]=rc(t[0],t[1]);i=l*c}else{const[l,c]=Hd(t[0],t[1]);i=l*c}const a=Lue(n,r);return i*a}function Fue(t,e){switch(t){case vn.PACKED_2X2_FLOAT32:return qO(e);case vn.PACKED_2X2_FLOAT16:return XO(e);case vn.UNPACKED_FLOAT32:return GO(e);case vn.UNPACKED_FLOAT16:return HO(e);case vn.PACKED_4X1_UNSIGNED_BYTE:return KO(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Pue(t){return te().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?vn.PACKED_2X2_FLOAT32:vn.UNPACKED_FLOAT32:t?vn.PACKED_2X2_FLOAT16:vn.UNPACKED_FLOAT16}function dI(t,e){if(t===vs.UPLOAD)return vn.PACKED_2X2_FLOAT32;if(t===vs.RENDER||t==null)return Pue(e);if(t===vs.DOWNLOAD||t===vs.PIXELS)return vn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function hI(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class To{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const qs="if (isnan(x)) return x;",Mue="return x;",fI="return abs(x);",Bue="return (x >= 0.0) ? x : (exp(x) - 1.0);",Vue=qs+`
  return (x < 0.0) ? 0.0 : x;
`,Uue=qs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Rr="return x;",jue="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zue="return x;",Wue=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Gue=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Hue=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Kue="return 1.0 / (1.0 + exp(-1.0 * x));";class Pr{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class que{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length);const n=e.length,s=Dn("rc",n),o=gt(n),r=Aue(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xue=CA,Que=1e-7,Yue=1e-4,Th={};function Jue(t){return t in Th||(Th[t]={}),Th[t]}const Zue=te().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),ede=600;function tde(){return te().global.screen==null?1024:te().global.screen.height*te().global.screen.width*window.devicePixelRatio*ede/1024/1024}class eg extends r0{nextDataId(){return eg.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!te().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof lv)n=e;else{const s=po(te().getNumber("WEBGL_VERSION"),e);n=new lv(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=po(te().getNumber("WEBGL_VERSION"));n=new lv(s),this.binaryCache=Jue(te().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Oue(this.gpgpu),this.numMBBeforeWarning=tde(),this.texData=new zT(this,Co())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,s,o,r,i){const a=this.makeTensorInfo(n,s),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[o,r]},l.texShape=[o,r];const c=kh(n),u=new cI(c,!1,i),d=this.runWebGLProgram(u,[a],s,[[o,r]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,s){if((te().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||te().getBool("DEBUG"))&&this.checkNumericalProblems(e),s==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:e,usage:vs.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,s,o,r){if(te().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:o,values:n,usage:vs.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:s,dtype:o,complexTensorInfos:r,slice:i,shape:a,isPacked:l}=n;if(i!=null){let h;l?h=new Pr(a,Rr):h=new To(a,Rr);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(s!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return s;const c=this.activeTimers!=null;let u;c&&(u=zn());let d;if(o==="complex64"){const h=this.readSync(r.real.dataId),f=this.readSync(r.imag.dataId);d=pr(h,f)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=zn()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:s,shape:o,slice:r,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let p;l?p=new Pr(o,Rr):p=new To(o,Rr);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),v=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),v}if(s!=null)return this.convertAndCacheOnCPU(e);if(te().getBool("DEBUG")&&!te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&te().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(i!=="complex64"&&te().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...Sh(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],v=p[1];d=pr(m,v)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=le(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;$e(p,()=>p.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Co().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const s=this.texData.get(e),{values:o,shape:r,slice:i,dtype:a,isPacked:l,texture:c}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let f;l?f=new Pr(r,Rr):f=new To(r,Rr);const p=this.runWebGLProgram(f,[{dataId:e,shape:r,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Co().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const s=n.map(o=>Yr(o));return qe(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const s=e[n];if(!ole(s))throw te().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:s,isPacked:o}=this.texData.get(e),r=le(n);if(te().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Sh(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(h),p}const i=te().getBool("WEBGL_PACK")&&o===!0,a=i?kh(n):n,l=i?new xce(a):new yce(a),c=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,e();const r=sa(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=sa(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=Cq(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:i[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zn(),endMs:null}}endTimer(e){return te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=zn(),e)}async getQueryTime(e){if(te().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Zue){return te().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>this.texData.get(s.dataId).texture==null&&le(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){gs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Xue(e.shape,n)}packedUnaryOp(e,n,s){const o=new Pr(e.shape,n),r=this.compileAndRun(o,[e],s);return Co().makeTensorFromTensorInfo(r)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=YO(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(te().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fI,e.dtype);const n=new To(e.shape,fI),s=this.compileAndRun(n,[e]);return Co().makeTensorFromTensorInfo(s)}makeTensorInfo(e,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Du(s[0])){const r=s.map(i=>zr(i));o=this.write(r,e,n)}else o=this.write(s,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,s){return Co().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,s),this)}unpackTensor(e){const n=new que(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Rue(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const s=[Ul(e.shape),...jl(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[Ul(n),...jl(n)],i=new eL(r,s),a=!0,l=[s],c=this.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const s=this.texData.get(e),{isPacked:o,shape:r,dtype:i}=s;if(n!=null){const h=le(r),f=n[0]*n[1]*4;$(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=kh(r);let l;o?l=new bce(a):l=new vce(a);const c=!0,u=[n??Sh(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,u,c,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(e,n,s,o,r=!1,i){const a=this.makeTensorInfo(e.outputShape,s),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===gu.DENSE){const g=i??Sh(e.outputShape);l.texShape=g.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),le(a.shape)===0)return l.values=_n(a.dtype,0),a;const c=[],u=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(g.dataId);if(b.texture==null){if(!e.packedInputs&&le(g.shape)<=te().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!b.isPacked!=!!e.packedInputs)g=b.isPacked?this.unpackTensor(g):this.packTensor(g),c.push(g),b=this.texData.get(g.dataId);else if(b.isPacked&&!Kf(b.shape,g.shape)){const x=g,y=g.shape;g.shape=b.shape,g=this.packedReshape(g,y),c.push(g),b=this.texData.get(g.dataId),x.shape=y}return{shape:g.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=gce(e,u,d),f=this.getAndSaveBinary(h,()=>pce(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),te().get("ENGINE_COMPILE_ONLY")||mce(this.gpgpu,f,u,d,o),c.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const v=te().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const g=zn();g-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!te().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(e,n,s,o,r)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(te().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=J(()=>{if(!te().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=te().getBool("DEBUG");te().set("DEBUG",!1);const n=this.abs(lt(1e-8)).dataSync()[0];if(te().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Que:Yue}uploadToGPU(e){const n=this.texData.get(e),{shape:s,dtype:o,values:r,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let u;c&&(u=zn());let d=n.texShape;if(d==null&&(d=Cle(s,l),n.texShape=d),r!=null){const h=kh(s);let f,p=d[1],m=d[0];const v=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!v)&&([p,m]=rc(d[0],d[1])),l?f=new Cce(h,v):f=new cI(h,v);const g=v?[m,p]:d,b=this.makeTensorInfo(g,o),x=this.texData.get(b.dataId);v?x.usage=vs.PIXELS:x.usage=vs.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,r);const y=[[m,p]],C=this.runWebGLProgram(f,[b],o,y,!0),_=this.texData.get(C.dataId);n.texShape=_.texShape,n.isPacked=_.isPacked,n.usage=_.usage,te().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=_.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=zn()-u)}else{const h=this.acquireTexture(d,a,o,l);n.texture=h}}convertAndCacheOnCPU(e,n){const s=this.texData.get(e),{dtype:o}=s;return n!=null&&(s.values=nde(n,o)),s.values}acquireTexture(e,n,s,o){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*xf(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const s=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(r){throw r}});e.push(s)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await UA(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(BO(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:s,infLoc:o,nanLoc:r,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=WO(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=s,e.infLoc=o,e.nanLoc=r,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,s){e.channels=e.channels||"RGBA";const{texture:o,height:r,width:i,channels:a}=e,l=Co().backend;if(!l.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(o,n,s,r,i,a);return Co().makeTensorFromDataId(c,n,s,l)}}eg.nextDataId=0;function nde(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let s=0;s<n.length;++s)n[s]=Math.round(t[s]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */FN()&&BN("webgl",()=>new eg,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class ga{constructor(e,n,s){this.variableNames=["A","B"],this.outputShape=We(n,s),this.enableShapeUniforms=$n(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Da=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class uc{constructor(e,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=We(n,s);const r=this.outputShape.length;this.enableShapeUniforms=$n(r);let i="";if(o)if(r===0||le(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${gt(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Dn("coords",r);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hs(t){const{inputs:e,backend:n}=t,{x:s}=e;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const sde={kernelName:ed,backendName:"webgl",kernelFunc:hs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(t){const{inputs:e,backend:n}=t,{real:s,imag:o}=e,r=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(r.dataId),a=hs({inputs:{x:s},backend:n}),l=hs({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},r}const ode={kernelName:b0,backendName:"webgl",kernelFunc:wi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tL="return (a < 0.) ? b * a : a;",nL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function rde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{alpha:r}=s,i=n.makeTensorInfo([],"float32",hi(r,"float32")),a=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uc(nL,o.shape,i.shape):new ga(tL,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const ide={kernelName:qp,backendName:"webgl",kernelFunc:rde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sL="return (a < 0.) ? b * a : a;",oL=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function ade(t){const{inputs:e,backend:n}=t,{x:s,alpha:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uc(oL,s.shape,o.shape):new ga(sL,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const lde={kernelName:fm,backendName:"webgl",kernelFunc:ade};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dc="if (isnan(x)) return x;";function st({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:i}=o,a=r,l=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),h=n(d.values,l);return a.makeTensorInfo(i.shape,l,h)}const c=te().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Pr(i.shape,e):u=new To(i.shape,t),a.runWebGLProgram(u,[i],l)}}function wn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:i,backend:a})=>{const{a:l,b:c}=i,u=a;if(s&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[v,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[y,w]=x,C={dataId:y.dataId,dtype:y.dtype,shape:l.shape},_={dataId:w.dataId,dtype:w.dtype,shape:c.shape},S=new ga(t,l.shape,c.shape);return u.runWebGLProgram(S,[C,_],us(y.dtype,w.dtype))}),b=wi({inputs:{real:v,imag:g},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(g),b}const d=r||us(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,v=l.dtype==="string"?mr(p):p,g=l.dtype==="string"?mr(m):m,[b,x]=o(l.shape,c.shape,v,g,d),y=u.makeTensorInfo(x,d),w=u.texData.get(y.dataId);return w.values=b,y}const h=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new uc(e,l.shape,c.shape,n):f=new ga(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function vu(t,e=!1){if(t==="linear")return e?zue:Mue;if(t==="relu")return e?Gue:Vue;if(t==="elu")return e?Wue:Bue;if(t==="relu6")return e?Hue:Uue;if(t==="prelu")return e?oL:sL;if(t==="leakyrelu")return e?nL:tL;if(t==="sigmoid")return e?Kue:jue;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rL{constructor(e,n,s,o=!1,r=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=$n(this.outputShape.length);const u=o?e[1]:e[2],d=Math.ceil(u/2),h=o?"i * 2, rc.y":"rc.y, i * 2",f=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",g="";a&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:v=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",y="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(y=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${y};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pI={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class mI{constructor(e,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=We(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gI="return a * b;";function K1(t){const{inputs:e,backend:n}=t,{a:s,b:o}=e,r=us(s.dtype,o.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),c=new mI(pI.REAL,s.shape,o.shape),u=new mI(pI.IMAG,s.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=wi({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([s,o])){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),[c,u]=aue(s.shape,o.shape,a.values,l.values,r),d=n.makeTensorInfo(u,r),h=n.texData.get(d.dataId);return h.values=c,d}let i;return te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new uc(gI,s.shape,o.shape):i=new ga(gI,s.shape,o.shape),n.runWebGLProgram(i,[s,o],r)}const cde={kernelName:cd,backendName:"webgl",kernelFunc:K1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ude(t,e,n){const s=[Ul(t.shape),...jl(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Ul(e),...jl(e)],i=new eL(r,s),a=!0,l=[s],c=n.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ie(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{shape:r}=s,i=n,a=le(o.shape),l=GT(r,a),c=le(l);$(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=i.texData.get(o.dataId);return u.isPacked&&!Kf(o.shape,l)&&!(u.texture!==null&&Kf(u.shape,l))?ude(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const dde={kernelName:mm,backendName:"webgl",kernelFunc:Ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vI{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(s/4)*4,l=s%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Al(d)?d.toPrecision(2):d}, ones);`}let u="";r%s>0&&(u=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hde{constructor(e,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=e;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(s/4)*4,d=s%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fde(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],s=Mm(n);e.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return e}function Oa(t,e,n,s){const o=fde(t.shape);let r=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:c}=o[i];let u,d;n==="mean"?u=i===0?new vI({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new vI({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new hde({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=r,r=s.runWebGLProgram(u,[r],e),d.dataId!==t.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pde{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[n[i]];this.outputShape=s,this.rank=s.length;const o=gt(this.rank),r=mde(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function mde(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<t.length;o++)s[t[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gde{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(e.length);for(let u=0;u<s.length;u++)s[u]=e[n[u]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=gt(this.rank),r=ZO("rc",this.rank),i=new Array(this.rank);for(let u=0;u<n.length;u++)i[n[u]]=r[u];const a=`vec2(${i.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tg(t,e,n){const s=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gde(t.shape,e):new pde(t.shape,e);return n.runWebGLProgram(s,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vde(t,e,n,s){const o=e,r=t.shape.length,i=Xe(o,t.shape);let a=i;const l=Dt(a,r),c=l!=null;let u=t;c&&(u=tg(t,l,s),a=Ut(a.length,r)),xn("sum",a,r);const[d,h]=pn(u.shape,a);let f=d;n&&(f=Kt(d,i));const p=le(h),v=le(t.shape)/p,g=Ie({inputs:{x:u},attrs:{shape:[v,p]},backend:s}),b=Z0(t.dtype),x=Oa(g,b,"sum",s),y=Ie({inputs:{x},attrs:{shape:f},backend:s});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(x),c&&s.disposeIntermediateTensorInfo(u),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ng(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s;return vde(o,r,i,n)}const bde={kernelName:wm,backendName:"webgl",kernelFunc:ng};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{perm:r}=s,i=n,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[r[u]];let c;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,h=G1(d,o.shape,o.dtype,r,l);c=i.makeTensorInfo(l,o.dtype);const f=i.texData.get(c.dataId);f.values=h}else c=tg(o,r,i);return c}const yde={kernelName:fl,backendName:"webgl",kernelFunc:Pn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iL=1e3;function qf({a:t,b:e,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=s?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],p=s?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),v=e.shape.slice(0,-2),g=le(m),b=le(v),y=We(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);$(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[g,d,f]:[g,f,d],C=s?[b,p,h]:[b,h,p],_=Ie({inputs:{x:t},backend:o,attrs:{shape:w}}),S=Ie({inputs:{x:e},backend:o,attrs:{shape:C}}),I=[_,S],E=Math.max(g,b),O=n?_.shape[1]:_.shape[2],A=r!=null,P=i!=null,z=l==="leakyrelu",G=l!=null?vu(l,!0):null,M=A||P||z||G!=null;let R;if((f===1||p===1)&&O>iL&&M===!1){let j=_,ne=S;n&&(j=Pn({inputs:{x:_},backend:o,attrs:{perm:[0,2,1]}}),I.push(j)),s&&(ne=Pn({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),I.push(ne));const re=p!==1,de=p===1;let he=j;re&&(he=Ie({inputs:{x:j},backend:o,attrs:{shape:[E,O,1]}}),I.push(he));const ye=p===1?2:1;let fe=ne;de&&(fe=Ie({inputs:{x:ne},backend:o,attrs:{shape:[E,1,O]}}),I.push(fe));const ge=K1({inputs:{a:he,b:fe},backend:o});R=ng({inputs:{x:ge},backend:o,attrs:{axis:ye,keepDims:!0}}),I.push(ge)}else{const j=us(t.dtype,e.dtype),ne=new rL(w,C,[E,f,p],n,s,A,G,P,z),re=[_,S];if(r!=null&&re.push(r),P&&re.push(i),z){const de=o.makeTensorInfo([],"float32",hi(a,"float32"));re.push(de),I.push(de)}R=o.runWebGLProgram(ne,re,j)}const D=Ie({inputs:{x:R},backend:o,attrs:{shape:y}});I.push(R);for(const j of I)o.disposeIntermediateTensorInfo(j);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xde(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=s;return qf({a:o,b:r,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const wde={kernelName:wf,backendName:"webgl",kernelFunc:xde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bI="return abs(x);";function Cde(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),i=YO(r.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let o;return te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Pr(s.shape,bI):o=new To(s.shape,bI),n.runWebGLProgram(o,[s],s.dtype)}const _de={kernelName:$p,backendName:"webgl",kernelFunc:Cde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sde=qs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ide=st({opSnippet:Sde}),Ede={kernelName:Ou,backendName:"webgl",kernelFunc:Ide};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kde=qs+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,$de=st({opSnippet:kde}),Tde={kernelName:Lu,backendName:"webgl",kernelFunc:$de};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yI="return a + b;",Nde=wn({opSnippet:yI,packedOpSnippet:yI,supportsComplex:!0,cpuKernelImpl:Vce}),Ade={kernelName:Zl,backendName:"webgl",kernelFunc:Nde};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rde{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dde{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jh(t){const{inputs:e,backend:n}=t,s=e;if(s.length===1)return hs({inputs:{x:s[0]},backend:n});if(s.length>te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),c=jh({inputs:s.slice(0,l),backend:n}),u=jh({inputs:s.slice(l),backend:n});return jh({inputs:[c,u],backend:n})}const o=s.map(l=>l.dtype).reduce((l,c)=>us(l,c)),r=s.map(l=>l.shape),a=te().getBool("WEBGL_PACK")?new Dde(s[0].shape,r):new Rde(s[0].shape,r);return n.runWebGLProgram(a,s,o)}const Ode={kernelName:d0,backendName:"webgl",kernelFunc:jh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,l=Xe(r,o.shape);let c=l;const u=Dt(c,a);let d=o;u!=null&&(d=Pn({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Ut(c.length,a)),xn("all",c,a);const[h,f]=pn(d.shape,c),p=le(f),m=Ie({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Oa(m,m.dtype,"all",n);let g;if(i){const b=Kt(h,l);g=Ie({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Ie({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Fde={kernelName:h0,backendName:"webgl",kernelFunc:Lde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,l=Xe(r,o.shape);let c=l;const u=Dt(c,a);let d=o;u!=null&&(d=Pn({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Ut(c.length,a)),xn("any",c,a);const[h,f]=pn(d.shape,c),p=le(f),m=Ie({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Oa(m,m.dtype,"any",n);let g;if(i){const b=Kt(h,l);g=Ie({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Ie({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Mde={kernelName:f0,backendName:"webgl",kernelFunc:Pde};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bde{constructor(e,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:i}=e;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vde{constructor(e,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,$(e.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=e[e.length-1],i=Math.ceil(r/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=gt(l),u=Dn("coords",l);let d,h;if(i===1){h=l+1;const S=gt(h);d=`
        ${S} sourceLocR = ${S}(${u.join()}, 0);
        ++${u[l-1]};
        ${S} sourceLocG = ${S}(${u.join()}, 0);
        ++${u[l-2]};
        ${S} sourceLocA = ${S}(${u.join()}, 0);
        --${u[l-1]};
        ${S} sourceLocB = ${S}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(S=>"int "+S),v=Dn("sourceLocR",h-1).concat("inIdx.r"),g=Dn("sourceLocG",h-1).concat("inIdx.g"),b=Dn("sourceLocB",h-1).concat("inIdx.b"),x=Dn("sourceLocA",h-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,_=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${_}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aL(t,e,n,s=null){let o=e.shape[0],r=e.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const i=Mm(r),a={windowSize:i,inSize:r,batchSize:o,outSize:Math.ceil(r/i)},l=new Bde(a,n,s==null),c=[e];s!=null&&c.push(s);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=aL(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function lL(t,e,n,s=null){const o=s!=null?s.shape:e.shape,r=o[o.length-1],i=Mm(r),a=new Vde(o,i,n,s==null),l=s==null?[e]:[e,s],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=lL(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function cL(t,e,n,s){const o=[n];if(xn("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,e.shape.length),!te().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const r=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),r.push(l));const[c,u]=pn(l.shape,o),d=le(u),h=Ie({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});r.push(h);const f=aL(t,h,s);r.push(f);const p=Ie({inputs:{x:f},backend:t,attrs:{shape:c}});return r.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return lL(t,e,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ude(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;let i=Xe(r,o.shape);const a=Dt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Pn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=Ut(i.length,l.shape.length)),xn("argMax",[i[0]],l.shape.length);const u=cL(n,l,i[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const jde={kernelName:Tp,backendName:"webgl",kernelFunc:Ude};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zde(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r}=s;let i=Xe(r,o.shape);const a=Dt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Pn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=Ut(i.length,l.shape.length)),xn("argMin",[i[0]],l.shape.length);const u=cL(n,l,i[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Wde={kernelName:Np,backendName:"webgl",kernelFunc:zde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gde=qs+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Hde=st({opSnippet:Gde}),Kde={kernelName:Fu,backendName:"webgl",kernelFunc:Hde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qde=qs+"return log(x + sqrt(x * x + 1.0));",Xde=st({opSnippet:qde}),Qde={kernelName:Pu,backendName:"webgl",kernelFunc:Xde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yde=qs+`
  return atan(x);
`,Jde=st({opSnippet:Yde}),Zde={kernelName:Mu,backendName:"webgl",kernelFunc:Jde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ehe=H1+`
  return atan(a, b);
`,the=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Da+`
  return result;
`,nhe=wn({opSnippet:ehe,packedOpSnippet:the}),she={kernelName:Vu,backendName:"webgl",kernelFunc:nhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ohe=qs+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,rhe=st({opSnippet:ohe}),ihe={kernelName:Bu,backendName:"webgl",kernelFunc:rhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bu{constructor(e,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?v:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,C=i%4,_=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${_}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${_}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${_}
          }
        }
        setOutput(${y});
      }
    `}}class q1{constructor(e,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,v=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let y="0.0";if(x||(y="-1.0 / 1e-20"),s){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${v}, ${g}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const _=Math.floor(i/4)*4,S=i%4,I=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${v}, ${g}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${_}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${_};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ahe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Kd(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,c=1;$(En(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Hs(o.shape,r,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&ct(u.inShape,u.outShape))return hs({inputs:{x:o},backend:n});const d=new bu(u,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const lhe={kernelName:Ap,backendName:"webgl",kernelFunc:ahe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function che(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=s,u=[1,1,1],d=xr(o.shape,r,i,u,a,l,c),h=new q1(d,"avg",!1);return n.runWebGLProgram(h,[o],"float32")}const uhe={kernelName:Rp,backendName:"webgl",kernelFunc:che};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dhe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class hhe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,o=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,v=f-1-e.padInfo.left,g=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${v});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fhe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=s,d=[1,1,1],h=xr(i.shape,a,l,d,c,u),f=new hhe(h);return n.runWebGLProgram(f,[o],i.dtype)}const phe={kernelName:m0,backendName:"webgl",kernelFunc:fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r;Kd([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=s,u=Hs(i.shape,a,l,1,c),d=new dhe(u);return n.runWebGLProgram(d,[o],i.dtype)}const ghe={kernelName:p0,backendName:"webgl",kernelFunc:mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(t){const{inputs:e,backend:n,attrs:s}=t,{a:o,b:r}=e,{transposeA:i,transposeB:a}=s;return qf({a:o,b:r,transposeA:i,transposeB:a,backend:n})}const bhe={kernelName:Dp,backendName:"webgl",kernelFunc:vhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yhe{constructor(e,n,s,o,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],We(e,n),We(e,s);let a="0.0";o!=null&&(We(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(We(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xhe{constructor(e,n,s,o,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],We(e,n),We(e,s);let a="vec4(0.0)";o!=null&&(We(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(We(e,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whe=({inputs:t,backend:e,attrs:n})=>{const{x:s,mean:o,variance:r,offset:i,scale:a}=t;$(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),$(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),$(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[s,o,r];let u=null;i!=null&&(u=i.shape,c.push(i));let d=null;a!=null&&(d=a.shape,c.push(a));const h=te().getBool("WEBGL_PACK_NORMALIZATION")?new xhe(s.shape,o.shape,r.shape,u,d,l):new yhe(s.shape,o.shape,r.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},Che={kernelName:Gp,backendName:"webgl",kernelFunc:whe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _he{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=gt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=She(this.rank);let o;const r=e.map((i,a)=>`sourceLoc.${qb[a]} = start[${a}] + coords.${qb[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const qb=["x","y","z","w","u","v"];function She(t){if(t===1)return"sourceLoc";if(t<=6)return qb.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ihe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=gt(this.rank),s=Dn("coords",this.rank),o=Dn("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${r})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ehe(t,e,n,s){const o=s.texData.get(t.dataId),r=s.makeTensorInfo(n,t.dtype),i=s.texData.get(r.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=zx(e,Oe(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),r}function hc(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,size:i}=s,[a,l]=Pm(o,r,i);if(Vx(o,a,l),le(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),h=bue(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,h)}const{isPacked:c}=n.texData.get(o.dataId),u=jx(o.shape,a,l);if(c||!u){const d=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ihe(l):new _he(l),h=[a];return n.runWebGLProgram(d,[o],o.dtype,h)}return n.uploadToGPU(o.dataId),Ehe(o,a,l,n)}const khe={kernelName:xm,backendName:"webgl",kernelFunc:hc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $he=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,crops:i}=s;$(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,x)=>b*x),l=Od(o.shape,r,a),c=Ld(l.length,r.length),u=Fd(o.shape,r,a),d=qx(i,r.length),h=Xx(u,i,r.length),f=[],p=Ie({inputs:{x:o},backend:n,attrs:{shape:l}}),m=Pn({inputs:{x:p},backend:n,attrs:{perm:c}}),v=Ie({inputs:{x:m},backend:n,attrs:{shape:u}}),g=hc({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(v),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),g},The={kernelName:Op,backendName:"webgl",kernelFunc:$he};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i}=s,a=n.readSync(o.dataId),l=n.readSync(r.dataId),c=QO(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}const Ahe={kernelName:g0,backendName:"webgl",kernelFunc:Nhe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Dhe=`
  return float(int(a.r) & int(b.r));
`;function Ohe(t){const{inputs:e,backend:n}=t,{a:s,b:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=te().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([s,o])||i===1){const l=n.texData.get(s.dataId).values,c=n.texData.get(o.dataId).values,[u,d]=jce(s.shape,o.shape,l,c,s.dtype),h=n.makeTensorInfo(d,s.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let a;return r?a=new uc(Rhe,s.shape,o.shape,!1):a=new ga(Dhe,s.shape,o.shape),n.runWebGLProgram(a,[s,o],s.dtype)}const Lhe={kernelName:v0,backendName:"webgl",kernelFunc:Ohe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fhe(t){const{inputs:e,backend:n}=t,{s0:s,s1:o}=e,r=n.readSync(s.dataId),i=n.readSync(o.dataId),a=We(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Phe={kernelName:YT,backendName:"webgl",kernelFunc:Fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe="return float(a != b);",uL=wn({opSnippet:Mhe,cpuKernelImpl:cue,dtype:"bool"}),Bhe={kernelName:lm,backendName:"webgl",kernelFunc:uL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xd(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.texData.get(s.dataId);return hs({inputs:{x:o.complexTensorInfos.real},backend:n})}const Vhe={kernelName:j0,backendName:"webgl",kernelFunc:Xd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uhe="return float(int(x));";function jhe(t,e){const n=new To(t.shape,Uhe),s=e.runWebGLProgram(n,[t],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xb(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return hs({inputs:{x:o},backend:n});const i=cn(o.shape),a=Xb({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=wi({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=Xd({inputs:{input:o},backend:n}),a=Xb({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!HT(o.dtype,r)){const i=hs({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,l,c]=zce(i,o.shape,o.dtype,r);return n.makeTensorInfo(a,l,c)}if(r==="int32")return jhe(o,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",_n("bool",1)),l=uL({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const zhe={kernelName:Uu,backendName:"webgl",kernelFunc:Xb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xI="return ceil(x);",Whe=st({opSnippet:xI,packedOpSnippet:xI,cpuKernelImpl:Wce}),Ghe={kernelName:ju,backendName:"webgl",kernelFunc:Whe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hhe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Khe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qhe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{clipValueMin:r,clipValueMax:i}=s;let a;te().getBool("WEBGL_PACK_CLIP")?a=new Khe(o.shape):a=new Hhe(o.shape);const l=[[r],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const Xhe={kernelName:zu,backendName:"webgl",kernelFunc:qhe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qhe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wI(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Yhe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=n.texData.get(s.dataId),r=new Qhe(s.shape),i=[wI(s,o.complexTensorInfos.real),wI(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const Jhe={kernelName:Lp,backendName:"webgl",kernelFunc:Yhe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zhe{constructor(e){this.outputShape=[],this.outputShape=Lo(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class efe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Lo(e,n);const s=this.outputShape,o=s.length,r=gt(o),i=Dn("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const v=l[m-1];h+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Nh(a,c,v)}),
            vec2(${Nh(u,c,v)}));
        }`}const f=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${Nh(a,c,p)}),
          vec2(${Nh(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Nh(t,e,n){const s=t.indexOf(e);return t.map((r,i)=>i===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sg(t){const{inputs:e,backend:n}=t,{input:s}=e,o=n.texData.get(s.dataId);return hs({inputs:{x:o.complexTensorInfos.imag},backend:n})}const tfe={kernelName:O0,backendName:"webgl",kernelFunc:sg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(t,e,n){const s=t[0].dtype;if(s==="complex64"){const f=t.map(b=>Xd({inputs:{input:b},backend:n})),p=t.map(b=>sg({inputs:{input:b},backend:n})),m=Rc(f,e,n),v=Rc(p,e,n),g=wi({inputs:{real:m,imag:v},backend:n});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),g}let o=n.shouldExecuteOnCPU(t);if(s==="string"&&(o=!0),o){const f=t.map(y=>{const C=[-1,le(y.shape.slice(e))];return Ie({inputs:{x:y},backend:n,attrs:{shape:C}})}),p=f.map(y=>({vals:n.readSync(y.dataId),shape:y.shape})),m=Lo(f.map(y=>y.shape),1),v=f[0].shape[0]===1,g=Gce(p,m,s,v),b=Lo(t.map(y=>y.shape),e),x=n.makeTensorInfo(b,s,g);return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const r=t.filter(f=>le(f.shape)>0),i=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(r.length===1){const f=i?new To(t[0].shape,Rr):new Pr(t[0].shape,Rr);return n.runWebGLProgram(f,t,s)}const a=te().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const f=[];for(let m=0;m<r.length;m+=a){const v=r.slice(m,m+a);f.push(Rc(v,e,n))}const p=Rc(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(i){const f=new efe(r.map(p=>p.shape),e);return n.runWebGLProgram(f,r,s)}const{tensors2D:l,outShape:c}=nfe(r,e,n),u=new Zhe(l.map(f=>f.shape)),d=n.runWebGLProgram(u,l,s);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=Ie({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function nfe(t,e,n){const s=Lo(t.map(r=>r.shape),e);return{tensors2D:t.map(r=>Ie({inputs:{x:r},attrs:{shape:[-1,le(r.shape.slice(e))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dL(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s,r=Xe(o,e[0].shape)[0],i=e.map(c=>c.shape);Gx(i,r);const a=Lo(e.map(c=>c.shape),r);if(le(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>le(c.shape)>0);return l.length===1?hs({inputs:{x:l[0]},backend:n}):Rc(l,r,n)}const sfe={kernelName:Fp,backendName:"webgl",kernelFunc:dL};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,x=v?3:1;let y="",w="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class ofe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$n(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<u;v++)h+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<u;v++)h+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const g=v*2;if(h+=`
           xC = xCCorner + ${g*l};
           `,a===1){if(g<u&&(i%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<u)){const b=i%2===0?i0(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):b===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<u&&(i%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<u&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<u&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<u&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";s&&(o?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:r?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:f=`vec4 activation(vec4 x) {
           ${s}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rfe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=$n(this.outputShape.length);const{dataFormat:s}=n,o=Mn(),r=s==="channelsLast",i=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xf(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function pL({x:t,filter:e,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,c=s.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let v;const g=[];if(r!=null){const y=Xf(r.shape,f);y!=null&&(r=Ie({inputs:{x:r},backend:s,attrs:{shape:y}}),g.push(r))}if(o!=null){const y=Xf(o.shape,f);y!=null&&(o=Ie({inputs:{x:o},backend:s,attrs:{shape:y}}),g.push(o))}if(!((d===1||h===1)&&u>iL)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&ct(c.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,y,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,$(Kf(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);const _=Ie({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(_);const S=qf({a:w,b:_,backend:s,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),I=s.texData.get(S.dataId);$(I.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,I.shape=n.outShape,v=hs({inputs:{x:S},backend:s}),v.shape=n.outShape,g.push(S)}else{const y=n.outHeight*n.outWidth,w=Ie({inputs:{x:t},backend:s,attrs:{shape:f?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),C=Ie({inputs:{x:e},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),_=qf({a:f?w:C,b:f?C:w,transposeA:!f,transposeB:m,backend:s,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i});v=Ie({inputs:{x:_},backend:s,attrs:{shape:n.outShape}}),g.push(w),g.push(C),g.push(_)}for(const y of g)s.disposeIntermediateTensorInfo(y);return v}function mL({x:t,filter:e,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*c*u,v=h*d,g=[n.batchSize,m,v],b=!0,x=!1,y=[];if(r!=null){const D=Xf(r.shape,p);D!=null&&(r=Ie({inputs:{x:r},backend:s,attrs:{shape:D}}),y.push(r))}if(o!=null){const D=Xf(o.shape,p);D!=null&&(o=Ie({inputs:{x:o},backend:s,attrs:{shape:D}}),y.push(o))}const w=Ie({inputs:{x:e},backend:s,attrs:{shape:[1,m,le(e.shape)/m]}});y.push(w);const C=new rfe(g,n),_=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=s.runWebGLProgram(C,[t],"float32",_),I=Ie({inputs:{x:S},backend:s,attrs:{shape:g}});y.push(S),y.push(I);const E=o!=null,O=r!=null,A=a==="leakyrelu",P=a?vu(a,!0):null,z=new rL(p?I.shape:w.shape,p?w.shape:I.shape,p?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],b,x,E,P,O,A),G=p?[I,w]:[w,I];if(o&&G.push(o),O&&G.push(r),A){const D=s.makeTensorInfo([],"float32",hi(i,"float32"));G.push(D),y.push(D)}const M=s.runWebGLProgram(z,G,"float32"),R=Ie({inputs:{x:M},backend:s,attrs:{shape:n.outShape}});y.push(M);for(const D of y)s.disposeIntermediateTensorInfo(D);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=s,d=wr(l),h=yn(o.shape,r.shape,i,c,a,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=pL({x:o,filter:r,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&te().getBool("WEBGL_EXP_CONV")){const m=new fL(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[o,r],"float32",v)}else if(te().getBool("WEBGL_CONV_IM2COL"))f=mL({x:o,filter:r,convInfo:h,backend:n});else{const m=new hL(h);f=n.runWebGLProgram(m,[o,r],"float32")}const p=Ie({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const afe={kernelName:Pp,backendName:"webgl",kernelFunc:ife};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,o=e.padInfo.top,r=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=s-1-e.padInfo.left,c=i?1:2,u=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ufe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,s=e.strideHeight,o=e.strideWidth,r=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class dfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,s=e.filterHeight,o=e.filterWidth,r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=s-1-e.padInfo.top,u=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=s,d=wr(l),h=yn(o.shape,u,i,1,a,c,!1,d),f=new lfe(h);return n.runWebGLProgram(f,[o,r],"float32")}const ffe={kernelName:y0,backendName:"webgl",kernelFunc:hfe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pfe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=$n(this.outputShape.length);const n=e.filterHeight,s=e.filterWidth,o=n-1-e.padInfo.top,r=s-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mfe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=s,d=wr(c),h=yn(i,r.shape,a,1,l,u,!1,d);if(te().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new pfe(h);return n.runWebGLProgram(p,[o,r],"float32",f)}else{const f=new cfe(h);return n.runWebGLProgram(f,[o,r],"float32")}}const gfe={kernelName:Mp,backendName:"webgl",kernelFunc:mfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:l}=s,c=pi(o.shape,r.shape,i,l,a),u=new ofe(c);return n.runWebGLProgram(u,[o,r],"float32")}const bfe={kernelName:Bp,backendName:"webgl",kernelFunc:vfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,pad:a,filterShape:l}=s,c=pi(o.shape,l,i,1,a),u=new ufe(c);return n.runWebGLProgram(u,[o,r],"float32")}const xfe={kernelName:x0,backendName:"webgl",kernelFunc:yfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wfe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{pad:i,strides:a,inputShape:l}=s,c=pi(l,r.shape,a,1,i),u=new dfe(c);return n.runWebGLProgram(u,[o,r],"float32")}const Cfe={kernelName:w0,backendName:"webgl",kernelFunc:wfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _fe=dc+`
  return cos(x);
`,Sfe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Da}
  return result;
`,Ife=st({opSnippet:_fe,packedOpSnippet:Sfe}),Efe={kernelName:Wu,backendName:"webgl",kernelFunc:Ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kfe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,$fe=st({opSnippet:kfe}),Tfe={kernelName:Gu,backendName:"webgl",kernelFunc:$fe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nfe{constructor(e,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,c]=e,[u]=n,[d,h]=s;this.outputShape=[u,d,h,c];const f=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[v,g,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,y,w]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Afe=t=>{const{inputs:e,backend:n,attrs:s}=t,{image:o,boxes:r,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=s,u=new Nfe(o.shape,r.shape,a,l,c);return n.runWebGLProgram(u,[o,r,i],"float32")},Rfe={kernelName:_0,backendName:"webgl",kernelFunc:Afe};var yu;(function(t){t.Prod="*",t.Sum="+"})(yu||(yu={}));class CI{constructor(e,n,s,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,i=this.op===yu.Prod?"1.0":"0.0",a=s?i:`getX(${_I(r,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";s?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${gt(r)} coords = getOutputCoords();
        int end = ${SI(r,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${SI(r,"coords",this.op)} = idx;
          val ${this.op}= getX(${_I(r,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function _I(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function SI(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gL(t,e,n,s,o,r){const i=e.shape.length,a=Dt([s],i);let l=e;a!=null&&(l=Pn({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Ut(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${s}`);const u=l.shape[c];let d=hs({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new CI(t,l.shape,!1,r),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const h=new CI(t,l.shape,o,r),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=mi(a),f=Pn({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;return gL(yu.Prod,o,n,r,i,a)}const Ofe={kernelName:C0,backendName:"webgl",kernelFunc:Dfe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,exclusive:i,reverse:a}=s;return gL(yu.Sum,o,n,r,i,a)}const Ffe={kernelName:Vp,backendName:"webgl",kernelFunc:Lfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,weights:r}=e,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.readSync(o.dataId),c=n.readSync(r.dataId),u=QO(l,c,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}else if(o.shape.length===2){const l=n.bufferSync(o),c=n.bufferSync(r),u=Uce(l,c,i,a);return n.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Mfe={kernelName:S0,backendName:"webgl",kernelFunc:Pfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bfe{constructor(e,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockSize:r,dataFormat:i}=s,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],c=i==="NHWC"?o.shape[2]:o.shape[3],u=i==="NHWC"?o.shape[3]:o.shape[1],d=l*r,h=c*r,f=u/(r*r),p=i==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new Bfe(p,r,i);return n.runWebGLProgram(m,[o],o.dtype)}const Ufe={kernelName:I0,backendName:"webgl",kernelFunc:Vfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$n(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";s&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:c=`
          float activation(float x) {
            ${s}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bL{constructor(e,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=$n(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<d;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const b=g*2;if(f+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?f+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const x=a%2===0?i0(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:f+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):x===1?f+=`
                    xC${b+1} = xTexelC${b};
                    `:f+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(f+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(f+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(f+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,m="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=s;let u=l;u==null&&(u=[1,1]),$(En(i,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const d=yn(o.shape,r.shape,i,u,a,c,!0);let h;te().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new bL(d):h=new vL(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[o,r],"float32",f)}const zfe={kernelName:Up,backendName:"webgl",kernelFunc:jfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wfe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,s=e.strideWidth,o=e.padInfo.top,r=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Gfe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,s=e.filterWidth,o=e.strideHeight,r=e.strideWidth,i=n-1-e.padInfo.top,a=s-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hfe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,dy:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=s,d=yn(o.shape,u,i,a,l,c,!0),h=new Wfe(d);return n.runWebGLProgram(h,[o,r],"float32")}const Kfe={kernelName:E0,backendName:"webgl",kernelFunc:Hfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qfe(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,filter:r}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=s,d=yn(u,r.shape,i,a,l,c,!0),h=new Gfe(d);return n.runWebGLProgram(h,[o,r],"float32")}const Xfe={kernelName:k0,backendName:"webgl",kernelFunc:qfe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qfe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yfe(t){const{inputs:e,backend:n}=t,{x:s}=e,o=[...s.shape,...s.shape],r=le(s.shape),i=Ie({inputs:{x:s},backend:n,attrs:{shape:[r]}}),a=new Qfe(r),l=n.runWebGLProgram(a,[i],i.dtype),c=Ie({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const Jfe={kernelName:JT,backendName:"webgl",kernelFunc:Yfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zfe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function epe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r}=e,{strides:i,pad:a,dilations:l}=s,c=Td(o.shape,r.shape,i,a,"NHWC",l);let u;const d=new Zfe(c);u=n.runWebGLProgram(d,[o,r],"float32");const h=Ie({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const tpe={kernelName:jp,backendName:"webgl",kernelFunc:epe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npe(t){const{inputs:e,backend:n,attrs:s}=t,{equation:o}=s,r=e,{allDims:i,summedDims:a,idDims:l}=s1(o,r.length);r1(i.length,l,r);const{path:c,steps:u}=i1(a,l),d=u.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const v of u[m]){const{permutationIndices:g,expandDims:b}=o1(f,l[v]);let x;a1(g)?x=r[v]:(x=Pn({inputs:{x:r[v]},backend:n,attrs:{perm:g}}),p.push(x));const y=x.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);ct(x.shape,y)||(x=Ie({inputs:{x},backend:n,attrs:{shape:y}}),p.push(x)),h===null?h=x:(h=K1({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=ng({inputs:{x:h},backend:n,attrs:{axis:c[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const spe={kernelName:$0,backendName:"webgl",kernelFunc:npe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ope="return (x >= 0.0) ? x : (exp(x) - 1.0);",rpe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ipe=st({opSnippet:ope,packedOpSnippet:rpe}),ape={kernelName:Ku,backendName:"webgl",kernelFunc:ipe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe="return (b >= 0.0) ? a : a * (b + 1.0);",cpe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,upe=t=>{const{inputs:e,backend:n}=t,{dy:s,y:o}=e,r=te().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uc(cpe,s.shape,o.shape):new ga(lpe,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},dpe={kernelName:T0,backendName:"webgl",kernelFunc:upe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe=`
  return vec4(equal(a, b));
`,fpe="return float(a == b);",ppe=wn({opSnippet:fpe,packedOpSnippet:hpe,dtype:"bool",cpuKernelImpl:Hce}),mpe={kernelName:zp,backendName:"webgl",kernelFunc:ppe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gpe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Qx};
  float a1 = ${Yx};
  float a2 = ${Jx};
  float a3 = ${Zx};
  float a4 = ${e1};
  float a5 = ${t1};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,vpe=st({opSnippet:gpe}),bpe={kernelName:qu,backendName:"webgl",kernelFunc:vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ype=dc+`
  return exp(x);
`,xpe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yL=st({opSnippet:ype,packedOpSnippet:xpe,cpuKernelImpl:Kce,dtype:"float32"}),wpe={kernelName:Xu,backendName:"webgl",kernelFunc:yL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qb(t){const{inputs:e,attrs:n,backend:s}=t,{dim:o}=n,{input:r}=e,i=r.shape.length,a=r.shape.slice();let l=o;return o<0&&($(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),Ie({inputs:{x:r},backend:s,attrs:{shape:a}})}const Cpe={kernelName:Wp,backendName:"webgl",kernelFunc:Qb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const II="return exp(x) - 1.0;",_pe=st({opSnippet:II,packedOpSnippet:II,cpuKernelImpl:qce}),Spe={kernelName:Qu,backendName:"webgl",kernelFunc:_pe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EI{constructor(e,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xL(t,e,n){const s=n.texData.get(t.dataId),o=le(t.shape),r=t.shape[t.shape.length-1],i=o/r,a=Ie({inputs:{x:t},backend:n,attrs:{shape:[i,r]}}),l=a.shape,c=new EI("real",l,e),u=new EI("imag",l,e),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=wi({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=Ie({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipe(t){const{inputs:e,backend:n}=t,{input:s}=e;return xL(s,!1,n)}const Epe={kernelName:N0,backendName:"webgl",kernelFunc:Ipe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kpe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qd(t){const{backend:e,attrs:n}=t,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||Yl(o),r==="string"){const i=Mt(r,le(s));return i.fill(o),e.makeTensorInfo(s,r,i)}else{const i=new kpe(s,o),a=[[o]];return e.runWebGLProgram(i,[],r,a)}}const $pe={kernelName:A0,backendName:"webgl",kernelFunc:Qd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tpe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe={kernelName:R0,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,s=e,o=new Tpe(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kI="return floor(x);",Ape=st({opSnippet:kI,packedOpSnippet:kI,cpuKernelImpl:Xce}),Rpe={kernelName:Yu,backendName:"webgl",kernelFunc:Ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Ope=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Lpe=wn({opSnippet:Dpe,packedOpSnippet:Ope,dtype:"int32"}),Fpe={kernelName:Ju,backendName:"webgl",kernelFunc:Lpe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ppe{constructor(e){this.variableNames=["A"];const n=Mn(),[s,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mpe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Mn(),[s,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bpe={kernelName:Pq,backendName:"webgl",kernelFunc:Vpe};let ja,cv=te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Vpe(t){const{inputs:e,backend:n,attrs:s}=t;let{pixels:o}=e;const{numChannels:r}=s,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,r];if(a||i){const m=te().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ja==null||m!==cv)&&(cv=m,ja=document.createElement("canvas").getContext("2d",{willReadFrequently:cv})),ja.canvas.width=l,ja.canvas.height=c,ja.drawImage(o,0,0,l,c),o=ja.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=vs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);const f=te().getBool("WEBGL_PACK")?new Mpe(d):new Ppe(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=s,m=wr(u),v=yn(o.shape,r.shape,l,d,c,h,!1,m);let g;const b=[],x=i!=null,y=a!=null,w=f==="leakyrelu",C=()=>{const S=[o,r],I=(E,O)=>{if(O==="NCHW"&&E.shape.length===1&&E.shape[0]!==1){const A=Ie({inputs:{x:E},backend:n,attrs:{shape:[E.shape[0],1,1]}});return b.push(A),A}return E};if(x&&S.push(I(i,u)),y&&S.push(I(a,u)),w){const E=n.makeTensorInfo([],"float32",hi(p,"float32"));S.push(E),b.push(E)}return S};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))g=pL({x:o,filter:r,convInfo:v,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(v.strideWidth<=2&&m==="channelsLast"&&te().getBool("WEBGL_EXP_CONV")){const S=f?vu(f,!0):null,I=new fL(v,x,S,y,w),E=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],O=C();g=n.runWebGLProgram(I,O,"float32",E)}else if(te().getBool("WEBGL_CONV_IM2COL"))g=mL({x:o,filter:r,convInfo:v,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const S=f?vu(f,!1):null,I=new hL(v,x,S,y,w),E=C();g=n.runWebGLProgram(I,E,"float32")}const _=Ie({inputs:{x:g},backend:n,attrs:{shape:v.outShape}});return b.push(g),b.forEach(S=>n.disposeIntermediateTensorInfo(S)),_}const jpe={kernelName:Cf,backendName:"webgl",kernelFunc:Upe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,filter:r,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=s,p=[];let m=u;m==null&&(m=[1,1]),$(En(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const v=yn(o.shape,r.shape,l,m,c,d,!0),g=te().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=h?vu(h,g):null,x=[o,r],y=i!=null,w=a!=null,C=h==="leakyrelu";if(y&&x.push(i),w&&x.push(a),C){const E=n.makeTensorInfo([],"float32",hi(f,"float32"));x.push(E),p.push(E)}let _;g?_=new bL(v,y,b,w,C):_=new vL(v,y,b,w,C);const S=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],I=n.runWebGLProgram(_,x,"float32",S);return p.forEach(E=>n.disposeIntermediateTensorInfo(E)),I}const Wpe={kernelName:vN,backendName:"webgl",kernelFunc:zpe};class Gpe{constructor(e,n,s,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=s;const r=gt(s.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(t){const{inputs:e,backend:n}=t,{params:s,indices:o}=e,r=o.shape,i=r[r.length-1],a=le(s.shape),[l,c,u,d]=Bx(s,o),h=Ie({inputs:{x:o},backend:n,attrs:{shape:[c,i]}}),f=Ie({inputs:{x:s},backend:n,attrs:{shape:[le(s.shape)/u,u]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const g=n.readSync(o.dataId),b=n.bufferSync(s),x=Qce(g,b,s.dtype,c,i,u,d,s.shape,a);return n.makeTensorInfo(l,s.dtype,x.values)}const p=new Gpe(i,d,[c,u],s.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),v=Ie({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}const Kpe={kernelName:ZT,backendName:"webgl",kernelFunc:Hpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qpe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=gt(this.rank),o=Xpe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function Xpe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<t.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,indices:r}=e,{axis:i,batchDims:a}=s,l=Xe(i,o.shape)[0];if(te().get("DEBUG")){const b=n.readSync(r.dataId),x=o.shape[l];for(let y=0;y<b.length;++y){const w=b[y];$(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const c=c1(o,r,l,a),u=le(r.shape),d=[],h=Ie({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=Ie({inputs:{x:r},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(f),x=n.bufferSync(h),y=Yce(x,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,y.dtype,y.values)}const m=new qpe(h.shape,p),v=n.runWebGLProgram(m,[h,f],h.dtype);d.push(v);const g=Ie({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),g}const Qpe={kernelName:Hp,backendName:"webgl",kernelFunc:wL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype="return float(a > b);",Jpe=`
  return vec4(greaterThan(a, b));
`,Zpe=wn({opSnippet:Ype,packedOpSnippet:Jpe,cpuKernelImpl:Jce,dtype:"bool"}),eme={kernelName:Kp,backendName:"webgl",kernelFunc:Zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme="return float(a >= b);",nme=`
  return vec4(greaterThanEqual(a, b));
`,sme=wn({opSnippet:tme,packedOpSnippet:nme,dtype:"bool",cpuKernelImpl:Zce}),ome={kernelName:Zu,backendName:"webgl",kernelFunc:sme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t){const{inputs:e,backend:n}=t,{input:s}=e;return xL(s,!0,n)}const ime={kernelName:D0,backendName:"webgl",kernelFunc:rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame="return float(!isnan(x) && !isinf(x));",lme=st({opSnippet:ame,dtype:"bool"}),cme={kernelName:td,backendName:"webgl",kernelFunc:lme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume="return float(isinf(x));",dme=st({opSnippet:ume,dtype:"bool"}),hme={kernelName:nd,backendName:"webgl",kernelFunc:dme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme="return float(isnan(x));",pme=st({opSnippet:fme,dtype:"bool"}),mme={kernelName:sd,backendName:"webgl",kernelFunc:pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme="return float(a < b);",vme=`
  return vec4(lessThan(a, b));
`,bme=wn({opSnippet:gme,packedOpSnippet:vme,cpuKernelImpl:eue,dtype:"bool"}),yme={kernelName:Xp,backendName:"webgl",kernelFunc:bme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xme="return float(a <= b);",wme=`
  return vec4(lessThanEqual(a, b));
`,Cme=wn({opSnippet:xme,packedOpSnippet:wme,cpuKernelImpl:tue,dtype:"bool"}),_me={kernelName:Qp,backendName:"webgl",kernelFunc:Cme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sme(t){const{backend:e,attrs:n}=t,{start:s,stop:o,num:r}=n,i=nue(s,o,r);return e.makeTensorInfo([i.length],"float32",i)}const Ime={kernelName:eN,backendName:"webgl",kernelFunc:Sme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eme=dc+`
  return x < 0.0 ? 0./0. : log(x);
`,kme=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,$me=st({opSnippet:Eme,packedOpSnippet:kme,cpuKernelImpl:sue}),Tme={kernelName:od,backendName:"webgl",kernelFunc:$me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nme=dc+`
  return log(1.0 + x);
`,Ame=st({opSnippet:Nme}),Rme={kernelName:rd,backendName:"webgl",kernelFunc:Ame};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dme="return float(a >= 1.0 && b >= 1.0);",Ome=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Lme=wn({opSnippet:Dme,packedOpSnippet:Ome,dtype:"bool"}),Fme={kernelName:Yp,backendName:"webgl",kernelFunc:Lme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pme="return float(!(x >= 1.0));",Mme=st({opSnippet:Pme}),Bme={kernelName:Jp,backendName:"webgl",kernelFunc:Mme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vme="return float(a >= 1.0 || b >= 1.0);",Ume=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,jme=wn({opSnippet:Vme,packedOpSnippet:Ume,dtype:"bool"}),zme={kernelName:Zp,backendName:"webgl",kernelFunc:jme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wme{constructor(e,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${c})`:r===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gme{constructor(e,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${c})`:r===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hme=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{depthRadius:r,bias:i,alpha:a,beta:l}=s,c=te().getBool("WEBGL_PACK_NORMALIZATION")?new Gme(o.shape,r,i,a,l):new Wme(o.shape,r,i,a,l);return n.runWebGLProgram(c,[o],o.dtype)},Kme={kernelName:em,backendName:"webgl",kernelFunc:Hme};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qme{constructor(e,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xme=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o,y:r,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=s,d=new qme(o.shape,a,l,c,u);return n.runWebGLProgram(d,[o,r,i],o.dtype)},Qme={kernelName:L0,backendName:"webgl",kernelFunc:Xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(t,e,n,s){const o=le(e),i=le(t.shape)/o,a=Ie({inputs:{x:t},attrs:{shape:[i,o]},backend:s}),l=Oa(a,t.dtype,"max",s),c=Ie({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reductionIndices:r,keepDims:i}=s,a=o.shape.length,l=Xe(r,o.shape);let c=l;const u=Dt(c,a),d=u!=null,h=n.shouldExecuteOnCPU([o]);let f=o;if(d){if(h){const x=n.texData.get(f.dataId).values,y=new Array(a);for(let _=0;_<y.length;_++)y[_]=o.shape[u[_]];const w=G1(x,o.shape,o.dtype,u,y);f=n.makeTensorInfo(y,o.dtype);const C=n.texData.get(f.dataId);C.values=w}else f=tg(o,u,n);c=Ut(c.length,a)}xn("max",c,a);const[p,m]=pn(f.shape,c);let v=p;i&&(v=Kt(p,l));let g;if(h){const x=n.texData.get(f.dataId).values,y=oue(x,le(m),v,o.dtype);g=n.makeTensorInfo(v,o.dtype);const w=n.texData.get(g.dataId);w.values=y}else g=Yme(f,m,v,n);return d&&n.disposeIntermediateTensorInfo(f),g}const Jme={kernelName:tm,backendName:"webgl",kernelFunc:CL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zme=H1+`
  return max(a, b);
`,ege=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Da+`
  return result;
`,tge=wn({opSnippet:Zme,packedOpSnippet:ege,cpuKernelImpl:rue}),nge={kernelName:id,backendName:"webgl",kernelFunc:tge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sge(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;Kd(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,c=1;$(En(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Hs(o.shape,r,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&ct(u.inShape,u.outShape))return hs({inputs:{x:o},backend:n});const d=new bu(u,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const oge={kernelName:nm,backendName:"webgl",kernelFunc:sge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rge(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{filterSize:r,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=s,u=[1,1,1],d=xr(o.shape,r,i,u,a,c,l),h=new q1(d,"max",!1);return n.runWebGLProgram(h,[o],o.dtype)}const ige={kernelName:sm,backendName:"webgl",kernelFunc:rge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class age{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,r=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=r-1-e.padInfo.top,l=i-1-e.padInfo.left,c=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class lge{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,s=e.strideHeight,o=e.strideWidth,r=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r}=e,i=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=s,d=[1,1,1],h=xr(i.shape,a,l,d,c,u),f=new q1(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),m=new lge(h),v=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),v}const uge={kernelName:P0,backendName:"webgl",kernelFunc:cge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dge(t){const{inputs:e,backend:n,attrs:s}=t,{dy:o,input:r,output:i}=e,a=r;Kd([r,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=s,h=Hs(a.shape,l,c,1,u,d),f=!0,p=new bu(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),v=new age(h),g=n.runWebGLProgram(v,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const hge={kernelName:F0,backendName:"webgl",kernelFunc:dge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(t,e,n,s){let o=new bu(n,"max",!1);const r=s.runWebGLProgram(o,[t],"float32");o=new bu(n,"max",!0,!0,e);const i=s.runWebGLProgram(o,[t],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pge={kernelName:tN,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=e,l=n;$(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const c=[1,1];$(En(r,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${c}'`);const u=Hs(s.shape,o,r,c,i),[d,h]=fge(s,a,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t,e,n,s){const o=le(e),i=le(t.shape)/o,a=Ie({inputs:{x:t},attrs:{shape:[i,o]},backend:s}),l=Oa(a,"float32","mean",s),c=Ie({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gge={kernelName:om,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:s}=t,{keepDims:o,axis:r}=e,i=n,a=s.shape.length,l=Xe(r,s.shape);let c=l;const u=Dt(c,a),d=u!=null,h=i.shouldExecuteOnCPU([s]),f=[];let p=s;if(d){if(h){const y=i.texData.get(p.dataId).values,w=new Array(a);for(let S=0;S<w.length;S++)w[S]=s.shape[u[S]];const C=G1(y,s.shape,s.dtype,u,w);p=i.makeTensorInfo(w,s.dtype);const _=i.texData.get(p.dataId);_.values=C}else p=tg(s,u,i);f.push(p),c=Ut(c.length,a)}xn("sum",c,a);const[m,v]=pn(p.shape,c);let g=m;o&&(g=Kt(m,l));const b=mge(p,v,g,i);for(const x of f)i.disposeIntermediateTensorInfo(x);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,l=Xe(r,o.shape);let c=l;const u=Dt(c,a);let d=o;u!=null&&(d=Pn({inputs:{x:o},backend:n,attrs:{perm:u}}),c=Ut(c.length,o.shape.length)),xn("min",c,a);const[h,f]=pn(d.shape,c),p=le(f),m=Ie({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),v=Oa(m,m.dtype,"min",n);let g;if(i){const b=Kt(h,l);g=Ie({inputs:{x:v},backend:n,attrs:{shape:b}})}else g=Ie({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),g}const bge={kernelName:rm,backendName:"webgl",kernelFunc:vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yge=H1+`
  return min(a, b);
`,xge=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Da+`
  return result;
`,wge=wn({opSnippet:yge,packedOpSnippet:xge,cpuKernelImpl:iue}),Cge={kernelName:ad,backendName:"webgl",kernelFunc:wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ge{constructor(e,n,s){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const o=e.length,r=gt(o),i=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sge{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,r=gt(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=Dn("rc",o),c=Dn("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,h=s==="reflect"?0:1;let f="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ige=({inputs:t,backend:e,attrs:n})=>{const{x:s}=t,{paddings:o,mode:r}=n,i=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sge(s.shape,o,r):new _ge(s.shape,o,r);return e.runWebGLProgram(i,[s],s.dtype)},Ege={kernelName:im,backendName:"webgl",kernelFunc:Ige};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kge=`if (b == 0.0) return NAN;
  return mod(a, b);`,$ge=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Da+`
  return result;
`,Tge=wn({opSnippet:kge,packedOpSnippet:$ge}),Nge={kernelName:ld,backendName:"webgl",kernelFunc:Tge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Age{constructor(e,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rge=`
if (a == b) {
  return 1.0;
};
return a / b;`,Dge=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,_L=wn({opSnippet:Rge,packedOpSnippet:Dge,checkOutOfBounds:!0}),Oge={kernelName:Hu,backendName:"webgl",kernelFunc:_L};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $I="return a - b;",SL=wn({opSnippet:$I,packedOpSnippet:$I,supportsComplex:!0,cpuKernelImpl:kue}),Lge={kernelName:Sd,backendName:"webgl",kernelFunc:SL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IL(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{dim:r}=s,i=Xe([r],o.shape),a=CL({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Kt(a.shape,i),c=Ie({inputs:{x:a},backend:n,attrs:{shape:l}}),u=SL({inputs:{a:o,b:c},backend:n}),d=yL({inputs:{x:u},backend:n}),h=ng({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=Ie({inputs:{x:h},backend:n,attrs:{shape:l}}),p=_L({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const Fge={kernelName:Sm,backendName:"webgl",kernelFunc:IL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pge(t){const{inputs:e,backend:n,attrs:s}=t,{logits:o}=e,{numSamples:r,seed:i,normalized:a}=s,l=a?o:IL({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new Age(c,u,r),h=[[i]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const Mge={kernelName:nN,backendName:"webgl",kernelFunc:Pge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge=qs+`
  return -x;
`,Vge=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Uge(t){const{inputs:e,backend:n}=t,{x:s}=e;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[i,a]=lue(r.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let o;return te().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Pr(s.shape,Vge):o=new To(s.shape,Bge),n.runWebGLProgram(o,[s],s.dtype)}const jge={kernelName:am,backendName:"webgl",kernelFunc:Uge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=Dx;function Wge(t){gs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s,c=n.readSync(o.dataId),u=n.readSync(r.dataId),{selectedIndices:d}=zge(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Gge={kernelName:M0,backendName:"webgl",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hge=Ox;function Kge(t){gs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=s,u=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:h,validOutputs:f}=Hge(u,d,i,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const qge={kernelName:B0,backendName:"webgl",kernelFunc:Kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xge=Lx;function Qge(t){gs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:s}=t,{boxes:o,scores:r}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=s,u=n.readSync(o.dataId),d=n.readSync(r.dataId),h=i,f=a,p=l,m=c,{selectedIndices:v,selectedScores:g}=Xge(u,d,h,f,p,m);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Yge={kernelName:V0,backendName:"webgl",kernelFunc:Qge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jge{constructor(e,n,s,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zge=t=>{const{inputs:e,backend:n,attrs:s}=t,{indices:o}=e,{dtype:r,depth:i,onValue:a,offValue:l}=s,c=le(o.shape),u=new Jge(c,i,a,l),d=Ie({inputs:{x:o},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],r);n.disposeIntermediateTensorInfo(d);const f=[...o.shape,i],p=Ie({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},eve={kernelName:um,backendName:"webgl",kernelFunc:Zge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="complex64"){const o=Xd({inputs:{input:s},backend:n}),r=Qf({inputs:{x:o},backend:n}),i=sg({inputs:{input:s},backend:n}),a=Qf({inputs:{x:i},backend:n}),l=wi({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Qd({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const tve={kernelName:km,backendName:"webgl",kernelFunc:Qf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EL(t){const{inputs:e,backend:n}=t,{x:s}=e;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=Xd({inputs:{input:s},backend:n}),r=EL({inputs:{x:o},backend:n}),i=sg({inputs:{input:s},backend:n}),a=Qf({inputs:{x:i},backend:n}),l=wi({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Qd({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const nve={kernelName:cm,backendName:"webgl",kernelFunc:EL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:s}=t,{axis:o}=s;if(e.length===1)return Qb({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const r=e[0].shape,i=e[0].dtype;e.forEach(u=>{a0(r,u.shape,"All tensors passed to stack must have matching shapes"),$(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=Qb({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),c=dL({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const ove={kernelName:dm,backendName:"webgl",kernelFunc:sve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rve{constructor(e,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const o=e.length,r=gt(o),i=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ive{constructor(e,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,v)=>m[0]+e[v]+m[1]);const o=e.length,r=gt(o),i=n.map(m=>m[0]).join(","),a=n.map((m,v)=>m[0]+e[v]).join(","),l=Dn("rc",o),c=Dn("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${r} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],f=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,v=o===1?2:4;m<v;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kL=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{paddings:r,constantValue:i}=s;if(le(o.shape)===0){const c=r.map((u,d)=>u[0]+o.shape[d]+u[1]);return Qd({backend:n,attrs:{shape:c,value:i,dtype:o.dtype}})}const a=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ive(o.shape,r,i):new rve(o.shape,r,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},ave={kernelName:hm,backendName:"webgl",kernelFunc:kL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lve=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,cve=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Da+`
  return result;
`,uve=wn({opSnippet:lve,packedOpSnippet:cve}),dve={kernelName:ud,backendName:"webgl",kernelFunc:uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{axis:r,keepDims:i}=s,a=o.shape.length,l=[],c=Xe(r,o.shape);let u=c;const d=Dt(u,a);let h=o;d!=null&&(h=Pn({inputs:{x:o},backend:n,attrs:{perm:d}}),u=Ut(u.length,a),l.push(h)),xn("prod",u,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:v,outDtype:g}=uue(h.shape,h.dtype,p,u);f=n.makeTensorInfo(v,g,m)}else{const[p,m]=pn(h.shape,u),v=le(m),g=Ie({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=Z0(o.dtype),x=Oa(g,b,"prod",n);f=Ie({inputs:{x},backend:n,attrs:{shape:p}}),l.push(g),l.push(x)}if(i){l.push(f);const p=Kt(f.shape,c);f=Ie({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const fve={kernelName:pm,backendName:"webgl",kernelFunc:hve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t){const{inputs:e,backend:n,attrs:s}=t,{paramsNestedSplits:o,paramsDenseValues:r,indices:i}=e,{outputRaggedRank:a}=s,l=o.map(g=>n.readSync(g.dataId)),c=o.map(g=>g.shape),u=n.readSync(r.dataId),d=n.readSync(i.dataId),[h,f,p]=due(l,c,u,r.shape,r.dtype,d,i.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),v=n.makeTensorInfo(p,r.dtype,f);return m.concat([v])}const mve={kernelName:sN,backendName:"webgl",kernelFunc:pve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gve(t){const{inputs:e,backend:n}=t,{starts:s,limits:o,deltas:r}=e,i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[c,u]=hue(i,s.shape,s.dtype,a,o.shape,l,r.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],s.dtype,u);return[d,h]}const vve={kernelName:oN,backendName:"webgl",kernelFunc:gve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t){const{inputs:e,backend:n,attrs:s}=t,{shape:o,values:r,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=s,c=n.readSync(o.dataId),u=n.readSync(r.dataId),d=n.readSync(i.dataId),h=a.map(v=>n.readSync(v.dataId)),f=a.map(v=>v.shape),[p,m]=fue(c,o.shape,u,r.shape,r.dtype,d,i.shape,h,f,l);return n.makeTensorInfo(p,r.dtype,m)}const yve={kernelName:rN,backendName:"webgl",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $L=t=>{const{backend:e,attrs:n}=t,{start:s,stop:o,step:r,dtype:i}=n,a=pue(s,o,r,i);return e.makeTensorInfo([a.length],i,a)},xve={kernelName:U0,backendName:"webgl",kernelFunc:$L};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wve="return 1.0 / x;",Cve=st({opSnippet:wve}),_ve={kernelName:dd,backendName:"webgl",kernelFunc:Cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve=qs+`
  return (x < 0.0) ? 0.0 : x;
`,Ive=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Eve=st({opSnippet:Sve,packedOpSnippet:Ive}),kve={kernelName:hd,backendName:"webgl",kernelFunc:Eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ve=qs+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Tve=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nve=st({opSnippet:$ve,packedOpSnippet:Tve}),Ave={kernelName:fd,backendName:"webgl",kernelFunc:Nve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rve{constructor(e,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,s,c];const u=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let h;r?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dve{constructor(e,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,s,c];const u=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let h;r?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ove(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,c]=a,u=te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Dve(o.shape,l,c,r,i):new Rve(o.shape,l,c,r,i);return n.runWebGLProgram(u,[o],"float32")}const Lve={kernelName:vm,backendName:"webgl",kernelFunc:Ove};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fve{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=e,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],c=[s&&i>1?i-1:i,s&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s,a=new Fve(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Mve={kernelName:W0,backendName:"webgl",kernelFunc:Pve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bve{constructor(e,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,s,c];const u=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],h=o?"0.5":"0.0";let f;r?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vve{constructor(e,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,s,c];const u=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],h=o?"0.5":"0.0";let f;r?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o}=e,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,c]=a,u=te().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Vve(o.shape,l,c,r,i):new Bve(o.shape,l,c,r,i);return n.runWebGLProgram(u,[o],o.dtype)}const jve={kernelName:gm,backendName:"webgl",kernelFunc:Uve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zve{constructor(e,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=e,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],c=[s&&i>1?i-1:i,s&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wve(t){const{inputs:e,backend:n,attrs:s}=t,{images:o,dy:r}=e,{alignCorners:i}=s,a=new zve(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const Gve={kernelName:z0,backendName:"webgl",kernelFunc:Wve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hve{constructor(e,n){this.variableNames=["x"];const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=e,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,r=e.map((a,l)=>o(l)).join(","),i=gt(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kve{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=e.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=e;const o=Dn("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,a=gt(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${r}){
            result.g = ${c(o.slice())};
          }
          if(${i}) {
            result.b = ${u(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function c(p){return p[s-1]="("+p[s-1]+" + 1)",h(p)}function u(p){return p[s-2]="("+p[s-2]+" + 1)",h(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",h(p)}function h(p){const m=e.map((b,x)=>f(x,p)),v=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${g}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{dims:r}=s,i=o.shape.length,a=Xe(r,o.shape);if(i===0)return hs({inputs:{x:o},backend:n});const l=te().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kve(o.shape,a):new Hve(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const Xve={kernelName:bm,backendName:"webgl",kernelFunc:qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qve{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=e[1],o=e[2];this.outputShape=e;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yve={kernelName:Y0,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:s}=t,{radians:o,fillValue:r,center:i}=e,a=n,l=new Qve(s.shape,r),[c,u]=Kx(i,s.shape[1],s.shape[2]),d=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jve=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Zve=st({opSnippet:Jve}),ebe={kernelName:pd,backendName:"webgl",kernelFunc:Zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbe="return inversesqrt(x);",nbe=st({opSnippet:tbe,cpuKernelImpl:mue}),sbe={kernelName:md,backendName:"webgl",kernelFunc:nbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X1{constructor(e,n,s,o,r,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=gt(r.length),u=gt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const v=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class obe{constructor(e,n,s,o,r,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=gt(r.length),u=gt(i.length);let d="";s===1?d="i":s===2&&(d="i, j");const h=`getIndices(${d})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const v=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t){const{inputs:e,backend:n,attrs:s}=t,{indices:o,updates:r}=e,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$a(r,o,i),h=[d/c,c];if(d===0)return n.makeTensorInfo(i,o.dtype);const f=Ie({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=Ie({inputs:{x:r},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;te().getBool("WEBGL_PACK")?v=new obe(l,a,f.shape.length,p.shape.length,u,h):v=new X1(l,a,f.shape.length,p.shape.length,u,h);const g=n.runWebGLProgram(v,[p,f,m],p.dtype),b=Ie({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),b}const ibe={kernelName:iN,backendName:"webgl",kernelFunc:rbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class abe{constructor(e,n,s,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,s];const r="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=te().getNumber("WEBGL_VERSION")===2?r:i,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t){const{inputs:e,backend:n,attrs:s}=t,{sortedSequence:o,values:r}=e,{side:i}=s,a=new abe(o.shape[0],o.shape[1],r.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(a,[o,r],"int32",l)}const cbe={kernelName:lN,backendName:"webgl",kernelFunc:lbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ube{constructor(e,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);o=l.join(),r=c.join()}const i=gt(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t){const{inputs:e,backend:n}=t,{condition:s,t:o,e:r}=e,i=new ube(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[s,o,r],us(o.dtype,r.dtype))}const hbe={kernelName:ym,backendName:"webgl",kernelFunc:dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fbe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Bm};
  float scale = ${Vm};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,pbe=st({opSnippet:fbe}),mbe={kernelName:gd,backendName:"webgl",kernelFunc:pbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbe=dc+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,vbe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bbe=st({opSnippet:gbe,packedOpSnippet:vbe,cpuKernelImpl:vue}),ybe={kernelName:xd,backendName:"webgl",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,wbe=st({opSnippet:xbe}),Cbe={kernelName:yd,backendName:"webgl",kernelFunc:wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _be=dc+`
  return sin(x);
`,Sbe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Da}
  return result;
`,Ibe=st({opSnippet:_be,packedOpSnippet:Sbe}),Ebe={kernelName:vd,backendName:"webgl",kernelFunc:Ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kbe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,$be=st({opSnippet:kbe}),Tbe={kernelName:bd,backendName:"webgl",kernelFunc:$be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nbe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Abe=st({opSnippet:Nbe}),Rbe={kernelName:wd,backendName:"webgl",kernelFunc:Abe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe=t=>{const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{blockShape:r,paddings:i}=s;$(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((g,b)=>g*b),l=[[0,0]];l.push(...i);for(let g=1+r.length;g<o.shape.length;++g)l.push([0,0]);const c=[],u=kL({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Od(u.shape,r,a,!1),h=Ld(d.length,r.length,!1),f=Fd(u.shape,r,a,!1),p=Ie({inputs:{x:u},backend:n,attrs:{shape:d}}),m=Pn({inputs:{x:p},backend:n,attrs:{perm:h}}),v=Ie({inputs:{x:m},backend:n,attrs:{shape:f}});return c.push(u),c.push(p),c.push(m),c.forEach(g=>n.disposeIntermediateTensorInfo(g)),v},Obe={kernelName:Cm,backendName:"webgl",kernelFunc:Dbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t){const{inputs:e,backend:n}=t,{indices:s,values:o,denseShape:r,defaultValue:i}=e;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId),c=n.readSync(r.dataId),u=n.readSync(i.dataId)[0],[d,h,f,p,m]=yue(a,s.shape,s.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(h,s.dtype,d),n.makeTensorInfo([h[0]],o.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),n.makeTensorInfo([m.length],s.dtype,new Int32Array(m))]}const Fbe={kernelName:cN,backendName:"webgl",kernelFunc:Lbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t){const{inputs:e,backend:n}=t,{inputIndices:s,inputShape:o,newShape:r}=e;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(s.dataId),l=Array.from(n.readSync(r.dataId)),[c,u,d]=xue(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(u,s.dtype,c),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const Mbe={kernelName:uN,backendName:"webgl",kernelFunc:Pbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[c,u]=JO(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(u,s.dtype,c)}const Vbe={kernelName:dN,backendName:"webgl",kernelFunc:Bbe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t){const{inputs:e,backend:n}=t,{data:s,indices:o,segmentIds:r}=e;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[c,u]=JO(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(u,s.dtype,c)}const jbe={kernelName:hN,backendName:"webgl",kernelFunc:Ube};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const{inputs:e,backend:n,attrs:s}=t,{sparseIndices:o,sparseValues:r,defaultValue:i}=e,{outputShape:a}=s,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=$a(r,o,a),f=!1;if(r.dtype==="string"){const g=n.bufferSync(o),b=n.bufferSync(r),x=Yr(n.readSync(i.dataId)[0]),y=gue(g,b,a,h,u,c,l,d,x,f);return n.makeTensorInfo(a,y.dtype,y.values)}const p=new X1(c,l,o.shape.length,r.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[r,o,i],r.dtype),v=Ie({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),v}const Wbe={kernelName:fN,backendName:"webgl",kernelFunc:zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{numOrSizeSplits:r,axis:i}=s,a=Xe(i,o.shape)[0],l=l1(o,r,a),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=hc({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const Hbe={kernelName:_m,backendName:"webgl",kernelFunc:Gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TI="return sqrt(x);",Kbe=st({opSnippet:TI,packedOpSnippet:TI,cpuKernelImpl:wue}),qbe={kernelName:Cd,backendName:"webgl",kernelFunc:Kbe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbe="return x * x;",Qbe=st({opSnippet:Xbe}),Ybe={kernelName:G0,backendName:"webgl",kernelFunc:Qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NI="return (a - b) * (a - b);",Jbe=wn({opSnippet:NI,packedOpSnippet:NI}),Zbe={kernelName:_d,backendName:"webgl",kernelFunc:Jbe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const r=n.readSync(o.dataId),i=mr(r),a=Cue(i,"string",s);return n.makeTensorInfo(o.shape,"string",a)}const tye={kernelName:H0,backendName:"webgl",kernelFunc:eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye({inputs:t,attrs:e,backend:n}){const{x:s}=t,o=qs+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,r=new To(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const sye={kernelName:$d,backendName:"webgl",kernelFunc:nye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oye{constructor(e,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=gt(s.length),i=gt(s.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=s.map((c,u)=>(l++,s.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${e});
      ${r} strides = ${r}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{begin:r,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=s,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:v,isSimpleSlice:g,begin:b,end:x,strides:y}=Wx(o.shape,r,i,a,l,c,u,d,h);let w;if(m)w=Ie({inputs:{x:o},backend:n,attrs:{shape:p}});else if(v||g){$(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const _=Ux(b,x,y),S=hc({inputs:{x:o},backend:n,attrs:{begin:b,size:_}});w=Ie({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([o])){const S=n.readSync(o.dataId),I=qe(o.shape,o.dtype,S),E=_ue(f,I,y,b);w=n.makeTensorInfo(p,o.dtype,E.values)}else{const S=new oye(b,y,f);w=n.runWebGLProgram(S,[o],o.dtype)}const C=Ie({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const iye={kernelName:K0,backendName:"webgl",kernelFunc:rye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aye(t){const{inputs:e,backend:n,attrs:s}=t,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=s,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[p,m]=Sue(h,f,o,r,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const lye={kernelName:pN,backendName:"webgl",kernelFunc:aye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t){const{inputs:e,backend:n,attrs:s}=t,{skipEmpty:o}=s,{input:r,delimiter:i}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId)[0],[c,u,d]=Iue(a,l,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const uye={kernelName:mN,backendName:"webgl",kernelFunc:cye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t){const{inputs:e,backend:n,attrs:s}=t,{numBuckets:o}=s,{input:r}=e;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=Eue(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const hye={kernelName:gN,backendName:"webgl",kernelFunc:dye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fye="return tan(x);",pye=st({opSnippet:fye}),mye={kernelName:Id,backendName:"webgl",kernelFunc:pye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gye=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,vye=st({opSnippet:gye}),bye={kernelName:Ed,backendName:"webgl",kernelFunc:vye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t){const{inputs:e,backend:n,attrs:s}=t,{tensor:o,indices:r,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=$a(i,r,o.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(o.shape,r.dtype);const f=Ie({inputs:{x:r},backend:n,attrs:{shape:[l,a]}}),p=Ie({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=Ie({inputs:{x:o},backend:n,attrs:{shape:h}}),v=new X1(l,a,f.shape.length,p.shape.length,u,h,!1,!0),g=n.runWebGLProgram(v,[p,f,m],m.dtype),b=Ie({inputs:{x:g},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}const xye={kernelName:aN,backendName:"webgl",kernelFunc:yye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wye{constructor(e,n){this.variableNames=["A"];const s=new Array(e.length);for(let i=0;i<s.length;i++)s[i]=e[i]*n[i];this.outputShape=s,this.rank=s.length;const o=gt(this.rank),r=Cye(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function Cye(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<t.length;o++)s.push(`imod(${n[o]}, ${t[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TL(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),c=o.dtype==="string"?l.map(h=>Yr(h)):l,u=qe(o.shape,o.dtype,c),d=$ue(u,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new wye(o.shape,r);return n.runWebGLProgram(i,[o],o.dtype)}const _ye={kernelName:kd,backendName:"webgl",kernelFunc:TL};class Sye{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Iye{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function AI(t){let e=1;for(;e<t;)e*=2;return e}function Eye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o}=e,{k:r,sorted:i}=s,a=te().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=te().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([o])||u<a||r>l){const E=n.readSync(o.dataId),[O,A]=Tue(E,c,o.dtype,r,i);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(r===0)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[o,Qd({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(o):o,m=le(c)/u,v=Ie({inputs:{x:f},attrs:{shape:[m,u]},backend:n});h&&$i(n,f);const g=AI(r),b=AI(u);let x=null;const y=()=>x===null?[v,v]:[v,x],w=(E,O,A)=>{const P=y(),z=new Sye(A),M=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[E],[O]],R=x;x=n.runWebGLProgram(z,P,"int32",M),$i(n,R)};for(let E=1;E<g;E*=2){const O=E*2;for(let A=E;A>=1;A/=2)w(O,A,[m,b])}for(let E=b;E>g;E/=2){const O=y(),A=new Iye([m,E/2]),z=[[u],[x===null?1:0],[g]],G=x;x=n.runWebGLProgram(A,O,"int32",z),$i(n,G);const M=g/2,R=M*2;for(let D=M;D>=1;D/=2)w(R,D,x.shape)}let C=x;x=hc({inputs:{x},backend:n,attrs:{begin:0,size:[m,r]}}),$i(n,C);let _=wL({inputs:{x:v,indices:x},backend:n,attrs:{axis:1,batchDims:1}});$i(n,v);const S=c.slice(0,-1);S.push(r),C=x,x=Ie({inputs:{x},attrs:{shape:S},backend:n}),$i(n,C);const I=_;return _=Ie({inputs:{x:_},attrs:{shape:S},backend:n}),$i(n,I),[_,x]}const kye={kernelName:q0,backendName:"webgl",kernelFunc:Eye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ye{constructor(e,n,s,o,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t){const{inputs:e,backend:n,attrs:s}=t,{image:o,transforms:r}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=s,[u,d,h,f]=o.shape,[p,m]=c??[d,h],v=[u,p,m,f],g=new $ye(d,h,i,a,l,v);return n.runWebGLProgram(g,[o,r],"float32")}const Nye={kernelName:X0,backendName:"webgl",kernelFunc:Tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t){const{inputs:e,attrs:n,backend:s}=t,{axis:o}=n,{x:r}=e;Kd(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(r.dataId),{outputValues:a,outputShape:l,indices:c}=Nue(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([c.length],"int32",c)]}const Rye={kernelName:Q0,backendName:"webgl",kernelFunc:Aye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t){const{inputs:e,backend:n,attrs:s}=t,{value:o}=e;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[r],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==r&&(c[u++]=i.shape[m]);const d=[],h=new Array(a).fill(0),f=i.shape.slice();f[r]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[r]=m;const v=hc({inputs:{x:i},backend:n,attrs:{begin:h,size:f}}),g=Ie({inputs:{x:v},backend:n,attrs:{shape:c}});p[m]=g,d.push(v)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Oye={kernelName:Im,backendName:"webgl",kernelFunc:Dye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lye{constructor(e,n){this.variableNames=["x","segmentIds"];const s=e.windowSize,o=e.batchSize,r=e.inSize,i=e.numSegments,a=i*Math.ceil(r/s);this.outputShape=[o,a];const l="0.0",c="sumValue",u=Math.floor(s/4)*4,d=s%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";r%s>0&&(f=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t){const{inputs:e,backend:n,attrs:s}=t,{x:o,segmentIds:r}=e,{numSegments:i}=s,a=o.shape.length,l=[];let c=0;const u=Dt([c],a);let d=o;u!=null&&(d=Pn({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(d),c=Ut(1,a)[0]);const h=uR(d.shape,c,i),f=le([d.shape[c]]),p=Ie({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=Z0(o.dtype),v=(y,w,C,_,S)=>{const I=y.shape[0],E=y.shape[1],O=cR(E,S),A={windowSize:O,inSize:E,batchSize:I,numSegments:S},P=new Lye(A,w),z=n.compileAndRun(P,[y,C],_);if(l.push(z),z.shape[1]===S)return z;const G=$L({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),M=TL({inputs:{x:G},backend:n,attrs:{reps:[E/O]}});return l.push(G),l.push(M),v(z,w,M,_,S)},g=v(p,"unsortedSegmentSum",r,m,i),b=Ie({inputs:{x:g},backend:n,attrs:{shape:h}});let x=b;if(u!=null){l.push(b);const y=mi(u);x=Pn({inputs:{x},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}const Pye={kernelName:Em,backendName:"webgl",kernelFunc:Fye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mye=[wde,_de,Ede,Tde,Ade,Ode,Fde,Mde,jde,Wde,Kde,Qde,Zde,she,ihe,lhe,uhe,phe,ghe,bhe,Che,The,Ahe,Lhe,Phe,zhe,Ghe,Xhe,ode,Jhe,sfe,afe,ffe,gfe,bfe,xfe,Cfe,Efe,Tfe,Rfe,Ofe,Ffe,Mfe,Ufe,zfe,Kfe,Xfe,Jfe,tpe,spe,ape,dpe,mpe,bpe,wpe,Cpe,Spe,Epe,$pe,Npe,Rpe,Fpe,Bpe,jpe,Wpe,Kpe,Qpe,eme,ome,sde,ime,tfe,cme,hme,mme,ide,yme,_me,Ime,Tme,Rme,Fme,Bme,zme,Kme,Qme,Jme,nge,oge,ige,uge,hge,pge,gge,bge,Cge,Ege,Nge,Mge,cde,jge,Gge,qge,Yge,Bhe,eve,nve,ove,ave,dve,lde,fve,mve,vve,yve,xve,Vhe,Oge,_ve,kve,Ave,dde,Lve,Mve,jve,Gve,Xve,Yve,ebe,sbe,ibe,cbe,hbe,mbe,ybe,Cbe,Ebe,Tbe,khe,Fge,Rbe,Obe,Fbe,Mbe,Vbe,jbe,Wbe,Hbe,qbe,Ybe,Zbe,tye,sye,iye,lye,uye,hye,Lge,bde,mye,bye,xye,_ye,kye,Nye,yde,Rye,Oye,Pye,tve];for(const t of Mye)bN(t);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var Bye={штих:"noun",пяних:"noun",белих:"adjective",борзих:"adjective",малих:"adjective",старих:"adjective",дарнопих:"noun",сухих:"adjective",черемних:"noun",сирих:"adjective",плохих:"adjective",целих:"adjective",жих:"noun",войцих:"noun",скорих:"adjective",бурих:"adjective",чалих:"adjective",серих:"adjective",удалих:"adjective",карих:"adjective",гених:"noun",литвих:"noun",марцих:"noun",сізих:"adjective",яних:"noun",мжачих:"adjective",сірих:"adjective",янбих:"noun",бодрих:"adjective",стрий:"noun",чорторий:"noun",юрий:"adjective",цибрий:"noun",цібрий:"noun",карий:"adjective",куприй:"noun",кирий:"noun",негрий:"noun",губрий:"noun",шкабрий:"noun",замрий:"noun",передрий:"noun",одерий:"noun",жегрий:"noun",жарий:"adjective",зюбрий:"noun",семерий:"noun",лий:"noun",бий:"noun",рий:"noun",вий:"noun",ший:"noun",валий:"noun",крайній:"adjective",осінній:"adjective",кутній:"adjective",середній:"adjective",горішній:"adjective",безродній:"adjective",осадчій:"adjective",кий:"noun",новохатній:"adjective",очеретній:"adjective",рбий:"noun",закутній:"adjective",недавній:"adjective",порожній:"adjective",бокий:"noun",вчерашній:"adjective",огородній:"adjective",трощий:"noun",вчорашній:"adjective",житній:"adjective",нижній:"adjective",синій:"adjective",хорий:"noun",краснобокій:"adjective",хижній:"adjective",забродній:"adjective",калюжній:"adjective",виноградній:"adjective",коломий:"noun",летучій:"adjective",поздній:"adjective",серий:"noun",нагорній:"adjective",фартушній:"adjective",холошвій:"noun",батий:"noun",волошиній:"adjective",жирий:"noun",заможній:"adjective",короткій:"adjective",останній:"adjective",передній:"adjective",піддубній:"adjective",пізній:"adjective",погородній:"adjective",бояжній:"adjective",смий:"noun",задвірній:"adjective",остатній:"adjective",підсадній:"adjective",достатній:"adjective",зимній:"adjective",рябой:"adjective",рудой:"adjective",козодой:"noun",яровой:"adjective",кривой:"adjective",садовой:"adjective",полевой:"adjective",сисой:"noun",плохой:"adjective",сухой:"adjective",гаєвой:"adjective",глухой:"adjective",горевой:"adjective",кутовой:"adjective",копаной:"adjective",злой:"adjective",сєдой:"adjective",благой:"adjective",водостой:"noun",косой:"adjective",ліждвой:"noun",большой:"adjective",половой:"adjective",чорной:"adjective",косогой:"adjective",золотой:"adjective",лановой:"adjective",яловой:"adjective",дорогой:"adjective",німой:"adjective",первой:"adjective",русой:"adjective",худой:"adjective",цаподой:"noun",авасілой:"noun",валовой:"adjective",гнідой:"adjective",молокопой:"noun",золотобой:"noun",ярковой:"noun",аміхалакіой:"noun",седой:"adjective",крутой:"adjective",кучной:"adjective",слепой:"adjective",дурной:"adjective",молодой:"adjective",бухой:"adjective",самотній:"adjective",біла:"adjective",бура:"adjective",велика:"adjective",домовина:"noun",рослина:"noun",врецьона:"noun",глибока:"adjective",висока:"adjective",гладка:"adjective",грицина:"noun",гужва:"noun",ковінька:"noun",дика:"adjective",діброва:"noun",кицька:"noun",ківа:"noun",лепка:"adjective",островерха:"adjective",петрина:"noun",прудка:"adjective",семенина:"noun",турчина:"noun",чуприна:"noun",швидка:"adjective",щербина:"noun",яковина:"noun",синьоока:"adjective",крива:"adjective",сліпа:"adjective",глуха:"adjective",жовта:"adjective",добра:"adjective",хоробра:"adjective",сухоребра:"adjective",гарна:"adjective",мала:"adjective",весна:"noun",зла:"adjective",жива:"adjective",ніяка:"adjective",ціла:"adjective",молода:"adjective",далека:"adjective",золота:"adjective",жвава:"adjective",дорога:"adjective",коса:"adjective",литва:"noun",чужа:"adjective",тепла:"adjective",груба:"adjective",слава:"noun",брова:"noun",стара:"adjective",катерина:"noun",василина:"noun",нижня:"adjective",худа:"adjective",проста:"adjective",дівоча:"adjective",крута:"adjective",метка:"adjective",чорна:"adjective",сторона:"noun",невкрита:"adjective",руда:"adjective",темна:"adjective",проява:"noun",тиха:"adjective",божа:"adjective",весела:"adjective",бабина:"adjective",суха:"adjective",люта:"adjective",стіна:"noun",вража:"adjective",хороша:"adjective",легка:"adjective",козача:"adjective",польща:"noun",недужа:"adjective",розлога:"adjective",гаряча:"adjective",середня:"adjective",торішня:"adjective",сита:"adjective",гостра:"adjective",осіння:"adjective",невесела:"adjective",москва:"noun",широка:"adjective",половина:"noun",синя:"adjective",сира:"adjective",довга:"adjective",коротка:"adjective",лукава:"adjective",абияка:"adjective",королева:"noun",чайна:"adjective",сіра:"adjective",сутула:"adjective",сава:"noun",дебела:"adjective",мокра:"adjective",убога:"adjective",безрука:"adjective",димна:"adjective",мила:"adjective",боса:"adjective",гола:"adjective",красноока:"adjective",остання:"adjective",десна:"noun",житня:"adjective",тризна:"noun",цупка:"adjective",порожня:"adjective",ліва:"adjective",сьома:"adjective",вовна:"noun",сова:"noun",бела:"adjective",ряба:"adjective",гніда:"adjective",гожа:"adjective",кисла:"adjective",кутня:"adjective",огниста:"adjective",мудра:"adjective",дужа:"adjective",підстава:"noun",бодра:"adjective",бадьора:"adjective",кривохижа:"adjective",прихожа:"adjective",побожа:"adjective",пригожа:"adjective",петрунька:"noun",ковинька:"noun",кишинька:"noun",кропивянька:"noun",зеленька:"noun",лабунька:"noun","м'якенька":"adjective",бухонька:"noun",сиза:"adjective",маза:"adjective",блаза:"adjective",улина:"adjective",ейвена:"adjective",еремина:"adjective",ена:"adjective",клята:"adjective",периста:"adjective",працевита:"adjective",свіжа:"adjective",рижа:"adjective",копистира:"noun",скорина:"noun",більченя:"noun",кривошеня:"noun",нестереня:"noun",захарченя:"noun",войценя:"noun",протасеня:"noun",олещеня:"noun",денисеня:"noun",стрельченя:"noun",молодоженя:"noun",заграва:"noun",неменша:"adjective",неменьша:"adjective",меньша:"adjective",паший:"noun",пєша:"adjective",дзвінка:"adjective",пухка:"adjective",безпала:"adjective",вобла:"adjective",горжа:"adjective",горіла:"adjective",китаста:"adjective",лиса:"adjective",осадча:"adjective",пелехата:"adjective",підпала:"adjective",ставнича:"adjective",чала:"adjective",чубата:"adjective",целомудра:"adjective",кара:"adjective",коцупатра:"adjective",немудра:"adjective",шара:"adjective",шингира:"adjective",передера:"adjective",далекора:"adjective",жара:"adjective",яра:"adjective",золотопера:"adjective",остра:"adjective",хитра:"adjective",прозора:"adjective",карчинска:"adjective",гнила:"adjective",хижа:"adjective",крижа:"adjective",погоріла:"adjective",куца:"adjective",солодка:"adjective",безверха:"adjective",усата:"adjective",довгопола:"adjective",щербата:"adjective",пишна:"adjective",хоружа:"adjective",мирна:"adjective",долга:"adjective",бєла:"adjective",надточа:"adjective",гаркава:"adjective",мягка:"adjective",топча:"adjective",товста:"adjective",блага:"adjective",захожа:"adjective",боліла:"adjective",басиста:"adjective",басіста:"adjective",люба:"adjective",горбата:"adjective",драна:"adjective",куряча:"adjective",куса:"adjective",зайва:"adjective",кругла:"adjective",брижата:"adjective",скора:"adjective",плоха:"adjective",горяча:"adjective",тверда:"adjective",невідома:"adjective",картава:"adjective",горна:"adjective",черна:"adjective",гуржа:"adjective",гикава:"adjective",шита:"adjective",сєра:"adjective",сіда:"adjective",гнуча:"adjective",слизька:"adjective",бистра:"adjective",полева:"adjective",парубоча:"adjective",вібла:"adjective",мазна:"adjective",волохата:"adjective",шалена:"adjective",щира:"adjective",слаба:"adjective",суковата:"adjective",нища:"adjective",одинока:"adjective",сядриста:"adjective",яшна:"adjective",ракоча:"adjective",губата:"adjective",летуча:"adjective",патлата:"adjective",вяла:"adjective",гірна:"adjective",кіптіла:"adjective",кривовяза:"adjective",лиха:"adjective",подуфала:"adjective",буйна:"adjective",зайшла:"adjective",купрата:"adjective",мерзла:"adjective",варгата:"adjective",горда:"adjective",драпата:"adjective",загризла:"adjective",кичата:"adjective",оковита:"adjective",тлуста:"adjective",тонка:"adjective",коптіла:"adjective",погожа:"adjective",товстокора:"adjective",гладенька:"adjective",глубока:"adjective",періста:"adjective",виконавча:"adjective",кохана:"adjective",кризька:"adjective",німа:"adjective",росла:"adjective",некипіла:"adjective",плакуща:"adjective",похила:"adjective",строга:"adjective",богата:"adjective",заливча:"adjective",крамна:"adjective",поставнича:"adjective",безуса:"adjective",плоска:"adjective",сергата:"adjective",сухотепла:"adjective",толста:"adjective",шарпата:"adjective",безребра:"adjective",душна:"adjective",змерзла:"adjective",золотоверха:"adjective",наточа:"adjective",положа:"adjective",рокоча:"adjective",горлата:"adjective",скупа:"adjective",бібла:"adjective",ільніцка:"adjective",рогоча:"adjective",сміла:"adjective",щедра:"adjective",безклуба:"adjective",білоока:"adjective",шерстка:"adjective",безкишка:"adjective",летюча:"adjective",ловча:"adjective",піша:"adjective",раба:"adjective",суховерха:"adjective",тягла:"adjective",шаблиста:"adjective",шубала:"adjective",бедрата:"adjective",верлата:"adjective",галича:"adjective",запухла:"adjective",зубата:"adjective",кунта:"adjective",некрита:"adjective",пахуча:"adjective",теляча:"adjective",шпарка:"adjective",глива:"adjective",косата:"adjective",любима:"adjective",низька:"adjective",окрепка:"adjective",робоча:"adjective",слизькоуха:"adjective",хропата:"adjective",цівата:"adjective",шията:"adjective",безборода:"adjective",голоборода:"adjective",голомоза:"adjective",горєла:"adjective",єжела:"adjective",калиста:"adjective",корчиста:"adjective",курна:"adjective",надута:"adjective",пікуща:"adjective",погорела:"adjective",савіцка:"adjective",тупа:"adjective",дзяна:"adjective",жовкла:"adjective",колюча:"adjective",мазана:"adjective",сапата:"adjective",світа:"adjective",сухолитка:"adjective",цаберяба:"adjective",цвіла:"adjective",чупла:"adjective",асадча:"adjective",гарагата:"adjective",дзюбата:"adjective",долгопола:"adjective",жилава:"adjective",козина:"adjective",крепка:"adjective",ласа:"adjective",личката:"adjective",лобата:"adjective",льогка:"adjective",мишаста:"adjective",невмита:"adjective",перката:"adjective",рідка:"adjective",саплива:"adjective",тонкошкура:"adjective",цепла:"adjective",беззуба:"adjective",бушна:"adjective",бяла:"adjective",кріпка:"adjective",лакома:"adjective",майна:"adjective",нагла:"adjective",огніста:"adjective",осядла:"adjective",рабоча:"adjective",рапава:"adjective",розмаїта:"adjective",тупча:"adjective",ушата:"adjective",чорноока:"adjective",галянта:"adjective",голомовза:"adjective",одажа:"adjective",орлата:"adjective",пашиста:"adjective",пробита:"adjective",сепіта:"adjective",слабка:"adjective",цікава:"adjective",шамка:"adjective",шибиста:"adjective",баліцка:"adjective",бита:"adjective",боляча:"adjective",глабчаста:"adjective",гусліста:"adjective",деньдобра:"adjective",замліла:"adjective",лабата:"adjective",мяка:"adjective",несміла:"adjective",нєма:"adjective",обща:"adjective",одайна:"adjective",оката:"adjective",остиста:"adjective",пахуща:"adjective",пстра:"adjective",сладка:"adjective",храпата:"adjective",чесніша:"adjective",чула:"adjective",бідноша:"adjective",довгорука:"adjective",довгоша:"adjective",іваніцка:"adjective",корната:"adjective",кулява:"adjective",літуча:"adjective",марна:"adjective",медзата:"adjective",обмокла:"adjective",піджара:"adjective",побоча:"adjective",сагата:"adjective",удала:"adjective",усяка:"adjective",байдужа:"adjective",бескорса:"adjective",гірка:"adjective",главата:"adjective",горча:"adjective",горька:"adjective",добровольска:"adjective",довгопта:"adjective",досужа:"adjective",драпята:"adjective",камяна:"adjective",каправа:"adjective",киричата:"adjective",колота:"adjective",комарніцка:"adjective",люзна:"adjective",молодша:"adjective",неумита:"adjective",пересідла:"adjective",підла:"adjective",пухла:"adjective",семяниста:"adjective",сіроока:"adjective",стряпча:"adjective",твереза:"adjective",цибульска:"adjective",чарна:"adjective",ярка:"adjective",безгуба:"adjective",білоборода:"adjective",болєла:"adjective",бровата:"adjective",гікава:"adjective",голобока:"adjective",драбата:"adjective",жарка:"adjective",каплата:"adjective",кісла:"adjective",ковалевска:"adjective",ковальска:"adjective",козловска:"adjective",крилата:"adjective",куцка:"adjective",малоока:"adjective",мгка:"adjective",немята:"adjective",непроста:"adjective",нехороша:"adjective",пелихата:"adjective",підласа:"adjective",подпала:"adjective",руцка:"adjective",семениста:"adjective",услиста:"adjective",шорстка:"adjective",хила:"adjective",буката:"adjective",васалата:"adjective",вибла:"adjective",видойна:"adjective",виловата:"adjective",гарча:"adjective",горела:"adjective",дута:"adjective",зибла:"adjective",індича:"adjective",кальноока:"adjective",карнауха:"adjective",кривобедра:"adjective",кричфалуша:"adjective",кубата:"adjective",кужда:"adjective",ломана:"adjective",мацевита:"adjective",івашина:"noun",солоха:"adjective",перерва:"noun",проскура:"adjective",бова:"noun",сметана:"noun",дуброва:"noun",проскурня:"noun",родіна:"noun",єна:"noun",солонина:"noun",ліщина:"noun",лугина:"adjective",сосна:"noun",гавва:"noun",ужва:"noun",кулина:"adjective",халява:"noun",холява:"noun",підкова:"noun",крайня:"adjective",хохотва:"noun",цибулька:"noun",нікульча:"noun",кравчина:"noun",лупина:"adjective",лихошва:"noun",думбрава:"noun",плахотня:"adjective",покутня:"adjective",пона:"noun",семена:"noun",грона:"noun",єва:"noun",парасківа:"noun",шова:"noun",бурдужа:"adjective",козюберда:"adjective",говтва:"noun",приколота:"adjective",варнава:"noun",гурина:"adjective",рябокобила:"noun",кучина:"adjective",савва:"noun",кремена:"noun",малая:"adjective",горішня:"adjective",бурдюжа:"adjective",слаква:"noun",городня:"adjective",лиштва:"noun",цяцька:"noun",походня:"noun",недавня:"adjective",долішня:"adjective",марюхна:"noun",борона:"noun",колошва:"noun",семенча:"noun",затона:"noun",заплава:"noun",краснопера:"adjective",рибитва:"noun",сидора:"adjective",краплина:"noun",крутиголова:"noun",бакалина:"adjective",немна:"noun",очеретня:"adjective",пробийголова:"noun",мальона:"noun",сажина:"adjective",вчерашня:"adjective",бузина:"noun",забийворота:"noun",магльона:"noun",нейчева:"noun",потороча:"noun",ревіна:"noun",матьора:"adjective",святина:"noun",хіна:"noun",кожина:"adjective",наріжня:"noun",леона:"noun",передня:"adjective",савина:"adjective",сікачина:"noun",кльова:"noun",недолуга:"adjective",шкоропата:"noun",карасава:"noun",морева:"adjective",мустафіна:"noun",цьова:"noun",бубна:"noun",катона:"noun",міна:"noun",похвала:"noun",слоква:"noun",статіва:"noun",строна:"noun",вова:"noun",карева:"adjective",місюна:"noun",швая:"noun",бальва:"noun",вершина:"noun",врона:"noun",білокобила:"noun",гордина:"noun",кольва:"noun",льова:"noun",перекліта:"noun",основа:"noun",харена:"noun",борозна:"noun",будаква:"noun",каранікола:"noun",палесіка:"noun",рожина:"noun",штана:"noun",вицина:"noun",дубна:"noun",жовна:"noun",зіва:"noun",катарина:"noun",похмура:"adjective",фесина:"noun",шемена:"noun",галутва:"noun",зарева:"noun",ковальва:"noun",мирона:"noun",новосела:"noun",пачина:"adjective",совва:"noun",гіна:"noun",корона:"noun",новоженя:"noun",підберезня:"adjective",ряднина:"noun",сакська:"noun",канна:"noun",лукачина:"noun",плачінта:"noun",редьква:"noun",софина:"adjective",шатня:"adjective",блозва:"noun",вчорашня:"adjective",гриценя:"noun",куропатва:"noun",людва:"noun",стехна:"noun",парахоня:"noun",плєва:"noun",яворина:"noun",бендина:"noun",жовтонога:"adjective",конева:"adjective",мандалина:"noun",мацина:"noun",перезва:"noun",похвата:"noun",токмина:"noun",тюрина:"adjective",гицина:"noun",дзіна:"noun",куява:"noun",малонога:"adjective",стоколоса:"adjective",тимина:"adjective",біднина:"noun",вдовина:"adjective",лисохмара:"noun",микитина:"adjective",полівара:"noun",рибонька:"noun",ружина:"noun",тишина:"noun",цюрмаста:"noun",чалая:"adjective",васина:"noun",воїна:"noun",гулая:"noun",кова:"noun",она:"noun",палісіка:"noun",підошва:"noun",свидина:"noun",тирсина:"noun",хаврона:"noun",зона:"noun",кнзєва:"noun",розна:"adjective",ронжина:"noun",рудомина:"noun",сальва:"noun",скільсара:"noun",служала:"noun",фомина:"adjective",чупина:"adjective",шалупня:"noun",джупина:"noun",зоська:"noun",кузява:"noun",неледва:"noun",равва:"noun",разьва:"noun",шкорина:"noun",білозора:"adjective",бранціра:"noun",випна:"noun",галина:"adjective",мандаліна:"noun",мицька:"noun",мячина:"adjective",недосєка:"noun",пристая:"noun","м'яка":"adjective",вовчина:"noun",гринява:"noun",дівонька:"noun",ігіна:"noun",обійдихата:"noun",хижня:"adjective",челядина:"noun",янева:"adjective",голева:"adjective",дзюнька:"noun",дубрава:"noun",лигомина:"noun",мална:"noun",мархева:"noun",несправа:"noun",озява:"noun",панна:"noun",пупена:"noun",силява:"noun",сухокобила:"noun",цюрмоста:"noun",чевельча:"noun",чівільча:"noun",башева:"noun",бражна:"noun",варавва:"noun",волна:"noun",гольча:"noun",густа:"adjective",достатня:"adjective",зуграва:"noun",карапулька:"noun",кірна:"adjective",крапіва:"noun",луковина:"noun",мамона:"noun",мелещеня:"noun",мряна:"noun",параскева:"noun",похідня:"noun",пріхна:"noun",свтина:"noun",сьоська:"noun",терепіща:"noun",ціцяла:"noun",бодаква:"noun",гальвіта:"noun",деревенча:"noun",дона:"noun",дубена:"noun",задависвічка:"noun",йовва:"noun",капаціла:"noun",котельва:"noun",лісота:"noun",малюська:"noun",підсадня:"adjective",рєва:"noun",сувора:"adjective",хаджава:"noun",хомина:"adjective",псина:"noun",бобина:"noun",болотня:"adjective",бруква:"noun",кіона:"noun",ковбінька:"noun",кривонога:"adjective",лєва:"noun",мухина:"adjective",нефортуна:"noun",органіста:"noun",пасулька:"noun",пристава:"noun",бачина:"noun",безкорса:"adjective",бєлокобила:"noun",борзина:"noun",бружина:"noun",воротня:"adjective",гальона:"noun",голтва:"noun",горемульта:"noun",дацина:"noun",забанджала:"noun",злая:"adjective",кікена:"noun",коропатва:"noun",кузина:"adjective",лапунька:"noun",літава:"noun",мінчуна:"noun",на:"noun",ничая:"noun",новіцка:"adjective",пенькна:"noun",пухна:"noun",пуцята:"noun",рісна:"noun",розмаіта:"noun",румина:"adjective",свтна:"noun",сердита:"adjective",січінава:"noun",сментина:"noun",трізна:"noun",шкуропата:"noun",безхутра:"adjective",гальва:"noun",гнєда:"adjective",гребенча:"noun",гусонька:"noun",калабанька:"noun",козупляка:"noun",лапина:"adjective",мурина:"adjective",некульча:"noun",орона:"noun",парна:"adjective",пліва:"noun",приходька:"noun",сенина:"noun",солотва:"noun",тетева:"adjective",хавана:"noun",царева:"adjective",ахалая:"noun",варенька:"noun",варшава:"noun",вересоча:"noun",галунька:"noun",гліва:"noun",голина:"adjective",грузька:"adjective",гудина:"noun",євона:"noun",кірева:"adjective","кожем'яка":"noun",колоберда:"adjective",курінька:"noun",маржина:"noun",мигалина:"noun",мікава:"adjective",падва:"noun",паланичка:"adjective",палена:"adjective",подкова:"noun",ратушня:"adjective",селегейна:"noun",сминтина:"noun",сумина:"adjective",теміркая:"noun",ухата:"adjective",хавроня:"noun",холоста:"adjective",ціва:"noun",чернята:"noun",чикольва:"noun",шалина:"adjective",юдина:"adjective",адвена:"noun",балева:"adjective",брона:"noun",вербовата:"adjective",веремєва:"noun",волчаста:"adjective",гафина:"adjective",голутва:"noun",закрева:"noun",каджая:"noun",кальченя:"noun",капаниста:"adjective",кикина:"adjective",костерева:"noun",кривокобила:"noun",кулєва:"noun",лавна:"noun",маліцка:"adjective",молдова:"noun",моркова:"noun",пажина:"adjective",перевернихата:"noun",пилева:"adjective",піддубня:"adjective",постіва:"noun",пуста:"adjective",суботня:"adjective",фадеева:"adjective",ходаніцка:"adjective",хохітва:"noun",цибата:"adjective",черноока:"adjective",чкадуа:"noun",чокена:"noun",шепетина:"noun",шербина:"noun",яка:"adjective",ятва:"noun",безена:"noun",безшкура:"adjective",безязика:"adjective",белая:"adjective",берулава:"noun",бузна:"noun",бурсала:"noun",бучаста:"adjective",вчина:"noun",гапона:"noun",гернажа:"noun",гордуна:"noun",горсва:"noun",горясва:"noun",грицька:"noun",двіжона:"noun",задурня:"adjective",заслона:"noun",зачешигрива:"noun",йона:"noun",качна:"adjective",козовіта:"noun",криворота:"adjective","кур'ята":"noun",лозна:"adjective",люлява:"noun",лютая:"adjective",матухна:"noun",накутня:"adjective",плохая:"adjective",бухая:"adjective",самотня:"adjective",панібудьласка:"noun"};/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Vye{encode(e){const n=new Uint8Array(1);switch(e.wordClass){case nl.NOUN:n[0]=1;break;case nl.ADJECTIVE:n[0]=0;break;default:throw new TypeError(`Invalid word class: "${e.wordClass}".`)}return n}decode(e){if(e.length<1||e.length>1)throw new RangeError("Invalid vector length.");const n=e[0];if(n<0||n>1)throw new RangeError("Invalid vector value.");return{wordClass:n>=.5?nl.NOUN:nl.ADJECTIVE}}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Uye=20;/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class jye{constructor(e,n=0){this.vectorSize=e,this.unknownCharcode=n}encode(e){var n;const s=new Uint8Array(this.vectorSize),o=e.slice(-this.vectorSize).toLowerCase().padStart(this.vectorSize,"-");for(let r=0;r<o.length;r+=1){const i=o[r];s[r]=(n=vf[i])!==null&&n!==void 0?n:this.unknownCharcode}return s}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */te().set("IS_NODE",!1);class zye{constructor(e){this.modelLoader=e,this.modelPromise=null,this.wordTransformer=new jye(Uye),this.familyNameClassTransformer=new Vye}async classify(e){let n=this.getCached(e);if(n!=null)return n;const s=await this.loadModel(),o=this.wordTransformer.encode(e),r=await s.predict(Uh([o])).data();return n=this.familyNameClassTransformer.decode(r),n}getCached(e){let n=null;const s=Bye[e.toLowerCase()];return s&&(n={wordClass:s}),n}async loadModel(){return this.modelPromise==null&&(this.modelPromise=ete(this.modelLoader)),this.modelPromise}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */var Wye={dateSaved:"2023-02-25T18:20:32.974Z",modelTopologyType:"JSON",modelTopologyBytes:1659,weightSpecsBytes:428,weightDataBytes:4356},Gye={class_name:"Sequential",config:{name:"sequential_1",layers:[{class_name:"Embedding",config:{input_dim:34,output_dim:16,embeddings_initializer:{class_name:"RandomUniform",config:{minval:-.05,maxval:.05,seed:null}},embeddings_regularizer:null,activity_regularizer:null,embeddings_constraint:null,mask_zero:null,input_length:null,name:"embedding_Embedding1",trainable:!0,batch_input_shape:[null,null]}},{class_name:"SimpleRNN",config:{name:"simple_rnn_SimpleRNN1",trainable:!0,units:16,activation:"relu",use_bias:!0,kernel_initializer:{class_name:"VarianceScaling",config:{scale:1,mode:"fan_avg",distribution:"normal",seed:null}},recurrent_initializer:{class_name:"Orthogonal",config:{gain:1,seed:null}},bias_initializer:{class_name:"Zeros",config:{}},kernel_regularizer:null,recurrent_regularizer:null,bias_regularizer:null,activity_regularizer:null,kernel_constraint:null,recurrent_constraint:null,bias_constraint:null,dropout:0,recurrent_dropout:0,return_sequences:!1,return_state:!1,go_backwards:!1,stateful:!1,unroll:!1}},{class_name:"Dense",config:{units:1,activation:"sigmoid",use_bias:!0,kernel_initializer:{class_name:"VarianceScaling",config:{scale:1,mode:"fan_avg",distribution:"normal",seed:null}},bias_initializer:{class_name:"Zeros",config:{}},kernel_regularizer:null,bias_regularizer:null,activity_regularizer:null,kernel_constraint:null,bias_constraint:null,name:"dense_Dense1",trainable:!0}}]},keras_version:"tfjs-layers 4.2.0",backend:"tensor_flow.js"},Hye=[{name:"embedding_Embedding1/embeddings",shape:[34,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/kernel",shape:[16,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/recurrent_kernel",shape:[16,16],dtype:"float32"},{name:"simple_rnn_SimpleRNN1/bias",shape:[16],dtype:"float32"},{name:"dense_Dense1/kernel",shape:[16,1],dtype:"float32"},{name:"dense_Dense1/bias",shape:[1],dtype:"float32"}],Kye="D3HrvZUs7rxT6Vu+tVsfvPLyB70zbt695ECPvKyKWj7TnUO+JZ9pvs8MkL3/1DQ+kftzvPGZZL4aDpe8KiOnvSvRHz52vQK9mGiSPm50B72RCfM+7hW6PSOuTz7b9zG+M5MOPv/mYL7Q9Rk+aPgRvrfQuT6mQ2Q+eOawPp/PpLyM9yY+zB4APT27n75OVUk+V8y6vetFyD0zPlW+sqPfPER8Ub6J1pI+5QwEvcZktT12HLW+FSFGPU6s2ryQapW9/MNNvoK1t71R5sK8N6Y/vjqBzTtusl2+0Ks8PpZOQ74ua5U9TOIfvkpgHDxho/294hcTPkJaiL1iXTo9o28bPhnMBr69EoG8CAeCvtgxXT5kMKq+KnLfPbScM73jYjw+LTa8vSeQWj49+cU7/FH2PKtOwr5y8K29GMMdvrkIgb0wK4C8Zeq2vXlG+L15O4c+CaFGvpmCjD5guBg+0AAQPv0EjT3CdZ0+vLOBulXEAb7VVpi+WldAPpIP8T0ETFm+NcLIPZix17rKGEW+n8jxPfT8hr43TLC8esPRvX6k4D1lZ0C+WERdPo4Qab4SdWw+uWSevp7+zTjX5Xi8nw+ZvldSb7xUfke7HX01PVOV2zzFqV2+SqcNvvPUTz0nzZi9Zl+ePWj6Wr3PLjY+vbjrvSRr6b1es/w8oaLjPUC0G72spye9rsomPtW/t72QYEy9AtR6PuX44z1dLrk9k6HAPE1+Eb7w1mY+N8MSvuMLsj1qmsO6JrRAvsJowr7iA1E+udZGPDLR57xRSj8+GFSnvYNUujxIvpM8FHmHvkr8QD38Po29LslnvShYOD45FAE7vfaWPbnegruqB2W9MdUkPpskUb3YGTU+L3gwvQhAYD4ed66+qJQUvjydBr7bSam8fYz/PCTisD7GYoQ+HDxJvSaIR77s3u+8sVTkvaDBaL13FBs+Z8T4vT4aKj2d4DC7ft+GPvVXFLxGXGI9RJ9avl7RCD6ujIy+M+/zPQbAtr3B2+c9BpZcPYIBTj7QNsM95bqEPc221T3u7TO+M2PIPU/BQb78/nk+f4TmvV5Elj0VOAK+0Y+DPq0GkL364pI98CGUvjK4IL1CLoK+kohXvTS3I76BpcM9WE0Rva5vkz301Ui+CLe7vWkLnT1sjpM8EYyWPWblIryk+gI+gnQSvu9XKL7jtni9Rc/IvaonHj2sKBc+VzRovpdOpT64szY+OavnvfzjeLuBH62+OqC2OoeMBr0eJVi7ST7CPLK/3jxTOoC9BRUSPjNBaD6OIlm+7ApUPlbsWj5KIKi+J9F1Pfi88L1+JdA9a6F+PsiRub06rh2+HlXnPb5Wj774l+i6nifjvWMCtL2WnqW9pUNdvjQM4L0ZJDy9lZ+LPbJWhj2hUZO+iWF0vhq17zqKwOI9Qq6sPWo8gD3c0co9/5WaPLN6PL6HOLO8fXvUvEF2IL4QJ7S98UzCPZJTlb6VUCM+y7dqvkJXyTyxD+I9N6PXvUxuqr0jiuM9p1OgO/wUFL07zEy+n5rPvSLifbt4N5e+kbdRviF6Db0ZSjo+B+dXvqB+iT7nFI68Z9bUPU9FGT21fz4+fee2vaIHqLzRTtG8aGggPqQlpD1GORk9/FpnPjatAL60OPg8x+qAPdU74zxSk6+9lYwdPikogr6pxao99PmXvH+yEz4zu5U9IeURPXqY9LpuvYk8OGmYvFX7+TtuUaO9qg0GPph0Xr5vdYM+0deHvozgtryfgDC8DaCGPTVxHb6q0fI97pWqPOXMAj7Y9ae+fljRuoumt71vblO+UaetPcadt7yiUYi9R9x8PqXbmb4V9gK+v2jjvVsTU72VAJ29JC1vPcpy1D2uNZM9N5mlvru77rxAZSo9jZWkvv+0HD6CY6k9RvnyvLM8Wr4/Yjo+aEr4vcUQkj3Ef7+7DusLvhf0oLxUt1u+LdOWPndY+Ty5+Dq+QfqQvqgCbj7V0L68swkNviGjaz0SkyQ+h9uuvckW97rM35m+O7ERPQvQ4L2XN3a9XwqPPifY7TynN0i9enwJPWh2Tj27c02+k0bpPWtEGz4p+qs9DzsKPhlEoD7U1qM9v7SAvNgeIr7tPJM9om6CvhmNcz7pBIa9HEvlPRmEGj7SzgE9tdoAO8dkeT2N2Xm9ChofvhVPSj19rZG+A2PfPVrax72zacc9YWsTvjSKAj4inbu9GbJGvSEnt76qFeq8JsAnvZ0cO75Lk7e5G8+WPrc5Cb3RGVg+xwxfvgTMNr18pdU9U49jPaRh5rg8G2Q+iUtrObd+jT0FTYG+XgVgvKwXJr6TWuG9BWosPlr9pT6IF2G+boCIvU0FOb39ivu9aMA5viC1S714C3q+CES6Pt11j76mNqk+/btevCcEVL7z5cK+ALgyPJeTPb0+7O+7lftrPslPZz1EqIY9DWKYvdtgWL5/DwI9Q2NFvJhKcb0MMQo+NtltPWZcmT2FlVA9V5Nnvc9IJr0TXCA+nAIuPoF7xbon0SQ+Kwi8ve0ePb6O3++9k2/GvZoLlrxRDM48DwOkvEiWIz7jsgC+NYZzvTu7Jb7Jcgm8qAoyPg8zkT3o8UI+7Mt/vZsaYj7UZDm+Z4BTPBgkQr7CSTs+PKpvPbkSED3tAaW9LJ9APo74Fz62CFe8xMDCPi83F76ttk++K6FGvQkDDr42fbG+N9cbPvP1Br2CU1c+qukfvu3DJz6Vjfy8jlM9PZNaKL4Ceu29dDVCvoG7fD5qTLu75+YoPXt8GD7ey2U+KpynvemmCL1L1VC9LsfhvcoBND44he273UFiPrLzK72XXPS9ZjZGPtBwh7gwW2i+ccbxvXtoMj4Q/u49AzHBvoTjHD40AuW+OiwYP4x9JD6PGAY/KN7+Pc0xhb6OqxY9AptQvbc7Or39a9e6DJ/zPvd+iz6XX7g6kqsEP5LI1L7ICBk+1k5SP0lR0T43qYI+kbFLvcUh5L7+v90+5mnZveLTxj03yAS+phJLvW7x3b4m3J68GeeBvlrhgj05ac++0Yyfvcrz7L1/Y/i+ZjMKPhEy6j3ImRu+fRRuPkunGL5dMVG+Yd5Fv6ys1z6PXYI+JhzOvaGxDT4p38I+QcDHPtkxbb0XnjM/ogGYviZrLj291se+iNNqvpZuUb7nas8+lj4tvvyQ3D7w+FO9r4ybPs7MJD+WsIG9pGxHPqmQo75RdUG/gFs2vRXbrj7n87w9aGosPm8vDr/oUeO+2pWxPsk1RT7lvPS+YBmZvkDPU745ORi/BxbNPg83pD2KOSq9Nh0tPw6bSj+WVTk97hLcPnMDpT7GgXW8dL46vltPvb11QOu9CeYDPYDxwbx5UQ8+MnesPb+Ajj7Uv7m+qE+TvM+Qt77g88s+7940P8/1zj5p9+g+FugoPgNebT69zXg+IbhFvnHq6LsVozg+iIaBPau6Kr6tTOG+U1bhPS6zFD64rqY/FZebvhOPeL5DGXo+dwgLPjKu6z5+X78+iAsNPrs/Pb+RQoe+6MyqvWutu75ml7G+3Casvq63/b4exKi9+5lMv7V/yb4twI49cbIcv/+5/r5lWxE/78Q+PhjngT4SENI9xZKXPmmQEb9UJGK+eYE3vtOLiDxf4zo+9KX5Pl0APj9PhqA+i/wMv1iRsjzngaK+/ocBv8RUnr0hPdM+YAshv896DL1aukY+kiIJvsKhvD66FTi++84Fv5vWjL4lr6W+OLvyvba/krzwXgm9X8rUvv+XNb7jhSo/zfCAPLRlqD4Fn5S+DeQfP0847T7NIZ4+/gMAPxyfcT6VQOM+UOmWvWDtrD4TLFW9NGQSveJN9T7AuFm+MvUSv/TnFz8uw68+k05IPj26MTwDLsW+hsLFvifDqD7Z6d28z+AOv1DeZL8TnA++mrwBvT0BGL5ireW+PLbOOQjsJjzUmya/CcavOz8kwr70lmK+PHcmPsmi9r5VeAI+yly7PSGkIT6xV1Q/uHsKP4WFir4DBcc+SIJuPlP0Lb5Nufu+dKc3vk/X4L2Qvyo/jJSCPr3+Vr7NNA4/5AqcPoYisjuvO6g9JGKRPgxvQj/bUnG8yqAbP8wDO75rdkO+keIuPvrKxT4VCoQ9fx3XPih9K77kIOg99g2gPcrn4rxDzyy+TDdxPpzmHz//YWM+PIXFvTGs4z5SaaE9NAwkv4Qcub6gS3g+6Wa0vf3qJD8NDC2/q4z6PFVEob5p8yG+uSjhvjAMgD4GQ2Q/+EfRPlrsL79K2PO+FyOrPav1lT6vSzQ+nQOovRiVMD4Yfg4+weDxPv9V8b3ix407T0mFvEXdYT4DaKq+rE4YviLa2r4q/vI7hVWOvWgaV77A7QU/OU2iPp8QQT58RIA+Lbf+vo65Fz1RDRw+mv6WvdOImj4/IyY9a+vPO/pDuj6WiFe94SnbvW0cAb5HUcQ8croTvdeGIT6Q5p89/2EpPyPapj33gSS+q161vhFrSj00b5A9P6g4vssdob5sS5G+r72gvUDqCj+C5+a9lJHFPjtFxz10OYs+qXakvlUu5Trwp749nrcQPbAzwr5pCs8+UhoIvsHVdT7iw+i+UYxzPgTn5T50arg+R/4IP7kH2T2cguW+pQX+vFqQdr3z5yY+SdURProPID4CXhA9crIcP/7a4D6r/549Ly6lvXeFUb9n9xs/CC3oPrOgAj8iPwo/8nPXviKqAr8q6TQ+vrumPrdtHz8prJq+V1/oPUZWGr4Y4cU9nRopvtRCkz2jeTy+pJW0PgwDyz6XfIo+QmZevqCRSj1/pIa+KoufPllZvT5o244+nRIYP3TbM70N+8y+a7d2vcsSWj4Cdrw+AT8hPVoDwL0BxL2+G1pmPo/CZL66zSS+g2rFPvewar7nfGe+YEuevRgFIr7dyRS+KES0Pnu1p754F6s+/inJPXa3tL4Qd5A+OmbLPWvlnb75WsU9rRHMvsgqxD5MQ90+Y38LPnBkZj7fKIs9uJCHvdiuXr6D/Rw9hpVyPu9Vqr4Qzom85dP6vYymmr1yG5w+2gSMPlV5tT1D1ks+EKTZPm4gOb6ZC+w+k8EOPA8oXb6r9z2+h6Tgvm7Dvj7OzJQ+7tkIPvbDjz4TN6u9GneSPTIooD7GdRA/wYQ4vVr7b71F/QI+cRORPrRPWzxVX22+Yu2vPsHriL720za+oBlVPogMe72YNKM8r9aEO5uq1z7RegW+4aX1PqfYRD/wpfI9sVqvPCI99jpAtWC9eXJ2PBb++j6w+809iODsPfwV0b2kL7S9D+FLPQZECD4oYRA+V1Z+vjarEj5ZF/q8KJSAPkjENr7zNd28pKODPj8FPL8mgFY8kJVMvgBfQ75uooK++9TaPg/5Cr5Pzo6+1Yy3viONQL/Fvng+Bmn6vTpQkb0N7Oi94ZVHPYE2Hr7J/Rk+zQzKvL3Chj5d85o+Q/YRPrsjnj7YzJY+01w3PyVgGD6INkM+XtnevbmxiL7Z1NI+jpdgvggkdz0QnJq+35a8PZX0SL4+y78+grnOPYHzlD2VKRA/xRW4PqyCPL4Cowa/Ku+pvZabKz99894+sY/Vva/ezL1zsUw+er4IP8DL/D1qa2a+m6B3PK8Cq76mu2++gsjvvP0kBz8pWqe+SyotvKUdmz4pFXA7bkXCvbwSbj44g7c8mID4viXITL56E/G9zBVuPPD+u7wCmJc9v1nDuyyEX77G7Nq8GUwXvQJRVT3nTYY9/wK9Pct9sT1dCqU9aRsHvlmTFD2/B5M9PclmvNt2Jb8eqR2+bZhIvlmRVT4k0zU/OFSyvnCsHb/BfrK+ZZJGv10pNT8uXQk/AaVXvgbtG76M5kC+b6zpPfBICD8I1Lm8",qye={format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v4.2.0",convertedBy:null},_c={modelInfo:Wye,modelTopology:Gye,weightSpecs:Hye,weightData:Kye,modelMetadata:qye};/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Xye=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Qye(t){if(Xye){const s=Buffer.from(t,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;++s)n.set([e.charCodeAt(s)],s);return n.buffer}class Yye{async load(){const e={};if(e.modelTopology=_c.modelTopology,e.weightSpecs=_c.weightSpecs,e.weightData=Qye(_c.weightData),_c.modelMetadata!=null){const n=_c.modelMetadata;e.format=n.format,e.generatedBy=n.generatedBy,e.convertedBy=n.convertedBy,n.signature!=null&&(e.signature=n.signature),n.userDefinedMetadata!=null&&(e.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(e.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(e.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(e.trainingConfig=n.trainingConfig)}return e}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Jye=/[аоуеиіяюєї]/gi;function Zye(t){const e=t.match(Jye);return e==null?0:e.length}function e0e(t){return Zye(t)===1}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class Q1{async inflect(e,n,s){const o=[],r=e.split("-");for(let i=0;i<r.length;i+=1){const a=await this.inflectNamePart(r[i],n,s,i===r.length-1);o.push(a)}return o.join("-")}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const t0e=/[ая]$/i,n0e=/(ой|ий|ій|их)$/i;class s0e extends Q1{constructor(e,n){super(),this.wordInflector=e,this.familyNameClassifier=n}async inflectNamePart(e,n,s,o){if(!o&&e0e(e))return e;let r=null;return this.isUncertainFamilyNameClass(e,n)&&(r=await this.familyNameClassifier.classify(e)),this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,wordClass:r==null?void 0:r.wordClass,applicationType:"familyName"})}isUncertainFamilyNameClass(e,n){return n===bf.FEMININE&&t0e.test(e)||n===bf.MASCULINE&&n0e.test(e)}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class o0e extends Q1{constructor(e){super(),this.wordInflector=e}inflectNamePart(e,n,s){return this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,applicationType:"givenName"})}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */class r0e extends Q1{constructor(e){super(),this.wordInflector=e}inflectNamePart(e,n,s){return this.wordInflector.inflect(e,{grammaticalCase:s,gender:n,applicationType:"patronymicName",customRuleFilter:o=>o.applicationType.includes("patronymicName")})}}/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const i0e=new o0e(kp),a0e=new r0e(kp),l0e=new zye(new Yye),c0e=new s0e(kp,l0e),fwe=new bq(i0e,a0e,c0e);/**
 * @file JavaScript library for declension of Ukrainian anthroponyms
 * @module shevchenko
 * @version 3.1.1
 * @author Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <shevchenko-js@tooleks.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-js.git}
 */const Y1=[];function u0e(t){const e=t({wordInflector:kp});Y1.push(e)}function pwe(){const t=[];for(const e of Y1)t.push(...e.fieldNames);return t}async function mwe(t,e){var n;const s={};for(const o of Y1){const r=await((n=o.afterInflect)===null||n===void 0?void 0:n.call(o,t,e));r!=null&&Object.assign(s,r)}return s}/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.2
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */class d0e{constructor(e,n,s){this.wordInflector=e,this.wordHyphenationRules=n,this.wordClassifierRules=s}async inflect(e,n){const s=[];for(const o of e.split(" "))this.wordHyphenationRules.find(i=>i.include.every(a=>new RegExp(a,"i").test(o)))?s.push(await this.inflectHyphenatedWord(o,n)):s.push(await this.inflectWord(o,n));return s.join(" ")}async inflectHyphenatedWord(e,n){const s=[];for(const o of e.split("-"))s.push(await this.inflectWord(o,n));return s.join("-")}async inflectWord(e,n){const{extractedWord:s,startDelimiter:o,endDelimiter:r}=this.extractWordDelimiters(e),i=this.wordClassifierRules.find(l=>l.include.every(c=>new RegExp(c,"i").test(s)));if(i==null)return e;const a=await this.wordInflector.inflect(s,{gender:i.gender,wordClass:i.wordClass,grammaticalCase:n});return o+a+r}extractWordDelimiters(e){let n=e,s="",o="";const r=n.match(/^(["'()])+/);r!=null&&r.index!=null&&(n=n.slice(r.index+1),s=r[0]);const i=n.match(/(["'()])+$/);return i!=null&&i.index!=null&&(n=n.slice(0,i.index),o=i[0]),{extractedWord:n,startDelimiter:s,endDelimiter:o}}}/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.2
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */var h0e=[{gender:"masculine",wordClass:"noun",include:["[аеєиіїоуюя]","(ут|ат|нт|ан|ик|ал|ос|ар|ун|ік|ер|ог|ач|ьт|ст|тр|рг|вт|вод|ль|яр|аф|ор|нин|ен|ир|ина|дій|ець|тав|аз|ес|ур|ус|от|кок)$"]},{gender:"masculine",wordClass:"adjective",include:["[аеєиіїоуюя]","(ий|ній)$","^(?!який)"]},{gender:"feminine",wordClass:"noun",include:["[аеєиіїоуюя]","(янка|тра)$"]},{gender:"feminine",wordClass:"adjective",include:["[аеєиіїоуюя]","(ша|вна|чна|йна)$","^(?!майна)"]}];/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.2
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */var f0e=[{include:["-","^(?!штаб|майстер|генерал)"]}];/**
 * @file shevchenko.js extension for declension of Ukrainian military ranks and appointments
 * @module shevchenko-ext-military
 * @version 0.0.0-beta.2
 * @author Oleksandr Tolochko <tooleks@gmail.com>
 * @license MIT
 * @copyright 2017-2024 Oleksandr Tolochko <tooleks@gmail.com>
 * @see {@link git+https://github.com/tooleks/shevchenko-ext-military.git}
 */const p0e=({wordInflector:t})=>{const e=new d0e(t,f0e,h0e);return{fieldNames:["militaryRank","militaryAppointment"],afterInflect:m0e(e)}};function m0e(t){return async(e,n)=>{const s={};return n.militaryRank!=null&&(s.militaryRank=await t.inflect(n.militaryRank,e)),n.militaryAppointment!=null&&(s.militaryAppointment=await t.inflect(n.militaryAppointment,e)),s}}u0e(p0e);const g0e=fn({__name:"app",setup(t){return(e,n)=>{const s=nW,o=j$;return Ft(),$o(o,null,{default:ns(()=>[Ze(s)]),_:1})}}}),og=(t,e)=>{const n=t.__vccOpts||t;for(const[s,o]of e)n[s]=o;return n},v0e={},b0e={class:"flag flag-ua"};function y0e(t,e){return Ft(),so("div",b0e)}const x0e=og(v0e,[["render",y0e],["__scopeId","data-v-6396ef21"]]);async function NL(t,e=Fn()){const{path:n,matched:s}=e.resolve(t);if(!s.length||(e._routePreloaded||(e._routePreloaded=new Set),e._routePreloaded.has(n)))return;const o=e._preloadPromises=e._preloadPromises||[];if(o.length>4)return Promise.all(o).then(()=>NL(t,e));e._routePreloaded.add(n);const r=s.map(i=>{var a;return(a=i.components)==null?void 0:a.default}).filter(i=>typeof i=="function");for(const i of r){const a=Promise.resolve(i()).catch(()=>{}).finally(()=>o.splice(o.indexOf(a)));o.push(a)}await Promise.all(o)}const w0e=(...t)=>t.find(e=>e!==void 0);function C0e(t){const e=t.componentName||"NuxtLink";function n(o,r){if(!o||t.trailingSlash!=="append"&&t.trailingSlash!=="remove")return o;if(typeof o=="string")return RI(o,t.trailingSlash);const i="path"in o&&o.path!==void 0?o.path:r(o).path;return{...o,name:void 0,path:RI(i,t.trailingSlash)}}function s(o){const r=Fn(),i=ri(),a=et(()=>!!o.target&&o.target!=="_self"),l=et(()=>{const m=o.to||o.href||"";return typeof m=="string"&&vr(m,{acceptRelative:!0})}),c=lw("RouterLink"),u=c&&typeof c!="string"?c.useLink:void 0,d=et(()=>{if(o.external)return!0;const m=o.to||o.href||"";return typeof m=="object"?!1:m===""||l.value}),h=et(()=>{const m=o.to||o.href||"";return d.value?m:n(m,r.resolve)}),f=d.value||u==null?void 0:u({...o,to:h}),p=et(()=>{var m;if(!h.value||l.value)return h.value;if(d.value){const v=typeof h.value=="object"&&"path"in h.value?Bv(h.value):h.value,g=typeof v=="object"?r.resolve(v).href:v;return n(g,r.resolve)}return typeof h.value=="object"?((m=r.resolve(h.value))==null?void 0:m.href)??null:n(up(i.app.baseURL,h.value),r.resolve)});return{to:h,hasTarget:a,isAbsoluteUrl:l,isExternal:d,href:p,isActive:(f==null?void 0:f.isActive)??et(()=>h.value===r.currentRoute.value.path),isExactActive:(f==null?void 0:f.isExactActive)??et(()=>h.value===r.currentRoute.value.path),route:(f==null?void 0:f.route)??et(()=>r.resolve(h.value)),async navigate(){await rB(p.value,{replace:o.replace,external:d.value||a.value})}}}return fn({name:e,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:s,setup(o,{slots:r}){const i=Fn(),{to:a,href:l,navigate:c,isExternal:u,hasTarget:d,isAbsoluteUrl:h}=s(o),f=Ot(!1),p=Ot(null),m=b=>{var x;p.value=o.custom?(x=b==null?void 0:b.$el)==null?void 0:x.nextElementSibling:b==null?void 0:b.$el};function v(b){var x,y;return!f.value&&(typeof o.prefetchOn=="string"?o.prefetchOn===b:((x=o.prefetchOn)==null?void 0:x[b])??((y=t.prefetchOn)==null?void 0:y[b]))&&(o.prefetch??t.prefetch)!==!1&&o.noPrefetch!==!0&&o.target!=="_blank"&&!S0e()}async function g(b=Ct()){if(f.value)return;f.value=!0;const x=typeof a.value=="string"?a.value:u.value?Bv(a.value):i.resolve(a.value).fullPath;await Promise.all([b.hooks.callHook("link:prefetch",x).catch(()=>{}),!u.value&&!d.value&&NL(a.value,i).catch(()=>{})])}if(v("visibility")){const b=Ct();let x,y=null;ur(()=>{const w=_0e();pp(()=>{x=Xv(()=>{var C;(C=p==null?void 0:p.value)!=null&&C.tagName&&(y=w.observe(p.value,async()=>{y==null||y(),y=null,await g(b)}))})})}),Iu(()=>{x&&$V(x),y==null||y(),y=null})}return()=>{var y;if(!u.value&&!d.value){const w={ref:m,to:a.value,activeClass:o.activeClass||t.activeClass,exactActiveClass:o.exactActiveClass||t.exactActiveClass,replace:o.replace,ariaCurrentValue:o.ariaCurrentValue,custom:o.custom};return o.custom||(v("interaction")&&(w.onPointerenter=g.bind(null,void 0),w.onFocus=g.bind(null,void 0)),f.value&&(w.class=o.prefetchedClass||t.prefetchedClass),w.rel=o.rel||void 0),Gt(lw("RouterLink"),w,r.default)}const b=o.target||null,x=w0e(o.noRel?"":o.rel,t.externalRelAttribute,h.value||d.value?"noopener noreferrer":"")||null;return o.custom?r.default?r.default({href:l.value,navigate:c,prefetch:g,get route(){if(!l.value)return;const w=new URL(l.value,window.location.href);return{path:w.pathname,fullPath:w.pathname,get query(){return ck(w.search)},hash:w.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:l.value}},rel:x,target:b,isExternal:u.value||d.value,isActive:!1,isExactActive:!1}):null:Gt("a",{ref:p,href:l.value||null,rel:x,target:b},(y=r.default)==null?void 0:y.call(r))}}})}const AL=C0e(w3);function RI(t,e){const n=e==="append"?sf:cp;return vr(t)&&!t.startsWith("http")?t:n(t,!0)}function _0e(){const t=Ct();if(t._observer)return t._observer;let e=null;const n=new Map,s=(r,i)=>(e||(e=new IntersectionObserver(a=>{for(const l of a){const c=n.get(l.target);(l.isIntersecting||l.intersectionRatio>0)&&c&&c()}})),n.set(r,i),e.observe(r),()=>{n.delete(r),e.unobserve(r),n.size===0&&(e.disconnect(),e=null)});return t._observer={observe:s}}function S0e(){const t=navigator.connection;return!!(t&&(t.saveData||/2g/.test(t.effectiveType)))}const I0e="shevchenko",E0e="3.1.1",k0e="JavaScript library for declension of Ukrainian anthroponyms",$0e="./dist/umd/shevchenko.min.js",T0e="./dist/cjs/shevchenko.js",N0e="./dist/es/shevchenko.js",A0e="./dist/es/shevchenko.d.ts",R0e={prebuild:"rm -rf ./dist",build:"rollup -c --bundleConfigAsCjs",lint:"eslint --fix ./src",test:"jest",predocs:"rm -rf ./docs",docs:"typedoc && cp -a ./site/.output/public/. ./docs",preversion:"npm run lint && npm run test",prepublishOnly:"npm run build"},D0e=["ukrainian-language","ukrainian","anthroponym-declension","personal-name-declension","given-name-declension","first-name-declension","patronymic-name-declension","patronymic-declension","family-name-declension","surname-declension","word-declension","declension","word-inflection","linguistics","natural-language-processing","nlp"],O0e={type:"git",url:"git+https://github.com/tooleks/shevchenko-js.git"},L0e="Oleksandr Tolochko <shevchenko-js@tooleks.com>",F0e=["Anna Tolochko","Tetyana Tolochko"],P0e="MIT",M0e={url:"https://github.com/tooleks/shevchenko-js/issues"},B0e="https://tooleks.github.io/shevchenko-js",V0e={"@tensorflow/tfjs":"^4.1.0"},U0e={"@janniks/typedoc-theme-stacks":"^1.2.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@rollup/plugin-typescript":"^12.1.1","@tensorflow/tfjs-node":"^4.2.0","@types/jest":"^29.4.0","@types/lodash":"^4.14.191","@typescript-eslint/eslint-plugin":"^5.48.2","@typescript-eslint/parser":"^5.48.2",axios:"^1.6.0",csv:"^6.2.7",eslint:"^8.32.0","eslint-config-prettier":"^8.6.0","eslint-plugin-import":"^2.27.5","eslint-plugin-prettier":"^4.2.1",jest:"^29.3.1",lodash:"^4.17.21",prettier:"2.8.3",rimraf:"^3.0.2",rollup:"^4.24.3","ts-jest":"^29.0.5","ts-node":"^10.9.1",typedoc:"^0.23.26",typescript:"^4.1.2"},uv={name:I0e,version:E0e,description:k0e,browser:$0e,main:T0e,module:N0e,types:A0e,scripts:R0e,keywords:D0e,repository:O0e,author:L0e,contributors:F0e,license:P0e,bugs:M0e,homepage:B0e,dependencies:V0e,devDependencies:U0e},j0e={library:{displayName:`${uv.name}.js`,name:uv.name,version:uv.version,apiSpecPath:"/api-spec",npmUrl:"https://www.npmjs.com/package/shevchenko",gitHubUrl:"https://github.com/tooleks/shevchenko-js",dockerHubUrl:"https://hub.docker.com/r/tooleks/shevchenko",issuesUrl:"https://github.com/tooleks/shevchenko-js/issues",licenseUrl:"https://github.com/tooleks/shevchenko-js/blob/master/LICENSE",cdnUrl:"https://unpkg.com/shevchenko"},militaryExtension:{name:"shevchenko-ext-military",gitHubUrl:"https://github.com/tooleks/shevchenko-ext-military"},content:{gitHubUrl:"https://api.github.com/repos/tooleks/shevchenko-js",howItWorksUrl:"https://raw.githubusercontent.com/wiki/tooleks/shevchenko-js/Принцип-роботи.md"}},z0e=j0e,W0e={nuxt:{}},G0e=J3(z0e,W0e);function rg(){const t=Ct();return t._appConfig||(t._appConfig=Go(G0e)),t._appConfig}const H0e=t=>t==="defer"||t===!1;function K0e(...t){var m;const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);let[n,s,o={}]=t;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const r=Ct(),i=s,a=()=>Ja.value,l=()=>r.isHydrating?r.payload.data[n]:r.static.data[n];o.server=o.server??!0,o.default=o.default??a,o.getCachedData=o.getCachedData??l,o.lazy=o.lazy??!1,o.immediate=o.immediate??!0,o.deep=o.deep??Ja.deep,o.dedupe=o.dedupe??"cancel";const c=o.getCachedData(n,r),u=c!=null;if(!r._asyncData[n]||!o.immediate){(m=r.payload._errors)[n]??(m[n]=Ja.errorValue);const v=o.deep?Ot:cr;r._asyncData[n]={data:v(u?c:o.default()),pending:Ot(!u),error:cE(r.payload._errors,n),status:Ot("idle"),_default:o.default}}const d={...r._asyncData[n]};delete d._default,d.refresh=d.execute=(v={})=>{if(r._asyncDataPromises[n]){if(H0e(v.dedupe??o.dedupe))return r._asyncDataPromises[n];r._asyncDataPromises[n].cancelled=!0}if(v._initial||r.isHydrating&&v._initial!==!1){const b=v._initial?c:o.getCachedData(n,r);if(b!=null)return Promise.resolve(b)}d.pending.value=!0,d.status.value="pending";const g=new Promise((b,x)=>{try{b(i(r))}catch(y){x(y)}}).then(async b=>{if(g.cancelled)return r._asyncDataPromises[n];let x=b;o.transform&&(x=await o.transform(b)),o.pick&&(x=X0e(x,o.pick)),r.payload.data[n]=x,d.data.value=x,d.error.value=Ja.errorValue,d.status.value="success"}).catch(b=>{if(g.cancelled)return r._asyncDataPromises[n];d.error.value=ku(b),d.data.value=je(o.default()),d.status.value="error"}).finally(()=>{g.cancelled||(d.pending.value=!1,delete r._asyncDataPromises[n])});return r._asyncDataPromises[n]=g,r._asyncDataPromises[n]},d.clear=()=>q0e(r,n);const h=()=>d.refresh({_initial:!0}),f=o.server!==!1&&r.payload.serverRendered;{const v=ys();if(v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const x=v._nuxtOnBeforeMountCbs;IE(()=>{x.forEach(y=>{y()}),x.splice(0,x.length)}),ip(()=>x.splice(0,x.length))}f&&r.isHydrating&&(d.error.value||c!=null)?(d.pending.value=!1,d.status.value=d.error.value?"error":"success"):v&&(r.payload.serverRendered&&r.isHydrating||o.lazy)&&o.immediate?v._nuxtOnBeforeMountCbs.push(h):o.immediate&&h();const g=tp();if(o.watch){const x=ls(o.watch,()=>d.refresh());g&&fv(x)}const b=r.hook("app:data:refresh",async x=>{(!x||x.includes(n))&&await d.refresh()});g&&fv(b)}const p=Promise.resolve(r._asyncDataPromises[n]).then(()=>d);return Object.assign(p,d),p}function q0e(t,e){e in t.payload.data&&(t.payload.data[e]=void 0),e in t.payload._errors&&(t.payload._errors[e]=Ja.errorValue),t._asyncData[e]&&(t._asyncData[e].data.value=void 0,t._asyncData[e].error.value=Ja.errorValue,t._asyncData[e].pending.value=!1,t._asyncData[e].status.value="idle"),e in t._asyncDataPromises&&(t._asyncDataPromises[e]&&(t._asyncDataPromises[e].cancelled=!0),t._asyncDataPromises[e]=void 0)}function X0e(t,e){const n={};for(const s of e)n[s]=t[s];return n}function Q0e(t,e,n){const[s={},o]=typeof e=="string"?[{},e]:[e,n],r=et(()=>Ri(t)),i=s.key||X3([o,typeof r.value=="string"?r.value:"",...J0e(s)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const a=i===o?"$f"+i:i;if(!s.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:u,transform:d,pick:h,watch:f,immediate:p,getCachedData:m,deep:v,dedupe:g,...b}=s,x=Go({..._3,...b,cache:typeof s.cache=="boolean"?void 0:s.cache}),y={server:l,lazy:c,default:u,transform:d,pick:h,immediate:p,getCachedData:m,deep:v,dedupe:g,watch:f===!1?[]:[x,r,...f||[]]};let w;return K0e(a,()=>{var E;(E=w==null?void 0:w.abort)==null||E.call(w,"Request aborted as another request to the same endpoint was initiated."),w=typeof AbortController<"u"?new AbortController:{};const _=Ri(s.timeout);let S;return _&&(S=setTimeout(()=>w.abort("Request aborted due to timeout."),_),w.signal.onabort=()=>clearTimeout(S)),(s.$fetch||globalThis.$fetch)(r.value,{signal:w.signal,...x}).finally(()=>{clearTimeout(S)})},y)}function Y0e(t,e,n){const[s={},o]=[{},e];return Q0e(t,{...s,lazy:!0},o)}function J0e(t){var n;const e=[((n=Ri(t.method))==null?void 0:n.toUpperCase())||"GET",Ri(t.baseURL)];for(const s of[t.params||t.query]){const o=Ri(s);if(!o)continue;const r={};for(const[i,a]of Object.entries(o))r[Ri(i)]=Ri(a);e.push(r)}return e}const Z0e={key:0,class:"badge bg-secondary"},exe=fn({__name:"github-issue-count",async setup(t){let e,n;const s=rg(),{data:o,status:r}=([e,n]=HF(()=>Y0e(s.content.gitHubUrl,"$zXgY1EVtZn")),e=await e,n(),e),i=et(()=>o.value==null?0:o.value.open_issues_count),a=et(()=>r.value==="pending");return(l,c)=>a.value?kP("",!0):(Ft(),so("span",Z0e,He(i.value),1))}}),txe=["data-bs-target"],J1=fn({__name:"modal-button",props:{modalId:{type:String,required:!0}},setup(t){return(e,n)=>(Ft(),so("a",{href:"#","data-bs-toggle":"modal","data-bs-target":`#${t.modalId}`},[WF(e.$slots,"default")],8,txe))}}),nxe="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAEwATADAREAAhEBAxEB/8QAHAABAAEFAQEAAAAAAAAAAAAAAAQCAwUGBwgB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB6MCoFgFALgPgKAWQY8E4FsF8F8FIPgPgKAVg+gkgqBYBQC4D4CgFkGPBOBbBfBfBSD4D4CgFYPoJILgIoALIKQYsHlsFQN3BrYOiA+A7ICkFQLAPoLgJgLgIoALIKQYsHlsFQN3BrYOiA+A7ICkFQLAPoLgJYLoLILYIIORg1EGvgx4N1BrALIM4CUD00CgAFgF8EgF0FkFsEEHIwaiDXwY8G6g1gFkGcBKB6aBQACwC+C4CQC2D6DgYOag24GPBcBqwNwBWDVQXgetQXAfQUgvAtAkAtg+g4GDmoNuBjwXAasDcAVg1UF4HrUFwH0FILwI4JgLILgPIYMQDaAAYIGNBHBUCYDOA9bAjgpBeBIBDBMBZBcB5DBiAbQADBAxoI4KgTAZwHrYEcFILwJAIwJgPgAPKIMKDKAxYNbBsQMmDVAbYD4D1oCOD6C+CaDFAmA+AA8ogwoMoDFg1sGxAyYNUBtgPgPWgI4PoL4JoIYJwI4JAPI4NXBFBbBmAYEEkH0GSBMB7ABQD6CsEgEQE4EcEgHkcGrgigtgzAMCCSD6DJAmA9gAoB9BWCQCMC8CyDSwckBycGXBiwZ4FIIYKQXwbuD00CyCoEoFwEMF4FkGlg5IDk4MuDFgzwKQQwUgvg3cHpoFkFQJQLgIgJgLYPPYOSAjg9pAqBHBMBZBzEHEgZkHrQFIKgVgughAmAtg89g5ICOD2kCoEcEwFkHMQcSBmQetAUgqBWC6C0CsAGsg8kg9ZAyAMgCGCQDBAwQOBguA9iApABeBcBABWADWQeSQesgZAGQBDBIBggYIHAwXAexAUgAvAuAx4LwAMMDyGD12DzIDCA9Ng8wA2YHdQcgBDB6oBWCMCoF4EMF4AGGB5DB67B5kBhAemweYAbMDuoOQAhg9UArBGBUC8CICSCkFAPoNfBkgYAG1g5qDOAvg0cHVAZMFkF4H0EkGKBJBSCgH0GvgyQMADawc1BnAXwaODqgMmCyC8D6CSDGguAkgjAAwALgNTBs4MCDZAcNBtQONgzYPV4KQXAXAQQXASQRgAYAFwGpg2cGBBsgOGg2oHGwZsHq8FILgLgMWCQCsFALQIYNCBBBw4HpAGABiQawDXgSgVA9YAuAuAxoJAKwUAtAhg0IEEHDgekAYAGJBrANeBKBUD1gC4C4DFgmAuAjgpB5CB3EHCwY4GRB34Gog4sDOArBAB1UHewSwYcEwFwEcFIPIQO4g4WDHAyIO/A1EHFgZwFYIAOqg72CWDDgkguA5eDh4IQOkg1gHTwcwBuwOKAy4NmBzkGeBlgbQD0UCKCSC4Dl4OHghA6SDWAdPBzAG7A4oDLg2YHOQZ4GWBtAPRQIYJQOBg0UGLBrQJ4NpBpAJwLAMwC0CkGOBNBvYM4DGA9GAlA4GDRQYsGtAng2kGkAnAsAzALQKQY4E0G9gzgMYDtQOKAxANZBYBPBHBhAAVgug6YDBA1gGQBjATwbWCgHfwcUBiAayCwCeCODCAArBdB0wGCBrAMgDGAng2sFANnByQFgGKB1AGCBr4MqCICcDaQaQCcCGCKCcC6DZwUg2oHJAWAYoHUAYIGvgyoIgJwNpBpAJwIYIoJwLoNnBSD//EABQQAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQEAAQUCNJ//xAAUEQEAAAAAAAAAAAAAAAAAAACg/9oACAEDAQE/ATSf/8QAFBEBAAAAAAAAAAAAAAAAAAAAoP/aAAgBAgEBPwE0n//EABQQAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQEABj8CNJ//xAAUEAEAAAAAAAAAAAAAAAAAAACg/9oACAEBAAE/ITSf/9oADAMBAAIAAwAAABCQCSSSSQACSSQCSQCQCSQCSSSSQACSSQCSQCQCSSQACQAACSSSQACQCSSSSQACQAACSSSQACQCSSSSQACSQAACSQACQCSSSSSQACSQAACSQACQCSSSSSSSSQCSSSSQCQCSSQCSSSSSQCSSSSQCQCSSQCSSQAACSSQCSQAACSQCSSSQAACSSQCSQAACSQCSSSQACQAAACSSSSSSSSSSSQACQAAACSSSSSSSSSSQAAAACSSQCSQAACSSSSQAAAACSSQCSQAACSSSQCQACSQACQACSQCQCQAACQACSQACQACSQCQCQACSSSSSQCSSQCSSSQCSSSSSSSSQCSSQCSSSQCSSSQACQCSSSSSQAAACSQACQACQCSSSSSQAAACSQAACSSSQCSSSQCSSSSQCQACSSSQCSSSQCSSSSQCQCSQCSSQCQCSSSSQCQCSSSQCSSQCQCSSSSQCQCSQACQACSSQCSQCSSQCSSQACQACSSQCSQCSSQCSSSSSSSSQCSSSQCQCQAAACSSSSSQCSSSQCQCQAAAAAAACSSSSSQCSSQCSSQAAAACSSSSSQCSSQCSSQACSSSQCSSSQCQCQCQACQCSSSQCSSSQCQCQCQACSQACSSQCSQCSQCSSSSSSQACSSQCSQCSQCSSSSSQCSQCQACSQCSQCSSSQCQCSQCQACSQCSQCSSSQCQCSSSQACSQCSQACQCQCQCSSSQACSQCSQACQCQCT//EABQRAQAAAAAAAAAAAAAAAAAAAKD/2gAIAQMBAT8QNJ//xAAUEQEAAAAAAAAAAAAAAAAAAACg/9oACAECAQE/EDSf/8QAFBABAAAAAAAAAAAAAAAAAAAAoP/aAAgBAQABPxA0n//Z",sxe=/^[a-z]{2}$/i,oxe=127397;function rxe(t){if(!sxe.test(t)){const n=typeof t;throw new TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${n==="string"?t:n}' instead.`)}const e=[...t.toUpperCase()].map(n=>n.codePointAt()+oxe);return String.fromCodePoint(...e)}function ixe(t,e=""){return e+t}function axe(){const t=ri(),e=Gl(),n=et(()=>s(e.fullPath));function s(o){return ixe(o,t.public.siteUrl)}return{getAbsoluteUrl:s,absoluteUrl:n}}const lxe={class:"navbar navbar-expand-xl navbar-light bg-light"},cxe={class:"container-fluid"},uxe=["alt"],dxe={id:"navbar-supported-content",class:"collapse navbar-collapse"},hxe={class:"navbar-nav mt-2 mt-lg-0 ms-auto",role:"menubar"},fxe={class:"nav-item",role:"presentation"},pxe={class:"badge bg-military"},mxe={class:"nav-item",role:"presentation"},gxe={class:"nav-item",role:"presentation"},vxe={class:"nav-item",role:"presentation"},bxe=["href"],yxe={class:"nav-item dropdown",role:"presentation"},xxe={id:"navbar-dropdown-links",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false"},wxe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-links",role:"menu"},Cxe=["href"],_xe=["href"],Sxe=["href"],Ixe=["href"],Exe={class:"badge bg-primary"},kxe={class:"nav-item dropdown",role:"presentation"},$xe={id:"navbar-dropdown-feedback",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false"},Txe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-feedback",role:"menu"},Nxe=["href"],Axe={class:"nav-item dropdown",role:"presentation"},Rxe=["title"],Dxe={class:"dropdown-menu","aria-labelledby":"navbar-dropdown-locale",role:"menu"},Oxe=["href"],Lxe=fn({__name:"top-nav-bar",setup(t){const e=rg(),n=Gl(),s=Hl(),{getAbsoluteUrl:o}=axe();function r(a){return rxe(a.split("-")[1])}function i(a){let l=n.fullPath;for(const c of s.availableLocales){const u=new RegExp(`^/${c}`,"i");u.test(l)&&(l=l.replace(u,""))}return a!==Vy&&(l=`/${a}${l}`),o(l)}return(a,l)=>{const c=AL,u=exe,d=J1;return Ft(),so("nav",lxe,[_e("div",cxe,[Ze(c,{class:"navbar-brand",to:{name:"index"}},{default:ns(()=>[_e("img",{class:"navbar-logo",src:nxe,alt:je(e).library.displayName},null,8,uxe),_e("span",null,He(je(e).library.displayName),1)]),_:1}),l[4]||(l[4]=_e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbar-supported-content","aria-controls":"navbar-supported-content","aria-expanded":"false","aria-label":"Toggle navigation"},[_e("span",{class:"navbar-toggler-icon"})],-1)),_e("div",dxe,[_e("ul",hxe,[_e("li",fxe,[Ze(c,{class:"nav-link",to:{name:"military"},"exact-active-class":"active",role:"menuitem"},{default:ns(()=>[mn(He(a.$t("forMilitary"))+" ",1),_e("span",pxe,He(a.$t("new")),1)]),_:1})]),_e("li",mxe,[Ze(c,{class:"nav-link",to:{name:"index",hash:"#demo"},role:"menuitem"},{default:ns(()=>[mn(He(a.$t("liveDemo")),1)]),_:1})]),_e("li",gxe,[Ze(c,{class:"nav-link",to:{name:"index",hash:"#documentation"},role:"menuitem"},{default:ns(()=>[mn(He(a.$t("documentation")),1)]),_:1})]),_e("li",vxe,[_e("a",{class:"nav-link",href:je(e).library.licenseUrl,target:"_blank",role:"menuitem"},He(a.$t("library.license")),9,bxe)]),_e("li",yxe,[_e("a",xxe,He(a.$t("library.links")),1),_e("div",wxe,[_e("a",{class:"dropdown-item",href:je(o)(je(e).library.apiSpecPath),target:"_blank",role:"menuitem"},He(a.$t("documentation.apiSpec")),9,Cxe),_e("a",{class:"dropdown-item",href:je(e).library.gitHubUrl,target:"_blank",role:"menuitem"},l[0]||(l[0]=[_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-github"},null,-1),mn(" GitHub ")]),8,_xe),_e("a",{class:"dropdown-item",href:je(e).library.npmUrl,target:"_blank",role:"menuitem"},l[1]||(l[1]=[_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-npm"},null,-1),mn(" NPM ")]),8,Sxe),_e("a",{class:"dropdown-item",href:je(e).library.dockerHubUrl,target:"_blank",role:"menuitem"},[l[2]||(l[2]=_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-docker"},null,-1)),l[3]||(l[3]=mn(" Docker Hub ")),_e("span",Exe,He(a.$t("new")),1)],8,Ixe)])]),_e("li",kxe,[_e("a",$xe,He(a.$t("feedback")),1),_e("div",Txe,[_e("a",{class:"dropdown-item",href:je(e).library.issuesUrl,target:"_blank",role:"menuitem"},[mn(He(a.$t("library.issueReport"))+" ",1),Ze(u)],8,Nxe),Ze(d,{class:"dropdown-item",role:"menuitem","modal-id":"contact-us-modal"},{default:ns(()=>[mn(He(a.$t("contactUs")),1)]),_:1}),Ze(d,{class:"dropdown-item",role:"menuitem","modal-id":"about-modal"},{default:ns(()=>[mn(He(a.$t("aboutUs")),1)]),_:1})])]),_e("li",Axe,[_e("a",{id:"navbar-dropdown-locale",class:"nav-link dropdown-toggle",href:"#","data-bs-toggle":"dropdown",role:"menuitem","aria-haspopup":"true","aria-expanded":"false",title:a.$t("website.language")},He(r(a.$i18n.locale))+" "+He(a.$i18n.locale),9,Rxe),_e("div",Dxe,[(Ft(!0),so(Xt,null,zF(a.$i18n.availableLocales,h=>(Ft(),so("a",{key:h,class:"dropdown-item",href:i(h),role:"menuitem"},He(r(h))+" "+He(a.$t(`website.locale.${h}`))+" ("+He(h)+") ",9,Oxe))),128))])])])])])])}}}),Fxe=og(Lxe,[["__scopeId","data-v-41685352"]]),Pxe={};function Mxe(t,e){const n=x0e,s=Fxe;return Ft(),so(Xt,null,[Ze(n),Ze(s)],64)}const Bxe=og(Pxe,[["render",Mxe]]);function xu(t){return tp()?(fv(t),!0):!1}function va(t){return typeof t=="function"?t():je(t)}const wu=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Vxe=Object.prototype.toString,Uxe=t=>Vxe.call(t)==="[object Object]",jxe=()=>{};function zxe(t){let e;function n(){return e||(e=t()),e}return n.reset=async()=>{const s=e;e=void 0,s&&await s},n}function Wxe(t,e=1e3,n={}){const{immediate:s=!0,immediateCallback:o=!1}=n;let r=null;const i=Ot(!1);function a(){r&&(clearInterval(r),r=null)}function l(){i.value=!1,a()}function c(){const u=va(e);u<=0||(i.value=!0,o&&t(),a(),i.value&&(r=setInterval(t,u)))}if(s&&wu&&c(),Ht(e)||typeof e=="function"){const u=ls(e,()=>{i.value&&wu&&c()});xu(u)}return xu(l),{isActive:i,pause:l,resume:c}}function Gxe(t,e,n={}){const{immediate:s=!0}=n,o=Ot(!1);let r=null;function i(){r&&(clearTimeout(r),r=null)}function a(){o.value=!1,i()}function l(...c){i(),o.value=!0,r=setTimeout(()=>{o.value=!1,r=null,t(...c)},va(e))}return s&&(o.value=!0,wu&&l()),xu(a),{isPending:sp(o),start:l,stop:a}}function gwe(t=!1,e={}){const{truthyValue:n=!0,falsyValue:s=!1}=e,o=Ht(t),r=Ot(t);function i(a){if(arguments.length)return r.value=a,r.value;{const l=va(n);return r.value=r.value===l?va(s):l,r.value}}return o?i:[r,i]}const RL=wu?window:void 0,DL=wu?window.navigator:void 0;function Hxe(t){var e;const n=va(t);return(e=n==null?void 0:n.$el)!=null?e:n}function OL(...t){let e,n,s,o;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,s,o]=t,e=RL):[e,n,s,o]=t,!e)return jxe;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const r=[],i=()=>{r.forEach(u=>u()),r.length=0},a=(u,d,h,f)=>(u.addEventListener(d,h,f),()=>u.removeEventListener(d,h,f)),l=ls(()=>[Hxe(e),va(o)],([u,d])=>{if(i(),!u)return;const h=Uxe(d)?{...d}:d;r.push(...n.flatMap(f=>s.map(p=>a(u,f,p,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),i()};return xu(c),c}function Kxe(){const t=Ot(!1),e=ys();return e&&ur(()=>{t.value=!0},e),t}function LL(t){const e=Kxe();return et(()=>(e.value,!!t()))}function qxe(t,e={}){const{immediate:n=!0,fpsLimit:s=void 0,window:o=RL}=e,r=Ot(!1),i=s?1e3/s:null;let a=0,l=null;function c(h){if(!r.value||!o)return;a||(a=h);const f=h-a;if(i&&f<i){l=o.requestAnimationFrame(c);return}a=h,t({delta:f,timestamp:h}),l=o.requestAnimationFrame(c)}function u(){!r.value&&o&&(r.value=!0,a=0,l=o.requestAnimationFrame(c))}function d(){r.value=!1,l!=null&&o&&(o.cancelAnimationFrame(l),l=null)}return n&&u(),xu(d),{isActive:sp(r),pause:d,resume:u}}function DI(t,e={}){const{controls:n=!1,navigator:s=DL}=e,o=LL(()=>s&&"permissions"in s),r=cr(),i=typeof t=="string"?{name:t}:t,a=cr(),l=()=>{var u,d;a.value=(d=(u=r.value)==null?void 0:u.state)!=null?d:"prompt"};OL(r,"change",l);const c=zxe(async()=>{if(o.value){if(!r.value)try{r.value=await s.permissions.query(i)}catch{r.value=void 0}finally{l()}if(n)return rt(r.value)}});return c(),n?{state:a,isSupported:o,query:c}:a}function vwe(t={}){const{navigator:e=DL,read:n=!1,source:s,copiedDuring:o=1500,legacy:r=!1}=t,i=LL(()=>e&&"clipboard"in e),a=DI("clipboard-read"),l=DI("clipboard-write"),c=et(()=>i.value||r),u=Ot(""),d=Ot(!1),h=Gxe(()=>d.value=!1,o);function f(){i.value&&g(a.value)?e.clipboard.readText().then(b=>{u.value=b}):u.value=v()}c.value&&n&&OL(["copy","cut"],f);async function p(b=va(s)){c.value&&b!=null&&(i.value&&g(l.value)?await e.clipboard.writeText(b):m(b),u.value=b,d.value=!0,h.start())}function m(b){const x=document.createElement("textarea");x.value=b??"",x.style.position="absolute",x.style.opacity="0",document.body.appendChild(x),x.select(),document.execCommand("copy"),x.remove()}function v(){var b,x,y;return(y=(x=(b=document==null?void 0:document.getSelection)==null?void 0:b.call(document))==null?void 0:x.toString())!=null?y:""}function g(b){return b==="granted"||b==="prompt"}return{isSupported:c,text:u,copied:d,copy:p}}function Xxe(t={}){const{controls:e=!1,interval:n="requestAnimationFrame"}=t,s=Ot(new Date),o=()=>s.value=new Date,r=n==="requestAnimationFrame"?qxe(o,{immediate:!0}):Wxe(o,n,{immediate:!0});return e?{now:s,...r}:s}const Qxe={id:"footer"},Yxe={class:"row mb-1"},Jxe={class:"col-12"},Zxe={class:"list-unstyled mb-0",role:"menubar"},e1e={class:"d-block mb-1 d-md-inline me-md-3 mb-md-0",role:"presentation"},t1e={class:"text-muted"},n1e={class:"d-inline align-middle me-2",role:"presentation"},s1e=["href"],o1e={class:"d-inline align-middle me-2",role:"presentation"},r1e=["href"],i1e={class:"d-inline align-middle me-2",role:"presentation"},a1e=["href"],l1e={class:"badge bg-primary"},c1e={class:"d-inline me-2",role:"presentation"},u1e={class:"d-inline",role:"presentation"},d1e={class:"row mb-3"},h1e={class:"col-12"},f1e=fn({__name:"page-footer",setup(t){const e=rg(),n=ri(),s=Xxe({interval:6e4}),o=et(()=>s.value.getFullYear()),r=et(()=>new URL(n.public.siteUrl).hostname);return(i,a)=>{const l=J1;return Ft(),so("section",Qxe,[_e("div",Yxe,[_e("div",Jxe,[_e("ul",Zxe,[_e("li",e1e,[_e("span",t1e,He(`${je(e).library.displayName} v${je(e).library.version}`),1)]),_e("li",n1e,[_e("a",{href:je(e).library.gitHubUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},a[0]||(a[0]=[_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-github"},null,-1),mn(" GitHub ")]),8,s1e)]),_e("li",o1e,[_e("a",{href:je(e).library.npmUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},a[1]||(a[1]=[_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-npm"},null,-1),mn(" NPM ")]),8,r1e)]),_e("li",i1e,[_e("a",{href:je(e).library.dockerHubUrl,class:"text-decoration-none",target:"_blank",role:"menuitem"},[a[2]||(a[2]=_e("span",{"aria-hidden":"true",class:"logo-icon logo-icon-docker"},null,-1)),a[3]||(a[3]=mn(" Docker Hub ")),_e("span",l1e,He(i.$t("new")),1)],8,a1e)]),_e("li",c1e,[Ze(l,{class:"btn btn-link text-decoration-none p-0",role:"menuitem","modal-id":"contact-us-modal"},{default:ns(()=>[mn(He(i.$t("contactUs")),1)]),_:1})]),_e("li",u1e,[Ze(l,{class:"btn btn-link text-decoration-none p-0",role:"menuitem","modal-id":"about-modal"},{default:ns(()=>[mn(He(i.$t("aboutUs")),1)]),_:1})])])])]),_e("div",d1e,[_e("div",h1e,"© 2017-"+He(o.value)+" "+He(r.value),1)])])}}}),p1e=og(f1e,[["__scopeId","data-v-a04c74a9"]]),dv=new WeakMap;function m1e(t){if(dv.has(t))return dv.get(t);const e={...t};return e.render?e.render=(n,s,o,r,i,a)=>{var l;if(r.mounted$??n.mounted$){const c=(l=t.render)==null?void 0:l.bind(n)(n,s,o,r,i,a);return c.children===null||typeof c.children=="string"?co(c):Gt(c)}else{const c=$g(n._.vnode.el??null)??["<div></div>"];return gg(c.join(""),c.length)}}:e.template&&(e.template=`
      <template v-if="mounted$">${t.template}</template>
      <template v-else><div></div></template>
    `),e.setup=(n,s)=>{var l;const o=Ct(),r=Ot(o.isHydrating===!1),i=ys();if(o.isHydrating){const c={...i.attrs},u=g1e(i);for(const d in c)delete i.attrs[d];ur(()=>{Object.assign(i.attrs,c),i.vnode.dirs=u})}ur(()=>{r.value=!0});const a=((l=t.setup)==null?void 0:l.call(t,n,s))||{};return Yf(a)?Promise.resolve(a).then(c=>typeof c!="function"?(c=c||{},c.mounted$=r,c):(...u)=>{if(r.value||!o.isHydrating){const d=c(...u);return d.children===null||typeof d.children=="string"?co(d):Gt(d)}else{const d=$g((i==null?void 0:i.vnode.el)??null)??["<div></div>"];return gg(d.join(""),d.length)}}):typeof a=="function"?(...c)=>{if(r.value)return Gt(a(...c),s.attrs);const u=$g((i==null?void 0:i.vnode.el)??null)??["<div></div>"];return gg(u.join(""),u.length)}:Object.assign(a,{mounted$:r})},dv.set(t,e),e}function g1e(t){if(!t||!t.vnode.dirs)return null;const e=t.vnode.dirs;return t.vnode.dirs=null,e}function OI(t){return new Promise(e=>{const n=document.querySelector(t);if(n)return e(n);const s=new MutationObserver(()=>{const o=document.querySelector(t);o&&(s.disconnect(),e(o))});s.observe(document.body,{childList:!0,subtree:!0})})}const v1e={id:"about-modal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"about-label","aria-hidden":"true"},b1e={class:"modal-dialog",role:"document"},y1e={class:"modal-content"},x1e={class:"modal-header"},w1e={id:"about-label",class:"modal-title h5"},C1e=["aria-label"],_1e={class:"modal-body"},S1e={class:"alert alert-info",role:"alert"},I1e={class:"list-group"},E1e={class:"list-group-item list-group-item-light flex-column align-items-start"},k1e={class:"h5 mb-1"},$1e={class:"mb-1"},T1e={class:"list-group-item flex-column align-items-start"},N1e={class:"d-flex w-100 justify-content-between"},A1e={class:"h5 mb-1"},R1e={class:"mb-1"},D1e={class:"list-group-item flex-column align-items-start"},O1e={class:"h5 mb-1"},L1e={class:"mb-1"},F1e=fn({__name:"about-modal.client",setup(t){const e=Gl(),n=et(()=>e.hash==="#about");function s(){n.value&&o()}async function o(){const i=await OI("#about-modal");new Xr(i).show()}async function r(){const i=await OI("#about-modal");new Xr(i).hide()}return ur(()=>s()),ls(n,()=>s()),(i,a)=>{const l=J1;return Ft(),so("div",v1e,[_e("div",b1e,[_e("div",y1e,[_e("div",x1e,[_e("h2",w1e,He(i.$t("aboutUs")),1),_e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":i.$t("action.close")},null,8,C1e)]),_e("div",_1e,[_e("div",S1e,He(i.$t("aboutUs.tribute")),1),_e("div",I1e,[_e("span",E1e,[_e("p",k1e,He(i.$t("aboutUs.author1")),1),_e("p",$1e,He(i.$t("aboutUs.author1.responsibility")),1)]),_e("span",T1e,[_e("div",N1e,[_e("p",A1e,He(i.$t("aboutUs.author2")),1),Ze(l,{"modal-id":"contact-us-modal","aria-label":i.$t("action.write"),title:i.$t("action.write"),onClick:a[0]||(a[0]=c=>r())},{default:ns(()=>a[1]||(a[1]=[_e("i",{"aria-hidden":"true",class:"fa fa-envelope"},null,-1)])),_:1},8,["aria-label","title"])]),_e("p",R1e,He(i.$t("aboutUs.author2.responsibility")),1)]),_e("span",D1e,[_e("p",O1e,He(i.$t("aboutUs.author3")),1),_e("p",L1e,He(i.$t("aboutUs.author3.responsibility")),1)])])])])])])}}}),P1e={id:"contact-us-modal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"contact-me-label","aria-hidden":"true"},M1e={class:"modal-dialog",role:"document"},B1e={class:"modal-content"},V1e={class:"modal-header"},U1e={id:"contact-me-label",class:"modal-title h5"},j1e=["aria-label"],z1e={class:"modal-body"},W1e={class:"input-group mb-3"},G1e=["value","aria-label"],H1e={class:"modal-footer"},K1e={type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},q1e=["href"],X1e=fn({__name:"contact-us-modal",setup(t){const e=ri(),n=rg(),{t:s}=Hl(),o=et(()=>{const r=new URL(`mailto:${e.public.siteEmail}`);return r.searchParams.set("subject",s("contactUs.messageSubject",{appName:n.library.displayName})),r.toString()});return(r,i)=>(Ft(),so("div",P1e,[_e("div",M1e,[_e("div",B1e,[_e("div",V1e,[_e("h2",U1e,He(je(s)("contactUs")),1),_e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":je(s)("action.close")},null,8,j1e)]),_e("div",z1e,[_e("p",null,He(je(s)("contactUs.message")),1),_e("div",W1e,[_e("input",{value:je(e).public.siteEmail,readonly:"",type:"email",class:"form-control","aria-label":je(s)("contactUs.recipientEmail")},null,8,G1e)])]),_e("div",H1e,[_e("button",K1e,He(je(s)("action.close")),1),_e("a",{target:"_blank",href:o.value,class:"btn btn-primary"},[i[0]||(i[0]=_e("i",{"aria-hidden":"true",class:"fa fa-paper-plane"},null,-1)),mn(" "+He(je(s)("action.write")),1)],8,q1e)])])])]))}}),Q1e=m1e(F1e),Y1e={class:"px-3 px-lg-4 py-4 my-3 bg-light rounded-3"},J1e={class:"text-truncate"},Z1e=fn({__name:"error",setup(t){const{t:e}=Hl(),n=et(()=>e("error.404.title"));return t4({title:n}),(s,o)=>{const r=Bxe,i=AL,a=p1e,l=Q1e,c=X1e,u=j$;return Ft(),$o(u,null,{default:ns(()=>[Ze(r),_e("div",Y1e,[_e("h1",J1e,He(je(e)("error.404.title")),1),_e("p",null,He(je(e)("error.404.message")),1),Ze(i,{to:{name:"index"},class:"btn btn-primary"},{default:ns(()=>[mn(He(je(e)("action.backToHome")),1)]),_:1})]),o[0]||(o[0]=_e("hr",null,null,-1)),Ze(a),Ze(l),Ze(c)]),_:1})}}}),ewe={key:0},LI={__name:"nuxt-root",setup(t){const e=()=>null,n=Ct(),s=n.deferHydration();if(n.isHydrating){const l=n.hooks.hookOnce("app:error",s);Fn().beforeEach(l)}const o=!1;Hi(Eu,Gl()),n.hooks.callHookWith(l=>l.map(c=>c()),"vue:setup");const r=dp(),i=!1;kE((l,c,u)=>{if(n.hooks.callHook("vue:error",l,c,u).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),aB(l)&&(l.fatal||l.unhandled))return n.runWithContext(()=>el(l)),!1});const a=!1;return(l,c)=>(Ft(),$o(vy,{onResolve:je(s)},{default:ns(()=>[je(i)?(Ft(),so("div",ewe)):je(r)?(Ft(),$o(je(Z1e),{key:1,error:je(r)},null,8,["error"])):je(a)?(Ft(),$o(je(e),{key:2,context:je(a)},null,8,["context"])):je(o)?(Ft(),$o(jF(je(o)),{key:3})):(Ft(),$o(je(g0e),{key:4}))]),_:1},8,["onResolve"]))}};let FI;{let t;FI=async function(){var i,a;if(t)return t;const s=!!(((i=window.__NUXT__)==null?void 0:i.serverRendered)??((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?pM(LI):fM(LI),o=k3({vueApp:s});async function r(l){await o.callHook("app:error",l),o.payload.error=o.payload.error||ku(l)}s.config.errorHandler=r;try{await N3(o,eW)}catch(l){r(l)}try{await o.hooks.callHook("app:created",s),await o.hooks.callHook("app:beforeMount",s),s.mount(S3),await o.hooks.callHook("app:mounted",s),await Wl()}catch(l){r(l)}return s.config.errorHandler===r&&(s.config.errorHandler=void 0),s},t=FI().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{ya as A,c$ as B,Hl as C,et as D,Q0e as E,Xt as F,bf as G,axe as H,twe as I,t4 as J,Bxe as K,p1e as L,X1e as M,m1e as N,F1e as O,Fk as P,pwe as Q,fwe as R,mwe as S,rk as T,Ot as U,Wxe as V,vwe as W,ny as X,swe as Y,WF as Z,og as _,so as a,kP as b,$o as c,fn as d,rg as e,_e as f,mn as g,Ze as h,AL as i,Fn as j,Gl as k,gwe as l,ur as m,HF as n,Ft as o,iwe as p,zF as q,Go as r,nwe as s,He as t,je as u,owe as v,ns as w,J1 as x,rwe as y,H_ as z};
